(()=>{var e={5350:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],l=o[1],c=new r(function(e,t,n){return 3*(t+n)/4-n}(0,a,l)),u=0,h=l>0?a-4:a;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===l&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,o=[],a=16383,s=0,c=i-r;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));1===r?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,i){for(var r,o,a=[],s=t;s<i;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},4686:(e,t,n)=>{"use strict";const i=n(5350),r=n(7947),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let i=s(n);const r=i.write(e,t);r!==n&&(i=i.slice(0,r));return i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);const r=function(e){if(l.isBuffer(e)){const t=0|f(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||X(e.length)?s(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),s(e<0?0:0|f(e))}function d(e){const t=e.length<0?0:0|f(e.length),n=s(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return i?-1:G(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){let o,a=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){let i=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===l)return i*a}else-1!==i&&(o-=o-i),i=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){let n=!0;for(let i=0;i<l;i++)if(c(e,o+i)!==c(t,i)){n=!1;break}if(n)return o}return-1}function w(e,t,n,i){n=Number(n)||0;const r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;const o=t.length;let a;for(i>o/2&&(i=o/2),a=0;a<i;++a){const i=parseInt(t.substr(2*a,2),16);if(X(i))return a;e[n+a]=i}return a}function k(e,t,n,i){return Y(G(t,e.length-n),e,n,i)}function C(e,t,n,i){return Y(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function M(e,t,n,i){return Y(K(t),e,n,i)}function E(e,t,n,i){return Y(function(e,t){let n,i,r;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function S(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);const i=[];let r=t;for(;r<n;){const t=e[r];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(r+a<=n){let n,i,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[r+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[r+1],i=e[r+2],128==(192&n)&&128==(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[r+1],i=e[r+2],s=e[r+3],128==(192&n)&&128==(192&i)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=a}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=T));return n}(i)}t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return h(e)},l.allocUnsafeSlow=function(e){return h(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=l.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(Z(t,Uint8Array))r+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,r)):Uint8Array.prototype.set.call(i,t,r);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,r)}r+=t.length}return i},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):v.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,r){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(i,r),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){o=c[e],a=u[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return C(this,e,t,n);case"base64":return M(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function D(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function A(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function L(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let i=t;i<n;++i)r+=$[e[i]];return r}function P(e,t,n){const i=e.slice(t,n);let r="";for(let e=0;e<i.length-1;e+=2)r+=String.fromCharCode(i[e]+256*i[e+1]);return r}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,n,i,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function O(e,t,n,i,r){U(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function B(e,t,n,i,r){U(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function N(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,i,o){return t=+t,n>>>=0,o||N(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,o){return t=+t,n>>>=0,o||N(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e+--t],r=1;for(;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Q((function(e){_(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))})),l.prototype.readBigUInt64BE=Q((function(e){_(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=t,r=1,o=this[e+--i];for(;i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Q((function(e){_(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Q((function(e){_(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){F(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){F(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Q((function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Q((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);F(this,e,t,n,i-1,-i)}let r=0,o=1,a=0;for(this[t]=255&e;++r<n&&(o*=256);)e<0&&0===a&&0!==this[t+r-1]&&(a=1),this[t+r]=(e/o|0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);F(this,e,t,n,i-1,-i)}let r=n-1,o=1,a=0;for(this[t+r]=255&e;--r>=0&&(o*=256);)e<0&&0===a&&0!==this[t+r+1]&&(a=1),this[t+r]=(e/o|0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Q((function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Q((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const o=l.isBuffer(e)?e:l.from(e,i),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=o[r%a]}return this};const V={};function z(e,t,n){V[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function U(e,t,n,i,r,o){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let r;throw r=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(o+1)}${i}`:`>= -(2${i} ** ${8*(o+1)-1}${i}) and < 2 ** ${8*(o+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new V.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){_(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||W(t,e.length-(n+1))}(i,r,o)}function _(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,n){if(Math.floor(e)!==e)throw _(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(e,t,n){let i=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=q(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=q(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i}),RangeError);const j=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const i=e.length;let r=null;const o=[];for(let a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function K(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const $=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function Q(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},7137:e=>{"use strict";e.exports=function(e,t){var n,i=String(e),r=0;if("string"!=typeof t)throw new Error("Expected character");n=i.indexOf(t);for(;-1!==n;)r++,n=i.indexOf(t,n+t.length);return r}},1606:(e,t)=>{"use strict";t.A=function(e,t){var o=t||{},a=!1===o.padLeft?r:i,s=o.padRight?i:r;e[e.length-1]===r&&(e=e.concat(r));return e.join(s+n+a).trim()};var n=",",i=" ",r=""},927:(e,t,n)=>{var i=n(2877);e.exports=function(e){var t={},n=new i(e);t.trackNumber=n.nextUIntV(),t.timecode=n.nextInt16BE();var r=n.nextUInt8();t.invisible=!!(8&r),t.keyframe=!!(128&r),t.discardable=!!(1&r);var o=(6&r)>>1;return t.frames=function(e,t){if(!t)return[e.nextBuffer()];var n,i,r=[],o=e.nextUInt8()+1;if(2===t){if(e.length%o!=0)throw new Error("Fixed-Size Lacing Error");for(i=e.length/o,n=0;n<o;n++)r.push(e.nextBuffer(i));return r}var a=[];if(1===t)for(n=0;n<o-1;n++){var s;i=0;do{i+=s=e.nextUInt8()}while(255===s);a.push(i)}else if(3===t)for(i=e.nextUIntV(),a.push(i),n=1;n<o-1;n++)i+=e.nextIntV(),a.push(i);for(n=0;n<o-1;n++)r.push(e.nextBuffer(a[n]));return r.push(e.nextBuffer()),r}(n,o),t}},2877:(e,t,n)=>{var i=n(5420);function r(e){this.buffer=e,this.offset=0}r.prototype.nextInt16BE=function(){var e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e},r.prototype.nextUInt8=function(){var e=this.buffer.readUInt8(this.offset);return this.offset+=1,e},r.prototype.nextUIntV=function(){var e=i(this.buffer,this.offset);return this.offset+=e.length,e.value},r.prototype.nextIntV=function(){var e=i(this.buffer,this.offset,!0);return this.offset+=e.length,e.value},r.prototype.nextBuffer=function(e){var t=e?this.buffer.slice(this.offset,this.offset+e):this.buffer.slice(this.offset);return this.offset+=e||this.length,t},Object.defineProperty(r.prototype,"length",{get:function(){return this.buffer.length-this.offset}}),e.exports=r},5420:e=>{e.exports=function(e,t,n){t=t||0;for(var i=1;i<=8&&!(e[t]>=Math.pow(2,8-i));i++);if(i>8)throw new Error("Unrepresentable length: "+i+" "+e.toString("hex",t,t+i));if(t+i>e.length)return null;var r,o=e[t]&(1<<8-i)-1;for(r=1;r<i;r++){if(7===r&&o>=Math.pow(2,45)&&e[t+7]>0)return{length:i,value:-1};o*=Math.pow(2,8),o+=e[t+r]}return n&&(o-=Math.pow(2,7*i-1)-1),{length:i,value:o}}},9784:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,r,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var r,o,a,c;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=l(e))>0&&a.length>r&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function d(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):f(r,r.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function m(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,a;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1918:e=>{"use strict";function t(e){if("string"==typeof e)return function(e){return t;function t(t){return n(t)&&t.tagName===e}}(e);if(null==e)return n;if("object"==typeof e)return function(e){var n=function(e){var n=e.length,i=-1,r=[];for(;++i<n;)r[i]=t(e[i]);return r}(e),i=n.length;return r;function r(){for(var e=-1;++e<i;)if(n[e].apply(this,arguments))return!0;return!1}}(e);if("function"==typeof e)return function(e){return t;function t(t){return n(t)&&Boolean(e.apply(this,arguments))}}(e);throw new Error("Expected function, string, or array as test")}function n(e){return e&&"object"==typeof e&&"element"===e.type&&"string"==typeof e.tagName}e.exports=t},1765:(e,t,n)=>{"use strict";var i=n(1918);function r(e,t,n,r,o){var a=null!=r,s=null!=n,l=i(t);if(s&&("number"!=typeof n||n<0||n===1/0))throw new Error("Expected positive finite index for child node");if(a&&(!r.type||!r.children))throw new Error("Expected parent node");if(!e||!e.type||"string"!=typeof e.type)return!1;if(a!==s)throw new Error("Expected both parent and index");return l.call(o,e,n,r)}e.exports=r,r.convert=i},2292:(e,t,n)=>{"use strict";e.exports=n(1184)},9795:(e,t,n)=>{"use strict";var i=n(2700);e.exports=function(e,t){var n=t&&t.children,r=n&&n.length,o=-1,a=[];for(;++o<r;)a[o]=i(e,n[o],o,t);return a.join("")}},5393:(e,t,n)=>{"use strict";var i=n(8593),r=n(631);e.exports=function(e,t){var n=t.value;if(e.bogusComments)return"<?"+r(n,i(e.entities,{subset:s}))+">";return"\x3c!--"+n.replace(o,(function(t){return r(t,i(e.entities,{subset:a}))}))+"--\x3e"};var o=/^>|^->|<!--|-->|--!>|<!-$/g,a=["<",">"],s=[">"]},6405:e=>{"use strict";var t="\0",n="&",i="`",r='"',o="'",a=[" ","\t","\n","\r","\f"],s=a.concat(n,"/",">","="),l=a.concat(n,">"),c=l.concat(t,r,o,"<","=",i),u=[n,o],h=[n,r];e.exports={name:[[s,s.concat(r,o,i)],[s.concat(t,r,o,"<"),s.concat(t,r,o,"<",i)]],unquoted:[[l,c],[c,c]],single:[[u,u.concat(r,i)],[u.concat(t),u.concat(t,r,i)]],double:[[h,h.concat(o,i)],[h.concat(t),h.concat(t,o,i)]]}},326:(e,t,n)=>{"use strict";var i=n(8593),r=n(7137),o=n(631);e.exports=function(e,t){var n=e.upperDoctype?s:a,i=e.tightDoctype?"":" ",r=t.name,o=t.public,c=t.system,u=["<!"+n];r&&(u.push(i,r),null!=o?u.push(" public",i,l(e,o)):null!=c&&u.push(" system"),null!=c&&u.push(i,l(e,c)));return u.join("")+">"};var a="doctype",s=a.toUpperCase();function l(e,t){var n=e.quote,a=e.alternative,s=String(t),l=r(s,n)>r(s,a)?a:n;return l+o(s,i(e.entities,{subset:["<","&",l]}))+l}},5684:(e,t,n)=>{"use strict";var i=n(8593),r=n(7422),o=n(9489),a=n(8502).A,s=n(1606).A,l=n(631),c=n(7137),u=n(9795),h=n(6405);e.exports=function(e,t,n,i){var o,a,s,l,c,h,m=e.schema,w=t.tagName,k="",C=t;"html"===m.space&&"svg"===w&&(e.schema=r);c=function(e,t){var n,i,r,o,a,s,l=[];for(n in t)null!=(i=t[n])&&(r=b(e,n,i))&&l.push(r);o=l.length,a=-1;for(;++a<o;)r=l[a],s=null,e.tight&&(s=r.charAt(r.length-1)),a!==o-1&&s!==p&&s!==f&&(l[a]=r+d);return l.join("")}(e,t.properties),"svg"===e.schema.space?(s=!1,a=!0,o=e.closeEmpty):(s=e.omit,a=e.close,o=-1!==e.voids.indexOf(w.toLowerCase()),"template"===w&&(C=t.content));l=u(e,C),o=!l&&o,!c&&s&&s.opening(t,n,i)||(k=v+w+(c?d+c:""),o&&a&&(h=c.charAt(c.length-1),(!e.tightClose||h===y||"svg"===e.schema.space&&h&&h!==p&&h!==f)&&(k+=d),k+=y),k+=g);k+=l,o||s&&s.closing(t,n,i)||(k+=v+y+w+g);return e.schema=m,k};var d=" ",p='"',f="'",m="=",v="<",g=">",y="/";function b(e,t,n){var r=e.schema,u=o(r,t),d=u.attribute;return!u.overloadedBoolean||n!==d&&""!==n?(u.boolean||u.overloadedBoolean&&"string"!=typeof n)&&(n=Boolean(n)):n=!0,null==n||!1===n||"number"==typeof n&&isNaN(n)?"":(d=function(e,t){var n="html"===e.schema.space?e.valid:1,r=h.name[n][e.safe];return l(t,i(e.entities,{subset:r}))}(e,d),!0===n?d:d+function(e,t,n,r){var o,u,d=e.entities,p=e.quote,v=e.alternative,g=e.smart;"object"==typeof n&&"length"in n&&(n=(r.commaSeparated?s:a)(n,{padLeft:!e.tightLists}));n=String(n),(n||!e.collapseEmpty)&&(o=n,e.unquoted&&(u=h.unquoted[e.valid][e.safe],o=l(n,i(d,{subset:u,attribute:!0}))),e.unquoted&&o===n||(g&&c(n,p)>c(n,v)&&(p=v),u=(u=p===f?h.single:h.double)["html"===e.schema.space?e.valid:1][e.safe],n=p+(n=l(n,i(d,{subset:u,attribute:!0})))+p),n=n?m+n:n);return n}(e,0,n,u))}},1184:(e,t,n)=>{"use strict";var i=n(8707),r=n(7422),o=n(7274),a=n(3784),s=n(2700);e.exports=function(e,t){var n=t||{},h=n.quote||l,d=h===l?c:l,p=n.quoteSmart,f=e&&"object"==typeof e&&"length"in e?{type:"root",children:e}:e;if(h!==l&&h!==c)throw new Error("Invalid quote `"+h+"`, expected `"+c+"` or `"+l+"`");void 0!==n.allowDangerousHTML&&(u||(u=!0,console.warn("Deprecation warning: `allowDangerousHTML` is a nonstandard option, use `allowDangerousHtml` instead")));return s({valid:n.allowParseErrors?0:1,safe:n.allowDangerousCharacters?0:1,schema:"svg"===n.space?r:i,omit:n.omitOptionalTags&&a,quote:h,alternative:d,smart:p,unquoted:Boolean(n.preferUnquoted),tight:n.tightAttributes,upperDoctype:Boolean(n.upperDoctype),tightDoctype:Boolean(n.tightDoctype),bogusComments:Boolean(n.bogusComments),tightLists:n.tightCommaSeparatedLists,tightClose:n.tightSelfClosing,collapseEmpty:n.collapseEmptyAttributes,dangerous:n.allowDangerousHtml||n.allowDangerousHTML,voids:n.voids||o.concat(),entities:n.entities||{},close:n.closeSelfClosing,closeEmpty:n.closeEmptyElements},f)};var l='"',c="'",u=!1},1339:(e,t,n)=>{"use strict";var i=n(493),r=n(1765),o=n(6134),a=n(7578).P,s=n(1575),l=i("comment"),c="optgroup",u=["option"].concat(c),h=["dt","dd"],d=["menuitem","hr","menu"],p=["rp","rt"],f=["tbody","tfoot"],m=["td","th"],v=["a","audio","del","ins","map","noscript","video"],g=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","menu","nav","ol","p","pre","section","table","ul"];function y(e,t,n){var i=a(n,t,!0);return!i||!l(i)&&!o(i)}function b(e,t,n){var i=a(n,t);return!i||r(i,p)}function w(e,t,n){var i=a(n,t);return!i||r(i,m)}e.exports=s({html:function(e,t,n){var i=a(n,t);return!i||!l(i)},head:y,body:function(e,t,n){var i=a(n,t);return!i||!l(i)},p:function(e,t,n){var i=a(n,t);return i?r(i,g):!n||!r(n,v)},li:function(e,t,n){var i=a(n,t);return!i||r(i,"li")},dt:function(e,t,n){var i=a(n,t);return i&&r(i,h)},dd:function(e,t,n){var i=a(n,t);return!i||r(i,h)},rt:b,rp:b,optgroup:function(e,t,n){var i=a(n,t);return!i||r(i,c)},option:function(e,t,n){var i=a(n,t);return!i||r(i,u)},menuitem:function(e,t,n){var i=a(n,t);return!i||r(i,d)},colgroup:y,caption:y,thead:function(e,t,n){var i=a(n,t);return i&&r(i,f)},tbody:function(e,t,n){var i=a(n,t);return!i||r(i,f)},tfoot:function(e,t,n){return!a(n,t)},tr:function(e,t,n){var i=a(n,t);return!i||r(i,"tr")},td:w,th:w})},3784:(e,t,n)=>{"use strict";t.opening=n(3804),t.closing=n(1339)},1575:e=>{"use strict";e.exports=function(e){return function(n,i,r){var o=n.tagName;return!!t.call(e,o)&&e[o](n,i,r)}};var t={}.hasOwnProperty},3804:(e,t,n)=>{"use strict";var i=n(493),r=n(1765),o=n(7578).g,a=n(4159),s=n(8518),l=n(6134),c=n(1339),u=n(1575),h=i("comment"),d=["title","base"],p=["meta","link","script","style","template"],f=["thead","tbody"];e.exports=u({html:function(e){var t=a(e);return!t||!h(t)},head:function(e){var t,n,i=e.children,o=i.length,a=[],s=-1;for(;++s<o;)if(n=(t=i[s]).tagName,r(t,d)){if(-1!==a.indexOf(n))return!1;a.push(n)}return 0!==o},body:function(e){var t=a(e,!0);return!t||!h(t)&&!l(t)&&!r(t,p)},colgroup:function(e,t,n){var i=o(n,t),l=a(e,!0);if(r(i,"colgroup")&&c(i,s(n,i),n))return!1;return l&&r(l,"col")},tbody:function(e,t,n){var i=o(n,t),l=a(e);if(r(i,f)&&c(i,s(n,i),n))return!1;return l&&r(l,"tr")}})},4159:(e,t,n)=>{"use strict";var i=n(7578).P;e.exports=function(e,t){return i(e,-1,t)}},8518:e=>{"use strict";e.exports=function(e,t){return e&&e.children&&e.children.indexOf(t)}},7578:(e,t,n)=>{"use strict";var i=n(9098);function r(e){return function(t,n,r){var o=t&&t.children,a=n+e,s=o&&o[a];if(!r)for(;s&&i(s);)s=o[a+=e];return s}}t.g=r(-1),t.P=r(1)},6134:(e,t,n)=>{"use strict";var i=n(493),r=n(9098);e.exports=function(e){return o(e)&&r(e.value.charAt(0))};var o=i("text")},2700:(e,t,n)=>{"use strict";e.exports=function(e,t,n,o){var a=t&&t.type;if(!a)throw new Error("Expected node, not `"+t+"`");if(!i.call(r,a))throw new Error("Cannot compile unknown node `"+a+"`");return r[a](e,t,n,o)};var i={}.hasOwnProperty,r={};r.root=n(9795),r.text=n(8785),r.element=n(5684),r.doctype=n(326),r.comment=n(5393),r.raw=n(618)},618:(e,t,n)=>{"use strict";var i=n(8785);e.exports=function(e,t){return e.dangerous?t.value:i(e,t)}},8785:(e,t,n)=>{"use strict";var i=n(8593),r=n(631);e.exports=function(e,t,n,o){var a=t.value;return function(e){return e&&("script"===e.tagName||"style"===e.tagName)}(o)?a:r(a,i(e.entities,{subset:["<","&"]}))}},9098:e=>{"use strict";e.exports=function(e){var n;if(e&&"object"==typeof e&&"text"===e.type)n=e.value||"";else{if("string"!=typeof e)return!1;n=e}return""===n.replace(t,"")};var t=/[ \t\n\f\r]/g},7947:(e,t)=>{t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,r),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+p]=255&a,p+=f,a/=256,c-=8);e[n+p-f]|=128*m}},6661:function(e,t){!function(e){var t,n="undefined",i=n!==typeof Buffer&&Buffer,r=n!==typeof Uint8Array&&Uint8Array,o=n!==typeof ArrayBuffer&&ArrayBuffer,a=[0,0,0,0,0,0,0,0],s=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},l=4294967296;function c(s,c,w){var k=c?0:4,C=c?4:0,M=c?0:3,E=c?1:2,S=c?2:1,x=c?3:0,T=c?v:y,D=c?g:b,A=I.prototype,L="is"+s,P="_"+L;return A.buffer=void 0,A.offset=0,A[P]=!0,A.toNumber=F,A.toString=function(e){var t=this.buffer,n=this.offset,i=B(t,n+k),r=B(t,n+C),o="",a=!w&&2147483648&i;a&&(i=~i,r=l-r);e=e||10;for(;;){var s=i%e*l+r;if(i=Math.floor(i/e),r=Math.floor(s/e),o=(s%e).toString(e)+o,!i&&!r)break}a&&(o="-"+o);return o},A.toJSON=F,A.toArray=u,i&&(A.toBuffer=h),r&&(A.toArrayBuffer=d),I[L]=function(e){return!(!e||!e[P])},e[s]=I,I;function I(e,s,c,u){return this instanceof I?function(e,s,c,u,h){r&&o&&(s instanceof o&&(s=new r(s)),u instanceof o&&(u=new r(u)));if(!(s||c||u||t))return void(e.buffer=m(a,0));if(!p(s,c)){var d=t||Array;h=c,u=s,c=0,s=t===i?i.alloc(8):new d(8)}if(e.buffer=s,e.offset=c|=0,n===typeof u)return;"string"==typeof u?function(e,t,n,i){var r=0,o=n.length,a=0,s=0;"-"===n[0]&&r++;var c=r;for(;r<o;){var u=parseInt(n[r++],i);if(!(u>=0))break;s=s*i+u,a=a*i+Math.floor(s/l),s%=l}c&&(a=~a,s?s=l-s:a++);O(e,t+k,a),O(e,t+C,s)}(s,c,u,h||10):p(u,h)?f(s,c,u,h):"number"==typeof h?(O(s,c+k,u),O(s,c+C,h)):u>0?T(s,c,u):u<0?D(s,c,u):f(s,c,a,0)}(this,e,s,c,u):new I(e,s,c,u)}function F(){var e=this.buffer,t=this.offset,n=B(e,t+k),i=B(e,t+C);return w||(n|=0),n?n*l+i:i}function O(e,t,n){e[t+x]=255&n,n>>=8,e[t+S]=255&n,n>>=8,e[t+E]=255&n,n>>=8,e[t+M]=255&n}function B(e,t){return 16777216*e[t+M]+(e[t+E]<<16)+(e[t+S]<<8)+e[t+x]}}function u(e){var n=this.buffer,i=this.offset;return t=null,!1!==e&&s(n)?8===n.length?n:n.slice(i,i+8):m(n,i)}function h(e){var n=this.buffer,r=this.offset;return t=i,!1!==e&&i.isBuffer(n)?8===n.length?n:n.slice(r,r+8):i.from(d.call(this,e))}function d(e){var n=this.buffer,i=this.offset,a=n.buffer;if(t=r,!1!==e&&!n.offset&&a instanceof o)return 8===a.byteLength?a:a.slice(i,i+8);var s=new r(8);return f(s,0,n,i),s.buffer}function p(e,t){var n=e&&e.length;return t|=0,n&&t+8<=n&&"string"!=typeof e[t]}function f(e,t,n,i){t|=0,i|=0;for(var r=0;r<8;r++)e[t++]=255&n[i++]}function m(e,t){return Array.prototype.slice.call(e,t,t+8)}function v(e,t,n){for(var i=t+8;i>t;)e[--i]=255&n,n/=256}function g(e,t,n){var i=t+8;for(n++;i>t;)e[--i]=255&-n^255,n/=256}function y(e,t,n){for(var i=t+8;t<i;)e[t++]=255&n,n/=256}function b(e,t,n){var i=t+8;for(n++;t<i;)e[t++]=255&-n^255,n/=256}c("Uint64BE",!0,!0),c("Int64BE",!0,!1),c("Uint64LE",!1,!0),c("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})},2346:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},5514:(e,t,n)=>{"use strict";var i=n(2346),r=n(3502);e.exports=function(e){return i(e)||r(e)}},2660:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},3502:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},6966:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}},7497:(e,t,n)=>{"use strict";var i=n(6658);e.exports=function(e,t){return function(e){return t;function t(t){var n=t&&o(t);return n&&r.call(e,n)?e[n]:null}}(function(e){var t={};if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return i(e,"definition",n),t;function n(e){var n=o(e.identifier);r.call(t,n)||(t[n]=e)}}(e))};var r={}.hasOwnProperty;function o(e){return e.toUpperCase()}},4297:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r,o=t.children||[],a=o.length,s=[],l=-1;for(;++l<a;)(n=i(e,o[l],t))&&(l&&"break"===o[l-1].type&&(n.value&&(n.value=n.value.replace(/^\s+/,"")),(r=n.children&&n.children[0])&&r.value&&(r.value=r.value.replace(/^\s+/,""))),s=s.concat(n));return s};var i=n(7194)},7583:(e,t,n)=>{"use strict";e.exports=function(e){var t,n,a,s,l=e.footnoteById,c=e.footnoteOrder,u=c.length,h=-1,d=[];for(;++h<u;)(t=l[c[h].toUpperCase()])&&(s=(a=t.children.concat())[a.length-1],n={type:"link",url:"#fnref-"+t.identifier,data:{hProperties:{className:["footnote-backref"]}},children:[{type:"text",value:"â†©"}]},s&&"paragraph"===s.type||(s={type:"paragraph",children:[]},a.push(s)),s.children.push(n),d.push({type:"listItem",data:{hProperties:{id:"fn-"+t.identifier}},children:a,position:t.position}));if(0===d.length)return null;return e(null,"div",{className:["footnotes"]},o([i(e),r(e,{type:"list",ordered:!0,children:d})],!0))};var i=n(5125),r=n(396),o=n(7824)},9331:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"blockquote",i(r(e,t),!0))};var i=n(7824),r=n(4297)},1501:(e,t,n)=>{"use strict";e.exports=function(e,t){return[e(t,"br"),i("text","\n")]};var i=n(9650)},3849:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r=t.value?t.value+"\n":"",o=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),a={};o&&(a.className=["language-"+o]);n=e(t,"code",a,[i("text",r)]),t.meta&&(n.data={meta:t.meta});return e(t.position,"pre",[n])};var i=n(9650)},5275:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"del",i(e,t))};var i=n(4297)},4738:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"em",i(e,t))};var i=n(4297)},3632:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteOrder,r=String(t.identifier);-1===n.indexOf(r)&&n.push(r);return e(t.position,"sup",{id:"fnref-"+r},[e(t,"a",{href:"#fn-"+r,className:["footnote-ref"]},[i("text",t.label||r)])])};var i=n(9650)},8812:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteById,r=e.footnoteOrder,o=1;for(;o in n;)o++;return o=String(o),r.push(o),n[o]={type:"footnoteDefinition",identifier:o,children:[{type:"paragraph",children:t.children}],position:t.position},i(e,{type:"footnoteReference",identifier:o,position:t.position})};var i=n(3632)},544:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"h"+t.depth,i(e,t))};var i=n(4297)},9941:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.dangerous?e.augment(t,i("raw",t.value)):null};var i=n(9650)},4255:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o=e.definition(t.identifier);if(!o)return r(e,t);n={src:i(o.url||""),alt:t.alt},null!==o.title&&void 0!==o.title&&(n.title=o.title);return e(t,"img",n)};var i=n(8131),r=n(3390)},3603:(e,t,n)=>{"use strict";var i=n(8131);e.exports=function(e,t){var n={src:i(t.url),alt:t.alt};null!==t.title&&void 0!==t.title&&(n.title=t.title);return e(t,"img",n)}},942:(e,t,n)=>{"use strict";function i(){return null}e.exports={blockquote:n(9331),break:n(1501),code:n(3849),delete:n(5275),emphasis:n(4738),footnoteReference:n(3632),footnote:n(8812),heading:n(544),html:n(9941),imageReference:n(4255),image:n(3603),inlineCode:n(935),linkReference:n(7756),link:n(9040),listItem:n(8942),list:n(396),paragraph:n(6504),root:n(4824),strong:n(5151),table:n(2258),text:n(8711),thematicBreak:n(5125),toml:i,yaml:i,definition:i,footnoteDefinition:i}},935:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=t.value.replace(/\r?\n|\r/g," ");return e(t,"code",[i("text",n)])};var i=n(9650)},7756:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,a=e.definition(t.identifier);if(!a)return r(e,t);n={href:i(a.url||"")},null!==a.title&&void 0!==a.title&&(n.title=a.title);return e(t,"a",n,o(e,t))};var i=n(8131),r=n(3390),o=n(4297)},9040:(e,t,n)=>{"use strict";var i=n(8131),r=n(4297);e.exports=function(e,t){var n={href:i(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);return e(t,"a",n,r(e,t))}},8942:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var a,s,l,c=r(e,t),u=c[0],h=n?function(e){var t=e.spread,n=e.children,i=n.length,r=-1;for(;!t&&++r<i;)t=o(n[r]);return t}(n):o(t),d={},p=[];"boolean"==typeof t.checked&&(u&&"p"===u.tagName||(u=e(null,"p",[]),c.unshift(u)),u.children.length>0&&u.children.unshift(i("text"," ")),u.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),d.className=["task-list-item"]);a=c.length,s=-1;for(;++s<a;)l=c[s],(h||0!==s||"p"!==l.tagName)&&p.push(i("text","\n")),"p"!==l.tagName||h?p.push(l):p=p.concat(l.children);a&&(h||"p"!==l.tagName)&&p.push(i("text","\n"));return e(t,"li",d,p)};var i=n(9650),r=n(4297);function o(e){var t=e.spread;return null==t?e.children.length>1:t}},396:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,a={},s=t.ordered?"ol":"ul",l=-1;"number"==typeof t.start&&1!==t.start&&(a.start=t.start);n=r(e,t),o=n.length;for(;++l<o;)if(n[l].properties.className&&-1!==n[l].properties.className.indexOf("task-list-item")){a.className=["contains-task-list"];break}return e(t,s,a,i(n,!0))};var i=n(7824),r=n(4297)},6504:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"p",i(e,t))};var i=n(4297)},4824:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("root",r(o(e,t))))};var i=n(9650),r=n(7824),o=n(4297)},5151:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"strong",i(e,t))};var i=n(4297)},2258:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,a,s,l,c,u=t.children,h=u.length,d=t.align||[],p=d.length,f=[];for(;h--;){for(a=u[h].children,l=0===h?"th":"td",n=p||a.length,s=[];n--;)c=a[n],s[n]=e(c,l,{align:d[n]},c?o(e,c):[]);f[h]=e(u[h],"tr",r(s,!0))}return e(t,"table",r([e(f[0].position,"thead",r([f[0]],!0))].concat(f[1]?e({start:i.start(f[1]),end:i.end(f[f.length-1])},"tbody",r(f.slice(1),!0)):[]),!0))};var i=n(1039),r=n(7824),o=n(4297)},8711:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))};var i=n(9650)},5125:e=>{"use strict";e.exports=function(e,t){return e(t,"hr")}},7194:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var i,r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");i=o.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.indexOf(r)>-1?s:e.unknownHandler;return("function"==typeof i?i:a)(e,t,n)};var i=n(9650),r=n(4297),o={}.hasOwnProperty;function a(e,t){return function(e){var t=e.data||{};if(o.call(t,"hName")||o.call(t,"hProperties")||o.call(t,"hChildren"))return!1;return"value"in e}(t)?e.augment(t,i("text",t.value)):e(t,"div",r(e,t))}function s(e,t){var n;return t.children?((n=Object.assign({},t)).children=r(e,t),n):t}},3390:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,a,s=t.referenceType,l="]";"collapsed"===s?l+="[]":"full"===s&&(l+="["+(t.label||t.identifier)+"]");if("imageReference"===t.type)return i("text","!["+t.alt+l);n=r(e,t),(o=n[0])&&"text"===o.type?o.value="["+o.value:n.unshift(i("text","["));(a=n[n.length-1])&&"text"===a.type?a.value+=l:n.push(i("text",l));return n};var i=n(9650),r=n(4297)},7824:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=[],r=-1,o=e.length;t&&n.push(i("text","\n"));for(;++r<o;)r&&n.push(i("text","\n")),n.push(e[r]);t&&e.length>0&&n.push(i("text","\n"));return n};var i=n(9650)},8131:e=>{"use strict";var t={};function n(e,i,r){var o,a,s,l,c,u="";for("string"!=typeof i&&(r=i,i=n.defaultChars),void 0===r&&(r=!0),c=function(e){var n,i,r=t[e];if(r)return r;for(r=t[e]=[],n=0;n<128;n++)i=String.fromCharCode(n),/^[0-9a-z]$/i.test(i)?r.push(i):r.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2));for(n=0;n<e.length;n++)r[e.charCodeAt(n)]=e[n];return r}(i),o=0,a=e.length;o<a;o++)if(s=e.charCodeAt(o),r&&37===s&&o+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))u+=e.slice(o,o+3),o+=2;else if(s<128)u+=c[s];else if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&o+1<a&&(l=e.charCodeAt(o+1))>=56320&&l<=57343){u+=encodeURIComponent(e[o]+e[o+1]),o++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[o]);return u}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()",e.exports=n},4013:(e,t,n)=>{"use strict";var i=n(5115);e.exports=function(e){return!!r.call(i,e)&&i[e]};var r={}.hasOwnProperty},3507:(e,t,n)=>{"use strict";var i=n(4472),r=n(8192),o=n(3502),a=n(6966),s=n(5514),l=n(4013);e.exports=function(e,t){var n,o,a={};t||(t={});for(o in d)n=t[o],a[o]=null==n?d[o]:n;(a.position.indent||a.position.start)&&(a.indent=a.position.indent||[],a.position=a.position.start);return function(e,t){var n,o,a,d,z,q,U,_,W,j,G,K,Y,Z,X,$,Q,J,ee,te=t.additional,ne=t.nonTerminated,ie=t.text,re=t.reference,oe=t.warning,ae=t.textContext,se=t.referenceContext,le=t.warningContext,ce=t.position,ue=t.indent||[],he=e.length,de=0,pe=-1,fe=ce.column||1,me=ce.line||1,ve="",ge=[];"string"==typeof te&&(te=te.charCodeAt(0));$=ye(),_=oe?be:h,de--,he++;for(;++de<he;)if(z===f&&(fe=ue[pe]||1),(z=e.charCodeAt(de))===g){if((U=e.charCodeAt(de+1))===p||U===f||U===m||U===v||U===g||U===b||U!=U||te&&U===te){ve+=u(z),fe++;continue}for(K=Y=de+1,ee=Y,U===k?(ee=++K,(U=e.charCodeAt(ee))===C||U===M?(Z=x,ee=++K):Z=T):Z=S,n="",G="",d="",X=A[Z],ee--;++ee<he&&X(U=e.charCodeAt(ee));)d+=u(U),Z===S&&c.call(i,d)&&(n=d,G=i[d]);(a=e.charCodeAt(ee)===y)&&(ee++,(o=Z===S&&l(d))&&(n=d,G=o)),J=1+ee-Y,(a||ne)&&(d?Z===S?(a&&!G?_(O,1):(n!==d&&(J=1+(ee=K+n.length)-K,a=!1),a||(W=n?L:I,t.attribute?(U=e.charCodeAt(ee))===w?(_(W,J),G=null):s(U)?G=null:_(W,J):_(W,J))),q=G):(a||_(P,J),H(q=parseInt(d,D[Z]))?(_(N,J),q=u(E)):q in r?(_(B,J),q=r[q]):(j="",V(q)&&_(B,J),q>65535&&(j+=u((q-=65536)>>>10|55296),q=56320|1023&q),q=j+u(q))):Z!==S&&_(F,J)),q?(we(),$=ye(),de=ee-1,fe+=ee-Y+1,ge.push(q),(Q=ye()).offset++,re&&re.call(se,q,{start:$,end:Q},e.slice(Y-1,ee)),$=Q):(d=e.slice(Y-1,ee),ve+=d,fe+=d.length,de=ee-1)}else 10===z&&(me++,pe++,fe=0),z==z?(ve+=u(z),fe++):we();return ge.join("");function ye(){return{line:me,column:fe,offset:de+(ce.offset||0)}}function be(e,t){var n=ye();n.column+=t,n.offset+=t,oe.call(le,R[e],n,e)}function we(){ve&&(ge.push(ve),ie&&ie.call(ae,ve,{start:$,end:ye()}),ve="")}}(e,a)};var c={}.hasOwnProperty,u=String.fromCharCode,h=Function.prototype,d={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},p=9,f=10,m=12,v=32,g=38,y=59,b=60,w=61,k=35,C=88,M=120,E=65533,S="named",x="hexadecimal",T="decimal",D={};D[x]=16,D[T]=10;var A={};A[S]=s,A[T]=o,A[x]=a;var L=1,P=2,I=3,F=4,O=5,B=6,N=7,R={};function H(e){return e>=55296&&e<=57343||e>1114111}function V(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||!(65535&~e)||65534==(65535&e)}R[L]="Named character references must be terminated by a semicolon",R[P]="Numeric character references must be terminated by a semicolon",R[I]="Named character references cannot be empty",R[F]="Numeric character references cannot be empty",R[O]="Named character references must be known",R[B]="Numeric character references cannot be disallowed",R[N]="Numeric character references cannot be outside the permissible Unicode range"},9489:(e,t,n)=>{"use strict";var i=n(1383),r=n(4197),o=n(5325),a="data";e.exports=function(e,t){var n=i(t),d=t,p=o;if(n in e.normal)return e.property[e.normal[n]];n.length>4&&n.slice(0,4)===a&&s.test(t)&&("-"===t.charAt(4)?d=function(e){var t=e.slice(5).replace(l,h);return a+t.charAt(0).toUpperCase()+t.slice(1)}(t):t=function(e){var t=e.slice(4);if(l.test(t))return e;t=t.replace(c,u),"-"!==t.charAt(0)&&(t="-"+t);return a+t}(t),p=r);return new p(d,t)};var s=/^data[-\w.:]+$/i,l=/-[a-z]/g,c=/[A-Z]/g;function u(e){return"-"+e.toLowerCase()}function h(e){return e.charAt(1).toUpperCase()}},8707:(e,t,n)=>{"use strict";var i=n(5261),r=n(6920),o=n(313),a=n(4506),s=n(8055),l=n(535);e.exports=i([o,r,a,s,l])},8055:(e,t,n)=>{"use strict";var i=n(5176),r=n(7297),o=i.booleanish,a=i.number,s=i.spaceSeparated;e.exports=r({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:o,ariaAutoComplete:null,ariaBusy:o,ariaChecked:o,ariaColCount:a,ariaColIndex:a,ariaColSpan:a,ariaControls:s,ariaCurrent:null,ariaDescribedBy:s,ariaDetails:null,ariaDisabled:o,ariaDropEffect:s,ariaErrorMessage:null,ariaExpanded:o,ariaFlowTo:s,ariaGrabbed:o,ariaHasPopup:null,ariaHidden:o,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:s,ariaLevel:a,ariaLive:null,ariaModal:o,ariaMultiLine:o,ariaMultiSelectable:o,ariaOrientation:null,ariaOwns:s,ariaPlaceholder:null,ariaPosInSet:a,ariaPressed:o,ariaReadOnly:o,ariaRelevant:null,ariaRequired:o,ariaRoleDescription:s,ariaRowCount:a,ariaRowIndex:a,ariaRowSpan:a,ariaSelected:o,ariaSetSize:a,ariaSort:null,ariaValueMax:a,ariaValueMin:a,ariaValueNow:a,ariaValueText:null,role:null}})},535:(e,t,n)=>{"use strict";var i=n(5176),r=n(7297),o=n(1716),a=i.boolean,s=i.overloadedBoolean,l=i.booleanish,c=i.number,u=i.spaceSeparated,h=i.commaSeparated;e.exports=r({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:o,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:h,acceptCharset:u,accessKey:u,action:null,allow:null,allowFullScreen:a,allowPaymentRequest:a,allowUserMedia:a,alt:null,as:null,async:a,autoCapitalize:null,autoComplete:u,autoFocus:a,autoPlay:a,capture:a,charSet:null,checked:a,cite:null,className:u,cols:c,colSpan:null,content:null,contentEditable:l,controls:a,controlsList:u,coords:c|h,crossOrigin:null,data:null,dateTime:null,decoding:null,default:a,defer:a,dir:null,dirName:null,disabled:a,download:s,draggable:l,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:a,formTarget:null,headers:u,height:c,hidden:a,high:c,href:null,hrefLang:null,htmlFor:u,httpEquiv:u,id:null,imageSizes:null,imageSrcSet:h,inputMode:null,integrity:null,is:null,isMap:a,itemId:null,itemProp:u,itemRef:u,itemScope:a,itemType:u,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:a,low:c,manifest:null,max:null,maxLength:c,media:null,method:null,min:null,minLength:c,multiple:a,muted:a,name:null,nonce:null,noModule:a,noValidate:a,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:a,optimum:c,pattern:null,ping:u,placeholder:null,playsInline:a,poster:null,preload:null,readOnly:a,referrerPolicy:null,rel:u,required:a,reversed:a,rows:c,rowSpan:c,sandbox:u,scope:null,scoped:a,seamless:a,selected:a,shape:null,size:c,sizes:null,slot:null,span:c,spellCheck:l,src:null,srcDoc:null,srcLang:null,srcSet:h,start:c,step:null,style:null,tabIndex:c,target:null,title:null,translate:null,type:null,typeMustMatch:a,useMap:null,value:l,width:c,wrap:null,align:null,aLink:null,archive:u,axis:null,background:null,bgColor:null,border:c,borderColor:null,bottomMargin:c,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:a,declare:a,event:null,face:null,frame:null,frameBorder:null,hSpace:c,leftMargin:c,link:null,longDesc:null,lowSrc:null,marginHeight:c,marginWidth:c,noResize:a,noHref:a,noShade:a,noWrap:a,object:null,profile:null,prompt:null,rev:null,rightMargin:c,rules:null,scheme:null,scrolling:l,standby:null,summary:null,text:null,topMargin:c,valueType:null,version:null,vAlign:null,vLink:null,vSpace:c,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:a,disableRemotePlayback:a,prefix:null,property:null,results:c,security:null,unselectable:null}})},4834:(e,t,n)=>{"use strict";var i=n(5176),r=n(7297),o=n(6933),a=i.boolean,s=i.number,l=i.spaceSeparated,c=i.commaSeparated,u=i.commaOrSpaceSeparated;e.exports=r({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:o,properties:{about:u,accentHeight:s,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:s,amplitude:s,arabicForm:null,ascent:s,attributeName:null,attributeType:null,azimuth:s,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:s,by:null,calcMode:null,capHeight:s,className:l,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:s,diffuseConstant:s,direction:null,display:null,dur:null,divisor:s,dominantBaseline:null,download:a,dx:null,dy:null,edgeMode:null,editable:null,elevation:s,enableBackground:null,end:null,event:null,exponent:s,externalResourcesRequired:null,fill:null,fillOpacity:s,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:c,g2:c,glyphName:c,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:s,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:s,horizOriginX:s,horizOriginY:s,id:null,ideographic:s,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:s,k:s,k1:s,k2:s,k3:s,k4:s,kernelMatrix:u,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:s,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:s,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:s,overlineThickness:s,paintOrder:null,panose1:null,path:null,pathLength:s,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:l,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:s,pointsAtY:s,pointsAtZ:s,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:u,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:u,rev:u,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:u,requiredFeatures:u,requiredFonts:u,requiredFormats:u,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:s,specularExponent:s,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:s,strikethroughThickness:s,string:null,stroke:null,strokeDashArray:u,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:s,strokeOpacity:s,strokeWidth:null,style:null,surfaceScale:s,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:u,tabIndex:s,tableValues:null,target:null,targetX:s,targetY:s,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:u,to:null,transform:null,u1:null,u2:null,underlinePosition:s,underlineThickness:s,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:s,values:null,vAlphabetic:s,vMathematical:s,vectorEffect:null,vHanging:s,vIdeographic:s,version:null,vertAdvY:s,vertOriginX:s,vertOriginY:s,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:s,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}})},1716:(e,t,n)=>{"use strict";var i=n(6933);e.exports=function(e,t){return i(e,t.toLowerCase())}},6933:e=>{"use strict";e.exports=function(e,t){return t in e?e[t]:t}},7297:(e,t,n)=>{"use strict";var i=n(1383),r=n(1782),o=n(4197);e.exports=function(e){var t,n,a=e.space,s=e.mustUseProperty||[],l=e.attributes||{},c=e.properties,u=e.transform,h={},d={};for(t in c)n=new o(t,u(l,t),c[t],a),-1!==s.indexOf(t)&&(n.mustUseProperty=!0),h[t]=n,d[i(t)]=t,d[i(n.attribute)]=t;return new r(h,d,a)}},4197:(e,t,n)=>{"use strict";var i=n(5325),r=n(5176);e.exports=s,s.prototype=new i,s.prototype.defined=!0;var o=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],a=o.length;function s(e,t,n,s){var c,u=-1;for(l(this,"space",s),i.call(this,e,t);++u<a;)l(this,c=o[u],(n&r[c])===r[c])}function l(e,t,n){n&&(e[t]=n)}},5325:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t){this.property=e,this.attribute=t}t.space=null,t.attribute=null,t.property=null,t.boolean=!1,t.booleanish=!1,t.overloadedBoolean=!1,t.number=!1,t.commaSeparated=!1,t.spaceSeparated=!1,t.commaOrSpaceSeparated=!1,t.mustUseProperty=!1,t.defined=!1},5261:(e,t,n)=>{"use strict";var i=n(8593),r=n(1782);e.exports=function(e){var t,n,o=e.length,a=[],s=[],l=-1;for(;++l<o;)t=e[l],a.push(t.property),s.push(t.normal),n=t.space;return new r(i.apply(null,a),i.apply(null,s),n)}},1782:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}t.space=null,t.normal={},t.property={}},5176:(e,t)=>{"use strict";var n=0;function i(){return Math.pow(2,++n)}t.boolean=i(),t.booleanish=i(),t.overloadedBoolean=i(),t.number=i(),t.spaceSeparated=i(),t.commaSeparated=i(),t.commaOrSpaceSeparated=i()},6920:(e,t,n)=>{"use strict";var i=n(7297);e.exports=i({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},313:(e,t,n)=>{"use strict";var i=n(7297);e.exports=i({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},4506:(e,t,n)=>{"use strict";var i=n(7297),r=n(1716);e.exports=i({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:r,properties:{xmlns:null,xmlnsXLink:null}})},1383:e=>{"use strict";e.exports=function(e){return e.toLowerCase()}},7422:(e,t,n)=>{"use strict";var i=n(5261),r=n(6920),o=n(313),a=n(4506),s=n(8055),l=n(4834);e.exports=i([o,r,a,s,l])},8502:(e,t)=>{"use strict";t.A=function(e){return e.join(i).trim()};var n="",i=" ",r=/[ \t\n\r\f]+/g},631:(e,t,n)=>{"use strict";e.exports=n(9159)},6426:(e,t,n)=>{var i,r=n(9710),o={};for(i in e.exports=o,r)o[r[i]]=i},9677:e=>{e.exports=String.fromCharCode},3303:e=>{e.exports={}.hasOwnProperty},1632:e=>{"use strict";e.exports=function(e,t){if(e=e.replace(t.subset?function(e){var t=[],n=-1;for(;++n<e.length;)t.push(e[n].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}(t.subset):/["&'<>`]/g,n),t.subset||t.escapeOnly)return e;return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,(function(e,n,i){return t.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,i.charCodeAt(n+2),t)})).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,n);function n(e,n,i){return t.format(e.charCodeAt(0),i.charCodeAt(n+1),t)}}},1185:(e,t,n)=>{"use strict";var i=n(8593),r=n(1632),o=n(6901);e.exports=function(e,t){return r(e,i(t,{format:o}))}},9932:(e,t,n)=>{"use strict";var i=n(1632),r=n(6901);e.exports=function(e){return i(e,{escapeOnly:!0,useNamedReferences:!0,format:r})}},9159:(e,t,n)=>{"use strict";var i=n(1185),r=n(9932);e.exports=i,i.escape=r},6901:(e,t,n)=>{e.exports=function(e,t,n){var a,s,l;(n.useNamedReferences||n.useShortestReferences)&&(a=o(e,t,n.omitOptionalSemicolons,n.attribute));!n.useShortestReferences&&a||(s=i(e,t,n.omitOptionalSemicolons),n.useShortestReferences&&(l=r(e,t,n.omitOptionalSemicolons)).length<s.length&&(s=l));return a&&(!n.useShortestReferences||a.length<s.length)?a:s};var i=n(4169),r=n(5245),o=n(2315)},5245:(e,t,n)=>{e.exports=function(e,t,n){var r="&#"+String(e);return n&&t&&!/\d/.test(i(t))?r:r+";"};var i=n(9677)},4169:(e,t,n)=>{e.exports=function(e,t,n){var r="&#x"+e.toString(16).toUpperCase();return n&&t&&!/[\dA-Fa-f]/.test(i(t))?r:r+";"};var i=n(9677)},2315:(e,t,n)=>{e.exports=function(e,t,n,l){var c,u,h=o(e);if(a.call(r,h))return u="&"+(c=r[h]),n&&a.call(i,c)&&-1===s.indexOf(c)&&(!l||t&&61!==t&&/[^\da-z]/i.test(o(t)))?u:u+";";return""};var i=n(4472),r=n(6426),o=n(9677),a=n(3303),s=n(5547)},9650:e=>{"use strict";e.exports=function(e,t,n){var i;null!=n||"object"==typeof t&&!Array.isArray(t)||(n=t,t={});i=Object.assign({type:String(e)},t),Array.isArray(n)?i.children=n:null!=n&&(i.value=String(n));return i}},6859:e=>{"use strict";e.exports=function(e){return!(e&&e.position&&e.position.start&&e.position.start.line&&e.position.start.column&&e.position.end&&e.position.end.line&&e.position.end.column)}},493:e=>{"use strict";function t(e){if(null==e)return n;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var n=[],i=-1;for(;++i<e.length;)n[i]=t(e[i]);return r;function r(){for(var e=-1;++e<n.length;)if(n[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(){return!0}e.exports=t},1039:e=>{"use strict";var t=r("start"),n=r("end");function i(e){return{start:t(e),end:n(e)}}function r(e){return t.displayName=e,t;function t(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:isNaN(n.offset)?null:n.offset}}}e.exports=i,i.start=t,i.end=n},8124:(e,t,n)=>{"use strict";var i=n(6658);function r(e){delete e.position}function o(e){e.position=void 0}e.exports=function(e,t){return i(e,t?r:o),e}},2472:e=>{"use strict";var t={}.hasOwnProperty;function n(e){return e&&"object"==typeof e||(e={}),r(e.line)+":"+r(e.column)}function i(e){return e&&"object"==typeof e||(e={}),n(e.start)+"-"+n(e.end)}function r(e){return e&&"number"==typeof e?e:1}e.exports=function(e){if(!e||"object"!=typeof e)return"";if(t.call(e,"position")||t.call(e,"type"))return i(e.position);if(t.call(e,"start")||t.call(e,"end"))return i(e);if(t.call(e,"line")||t.call(e,"column"))return n(e);return""}},5001:e=>{e.exports=function(e){return e}},2888:(e,t,n)=>{"use strict";e.exports=l;var i=n(493),r=n(5001),o=!0,a="skip",s=!1;function l(e,t,n,l){var c,u;"function"==typeof t&&"function"!=typeof n&&(l=n,n=t,t=null),u=i(t),c=l?-1:1,function e(i,h,d){var p,f="object"==typeof i&&null!==i?i:{};"string"==typeof f.type&&(p="string"==typeof f.tagName?f.tagName:"string"==typeof f.name?f.name:void 0,m.displayName="node ("+r(f.type+(p?"<"+p+">":""))+")");return m;function m(){var r,p,f=d.concat(i),m=[];if((!t||u(i,h,d[d.length-1]||null))&&(m=function(e){if(null!==e&&"object"==typeof e&&"length"in e)return e;if("number"==typeof e)return[o,e];return[e]}(n(i,d)),m[0]===s))return m;if(i.children&&m[0]!==a)for(p=(l?i.children.length:-1)+c;p>-1&&p<i.children.length;){if((r=e(i.children[p],p,f)())[0]===s)return r;p="number"==typeof r[1]?r[1]:p+c}return m}}(e,null,[])()}l.CONTINUE=o,l.SKIP=a,l.EXIT=s},6658:(e,t,n)=>{"use strict";e.exports=s;var i=n(2888),r=i.CONTINUE,o=i.SKIP,a=i.EXIT;function s(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}s.CONTINUE=r,s.SKIP=o,s.EXIT=a},922:e=>{"use strict";e.exports=function(e){var t=String(e),n=[],i=/\r?\n|\r/g;for(;i.exec(t);)n.push(i.lastIndex);return n.push(t.length+1),{toPoint:r,toPosition:r,toOffset:function(e){var t,i=e&&e.line,r=e&&e.column;isNaN(i)||isNaN(r)||!(i-1 in n)||(t=(n[i-2]||0)+r-1||0);return t>-1&&t<n[n.length-1]?t:-1}};function r(e){var t=-1;if(e>-1&&e<n[n.length-1])for(;++t<n.length;)if(n[t]>e)return{line:t+1,column:e-(n[t-1]||0)+1,offset:e};return{}}}},859:(e,t,n)=>{"use strict";var i=n(2472);function r(){}e.exports=a,r.prototype=Error.prototype,a.prototype=new r;var o=a.prototype;function a(e,t,n){var r,o,a;"string"==typeof t&&(n=t,t=null),r=function(e){var t,n=[null,null];"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),o=i(t)||"1:1",a={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(a=t,t=t.start):a.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=o,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=a,this.source=r[0],this.ruleId=r[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},7074:(e,t,n)=>{"use strict";e.exports=n(9478)},4571:(e,t,n)=>{"use strict";var i=n(6931),r=n(7512),o=n(2660);e.exports=l;var a={}.hasOwnProperty,s=["history","path","basename","stem","extname","dirname"];function l(e){var t,n;if(e){if("string"==typeof e||o(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof l))return new l(e);for(this.data={},this.messages=[],this.history=[],this.cwd=r.cwd(),n=-1;++n<s.length;)t=s[n],a.call(e,t)&&(this[t]=e[t]);for(t in e)s.indexOf(t)<0&&(this[t]=e[t])}function c(e,t){if(e&&e.indexOf(i.sep)>-1)throw new Error("`"+t+"` cannot be a path: did not expect `"+i.sep+"`")}function u(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function h(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}l.prototype.toString=function(e){return(this.contents||"").toString(e)},Object.defineProperty(l.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){u(e,"path"),this.path!==e&&this.history.push(e)}}),Object.defineProperty(l.prototype,"dirname",{get:function(){return"string"==typeof this.path?i.dirname(this.path):void 0},set:function(e){h(this.path,"dirname"),this.path=i.join(e||"",this.basename)}}),Object.defineProperty(l.prototype,"basename",{get:function(){return"string"==typeof this.path?i.basename(this.path):void 0},set:function(e){u(e,"basename"),c(e,"basename"),this.path=i.join(this.dirname||"",e)}}),Object.defineProperty(l.prototype,"extname",{get:function(){return"string"==typeof this.path?i.extname(this.path):void 0},set:function(e){if(c(e,"extname"),h(this.path,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=i.join(this.dirname,this.stem+(e||""))}}),Object.defineProperty(l.prototype,"stem",{get:function(){return"string"==typeof this.path?i.basename(this.path,this.extname):void 0},set:function(e){u(e,"stem"),c(e,"stem"),this.path=i.join(this.dirname||"",e+(this.extname||""))}})},9478:(e,t,n)=>{"use strict";var i=n(859),r=n(4571);e.exports=r,r.prototype.message=function(e,t,n){var r=new i(e,t,n);this.path&&(r.name=this.path+":"+r.name,r.file=this.path);return r.fatal=!1,this.messages.push(r),r},r.prototype.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},r.prototype.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},6931:(e,t)=>{"use strict";function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}t.basename=function(e,t){var i,r,o,a,s=0,l=-1;if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');if(n(e),i=e.length,void 0===t||!t.length||t.length>e.length){for(;i--;)if(47===e.charCodeAt(i)){if(o){s=i+1;break}}else l<0&&(o=!0,l=i+1);return l<0?"":e.slice(s,l)}if(t===e)return"";r=-1,a=t.length-1;for(;i--;)if(47===e.charCodeAt(i)){if(o){s=i+1;break}}else r<0&&(o=!0,r=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(l=i):(a=-1,l=r));s===l?l=r:l<0&&(l=e.length);return e.slice(s,l)},t.dirname=function(e){var t,i,r;if(n(e),!e.length)return".";t=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(i){t=r;break}}else i||(i=!0);return t<0?47===e.charCodeAt(0)?"/":".":1===t&&47===e.charCodeAt(0)?"//":e.slice(0,t)},t.extname=function(e){var t,i,r,o=-1,a=0,s=-1,l=0;n(e),r=e.length;for(;r--;)if(47!==(i=e.charCodeAt(r)))s<0&&(t=!0,s=r+1),46===i?o<0?o=r:1!==l&&(l=1):o>-1&&(l=-1);else if(t){a=r+1;break}if(o<0||s<0||0===l||1===l&&o===s-1&&o===a+1)return"";return e.slice(o,s)},t.join=function(){var e,t=-1;for(;++t<arguments.length;)n(arguments[t]),arguments[t]&&(e=void 0===e?arguments[t]:e+"/"+arguments[t]);return void 0===e?".":function(e){var t,i;n(e),t=47===e.charCodeAt(0),i=function(e,t){var n,i,r="",o=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){if((i=r.lastIndexOf("/"))!==r.length-1){i<0?(r="",o=0):o=(r=r.slice(0,i)).length-1-r.lastIndexOf("/"),a=l,s=0;continue}}else if(r.length){r="",o=0,a=l,s=0;continue}t&&(r=r.length?r+"/..":"..",o=2)}else r.length?r+="/"+e.slice(a+1,l):r=e.slice(a+1,l),o=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return r}(e,!t),i.length||t||(i=".");i.length&&47===e.charCodeAt(e.length-1)&&(i+="/");return t?"/"+i:i}(e)},t.sep="/"},7512:(e,t)=>{"use strict";t.cwd=function(){return"/"}},8177:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(6661),o=n(9840),a=n(9840),s=n(5416);!function(e){e[e.STATE_TAG=1]="STATE_TAG",e[e.STATE_SIZE=2]="STATE_SIZE",e[e.STATE_CONTENT=3]="STATE_CONTENT"}(i||(i={}));var l=function(){function e(){this._buffer=new o.Buffer(0),this._tag_stack=[],this._state=i.STATE_TAG,this._cursor=0,this._total=0,this._schema=s.byEbmlID,this._result=[]}return e.prototype.decode=function(e){this.readChunk(e);var t=this._result;return this._result=[],t},e.prototype.readChunk=function(e){for(this._buffer=a.concat([this._buffer,new o.Buffer(e)]);this._cursor<this._buffer.length&&(this._state!==i.STATE_TAG||this.readTag())&&(this._state!==i.STATE_SIZE||this.readSize())&&(this._state!==i.STATE_CONTENT||this.readContent()););},e.prototype.getSchemaInfo=function(e){return this._schema[e]||{name:"unknown",level:-1,type:"unknown",description:"unknown"}},e.prototype.readTag=function(){if(this._cursor>=this._buffer.length)return!1;var e=(0,o.readVint)(this._buffer,this._cursor);if(null==e)return!1;var t=this._buffer.slice(this._cursor,this._cursor+e.length).reduce((function(e,t,n,i){return e+t*Math.pow(16,2*(i.length-1-n))}),0),n=this.getSchemaInfo(t),r={EBML_ID:t.toString(16),schema:n,type:n.type,name:n.name,level:n.level,tagStart:this._total,tagEnd:this._total+e.length,sizeStart:this._total+e.length,sizeEnd:null,dataStart:null,dataEnd:null,dataSize:null,data:null};return this._tag_stack.push(r),this._cursor+=e.length,this._total+=e.length,this._state=i.STATE_SIZE,!0},e.prototype.readSize=function(){if(this._cursor>=this._buffer.length)return!1;var e=(0,o.readVint)(this._buffer,this._cursor);if(null==e)return!1;var t=this._tag_stack[this._tag_stack.length-1];return t.sizeEnd=t.sizeStart+e.length,t.dataStart=t.sizeEnd,t.dataSize=e.value,-1===e.value?(t.dataEnd=-1,"m"===t.type&&(t.unknownSize=!0)):t.dataEnd=t.sizeEnd+e.value,this._cursor+=e.length,this._total+=e.length,this._state=i.STATE_CONTENT,!0},e.prototype.readContent=function(){var e=this._tag_stack[this._tag_stack.length-1];if("m"===e.type){if(e.isEnd=!1,this._result.push(e),this._state=i.STATE_TAG,0===e.dataSize){var t=Object.assign({},e,{isEnd:!0});this._result.push(t),this._tag_stack.pop()}return!0}if(this._buffer.length<this._cursor+e.dataSize)return!1;var n=this._buffer.slice(this._cursor,this._cursor+e.dataSize);switch(this._buffer=this._buffer.slice(this._cursor+e.dataSize),e.data=n,e.type){case"u":e.value=n.readUIntBE(0,n.length);break;case"i":e.value=n.readIntBE(0,n.length);break;case"f":e.value=4===e.dataSize?n.readFloatBE(0):8===e.dataSize?n.readDoubleBE(0):(console.warn("cannot read ".concat(e.dataSize," octets float. failback to 0")),0);break;case"s":e.value=n.toString("ascii");break;case"8":e.value=n.toString("utf8");break;case"b":e.value=n;break;case"d":e.value=(0,o.convertEBMLDateToJSDate)(new r.Int64BE(n).toNumber())}if(null===e.value)throw new Error("unknown tag type:"+e.type);for(this._result.push(e),this._total+=e.dataSize,this._state=i.STATE_TAG,this._cursor=0,this._tag_stack.pop();this._tag_stack.length>0;){var a=this._tag_stack[this._tag_stack.length-1];if(a.dataEnd<0)return this._tag_stack.pop(),!0;if(this._total<a.dataEnd)break;if("m"!==a.type)throw new Error("parent element is not master element");t=Object.assign({},a,{isEnd:!0});this._result.push(t),this._tag_stack.pop()}return!0},e}();t.default=l},4741:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9840),r=n(9840),o=n(5416),a=function(){function e(){this._schema=o.byEbmlID,this._buffers=[],this._stack=[]}return e.prototype.encode=function(e){var t=this;return i.concat(e.reduce((function(e,n){return e.concat(t.encodeChunk(n))}),[])).buffer},e.prototype.encodeChunk=function(e){return"m"===e.type?e.isEnd?this.endTag(e):this.startTag(e):(e.data=r.Buffer.from(e.data),this.writeTag(e)),this.flush()},e.prototype.flush=function(){var e=this._buffers;return this._buffers=[],e},e.prototype.getSchemaInfo=function(e){for(var t=Object.keys(this._schema).map(Number),n=0;n<t.length;n++){var i=t[n];if(this._schema[i].name===e)return new r.Buffer(i.toString(16),"hex")}return null},e.prototype.writeTag=function(e){var t=e.name,n=this.getSchemaInfo(t),r=e.data;if(null==n)throw new Error("No schema entry found for "+t);var o=i.encodeTag(n,r);this._stack.length>0?this._stack[this._stack.length-1].children.push({tagId:n,elm:e,children:[],data:o}):this._buffers=this._buffers.concat(o)},e.prototype.startTag=function(e){var t=e.name,n=this.getSchemaInfo(t);if(null==n)throw new Error("No schema entry found for "+t);if(e.unknownSize){var o=i.encodeTag(n,new r.Buffer(0),e.unknownSize);this._buffers=this._buffers.concat(o)}else{var a={tagId:n,elm:e,children:[],data:null};this._stack.length>0&&this._stack[this._stack.length-1].children.push(a),this._stack.push(a)}},e.prototype.endTag=function(e){e.name;var t=this._stack.pop();if(null==t)throw new Error("EBML structure is broken");if(t.elm.name!==e.name)throw new Error("EBML structure is broken");var n=t.children.reduce((function(e,t){if(null===t.data)throw new Error("EBML structure is broken");return e.concat(t.data)}),[]),r=i.concat(n);"m"===t.elm.type?t.data=i.encodeTag(t.tagId,r,t.elm.unknownSize):t.data=i.encodeTag(t.tagId,r),this._stack.length<1&&(this._buffers=this._buffers.concat(t.data))},e}();t.default=a},5226:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(9784),a=n(9840),s=function(e){function t(){var t=e.call(this)||this;return t.logGroup="",t.hasLoggingStarted=!1,t.metadataloaded=!1,t.chunks=[],t.stack=[],t.segmentOffset=0,t.last2SimpleBlockVideoTrackTimecode=[0,0],t.last2SimpleBlockAudioTrackTimecode=[0,0],t.lastClusterTimecode=0,t.lastClusterPosition=0,t.timecodeScale=1e6,t.metadataSize=0,t.metadatas=[],t.cues=[],t.firstVideoBlockRead=!1,t.firstAudioBlockRead=!1,t.currentTrack={TrackNumber:-1,TrackType:-1,DefaultDuration:null,CodecDelay:null},t.trackTypes=[],t.trackDefaultDuration=[],t.trackCodecDelay=[],t.trackInfo={type:"nothing"},t.ended=!1,t.logging=!1,t.use_duration_every_simpleblock=!1,t.use_webp=!1,t.use_segment_info=!0,t.drop_default_duration=!0,t}return r(t,e),t.prototype.stop=function(){for(this.ended=!0,this.emit_segment_info();this.stack.length;)this.stack.pop(),this.logging&&console.groupEnd();this.logging&&this.hasLoggingStarted&&this.logGroup&&console.groupEnd()},t.prototype.emit_segment_info=function(){var e=this.chunks;if(this.chunks=[],this.metadataloaded){if(!this.use_segment_info)return;var t=this.lastClusterTimecode,n=this.duration,i=this.timecodeScale;this.emit("cluster",{timecode:t,data:e}),this.emit("duration",{timecodeScale:i,duration:n})}else{this.metadataloaded=!0,this.metadatas=e;var r=this.trackTypes.indexOf(1),o=this.trackTypes.indexOf(2);if(this.trackInfo=r>=0&&o>=0?{type:"both",trackNumber:r}:r>=0?{type:"video",trackNumber:r}:o>=0?{type:"audio",trackNumber:o}:{type:"nothing"},!this.use_segment_info)return;this.emit("metadata",{data:e,metadataSize:this.metadataSize})}},t.prototype.read=function(e){var t=this,n=!1;if(!this.ended){if("m"===e.type)if(e.isEnd)this.stack.pop();else{var i=this.stack[this.stack.length-1];if(null!=i&&i.level>=e.level){this.stack.pop(),this.logging&&console.groupEnd(),i.dataEnd=e.dataEnd,i.dataSize=e.dataEnd-i.dataStart,i.unknownSize=!1;var r=Object.assign({},i,{name:i.name,type:i.type,isEnd:!0});this.chunks.push(r)}this.stack.push(e)}if("m"===e.type&&"Segment"==e.name)0!=this.segmentOffset&&console.warn("Multiple segments detected!"),this.segmentOffset=e.dataStart,this.emit("segment_offset",this.segmentOffset);else if("b"===e.type&&"SimpleBlock"===e.name){var o=a.ebmlBlock(e.data),s=o.timecode,l=o.trackNumber,c=o.frames;if(1===this.trackTypes[l]){if(!this.firstVideoBlockRead&&(this.firstVideoBlockRead=!0,"both"===this.trackInfo.type||"video"===this.trackInfo.type)){var u=this.lastClusterTimecode+s;this.cues.push({CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:u}),this.emit("cue_info",{CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:this.lastClusterTimecode}),this.emit("cue",{CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:u})}this.last2SimpleBlockVideoTrackTimecode=[this.last2SimpleBlockVideoTrackTimecode[1],s]}else if(2===this.trackTypes[l]){if(!this.firstAudioBlockRead&&(this.firstAudioBlockRead=!0,"audio"===this.trackInfo.type)){u=this.lastClusterTimecode+s;this.cues.push({CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:u}),this.emit("cue_info",{CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:this.lastClusterTimecode}),this.emit("cue",{CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:u})}this.last2SimpleBlockAudioTrackTimecode=[this.last2SimpleBlockAudioTrackTimecode[1],s]}this.use_duration_every_simpleblock&&this.emit("duration",{timecodeScale:this.timecodeScale,duration:this.duration}),this.use_webp&&c.forEach((function(e){if("9d012a"===e.slice(3,6).toString("hex")){var n=a.VP8BitStreamToRiffWebPBuffer(e),i=new Blob([n],{type:"image/webp"}),r=t.duration;t.emit("webp",{currentTime:r,webp:i})}}))}else"m"===e.type&&"Cluster"===e.name&&!1===e.isEnd?(this.firstVideoBlockRead=!1,this.firstAudioBlockRead=!1,this.emit_segment_info(),this.emit("cluster_ptr",e.tagStart),this.lastClusterPosition=e.tagStart):"u"===e.type&&"Timecode"===e.name?this.lastClusterTimecode=e.value:"u"===e.type&&"TimecodeScale"===e.name?this.timecodeScale=e.value:"m"===e.type&&"TrackEntry"===e.name?e.isEnd?(this.trackTypes[this.currentTrack.TrackNumber]=this.currentTrack.TrackType,this.trackDefaultDuration[this.currentTrack.TrackNumber]=this.currentTrack.DefaultDuration,this.trackCodecDelay[this.currentTrack.TrackNumber]=this.currentTrack.CodecDelay):this.currentTrack={TrackNumber:-1,TrackType:-1,DefaultDuration:null,CodecDelay:null}:"u"===e.type&&"TrackType"===e.name?this.currentTrack.TrackType=e.value:"u"===e.type&&"TrackNumber"===e.name?this.currentTrack.TrackNumber=e.value:"u"===e.type&&"CodecDelay"===e.name?this.currentTrack.CodecDelay=e.value:"u"===e.type&&"DefaultDuration"===e.name?this.drop_default_duration?(console.warn("DefaultDuration detected!, remove it"),n=!0):this.currentTrack.DefaultDuration=e.value:"unknown"===e.name&&console.warn(e);!this.metadataloaded&&e.dataEnd>0&&(this.metadataSize=e.dataEnd),n||this.chunks.push(e),this.logging&&this.put(e)}},Object.defineProperty(t.prototype,"duration",{get:function(){if("nothing"===this.trackInfo.type)return console.warn("no video, no audio track"),0;var e=0,t=0,n=0,i=this.trackDefaultDuration[this.trackInfo.trackNumber];if("number"==typeof i)e=i;else if("both"===this.trackInfo.type)this.last2SimpleBlockAudioTrackTimecode[1]>this.last2SimpleBlockVideoTrackTimecode[1]?(e=(this.last2SimpleBlockAudioTrackTimecode[1]-this.last2SimpleBlockAudioTrackTimecode[0])*this.timecodeScale,"number"==typeof(r=this.trackCodecDelay[this.trackTypes.indexOf(2)])&&(t=r),n=this.last2SimpleBlockAudioTrackTimecode[1]):(e=(this.last2SimpleBlockVideoTrackTimecode[1]-this.last2SimpleBlockVideoTrackTimecode[0])*this.timecodeScale,"number"==typeof(r=this.trackCodecDelay[this.trackTypes.indexOf(1)])&&(t=r),n=this.last2SimpleBlockVideoTrackTimecode[1]);else if("video"===this.trackInfo.type){e=(this.last2SimpleBlockVideoTrackTimecode[1]-this.last2SimpleBlockVideoTrackTimecode[0])*this.timecodeScale,"number"==typeof(r=this.trackCodecDelay[this.trackInfo.trackNumber])&&(t=r),n=this.last2SimpleBlockVideoTrackTimecode[1]}else if("audio"===this.trackInfo.type){var r;e=(this.last2SimpleBlockAudioTrackTimecode[1]-this.last2SimpleBlockAudioTrackTimecode[0])*this.timecodeScale,"number"==typeof(r=this.trackCodecDelay[this.trackInfo.trackNumber])&&(t=r),n=this.last2SimpleBlockAudioTrackTimecode[1]}var o=((this.lastClusterTimecode+n)*this.timecodeScale+e-t)/this.timecodeScale;return Math.floor(o)},enumerable:!1,configurable:!0}),t.prototype.addListener=function(t,n){return e.prototype.addListener.call(this,t,n)},t.prototype.put=function(e){this.hasLoggingStarted||(this.hasLoggingStarted=!0,this.logging&&this.logGroup&&console.groupCollapsed(this.logGroup)),"m"===e.type?e.isEnd?console.groupEnd():console.group(e.name+":"+e.tagStart):"b"===e.type?console.log(e.name,e.type):console.log(e.name,e.tagStart,e.type,e.value)},t}(o.EventEmitter);t.default=s},5416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.byEbmlID=void 0,t.byEbmlID={128:{name:"ChapterDisplay",level:4,type:"m",multiple:!0,minver:1,webm:!0,description:"Contains all possible strings to use for the chapter display."},131:{name:"TrackType",level:3,type:"u",mandatory:!0,minver:1,range:"1-254",description:"A set of track types coded on 8 bits (1: video, 2: audio, 3: complex, 0x10: logo, 0x11: subtitle, 0x12: buttons, 0x20: control)."},133:{name:"ChapString",cppname:"ChapterString",level:5,type:"8",mandatory:!0,minver:1,webm:!0,description:"Contains the string to use as the chapter atom."},134:{name:"CodecID",level:3,type:"s",mandatory:!0,minver:1,description:"An ID corresponding to the codec, see the codec page for more info."},136:{name:"FlagDefault",cppname:"TrackFlagDefault",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if that track (audio, video or subs) SHOULD be active if no language found matches the user preference. (1 bit)"},137:{name:"ChapterTrackNumber",level:5,type:"u",mandatory:!0,multiple:!0,minver:1,webm:!1,range:"not 0",description:"UID of the Track to apply this chapter too. In the absense of a control track, choosing this chapter will select the listed Tracks and deselect unlisted tracks. Absense of this element indicates that the Chapter should be applied to any currently used Tracks."},145:{name:"ChapterTimeStart",level:4,type:"u",mandatory:!0,minver:1,webm:!0,description:"Timestamp of the start of Chapter (not scaled)."},146:{name:"ChapterTimeEnd",level:4,type:"u",minver:1,webm:!1,description:"Timestamp of the end of Chapter (timestamp excluded, not scaled)."},150:{name:"CueRefTime",level:5,type:"u",mandatory:!0,minver:2,webm:!1,description:"Timestamp of the referenced Block."},151:{name:"CueRefCluster",level:5,type:"u",mandatory:!0,webm:!1,description:"The Position of the Cluster containing the referenced Block."},152:{name:"ChapterFlagHidden",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a chapter is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"},16980:{name:"ContentCompAlgo",level:6,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The compression algorithm used. Algorithms that have been specified so far are: 0 - zlib,   3 - Header Stripping"},16981:{name:"ContentCompSettings",level:6,type:"b",minver:1,webm:!1,description:"Settings that might be needed by the decompressor. For Header Stripping (ContentCompAlgo=3), the bytes that were removed from the beggining of each frames of the track."},17026:{name:"DocType",level:1,type:"s",mandatory:!0,default:"matroska",minver:1,description:"A string that describes the type of document that follows this EBML header. 'matroska' in our case or 'webm' for webm files."},17029:{name:"DocTypeReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum DocType version an interpreter has to support to read this file."},17030:{name:"EBMLVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of EBML parser used to create the file."},17031:{name:"DocTypeVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of DocType interpreter used to create the file."},17476:{name:"SegmentFamily",level:2,type:"b",multiple:!0,minver:1,webm:!1,bytesize:16,description:"A randomly generated unique ID that all segments related to each other must use (128 bits)."},17505:{name:"DateUTC",level:2,type:"d",minver:1,description:"Date of the origin of timestamp (value 0), i.e. production date."},17540:{name:"TagDefault",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Indication to know if this is the default/original language to use for the given tag. (1 bit)"},17541:{name:"TagBinary",level:4,type:"b",minver:1,webm:!1,description:"The values of the Tag if it is binary. Note that this cannot be used in the same SimpleTag as TagString."},17543:{name:"TagString",level:4,type:"8",minver:1,webm:!1,description:"The value of the Element."},17545:{name:"Duration",level:2,type:"f",minver:1,range:"> 0",description:"Duration of the segment (based on TimecodeScale)."},17816:{name:"ChapterFlagEnabled",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Specify wether the chapter is enabled. It can be enabled/disabled by a Control Track. When disabled, the movie should skip all the content between the TimeStart and TimeEnd of this chapter (see flag notes). (1 bit)"},18016:{name:"FileMimeType",level:3,type:"s",mandatory:!0,minver:1,webm:!1,description:"MIME type of the file."},18017:{name:"FileUsedStartTime",level:3,type:"u",divx:!0,description:"DivX font extension"},18018:{name:"FileUsedEndTime",level:3,type:"u",divx:!0,description:"DivX font extension"},18037:{name:"FileReferral",level:3,type:"b",webm:!1,description:"A binary value that a track/codec can refer to when the attachment is needed."},20529:{name:"ContentEncodingOrder",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Tells when this modification was used during encoding/muxing starting with 0 and counting upwards. The decoder/demuxer has to start with the highest order number it finds and work its way down. This value has to be unique over all ContentEncodingOrder elements in the segment."},20530:{name:"ContentEncodingScope",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"A bit field that describes which elements have been modified in this way. Values (big endian) can be OR'ed. Possible values: 1 - all frame contents, 2 - the track's private data, 4 - the next ContentEncoding (next ContentEncodingOrder. Either the data inside ContentCompression and/or ContentEncryption)"},20531:{name:"ContentEncodingType",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"A value describing what kind of transformation has been done. Possible values: 0 - compression, 1 - encryption"},20532:{name:"ContentCompression",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the compression used. Must be present if the value of ContentEncodingType is 0 and absent otherwise. Each block must be decompressable even if no previous block is available in order not to prevent seeking."},20533:{name:"ContentEncryption",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the encryption used. Must be present if the value of ContentEncodingType is 1 and absent otherwise."},21368:{name:"CueBlockNumber",level:4,type:"u",minver:1,default:1,range:"not 0",description:"Number of the Block in the specified Cluster."},22100:{name:"ChapterStringUID",level:4,type:"8",mandatory:!1,minver:3,webm:!0,description:"A unique string ID to identify the Chapter. Use for WebVTT cue identifier storage."},22337:{name:"WritingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Writing application ("mkvmerge-0.3.3").'},22612:{name:"SilentTracks",cppname:"ClusterSilentTracks",level:2,type:"m",minver:1,webm:!1,description:"The list of tracks that are not used in that part of the stream. It is useful when using overlay tracks on seeking. Then you should decide what track to use."},25152:{name:"ContentEncoding",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Settings for one content encoding like compression or encryption."},25188:{name:"BitDepth",cppname:"AudioBitDepth",level:4,type:"u",minver:1,range:"not 0",description:"Bits per sample, mostly used for PCM."},25906:{name:"SignedElement",level:3,type:"b",multiple:!0,webm:!1,description:"An element ID whose data will be used to compute the signature."},26148:{name:"TrackTranslate",level:3,type:"m",multiple:!0,minver:1,webm:!1,description:"The track identification for the given Chapter Codec."},26897:{name:"ChapProcessCommand",cppname:"ChapterProcessCommand",level:5,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."},26914:{name:"ChapProcessTime",cppname:"ChapterProcessTime",level:6,type:"u",mandatory:!0,minver:1,webm:!1,description:"Defines when the process command should be handled (0: during the whole chapter, 1: before starting playback, 2: after playback of the chapter)."},26916:{name:"ChapterTranslate",level:2,type:"m",multiple:!0,minver:1,webm:!1,description:"A tuple of corresponding ID used by chapter codecs to represent this segment."},26931:{name:"ChapProcessData",cppname:"ChapterProcessData",level:6,type:"b",mandatory:!0,minver:1,webm:!1,description:"Contains the command information. The data should be interpreted depending on the ChapProcessCodecID value. For ChapProcessCodecID = 1, the data correspond to the binary DVD cell pre/post commands."},26948:{name:"ChapProcess",cppname:"ChapterProcess",level:4,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."},26965:{name:"ChapProcessCodecID",cppname:"ChapterProcessCodecID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Contains the type of the codec used for the processing. A value of 0 means native Matroska processing (to be defined), a value of 1 means the DVD command set is used. More codec IDs can be added later."},29555:{name:"Tag",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters."},29572:{name:"SegmentFilename",level:2,type:"8",minver:1,webm:!1,description:"A filename corresponding to this segment."},29766:{name:"AttachmentLink",cppname:"TrackAttachmentLink",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"The UID of an attachment that is used by this codec."},2459272:{name:"CodecName",level:3,type:"8",minver:1,description:"A human-readable string specifying the codec."},408125543:{name:"Segment",level:"0",type:"m",mandatory:!0,multiple:!0,minver:1,description:"This element contains all other top-level (level 1) elements. Typically a Matroska file is composed of 1 segment."},17530:{name:"TagLanguage",level:4,type:"s",mandatory:!0,minver:1,webm:!1,default:"und",description:"Specifies the language of the tag specified, in the Matroska languages form."},17827:{name:"TagName",level:4,type:"8",mandatory:!0,minver:1,webm:!1,description:"The name of the Tag that is going to be stored."},26568:{name:"SimpleTag",cppname:"TagSimple",level:3,recursive:"1",type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contains general information about the target."},25542:{name:"TagAttachmentUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Attachment(s) the tags belong to. If the value is 0 at this level, the tags apply to all the attachments in the Segment."},25540:{name:"TagChapterUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Chapter(s) the tags belong to. If the value is 0 at this level, the tags apply to all chapters in the Segment."},25545:{name:"TagEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the EditionEntry(s) the tags belong to. If the value is 0 at this level, the tags apply to all editions in the Segment."},25541:{name:"TagTrackUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Track(s) the tags belong to. If the value is 0 at this level, the tags apply to all tracks in the Segment."},25546:{name:"TargetType",cppname:"TagTargetType",level:4,type:"s",minver:1,webm:!1,strong:"informational",description:'An  string that can be used to display the logical level of the target like "ALBUM", "TRACK", "MOVIE", "CHAPTER", etc (see TargetType).'},26826:{name:"TargetTypeValue",cppname:"TagTargetTypeValue",level:4,type:"u",minver:1,webm:!1,default:50,description:"A number to indicate the logical level of the target (see TargetType)."},25536:{name:"Targets",cppname:"TagTargets",level:3,type:"m",mandatory:!0,minver:1,webm:!1,description:"Contain all UIDs where the specified meta data apply. It is empty to describe everything in the segment."},307544935:{name:"Tags",level:1,type:"m",multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters. A list of valid tags can be found here."},17677:{name:"ChapProcessPrivate",cppname:"ChapterProcessPrivate",level:5,type:"b",minver:1,webm:!1,description:'Some optional data attached to the ChapProcessCodecID information. For ChapProcessCodecID = 1, it is the "DVD level" equivalent.'},17278:{name:"ChapCountry",cppname:"ChapterCountry",level:5,type:"s",multiple:!0,minver:1,webm:!1,description:"The countries corresponding to the string, same 2 octets as in Internet domains."},17276:{name:"ChapLanguage",cppname:"ChapterLanguage",level:5,type:"s",mandatory:!0,multiple:!0,minver:1,webm:!0,default:"eng",description:"The languages corresponding to the string, in the bibliographic ISO-639-2 form."},143:{name:"ChapterTrack",level:4,type:"m",minver:1,webm:!1,description:"List of tracks on which the chapter applies. If this element is not present, all tracks apply"},25539:{name:"ChapterPhysicalEquiv",level:4,type:"u",minver:1,webm:!1,description:'Specify the physical equivalent of this ChapterAtom like "DVD" (60) or "SIDE" (50), see complete list of values.'},28348:{name:"ChapterSegmentEditionUID",level:4,type:"u",minver:1,webm:!1,range:"not 0",description:"The EditionUID to play from the segment linked in ChapterSegmentUID."},28263:{name:"ChapterSegmentUID",level:4,type:"b",minver:1,webm:!1,range:">0",bytesize:16,description:"A segment to play in place of this chapter. Edition ChapterSegmentEditionUID should be used for this segment, otherwise no edition is used."},29636:{name:"ChapterUID",level:4,type:"u",mandatory:!0,minver:1,webm:!0,range:"not 0",description:"A unique ID to identify the Chapter."},182:{name:"ChapterAtom",level:3,recursive:"1",type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains the atom information to use as the chapter atom (apply to all tracks)."},17885:{name:"EditionFlagOrdered",level:3,type:"u",minver:1,webm:!1,default:0,range:"0-1",description:"Specify if the chapters can be defined multiple times and the order to play them is enforced. (1 bit)"},17883:{name:"EditionFlagDefault",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a flag is set (1) the edition should be used as the default one. (1 bit)"},17853:{name:"EditionFlagHidden",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If an edition is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"},17852:{name:"EditionUID",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"A unique ID to identify the edition. It's useful for tagging an edition."},17849:{name:"EditionEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains all information about a segment edition."},272869232:{name:"Chapters",level:1,type:"m",minver:1,webm:!0,description:"A system to define basic menus and partition data. For more detailed information, look at the Chapters Explanation."},18094:{name:"FileUID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,range:"not 0",description:"Unique ID representing the file, as random as possible."},18012:{name:"FileData",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The data of the file."},18030:{name:"FileName",level:3,type:"8",mandatory:!0,minver:1,webm:!1,description:"Filename of the attached file."},18046:{name:"FileDescription",level:3,type:"8",minver:1,webm:!1,description:"A human-friendly name for the attached file."},24999:{name:"AttachedFile",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"An attached file."},423732329:{name:"Attachments",level:1,type:"m",minver:1,webm:!1,description:"Contain attached files."},235:{name:"CueRefCodecState",level:5,type:"u",webm:!1,default:0,description:"The position of the Codec State corresponding to this referenced element. 0 means that the data is taken from the initial Track Entry."},21343:{name:"CueRefNumber",level:5,type:"u",webm:!1,default:1,range:"not 0",description:"Number of the referenced Block of Track X in the specified Cluster."},219:{name:"CueReference",level:4,type:"m",multiple:!0,minver:2,webm:!1,description:"The Clusters containing the required referenced Blocks."},234:{name:"CueCodecState",level:4,type:"u",minver:2,webm:!1,default:0,description:"The position of the Codec State corresponding to this Cue element. 0 means that the data is taken from the initial Track Entry."},178:{name:"CueDuration",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The duration of the block according to the segment time base. If missing the track's DefaultDuration does not apply and no duration information is available in terms of the cues."},240:{name:"CueRelativePosition",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The relative position of the referenced block inside the cluster with 0 being the first possible position for an element inside that cluster.",position:"clusterRelative"},241:{name:"CueClusterPosition",level:4,type:"u",mandatory:!0,minver:1,description:"The position of the Cluster containing the required Block.",position:"segment"},247:{name:"CueTrack",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track for which a position is given."},183:{name:"CueTrackPositions",level:3,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contain positions for different tracks corresponding to the timestamp."},179:{name:"CueTime",level:3,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp according to the segment time base."},187:{name:"CuePoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains all information relative to a seek point in the segment."},475249515:{name:"Cues",level:1,type:"m",minver:1,description:'A top-level element to speed seeking access. All entries are local to the segment. Should be mandatory for non "live" streams.'},18406:{name:"ContentSigHashAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The hash algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - SHA1-160 2 - MD5"},18405:{name:"ContentSigAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - RSA"},18404:{name:"ContentSigKeyID",level:6,type:"b",minver:1,webm:!1,description:"This is the ID of the private key the data was signed with."},18403:{name:"ContentSignature",level:6,type:"b",minver:1,webm:!1,description:"A cryptographic signature of the contents."},18402:{name:"ContentEncKeyID",level:6,type:"b",minver:1,webm:!1,description:"For public key algorithms this is the ID of the public key the the data was encrypted with."},18401:{name:"ContentEncAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The encryption algorithm used. The value '0' means that the contents have not been encrypted but only signed. Predefined values: 1 - DES, 2 - 3DES, 3 - Twofish, 4 - Blowfish, 5 - AES"},28032:{name:"ContentEncodings",level:3,type:"m",minver:1,webm:!1,description:"Settings for several content encoding mechanisms like compression or encryption."},196:{name:"TrickMasterTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"},199:{name:"TrickMasterTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"},198:{name:"TrickTrackFlag",level:3,type:"u",divx:!0,default:0,description:"DivX trick track extenstions"},193:{name:"TrickTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"},192:{name:"TrickTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"},237:{name:"TrackJoinUID",level:5,type:"u",mandatory:!0,multiple:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of a track whose blocks are used to create this virtual track."},233:{name:"TrackJoinBlocks",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all tracks whose Blocks need to be combined to create this virtual track"},230:{name:"TrackPlaneType",level:6,type:"u",mandatory:!0,minver:3,webm:!1,description:"The kind of plane this track corresponds to (0: left eye, 1: right eye, 2: background)."},229:{name:"TrackPlaneUID",level:6,type:"u",mandatory:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of the track representing the plane."},228:{name:"TrackPlane",level:5,type:"m",mandatory:!0,multiple:!0,minver:3,webm:!1,description:"Contains a video plane track that need to be combined to create this 3D track"},227:{name:"TrackCombinePlanes",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all video plane tracks that need to be combined to create this 3D track"},226:{name:"TrackOperation",level:3,type:"m",minver:3,webm:!1,description:"Operation that needs to be applied on tracks to create this virtual track. For more details look at the Specification Notes on the subject."},32123:{name:"ChannelPositions",cppname:"AudioPosition",level:4,type:"b",webm:!1,description:"Table of horizontal angles for each successive channel, see appendix."},159:{name:"Channels",cppname:"AudioChannels",level:4,type:"u",mandatory:!0,minver:1,default:1,range:"not 0",description:"Numbers of channels in the track."},30901:{name:"OutputSamplingFrequency",cppname:"AudioOutputSamplingFreq",level:4,type:"f",minver:1,default:"Sampling Frequency",range:"> 0",description:"Real output sampling frequency in Hz (used for SBR techniques)."},181:{name:"SamplingFrequency",cppname:"AudioSamplingFreq",level:4,type:"f",mandatory:!0,minver:1,default:8e3,range:"> 0",description:"Sampling frequency in Hz."},225:{name:"Audio",cppname:"TrackAudio",level:3,type:"m",minver:1,description:"Audio settings."},2327523:{name:"FrameRate",cppname:"VideoFrameRate",level:4,type:"f",range:"> 0",strong:"Informational",description:"Number of frames per second.  only."},3126563:{name:"GammaValue",cppname:"VideoGamma",level:4,type:"f",webm:!1,range:"> 0",description:"Gamma Value."},3061028:{name:"ColourSpace",cppname:"VideoColourSpace",level:4,type:"b",minver:1,webm:!1,bytesize:4,description:"Same value as in AVI (32 bits)."},21683:{name:"AspectRatioType",cppname:"VideoAspectRatio",level:4,type:"u",minver:1,default:0,description:"Specify the possible modifications to the aspect ratio (0: free resizing, 1: keep aspect ratio, 2: fixed)."},21682:{name:"DisplayUnit",cppname:"VideoDisplayUnit",level:4,type:"u",minver:1,default:0,description:"How DisplayWidth & DisplayHeight should be interpreted (0: pixels, 1: centimeters, 2: inches, 3: Display Aspect Ratio)."},21690:{name:"DisplayHeight",cppname:"VideoDisplayHeight",level:4,type:"u",minver:1,default:"PixelHeight",range:"not 0",description:"Height of the video frames to display. The default value is only valid when DisplayUnit is 0."},21680:{name:"DisplayWidth",cppname:"VideoDisplayWidth",level:4,type:"u",minver:1,default:"PixelWidth",range:"not 0",description:"Width of the video frames to display. The default value is only valid when DisplayUnit is 0."},21725:{name:"PixelCropRight",cppname:"VideoPixelCropRight",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the right of the image."},21708:{name:"PixelCropLeft",cppname:"VideoPixelCropLeft",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the left of the image."},21691:{name:"PixelCropTop",cppname:"VideoPixelCropTop",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the top of the image."},21674:{name:"PixelCropBottom",cppname:"VideoPixelCropBottom",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the bottom of the image (for HDTV content)."},186:{name:"PixelHeight",cppname:"VideoPixelHeight",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Height of the encoded video frames in pixels."},176:{name:"PixelWidth",cppname:"VideoPixelWidth",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Width of the encoded video frames in pixels."},21433:{name:"OldStereoMode",level:4,type:"u",maxver:"0",webm:!1,divx:!1,description:"DEPRECATED, DO NOT USE. Bogus StereoMode value used in old versions of libmatroska. (0: mono, 1: right eye, 2: left eye, 3: both eyes)."},21440:{name:"AlphaMode",cppname:"VideoAlphaMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Alpha Video Mode. Presence of this element indicates that the BlockAdditional element could contain Alpha data."},21432:{name:"StereoMode",cppname:"VideoStereoMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Stereo-3D video mode (0: mono, 1: side by side (left eye is first), 2: top-bottom (right eye is first), 3: top-bottom (left eye is first), 4: checkboard (right is first), 5: checkboard (left is first), 6: row interleaved (right is first), 7: row interleaved (left is first), 8: column interleaved (right is first), 9: column interleaved (left is first), 10: anaglyph (cyan/red), 11: side by side (right eye is first), 12: anaglyph (green/magenta), 13 both eyes laced in one Block (left eye is first), 14 both eyes laced in one Block (right eye is first)) . There are some more details on 3D support in the Specification Notes."},154:{name:"FlagInterlaced",cppname:"VideoFlagInterlaced",level:4,type:"u",mandatory:!0,minver:2,webm:!0,default:0,range:"0-1",description:"Set if the video is interlaced. (1 bit)"},224:{name:"Video",cppname:"TrackVideo",level:3,type:"m",minver:1,description:"Video settings."},26277:{name:"TrackTranslateTrackID",level:4,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this track in the chapter codec data. The format depends on the ChapProcessCodecID used."},26303:{name:"TrackTranslateCodec",level:4,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."},26364:{name:"TrackTranslateEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this translation applies. When not specified, it means for all editions found in the segment."},22203:{name:"SeekPreRoll",level:3,type:"u",mandatory:!0,multiple:!1,default:0,minver:4,webm:!0,description:"After a discontinuity, SeekPreRoll is the duration in nanoseconds of the data the decoder must decode before the decoded data is valid."},22186:{name:"CodecDelay",level:3,type:"u",multiple:!1,default:0,minver:4,webm:!0,description:"CodecDelay is The codec-built-in delay in nanoseconds. This value must be subtracted from each block timestamp in order to get the actual timestamp. The value should be small so the muxing of tracks with the same actual timestamp are in the same Cluster."},28587:{name:"TrackOverlay",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify that this track is an overlay track for the Track specified (in the u-integer). That means when this track has a gap (see SilentTracks) the overlay track should be used instead. The order of multiple TrackOverlay matters, the first one is the one that should be used. If not found it should be the second, etc."},170:{name:"CodecDecodeAll",level:3,type:"u",mandatory:!0,minver:2,webm:!1,default:1,range:"0-1",description:"The codec can decode potentially damaged data (1 bit)."},2536e3:{name:"CodecDownloadURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to download about the codec used."},3883072:{name:"CodecInfoURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to find information about the codec used."},3839639:{name:"CodecSettings",level:3,type:"8",webm:!1,description:"A string describing the encoding setting used."},25506:{name:"CodecPrivate",level:3,type:"b",minver:1,description:"Private data only known to the codec."},2274716:{name:"Language",cppname:"TrackLanguage",level:3,type:"s",minver:1,default:"eng",description:"Specifies the language of the track in the Matroska languages form."},21358:{name:"Name",cppname:"TrackName",level:3,type:"8",minver:1,description:"A human-readable track name."},21998:{name:"MaxBlockAdditionID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The maximum value of BlockAdditions for this track."},21375:{name:"TrackOffset",level:3,type:"i",webm:!1,default:0,description:"A value to add to the Block's Timestamp. This can be used to adjust the playback offset of a track."},2306383:{name:"TrackTimecodeScale",level:3,type:"f",mandatory:!0,minver:1,maxver:"3",webm:!1,default:1,range:"> 0",description:"DEPRECATED, DO NOT USE. The scale to apply on this track to work at normal speed in relation with other tracks (mostly used to adjust video speed when the audio length differs)."},2313850:{name:"DefaultDecodedFieldDuration",cppname:"TrackDefaultDecodedFieldDuration",level:3,type:"u",minver:4,range:"not 0",description:"The period in nanoseconds (not scaled by TimcodeScale)\nbetween two successive fields at the output of the decoding process (see the notes)"},2352003:{name:"DefaultDuration",cppname:"TrackDefaultDuration",level:3,type:"u",minver:1,range:"not 0",description:"Number of nanoseconds (not scaled via TimecodeScale) per frame ('frame' in the Matroska sense -- one element put into a (Simple)Block)."},28152:{name:"MaxCache",cppname:"TrackMaxCache",level:3,type:"u",minver:1,webm:!1,description:"The maximum cache size required to store referenced frames in and the current frame. 0 means no cache is needed."},28135:{name:"MinCache",cppname:"TrackMinCache",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The minimum number of frames a player should be able to cache during playback. If set to 0, the reference pseudo-cache system is not used."},156:{name:"FlagLacing",cppname:"TrackFlagLacing",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if the track may contain blocks using lacing. (1 bit)"},21930:{name:"FlagForced",cppname:"TrackFlagForced",level:3,type:"u",mandatory:!0,minver:1,default:0,range:"0-1",description:"Set if that track MUST be active during playback. There can be many forced track for a kind (audio, video or subs), the player should select the one which language matches the user preference or the default + forced track. Overlay MAY happen between a forced and non-forced track of the same kind. (1 bit)"},185:{name:"FlagEnabled",cppname:"TrackFlagEnabled",level:3,type:"u",mandatory:!0,minver:2,webm:!0,default:1,range:"0-1",description:"Set if the track is usable. (1 bit)"},29637:{name:"TrackUID",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"A unique ID to identify the Track. This should be kept the same when making a direct stream copy of the Track to another file."},215:{name:"TrackNumber",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track number as used in the Block Header (using more than 127 tracks is not encouraged, though the design allows an unlimited number)."},174:{name:"TrackEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Describes a track with all elements."},374648427:{name:"Tracks",level:1,type:"m",multiple:!0,minver:1,description:"A top-level block of information with many tracks described."},175:{name:"EncryptedBlock",level:2,type:"b",multiple:!0,webm:!1,description:"Similar to EncryptedBlock Structure)"},202:{name:"ReferenceTimeCode",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},201:{name:"ReferenceOffset",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},200:{name:"ReferenceFrame",level:3,type:"m",multiple:!1,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},207:{name:"SliceDuration",level:5,type:"u",default:0,description:"The (scaled) duration to apply to the element."},206:{name:"Delay",cppname:"SliceDelay",level:5,type:"u",default:0,description:"The (scaled) delay to apply to the element."},203:{name:"BlockAdditionID",cppname:"SliceBlockAddID",level:5,type:"u",default:0,description:"The ID of the BlockAdditional element (0 is the main Block)."},205:{name:"FrameNumber",cppname:"SliceFrameNumber",level:5,type:"u",default:0,description:"The number of the frame to generate from this lace with this delay (allow you to generate many frames from the same Block/Frame)."},204:{name:"LaceNumber",cppname:"SliceLaceNumber",level:5,type:"u",minver:1,default:0,divx:!1,description:"The reverse number of the frame in the lace (0 is the last frame, 1 is the next to last, etc). While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."},232:{name:"TimeSlice",level:4,type:"m",multiple:!0,minver:1,divx:!1,description:"Contains extra time information about the data contained in the Block. While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."},142:{name:"Slices",level:3,type:"m",minver:1,divx:!1,description:"Contains slices description."},30114:{name:"DiscardPadding",level:3,type:"i",minver:4,webm:!0,description:"Duration in nanoseconds of the silent data added to the Block (padding at the end of the Block for positive value, at the beginning of the Block for negative value). The duration of DiscardPadding is not calculated in the duration of the TrackEntry and should be discarded during playback."},164:{name:"CodecState",level:3,type:"b",minver:2,webm:!1,description:"The new codec state to use. Data interpretation is private to the codec. This information should always be referenced by a seek entry."},253:{name:"ReferenceVirtual",level:3,type:"i",webm:!1,description:"Relative position of the data that should be in position of the virtual block."},251:{name:"ReferenceBlock",level:3,type:"i",multiple:!0,minver:1,description:"Timestamp of another frame used as a reference (ie: B or P frame). The timestamp is relative to the block it's attached to."},250:{name:"ReferencePriority",cppname:"FlagReferenced",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"This frame is referenced and has the specified cache priority. In cache only a frame of the same or higher priority can replace this frame. A value of 0 means the frame is not referenced."},155:{name:"BlockDuration",level:3,type:"u",minver:1,default:"TrackDuration",description:'The duration of the Block (based on TimecodeScale). This element is mandatory when DefaultDuration is set for the track (but can be omitted as other default values). When not written and with no DefaultDuration, the value is assumed to be the difference between the timestamp of this Block and the timestamp of the next Block in "display" order (not coding order). This element can be useful at the end of a Track (as there is not other Block available), or when there is a break in a track like for subtitle tracks. When set to 0 that means the frame is not a keyframe.'},165:{name:"BlockAdditional",level:5,type:"b",mandatory:!0,minver:1,webm:!1,description:"Interpreted by the codec as it wishes (using the BlockAddID)."},238:{name:"BlockAddID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"An ID to identify the BlockAdditional level."},166:{name:"BlockMore",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contain the BlockAdditional and some parameters."},30113:{name:"BlockAdditions",level:3,type:"m",minver:1,webm:!1,description:"Contain additional blocks to complete the main one. An EBML parser that has no knowledge of the Block structure could still see and use/skip these data."},162:{name:"BlockVirtual",level:3,type:"b",webm:!1,description:"A Block with no data. It must be stored in the stream at the place the real Block should be in display order. (see Block Virtual)"},161:{name:"Block",level:3,type:"b",mandatory:!0,minver:1,description:"Block containing the actual data to be rendered and a timestamp relative to the Cluster Timecode. (see Block Structure)"},160:{name:"BlockGroup",level:2,type:"m",multiple:!0,minver:1,description:"Basic container of information containing a single Block or BlockVirtual, and information specific to that Block/VirtualBlock."},163:{name:"SimpleBlock",level:2,type:"b",multiple:!0,minver:2,webm:!0,divx:!0,description:"Similar to SimpleBlock Structure"},171:{name:"PrevSize",cppname:"ClusterPrevSize",level:2,type:"u",minver:1,description:"Size of the previous Cluster, in octets. Can be useful for backward playing.",position:"prevCluster"},167:{name:"Position",cppname:"ClusterPosition",level:2,type:"u",minver:1,webm:!1,description:"The Position of the Cluster in the segment (0 in live broadcast streams). It might help to resynchronise offset on damaged streams.",position:"segment"},22743:{name:"SilentTrackNumber",cppname:"ClusterSilentTrackNumber",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"One of the track number that are not used from now on in the stream. It could change later if not specified as silent in a further Cluster."},231:{name:"Timecode",cppname:"ClusterTimecode",level:2,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp of the cluster (based on TimecodeScale)."},524531317:{name:"Cluster",level:1,type:"m",multiple:!0,minver:1,description:"The lower level element containing the (monolithic) Block structure."},19840:{name:"MuxingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Muxing application or library ("libmatroska-0.4.3").'},31657:{name:"Title",level:2,type:"8",minver:1,webm:!1,description:"General name of the segment."},2807730:{name:"TimecodeScaleDenominator",level:2,type:"u",mandatory:!0,minver:4,default:"1000000000",description:"Timestamp scale numerator, see TimecodeScale."},2807729:{name:"TimecodeScale",level:2,type:"u",mandatory:!0,minver:1,default:"1000000",description:"Timestamp scale in nanoseconds (1.000.000 means all timestamps in the segment are expressed in milliseconds)."},27045:{name:"ChapterTranslateID",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this segment in the chapter codec data. The format depends on the ChapProcessCodecID used."},27071:{name:"ChapterTranslateCodec",level:3,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."},27132:{name:"ChapterTranslateEditionUID",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this correspondance applies. When not specified, it means for all editions found in the segment."},4096955:{name:"NextFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the next segment."},4110627:{name:"NextUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the next chained segment (128 bits)."},3965867:{name:"PrevFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the previous segment."},3979555:{name:"PrevUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the previous chained segment (128 bits)."},29604:{name:"SegmentUID",level:2,type:"b",minver:1,webm:!1,range:"not 0",bytesize:16,description:"A randomly generated unique ID to identify the current segment between many others (128 bits)."},357149030:{name:"Info",level:1,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains miscellaneous general information and statistics on the file."},21420:{name:"SeekPosition",level:3,type:"u",mandatory:!0,minver:1,description:"The position of the element in the segment in octets (0 = first level 1 element).",position:"segment"},21419:{name:"SeekID",level:3,type:"b",mandatory:!0,minver:1,description:"The binary ID corresponding to the element name.",type2:"ebmlID"},19899:{name:"Seek",cppname:"SeekPoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains a single seek entry to an EBML element."},290298740:{name:"SeekHead",cppname:"SeekHeader",level:1,type:"m",multiple:!0,minver:1,description:"Contains the position of other level 1 elements."},32379:{name:"SignatureElementList",level:2,type:"m",multiple:!0,webm:!1,i:"Cluster|Block|BlockAdditional",description:"A list consists of a number of consecutive elements that represent one case where data is used in signature. Ex:  means that the BlockAdditional of all Blocks in all Clusters is used for encryption."},32347:{name:"SignatureElements",level:1,type:"m",webm:!1,description:"Contains elements that will be used to compute the signature."},32437:{name:"Signature",level:1,type:"b",webm:!1,description:"The signature of the data (until a new."},32421:{name:"SignaturePublicKey",level:1,type:"b",webm:!1,description:"The public key to use with the algorithm (in the case of a PKI-based signature)."},32410:{name:"SignatureHash",level:1,type:"u",webm:!1,description:"Hash algorithm used (1=SHA1-160, 2=MD5)."},32394:{name:"SignatureAlgo",level:1,type:"u",webm:!1,description:"Signature algorithm used (1=RSA, 2=elliptic)."},458458727:{name:"SignatureSlot",level:-1,type:"m",multiple:!0,webm:!1,description:"Contain signature of some (coming) elements in the stream."},191:{name:"CRC-32",level:-1,type:"b",minver:1,webm:!1,description:"The CRC is computed on all the data of the Master element it's in. The CRC element should be the first in it's parent master for easier reading. All level 1 elements should include a CRC-32. The CRC in use is the IEEE CRC32 Little Endian",crc:!0},236:{name:"Void",level:-1,type:"b",minver:1,description:"Used to void damaged data, to avoid unexpected behaviors when using damaged data. The content is discarded. Also used to reserve space in a sub-element for later use."},17139:{name:"EBMLMaxSizeLength",level:1,type:"u",mandatory:!0,default:8,minver:1,description:"The maximum length of the sizes you'll find in this file (8 or less in Matroska). This does not override the element size indicated at the beginning of an element. Elements that have an indicated size which is larger than what is allowed by EBMLMaxSizeLength shall be considered invalid."},17138:{name:"EBMLMaxIDLength",level:1,type:"u",mandatory:!0,default:4,minver:1,description:"The maximum length of the IDs you'll find in this file (4 or less in Matroska)."},17143:{name:"EBMLReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum EBML version a parser has to support to read this file."},440786851:{name:"EBML",level:"0",type:"m",mandatory:!0,multiple:!0,minver:1,description:"Set the EBML characteristics of the data to follow. Each EBML document has to start with this."},21936:{name:"Colour",level:"4",type:"m",mandatory:!0,multiple:!0,description:"Settings describing the colour format."},21937:{name:"MatrixCoefficients",level:"5",type:"u",mandatory:!0,multiple:!0,description:"The Matrix Coefficients of the video used to derive luma and chroma values from red, green, and blue color primaries. For clarity, the value and meanings for MatrixCoefficients are adopted from Table 4 of ISO/IEC 23001-8:2016 or ITU-T H.273."},21945:{name:"Range",level:"5",type:"u",mandatory:!0,multiple:!0,description:"Clipping of the color ranges."},21946:{name:"TransferCharacteristics",level:"5",type:"u",mandatory:!0,multiple:!0,description:"The transfer characteristics of the video."},21947:{name:"Primaries",level:"5",type:"u",mandatory:!0,multiple:!0,description:"The colour primaries of the video. For clarity, the value and meanings for Primaries are adopted from Table 2 of ISO/IEC 23091-4 or ITU-T H.273."}}},3179:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.tools=t.Reader=t.Encoder=t.Decoder=void 0,r(n(8177),t);var o=n(8193);t.Decoder=o.default;var a=n(4741);t.Encoder=a.default;var s=n(5226);t.Reader=s.default;var l=n(9840);t.tools=l},4635:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var o=n(9840),a=function(){function e(){}return e.readVint=function(t,n){void 0===n&&(n=0);var i=8-Math.floor(Math.log2(t[n]));if(i>8){var r=e.readHexString(t,n,n+i);throw new Error("Unrepresentable length: ".concat(i," ").concat(r))}if(n+i>t.length)return null;for(var o=t[n]&(1<<8-i)-1,a=1;a<i;a+=1){if(7===a&&o>=Math.pow(2,8)&&t[n+7]>0)return{length:i,value:-1};o*=Math.pow(2,8),o+=t[n+a]}return{length:i,value:o}},e.writeVint=function(e){if(e<0||e>Math.pow(2,53))throw new Error("Unrepresentable value: ".concat(e));var t=1;for(t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t+=1);for(var n=o.Buffer.alloc(t),i=e,r=1;r<=t;r+=1){var a=255&i;n[t-r]=a,i-=a,i/=Math.pow(2,8)}return n[0]|=1<<8-t,n},e.concatenate=function(e,t){return e||t?e&&0!==e.byteLength?t&&0!==t.byteLength?o.Buffer.from(r(r([],e,!0),t,!0)):e:t:o.Buffer.from([])},e.readHexString=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),Array.from(e.slice(t,n)).map((function(e){return Number(e).toString(16)})).reduce((function(e,t){return"".concat(e).concat(t.padStart(2,"0"))}),"")},e.readUtf8=function(e){try{return o.Buffer.from(e).toString("utf8")}catch(e){return null}},e.readUnsigned=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 1:return n.getUint8(0);case 2:return n.getUint16(0);case 4:return n.getUint32(0)}return t.byteLength<=6?t.reduce((function(e,t){return 256*e+t}),0):e.readHexString(t,0,t.byteLength)},e.readSigned=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 1:return t.getInt8(0);case 2:return t.getInt16(0);case 4:return t.getInt32(0);default:return NaN}},e.readFloat=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return t.getFloat32(0);case 8:return t.getFloat64(0);default:return NaN}},e.readDate=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 1:return new Date(n.getUint8(0));case 2:return new Date(n.getUint16(0));case 4:return new Date(n.getUint32(0));case 8:return new Date(Number.parseInt(e.readHexString(t),16));default:return new Date(0)}},e.readDataFromTag=function(t,n){var r,o=t.type,a=t.name,s=t.track,l=t.discardable||!1,c=t.keyframe||!1,u=null;switch(o){case"u":r=e.readUnsigned(n);break;case"f":r=e.readFloat(n);break;case"i":r=e.readSigned(n);break;case"s":r=String.fromCharCode.apply(String,n);break;case"8":r=e.readUtf8(n);break;case"d":r=e.readDate(n)}if("SimpleBlock"===a||"Block"===a){var h=0,d=e.readVint(n,h),p=d.length;h+=p,s=d.value,r=e.readSigned(n.subarray(h,h+2)),h+=2,"SimpleBlock"===a&&(c=Boolean(128&n[p+2]),l=Boolean(1&n[p+2])),h+=1,u=n.subarray(h)}return i(i({},t),{data:n,discardable:l,keyframe:c,payload:u,track:s,value:r})},e}();t.default=a},9840:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertEBMLDateToJSDate=t.createFloatBuffer=t.createIntBuffer=t.createUIntBuffer=t.encodeValueToBuffer=t.concat=t.putRefinedMetaData=t.extractElement=t.removeElement=t.makeMetadataSeekable=t.createRIFFChunk=t.VP8BitStreamToRiffWebPBuffer=t.WebPBlockFilter=t.encodeTag=t.readBlock=t.ebmlBlock=t.writeVint=t.readVint=t.Buffer=void 0;var i=n(6661),r=n(4741),o=n(4686),a=n(4635),s=n(927);function l(e,n){var i=new t.Buffer(4);return i.writeUInt32LE(n.byteLength,0),f([new t.Buffer(e.substr(0,4),"ascii"),i,n,new t.Buffer(n.byteLength%2==0?0:1)])}function c(e,t){for(var n=-1,i=0;i<t.length;i++){var r=t[i];if(r.name===e){if("m"!==r.type)return void t.splice(i,1);if(r.isEnd){if(-1==n)throw new Error("Detected ".concat(e," closing element before finding the start"));return void t.splice(n,i-n+1)}n=i}}}function u(e,t){for(var n=[],i=-1,r=0;r<t.length;r++){var o=t[r];if(o.name===e){if("m"!==o.type){n.push(t[r]);break}if(o.isEnd){if(-1==i)throw new Error("Detected ".concat(e," closing element before finding the start"));n=t.slice(i,r+1);break}i=r}}return n}function h(e){var t=new r.default;return e.reduce((function(e,n){return e.concat(t.encode([n]))}),[]).reduce((function(e,t){return e+t.byteLength}),0)}function d(e,n,i){var r=i.duration,o=i.clusterPtrs,a=i.cues,s=e.slice(0);if("number"==typeof r){var l=!1;s.forEach((function(e){"f"===e.type&&"Duration"===e.name&&(l=!0,e.data=g(r,8))})),l||p(s,"Info",[{name:"Duration",type:"f",data:g(r,8)}])}Array.isArray(a)&&p(s,"Cues",function(e,t){var n=[];return e.forEach((function(e){var i=e.CueTrack,r=e.CueClusterPosition,o=e.CueTime;n.push({name:"CuePoint",type:"m",isEnd:!1}),n.push({name:"CueTime",type:"u",data:m(o)}),n.push({name:"CueTrackPositions",type:"m",isEnd:!1}),n.push({name:"CueTrack",type:"u",data:m(i)}),n.push({name:"CueClusterPosition",type:"u",data:m(r+t)}),n.push({name:"CueTrackPositions",type:"m",isEnd:!0}),n.push({name:"CuePoint",type:"m",isEnd:!0})})),n}(a,n));var c=[];return Array.isArray(o)&&(console.warn("append cluster pointers to seekhead is deprecated. please use cues"),c=function(e,n){var i=[];return e.forEach((function(e){i.push({name:"Seek",type:"m",isEnd:!1}),i.push({name:"SeekID",type:"b",data:new t.Buffer([31,67,182,117])}),i.push({name:"SeekPosition",type:"u",data:m(e+n)}),i.push({name:"Seek",type:"m",isEnd:!0})})),i}(o,n)),p(s,"SeekHead",c,!0),s}function p(e,t,n,i){void 0===i&&(i=!1);for(var r=-1,o=0;o<e.length;o++){var a=e[o];if("m"===a.type&&a.name===t&&!1===a.isEnd){r=o;break}}r>=0?Array.prototype.splice.apply(e,[r+1,0].concat(n)):i?[].concat([{name:t,type:"m",isEnd:!1}],n,[{name:t,type:"m",isEnd:!0}]).reverse().forEach((function(t){e.unshift(t)})):(e.push({name:t,type:"m",isEnd:!1}),n.forEach((function(t){e.push(t)})),e.push({name:t,type:"m",isEnd:!0}))}function f(e){return t.Buffer.concat(e)}function m(e){for(var n=1;e>=Math.pow(2,8*n);n++);if(n>=7)return console.warn("7bit or more bigger uint not supported."),new i.Uint64BE(e).toBuffer();var r=new t.Buffer(n);return r.writeUIntBE(e,0,n),r}function v(e){for(var n=1;e>=Math.pow(2,8*n);n++);if(n>=7)return console.warn("7bit or more bigger uint not supported."),new i.Int64BE(e).toBuffer();var r=new t.Buffer(n);return r.writeIntBE(e,0,n),r}function g(e,n){var i;if(void 0===n&&(n=8),8===n)return(i=new t.Buffer(8)).writeDoubleBE(e,0),i;if(4===n)return(i=new t.Buffer(4)).writeFloatBE(e,0),i;throw new Error("float type bits must 4bytes or 8bytes")}t.Buffer=o.Buffer,t.readVint=a.default.readVint,t.writeVint=a.default.writeVint,t.ebmlBlock=s,t.readBlock=function(e){return(0,t.ebmlBlock)(new t.Buffer(e))},t.encodeTag=function(e,n,i){return void 0===i&&(i=!1),f([e,i?new t.Buffer("01ffffffffffffff","hex"):(0,t.writeVint)(n.length),n])},t.WebPBlockFilter=function(e){return e.reduce((function(e,n){return"b"!==n.type||"SimpleBlock"!==n.name?e:(0,t.ebmlBlock)(n.data).frames.some((function(e){return"9d012a"===e.slice(3,6).toString("hex")}))?e.concat(n):e}),[])},t.VP8BitStreamToRiffWebPBuffer=function(e){var n=l("VP8 ",e);return l("RIFF",f([new t.Buffer("WEBP","ascii"),n]))},t.createRIFFChunk=l,t.makeMetadataSeekable=function(e,n,i){var o=u("EBML",e),a=h(o)+12,s=e[e.length-1].dataEnd-a,l=u("Info",e);c("Duration",l),l.splice(1,0,{name:"Duration",type:"f",data:g(n,8)});for(var d=h(l),p=u("Tracks",e),f=h(p),v=47,y=[],b=5+15*i.length,w=[],k=-1,C=function(e){var n=v,r=n+d,o=r+f,l=o+b-s;if((y=[]).push({name:"SeekHead",type:"m",isEnd:!1}),y.push({name:"Seek",type:"m",isEnd:!1}),y.push({name:"SeekID",type:"b",data:new t.Buffer([21,73,169,102])}),y.push({name:"SeekPosition",type:"u",data:m(n)}),y.push({name:"Seek",type:"m",isEnd:!0}),y.push({name:"Seek",type:"m",isEnd:!1}),y.push({name:"SeekID",type:"b",data:new t.Buffer([22,84,174,107])}),y.push({name:"SeekPosition",type:"u",data:m(r)}),y.push({name:"Seek",type:"m",isEnd:!0}),y.push({name:"Seek",type:"m",isEnd:!1}),y.push({name:"SeekID",type:"b",data:new t.Buffer([28,83,187,107])}),y.push({name:"SeekPosition",type:"u",data:m(o)}),y.push({name:"Seek",type:"m",isEnd:!0}),y.push({name:"SeekHead",type:"m",isEnd:!0}),v=h(y),(w=[]).push({name:"Cues",type:"m",isEnd:!1}),i.forEach((function(e){var t=e.CueTrack,n=e.CueClusterPosition,i=e.CueTime;w.push({name:"CuePoint",type:"m",isEnd:!1}),w.push({name:"CueTime",type:"u",data:m(i)}),w.push({name:"CueTrackPositions",type:"m",isEnd:!1}),w.push({name:"CueTrack",type:"u",data:m(t)}),n-=a,n+=l,w.push({name:"CueClusterPosition",type:"u",data:m(n)}),w.push({name:"CueTrackPositions",type:"m",isEnd:!0}),w.push({name:"CuePoint",type:"m",isEnd:!0})})),w.push({name:"Cues",type:"m",isEnd:!0}),b=h(w),k===l)return"break";if(k=l,9===e)throw new Error("Failed to converge to a stable metadata size")},M=0;M<10;M++){if("break"===C(M))break}var E=[].concat.apply([],[o,{name:"Segment",type:"m",isEnd:!1,unknownSize:!0},y,l,p,w]);return(new r.default).encode(E)},t.removeElement=c,t.extractElement=u,t.putRefinedMetaData=function(e,n){Array.isArray(n.cueInfos)&&!Array.isArray(n.cues)&&(console.warn("putRefinedMetaData: info.cueInfos property is deprecated. please use info.cues"),n.cues=n.cueInfos);for(var i=[],o=[],a=0;a<e.length;a++){var s=e[a];if("m"===s.type&&"Segment"===s.name){if(i=e.slice(0,a),o=e.slice(a),s.unknownSize){o.shift();break}throw new Error("this metadata is not streaming webm file")}}if(!(o[o.length-1].dataEnd>0))throw new Error("metadata dataEnd has wrong number");var l,c=o[o.length-1].dataEnd,u=i[i.length-1].dataEnd,h=(new r.default).encode(i).byteLength-u,p=c-o[0].tagStart,f=(o[0].tagStart,o[0].tagStart,new t.Buffer([24,83,128,103])),m=new t.Buffer("01ffffffffffffff","hex"),v=f.byteLength+m.byteLength,g=p;for(l=1;l<20;l++){var y=d(o,h+(u+v+g-c),n),b=(new r.default).encode(y).byteLength;if(b===g)return(new r.default).encode([].concat(i,[{type:"m",name:"Segment",isEnd:!1,unknownSize:!0}],y));g=b}throw new Error("unable to refine metadata, stable size could not be found in "+l+" iterations!")},t.concat=f,t.encodeValueToBuffer=function(e){var n=new t.Buffer(0);if("m"===e.type)return e;switch(e.type){case"u":n=m(e.value);break;case"i":n=v(e.value);break;case"f":n=g(e.value);break;case"s":n=new t.Buffer(e.value,"ascii");break;case"8":n=new t.Buffer(e.value,"utf8");break;case"b":n=e.value;break;case"d":n=new i.Int64BE(e.value.getTime().toString()).toBuffer()}return Object.assign({},e,{data:n})},t.createUIntBuffer=m,t.createIntBuffer=v,t.createFloatBuffer=g,t.convertEBMLDateToJSDate=function(e){return e instanceof Date?e:new Date(new Date("2001-01-01T00:00:00.000Z").getTime()+Number(e)/1e3/1e3)}},1928:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3179);t.default=function(e){return i(this,void 0,void 0,(function(){var t,n,i,a,s,l,c,u,h,d,p;return r(this,(function(r){switch(r.label){case 0:if(!e)throw Error("call to fixWebmDuration requires a blob");t=new o.Decoder,n=new o.Reader,i=e.stream(),a=i.getReader(),r.label=1;case 1:return[4,a.read()];case 2:return s=r.sent(),l=s.done,c=s.value,l?(n.stop(),[3,3]):((u=null==(u=t.decode(c))?void 0:u.filter((function(e){return"unknown"!==e.type}))).forEach((function(e){n.read(e)})),c=null,[3,1]);case 3:return h=o.tools.makeMetadataSeekable(n.metadatas,n.duration,n.cues),d=new Blob([h],{type:e.type}),p=e.slice(n.metadataSize),[2,new Blob([d,p],{type:e.type})]}}))}))}},8593:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)t.call(i,r)&&(e[r]=i[r])}return e};var t=Object.prototype.hasOwnProperty},4967:(e,t,n)=>{"use strict";var i=n(1528);e.exports={Parser:i}},5810:e=>{"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},5785:(e,t,n)=>{"use strict";var i=n(7057),r=n(3507);e.exports=function(e){return n.raw=function(e,n,a){return r(e,i(a,{position:t(n),warning:o}))},n;function t(t){for(var n=e.offset,i=t.line,r=[];++i&&i in n;)r.push((n[i]||0)+1);return{start:t,indent:r}}function n(n,i,a){r(n,{position:t(i),warning:o,text:a,reference:a,textContext:e,referenceContext:e})}function o(t,n,i){3!==i&&e.file.message(t,n)}}},1393:(e,t,n)=>{"use strict";e.exports={position:!0,gfm:!0,commonmark:!1,pedantic:!1,blocks:n(5810)}},753:e=>{"use strict";e.exports=function(e,t){var n=e.indexOf("\n",t);for(;n>t&&" "===e.charAt(n-1);)n--;return n}},2163:e=>{"use strict";e.exports=function(e,t){return e.indexOf("`",t)}},1071:e=>{"use strict";e.exports=function(e,t){return e.indexOf("~~",t)}},2298:(e,t,n)=>{"use strict";var i=n(7092),r=n(741);function o(e){return i(e)||r(e)||43===e||45===e||46===e||95===e}e.exports=function e(t,n){var i,r;if(!this.options.gfm)return-1;if(-1===(i=t.indexOf("@",n)))return-1;if((r=i)===n||!o(t.charCodeAt(r-1)))return e.call(this,t,i+1);for(;r>n&&o(t.charCodeAt(r-1));)r--;return r}},1030:e=>{"use strict";e.exports=function(e,t){var n=e.indexOf("*",t),i=e.indexOf("_",t);if(-1===i)return n;if(-1===n)return i;return i<n?i:n}},3115:e=>{"use strict";e.exports=function(e,t){return e.indexOf("\\",t)}},2356:e=>{"use strict";e.exports=function(e,t){var n=e.indexOf("[",t),i=e.indexOf("![",t);if(-1===i)return n;return n<i?n:i}},6451:e=>{"use strict";e.exports=function(e,t){var n=e.indexOf("**",t),i=e.indexOf("__",t);if(-1===i)return n;if(-1===n)return i;return i<n?i:n}},1890:e=>{"use strict";e.exports=function(e,t){return e.indexOf("<",t)}},4307:e=>{"use strict";e.exports=function(e,n){var i,r,o,a=-1;if(!this.options.gfm)return a;r=t.length,i=-1;for(;++i<r;)-1!==(o=e.indexOf(t[i],n))&&(-1===a||o<a)&&(a=o);return a};var t=["www.","http://","https://"]},4272:(e,t,n)=>{"use strict";var i=n(7057),r=n(8124);e.exports=function(){var e,t=this,n=String(t.file),s={line:1,column:1,offset:0},l=i(s);65279===(n=n.replace(a,o)).charCodeAt(0)&&(n=n.slice(1),l.column++,l.offset++);e={type:"root",children:t.tokenizeBlock(n,l),position:{start:s,end:t.eof||i(s)}},t.options.position||r(e,!0);return e};var o="\n",a=/\r\n|\r/g},1528:(e,t,n)=>{"use strict";var i=n(7057),r=n(9546),o=n(922),a=n(9359),s=n(5785),l=n(7269);function c(e,t){this.file=t,this.offset={},this.options=i(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=o(t).toOffset,this.unescape=a(this,"escape"),this.decode=s(this)}e.exports=c;var u=c.prototype;function h(e){var t,n=[];for(t in e)n.push(t);return n}u.setOptions=n(3228),u.parse=n(4272),u.options=n(1393),u.exitStart=r("atStart",!0),u.enterList=r("inList",!1),u.enterLink=r("inLink",!1),u.enterBlock=r("inBlock",!1),u.interruptParagraph=[["thematicBreak"],["list"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}]],u.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}]],u.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}]],u.blockTokenizers={blankLine:n(1694),indentedCode:n(134),fencedCode:n(1498),blockquote:n(6234),atxHeading:n(8469),thematicBreak:n(6968),list:n(745),setextHeading:n(8671),html:n(8776),definition:n(1616),table:n(7793),paragraph:n(8607)},u.inlineTokenizers={escape:n(470),autoLink:n(8775),url:n(1944),email:n(5657),html:n(7648),link:n(9405),reference:n(6252),strong:n(5702),emphasis:n(439),deletion:n(1134),code:n(1891),break:n(5874),text:n(4410)},u.blockMethods=h(u.blockTokenizers),u.inlineMethods=h(u.inlineTokenizers),u.tokenizeBlock=l("block"),u.tokenizeInline=l("inline"),u.tokenizeFactory=l},3228:(e,t,n)=>{"use strict";var i=n(7057),r=n(4982),o=n(1393);e.exports=function(e){var t,n,a=this,s=a.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=i(e)}for(t in o){if(null==(n=e[t])&&(n=s[t]),"blocks"!==t&&"boolean"!=typeof n||"blocks"===t&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+t+"`");e[t]=n}return a.options=e,a.escape=r(e),a}},8775:(e,t,n)=>{"use strict";var i=n(1900),r=n(3507),o=n(1890);e.exports=d,d.locator=o,d.notInLink=!0;var a="<",s=">",l="@",c="/",u="mailto:",h=u.length;function d(e,t,n){var o,d,p,f,m,v=this,g="",y=t.length,b=0,w="",k=!1,C="";if(t.charAt(0)===a){for(b++,g=a;b<y&&(o=t.charAt(b),!(i(o)||o===s||o===l||":"===o&&t.charAt(b+1)===c));)w+=o,b++;if(w){if(C+=w,w="",C+=o=t.charAt(b),b++,o===l)k=!0;else{if(":"!==o||t.charAt(b+1)!==c)return;C+=c,b++}for(;b<y&&(o=t.charAt(b),!i(o)&&o!==s);)w+=o,b++;if(o=t.charAt(b),w&&o===s)return!!n||(p=C+=w,g+=C+o,(d=e.now()).column++,d.offset++,k&&(C.slice(0,h).toLowerCase()===u?(p=p.slice(h),d.column+=h,d.offset+=h):C=u+C),f=v.inlineTokenizers,v.inlineTokenizers={text:f.text},m=v.enterLink(),p=v.tokenizeInline(p,d),v.inlineTokenizers=f,m(),e(g)({type:"link",title:null,url:r(C,{nonTerminated:!1}),children:p}))}}}},1694:e=>{"use strict";var t=/^[ \t]*(\n|$)/;e.exports=function(e,n,i){var r,o="",a=0,s=n.length;for(;a<s&&null!=(r=t.exec(n.slice(a)));)a+=r[0].length,o+=r[0];if(""===o)return;if(i)return!0;e(o)}},6234:(e,t,n)=>{"use strict";var i=n(4898),r=n(6047);e.exports=function(e,t,n){var c,u,h,d,p,f,m,v,g,y=this,b=y.offset,w=y.blockTokenizers,k=y.interruptBlockquote,C=e.now(),M=C.line,E=t.length,S=[],x=[],T=[],D=[],A=0;for(;A<E&&((u=t.charAt(A))===s||u===a);)A++;if(t.charAt(A)!==l)return;if(n)return!0;A=0;var L=null,P=!1;for(;A<E;){for(m=A,v=!1,-1===(d=t.indexOf(o,A))&&(d=E);A<E&&((u=t.charAt(A))===s||u===a);)A++;if(t.charAt(A)===l?(A++,v=!0,t.charAt(A)===s&&A++):A=m,p=t.slice(A,d),!v&&!i(p)){A=m;break}if(!v&&(h=t.slice(A),r(k,w,y,[e,h,!0])))break;if(0===m){var I=p.match(/^\[!([^\]]+)\]([+\-]?)(?:\s|$)/);if(I){let e=I[1],t=e,n="",i=e.indexOf("|");-1!==i&&(t=e.substr(0,i),n=e.substr(i+1)),L={type:t.trim().toLowerCase().replace(/\s+/g,"-"),fold:I[2],data:n};var F=I[0].length;A+=F,(p=p.substr(F)).trim()&&(P=!0)}}f=m===A?p:t.slice(m,d),D.push(A-m),S.push(f),x.push(p),A=d+1}A=-1,E=D.length,c=e(S.join(o));for(;++A<E;)b[M]=(b[M]||0)+D[A],M++;g=y.enterBlock(),y.options.breakOnce=P,L&&x[0]&&(T=y.tokenizeBlock(x.shift(),C),C.line+=1);return x=y.tokenizeBlock(x.join(o),C),T.push(...x),y.options.breakOnce=!1,g(),c({type:"blockquote",children:T,callout:L})};var o="\n",a="\t",s=" ",l=">"},5874:(e,t,n)=>{"use strict";var i=n(753);e.exports=s,s.locator=i;var r=" ",o="\n",a=2;function s(e,t,n){for(var i,s=t.length,l=-1,c="";++l<s;){if((i=t.charAt(l))===o){if(l<a)return;return!!n||e(c+=i)({type:"break"})}if(i!==r)return;c+=i}}},1498:e=>{"use strict";e.exports=function(e,l,c){var u,h,d,p,f,m,v,g,y,b,w,k,C,M=this,E=M.options.gfm,S=l.length+1,x=0,T="";if(!E)return;for(;x<S&&((d=l.charAt(x))===i||d===n);)T+=d,x++;if(k=x,(d=l.charAt(x))!==r&&d!==o)return;x++,h=d,u=1,T+=d;for(;x<S&&(d=l.charAt(x))===h;)T+=d,u++,x++;if(u<a)return;for(;x<S&&((d=l.charAt(x))===i||d===n);)T+=d,x++;p="",v="";for(;x<S&&(d=l.charAt(x))!==t&&(h!==o||d!==h);)d===i||d===n?v+=d:(p+=v+d,v=""),x++;if((d=l.charAt(x))&&d!==t)return;if(c)return!0;(C=e.now()).column+=T.length,C.offset+=T.length,T+=p,p=M.decode.raw(M.unescape(p),C),v&&(T+=v);v="",b="",w="",g="",y="";var D=!0;for(;x<S;)if(g+=b,y+=w,b="",w="",(d=l.charAt(x))===t){for(D?(T+=d,D=!1):(b+=d,w+=d),v="",x++;x<S&&(d=l.charAt(x))===i;)v+=d,x++;if(b+=v,w+=v.slice(k),!(v.length>=s)){for(v="";x<S&&(d=l.charAt(x))===h;)v+=d,x++;if(b+=v,w+=v,!(v.length<u)){for(v="";x<S&&((d=l.charAt(x))===i||d===n);)b+=d,w+=d,x++;if(!d||d===t)break}}}else g+=d,w+=d,x++;T+=g+b,x=-1,S=p.length;for(;++x<S;)if((d=p.charAt(x))===i||d===n)f||(f=p.slice(0,x));else if(f){m=p.slice(x);break}return e(T)({type:"code",lang:f||p||null,meta:m||null,value:y})};var t="\n",n="\t",i=" ",r="~",o="`",a=3,s=4},134:(e,t,n)=>{"use strict";var i=n(8813);e.exports=function(e,t,n){var l,c,u,h=-1,d=t.length,p="",f="",m="",v="";for(;++h<d;)if(l=t.charAt(h),u)if(u=!1,p+=m,f+=v,m="",v="",l===r)m=l,v=l;else for(p+=l,f+=l;++h<d;){if(!(l=t.charAt(h))||l===r){v=l,m=l;break}p+=l,f+=l}else if(l===a&&t.charAt(h+1)===l&&t.charAt(h+2)===l&&t.charAt(h+3)===l)m+=s,h+=3,u=!0;else if(l===o)m+=l,u=!0;else{for(c="";l===o||l===a;)c+=l,l=t.charAt(++h);if(l!==r)break;m+=c+l,v+=l}if(f)return!!n||e(p)({type:"code",lang:null,meta:null,value:i(f)})};var r="\n",o="\t",a=" ",s=a.repeat(4)},1891:(e,t,n)=>{"use strict";var i=n(2163);e.exports=s,s.locator=i;var r=10,o=32,a=96;function s(e,t,n){for(var i,s,l,c,u,h,d=t.length,p=0;p<d&&t.charCodeAt(p)===a;)p++;if(0!==p&&p!==d){for(i=p,u=t.charCodeAt(p);p<d;){if(c=u,u=t.charCodeAt(p+1),c===a){if(void 0===s&&(s=p),l=p+1,u!==a&&l-s===i){h=!0;break}}else void 0!==s&&(s=void 0,l=void 0);p++}if(h){if(n)return!0;if(p=i,d=s,c=t.charCodeAt(p),u=t.charCodeAt(d-1),h=!1,d-p>2&&(c===o||c===r)&&(u===o||u===r)){for(p++,d--;p<d;){if((c=t.charCodeAt(p))!==o&&c!==r){h=!0;break}p++}!0===h&&(i++,s--)}return e(t.slice(0,l))({type:"inlineCode",value:t.slice(i,s)})}}}},1616:(e,t,n)=>{"use strict";var i=n(1900),r=n(2115);e.exports=function(e,t,n){var i,g,w,k,C,M,E,S,x=this,T=x.options.commonmark,D=0,A=t.length,L="";for(;D<A&&((k=t.charAt(D))===u||k===c);)L+=k,D++;if((k=t.charAt(D))!==h)return;D++,L+=k,w="";for(;D<A&&(k=t.charAt(D))!==d;)k===s&&(w+=k,D++,k=t.charAt(D)),w+=k,D++;if(!w||t.charAt(D)!==d||t.charAt(D+1)!==m)return;M=w,D=(L+=w+d+m).length,w="";for(;D<A&&((k=t.charAt(D))===c||k===u||k===l);)L+=k,D++;if(k=t.charAt(D),w="",i=L,k===v){for(D++;D<A&&y(k=t.charAt(D));)w+=k,D++;if((k=t.charAt(D))===y.delimiter)L+=v+w+k,D++;else{if(T)return;D-=w.length+1,w=""}}if(!w){for(;D<A&&b(k=t.charAt(D));)w+=k,D++;L+=w}if(!w)return;E=w,w="";for(;D<A&&((k=t.charAt(D))===c||k===u||k===l);)w+=k,D++;k=t.charAt(D),C=null,k===o?C=o:k===a?C=a:k===p&&(C=f);if(C){if(!w)return;for(D=(L+=w+k).length,w="";D<A&&(k=t.charAt(D))!==C;){if(k===l){if(D++,(k=t.charAt(D))===l||k===C)return;w+=l}w+=k,D++}if((k=t.charAt(D))!==C)return;g=L,L+=w+k,D++,S=w,w=""}else w="",D=L.length;for(;D<A&&((k=t.charAt(D))===c||k===u);)L+=k,D++;if(!(k=t.charAt(D))||k===l)return!!n||(i=e(i).test().end,E=x.decode.raw(x.unescape(E),i,{nonTerminated:!1}),S&&(g=e(g).test().end,S=x.decode.raw(x.unescape(S),g)),e(L)({type:"definition",identifier:r(M),label:M,title:S||null,url:E}))};var o='"',a="'",s="\\",l="\n",c="\t",u=" ",h="[",d="]",p="(",f=")",m=":",v="<",g=">";function y(e){return e!==g&&e!==h&&e!==d}function b(e){return e!==h&&e!==d&&!i(e)}y.delimiter=g},1134:(e,t,n)=>{"use strict";var i=n(1900),r=n(1071);e.exports=s,s.locator=r;var o="~",a="~~";function s(e,t,n){var r,s,l,c="",u="",h="",d="";if(this.options.gfm&&t.charAt(0)===o&&t.charAt(1)===o&&!i(t.charAt(2)))for(r=1,s=t.length,(l=e.now()).column+=2,l.offset+=2;++r<s;){if(!((c=t.charAt(r))!==o||u!==o||h&&i(h)))return!!n||e(a+d+a)({type:"delete",children:this.tokenizeInline(d,l)});d+=u,h=u,u=c}}},5657:(e,t,n)=>{"use strict";var i=n(3507),r=n(7092),o=n(741),a=n(2298);e.exports=d,d.locator=a,d.notInLink=!0;var s=43,l=45,c=46,u=64,h=95;function d(e,t,n){var a,d,p,f,m=this,v=m.options.gfm,g=m.inlineTokenizers,y=0,b=t.length,w=-1;if(v){for(a=t.charCodeAt(y);r(a)||o(a)||a===s||a===l||a===c||a===h;)a=t.charCodeAt(++y);if(0!==y&&a===u){for(y++;y<b&&(a=t.charCodeAt(y),r(a)||o(a)||a===l||a===c||a===h);)y++,-1===w&&a===c&&(w=y);if(-1!==w&&w!==y&&a!==l&&a!==h)return a===c&&y--,d=t.slice(0,y),!!n||(f=m.enterLink(),m.inlineTokenizers={text:g.text},p=m.tokenizeInline(d,e.now()),m.inlineTokenizers=g,f(),e(d)({type:"link",title:null,url:"mailto:"+i(d,{nonTerminated:!1}),children:p}))}}}},439:(e,t,n)=>{"use strict";var i=n(4898),r=n(8257),o=n(1900),a=n(1030);e.exports=u,u.locator=a;var s="*",l="_",c="\\";function u(e,t,n){var a,u,h,d,p,f,m,v=0,g=t.charAt(v);if(!(g!==s&&g!==l||(u=this.options.pedantic,p=g,h=g,f=t.length,v++,d="",g="",u&&o(t.charAt(v)))))for(;v<f;){if(m=g,!((g=t.charAt(v))!==h||u&&o(m))){if((g=t.charAt(++v))!==h){if(!i(d)||m===h)return;if(!u&&h===l&&r(g)){d+=h;continue}return!!n||((a=e.now()).column++,a.offset++,e(p+d+h)({type:"emphasis",children:this.tokenizeInline(d,a)}))}d+=h}u||g!==c||(d+=g,g=t.charAt(++v)),d+=g,v++}}},470:(e,t,n)=>{"use strict";var i=n(3115);e.exports=a,a.locator=i;var r="\n",o="\\";function a(e,t,n){var i,a;if(t.charAt(0)===o&&(i=t.charAt(1),-1!==this.escape.indexOf(i)))return!!n||(a=i===r?{type:"break"}:{type:"text",value:i},e(o+i)(a))}},8469:e=>{"use strict";e.exports=function(e,a,s){var l,c,u,h=this.options.pedantic,d=a.length+1,p=-1,f=e.now(),m="",v="";for(;++p<d;){if((l=a.charAt(p))!==i&&l!==n){p--;break}m+=l}u=0;for(;++p<=d;){if((l=a.charAt(p))!==r){p--;break}m+=l,u++}if(u>o)return;if(!u||!h&&a.charAt(p+1)===r)return;d=a.length+1,c="";for(;++p<d;){if((l=a.charAt(p))!==i&&l!==n){p--;break}c+=l}if(!h&&0===c.length&&l&&l!==t)return;if(s)return!0;m+=c,c="",v="";for(;++p<d&&(l=a.charAt(p))&&l!==t;)if(l===i||l===n||l===r){for(;l===i||l===n;)c+=l,l=a.charAt(++p);if(h||!v||c||l!==r){for(;l===r;)c+=l,l=a.charAt(++p);for(;l===i||l===n;)c+=l,l=a.charAt(++p);p--}else v+=l}else v+=c+l,c="";return f.column+=m.length,f.offset+=m.length,e(m+=v+c)({type:"heading",depth:u,children:this.tokenizeInline(v,f)})};var t="\n",n="\t",i=" ",r="#",o=6},8671:e=>{"use strict";e.exports=function(e,c,u){var h,d,p,f,m,v=e.now(),g=c.length,y=-1,b="";for(;++y<g;){if((p=c.charAt(y))!==i||y>=a){y--;break}b+=p}h="",d="";for(;++y<g;){if((p=c.charAt(y))===t){y--;break}p===i||p===n?d+=p:(h+=d+p,d="")}if(v.column+=b.length,v.offset+=b.length,b+=h+d,p=c.charAt(++y),f=c.charAt(++y),p!==t||f!==r&&f!==o)return;b+=p,d=f,m=f===r?s:l;for(;++y<g;){if((p=c.charAt(y))!==f){if(p!==t)return;y--;break}d+=p}if(u)return!0;return e(b+d)({type:"heading",depth:m,children:this.tokenizeInline(h,v)})};var t="\n",n="\t",i=" ",r="=",o="-",a=3,s=1,l=2},8776:(e,t,n)=>{"use strict";var i=n(4839).X;e.exports=function(e,t,n){var i,w,k,C,M,E,S,x=this.options.blocks.join("|"),T=new RegExp("^</?("+x+")(?=(\\s|/?>|$))","i"),D=t.length,A=0,L=[[l,c,!0],[u,h,!0],[d,p,!0],[f,m,!0],[v,g,!0],[T,y,!0],[b,y,!1]];for(;A<D&&((C=t.charAt(A))===r||C===o);)A++;if(t.charAt(A)!==s)return;i=-1===(i=t.indexOf(a,A+1))?D:i,w=t.slice(A,i),k=-1,M=L.length;for(;++k<M;)if(L[k][0].test(w)){E=L[k];break}if(!E)return;if(n)return E[2];if(A=i,!E[1].test(w))for(;A<D;){if(i=-1===(i=t.indexOf(a,A+1))?D:i,w=t.slice(A+1,i),E[1].test(w)){w&&(A=i);break}A=i}return S=t.slice(0,A),e(S)({type:"html",value:S})};var r="\t",o=" ",a="\n",s="<",l=/^<(script|pre|style)(?=(\s|>|$))/i,c=/<\/(script|pre|style)>/i,u=/^<!--/,h=/-->/,d=/^<\?/,p=/\?>/,f=/^<![A-Za-z]/,m=/>/,v=/^<!\[CDATA\[/,g=/]]>/,y=/^$/,b=new RegExp(i.source+"\\s*$")},7648:(e,t,n)=>{"use strict";var i=n(741),r=n(1890),o=n(4839).T;e.exports=d,d.locator=r;var a="<",s="?",l="!",c="/",u=/^<a /i,h=/^<\/a>/i;function d(e,t,n){var r,d,p=this,f=t.length;if(!(t.charAt(0)!==a||f<3)&&(r=t.charAt(1),(i(r)||r===s||r===l||r===c)&&(d=t.match(o))))return!!n||(d=d[0],!p.inLink&&u.test(d)?p.inLink=!0:p.inLink&&h.test(d)&&(p.inLink=!1),e(d)({type:"html",value:d}))}},9405:(e,t,n)=>{"use strict";var i=n(1900),r=n(2356);e.exports=g,g.locator=r;var o="\n",a="!",s='"',l="'",c="(",u=")",h="<",d=">",p="[",f="\\",m="]",v="`";function g(e,t,n){var r,g,y,b,w,k,C,M,E,S,x,T,D,A,L,P,I,F,O=this,B="",N=0,R=t.charAt(0),H=O.options.pedantic,V=O.options.commonmark,z=O.options.gfm;if(R===a&&(M=!0,B=R,R=t.charAt(++N)),R===p&&(M||!O.inLink)){for(B+=R,A="",N++,x=t.length,D=0,(P=e.now()).column+=N,P.offset+=N;N<x;){if(k=R=t.charAt(N),R===v){for(g=1;t.charAt(N+1)===v;)k+=R,N++,g++;y?g>=y&&(y=0):y=g}else if(R===f)N++,k+=t.charAt(N);else if(y&&!z||R!==p){if((!y||z)&&R===m){if(!D){if(t.charAt(N+1)!==c)return;k+=c,r=!0,N++;break}D--}}else D++;A+=k,k="",N++}if(r){for(E=A,B+=A+k,N++;N<x&&(R=t.charAt(N),i(R));)B+=R,N++;if(A="",b=B,(R=t.charAt(N))===h){for(N++,b+=h;N<x&&(R=t.charAt(N))!==d;){if(V&&R===o)return;A+=R,N++}if(t.charAt(N)!==d)return;B+=h+A+d,L=A,N++}else{for(R=null,k="";N<x&&(R=t.charAt(N),!k||!(R===s||R===l||V&&R===c));){if(i(R)){if(!H)break;k+=R}else{if(R===c)D++;else if(R===u){if(0===D)break;D--}A+=k,k="",R===f&&(A+=f,R=t.charAt(++N)),A+=R}N++}L=A,N=(B+=A).length}for(A="";N<x&&(R=t.charAt(N),i(R));)A+=R,N++;if(R=t.charAt(N),B+=A,A&&(R===s||R===l||V&&R===c))if(N++,A="",S=R===c?u:R,w=B+=R,V){for(;N<x&&(R=t.charAt(N))!==S;)R===f&&(A+=f,R=t.charAt(++N)),N++,A+=R;if((R=t.charAt(N))!==S)return;for(T=A,B+=A+R,N++;N<x&&(R=t.charAt(N),i(R));)B+=R,N++}else for(k="";N<x;){if((R=t.charAt(N))===S)C&&(A+=S+k,k=""),C=!0;else if(C){if(R===u){B+=A+S+k,T=A;break}i(R)?k+=R:(A+=S+k+R,k="",C=!1)}else A+=R;N++}if(t.charAt(N)===u)return!!n||(B+=u,L=O.decode.raw(O.unescape(L),e(b).test().end,{nonTerminated:!1}),T&&(w=e(w).test().end,T=O.decode.raw(O.unescape(T),w)),F={type:M?"image":"link",title:T||null,url:L},M?F.alt=O.decode.raw(O.unescape(E),P)||null:(I=O.enterLink(),F.children=O.tokenizeInline(E,P),I()),e(B)(F))}}}},745:(e,t,n)=>{"use strict";var i=n(4898),r=n(7092),o=n(6058),a=n(5540),s=n(6047);e.exports=function(e,t,n){var o,a,y,b,w,k,C,E,S,x,T,D,A,L,P,I,F,O,B,N,R,H,V,z=this,q=z.options.commonmark,U=z.options.pedantic,_=z.blockTokenizers,W=z.interruptList,j=0,G=t.length,K=null,Y=!1;for(;j<G&&((b=t.charAt(j))===m||b===p);)j++;if((b=t.charAt(j))===l||b===u||b===h)w=b,y=!1;else{for(y=!0,a="";j<G&&(b=t.charAt(j),r(b));)a+=b,j++;if(b=t.charAt(j),!a||!(b===d||q&&b===v))return;if(n&&"1"!==a)return;K=parseInt(a,10),w=b}if((b=t.charAt(++j))!==p&&b!==m&&(U||b!==f&&""!==b))return;if(n)return!0;j=0,L=[],P=[],I=[];for(;j<G;){for(C=j,E=!1,V=!1,-1===(k=t.indexOf(f,j))&&(k=G),o=0;j<G;){if((b=t.charAt(j))===m)o+=g-o%g;else{if(b!==p)break;o++}j++}if(F&&o>=F.indent&&(V=!0),b=t.charAt(j),S=null,!V){if(b===l||b===u||b===h)S=b,j++,o++;else{for(a="";j<G&&(b=t.charAt(j),r(b));)a+=b,j++;b=t.charAt(j),j++,a&&(b===d||q&&b===v)&&(S=b,o+=a.length+1)}if(S)if((b=t.charAt(j))===m)o+=g-o%g,j++;else if(b===p){for(H=j+g;j<H&&t.charAt(j)===p;)j++,o++;j===H&&t.charAt(j)===p&&(j-=g-1,o-=g-1)}else b!==f&&""!==b&&(S=null)}if(S){if(!U&&w!==S)break;E=!0}else q||V||t.charAt(C)!==p?q&&F&&(V=o>=F.indent||o>g):V=!0,E=!1,j=C;if(T=t.slice(C,k),x=C===j?T:t.slice(j,k),(S===l||S===c||S===h)&&_.thematicBreak.call(z,e,T,!0))break;if(D=A,A=!E&&!i(x).length,V&&F)F.value=F.value.concat(I,T),P=P.concat(I,T),I=[];else if(E)0!==I.length&&(Y=!0,F.value.push(""),F.trail=I.concat()),F={value:[T],indent:o,trail:[]},L.push(F),P=P.concat(I,T),I=[];else if(A){if(D&&!q)break;I.push(T)}else{if(D)break;if(s(W,_,z,[e,T,!0]))break;F.value=F.value.concat(I,T),P=P.concat(I,T),I=[]}j=k+1}N=e(P.join(f)).reset({type:"list",ordered:y,start:K,spread:Y,children:[]}),O=z.enterList(),B=z.enterBlock(),j=-1,G=L.length;for(;++j<G;)F=L[j].value.join(f),R=e.now(),e(F)(M(z,F,R),N),F=L[j].trail.join(f),j!==G-1&&(F+=f),e(F);return O(),B(),N};var l="*",c="_",u="+",h="-",d=".",p=" ",f="\n",m="\t",v=")",g=4,y=/\n\n(?!\s*$)/,b=/^\[(.)][ \t]/,w=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,k=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,C=/^( {1,4}|\t)?/gm;function M(e,t,n){var i,r,o=e.offset,a=null,s=null;return t=(e.options.pedantic?E:S).apply(null,arguments),e.options.gfm&&(i=t.match(b))&&(r=i[0].length,a=" "!==i[1],s=i[1],o[n.line]+=r,t=t.slice(r)),{type:"listItem",spread:y.test(t),checked:a,checklist:s,children:e.tokenizeBlock(t,n)}}function E(e,t,n){var i=e.offset,r=n.line;return t=t.replace(k,o),r=n.line,t.replace(C,o);function o(e){return i[r]=(i[r]||0)+e.length,r++,""}}function S(e,t,n){var i,r,s,l,c,u,h,d=e.offset,m=n.line;for(l=(t=t.replace(w,(function(e,t,n,o,a){r=t+n+o,s=a,Number(n)<10&&r.length%2==1&&(n=p+n);return(i=t+p.repeat(n.length)+o)+s}))).split(f),(c=a(t,o(i).indent).split(f))[0]=s,d[m]=(d[m]||0)+r.length,m++,u=0,h=l.length;++u<h;)d[m]=(d[m]||0)+l[u].length-c[u].length,m++;return c.join(f)}},8607:(e,t,n)=>{"use strict";var i=n(4898),r=n(8813),o=n(6047);e.exports=function(e,t,n){var u,h,d,p,f,m=this,v=m.options.commonmark,g=m.blockTokenizers,y=m.interruptParagraph,b=t.indexOf(s),w=t.length;for(;b<w;){if(-1===b){b=w;break}if(t.charAt(b+1)===s)break;if(v){for(p=0,u=b+1;u<w;){if((d=t.charAt(u))===a){p=c;break}if(d!==l)break;p++,u++}if(p>=c&&d!==s){b=t.indexOf(s,b+1);continue}}if(h=t.slice(b+1),o(y,g,m,[e,h,!0]))break;if(u=b,-1!==(b=t.indexOf(s,b+1))&&""===i(t.slice(u,b))){b=u;break}}if(h=t.slice(0,b),n)return!0;return f=e.now(),h=r(h),e(h)({type:"paragraph",children:m.tokenizeInline(h,f)})};var a="\t",s="\n",l=" ",c=4},6252:(e,t,n)=>{"use strict";var i=n(1900),r=n(2356),o=n(2115);e.exports=m,m.locator=r;var a="link",s="image",l="shortcut",c="collapsed",u="full",h="!",d="[",p="\\",f="]";function m(e,t,n){var r,m,v,g,y,b,w,k,C=this,M=C.options.commonmark,E=t.charAt(0),S=0,x=t.length,T="",D="",A=a,L=l;if(E===h&&(A=s,D=E,E=t.charAt(++S)),E===d){for(S++,D+=E,b="",k=0;S<x;){if((E=t.charAt(S))===d)w=!0,k++;else if(E===f){if(!k)break;k--}E===p&&(b+=p,E=t.charAt(++S)),b+=E,S++}if(T=b,r=b,(E=t.charAt(S))===f){if(S++,T+=E,b="",!M)for(;S<x&&(E=t.charAt(S),i(E));)b+=E,S++;if((E=t.charAt(S))===d){for(m="",b+=E,S++;S<x&&(E=t.charAt(S))!==d&&E!==f;)E===p&&(m+=p,E=t.charAt(++S)),m+=E,S++;(E=t.charAt(S))===f?(L=m?u:c,b+=m+E,S++):m="",T+=b,b=""}else{if(!r)return;m=r}if(L===u||!w)return T=D+T,A===a&&C.inLink?null:!!n||((v=e.now()).column+=D.length,v.offset+=D.length,g={type:A+"Reference",identifier:o(m=L===u?m:r),label:m,referenceType:L},A===a?(y=C.enterLink(),g.children=C.tokenizeInline(r,v),y()):g.alt=C.decode.raw(C.unescape(r),v)||null,e(T)(g))}}}},5702:(e,t,n)=>{"use strict";var i=n(4898),r=n(1900),o=n(6451);e.exports=c,c.locator=o;var a="\\",s="*",l="_";function c(e,t,n){var o,c,u,h,d,p,f,m=0,v=t.charAt(m);if(!(v!==s&&v!==l||t.charAt(++m)!==v||(c=this.options.pedantic,d=(u=v)+u,p=t.length,m++,h="",v="",c&&r(t.charAt(m)))))for(;m<p;){if(f=v,!((v=t.charAt(m))!==u||t.charAt(m+1)!==u||c&&r(f))&&(v=t.charAt(m+2))!==u){if(!i(h))return;return!!n||((o=e.now()).column+=2,o.offset+=2,e(d+h+d)({type:"strong",children:this.tokenizeInline(h,o)}))}c||v!==a||(h+=v,v=t.charAt(++m)),h+=v,m++}}},7793:(e,t,n)=>{"use strict";var i=n(1900);e.exports=function(e,t,n){var r,a,g,y,b,w,k,C,M,E,S,x,T,D,A,L,P,I,F,O,B,N;if(!this.options.gfm)return;r=0,A=0,w=t.length+1,k=[];for(;r<w;){if(F=t.indexOf(o,r),O=t.indexOf(u,r+1),-1===F&&(F=t.length),-1===O||O>F){if(A<d)return;break}if(L=t.slice(r,F),0===A)N=L[0]!==u;else if(N&&L[0]===u||!N&&L[0]!==u)break;k.push(L),A++,r=F+1}y=k.join(o),a=k.splice(1,1)[0]||[],r=0,w=a.length,A--,g=!1,S=[];for(;r<w;){if((M=a.charAt(r))===u){if(E=null,!1===g){if(!1===B)return}else S.push(g),g=!1;B=!1}else if(M===s)E=!0,g=g||null;else if(M===l)g=g===p?f:E&&null===g?m:p;else if(!i(M))return;r++}!1!==g&&S.push(g);if(S.length<h)return;if(n)return!0;D=-1,P=[],I=e(y).reset({type:"table",align:S,children:P});for(;++D<A;){for(L=k[D],b={type:"tableRow",children:[]},D&&e(o),e(L).reset(b,I),w=L.length+1,r=0,C="",x="",T=!0;r<w;){if(""===(M=L.charAt(r))||M===u)if(T)e(M);else{if((x||M)&&!T){y=x,C.length>1&&(M?(y+=C.slice(0,-1),C=C.charAt(C.length-1)):(y+=C,C=""));let t=v(y),{start:n,end:i}=t,r=y.slice(n,y.length-i),o=e.now();o.offset+=n,o.column+=n,e(y)({type:"tableCell",padding:t,children:this.tokenizeInline(r,o)},b)}e(C+M),C="",x=""}else C&&(x+=C,C=""),x+=M,M===c&&r!==w-2&&(x+=L.charAt(r+1),r++);T=!1,r++}D||e(o+a)}return I};var r="\t",o="\n",a=" ",s="-",l=":",c="\\",u="|",h=1,d=2,p="left",f="center",m="right";function v(e){let t=0,n=0;for(let n=0,i=e.length;n<i;n++){let i=e[n];if(i!==r&&i!==a)break;t+=1}for(let i=e.length-1;i>=t;i--){let t=e[i];if(t!==r&&t!==a)break;n+=1}return{start:t,end:n}}},4410:e=>{"use strict";e.exports=function(e,t,n){var i,r,o,a,s,l,c,u,h,d,p=this;if(n)return!0;i=p.inlineMethods,a=i.length,r=p.inlineTokenizers,o=-1,h=t.length;for(;++o<a;)"text"!==(u=i[o])&&r[u]&&((c=r[u].locator)||e.file.fail("Missing locator: `"+u+"`"),-1!==(l=c.call(p,t,1))&&l<h&&(h=l));s=t.slice(0,h),d=e.now(),p.decode(s,d,(function(t,n,i){e(i||t)({type:"text",value:t})}))}},6968:e=>{"use strict";e.exports=function(e,l,c){var u,h,d,p,f=-1,m=l.length+1,v="";for(;++f<m&&((u=l.charAt(f))===t||u===i);)v+=u;if(u!==r&&u!==o&&u!==a)return;h=u,v+=u,d=1,p="";for(;++f<m;)if((u=l.charAt(f))===h)d++,v+=p+h,p="";else{if(u!==i)return d>=s&&(!u||u===n)?(v+=p,!!c||e(v)({type:"thematicBreak"})):void 0;p+=u}};var t="\t",n="\n",i=" ",r="*",o="-",a="_",s=3},1944:(e,t,n)=>{"use strict";var i=n(7122),r=n(3507),o=n(7092),a=n(741),s=n(1900),l=n(4307);e.exports=E,E.locator=l,E.notInLink=!0;var c=33,u=38,h=41,d=42,p=44,f=45,m=46,v=58,g=59,y=63,b=60,w=95,k=126,C="(",M=")";function E(e,t,n){var l,E,S,x,T,D,A,L,P,I,F,O,B,N,R=this,H=R.options.gfm,V=R.inlineTokenizers,z=t.length,q=-1,U=!1;if(H){if("www."===t.slice(0,4))U=!0,x=4;else if("http://"===t.slice(0,7).toLowerCase())x=7;else{if("https://"!==t.slice(0,8).toLowerCase())return;x=8}for(q=x-1,S=x,l=[];x<z;)if((A=t.charCodeAt(x))!==m){if(!o(A)&&!a(A)&&A!==f&&A!==w)break;x++}else{if(q===x-1)break;l.push(x),q=x,x++}if(A===m&&(l.pop(),x--),void 0!==l[0]&&(E=l.length<2?S:l[l.length-2]+1,-1===t.slice(E,x).indexOf("_"))){if(n)return!0;for(L=x,T=x;x<z&&(A=t.charCodeAt(x),!s(A)&&A!==b);)x++,A===c||A===d||A===p||A===m||A===v||A===y||A===w||A===k||(L=x);if(x=L,t.charCodeAt(x-1)===h)for(D=t.slice(T,x),P=i(D,C),I=i(D,M);I>P;)x=T+D.lastIndexOf(M),D=t.slice(T,x),I--;if(t.charCodeAt(x-1)===g&&(x--,a(t.charCodeAt(x-1)))){for(L=x-2;a(t.charCodeAt(L));)L--;t.charCodeAt(L)===u&&(x=L)}return F=t.slice(0,x),B=r(F,{nonTerminated:!1}),U&&(B="http://"+B),N=R.enterLink(),R.inlineTokenizers={text:V.text},O=R.tokenizeInline(F,e.now()),R.inlineTokenizers=V,N(),e(F)({type:"link",title:null,url:B,children:O})}}}},7269:e=>{"use strict";function t(e){var t,n;return"text"!==e.type||!e.position||(t=e.position.start,n=e.position.end,t.line!==n.line||n.column-t.column===e.value.length)}function n(e,t){return e.value+=t.value,e}function i(e,t){return this.options.commonmark||this.options.gfm?t:(e.children=e.children.concat(t.children),e)}e.exports=function(e){return function(r,o){var a,s,l,c,u,h=this,d=h.offset,p=[],f=h[e+"Methods"],m=h[e+"Tokenizers"],v=o.line,g=o.column;if(!r)return p;S.now=w,S.file=h.file,y("");for(;r;){for(a=-1,s=f.length,c=!1;++a<s&&(!(l=m[f[a]])||l.onlyAtStart&&!h.atStart||l.notInList&&h.inList||l.notInBlock&&h.inBlock||l.notInLink&&h.inLink||(u=r.length,l.apply(h,[S,r]),!(c=u!==r.length))););c||h.file.fail(new Error("Infinite loop"),S.now())}return h.eof=w(),p;function y(e){for(var t=-1,n=e.indexOf("\n");-1!==n;)v++,t=n,n=e.indexOf("\n",n+1);-1===t?g+=e.length:g=e.length-t,v in d&&(-1!==t?g+=d[v]:g<=d[v]&&(g=d[v]+1))}function b(){var e=[],t=v+1;return function(){for(var n=v+1;t<n;)e.push((d[t]||0)+1),t++;return e}}function w(){var e={line:v,column:g};return e.offset=h.toOffset(e),e}function k(e){this.start=e,this.end=w()}function C(e){r.slice(0,e.length)!==e&&h.file.fail(new Error("Incorrectly eaten value: please report this warning on https://git.io/vg5Ft"),w())}function M(){var e=w();return t;function t(t,n){var i=t.position,r=i?i.start:e,o=[],a=i&&i.end.line,s=e.line;if(t.position=new k(r),i&&n&&i.indent){if(o=i.indent,a<s){for(;++a<s;)o.push((d[a]||0)+1);o.push(e.column)}n=o.concat(n)}return t.position.indent=n||[],t}}function E(e,r){var o=r?r.children:p,a=o[o.length-1];return a&&e.type===a.type&&("text"===e.type||"blockquote"===e.type)&&t(a)&&t(e)&&(e=("text"===e.type?n:i).call(h,a,e)),e!==a&&o.push(e),e}function S(e){var t=b(),n=M(),i=w();C(e),a.reset=s,s.test=l,a.test=l,r=r.slice(e.length),y(e);let o=h.atStart;return h.atStart&&0!==e.length&&h.exitStart(),t=t(),a;function a(e,i){return n(E(n(e),i),t)}function s(){var t=a.apply(null,arguments);return v=i.line,g=i.column,r=e+r,h.atStart=o,t}function l(){var t=n({});return v=i.line,g=i.column,r=e+r,t.position}}}}},9359:e=>{"use strict";e.exports=function(e,n){return function(i){var r,o=0,a=i.indexOf(t),s=e[n],l=[];for(;-1!==a;)l.push(i.slice(o,a)),o=a+1,(r=i.charAt(o))&&-1!==s.indexOf(r)||l.push(t),a=i.indexOf(t,o+1);return l.push(i.slice(o)),l.join("")}};var t="\\"},7122:e=>{"use strict";e.exports=function(e,t){var n,i=String(e),r=0;if("string"!=typeof t)throw new Error("Expected character");n=i.indexOf(t);for(;-1!==n;)r++,n=i.indexOf(t,n+t.length);return r}},9510:e=>{"use strict";e.exports=function(e){return String(e).replace(/\s+/g," ")}},6058:e=>{"use strict";e.exports=function(e){var o,a=0,s=0,l=e.charAt(a),c={},u=0;for(;l===t||l===n;){for(s+=o=l===t?r:i,o>1&&(s=Math.floor(s/o)*o);u<s;)c[++u]=a;l=e.charAt(++a)}return{indent:s,stops:c}};var t="\t",n=" ",i=1,r=4},4839:(e,t)=>{"use strict";var n="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",i="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";t.X=new RegExp("^(?:"+n+"|"+i+")"),t.T=new RegExp("^(?:"+n+"|"+i+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},6047:e=>{"use strict";e.exports=function(e,t,n,i){var r,o,a=e.length,s=-1;for(;++s<a;)if((void 0===(o=(r=e[s])[1]||{}).pedantic||o.pedantic===n.options.pedantic)&&(void 0===o.commonmark||o.commonmark===n.options.commonmark)&&t[r[0]].apply(n,i))return!0;return!1}},741:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},7092:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},1900:e=>{"use strict";e.exports=function(e){return n.test("number"==typeof e?t(e):e.charAt(0))};var t=String.fromCharCode,n=/\s/},8257:e=>{"use strict";e.exports=function(e){return n.test("number"==typeof e?t(e):e.charAt(0))};var t=String.fromCharCode,n=/\w/},4982:e=>{"use strict";e.exports=r;var t=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],n=t.concat(["~","|"]),i=n.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function r(e){var r=e||{};return r.commonmark?i:r.gfm?n:t}r.default=t,r.gfm=n,r.commonmark=i},2115:(e,t,n)=>{"use strict";var i=n(9510);e.exports=function(e){return i(e).toLowerCase()}},5540:(e,t,n)=>{"use strict";var i=n(4898),r=n(6058);e.exports=function(e,t){var n,l,c,u=e.split(o),h=u.length+1,d=1/0,p=[];u.unshift(a.repeat(t)+s);for(;h--;)if(l=r(u[h]),p[h]=l.stops,0!==i(u[h]).length){if(!l.indent){d=1/0;break}l.indent>0&&l.indent<d&&(d=l.indent)}if(d!==1/0)for(h=u.length;h--;){for(c=p[h],n=d;n&&!(n in c);)n--;u[h]=u[h].slice(c[n]+1)}return u.shift(),u.join(o)};var o="\n",a=" ",s="!"},9546:e=>{"use strict";e.exports=function(e,t,n){return function(){var i=n||this,r=i[e];return i[e]=!t,o;function o(){i[e]=r}}}},8813:e=>{"use strict";e.exports=function(e){return String(e).replace(/\n+$/,"")}},4898:(e,t)=>{(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},7057:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)t.call(i,r)&&(e[r]=i[r])}return e};var t=Object.prototype.hasOwnProperty},9710:e=>{"use strict";e.exports=JSON.parse('{"nbsp":"Â ","iexcl":"Â¡","cent":"Â¢","pound":"Â£","curren":"Â¤","yen":"Â¥","brvbar":"Â¦","sect":"Â§","uml":"Â¨","copy":"Â©","ordf":"Âª","laquo":"Â«","not":"Â¬","shy":"Â­","reg":"Â®","macr":"Â¯","deg":"Â°","plusmn":"Â±","sup2":"Â²","sup3":"Â³","acute":"Â´","micro":"Âµ","para":"Â¶","middot":"Â·","cedil":"Â¸","sup1":"Â¹","ordm":"Âº","raquo":"Â»","frac14":"Â¼","frac12":"Â½","frac34":"Â¾","iquest":"Â¿","Agrave":"Ã€","Aacute":"Ã","Acirc":"Ã‚","Atilde":"Ãƒ","Auml":"Ã„","Aring":"Ã…","AElig":"Ã†","Ccedil":"Ã‡","Egrave":"Ãˆ","Eacute":"Ã‰","Ecirc":"ÃŠ","Euml":"Ã‹","Igrave":"ÃŒ","Iacute":"Ã","Icirc":"ÃŽ","Iuml":"Ã","ETH":"Ã","Ntilde":"Ã‘","Ograve":"Ã’","Oacute":"Ã“","Ocirc":"Ã”","Otilde":"Ã•","Ouml":"Ã–","times":"Ã—","Oslash":"Ã˜","Ugrave":"Ã™","Uacute":"Ãš","Ucirc":"Ã›","Uuml":"Ãœ","Yacute":"Ã","THORN":"Ãž","szlig":"ÃŸ","agrave":"Ã ","aacute":"Ã¡","acirc":"Ã¢","atilde":"Ã£","auml":"Ã¤","aring":"Ã¥","aelig":"Ã¦","ccedil":"Ã§","egrave":"Ã¨","eacute":"Ã©","ecirc":"Ãª","euml":"Ã«","igrave":"Ã¬","iacute":"Ã­","icirc":"Ã®","iuml":"Ã¯","eth":"Ã°","ntilde":"Ã±","ograve":"Ã²","oacute":"Ã³","ocirc":"Ã´","otilde":"Ãµ","ouml":"Ã¶","divide":"Ã·","oslash":"Ã¸","ugrave":"Ã¹","uacute":"Ãº","ucirc":"Ã»","uuml":"Ã¼","yacute":"Ã½","thorn":"Ã¾","yuml":"Ã¿","fnof":"Æ’","Alpha":"Î‘","Beta":"Î’","Gamma":"Î“","Delta":"Î”","Epsilon":"Î•","Zeta":"Î–","Eta":"Î—","Theta":"Î˜","Iota":"Î™","Kappa":"Îš","Lambda":"Î›","Mu":"Îœ","Nu":"Î","Xi":"Îž","Omicron":"ÎŸ","Pi":"Î ","Rho":"Î¡","Sigma":"Î£","Tau":"Î¤","Upsilon":"Î¥","Phi":"Î¦","Chi":"Î§","Psi":"Î¨","Omega":"Î©","alpha":"Î±","beta":"Î²","gamma":"Î³","delta":"Î´","epsilon":"Îµ","zeta":"Î¶","eta":"Î·","theta":"Î¸","iota":"Î¹","kappa":"Îº","lambda":"Î»","mu":"Î¼","nu":"Î½","xi":"Î¾","omicron":"Î¿","pi":"Ï€","rho":"Ï","sigmaf":"Ï‚","sigma":"Ïƒ","tau":"Ï„","upsilon":"Ï…","phi":"Ï†","chi":"Ï‡","psi":"Ïˆ","omega":"Ï‰","thetasym":"Ï‘","upsih":"Ï’","piv":"Ï–","bull":"â€¢","hellip":"â€¦","prime":"â€²","Prime":"â€³","oline":"â€¾","frasl":"â„","weierp":"â„˜","image":"â„‘","real":"â„œ","trade":"â„¢","alefsym":"â„µ","larr":"â†","uarr":"â†‘","rarr":"â†’","darr":"â†“","harr":"â†”","crarr":"â†µ","lArr":"â‡","uArr":"â‡‘","rArr":"â‡’","dArr":"â‡“","hArr":"â‡”","forall":"âˆ€","part":"âˆ‚","exist":"âˆƒ","empty":"âˆ…","nabla":"âˆ‡","isin":"âˆˆ","notin":"âˆ‰","ni":"âˆ‹","prod":"âˆ","sum":"âˆ‘","minus":"âˆ’","lowast":"âˆ—","radic":"âˆš","prop":"âˆ","infin":"âˆž","ang":"âˆ ","and":"âˆ§","or":"âˆ¨","cap":"âˆ©","cup":"âˆª","int":"âˆ«","there4":"âˆ´","sim":"âˆ¼","cong":"â‰…","asymp":"â‰ˆ","ne":"â‰ ","equiv":"â‰¡","le":"â‰¤","ge":"â‰¥","sub":"âŠ‚","sup":"âŠƒ","nsub":"âŠ„","sube":"âŠ†","supe":"âŠ‡","oplus":"âŠ•","otimes":"âŠ—","perp":"âŠ¥","sdot":"â‹…","lceil":"âŒˆ","rceil":"âŒ‰","lfloor":"âŒŠ","rfloor":"âŒ‹","lang":"âŒ©","rang":"âŒª","loz":"â—Š","spades":"â™ ","clubs":"â™£","hearts":"â™¥","diams":"â™¦","quot":"\\"","amp":"&","lt":"<","gt":">","OElig":"Å’","oelig":"Å“","Scaron":"Å ","scaron":"Å¡","Yuml":"Å¸","circ":"Ë†","tilde":"Ëœ","ensp":"â€‚","emsp":"â€ƒ","thinsp":"â€‰","zwnj":"â€Œ","zwj":"â€","lrm":"â€Ž","rlm":"â€","ndash":"â€“","mdash":"â€”","lsquo":"â€˜","rsquo":"â€™","sbquo":"â€š","ldquo":"â€œ","rdquo":"â€","bdquo":"â€ž","dagger":"â€ ","Dagger":"â€¡","permil":"â€°","lsaquo":"â€¹","rsaquo":"â€º","euro":"â‚¬"}')},4472:e=>{"use strict";e.exports=JSON.parse('{"AElig":"Ã†","AMP":"&","Aacute":"Ã","Acirc":"Ã‚","Agrave":"Ã€","Aring":"Ã…","Atilde":"Ãƒ","Auml":"Ã„","COPY":"Â©","Ccedil":"Ã‡","ETH":"Ã","Eacute":"Ã‰","Ecirc":"ÃŠ","Egrave":"Ãˆ","Euml":"Ã‹","GT":">","Iacute":"Ã","Icirc":"ÃŽ","Igrave":"ÃŒ","Iuml":"Ã","LT":"<","Ntilde":"Ã‘","Oacute":"Ã“","Ocirc":"Ã”","Ograve":"Ã’","Oslash":"Ã˜","Otilde":"Ã•","Ouml":"Ã–","QUOT":"\\"","REG":"Â®","THORN":"Ãž","Uacute":"Ãš","Ucirc":"Ã›","Ugrave":"Ã™","Uuml":"Ãœ","Yacute":"Ã","aacute":"Ã¡","acirc":"Ã¢","acute":"Â´","aelig":"Ã¦","agrave":"Ã ","amp":"&","aring":"Ã¥","atilde":"Ã£","auml":"Ã¤","brvbar":"Â¦","ccedil":"Ã§","cedil":"Â¸","cent":"Â¢","copy":"Â©","curren":"Â¤","deg":"Â°","divide":"Ã·","eacute":"Ã©","ecirc":"Ãª","egrave":"Ã¨","eth":"Ã°","euml":"Ã«","frac12":"Â½","frac14":"Â¼","frac34":"Â¾","gt":">","iacute":"Ã­","icirc":"Ã®","iexcl":"Â¡","igrave":"Ã¬","iquest":"Â¿","iuml":"Ã¯","laquo":"Â«","lt":"<","macr":"Â¯","micro":"Âµ","middot":"Â·","nbsp":"Â ","not":"Â¬","ntilde":"Ã±","oacute":"Ã³","ocirc":"Ã´","ograve":"Ã²","ordf":"Âª","ordm":"Âº","oslash":"Ã¸","otilde":"Ãµ","ouml":"Ã¶","para":"Â¶","plusmn":"Â±","pound":"Â£","quot":"\\"","raquo":"Â»","reg":"Â®","sect":"Â§","shy":"Â­","sup1":"Â¹","sup2":"Â²","sup3":"Â³","szlig":"ÃŸ","thorn":"Ã¾","times":"Ã—","uacute":"Ãº","ucirc":"Ã»","ugrave":"Ã¹","uml":"Â¨","uuml":"Ã¼","yacute":"Ã½","yen":"Â¥","yuml":"Ã¿"}')},5115:e=>{"use strict";e.exports=JSON.parse('{"AEli":"Ã†","AElig":"Ã†","AM":"&","AMP":"&","Aacut":"Ã","Aacute":"Ã","Abreve":"Ä‚","Acir":"Ã‚","Acirc":"Ã‚","Acy":"Ð","Afr":"ð”„","Agrav":"Ã€","Agrave":"Ã€","Alpha":"Î‘","Amacr":"Ä€","And":"â©“","Aogon":"Ä„","Aopf":"ð”¸","ApplyFunction":"â¡","Arin":"Ã…","Aring":"Ã…","Ascr":"ð’œ","Assign":"â‰”","Atild":"Ãƒ","Atilde":"Ãƒ","Aum":"Ã„","Auml":"Ã„","Backslash":"âˆ–","Barv":"â«§","Barwed":"âŒ†","Bcy":"Ð‘","Because":"âˆµ","Bernoullis":"â„¬","Beta":"Î’","Bfr":"ð”…","Bopf":"ð”¹","Breve":"Ë˜","Bscr":"â„¬","Bumpeq":"â‰Ž","CHcy":"Ð§","COP":"Â©","COPY":"Â©","Cacute":"Ä†","Cap":"â‹’","CapitalDifferentialD":"â……","Cayleys":"â„­","Ccaron":"ÄŒ","Ccedi":"Ã‡","Ccedil":"Ã‡","Ccirc":"Äˆ","Cconint":"âˆ°","Cdot":"ÄŠ","Cedilla":"Â¸","CenterDot":"Â·","Cfr":"â„­","Chi":"Î§","CircleDot":"âŠ™","CircleMinus":"âŠ–","CirclePlus":"âŠ•","CircleTimes":"âŠ—","ClockwiseContourIntegral":"âˆ²","CloseCurlyDoubleQuote":"â€","CloseCurlyQuote":"â€™","Colon":"âˆ·","Colone":"â©´","Congruent":"â‰¡","Conint":"âˆ¯","ContourIntegral":"âˆ®","Copf":"â„‚","Coproduct":"âˆ","CounterClockwiseContourIntegral":"âˆ³","Cross":"â¨¯","Cscr":"ð’ž","Cup":"â‹“","CupCap":"â‰","DD":"â……","DDotrahd":"â¤‘","DJcy":"Ð‚","DScy":"Ð…","DZcy":"Ð","Dagger":"â€¡","Darr":"â†¡","Dashv":"â«¤","Dcaron":"ÄŽ","Dcy":"Ð”","Del":"âˆ‡","Delta":"Î”","Dfr":"ð”‡","DiacriticalAcute":"Â´","DiacriticalDot":"Ë™","DiacriticalDoubleAcute":"Ë","DiacriticalGrave":"`","DiacriticalTilde":"Ëœ","Diamond":"â‹„","DifferentialD":"â…†","Dopf":"ð”»","Dot":"Â¨","DotDot":"âƒœ","DotEqual":"â‰","DoubleContourIntegral":"âˆ¯","DoubleDot":"Â¨","DoubleDownArrow":"â‡“","DoubleLeftArrow":"â‡","DoubleLeftRightArrow":"â‡”","DoubleLeftTee":"â«¤","DoubleLongLeftArrow":"âŸ¸","DoubleLongLeftRightArrow":"âŸº","DoubleLongRightArrow":"âŸ¹","DoubleRightArrow":"â‡’","DoubleRightTee":"âŠ¨","DoubleUpArrow":"â‡‘","DoubleUpDownArrow":"â‡•","DoubleVerticalBar":"âˆ¥","DownArrow":"â†“","DownArrowBar":"â¤“","DownArrowUpArrow":"â‡µ","DownBreve":"Ì‘","DownLeftRightVector":"â¥","DownLeftTeeVector":"â¥ž","DownLeftVector":"â†½","DownLeftVectorBar":"â¥–","DownRightTeeVector":"â¥Ÿ","DownRightVector":"â‡","DownRightVectorBar":"â¥—","DownTee":"âŠ¤","DownTeeArrow":"â†§","Downarrow":"â‡“","Dscr":"ð’Ÿ","Dstrok":"Ä","ENG":"ÅŠ","ET":"Ã","ETH":"Ã","Eacut":"Ã‰","Eacute":"Ã‰","Ecaron":"Äš","Ecir":"ÃŠ","Ecirc":"ÃŠ","Ecy":"Ð­","Edot":"Ä–","Efr":"ð”ˆ","Egrav":"Ãˆ","Egrave":"Ãˆ","Element":"âˆˆ","Emacr":"Ä’","EmptySmallSquare":"â—»","EmptyVerySmallSquare":"â–«","Eogon":"Ä˜","Eopf":"ð”¼","Epsilon":"Î•","Equal":"â©µ","EqualTilde":"â‰‚","Equilibrium":"â‡Œ","Escr":"â„°","Esim":"â©³","Eta":"Î—","Eum":"Ã‹","Euml":"Ã‹","Exists":"âˆƒ","ExponentialE":"â…‡","Fcy":"Ð¤","Ffr":"ð”‰","FilledSmallSquare":"â—¼","FilledVerySmallSquare":"â–ª","Fopf":"ð”½","ForAll":"âˆ€","Fouriertrf":"â„±","Fscr":"â„±","GJcy":"Ðƒ","G":">","GT":">","Gamma":"Î“","Gammad":"Ïœ","Gbreve":"Äž","Gcedil":"Ä¢","Gcirc":"Äœ","Gcy":"Ð“","Gdot":"Ä ","Gfr":"ð”Š","Gg":"â‹™","Gopf":"ð”¾","GreaterEqual":"â‰¥","GreaterEqualLess":"â‹›","GreaterFullEqual":"â‰§","GreaterGreater":"âª¢","GreaterLess":"â‰·","GreaterSlantEqual":"â©¾","GreaterTilde":"â‰³","Gscr":"ð’¢","Gt":"â‰«","HARDcy":"Ðª","Hacek":"Ë‡","Hat":"^","Hcirc":"Ä¤","Hfr":"â„Œ","HilbertSpace":"â„‹","Hopf":"â„","HorizontalLine":"â”€","Hscr":"â„‹","Hstrok":"Ä¦","HumpDownHump":"â‰Ž","HumpEqual":"â‰","IEcy":"Ð•","IJlig":"Ä²","IOcy":"Ð","Iacut":"Ã","Iacute":"Ã","Icir":"ÃŽ","Icirc":"ÃŽ","Icy":"Ð˜","Idot":"Ä°","Ifr":"â„‘","Igrav":"ÃŒ","Igrave":"ÃŒ","Im":"â„‘","Imacr":"Äª","ImaginaryI":"â…ˆ","Implies":"â‡’","Int":"âˆ¬","Integral":"âˆ«","Intersection":"â‹‚","InvisibleComma":"â£","InvisibleTimes":"â¢","Iogon":"Ä®","Iopf":"ð•€","Iota":"Î™","Iscr":"â„","Itilde":"Ä¨","Iukcy":"Ð†","Ium":"Ã","Iuml":"Ã","Jcirc":"Ä´","Jcy":"Ð™","Jfr":"ð”","Jopf":"ð•","Jscr":"ð’¥","Jsercy":"Ðˆ","Jukcy":"Ð„","KHcy":"Ð¥","KJcy":"ÐŒ","Kappa":"Îš","Kcedil":"Ä¶","Kcy":"Ðš","Kfr":"ð”Ž","Kopf":"ð•‚","Kscr":"ð’¦","LJcy":"Ð‰","L":"<","LT":"<","Lacute":"Ä¹","Lambda":"Î›","Lang":"âŸª","Laplacetrf":"â„’","Larr":"â†ž","Lcaron":"Ä½","Lcedil":"Ä»","Lcy":"Ð›","LeftAngleBracket":"âŸ¨","LeftArrow":"â†","LeftArrowBar":"â‡¤","LeftArrowRightArrow":"â‡†","LeftCeiling":"âŒˆ","LeftDoubleBracket":"âŸ¦","LeftDownTeeVector":"â¥¡","LeftDownVector":"â‡ƒ","LeftDownVectorBar":"â¥™","LeftFloor":"âŒŠ","LeftRightArrow":"â†”","LeftRightVector":"â¥Ž","LeftTee":"âŠ£","LeftTeeArrow":"â†¤","LeftTeeVector":"â¥š","LeftTriangle":"âŠ²","LeftTriangleBar":"â§","LeftTriangleEqual":"âŠ´","LeftUpDownVector":"â¥‘","LeftUpTeeVector":"â¥ ","LeftUpVector":"â†¿","LeftUpVectorBar":"â¥˜","LeftVector":"â†¼","LeftVectorBar":"â¥’","Leftarrow":"â‡","Leftrightarrow":"â‡”","LessEqualGreater":"â‹š","LessFullEqual":"â‰¦","LessGreater":"â‰¶","LessLess":"âª¡","LessSlantEqual":"â©½","LessTilde":"â‰²","Lfr":"ð”","Ll":"â‹˜","Lleftarrow":"â‡š","Lmidot":"Ä¿","LongLeftArrow":"âŸµ","LongLeftRightArrow":"âŸ·","LongRightArrow":"âŸ¶","Longleftarrow":"âŸ¸","Longleftrightarrow":"âŸº","Longrightarrow":"âŸ¹","Lopf":"ð•ƒ","LowerLeftArrow":"â†™","LowerRightArrow":"â†˜","Lscr":"â„’","Lsh":"â†°","Lstrok":"Å","Lt":"â‰ª","Map":"â¤…","Mcy":"Ðœ","MediumSpace":"âŸ","Mellintrf":"â„³","Mfr":"ð”","MinusPlus":"âˆ“","Mopf":"ð•„","Mscr":"â„³","Mu":"Îœ","NJcy":"ÐŠ","Nacute":"Åƒ","Ncaron":"Å‡","Ncedil":"Å…","Ncy":"Ð","NegativeMediumSpace":"â€‹","NegativeThickSpace":"â€‹","NegativeThinSpace":"â€‹","NegativeVeryThinSpace":"â€‹","NestedGreaterGreater":"â‰«","NestedLessLess":"â‰ª","NewLine":"\\n","Nfr":"ð”‘","NoBreak":"â ","NonBreakingSpace":"Â ","Nopf":"â„•","Not":"â«¬","NotCongruent":"â‰¢","NotCupCap":"â‰­","NotDoubleVerticalBar":"âˆ¦","NotElement":"âˆ‰","NotEqual":"â‰ ","NotEqualTilde":"â‰‚Ì¸","NotExists":"âˆ„","NotGreater":"â‰¯","NotGreaterEqual":"â‰±","NotGreaterFullEqual":"â‰§Ì¸","NotGreaterGreater":"â‰«Ì¸","NotGreaterLess":"â‰¹","NotGreaterSlantEqual":"â©¾Ì¸","NotGreaterTilde":"â‰µ","NotHumpDownHump":"â‰ŽÌ¸","NotHumpEqual":"â‰Ì¸","NotLeftTriangle":"â‹ª","NotLeftTriangleBar":"â§Ì¸","NotLeftTriangleEqual":"â‹¬","NotLess":"â‰®","NotLessEqual":"â‰°","NotLessGreater":"â‰¸","NotLessLess":"â‰ªÌ¸","NotLessSlantEqual":"â©½Ì¸","NotLessTilde":"â‰´","NotNestedGreaterGreater":"âª¢Ì¸","NotNestedLessLess":"âª¡Ì¸","NotPrecedes":"âŠ€","NotPrecedesEqual":"âª¯Ì¸","NotPrecedesSlantEqual":"â‹ ","NotReverseElement":"âˆŒ","NotRightTriangle":"â‹«","NotRightTriangleBar":"â§Ì¸","NotRightTriangleEqual":"â‹­","NotSquareSubset":"âŠÌ¸","NotSquareSubsetEqual":"â‹¢","NotSquareSuperset":"âŠÌ¸","NotSquareSupersetEqual":"â‹£","NotSubset":"âŠ‚âƒ’","NotSubsetEqual":"âŠˆ","NotSucceeds":"âŠ","NotSucceedsEqual":"âª°Ì¸","NotSucceedsSlantEqual":"â‹¡","NotSucceedsTilde":"â‰¿Ì¸","NotSuperset":"âŠƒâƒ’","NotSupersetEqual":"âŠ‰","NotTilde":"â‰","NotTildeEqual":"â‰„","NotTildeFullEqual":"â‰‡","NotTildeTilde":"â‰‰","NotVerticalBar":"âˆ¤","Nscr":"ð’©","Ntild":"Ã‘","Ntilde":"Ã‘","Nu":"Î","OElig":"Å’","Oacut":"Ã“","Oacute":"Ã“","Ocir":"Ã”","Ocirc":"Ã”","Ocy":"Ðž","Odblac":"Å","Ofr":"ð”’","Ograv":"Ã’","Ograve":"Ã’","Omacr":"ÅŒ","Omega":"Î©","Omicron":"ÎŸ","Oopf":"ð•†","OpenCurlyDoubleQuote":"â€œ","OpenCurlyQuote":"â€˜","Or":"â©”","Oscr":"ð’ª","Oslas":"Ã˜","Oslash":"Ã˜","Otild":"Ã•","Otilde":"Ã•","Otimes":"â¨·","Oum":"Ã–","Ouml":"Ã–","OverBar":"â€¾","OverBrace":"âž","OverBracket":"âŽ´","OverParenthesis":"âœ","PartialD":"âˆ‚","Pcy":"ÐŸ","Pfr":"ð”“","Phi":"Î¦","Pi":"Î ","PlusMinus":"Â±","Poincareplane":"â„Œ","Popf":"â„™","Pr":"âª»","Precedes":"â‰º","PrecedesEqual":"âª¯","PrecedesSlantEqual":"â‰¼","PrecedesTilde":"â‰¾","Prime":"â€³","Product":"âˆ","Proportion":"âˆ·","Proportional":"âˆ","Pscr":"ð’«","Psi":"Î¨","QUO":"\\"","QUOT":"\\"","Qfr":"ð””","Qopf":"â„š","Qscr":"ð’¬","RBarr":"â¤","RE":"Â®","REG":"Â®","Racute":"Å”","Rang":"âŸ«","Rarr":"â† ","Rarrtl":"â¤–","Rcaron":"Å˜","Rcedil":"Å–","Rcy":"Ð ","Re":"â„œ","ReverseElement":"âˆ‹","ReverseEquilibrium":"â‡‹","ReverseUpEquilibrium":"â¥¯","Rfr":"â„œ","Rho":"Î¡","RightAngleBracket":"âŸ©","RightArrow":"â†’","RightArrowBar":"â‡¥","RightArrowLeftArrow":"â‡„","RightCeiling":"âŒ‰","RightDoubleBracket":"âŸ§","RightDownTeeVector":"â¥","RightDownVector":"â‡‚","RightDownVectorBar":"â¥•","RightFloor":"âŒ‹","RightTee":"âŠ¢","RightTeeArrow":"â†¦","RightTeeVector":"â¥›","RightTriangle":"âŠ³","RightTriangleBar":"â§","RightTriangleEqual":"âŠµ","RightUpDownVector":"â¥","RightUpTeeVector":"â¥œ","RightUpVector":"â†¾","RightUpVectorBar":"â¥”","RightVector":"â‡€","RightVectorBar":"â¥“","Rightarrow":"â‡’","Ropf":"â„","RoundImplies":"â¥°","Rrightarrow":"â‡›","Rscr":"â„›","Rsh":"â†±","RuleDelayed":"â§´","SHCHcy":"Ð©","SHcy":"Ð¨","SOFTcy":"Ð¬","Sacute":"Åš","Sc":"âª¼","Scaron":"Å ","Scedil":"Åž","Scirc":"Åœ","Scy":"Ð¡","Sfr":"ð”–","ShortDownArrow":"â†“","ShortLeftArrow":"â†","ShortRightArrow":"â†’","ShortUpArrow":"â†‘","Sigma":"Î£","SmallCircle":"âˆ˜","Sopf":"ð•Š","Sqrt":"âˆš","Square":"â–¡","SquareIntersection":"âŠ“","SquareSubset":"âŠ","SquareSubsetEqual":"âŠ‘","SquareSuperset":"âŠ","SquareSupersetEqual":"âŠ’","SquareUnion":"âŠ”","Sscr":"ð’®","Star":"â‹†","Sub":"â‹","Subset":"â‹","SubsetEqual":"âŠ†","Succeeds":"â‰»","SucceedsEqual":"âª°","SucceedsSlantEqual":"â‰½","SucceedsTilde":"â‰¿","SuchThat":"âˆ‹","Sum":"âˆ‘","Sup":"â‹‘","Superset":"âŠƒ","SupersetEqual":"âŠ‡","Supset":"â‹‘","THOR":"Ãž","THORN":"Ãž","TRADE":"â„¢","TSHcy":"Ð‹","TScy":"Ð¦","Tab":"\\t","Tau":"Î¤","Tcaron":"Å¤","Tcedil":"Å¢","Tcy":"Ð¢","Tfr":"ð”—","Therefore":"âˆ´","Theta":"Î˜","ThickSpace":"âŸâ€Š","ThinSpace":"â€‰","Tilde":"âˆ¼","TildeEqual":"â‰ƒ","TildeFullEqual":"â‰…","TildeTilde":"â‰ˆ","Topf":"ð•‹","TripleDot":"âƒ›","Tscr":"ð’¯","Tstrok":"Å¦","Uacut":"Ãš","Uacute":"Ãš","Uarr":"â†Ÿ","Uarrocir":"â¥‰","Ubrcy":"ÐŽ","Ubreve":"Å¬","Ucir":"Ã›","Ucirc":"Ã›","Ucy":"Ð£","Udblac":"Å°","Ufr":"ð”˜","Ugrav":"Ã™","Ugrave":"Ã™","Umacr":"Åª","UnderBar":"_","UnderBrace":"âŸ","UnderBracket":"âŽµ","UnderParenthesis":"â","Union":"â‹ƒ","UnionPlus":"âŠŽ","Uogon":"Å²","Uopf":"ð•Œ","UpArrow":"â†‘","UpArrowBar":"â¤’","UpArrowDownArrow":"â‡…","UpDownArrow":"â†•","UpEquilibrium":"â¥®","UpTee":"âŠ¥","UpTeeArrow":"â†¥","Uparrow":"â‡‘","Updownarrow":"â‡•","UpperLeftArrow":"â†–","UpperRightArrow":"â†—","Upsi":"Ï’","Upsilon":"Î¥","Uring":"Å®","Uscr":"ð’°","Utilde":"Å¨","Uum":"Ãœ","Uuml":"Ãœ","VDash":"âŠ«","Vbar":"â««","Vcy":"Ð’","Vdash":"âŠ©","Vdashl":"â«¦","Vee":"â‹","Verbar":"â€–","Vert":"â€–","VerticalBar":"âˆ£","VerticalLine":"|","VerticalSeparator":"â˜","VerticalTilde":"â‰€","VeryThinSpace":"â€Š","Vfr":"ð”™","Vopf":"ð•","Vscr":"ð’±","Vvdash":"âŠª","Wcirc":"Å´","Wedge":"â‹€","Wfr":"ð”š","Wopf":"ð•Ž","Wscr":"ð’²","Xfr":"ð”›","Xi":"Îž","Xopf":"ð•","Xscr":"ð’³","YAcy":"Ð¯","YIcy":"Ð‡","YUcy":"Ð®","Yacut":"Ã","Yacute":"Ã","Ycirc":"Å¶","Ycy":"Ð«","Yfr":"ð”œ","Yopf":"ð•","Yscr":"ð’´","Yuml":"Å¸","ZHcy":"Ð–","Zacute":"Å¹","Zcaron":"Å½","Zcy":"Ð—","Zdot":"Å»","ZeroWidthSpace":"â€‹","Zeta":"Î–","Zfr":"â„¨","Zopf":"â„¤","Zscr":"ð’µ","aacut":"Ã¡","aacute":"Ã¡","abreve":"Äƒ","ac":"âˆ¾","acE":"âˆ¾Ì³","acd":"âˆ¿","acir":"Ã¢","acirc":"Ã¢","acut":"Â´","acute":"Â´","acy":"Ð°","aeli":"Ã¦","aelig":"Ã¦","af":"â¡","afr":"ð”ž","agrav":"Ã ","agrave":"Ã ","alefsym":"â„µ","aleph":"â„µ","alpha":"Î±","amacr":"Ä","amalg":"â¨¿","am":"&","amp":"&","and":"âˆ§","andand":"â©•","andd":"â©œ","andslope":"â©˜","andv":"â©š","ang":"âˆ ","ange":"â¦¤","angle":"âˆ ","angmsd":"âˆ¡","angmsdaa":"â¦¨","angmsdab":"â¦©","angmsdac":"â¦ª","angmsdad":"â¦«","angmsdae":"â¦¬","angmsdaf":"â¦­","angmsdag":"â¦®","angmsdah":"â¦¯","angrt":"âˆŸ","angrtvb":"âŠ¾","angrtvbd":"â¦","angsph":"âˆ¢","angst":"Ã…","angzarr":"â¼","aogon":"Ä…","aopf":"ð•’","ap":"â‰ˆ","apE":"â©°","apacir":"â©¯","ape":"â‰Š","apid":"â‰‹","apos":"\'","approx":"â‰ˆ","approxeq":"â‰Š","arin":"Ã¥","aring":"Ã¥","ascr":"ð’¶","ast":"*","asymp":"â‰ˆ","asympeq":"â‰","atild":"Ã£","atilde":"Ã£","aum":"Ã¤","auml":"Ã¤","awconint":"âˆ³","awint":"â¨‘","bNot":"â«­","backcong":"â‰Œ","backepsilon":"Ï¶","backprime":"â€µ","backsim":"âˆ½","backsimeq":"â‹","barvee":"âŠ½","barwed":"âŒ…","barwedge":"âŒ…","bbrk":"âŽµ","bbrktbrk":"âŽ¶","bcong":"â‰Œ","bcy":"Ð±","bdquo":"â€ž","becaus":"âˆµ","because":"âˆµ","bemptyv":"â¦°","bepsi":"Ï¶","bernou":"â„¬","beta":"Î²","beth":"â„¶","between":"â‰¬","bfr":"ð”Ÿ","bigcap":"â‹‚","bigcirc":"â—¯","bigcup":"â‹ƒ","bigodot":"â¨€","bigoplus":"â¨","bigotimes":"â¨‚","bigsqcup":"â¨†","bigstar":"â˜…","bigtriangledown":"â–½","bigtriangleup":"â–³","biguplus":"â¨„","bigvee":"â‹","bigwedge":"â‹€","bkarow":"â¤","blacklozenge":"â§«","blacksquare":"â–ª","blacktriangle":"â–´","blacktriangledown":"â–¾","blacktriangleleft":"â—‚","blacktriangleright":"â–¸","blank":"â£","blk12":"â–’","blk14":"â–‘","blk34":"â–“","block":"â–ˆ","bne":"=âƒ¥","bnequiv":"â‰¡âƒ¥","bnot":"âŒ","bopf":"ð•“","bot":"âŠ¥","bottom":"âŠ¥","bowtie":"â‹ˆ","boxDL":"â•—","boxDR":"â•”","boxDl":"â•–","boxDr":"â•“","boxH":"â•","boxHD":"â•¦","boxHU":"â•©","boxHd":"â•¤","boxHu":"â•§","boxUL":"â•","boxUR":"â•š","boxUl":"â•œ","boxUr":"â•™","boxV":"â•‘","boxVH":"â•¬","boxVL":"â•£","boxVR":"â• ","boxVh":"â•«","boxVl":"â•¢","boxVr":"â•Ÿ","boxbox":"â§‰","boxdL":"â••","boxdR":"â•’","boxdl":"â”","boxdr":"â”Œ","boxh":"â”€","boxhD":"â•¥","boxhU":"â•¨","boxhd":"â”¬","boxhu":"â”´","boxminus":"âŠŸ","boxplus":"âŠž","boxtimes":"âŠ ","boxuL":"â•›","boxuR":"â•˜","boxul":"â”˜","boxur":"â””","boxv":"â”‚","boxvH":"â•ª","boxvL":"â•¡","boxvR":"â•ž","boxvh":"â”¼","boxvl":"â”¤","boxvr":"â”œ","bprime":"â€µ","breve":"Ë˜","brvba":"Â¦","brvbar":"Â¦","bscr":"ð’·","bsemi":"â","bsim":"âˆ½","bsime":"â‹","bsol":"\\\\","bsolb":"â§…","bsolhsub":"âŸˆ","bull":"â€¢","bullet":"â€¢","bump":"â‰Ž","bumpE":"âª®","bumpe":"â‰","bumpeq":"â‰","cacute":"Ä‡","cap":"âˆ©","capand":"â©„","capbrcup":"â©‰","capcap":"â©‹","capcup":"â©‡","capdot":"â©€","caps":"âˆ©ï¸€","caret":"â","caron":"Ë‡","ccaps":"â©","ccaron":"Ä","ccedi":"Ã§","ccedil":"Ã§","ccirc":"Ä‰","ccups":"â©Œ","ccupssm":"â©","cdot":"Ä‹","cedi":"Â¸","cedil":"Â¸","cemptyv":"â¦²","cen":"Â¢","cent":"Â¢","centerdot":"Â·","cfr":"ð” ","chcy":"Ñ‡","check":"âœ“","checkmark":"âœ“","chi":"Ï‡","cir":"â—‹","cirE":"â§ƒ","circ":"Ë†","circeq":"â‰—","circlearrowleft":"â†º","circlearrowright":"â†»","circledR":"Â®","circledS":"â“ˆ","circledast":"âŠ›","circledcirc":"âŠš","circleddash":"âŠ","cire":"â‰—","cirfnint":"â¨","cirmid":"â«¯","cirscir":"â§‚","clubs":"â™£","clubsuit":"â™£","colon":":","colone":"â‰”","coloneq":"â‰”","comma":",","commat":"@","comp":"âˆ","compfn":"âˆ˜","complement":"âˆ","complexes":"â„‚","cong":"â‰…","congdot":"â©­","conint":"âˆ®","copf":"ð•”","coprod":"âˆ","cop":"Â©","copy":"Â©","copysr":"â„—","crarr":"â†µ","cross":"âœ—","cscr":"ð’¸","csub":"â«","csube":"â«‘","csup":"â«","csupe":"â«’","ctdot":"â‹¯","cudarrl":"â¤¸","cudarrr":"â¤µ","cuepr":"â‹ž","cuesc":"â‹Ÿ","cularr":"â†¶","cularrp":"â¤½","cup":"âˆª","cupbrcap":"â©ˆ","cupcap":"â©†","cupcup":"â©Š","cupdot":"âŠ","cupor":"â©…","cups":"âˆªï¸€","curarr":"â†·","curarrm":"â¤¼","curlyeqprec":"â‹ž","curlyeqsucc":"â‹Ÿ","curlyvee":"â‹Ž","curlywedge":"â‹","curre":"Â¤","curren":"Â¤","curvearrowleft":"â†¶","curvearrowright":"â†·","cuvee":"â‹Ž","cuwed":"â‹","cwconint":"âˆ²","cwint":"âˆ±","cylcty":"âŒ­","dArr":"â‡“","dHar":"â¥¥","dagger":"â€ ","daleth":"â„¸","darr":"â†“","dash":"â€","dashv":"âŠ£","dbkarow":"â¤","dblac":"Ë","dcaron":"Ä","dcy":"Ð´","dd":"â…†","ddagger":"â€¡","ddarr":"â‡Š","ddotseq":"â©·","de":"Â°","deg":"Â°","delta":"Î´","demptyv":"â¦±","dfisht":"â¥¿","dfr":"ð”¡","dharl":"â‡ƒ","dharr":"â‡‚","diam":"â‹„","diamond":"â‹„","diamondsuit":"â™¦","diams":"â™¦","die":"Â¨","digamma":"Ï","disin":"â‹²","div":"Ã·","divid":"Ã·","divide":"Ã·","divideontimes":"â‹‡","divonx":"â‹‡","djcy":"Ñ’","dlcorn":"âŒž","dlcrop":"âŒ","dollar":"$","dopf":"ð••","dot":"Ë™","doteq":"â‰","doteqdot":"â‰‘","dotminus":"âˆ¸","dotplus":"âˆ”","dotsquare":"âŠ¡","doublebarwedge":"âŒ†","downarrow":"â†“","downdownarrows":"â‡Š","downharpoonleft":"â‡ƒ","downharpoonright":"â‡‚","drbkarow":"â¤","drcorn":"âŒŸ","drcrop":"âŒŒ","dscr":"ð’¹","dscy":"Ñ•","dsol":"â§¶","dstrok":"Ä‘","dtdot":"â‹±","dtri":"â–¿","dtrif":"â–¾","duarr":"â‡µ","duhar":"â¥¯","dwangle":"â¦¦","dzcy":"ÑŸ","dzigrarr":"âŸ¿","eDDot":"â©·","eDot":"â‰‘","eacut":"Ã©","eacute":"Ã©","easter":"â©®","ecaron":"Ä›","ecir":"Ãª","ecirc":"Ãª","ecolon":"â‰•","ecy":"Ñ","edot":"Ä—","ee":"â…‡","efDot":"â‰’","efr":"ð”¢","eg":"âªš","egrav":"Ã¨","egrave":"Ã¨","egs":"âª–","egsdot":"âª˜","el":"âª™","elinters":"â§","ell":"â„“","els":"âª•","elsdot":"âª—","emacr":"Ä“","empty":"âˆ…","emptyset":"âˆ…","emptyv":"âˆ…","emsp13":"â€„","emsp14":"â€…","emsp":"â€ƒ","eng":"Å‹","ensp":"â€‚","eogon":"Ä™","eopf":"ð•–","epar":"â‹•","eparsl":"â§£","eplus":"â©±","epsi":"Îµ","epsilon":"Îµ","epsiv":"Ïµ","eqcirc":"â‰–","eqcolon":"â‰•","eqsim":"â‰‚","eqslantgtr":"âª–","eqslantless":"âª•","equals":"=","equest":"â‰Ÿ","equiv":"â‰¡","equivDD":"â©¸","eqvparsl":"â§¥","erDot":"â‰“","erarr":"â¥±","escr":"â„¯","esdot":"â‰","esim":"â‰‚","eta":"Î·","et":"Ã°","eth":"Ã°","eum":"Ã«","euml":"Ã«","euro":"â‚¬","excl":"!","exist":"âˆƒ","expectation":"â„°","exponentiale":"â…‡","fallingdotseq":"â‰’","fcy":"Ñ„","female":"â™€","ffilig":"ï¬ƒ","fflig":"ï¬€","ffllig":"ï¬„","ffr":"ð”£","filig":"ï¬","fjlig":"fj","flat":"â™­","fllig":"ï¬‚","fltns":"â–±","fnof":"Æ’","fopf":"ð•—","forall":"âˆ€","fork":"â‹”","forkv":"â«™","fpartint":"â¨","frac1":"Â¼","frac12":"Â½","frac13":"â…“","frac14":"Â¼","frac15":"â…•","frac16":"â…™","frac18":"â…›","frac23":"â…”","frac25":"â…–","frac3":"Â¾","frac34":"Â¾","frac35":"â…—","frac38":"â…œ","frac45":"â…˜","frac56":"â…š","frac58":"â…","frac78":"â…ž","frasl":"â„","frown":"âŒ¢","fscr":"ð’»","gE":"â‰§","gEl":"âªŒ","gacute":"Çµ","gamma":"Î³","gammad":"Ï","gap":"âª†","gbreve":"ÄŸ","gcirc":"Ä","gcy":"Ð³","gdot":"Ä¡","ge":"â‰¥","gel":"â‹›","geq":"â‰¥","geqq":"â‰§","geqslant":"â©¾","ges":"â©¾","gescc":"âª©","gesdot":"âª€","gesdoto":"âª‚","gesdotol":"âª„","gesl":"â‹›ï¸€","gesles":"âª”","gfr":"ð”¤","gg":"â‰«","ggg":"â‹™","gimel":"â„·","gjcy":"Ñ“","gl":"â‰·","glE":"âª’","gla":"âª¥","glj":"âª¤","gnE":"â‰©","gnap":"âªŠ","gnapprox":"âªŠ","gne":"âªˆ","gneq":"âªˆ","gneqq":"â‰©","gnsim":"â‹§","gopf":"ð•˜","grave":"`","gscr":"â„Š","gsim":"â‰³","gsime":"âªŽ","gsiml":"âª","g":">","gt":">","gtcc":"âª§","gtcir":"â©º","gtdot":"â‹—","gtlPar":"â¦•","gtquest":"â©¼","gtrapprox":"âª†","gtrarr":"â¥¸","gtrdot":"â‹—","gtreqless":"â‹›","gtreqqless":"âªŒ","gtrless":"â‰·","gtrsim":"â‰³","gvertneqq":"â‰©ï¸€","gvnE":"â‰©ï¸€","hArr":"â‡”","hairsp":"â€Š","half":"Â½","hamilt":"â„‹","hardcy":"ÑŠ","harr":"â†”","harrcir":"â¥ˆ","harrw":"â†­","hbar":"â„","hcirc":"Ä¥","hearts":"â™¥","heartsuit":"â™¥","hellip":"â€¦","hercon":"âŠ¹","hfr":"ð”¥","hksearow":"â¤¥","hkswarow":"â¤¦","hoarr":"â‡¿","homtht":"âˆ»","hookleftarrow":"â†©","hookrightarrow":"â†ª","hopf":"ð•™","horbar":"â€•","hscr":"ð’½","hslash":"â„","hstrok":"Ä§","hybull":"âƒ","hyphen":"â€","iacut":"Ã­","iacute":"Ã­","ic":"â£","icir":"Ã®","icirc":"Ã®","icy":"Ð¸","iecy":"Ðµ","iexc":"Â¡","iexcl":"Â¡","iff":"â‡”","ifr":"ð”¦","igrav":"Ã¬","igrave":"Ã¬","ii":"â…ˆ","iiiint":"â¨Œ","iiint":"âˆ­","iinfin":"â§œ","iiota":"â„©","ijlig":"Ä³","imacr":"Ä«","image":"â„‘","imagline":"â„","imagpart":"â„‘","imath":"Ä±","imof":"âŠ·","imped":"Æµ","in":"âˆˆ","incare":"â„…","infin":"âˆž","infintie":"â§","inodot":"Ä±","int":"âˆ«","intcal":"âŠº","integers":"â„¤","intercal":"âŠº","intlarhk":"â¨—","intprod":"â¨¼","iocy":"Ñ‘","iogon":"Ä¯","iopf":"ð•š","iota":"Î¹","iprod":"â¨¼","iques":"Â¿","iquest":"Â¿","iscr":"ð’¾","isin":"âˆˆ","isinE":"â‹¹","isindot":"â‹µ","isins":"â‹´","isinsv":"â‹³","isinv":"âˆˆ","it":"â¢","itilde":"Ä©","iukcy":"Ñ–","ium":"Ã¯","iuml":"Ã¯","jcirc":"Äµ","jcy":"Ð¹","jfr":"ð”§","jmath":"È·","jopf":"ð•›","jscr":"ð’¿","jsercy":"Ñ˜","jukcy":"Ñ”","kappa":"Îº","kappav":"Ï°","kcedil":"Ä·","kcy":"Ðº","kfr":"ð”¨","kgreen":"Ä¸","khcy":"Ñ…","kjcy":"Ñœ","kopf":"ð•œ","kscr":"ð“€","lAarr":"â‡š","lArr":"â‡","lAtail":"â¤›","lBarr":"â¤Ž","lE":"â‰¦","lEg":"âª‹","lHar":"â¥¢","lacute":"Äº","laemptyv":"â¦´","lagran":"â„’","lambda":"Î»","lang":"âŸ¨","langd":"â¦‘","langle":"âŸ¨","lap":"âª…","laqu":"Â«","laquo":"Â«","larr":"â†","larrb":"â‡¤","larrbfs":"â¤Ÿ","larrfs":"â¤","larrhk":"â†©","larrlp":"â†«","larrpl":"â¤¹","larrsim":"â¥³","larrtl":"â†¢","lat":"âª«","latail":"â¤™","late":"âª­","lates":"âª­ï¸€","lbarr":"â¤Œ","lbbrk":"â²","lbrace":"{","lbrack":"[","lbrke":"â¦‹","lbrksld":"â¦","lbrkslu":"â¦","lcaron":"Ä¾","lcedil":"Ä¼","lceil":"âŒˆ","lcub":"{","lcy":"Ð»","ldca":"â¤¶","ldquo":"â€œ","ldquor":"â€ž","ldrdhar":"â¥§","ldrushar":"â¥‹","ldsh":"â†²","le":"â‰¤","leftarrow":"â†","leftarrowtail":"â†¢","leftharpoondown":"â†½","leftharpoonup":"â†¼","leftleftarrows":"â‡‡","leftrightarrow":"â†”","leftrightarrows":"â‡†","leftrightharpoons":"â‡‹","leftrightsquigarrow":"â†­","leftthreetimes":"â‹‹","leg":"â‹š","leq":"â‰¤","leqq":"â‰¦","leqslant":"â©½","les":"â©½","lescc":"âª¨","lesdot":"â©¿","lesdoto":"âª","lesdotor":"âªƒ","lesg":"â‹šï¸€","lesges":"âª“","lessapprox":"âª…","lessdot":"â‹–","lesseqgtr":"â‹š","lesseqqgtr":"âª‹","lessgtr":"â‰¶","lesssim":"â‰²","lfisht":"â¥¼","lfloor":"âŒŠ","lfr":"ð”©","lg":"â‰¶","lgE":"âª‘","lhard":"â†½","lharu":"â†¼","lharul":"â¥ª","lhblk":"â–„","ljcy":"Ñ™","ll":"â‰ª","llarr":"â‡‡","llcorner":"âŒž","llhard":"â¥«","lltri":"â—º","lmidot":"Å€","lmoust":"âŽ°","lmoustache":"âŽ°","lnE":"â‰¨","lnap":"âª‰","lnapprox":"âª‰","lne":"âª‡","lneq":"âª‡","lneqq":"â‰¨","lnsim":"â‹¦","loang":"âŸ¬","loarr":"â‡½","lobrk":"âŸ¦","longleftarrow":"âŸµ","longleftrightarrow":"âŸ·","longmapsto":"âŸ¼","longrightarrow":"âŸ¶","looparrowleft":"â†«","looparrowright":"â†¬","lopar":"â¦…","lopf":"ð•","loplus":"â¨­","lotimes":"â¨´","lowast":"âˆ—","lowbar":"_","loz":"â—Š","lozenge":"â—Š","lozf":"â§«","lpar":"(","lparlt":"â¦“","lrarr":"â‡†","lrcorner":"âŒŸ","lrhar":"â‡‹","lrhard":"â¥­","lrm":"â€Ž","lrtri":"âŠ¿","lsaquo":"â€¹","lscr":"ð“","lsh":"â†°","lsim":"â‰²","lsime":"âª","lsimg":"âª","lsqb":"[","lsquo":"â€˜","lsquor":"â€š","lstrok":"Å‚","l":"<","lt":"<","ltcc":"âª¦","ltcir":"â©¹","ltdot":"â‹–","lthree":"â‹‹","ltimes":"â‹‰","ltlarr":"â¥¶","ltquest":"â©»","ltrPar":"â¦–","ltri":"â—ƒ","ltrie":"âŠ´","ltrif":"â—‚","lurdshar":"â¥Š","luruhar":"â¥¦","lvertneqq":"â‰¨ï¸€","lvnE":"â‰¨ï¸€","mDDot":"âˆº","mac":"Â¯","macr":"Â¯","male":"â™‚","malt":"âœ ","maltese":"âœ ","map":"â†¦","mapsto":"â†¦","mapstodown":"â†§","mapstoleft":"â†¤","mapstoup":"â†¥","marker":"â–®","mcomma":"â¨©","mcy":"Ð¼","mdash":"â€”","measuredangle":"âˆ¡","mfr":"ð”ª","mho":"â„§","micr":"Âµ","micro":"Âµ","mid":"âˆ£","midast":"*","midcir":"â«°","middo":"Â·","middot":"Â·","minus":"âˆ’","minusb":"âŠŸ","minusd":"âˆ¸","minusdu":"â¨ª","mlcp":"â«›","mldr":"â€¦","mnplus":"âˆ“","models":"âŠ§","mopf":"ð•ž","mp":"âˆ“","mscr":"ð“‚","mstpos":"âˆ¾","mu":"Î¼","multimap":"âŠ¸","mumap":"âŠ¸","nGg":"â‹™Ì¸","nGt":"â‰«âƒ’","nGtv":"â‰«Ì¸","nLeftarrow":"â‡","nLeftrightarrow":"â‡Ž","nLl":"â‹˜Ì¸","nLt":"â‰ªâƒ’","nLtv":"â‰ªÌ¸","nRightarrow":"â‡","nVDash":"âŠ¯","nVdash":"âŠ®","nabla":"âˆ‡","nacute":"Å„","nang":"âˆ âƒ’","nap":"â‰‰","napE":"â©°Ì¸","napid":"â‰‹Ì¸","napos":"Å‰","napprox":"â‰‰","natur":"â™®","natural":"â™®","naturals":"â„•","nbs":"Â ","nbsp":"Â ","nbump":"â‰ŽÌ¸","nbumpe":"â‰Ì¸","ncap":"â©ƒ","ncaron":"Åˆ","ncedil":"Å†","ncong":"â‰‡","ncongdot":"â©­Ì¸","ncup":"â©‚","ncy":"Ð½","ndash":"â€“","ne":"â‰ ","neArr":"â‡—","nearhk":"â¤¤","nearr":"â†—","nearrow":"â†—","nedot":"â‰Ì¸","nequiv":"â‰¢","nesear":"â¤¨","nesim":"â‰‚Ì¸","nexist":"âˆ„","nexists":"âˆ„","nfr":"ð”«","ngE":"â‰§Ì¸","nge":"â‰±","ngeq":"â‰±","ngeqq":"â‰§Ì¸","ngeqslant":"â©¾Ì¸","nges":"â©¾Ì¸","ngsim":"â‰µ","ngt":"â‰¯","ngtr":"â‰¯","nhArr":"â‡Ž","nharr":"â†®","nhpar":"â«²","ni":"âˆ‹","nis":"â‹¼","nisd":"â‹º","niv":"âˆ‹","njcy":"Ñš","nlArr":"â‡","nlE":"â‰¦Ì¸","nlarr":"â†š","nldr":"â€¥","nle":"â‰°","nleftarrow":"â†š","nleftrightarrow":"â†®","nleq":"â‰°","nleqq":"â‰¦Ì¸","nleqslant":"â©½Ì¸","nles":"â©½Ì¸","nless":"â‰®","nlsim":"â‰´","nlt":"â‰®","nltri":"â‹ª","nltrie":"â‹¬","nmid":"âˆ¤","nopf":"ð•Ÿ","no":"Â¬","not":"Â¬","notin":"âˆ‰","notinE":"â‹¹Ì¸","notindot":"â‹µÌ¸","notinva":"âˆ‰","notinvb":"â‹·","notinvc":"â‹¶","notni":"âˆŒ","notniva":"âˆŒ","notnivb":"â‹¾","notnivc":"â‹½","npar":"âˆ¦","nparallel":"âˆ¦","nparsl":"â«½âƒ¥","npart":"âˆ‚Ì¸","npolint":"â¨”","npr":"âŠ€","nprcue":"â‹ ","npre":"âª¯Ì¸","nprec":"âŠ€","npreceq":"âª¯Ì¸","nrArr":"â‡","nrarr":"â†›","nrarrc":"â¤³Ì¸","nrarrw":"â†Ì¸","nrightarrow":"â†›","nrtri":"â‹«","nrtrie":"â‹­","nsc":"âŠ","nsccue":"â‹¡","nsce":"âª°Ì¸","nscr":"ð“ƒ","nshortmid":"âˆ¤","nshortparallel":"âˆ¦","nsim":"â‰","nsime":"â‰„","nsimeq":"â‰„","nsmid":"âˆ¤","nspar":"âˆ¦","nsqsube":"â‹¢","nsqsupe":"â‹£","nsub":"âŠ„","nsubE":"â«…Ì¸","nsube":"âŠˆ","nsubset":"âŠ‚âƒ’","nsubseteq":"âŠˆ","nsubseteqq":"â«…Ì¸","nsucc":"âŠ","nsucceq":"âª°Ì¸","nsup":"âŠ…","nsupE":"â«†Ì¸","nsupe":"âŠ‰","nsupset":"âŠƒâƒ’","nsupseteq":"âŠ‰","nsupseteqq":"â«†Ì¸","ntgl":"â‰¹","ntild":"Ã±","ntilde":"Ã±","ntlg":"â‰¸","ntriangleleft":"â‹ª","ntrianglelefteq":"â‹¬","ntriangleright":"â‹«","ntrianglerighteq":"â‹­","nu":"Î½","num":"#","numero":"â„–","numsp":"â€‡","nvDash":"âŠ­","nvHarr":"â¤„","nvap":"â‰âƒ’","nvdash":"âŠ¬","nvge":"â‰¥âƒ’","nvgt":">âƒ’","nvinfin":"â§ž","nvlArr":"â¤‚","nvle":"â‰¤âƒ’","nvlt":"<âƒ’","nvltrie":"âŠ´âƒ’","nvrArr":"â¤ƒ","nvrtrie":"âŠµâƒ’","nvsim":"âˆ¼âƒ’","nwArr":"â‡–","nwarhk":"â¤£","nwarr":"â†–","nwarrow":"â†–","nwnear":"â¤§","oS":"â“ˆ","oacut":"Ã³","oacute":"Ã³","oast":"âŠ›","ocir":"Ã´","ocirc":"Ã´","ocy":"Ð¾","odash":"âŠ","odblac":"Å‘","odiv":"â¨¸","odot":"âŠ™","odsold":"â¦¼","oelig":"Å“","ofcir":"â¦¿","ofr":"ð”¬","ogon":"Ë›","ograv":"Ã²","ograve":"Ã²","ogt":"â§","ohbar":"â¦µ","ohm":"Î©","oint":"âˆ®","olarr":"â†º","olcir":"â¦¾","olcross":"â¦»","oline":"â€¾","olt":"â§€","omacr":"Å","omega":"Ï‰","omicron":"Î¿","omid":"â¦¶","ominus":"âŠ–","oopf":"ð• ","opar":"â¦·","operp":"â¦¹","oplus":"âŠ•","or":"âˆ¨","orarr":"â†»","ord":"Âº","order":"â„´","orderof":"â„´","ordf":"Âª","ordm":"Âº","origof":"âŠ¶","oror":"â©–","orslope":"â©—","orv":"â©›","oscr":"â„´","oslas":"Ã¸","oslash":"Ã¸","osol":"âŠ˜","otild":"Ãµ","otilde":"Ãµ","otimes":"âŠ—","otimesas":"â¨¶","oum":"Ã¶","ouml":"Ã¶","ovbar":"âŒ½","par":"Â¶","para":"Â¶","parallel":"âˆ¥","parsim":"â«³","parsl":"â«½","part":"âˆ‚","pcy":"Ð¿","percnt":"%","period":".","permil":"â€°","perp":"âŠ¥","pertenk":"â€±","pfr":"ð”­","phi":"Ï†","phiv":"Ï•","phmmat":"â„³","phone":"â˜Ž","pi":"Ï€","pitchfork":"â‹”","piv":"Ï–","planck":"â„","planckh":"â„Ž","plankv":"â„","plus":"+","plusacir":"â¨£","plusb":"âŠž","pluscir":"â¨¢","plusdo":"âˆ”","plusdu":"â¨¥","pluse":"â©²","plusm":"Â±","plusmn":"Â±","plussim":"â¨¦","plustwo":"â¨§","pm":"Â±","pointint":"â¨•","popf":"ð•¡","poun":"Â£","pound":"Â£","pr":"â‰º","prE":"âª³","prap":"âª·","prcue":"â‰¼","pre":"âª¯","prec":"â‰º","precapprox":"âª·","preccurlyeq":"â‰¼","preceq":"âª¯","precnapprox":"âª¹","precneqq":"âªµ","precnsim":"â‹¨","precsim":"â‰¾","prime":"â€²","primes":"â„™","prnE":"âªµ","prnap":"âª¹","prnsim":"â‹¨","prod":"âˆ","profalar":"âŒ®","profline":"âŒ’","profsurf":"âŒ“","prop":"âˆ","propto":"âˆ","prsim":"â‰¾","prurel":"âŠ°","pscr":"ð“…","psi":"Ïˆ","puncsp":"â€ˆ","qfr":"ð”®","qint":"â¨Œ","qopf":"ð•¢","qprime":"â—","qscr":"ð“†","quaternions":"â„","quatint":"â¨–","quest":"?","questeq":"â‰Ÿ","quo":"\\"","quot":"\\"","rAarr":"â‡›","rArr":"â‡’","rAtail":"â¤œ","rBarr":"â¤","rHar":"â¥¤","race":"âˆ½Ì±","racute":"Å•","radic":"âˆš","raemptyv":"â¦³","rang":"âŸ©","rangd":"â¦’","range":"â¦¥","rangle":"âŸ©","raqu":"Â»","raquo":"Â»","rarr":"â†’","rarrap":"â¥µ","rarrb":"â‡¥","rarrbfs":"â¤ ","rarrc":"â¤³","rarrfs":"â¤ž","rarrhk":"â†ª","rarrlp":"â†¬","rarrpl":"â¥…","rarrsim":"â¥´","rarrtl":"â†£","rarrw":"â†","ratail":"â¤š","ratio":"âˆ¶","rationals":"â„š","rbarr":"â¤","rbbrk":"â³","rbrace":"}","rbrack":"]","rbrke":"â¦Œ","rbrksld":"â¦Ž","rbrkslu":"â¦","rcaron":"Å™","rcedil":"Å—","rceil":"âŒ‰","rcub":"}","rcy":"Ñ€","rdca":"â¤·","rdldhar":"â¥©","rdquo":"â€","rdquor":"â€","rdsh":"â†³","real":"â„œ","realine":"â„›","realpart":"â„œ","reals":"â„","rect":"â–­","re":"Â®","reg":"Â®","rfisht":"â¥½","rfloor":"âŒ‹","rfr":"ð”¯","rhard":"â‡","rharu":"â‡€","rharul":"â¥¬","rho":"Ï","rhov":"Ï±","rightarrow":"â†’","rightarrowtail":"â†£","rightharpoondown":"â‡","rightharpoonup":"â‡€","rightleftarrows":"â‡„","rightleftharpoons":"â‡Œ","rightrightarrows":"â‡‰","rightsquigarrow":"â†","rightthreetimes":"â‹Œ","ring":"Ëš","risingdotseq":"â‰“","rlarr":"â‡„","rlhar":"â‡Œ","rlm":"â€","rmoust":"âŽ±","rmoustache":"âŽ±","rnmid":"â«®","roang":"âŸ­","roarr":"â‡¾","robrk":"âŸ§","ropar":"â¦†","ropf":"ð•£","roplus":"â¨®","rotimes":"â¨µ","rpar":")","rpargt":"â¦”","rppolint":"â¨’","rrarr":"â‡‰","rsaquo":"â€º","rscr":"ð“‡","rsh":"â†±","rsqb":"]","rsquo":"â€™","rsquor":"â€™","rthree":"â‹Œ","rtimes":"â‹Š","rtri":"â–¹","rtrie":"âŠµ","rtrif":"â–¸","rtriltri":"â§Ž","ruluhar":"â¥¨","rx":"â„ž","sacute":"Å›","sbquo":"â€š","sc":"â‰»","scE":"âª´","scap":"âª¸","scaron":"Å¡","sccue":"â‰½","sce":"âª°","scedil":"ÅŸ","scirc":"Å","scnE":"âª¶","scnap":"âªº","scnsim":"â‹©","scpolint":"â¨“","scsim":"â‰¿","scy":"Ñ","sdot":"â‹…","sdotb":"âŠ¡","sdote":"â©¦","seArr":"â‡˜","searhk":"â¤¥","searr":"â†˜","searrow":"â†˜","sec":"Â§","sect":"Â§","semi":";","seswar":"â¤©","setminus":"âˆ–","setmn":"âˆ–","sext":"âœ¶","sfr":"ð”°","sfrown":"âŒ¢","sharp":"â™¯","shchcy":"Ñ‰","shcy":"Ñˆ","shortmid":"âˆ£","shortparallel":"âˆ¥","sh":"Â­","shy":"Â­","sigma":"Ïƒ","sigmaf":"Ï‚","sigmav":"Ï‚","sim":"âˆ¼","simdot":"â©ª","sime":"â‰ƒ","simeq":"â‰ƒ","simg":"âªž","simgE":"âª ","siml":"âª","simlE":"âªŸ","simne":"â‰†","simplus":"â¨¤","simrarr":"â¥²","slarr":"â†","smallsetminus":"âˆ–","smashp":"â¨³","smeparsl":"â§¤","smid":"âˆ£","smile":"âŒ£","smt":"âªª","smte":"âª¬","smtes":"âª¬ï¸€","softcy":"ÑŒ","sol":"/","solb":"â§„","solbar":"âŒ¿","sopf":"ð•¤","spades":"â™ ","spadesuit":"â™ ","spar":"âˆ¥","sqcap":"âŠ“","sqcaps":"âŠ“ï¸€","sqcup":"âŠ”","sqcups":"âŠ”ï¸€","sqsub":"âŠ","sqsube":"âŠ‘","sqsubset":"âŠ","sqsubseteq":"âŠ‘","sqsup":"âŠ","sqsupe":"âŠ’","sqsupset":"âŠ","sqsupseteq":"âŠ’","squ":"â–¡","square":"â–¡","squarf":"â–ª","squf":"â–ª","srarr":"â†’","sscr":"ð“ˆ","ssetmn":"âˆ–","ssmile":"âŒ£","sstarf":"â‹†","star":"â˜†","starf":"â˜…","straightepsilon":"Ïµ","straightphi":"Ï•","strns":"Â¯","sub":"âŠ‚","subE":"â«…","subdot":"âª½","sube":"âŠ†","subedot":"â«ƒ","submult":"â«","subnE":"â«‹","subne":"âŠŠ","subplus":"âª¿","subrarr":"â¥¹","subset":"âŠ‚","subseteq":"âŠ†","subseteqq":"â«…","subsetneq":"âŠŠ","subsetneqq":"â«‹","subsim":"â«‡","subsub":"â«•","subsup":"â«“","succ":"â‰»","succapprox":"âª¸","succcurlyeq":"â‰½","succeq":"âª°","succnapprox":"âªº","succneqq":"âª¶","succnsim":"â‹©","succsim":"â‰¿","sum":"âˆ‘","sung":"â™ª","sup":"âŠƒ","sup1":"Â¹","sup2":"Â²","sup3":"Â³","supE":"â«†","supdot":"âª¾","supdsub":"â«˜","supe":"âŠ‡","supedot":"â«„","suphsol":"âŸ‰","suphsub":"â«—","suplarr":"â¥»","supmult":"â«‚","supnE":"â«Œ","supne":"âŠ‹","supplus":"â«€","supset":"âŠƒ","supseteq":"âŠ‡","supseteqq":"â«†","supsetneq":"âŠ‹","supsetneqq":"â«Œ","supsim":"â«ˆ","supsub":"â«”","supsup":"â«–","swArr":"â‡™","swarhk":"â¤¦","swarr":"â†™","swarrow":"â†™","swnwar":"â¤ª","szli":"ÃŸ","szlig":"ÃŸ","target":"âŒ–","tau":"Ï„","tbrk":"âŽ´","tcaron":"Å¥","tcedil":"Å£","tcy":"Ñ‚","tdot":"âƒ›","telrec":"âŒ•","tfr":"ð”±","there4":"âˆ´","therefore":"âˆ´","theta":"Î¸","thetasym":"Ï‘","thetav":"Ï‘","thickapprox":"â‰ˆ","thicksim":"âˆ¼","thinsp":"â€‰","thkap":"â‰ˆ","thksim":"âˆ¼","thor":"Ã¾","thorn":"Ã¾","tilde":"Ëœ","time":"Ã—","times":"Ã—","timesb":"âŠ ","timesbar":"â¨±","timesd":"â¨°","tint":"âˆ­","toea":"â¤¨","top":"âŠ¤","topbot":"âŒ¶","topcir":"â«±","topf":"ð•¥","topfork":"â«š","tosa":"â¤©","tprime":"â€´","trade":"â„¢","triangle":"â–µ","triangledown":"â–¿","triangleleft":"â—ƒ","trianglelefteq":"âŠ´","triangleq":"â‰œ","triangleright":"â–¹","trianglerighteq":"âŠµ","tridot":"â—¬","trie":"â‰œ","triminus":"â¨º","triplus":"â¨¹","trisb":"â§","tritime":"â¨»","trpezium":"â¢","tscr":"ð“‰","tscy":"Ñ†","tshcy":"Ñ›","tstrok":"Å§","twixt":"â‰¬","twoheadleftarrow":"â†ž","twoheadrightarrow":"â† ","uArr":"â‡‘","uHar":"â¥£","uacut":"Ãº","uacute":"Ãº","uarr":"â†‘","ubrcy":"Ñž","ubreve":"Å­","ucir":"Ã»","ucirc":"Ã»","ucy":"Ñƒ","udarr":"â‡…","udblac":"Å±","udhar":"â¥®","ufisht":"â¥¾","ufr":"ð”²","ugrav":"Ã¹","ugrave":"Ã¹","uharl":"â†¿","uharr":"â†¾","uhblk":"â–€","ulcorn":"âŒœ","ulcorner":"âŒœ","ulcrop":"âŒ","ultri":"â—¸","umacr":"Å«","um":"Â¨","uml":"Â¨","uogon":"Å³","uopf":"ð•¦","uparrow":"â†‘","updownarrow":"â†•","upharpoonleft":"â†¿","upharpoonright":"â†¾","uplus":"âŠŽ","upsi":"Ï…","upsih":"Ï’","upsilon":"Ï…","upuparrows":"â‡ˆ","urcorn":"âŒ","urcorner":"âŒ","urcrop":"âŒŽ","uring":"Å¯","urtri":"â—¹","uscr":"ð“Š","utdot":"â‹°","utilde":"Å©","utri":"â–µ","utrif":"â–´","uuarr":"â‡ˆ","uum":"Ã¼","uuml":"Ã¼","uwangle":"â¦§","vArr":"â‡•","vBar":"â«¨","vBarv":"â«©","vDash":"âŠ¨","vangrt":"â¦œ","varepsilon":"Ïµ","varkappa":"Ï°","varnothing":"âˆ…","varphi":"Ï•","varpi":"Ï–","varpropto":"âˆ","varr":"â†•","varrho":"Ï±","varsigma":"Ï‚","varsubsetneq":"âŠŠï¸€","varsubsetneqq":"â«‹ï¸€","varsupsetneq":"âŠ‹ï¸€","varsupsetneqq":"â«Œï¸€","vartheta":"Ï‘","vartriangleleft":"âŠ²","vartriangleright":"âŠ³","vcy":"Ð²","vdash":"âŠ¢","vee":"âˆ¨","veebar":"âŠ»","veeeq":"â‰š","vellip":"â‹®","verbar":"|","vert":"|","vfr":"ð”³","vltri":"âŠ²","vnsub":"âŠ‚âƒ’","vnsup":"âŠƒâƒ’","vopf":"ð•§","vprop":"âˆ","vrtri":"âŠ³","vscr":"ð“‹","vsubnE":"â«‹ï¸€","vsubne":"âŠŠï¸€","vsupnE":"â«Œï¸€","vsupne":"âŠ‹ï¸€","vzigzag":"â¦š","wcirc":"Åµ","wedbar":"â©Ÿ","wedge":"âˆ§","wedgeq":"â‰™","weierp":"â„˜","wfr":"ð”´","wopf":"ð•¨","wp":"â„˜","wr":"â‰€","wreath":"â‰€","wscr":"ð“Œ","xcap":"â‹‚","xcirc":"â—¯","xcup":"â‹ƒ","xdtri":"â–½","xfr":"ð”µ","xhArr":"âŸº","xharr":"âŸ·","xi":"Î¾","xlArr":"âŸ¸","xlarr":"âŸµ","xmap":"âŸ¼","xnis":"â‹»","xodot":"â¨€","xopf":"ð•©","xoplus":"â¨","xotime":"â¨‚","xrArr":"âŸ¹","xrarr":"âŸ¶","xscr":"ð“","xsqcup":"â¨†","xuplus":"â¨„","xutri":"â–³","xvee":"â‹","xwedge":"â‹€","yacut":"Ã½","yacute":"Ã½","yacy":"Ñ","ycirc":"Å·","ycy":"Ñ‹","ye":"Â¥","yen":"Â¥","yfr":"ð”¶","yicy":"Ñ—","yopf":"ð•ª","yscr":"ð“Ž","yucy":"ÑŽ","yum":"Ã¿","yuml":"Ã¿","zacute":"Åº","zcaron":"Å¾","zcy":"Ð·","zdot":"Å¼","zeetrf":"â„¨","zeta":"Î¶","zfr":"ð”·","zhcy":"Ð¶","zigrarr":"â‡","zopf":"ð•«","zscr":"ð“","zwj":"â€","zwnj":"â€Œ"}')},8192:e=>{"use strict";e.exports=JSON.parse('{"0":"ï¿½","128":"â‚¬","130":"â€š","131":"Æ’","132":"â€ž","133":"â€¦","134":"â€ ","135":"â€¡","136":"Ë†","137":"â€°","138":"Å ","139":"â€¹","140":"Å’","142":"Å½","145":"â€˜","146":"â€™","147":"â€œ","148":"â€","149":"â€¢","150":"â€“","151":"â€”","152":"Ëœ","153":"â„¢","154":"Å¡","155":"â€º","156":"Å“","158":"Å¾","159":"Å¸"}')},7274:e=>{"use strict";e.exports=JSON.parse('["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"]')},5547:e=>{"use strict";e.exports=JSON.parse('["cent","copy","divide","gt","lt","not","para","times"]')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{Annotation:()=>Je,AnnotationType:()=>et,ChangeDesc:()=>me,ChangeSet:()=>ve,CharCategory:()=>ht,Compartment:()=>qe,EditorSelection:()=>Ee,EditorState:()=>ft,Facet:()=>Te,Line:()=>se,MapMode:()=>fe,Prec:()=>Ve,Range:()=>gt,RangeSet:()=>wt,RangeSetBuilder:()=>kt,RangeValue:()=>vt,SelectionRange:()=>Me,StateEffect:()=>nt,StateEffectType:()=>tt,StateField:()=>Fe,Text:()=>J,Transaction:()=>it,codePointAt:()=>ue,codePointSize:()=>de,combineConfig:()=>mt,countColumn:()=>It,findClusterBreak:()=>ce,findColumn:()=>Ft,fromCodePoint:()=>he});var t={};n.r(t),n.d(t,{BidiSpan:()=>ki,BlockInfo:()=>po,BlockType:()=>Kn,Decoration:()=>Yn,Direction:()=>ai,EditorView:()=>Xo,GutterMarker:()=>Fs,MatchDecorator:()=>Oa,RectangleMarker:()=>da,ViewPlugin:()=>Xi,ViewUpdate:()=>cr,WidgetType:()=>Gn,__test:()=>dl,closeHoverTooltips:()=>Es,crosshairCursor:()=>is,drawSelection:()=>ka,dropCursor:()=>Ia,getDrawSelectionConfig:()=>Ca,getPanel:()=>Ds,getTooltip:()=>ks,gutter:()=>Hs,gutterLineClass:()=>Os,gutterWidgetClass:()=>Bs,gutters:()=>zs,hasHoverTooltips:()=>Cs,highlightActiveLine:()=>Ga,highlightActiveLineGutter:()=>rl,highlightSpecialChars:()=>za,highlightTrailingWhitespace:()=>hl,highlightWhitespace:()=>cl,hoverTooltip:()=>ws,keymap:()=>ra,layer:()=>ya,lineNumberMarkers:()=>Ys,lineNumberWidgetMarker:()=>Zs,lineNumbers:()=>el,logException:()=>Gi,panels:()=>Ts,placeholder:()=>Xa,rectangularSelection:()=>es,repositionTooltips:()=>Ss,runScopeHandlers:()=>sa,scrollPastEnd:()=>ja,showPanel:()=>Is,showTooltip:()=>fs,tooltips:()=>as});var i={};n.r(i),n.d(i,{DefaultBufferLength:()=>vu,IterMode:()=>Mu,MountedTree:()=>wu,NodeProp:()=>bu,NodeSet:()=>Eu,NodeType:()=>Cu,NodeWeakMap:()=>Gu,Parser:()=>Yu,Tree:()=>Tu,TreeBuffer:()=>Au,TreeCursor:()=>zu,TreeFragment:()=>Ku,parseMixed:()=>Xu});var r={};n.r(r),n.d(r,{Tag:()=>uh,classHighlighter:()=>zh,getStyleTags:()=>wh,highlightCode:()=>yh,highlightTree:()=>gh,styleTags:()=>ph,tagHighlighter:()=>vh,tags:()=>Nh});var o={};n.r(o),n.d(o,{DocInput:()=>Qh,HighlightStyle:()=>rp,IndentContext:()=>md,LRLanguage:()=>Gh,Language:()=>Wh,LanguageDescription:()=>ld,LanguageSupport:()=>sd,ParseContext:()=>ed,StreamLanguage:()=>Ip,StringStream:()=>Ap,TreeIndentContext:()=>wd,bidiIsolates:()=>Xp,bracketMatching:()=>Cp,bracketMatchingHandle:()=>Mp,codeFolding:()=>Xd,continuedIndent:()=>Sd,defaultHighlightStyle:()=>dp,defineLanguageFacet:()=>Uh,delimitedIndent:()=>Cd,ensureSyntaxTree:()=>Yh,flatIndent:()=>Ed,foldAll:()=>_d,foldCode:()=>zd,foldEffect:()=>Fd,foldGutter:()=>np,foldInside:()=>Ld,foldKeymap:()=>Kd,foldNodeProp:()=>Ad,foldService:()=>Dd,foldState:()=>Nd,foldable:()=>Pd,foldedRanges:()=>Rd,forceParsing:()=>Xh,getIndentUnit:()=>hd,getIndentation:()=>pd,highlightingFor:()=>cp,ignoreSpellcheckToken:()=>Gp,indentNodeProp:()=>vd,indentOnInput:()=>Td,indentRange:()=>fd,indentService:()=>cd,indentString:()=>dd,indentUnit:()=>ud,language:()=>ad,languageDataProp:()=>qh,lineClassNodeProp:()=>_p,lineHighlighter:()=>jp,matchBrackets:()=>xp,sublanguageProp:()=>_h,syntaxHighlighting:()=>lp,syntaxParserRunning:()=>$h,syntaxTree:()=>Kh,syntaxTreeAvailable:()=>Zh,toggleFold:()=>Gd,tokenClassNodeProp:()=>Up,unfoldAll:()=>Wd,unfoldCode:()=>qd,unfoldEffect:()=>Od});var a={};n.r(a),n.d(a,{blockComment:()=>_m,blockUncomment:()=>Wm,copyLineDown:()=>My,copyLineUp:()=>Cy,cursorCharBackward:()=>Iv,cursorCharBackwardLogical:()=>Nv,cursorCharForward:()=>Pv,cursorCharForwardLogical:()=>Bv,cursorCharLeft:()=>Av,cursorCharRight:()=>Lv,cursorDocEnd:()=>Yg,cursorDocStart:()=>Kg,cursorGroupBackward:()=>qv,cursorGroupForward:()=>zv,cursorGroupForwardWin:()=>_v,cursorGroupLeft:()=>Hv,cursorGroupRight:()=>Vv,cursorLineBoundaryBackward:()=>lg,cursorLineBoundaryForward:()=>sg,cursorLineBoundaryLeft:()=>cg,cursorLineBoundaryRight:()=>ug,cursorLineDown:()=>tg,cursorLineEnd:()=>dg,cursorLineStart:()=>hg,cursorLineUp:()=>eg,cursorMatchingBracket:()=>fg,cursorPageDown:()=>og,cursorPageUp:()=>rg,cursorSubwordBackward:()=>Yv,cursorSubwordForward:()=>Kv,cursorSyntaxLeft:()=>$v,cursorSyntaxRight:()=>Qv,defaultKeymap:()=>Vy,deleteCharBackward:()=>ry,deleteCharBackwardStrict:()=>oy,deleteCharForward:()=>ay,deleteGroupBackward:()=>ly,deleteGroupForward:()=>cy,deleteLine:()=>Ey,deleteLineBoundaryBackward:()=>dy,deleteLineBoundaryForward:()=>py,deleteToLineEnd:()=>uy,deleteToLineStart:()=>hy,deleteTrailingWhitespace:()=>fy,emacsStyleKeymap:()=>Ry,history:()=>tv,historyField:()=>nv,historyKeymap:()=>Cv,indentLess:()=>Fy,indentMore:()=>Iy,indentSelection:()=>Py,indentWithTab:()=>zy,insertBlankLine:()=>Dy,insertNewline:()=>Sy,insertNewlineAndIndent:()=>Ty,insertNewlineKeepIndent:()=>xy,insertTab:()=>Ny,invertedEffects:()=>Qm,isolateHistory:()=>$m,lineComment:()=>zm,lineUncomment:()=>qm,moveLineDown:()=>wy,moveLineUp:()=>by,redo:()=>ov,redoDepth:()=>uv,redoSelection:()=>sv,selectAll:()=>$g,selectCharBackward:()=>kg,selectCharBackwardLogical:()=>Mg,selectCharForward:()=>wg,selectCharForwardLogical:()=>Cg,selectCharLeft:()=>yg,selectCharRight:()=>bg,selectDocEnd:()=>Xg,selectDocStart:()=>Zg,selectGroupBackward:()=>Dg,selectGroupForward:()=>Tg,selectGroupForwardWin:()=>Ag,selectGroupLeft:()=>Sg,selectGroupRight:()=>xg,selectLine:()=>Qg,selectLineBoundaryBackward:()=>Ug,selectLineBoundaryForward:()=>qg,selectLineBoundaryLeft:()=>_g,selectLineBoundaryRight:()=>Wg,selectLineDown:()=>Rg,selectLineEnd:()=>Gg,selectLineStart:()=>jg,selectLineUp:()=>Ng,selectMatchingBracket:()=>mg,selectPageDown:()=>zg,selectPageUp:()=>Vg,selectParentSyntax:()=>Jg,selectSubwordBackward:()=>Ig,selectSubwordForward:()=>Pg,selectSyntaxLeft:()=>Fg,selectSyntaxRight:()=>Og,simplifySelection:()=>ey,splitLine:()=>my,standardKeymap:()=>Hy,temporarilySetTabFocusMode:()=>By,toggleBlockComment:()=>Um,toggleBlockCommentByLine:()=>jm,toggleComment:()=>Rm,toggleLineComment:()=>Vm,toggleTabFocusMode:()=>Oy,transposeChars:()=>vy,undo:()=>rv,undoDepth:()=>cv,undoSelection:()=>av});var s={};n.r(s),n.d(s,{RegExpCursor:()=>Ky,SearchCursor:()=>Wy,SearchQuery:()=>fb,closeSearchPanel:()=>_b,findNext:()=>Ib,findPrevious:()=>Fb,getSearchQuery:()=>Sb,gotoLine:()=>tb,highlightSelectionMatches:()=>ob,openSearchPanel:()=>Ub,replaceAll:()=>Rb,replaceNext:()=>Nb,search:()=>pb,searchKeymap:()=>Wb,searchPanelOpen:()=>xb,selectMatches:()=>Ob,selectNextOccurrence:()=>hb,selectSelectionMatches:()=>Bb,setSearchQuery:()=>Cb});var l={};n.r(l),n.d(l,{CompletionContext:()=>nz,acceptCompletion:()=>zz,autocompletion:()=>qq,clearSnippet:()=>aq,closeBrackets:()=>Sq,closeBracketsKeymap:()=>Iq,closeCompletion:()=>Uz,completeAnyWord:()=>wq,completeFromList:()=>rz,completionKeymap:()=>Uq,completionStatus:()=>Wq,currentCompletions:()=>Gq,deleteBracketPair:()=>Pq,hasNextSnippetField:()=>cq,hasPrevSnippetField:()=>uq,ifIn:()=>oz,ifNotIn:()=>az,insertBracket:()=>Fq,insertCompletionText:()=>hz,moveCompletionSelection:()=>Vz,nextSnippetField:()=>sq,pickedCompletion:()=>uz,prevSnippetField:()=>lq,selectedCompletion:()=>Kq,selectedCompletionIndex:()=>Yq,setSelectedCompletion:()=>Zq,snippet:()=>rq,snippetCompletion:()=>fq,snippetKeymap:()=>dq,startCompletion:()=>qz});var c={};n.r(c),n.d(c,{collab:()=>tU,getClientID:()=>oU,getSyncedVersion:()=>rU,rebaseUpdates:()=>aU,receiveUpdates:()=>nU,sendableUpdates:()=>iU});var u={};n.r(u),n.d(u,{closeLintPanel:()=>CU,diagnosticCount:()=>gU,forEachDiagnostic:()=>XU,forceLinting:()=>AU,lintGutter:()=>ZU,lintKeymap:()=>SU,linter:()=>DU,nextDiagnostic:()=>MU,openLintPanel:()=>kU,previousDiagnostic:()=>EU,setDiagnostics:()=>dU,setDiagnosticsEffect:()=>pU});var h={};n.r(h),n.d(h,{ContextTracker:()=>b_,ExternalTokenizer:()=>s_,InputStream:()=>r_,LRParser:()=>w_,LocalTokenGroup:()=>a_,Stack:()=>$U});var d={};n.r(d),n.d(d,{AbstractInputSuggest:()=>AF,AbstractTextComponent:()=>UI,App:()=>y2,BaseComponent:()=>RI,ButtonComponent:()=>VI,CapacitorAdapter:()=>eW,ColorComponent:()=>XI,Component:()=>xA,DropdownComponent:()=>KI,EditableFileView:()=>oH,Editor:()=>Bm,EditorSuggest:()=>pF,Events:()=>sw,ExtraButtonComponent:()=>zI,FileManager:()=>wL,FileSystemAdapter:()=>mu,FileView:()=>YP,FuzzySuggestModal:()=>dV,HoverPopover:()=>tR,ItemView:()=>GP,Keymap:()=>Ak,MarkdownPreviewRenderer:()=>eB,MarkdownPreviewSection:()=>KO,MarkdownPreviewView:()=>kB,MarkdownRenderChild:()=>GO,MarkdownRenderer:()=>yB,MarkdownView:()=>LY,Menu:()=>PA,MenuItem:()=>TA,MenuSeparator:()=>DA,MetadataCache:()=>j_,Modal:()=>ZA,MomentFormatComponent:()=>GI,Notice:()=>JA,Platform:()=>Zl,Plugin:()=>rY,PluginSettingTab:()=>oY,PopoverState:()=>_N,PopoverSuggest:()=>hF,ProgressBarComponent:()=>YI,Scope:()=>Tk,SearchComponent:()=>WI,Setting:()=>NI,SettingTab:()=>vK,SliderComponent:()=>ZI,SuggestModal:()=>hV,TAbstractFile:()=>yw,TFile:()=>ww,TFolder:()=>kw,TextAreaComponent:()=>jI,TextComponent:()=>_I,TextFileView:()=>Z_,ToggleComponent:()=>qI,ValueComponent:()=>HI,Vault:()=>Cw,View:()=>jP,ViewRegistry:()=>dW,Workspace:()=>YK,WorkspaceContainer:()=>kG,WorkspaceFloating:()=>UK,WorkspaceItem:()=>gG,WorkspaceLeaf:()=>VK,WorkspaceParent:()=>yG,WorkspaceRibbon:()=>zK,WorkspaceRoot:()=>qK,WorkspaceSidedock:()=>wG,WorkspaceSplit:()=>bG,WorkspaceTabs:()=>RK,WorkspaceWindow:()=>_K,addIcon:()=>vx,apiVersion:()=>c2,arrayBufferToBase64:()=>ff,arrayBufferToHex:()=>bf,base64ToArrayBuffer:()=>pf,debounce:()=>mc,displayTooltip:()=>Ox,editorEditorField:()=>wR,editorInfoField:()=>kR,editorLivePreviewField:()=>MR,editorViewField:()=>CR,finishRenderMath:()=>IO,fuzzySearch:()=>VL,getAllTags:()=>YS,getBlobArrayBuffer:()=>wc,getFrontMatterInfo:()=>vS,getIcon:()=>fx,getIconIds:()=>yx,getLanguage:()=>tm,getLinkpath:()=>_S,hexToArrayBuffer:()=>yf,htmlToMarkdown:()=>rw,iterateCacheRefs:()=>jS,iterateRefs:()=>KS,livePreviewState:()=>vV,loadMathJax:()=>xO,loadMermaid:()=>CO,loadPdfJs:()=>yO,loadPrism:()=>EO,moment:()=>WD,normalizePath:()=>tu,parseFrontMatterAliases:()=>MS,parseFrontMatterEntry:()=>kS,parseFrontMatterStringArray:()=>CS,parseFrontMatterTags:()=>ES,parseLinktext:()=>WS,parseYaml:()=>UD,prepareFuzzySearch:()=>NL,prepareQuery:()=>BL,prepareSimpleSearch:()=>_L,removeIcon:()=>gx,renderMatches:()=>jL,renderMath:()=>TO,renderResults:()=>WL,request:()=>_A,requestUrl:()=>UA,requireApiVersion:()=>h2,resolveSubpath:()=>JS,sanitizeHTMLToDom:()=>qT,setIcon:()=>mx,setTooltip:()=>Rx,sortSearchResults:()=>zL,stringifyYaml:()=>_D,stripHeading:()=>$S,stripHeadingForLink:()=>QS});var p=function(e,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},p(e,t)};function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var m=function(){return m=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},m.apply(this,arguments)};function v(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function g(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function y(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function b(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function C(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof k?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(r[e](t))}catch(e){u(o[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function M(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=b(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}Object.create;const E=e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e),S=E("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});S.addPlatform,S.setPlatform;var x;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(x||(x={}));class T extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const D=e=>{var t,n,i,r,o;const a=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},l=s.Plugins=s.Plugins||{},c=e.CapacitorPlatforms,u=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==a?a.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),h=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==u()),d=(null===(i=null==c?void 0:c.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(e=>{const t=f.get(e);return!!(null==t?void 0:t.platforms.has(u()))||!!p(e)}),p=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.getPluginHeader)||(e=>{var t;return null===(t=s.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),f=new Map,m=(null===(o=null==c?void 0:c.currentPlatform)||void 0===o?void 0:o.registerPlugin)||((e,t={})=>{const n=f.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const i=u(),r=p(e);let o;const c=n=>{let l;const c=(...c)=>{const u=(async()=>(!o&&i in t?o=o="function"==typeof t[i]?await t[i]():t[i]:null!==a&&!o&&"web"in t&&(o=o="function"==typeof t.web?await t.web():t.web),o))().then((t=>{const o=((t,n)=>{var o,a;if(!r){if(t)return null===(a=t[n])||void 0===a?void 0:a.bind(t);throw new T(`"${e}" plugin is not implemented on ${i}`,x.Unimplemented)}{const i=null==r?void 0:r.methods.find((e=>n===e.name));if(i)return"promise"===i.rtype?t=>s.nativePromise(e,n.toString(),t):(t,i)=>s.nativeCallback(e,n.toString(),t,i);if(t)return null===(o=t[n])||void 0===o?void 0:o.bind(t)}})(t,n);if(o){const e=o(...c);return l=null==e?void 0:e.remove,e}throw new T(`"${e}.${n}()" is not implemented on ${i}`,x.Unimplemented)}));return"addListener"===n&&(u.remove=async()=>l()),u};return c.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(c,"name",{value:n,writable:!1,configurable:!1}),c},h=c("addListener"),d=c("removeListener"),m=(e,t)=>{const n=h({eventName:e},t),i=async()=>{const i=await n;d({eventName:e,callbackId:i},t)},r=new Promise((e=>n.then((()=>e({remove:i})))));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()},r},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return r?m:h;case"removeListener":return d;default:return c(t)}}});return l[e]=v,f.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(t),...r?[i]:[]])}),v});return s.convertFileSrc||(s.convertFileSrc=e=>e),s.getPlatform=u,s.handleError=t=>e.console.error(t),s.isNativePlatform=h,s.isPluginAvailable=d,s.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),s.registerPlugin=m,s.Exception=T,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},A=(e=>e.Capacitor=D(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{}),L=A.registerPlugin;A.Plugins;class P{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);const i=async()=>this.removeListener(e,t),r=Promise.resolve({remove:i});return Object.defineProperty(r,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),r}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach((e=>e(t)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new A.Exception(e,x.Unimplemented)}unavailable(e="not available"){return new A.Exception(e,x.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const i=n.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const I=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),F=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class O extends P{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach((e=>{if(e.length<=0)return;let[n,i]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=F(n).trim(),i=F(i).trim(),t[n]=i})),t}async setCookie(e){try{const t=I(e.key),n=I(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),o=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${i}; path=${r}; ${o};`}catch(e){return Promise.reject(e)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}L("CapacitorCookies",{web:()=>new O});const B=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=((e={})=>{const t=Object.keys(e),n=Object.keys(e).map((e=>e.toLocaleLowerCase())).reduce(((n,i,r)=>(n[i]=e[t[r]],n)),{});return n})(e.headers),r=i["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,i]of Object.entries(e.data||{}))t.set(n,i);n.body=t.toString()}else if(r.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,n)=>{t.append(n,e)}));else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(r.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class N extends P{async request(e){const t=B(e,e.webFetchExtra),n=((e,t=!0)=>{if(!e)return null;const n=Object.entries(e).reduce(((e,n)=>{const[i,r]=n;let o,a;return Array.isArray(r)?(a="",r.forEach((e=>{o=t?encodeURIComponent(e):e,a+=`${i}=${o}&`})),a.slice(0,-1)):(o=t?encodeURIComponent(r):r,a=`${i}=${o}`),`${e}&${a}`}),"");return n.substr(1)})(e.params,e.shouldEncodeUrlParams),i=n?`${e.url}?${n}`:e.url,r=await fetch(i,t),o=r.headers.get("content-type")||"";let a,s,{responseType:l="text"}=r.ok?e:{};switch(o.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":s=await r.blob(),a=await(async e=>new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>{const e=i.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},i.onerror=e=>n(e),i.readAsDataURL(e)})))(s);break;case"json":a=await r.json();break;default:a=await r.text()}const c={};return r.headers.forEach(((e,t)=>{c[t]=e})),{data:a,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}L("CapacitorHttp",{web:()=>new N});var R,H;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(R||(R={})),function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"}(H||(H={}));L("Keyboard");var V,z;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(V||(V={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(z||(z={}));let q=[],U=[];function _(e){if(e<768)return!1;for(let t=0,n=q.length;;){let i=t+n>>1;if(e<q[i])n=i;else{if(!(e>=U[i]))return!0;t=i+1}if(t==n)return!1}}function W(e){return e>=127462&&e<=127487}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let t=0,n=0;t<e.length;t++)(t%2?U:q).push(n+=e[t])})();const j=8205;function G(e,t,n=!0,i=!0){return(n?K:Y)(e,t,i)}function K(e,t,n){if(t==e.length)return t;t&&X(e.charCodeAt(t))&&$(e.charCodeAt(t-1))&&t--;let i=Z(e,t);for(t+=Q(i);t<e.length;){let r=Z(e,t);if(i==j||r==j||n&&_(r))t+=Q(r),i=r;else{if(!W(r))break;{let n=0,i=t-2;for(;i>=0&&W(Z(e,i));)n++,i-=2;if(n%2==0)break;t+=2}}}return t}function Y(e,t,n){for(;t>0;){let i=K(e,t-2,n);if(i<t)return i;t--}return 0}function Z(e,t){let n=e.charCodeAt(t);if(!$(n)||t+1==e.length)return n;let i=e.charCodeAt(t+1);return X(i)?i-56320+(n-55296<<10)+65536:n}function X(e){return e>=56320&&e<57344}function $(e){return e>=55296&&e<56320}function Q(e){return e<65536?1:2}var J=function(){function e(){}return e.prototype.lineAt=function(e){if(e<0||e>this.length)throw new RangeError("Invalid position ".concat(e," in document of length ").concat(this.length));return this.lineInner(e,!1,1,0)},e.prototype.line=function(e){if(e<1||e>this.lines)throw new RangeError("Invalid line number ".concat(e," in ").concat(this.lines,"-line document"));return this.lineInner(e,!0,1,0)},e.prototype.replace=function(e,t,n){var i;e=(i=le(this,e,t))[0],t=i[1];var r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),te.from(r,this.length-(t-e)+n.length)},e.prototype.append=function(e){return this.replace(this.length,this.length,e)},e.prototype.slice=function(e,t){var n;void 0===t&&(t=this.length),e=(n=le(this,e,t))[0],t=n[1];var i=[];return this.decompose(e,t,i,0),te.from(i,t-e)},e.prototype.eq=function(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;for(var t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new re(this),r=new re(e),o=t,a=t;;){if(i.next(o),r.next(o),o=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(a+=i.value.length,i.done||a>=n)return!0}},e.prototype.iter=function(e){return void 0===e&&(e=1),new re(this,e)},e.prototype.iterRange=function(e,t){return void 0===t&&(t=this.length),new oe(this,e,t)},e.prototype.iterLines=function(e,t){var n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);var i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new ae(n)},e.prototype.toString=function(){return this.sliceString(0)},e.prototype.toJSON=function(){var e=[];return this.flatten(e),e},e.of=function(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new ee(t):te.from(ee.split(t,[])):e.empty},e}(),ee=function(e){function t(t,n){void 0===n&&(n=function(e){for(var t=-1,n=0,i=e;n<i.length;n++){t+=i[n].length+1}return t}(t));var i=e.call(this)||this;return i.text=t,i.length=n,i}return f(t,e),Object.defineProperty(t.prototype,"lines",{get:function(){return this.text.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.lineInner=function(e,t,n,i){for(var r=0;;r++){var o=this.text[r],a=i+o.length;if((t?n:a)>=e)return new se(i,a,n,o);i=a+1,n++}},t.prototype.decompose=function(e,n,i,r){var o=e<=0&&n>=this.length?this:new t(ie(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(1&r){var a=i.pop(),s=ne(o.text,a.text.slice(),0,o.length);if(s.length<=32)i.push(new t(s,a.length+o.length));else{var l=s.length>>1;i.push(new t(s.slice(0,l)),new t(s.slice(l)))}}else i.push(o)},t.prototype.replace=function(n,i,r){var o;if(!(r instanceof t))return e.prototype.replace.call(this,n,i,r);n=(o=le(this,n,i))[0],i=o[1];var a=ne(this.text,ne(r.text,ie(this.text,0,n)),i),s=this.length+r.length-(i-n);return a.length<=32?new t(a,s):te.from(t.split(a,[]),s)},t.prototype.sliceString=function(e,t,n){var i;void 0===t&&(t=this.length),void 0===n&&(n="\n"),e=(i=le(this,e,t))[0],t=i[1];for(var r="",o=0,a=0;o<=t&&a<this.text.length;a++){var s=this.text[a],l=o+s.length;o>e&&a&&(r+=n),e<l&&t>o&&(r+=s.slice(Math.max(0,e-o),t-o)),o=l+1}return r},t.prototype.flatten=function(e){for(var t=0,n=this.text;t<n.length;t++){var i=n[t];e.push(i)}},t.prototype.scanIdentical=function(){return 0},t.split=function(e,n){for(var i=[],r=-1,o=0,a=e;o<a.length;o++){var s=a[o];i.push(s),r+=s.length+1,32==i.length&&(n.push(new t(i,r)),i=[],r=-1)}return r>-1&&n.push(new t(i,r)),n},t}(J),te=function(e){function t(t,n){var i=e.call(this)||this;i.children=t,i.length=n,i.lines=0;for(var r=0,o=t;r<o.length;r++){var a=o[r];i.lines+=a.lines}return i}return f(t,e),t.prototype.lineInner=function(e,t,n,i){for(var r=0;;r++){var o=this.children[r],a=i+o.length,s=n+o.lines-1;if((t?s:a)>=e)return o.lineInner(e,t,n,i);i=a+1,n=s+1}},t.prototype.decompose=function(e,t,n,i){for(var r=0,o=0;o<=t&&r<this.children.length;r++){var a=this.children[r],s=o+a.length;if(e<=s&&t>=o){var l=i&((o<=e?1:0)|(s>=t?2:0));o>=e&&s<=t&&!l?n.push(a):a.decompose(e-o,t-o,n,l)}o=s+1}},t.prototype.replace=function(n,i,r){var o;if(n=(o=le(this,n,i))[0],i=o[1],r.lines<this.lines)for(var a=0,s=0;a<this.children.length;a++){var l=this.children[a],c=s+l.length;if(n>=s&&i<=c){var u=l.replace(n-s,i-s,r),h=this.lines-l.lines+u.lines;if(u.lines<h>>4&&u.lines>h>>6){var d=this.children.slice();return d[a]=u,new t(d,this.length-(i-n)+r.length)}return e.prototype.replace.call(this,s,c,u)}s=c+1}return e.prototype.replace.call(this,n,i,r)},t.prototype.sliceString=function(e,t,n){var i;void 0===t&&(t=this.length),void 0===n&&(n="\n"),e=(i=le(this,e,t))[0],t=i[1];for(var r="",o=0,a=0;o<this.children.length&&a<=t;o++){var s=this.children[o],l=a+s.length;a>e&&o&&(r+=n),e<l&&t>a&&(r+=s.sliceString(e-a,t-a,n)),a=l+1}return r},t.prototype.flatten=function(e){for(var t=0,n=this.children;t<n.length;t++){n[t].flatten(e)}},t.prototype.scanIdentical=function(e,n){if(!(e instanceof t))return 0;for(var i=0,r=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1],o=r[0],a=r[1],s=r[2],l=r[3];;o+=n,a+=n){if(o==s||a==l)return i;var c=this.children[o],u=e.children[a];if(c!=u)return i+c.scanIdentical(u,n);i+=c.length+1}},t.from=function(e,n){void 0===n&&(n=e.reduce((function(e,t){return e+t.length+1}),-1));for(var i=0,r=0,o=e;r<o.length;r++){i+=o[r].lines}if(i<32){for(var a=[],s=0,l=e;s<l.length;s++){l[s].flatten(a)}return new ee(a,n)}var c=Math.max(32,i>>5),u=c<<1,h=c>>1,d=[],p=0,f=-1,m=[];function v(e){var n;if(e.lines>u&&e instanceof t)for(var i=0,r=e.children;i<r.length;i++){v(r[i])}else e.lines>h&&(p>h||!p)?(g(),d.push(e)):e instanceof ee&&p&&(n=m[m.length-1])instanceof ee&&e.lines+n.lines<=32?(p+=e.lines,f+=e.length+1,m[m.length-1]=new ee(n.text.concat(e.text),n.length+1+e.length)):(p+e.lines>c&&g(),p+=e.lines,f+=e.length+1,m.push(e))}function g(){0!=p&&(d.push(1==m.length?m[0]:t.from(m,f)),f=-1,p=m.length=0)}for(var y=0,b=e;y<b.length;y++){v(b[y])}return g(),1==d.length?d[0]:new t(d,n)},t}(J);function ne(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=1e9);for(var r=0,o=0,a=!0;o<e.length&&r<=i;o++){var s=e[o],l=r+s.length;l>=n&&(l>i&&(s=s.slice(0,i-r)),r<n&&(s=s.slice(n-r)),a?(t[t.length-1]+=s,a=!1):t.push(s)),r=l+1}return t}function ie(e,t,n){return ne(e,[""],t,n)}J.empty=new ee([""],0);var re=function(){function e(e,t){void 0===t&&(t=1),this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ee?e.text.length:e.children.length)<<1]}return e.prototype.nextInner=function(e,t){for(this.done=this.lineBreak=!1;;){var n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],o=r>>1,a=i instanceof ee?i.text.length:i.children.length;if(o==(t>0?a:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof ee){var s=i.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,s.length>Math.max(0,e))return this.value=0==e?s:t>0?s.slice(e):s.slice(0,s.length-e),this;e-=s.length}else{e>(s=i.children[o+(t<0?-1:0)]).length?(e-=s.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(s),this.offsets.push(t>0?1:(s instanceof ee?s.text.length:s.children.length)<<1))}}},e.prototype.next=function(e){return void 0===e&&(e=0),e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)},e}(),oe=function(){function e(e,t,n){this.value="",this.done=!1,this.cursor=new re(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}return e.prototype.nextInner=function(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);var n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;var i=this.cursor.next(e).value;return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this},e.prototype.next=function(e){return void 0===e&&(e=0),e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)},Object.defineProperty(e.prototype,"lineBreak",{get:function(){return this.cursor.lineBreak&&""!=this.value},enumerable:!1,configurable:!0}),e}(),ae=function(){function e(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}return e.prototype.next=function(e){void 0===e&&(e=0);var t=this.inner.next(e),n=t.done,i=t.lineBreak,r=t.value;return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this},Object.defineProperty(e.prototype,"lineBreak",{get:function(){return!1},enumerable:!1,configurable:!0}),e}();"undefined"!=typeof Symbol&&(J.prototype[Symbol.iterator]=function(){return this.iter()},re.prototype[Symbol.iterator]=oe.prototype[Symbol.iterator]=ae.prototype[Symbol.iterator]=function(){return this});var se=function(){function e(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}return Object.defineProperty(e.prototype,"length",{get:function(){return this.to-this.from},enumerable:!1,configurable:!0}),e}();function le(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}function ce(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=!0),G(e,t,n,i)}function ue(e,t){var n,i=e.charCodeAt(t);if(!(n=i,n>=55296&&n<56320&&t+1!=e.length))return i;var r=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(r)?r-56320+(i-55296<<10)+65536:i}function he(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function de(e){return e<65536?1:2}var pe=/\r\n?|\n/,fe=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(fe||(fe={})),me=function(){function e(e){this.sections=e}return Object.defineProperty(e.prototype,"length",{get:function(){for(var e=0,t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newLength",{get:function(){for(var e=0,t=0;t<this.sections.length;t+=2){var n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0},enumerable:!1,configurable:!0}),e.prototype.iterGaps=function(e){for(var t=0,n=0,i=0;t<this.sections.length;){var r=this.sections[t++],o=this.sections[t++];o<0?(e(n,i,r),i+=r):i+=o,n+=r}},e.prototype.iterChangedRanges=function(e,t){void 0===t&&(t=!1),be(this,e,t)},Object.defineProperty(e.prototype,"invertedDesc",{get:function(){for(var t=[],n=0;n<this.sections.length;){var i=this.sections[n++],r=this.sections[n++];r<0?t.push(i,r):t.push(r,i)}return new e(t)},enumerable:!1,configurable:!0}),e.prototype.composeDesc=function(e){return this.empty?e:e.empty?this:ke(this,e)},e.prototype.mapDesc=function(e,t){return void 0===t&&(t=!1),e.empty?this:we(this,e,t)},e.prototype.mapPos=function(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=fe.Simple);for(var i=0,r=0,o=0;o<this.sections.length;){var a=this.sections[o++],s=this.sections[o++],l=i+a;if(s<0){if(l>e)return r+(e-i);r+=a}else{if(n!=fe.Simple&&l>=e&&(n==fe.TrackDel&&i<e&&l>e||n==fe.TrackBefore&&i<e||n==fe.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!a)return e==i||t<0?r:r+s;r+=s}i=l}if(e>i)throw new RangeError("Position ".concat(e," is out of range for changeset of length ").concat(i));return r},e.prototype.touchesRange=function(e,t){void 0===t&&(t=e);for(var n=0,i=0;n<this.sections.length&&i<=t;){var r=i+this.sections[n++];if(this.sections[n++]>=0&&i<=t&&r>=e)return!(i<e&&r>t)||"cover";i=r}return!1},e.prototype.toString=function(){for(var e="",t=0;t<this.sections.length;){var n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e},e.prototype.toJSON=function(){return this.sections},e.fromJSON=function(t){if(!Array.isArray(t)||t.length%2||t.some((function(e){return"number"!=typeof e})))throw new RangeError("Invalid JSON representation of ChangeDesc");return new e(t)},e.create=function(t){return new e(t)},e}(),ve=function(e){function t(t,n){var i=e.call(this,t)||this;return i.inserted=n,i}return f(t,e),t.prototype.apply=function(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return be(this,(function(t,n,i,r,o){return e=e.replace(i,i+(n-t),o)}),!1),e},t.prototype.mapDesc=function(e,t){return void 0===t&&(t=!1),we(this,e,t,!0)},t.prototype.invert=function(e){for(var n=this.sections.slice(),i=[],r=0,o=0;r<n.length;r+=2){var a=n[r],s=n[r+1];if(s>=0){n[r]=s,n[r+1]=a;for(var l=r>>1;i.length<l;)i.push(J.empty);i.push(a?e.slice(o,o+a):J.empty)}o+=a}return new t(n,i)},t.prototype.compose=function(e){return this.empty?e:e.empty?this:ke(this,e,!0)},t.prototype.map=function(e,t){return void 0===t&&(t=!1),e.empty?this:we(this,e,t,!0)},t.prototype.iterChanges=function(e,t){void 0===t&&(t=!1),be(this,e,t)},Object.defineProperty(t.prototype,"desc",{get:function(){return me.create(this.sections)},enumerable:!1,configurable:!0}),t.prototype.filter=function(e){var n=[],i=[],r=[],o=new Ce(this);e:for(var a=0,s=0;;){for(var l=a==e.length?1e9:e[a++];s<l||s==l&&0==o.len;){if(o.done)break e;ge(r,h=Math.min(o.len,l-s),-1);var c=-1==o.ins?-1:0==o.off?o.ins:0;ge(n,h,c),c>0&&ye(i,n,o.text),o.forward(h),s+=h}for(var u=e[a++];s<u;){if(o.done)break e;var h;ge(n,h=Math.min(o.len,u-s),-1),ge(r,h,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(h),s+=h}}return{changes:new t(n,i),filtered:me.create(r)}},t.prototype.toJSON=function(){for(var e=[],t=0;t<this.sections.length;t+=2){var n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):0==i?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e},t.of=function(e,n,i){var r=[],o=[],a=0,s=null;function l(e){if(void 0===e&&(e=!1),e||r.length){a<n&&ge(r,n-a,-1);var i=new t(r,o);s=s?s.compose(i.map(s)):i,r=[],o=[],a=0}}return function e(c){if(Array.isArray(c))for(var u=0,h=c;u<h.length;u++){e(h[u])}else if(c instanceof t){if(c.length!=n)throw new RangeError("Mismatched change set length (got ".concat(c.length,", expected ").concat(n,")"));l(),s=s?s.compose(c.map(s)):c}else{var d=c.from,p=c.to,f=void 0===p?d:p,m=c.insert;if(d>f||d<0||f>n)throw new RangeError("Invalid change range ".concat(d," to ").concat(f," (in doc of length ").concat(n,")"));var v=m?"string"==typeof m?J.of(m.split(i||pe)):m:J.empty,g=v.length;if(d==f&&0==g)return;d<a&&l(),d>a&&ge(r,d-a,-1),ge(r,f-d,g),ye(o,r,v),a=f}}(e),l(!s),s},t.empty=function(e){return new t(e?[e,-1]:[],[])},t.fromJSON=function(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");for(var n=[],i=[],r=0;r<e.length;r++){var o=e[r];if("number"==typeof o)n.push(o,-1);else{if(!Array.isArray(o)||"number"!=typeof o[0]||o.some((function(e,t){return t&&"string"!=typeof e})))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==o.length)n.push(o[0],0);else{for(;i.length<r;)i.push(J.empty);i[r]=J.of(o.slice(1)),n.push(o[0],i[r].length)}}}return new t(n,i)},t.createSet=function(e,n){return new t(e,n)},t}(me);function ge(e,t,n,i){if(void 0===i&&(i=!1),!(0==t&&n<=0)){var r=e.length-2;r>=0&&n<=0&&n==e[r+1]?e[r]+=t:r>=0&&0==t&&0==e[r]?e[r+1]+=n:i?(e[r]+=t,e[r+1]+=n):e.push(t,n)}}function ye(e,t,n){if(0!=n.length){var i=t.length-2>>1;if(i<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<i;)e.push(J.empty);e.push(n)}}}function be(e,t,n){for(var i=e.inserted,r=0,o=0,a=0;a<e.sections.length;){var s=e.sections[a++],l=e.sections[a++];if(l<0)r+=s,o+=s;else{for(var c=r,u=o,h=J.empty;c+=s,u+=l,l&&i&&(h=h.append(i[a-2>>1])),!(n||a==e.sections.length||e.sections[a+1]<0);)s=e.sections[a++],l=e.sections[a++];t(r,c,o,u,h),r=c,o=u}}}function we(e,t,n,i){void 0===i&&(i=!1);for(var r=[],o=i?[]:null,a=new Ce(e),s=new Ce(t),l=-1;;){if(a.done&&s.len||s.done&&a.len)throw new Error("Mismatched change set lengths");if(-1==a.ins&&-1==s.ins)ge(r,c=Math.min(a.len,s.len),-1),a.forward(c),s.forward(c);else if(s.ins>=0&&(a.ins<0||l==a.i||0==a.off&&(s.len<a.len||s.len==a.len&&!n))){var c=s.len;for(ge(r,s.ins,-1);c;){var u=Math.min(a.len,c);a.ins>=0&&l<a.i&&a.len<=u&&(ge(r,0,a.ins),o&&ye(o,r,a.text),l=a.i),a.forward(u),c-=u}s.next()}else{if(!(a.ins>=0)){if(a.done&&s.done)return o?ve.createSet(r,o):me.create(r);throw new Error("Mismatched change set lengths")}c=0;for(var h=a.len;h;)if(-1==s.ins){c+=u=Math.min(h,s.len),h-=u,s.forward(u)}else{if(!(0==s.ins&&s.len<h))break;h-=s.len,s.next()}ge(r,c,l<a.i?a.ins:0),o&&l<a.i&&ye(o,r,a.text),l=a.i,a.forward(a.len-h)}}}function ke(e,t,n){void 0===n&&(n=!1);for(var i=[],r=n?[]:null,o=new Ce(e),a=new Ce(t),s=!1;;){if(o.done&&a.done)return r?ve.createSet(i,r):me.create(i);if(0==o.ins)ge(i,o.len,0,s),o.next();else if(0!=a.len||a.done){if(o.done||a.done)throw new Error("Mismatched change set lengths");var l=Math.min(o.len2,a.len),c=i.length;if(-1==o.ins){var u=-1==a.ins?-1:a.off?0:a.ins;ge(i,l,u,s),r&&u&&ye(r,i,a.text)}else-1==a.ins?(ge(i,o.off?0:o.len,l,s),r&&ye(r,i,o.textBit(l))):(ge(i,o.off?0:o.len,a.off?0:a.ins,s),r&&!a.off&&ye(r,i,a.text));s=(o.ins>l||a.ins>=0&&a.len>l)&&(s||i.length>c),o.forward2(l),a.forward(l)}else ge(i,0,a.ins,s),r&&ye(r,i,a.text),a.next()}}var Ce=function(){function e(e){this.set=e,this.i=0,this.next()}return e.prototype.next=function(){var e=this.set.sections;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0},Object.defineProperty(e.prototype,"done",{get:function(){return-2==this.ins},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"len2",{get:function(){return this.ins<0?this.len:this.ins},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var e=this.set.inserted,t=this.i-2>>1;return t>=e.length?J.empty:e[t]},enumerable:!1,configurable:!0}),e.prototype.textBit=function(e){var t=this.set.inserted,n=this.i-2>>1;return n>=t.length&&!e?J.empty:t[n].slice(this.off,null==e?void 0:this.off+e)},e.prototype.forward=function(e){e==this.len?this.next():(this.len-=e,this.off+=e)},e.prototype.forward2=function(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)},e}(),Me=function(){function e(e,t,n){this.from=e,this.to=t,this.flags=n}return Object.defineProperty(e.prototype,"anchor",{get:function(){return 32&this.flags?this.to:this.from},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){return 32&this.flags?this.from:this.to},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.from==this.to},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assoc",{get:function(){return 8&this.flags?-1:16&this.flags?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bidiLevel",{get:function(){var e=7&this.flags;return 7==e?null:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"goalColumn",{get:function(){var e=this.flags>>6;return 16777215==e?void 0:e},enumerable:!1,configurable:!0}),e.prototype.map=function(t,n){var i,r;return void 0===n&&(n=-1),this.empty?i=r=t.mapPos(this.from,n):(i=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new e(i,r,this.flags)},e.prototype.extend=function(e,t){if(void 0===t&&(t=e),e<=this.anchor&&t>=this.anchor)return Ee.range(e,t);var n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ee.range(this.anchor,n)},e.prototype.eq=function(e,t){return void 0===t&&(t=!1),!(this.anchor!=e.anchor||this.head!=e.head||t&&this.empty&&this.assoc!=e.assoc)},e.prototype.toJSON=function(){return{anchor:this.anchor,head:this.head}},e.fromJSON=function(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Ee.range(e.anchor,e.head)},e.create=function(t,n,i){return new e(t,n,i)},e}(),Ee=function(){function e(e,t){this.ranges=e,this.mainIndex=t}return e.prototype.map=function(t,n){return void 0===n&&(n=-1),t.empty?this:e.create(this.ranges.map((function(e){return e.map(t,n)})),this.mainIndex)},e.prototype.eq=function(e,t){if(void 0===t&&(t=!1),this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(var n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0},Object.defineProperty(e.prototype,"main",{get:function(){return this.ranges[this.mainIndex]},enumerable:!1,configurable:!0}),e.prototype.asSingle=function(){return 1==this.ranges.length?this:new e([this.main],0)},e.prototype.addRange=function(t,n){return void 0===n&&(n=!0),e.create([t].concat(this.ranges),n?0:this.mainIndex+1)},e.prototype.replaceRange=function(t,n){void 0===n&&(n=this.mainIndex);var i=this.ranges.slice();return i[n]=t,e.create(i,this.mainIndex)},e.prototype.toJSON=function(){return{ranges:this.ranges.map((function(e){return e.toJSON()})),main:this.mainIndex}},e.fromJSON=function(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new e(t.ranges.map((function(e){return Me.fromJSON(e)})),t.main)},e.single=function(t,n){return void 0===n&&(n=t),new e([e.range(t,n)],0)},e.create=function(t,n){if(void 0===n&&(n=0),0==t.length)throw new RangeError("A selection needs at least one range");for(var i=0,r=0;r<t.length;r++){var o=t[r];if(o.empty?o.from<=i:o.from<i)return e.normalized(t.slice(),n);i=o.to}return new e(t,n)},e.cursor=function(e,t,n,i){return void 0===t&&(t=0),Me.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!=i?i:16777215)<<6)},e.range=function(e,t,n,i){var r=(null!=n?n:16777215)<<6|(null==i?7:Math.min(6,i));return t<e?Me.create(t,e,48|r):Me.create(e,t,(t>e?8:0)|r)},e.normalized=function(t,n){void 0===n&&(n=0);var i=t[n];t.sort((function(e,t){return e.from-t.from})),n=t.indexOf(i);for(var r=1;r<t.length;r++){var o=t[r],a=t[r-1];if(o.empty?o.from<=a.to:o.from<a.to){var s=a.from,l=Math.max(o.to,a.to);r<=n&&n--,t.splice(--r,2,o.anchor>o.head?e.range(l,s):e.range(s,l))}}return new e(t,n)},e}();function Se(e,t){for(var n=0,i=e.ranges;n<i.length;n++){if(i[n].to>t)throw new RangeError("Selection points outside of document")}}var xe=0,Te=function(){function e(e,t,n,i,r){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=xe++,this.default=e([]),this.extensions="function"==typeof r?r(this):r}return Object.defineProperty(e.prototype,"reader",{get:function(){return this},enumerable:!1,configurable:!0}),e.define=function(t){return void 0===t&&(t={}),new e(t.combine||function(e){return e},t.compareInput||function(e,t){return e===t},t.compare||(t.combine?function(e,t){return e===t}:De),!!t.static,t.enables)},e.prototype.of=function(e){return new Ae([],this,0,e)},e.prototype.compute=function(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ae(e,this,1,t)},e.prototype.computeN=function(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ae(e,this,2,t)},e.prototype.from=function(e,t){return t||(t=function(e){return e}),this.compute([e],(function(n){return t(n.field(e))}))},e}();function De(e,t){return e==t||e.length==t.length&&e.every((function(e,n){return e===t[n]}))}var Ae=function(){function e(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=xe++}return e.prototype.dynamicSlot=function(e){for(var t,n=this,i=this.value,r=this.facet.compareInput,o=this.id,a=e[o]>>1,s=2==this.type,l=!1,c=!1,u=[],h=0,d=this.dependencies;h<d.length;h++){var p=d[h];"doc"==p?l=!0:"selection"==p?c=!0:1&(null!==(t=e[p.id])&&void 0!==t?t:1)||u.push(e[p.id])}return{create:function(e){return e.values[a]=i(e),1},update:function(e,t){if(l&&t.docChanged||c&&(t.docChanged||t.selection)||Pe(e,u)){var n=i(e);if(s?!Le(n,e.values[a],r):!r(n,e.values[a]))return e.values[a]=n,1}return 0},reconfigure:function(e,t){var l,c=t.config.address[o];if(null!=c){var u=je(t,c);if(n.dependencies.every((function(n){return n instanceof Te?t.facet(n)===e.facet(n):!(n instanceof Fe)||t.field(n,!1)==e.field(n,!1)}))||(s?Le(l=i(e),u,r):r(l=i(e),u)))return e.values[a]=u,0}else l=i(e);return e.values[a]=l,1}}},e}();function Le(e,t,n){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Pe(e,t){for(var n=!1,i=0,r=t;i<r.length;i++){1&We(e,r[i])&&(n=!0)}return n}var Ie=Te.define({static:!0}),Fe=function(){function e(e,t,n,i,r){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}return e.define=function(t){var n=new e(xe++,t.create,t.update,t.compare||function(e,t){return e===t},t);return t.provide&&(n.provides=t.provide(n)),n},e.prototype.create=function(e){var t=this,n=e.facet(Ie).find((function(e){return e.field==t}));return((null==n?void 0:n.create)||this.createF)(e)},e.prototype.slot=function(e){var t=this,n=e[this.id]>>1;return{create:function(e){return e.values[n]=t.create(e),1},update:function(e,i){var r=e.values[n],o=t.updateF(r,i);return t.compareF(r,o)?0:(e.values[n]=o,1)},reconfigure:function(e,i){return null!=i.config.address[t.id]?(e.values[n]=i.field(t),0):(e.values[n]=t.create(e),1)}}},e.prototype.init=function(e){return[this,Ie.of({field:this,create:e})]},Object.defineProperty(e.prototype,"extension",{get:function(){return this},enumerable:!1,configurable:!0}),e}(),Oe=4,Be=3,Ne=2,Re=1;function He(e){return function(t){return new ze(t,e)}}var Ve={highest:He(0),high:He(Re),default:He(Ne),low:He(Be),lowest:He(Oe)},ze=function(e,t){this.inner=e,this.prec=t},qe=function(){function e(){}return e.prototype.of=function(e){return new Ue(this,e)},e.prototype.reconfigure=function(t){return e.reconfigure.of({compartment:this,extension:t})},e.prototype.get=function(e){return e.config.compartments.get(this)},e}(),Ue=function(e,t){this.compartment=e,this.inner=t},_e=function(){function e(e,t,n,i,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}return e.prototype.staticFacet=function(e){var t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]},e.resolve=function(t,n,i){for(var r=[],o=Object.create(null),a=new Map,s=0,l=function(e,t,n){var i=[[],[],[],[],[]],r=new Map;function o(e,a){var s=r.get(e);if(null!=s){if(s<=a)return;var l=i[s].indexOf(e);l>-1&&i[s].splice(l,1),e instanceof Ue&&n.delete(e.compartment)}if(r.set(e,a),Array.isArray(e))for(var c=0,u=e;c<u.length;c++){o(u[c],a)}else if(e instanceof Ue){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");var h=t.get(e.compartment)||e.inner;n.set(e.compartment,h),o(h,a)}else if(e instanceof ze)o(e.inner,e.prec);else if(e instanceof Fe)i[a].push(e),e.provides&&o(e.provides,a);else if(e instanceof Ae)i[a].push(e),e.facet.extensions&&o(e.facet.extensions,Ne);else{if(!(h=e.extension))throw new Error("Unrecognized extension value in extension set (".concat(e,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));o(h,a)}}return o(e,Ne),i.reduce((function(e,t){return e.concat(t)}))}(t,n,a);s<l.length;s++){var c=l[s];c instanceof Fe?r.push(c):(o[c.facet.id]||(o[c.facet.id]=[])).push(c)}for(var u=Object.create(null),h=[],d=[],p=function(e){u[e.id]=d.length<<1,d.push((function(t){return e.slot(t)}))},f=0,m=r;f<m.length;f++){p(m[f])}var v=null==i?void 0:i.config.facets,g=function(e){var t=o[e],n=t[0].facet,r=v&&v[e]||[];if(t.every((function(e){return 0==e.type})))if(u[n.id]=h.length<<1|1,De(r,t))h.push(i.facet(n));else{var a=n.combine(t.map((function(e){return e.value})));h.push(i&&n.compare(a,i.facet(n))?i.facet(n):a)}else{for(var s=function(e){0==e.type?(u[e.id]=h.length<<1|1,h.push(e.value)):(u[e.id]=d.length<<1,d.push((function(t){return e.dynamicSlot(t)})))},l=0,c=t;l<c.length;l++){s(c[l])}u[n.id]=d.length<<1,d.push((function(e){return function(e,t,n){var i=n.map((function(t){return e[t.id]})),r=n.map((function(e){return e.type})),o=i.filter((function(e){return!(1&e)})),a=e[t.id]>>1;function s(e){for(var n=[],o=0;o<i.length;o++){var a=je(e,i[o]);if(2==r[o])for(var s=0,l=a;s<l.length;s++){var c=l[s];n.push(c)}else n.push(a)}return t.combine(n)}return{create:function(e){for(var t=0,n=i;t<n.length;t++)We(e,n[t]);return e.values[a]=s(e),1},update:function(e,n){if(!Pe(e,o))return 0;var i=s(e);return t.compare(i,e.values[a])?0:(e.values[a]=i,1)},reconfigure:function(e,r){var o=Pe(e,i),l=r.config.facets[t.id],c=r.facet(t);if(l&&!o&&De(n,l))return e.values[a]=c,0;var u=s(e);return t.compare(u,c)?(e.values[a]=c,0):(e.values[a]=u,1)}}}(e,n,t)}))}};for(var y in o)g(y);return new e(t,a,d.map((function(e){return e(u)})),u,h,o)},e}();function We(e,t){if(1&t)return 2;var n=t>>1,i=e.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;e.status[n]=4;var r=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|r}function je(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}var Ge=Te.define(),Ke=Te.define({combine:function(e){return e.some((function(e){return e}))},static:!0}),Ye=Te.define({combine:function(e){return e.length?e[0]:void 0},static:!0}),Ze=Te.define(),Xe=Te.define(),$e=Te.define(),Qe=Te.define({combine:function(e){return!!e.length&&e[0]}}),Je=function(){function e(e,t){this.type=e,this.value=t}return e.define=function(){return new et},e}(),et=function(){function e(){}return e.prototype.of=function(e){return new Je(this,e)},e}(),tt=function(){function e(e){this.map=e}return e.prototype.of=function(e){return new nt(this,e)},e}(),nt=function(){function e(e,t){this.type=e,this.value=t}return e.prototype.map=function(t){var n=this.type.map(this.value,t);return void 0===n?void 0:n==this.value?this:new e(this.type,n)},e.prototype.is=function(e){return this.type==e},e.define=function(e){return void 0===e&&(e={}),new tt(e.map||function(e){return e})},e.mapEffects=function(e,t){if(!e.length)return e;for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i].map(t);o&&n.push(o)}return n},e}();nt.reconfigure=nt.define(),nt.appendConfig=nt.define();var it=function(){function e(t,n,i,r,o,a){this.startState=t,this.changes=n,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Se(i,n.newLength),o.some((function(t){return t.type==e.time}))||(this.annotations=o.concat(e.time.of(Date.now())))}return e.create=function(t,n,i,r,o,a){return new e(t,n,i,r,o,a)},Object.defineProperty(e.prototype,"newDoc",{get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newSelection",{get:function(){return this.selection||this.startState.selection.map(this.changes)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state||this.startState.applyTransaction(this),this._state},enumerable:!1,configurable:!0}),e.prototype.annotation=function(e){for(var t=0,n=this.annotations;t<n.length;t++){var i=n[t];if(i.type==e)return i.value}},Object.defineProperty(e.prototype,"docChanged",{get:function(){return!this.changes.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reconfigured",{get:function(){return this.startState.config!=this.state.config},enumerable:!1,configurable:!0}),e.prototype.isUserEvent=function(t){var n=this.annotation(e.userEvent);return!(!n||!(n==t||n.length>t.length&&n.slice(0,t.length)==t&&"."==n[t.length]))},e}();function rt(e,t){for(var n=[],i=0,r=0;;){var o=void 0,a=void 0;if(i<e.length&&(r==t.length||t[r]>=e[i]))o=e[i++],a=e[i++];else{if(!(r<t.length))return n;o=t[r++],a=t[r++]}!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function ot(e,t,n){var i,r,o,a;return n?(r=t.changes,o=ve.empty(t.changes.length),a=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),a=e.changes.compose(r)),{changes:a,selection:t.selection?t.selection.map(o):null===(i=e.selection)||void 0===i?void 0:i.map(r),effects:nt.mapEffects(e.effects,r).concat(nt.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function at(e,t,n){var i=t.selection,r=ct(t.annotations);return t.userEvent&&(r=r.concat(it.userEvent.of(t.userEvent))),{changes:t.changes instanceof ve?t.changes:ve.of(t.changes||[],n,e.facet(Ye)),selection:i&&(i instanceof Ee?i:Ee.single(i.anchor,i.head)),effects:ct(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function st(e,t,n){var i=at(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(var r=1;r<t.length;r++){!1===t[r].filter&&(n=!1);var o=!!t[r].sequential;i=ot(i,at(e,t[r],o?i.changes.newLength:e.doc.length),o)}var a=it.create(e,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){for(var t=e.startState,n=t.facet($e),i=e,r=n.length-1;r>=0;r--){var o=n[r](e);o&&Object.keys(o).length&&(i=ot(i,at(t,o,e.changes.newLength),!0))}return i==e?e:it.create(t,e.changes,e.selection,i.effects,i.annotations,i.scrollIntoView)}(n?function(e){for(var t=e.startState,n=!0,i=0,r=t.facet(Ze);i<r.length;i++){var o=(0,r[i])(e);if(!1===o){n=!1;break}Array.isArray(o)&&(n=!0===n?o:rt(n,o))}if(!0!==n){var a=void 0,s=void 0;if(!1===n)s=e.changes.invertedDesc,a=ve.empty(t.doc.length);else a=(u=e.changes.filter(n)).changes,s=u.filtered.mapDesc(u.changes).invertedDesc;e=it.create(t,a,e.selection&&e.selection.map(s),nt.mapEffects(e.effects,s),e.annotations,e.scrollIntoView)}for(var l=t.facet(Xe),c=l.length-1;c>=0;c--){var u;e=(u=l[c](e))instanceof it?u:Array.isArray(u)&&1==u.length&&u[0]instanceof it?u[0]:st(t,ct(u),!1)}return e}(a):a)}it.time=Je.define(),it.userEvent=Je.define(),it.addToHistory=Je.define(),it.remote=Je.define();var lt=[];function ct(e){return null==e?lt:Array.isArray(e)?e:[e]}var ut,ht=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(ht||(ht={})),dt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{ut=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function pt(e){return function(t){if(!/\S/.test(t))return ht.Space;if(function(e){if(ut)return ut.test(e);for(var t=0;t<e.length;t++){var n=e[t];if(/\w/.test(n)||n>"Â€"&&(n.toUpperCase()!=n.toLowerCase()||dt.test(n)))return!0}return!1}(t))return ht.Word;for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return ht.Word;return ht.Other}}var ft=function(){function e(e,t,n,i,r,o){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(var a=0;a<this.config.dynamicSlots.length;a++)We(this,a<<1);this.computeSlot=null}return e.prototype.field=function(e,t){void 0===t&&(t=!0);var n=this.config.address[e.id];if(null!=n)return We(this,n),je(this,n);if(t)throw new RangeError("Field is not present in this state")},e.prototype.update=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return st(this,e,!0)},e.prototype.applyTransaction=function(t){for(var n,i=this,r=this.config,o=r.base,a=r.compartments,s=0,l=t.effects;s<l.length;s++){var c=l[s];c.is(qe.reconfigure)?(r&&(a=new Map,r.compartments.forEach((function(e,t){return a.set(t,e)})),r=null),a.set(c.value.compartment,c.value.extension)):c.is(nt.reconfigure)?(r=null,o=c.value):c.is(nt.appendConfig)&&(r=null,o=ct(o).concat(c.value))}r?n=t.startState.values.slice():n=new e(r=_e.resolve(o,a,this),this.doc,this.selection,r.dynamicSlots.map((function(){return null})),(function(e,t){return t.reconfigure(e,i)}),null).values;var u=t.startState.facet(Ke)?t.newSelection:t.newSelection.asSingle();new e(r,t.newDoc,u,n,(function(e,n){return n.update(e,t)}),t)},e.prototype.replaceSelection=function(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((function(t){return{changes:{from:t.from,to:t.to,insert:e},range:Ee.cursor(t.from+e.length)}}))},e.prototype.changeByRange=function(e){for(var t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),r=[n.range],o=ct(n.effects),a=1;a<t.ranges.length;a++){for(var s=e(t.ranges[a]),l=this.changes(s.changes),c=l.map(i),u=0;u<a;u++)r[u]=r[u].map(c);var h=i.mapDesc(l,!0);r.push(s.range.map(h)),i=i.compose(c),o=nt.mapEffects(o,c).concat(nt.mapEffects(ct(s.effects),h))}return{changes:i,selection:Ee.create(r,t.mainIndex),effects:o}},e.prototype.changes=function(t){return void 0===t&&(t=[]),t instanceof ve?t:ve.of(t,this.doc.length,this.facet(e.lineSeparator))},e.prototype.toText=function(t){return J.of(t.split(this.facet(e.lineSeparator)||pe))},e.prototype.sliceDoc=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.doc.length),this.doc.sliceString(e,t,this.lineBreak)},e.prototype.facet=function(e){var t=this.config.address[e.id];return null==t?e.default:(We(this,t),je(this,t))},e.prototype.toJSON=function(e){var t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(var n in e){var i=e[n];i instanceof Fe&&null!=this.config.address[i.id]&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t},e.fromJSON=function(t,n,i){if(void 0===n&&(n={}),!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");var r=[];if(i){var o=function(e){if(Object.prototype.hasOwnProperty.call(t,e)){var n=i[e],o=t[e];r.push(n.init((function(e){return n.spec.fromJSON(o,e)})))}};for(var a in i)o(a)}return e.create({doc:t.doc,selection:Ee.fromJSON(t.selection),extensions:n.extensions?r.concat([n.extensions]):r})},e.create=function(t){void 0===t&&(t={});var n=_e.resolve(t.extensions||[],new Map),i=t.doc instanceof J?t.doc:J.of((t.doc||"").split(n.staticFacet(e.lineSeparator)||pe)),r=t.selection?t.selection instanceof Ee?t.selection:Ee.single(t.selection.anchor,t.selection.head):Ee.single(0);return Se(r,i.length),n.staticFacet(Ke)||(r=r.asSingle()),new e(n,i,r,n.dynamicSlots.map((function(){return null})),(function(e,t){return t.create(e)}),null)},Object.defineProperty(e.prototype,"tabSize",{get:function(){return this.facet(e.tabSize)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineBreak",{get:function(){return this.facet(e.lineSeparator)||"\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this.facet(Qe)},enumerable:!1,configurable:!0}),e.prototype.phrase=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var r=0,o=this.facet(e.phrases);r<o.length;r++){var a=o[r];if(Object.prototype.hasOwnProperty.call(a,t)){t=a[t];break}}return n.length&&(t=t.replace(/\$(\$|\d*)/g,(function(e,t){if("$"==t)return"$";var i=+(t||1);return!i||i>n.length?e:n[i-1]}))),t},e.prototype.languageDataAt=function(e,t,n){void 0===n&&(n=-1);for(var i=[],r=0,o=this.facet(Ge);r<o.length;r++)for(var a=0,s=(0,o[r])(this,t,n);a<s.length;a++){var l=s[a];Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e])}return i},e.prototype.charCategorizer=function(e){return pt(this.languageDataAt("wordChars",e).join(""))},e.prototype.wordAt=function(e){for(var t=this.doc.lineAt(e),n=t.text,i=t.from,r=t.length,o=this.charCategorizer(e),a=e-i,s=e-i;a>0;){var l=ce(n,a,!1);if(o(n.slice(l,a))!=ht.Word)break;a=l}for(;s<r;){var c=ce(n,s);if(o(n.slice(s,c))!=ht.Word)break;s=c}return a==s?null:Ee.range(a+i,s+i)},e}();function mt(e,t,n){void 0===n&&(n={});for(var i={},r=0,o=e;r<o.length;r++)for(var a=o[r],s=0,l=Object.keys(a);s<l.length;s++){var c=a[h=l[s]],u=i[h];if(void 0===u)i[h]=c;else if(u===c||void 0===c);else{if(!Object.hasOwnProperty.call(n,h))throw new Error("Config merge conflict for field "+h);i[h]=n[h](u,c)}}for(var h in t)void 0===i[h]&&(i[h]=t[h]);return i}ft.allowMultipleSelections=Ke,ft.tabSize=Te.define({combine:function(e){return e.length?e[0]:4}}),ft.lineSeparator=Ye,ft.readOnly=Qe,ft.phrases=Te.define({compare:function(e,t){var n=Object.keys(e),i=Object.keys(t);return n.length==i.length&&n.every((function(n){return e[n]==t[n]}))}}),ft.languageData=Ge,ft.changeFilter=Ze,ft.transactionFilter=Xe,ft.transactionExtender=$e,qe.reconfigure=nt.define();var vt=function(){function e(){}return e.prototype.eq=function(e){return this==e},e.prototype.range=function(e,t){return void 0===t&&(t=e),gt.create(e,t,this)},e}();vt.prototype.startSide=vt.prototype.endSide=0,vt.prototype.point=!1,vt.prototype.mapMode=fe.TrackDel;var gt=function(){function e(e,t,n){this.from=e,this.to=t,this.value=n}return e.create=function(t,n,i){return new e(t,n,i)},e}();function yt(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}var bt=function(){function e(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}return Object.defineProperty(e.prototype,"length",{get:function(){return this.to[this.to.length-1]},enumerable:!1,configurable:!0}),e.prototype.findIndex=function(e,t,n,i){void 0===i&&(i=0);for(var r=n?this.to:this.from,o=i,a=r.length;;){if(o==a)return o;var s=o+a>>1,l=r[s]-e||(n?this.value[s].endSide:this.value[s].startSide)-t;if(s==o)return l>=0?o:a;l>=0?a=s:o=s+1}},e.prototype.between=function(e,t,n,i){for(var r=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,r);r<o;r++)if(!1===i(this.from[r]+e,this.to[r]+e,this.value[r]))return!1},e.prototype.map=function(t,n){for(var i=[],r=[],o=[],a=-1,s=-1,l=0;l<this.value.length;l++){var c=this.value[l],u=this.from[l]+t,h=this.to[l]+t,d=void 0,p=void 0;if(u==h){var f=n.mapPos(u,c.startSide,c.mapMode);if(null==f)continue;if(d=p=f,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide))<d)continue}else if((d=n.mapPos(u,c.startSide))>(p=n.mapPos(h,c.endSide))||d==p&&c.startSide>0&&c.endSide<=0)continue;(p-d||c.endSide-c.startSide)<0||(a<0&&(a=d),c.point&&(s=Math.max(s,p-d)),i.push(c),r.push(d-a),o.push(p-a))}return{mapped:i.length?new e(r,o,i,s):null,pos:a}},e}(),wt=function(){function e(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}return e.create=function(t,n,i,r){return new e(t,n,i,r)},Object.defineProperty(e.prototype,"length",{get:function(){var e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.isEmpty)return 0;for(var e=this.nextLayer.size,t=0,n=this.chunk;t<n.length;t++){e+=n[t].value.length}return e},enumerable:!1,configurable:!0}),e.prototype.chunkEnd=function(e){return this.chunkPos[e]+this.chunk[e].length},e.prototype.update=function(t){var n=t.add,i=void 0===n?[]:n,r=t.sort,o=void 0!==r&&r,a=t.filterFrom,s=void 0===a?0:a,l=t.filterTo,c=void 0===l?this.length:l,u=t.filter;if(0==i.length&&!u)return this;if(o&&(i=i.slice().sort(yt)),this.isEmpty)return i.length?e.of(i):this;for(var h=new Mt(this,null,-1).goto(0),d=0,p=[],f=new kt;h.value||d<i.length;)if(d<i.length&&(h.from-i[d].from||h.startSide-i[d].value.startSide)>=0){var m=i[d++];f.addInner(m.from,m.to,m.value)||p.push(m)}else 1==h.rangeIndex&&h.chunkIndex<this.chunk.length&&(d==i.length||this.chunkEnd(h.chunkIndex)<i[d].from)&&(!u||s>this.chunkEnd(h.chunkIndex)||c<this.chunkPos[h.chunkIndex])&&f.addChunk(this.chunkPos[h.chunkIndex],this.chunk[h.chunkIndex])?h.nextChunk():((!u||s>h.to||c<h.from||u(h.from,h.to,h.value))&&(f.addInner(h.from,h.to,h.value)||p.push(gt.create(h.from,h.to,h.value))),h.next());return f.finishInner(this.nextLayer.isEmpty&&!p.length?e.empty:this.nextLayer.update({add:p,filter:u,filterFrom:s,filterTo:c}))},e.prototype.map=function(t){if(t.empty||this.isEmpty)return this;for(var n=[],i=[],r=-1,o=0;o<this.chunk.length;o++){var a=this.chunkPos[o],s=this.chunk[o],l=t.touchesRange(a,a+s.length);if(!1===l)r=Math.max(r,s.maxPoint),n.push(s),i.push(t.mapPos(a));else if(!0===l){var c=s.map(a,t),u=c.mapped,h=c.pos;u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(h))}}var d=this.nextLayer.map(t);return 0==n.length?d:new e(i,n,d||e.empty,r)},e.prototype.between=function(e,t,n){if(!this.isEmpty){for(var i=0;i<this.chunk.length;i++){var r=this.chunkPos[i],o=this.chunk[i];if(t>=r&&e<=r+o.length&&!1===o.between(r,e-r,t-r,n))return}this.nextLayer.between(e,t,n)}},e.prototype.iter=function(e){return void 0===e&&(e=0),Et.from([this]).goto(e)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.nextLayer==this},enumerable:!1,configurable:!0}),e.iter=function(e,t){return void 0===t&&(t=0),Et.from(e).goto(t)},e.compare=function(e,t,n,i,r){void 0===r&&(r=-1);var o=e.filter((function(e){return e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r})),a=t.filter((function(e){return e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r})),s=Ct(o,a,n),l=new xt(o,s,r),c=new xt(a,s,r);n.iterGaps((function(e,t,n){return Tt(l,e,c,t,n,i)})),n.empty&&0==n.length&&Tt(l,0,c,0,0,i)},e.eq=function(e,t,n,i){void 0===n&&(n=0),null==i&&(i=999999999);var r=e.filter((function(e){return!e.isEmpty&&t.indexOf(e)<0})),o=t.filter((function(t){return!t.isEmpty&&e.indexOf(t)<0}));if(r.length!=o.length)return!1;if(!r.length)return!0;for(var a=Ct(r,o),s=new xt(r,a,0).goto(n),l=new xt(o,a,0).goto(n);;){if(s.to!=l.to||!Dt(s.active,l.active)||s.point&&(!l.point||!s.point.eq(l.point)))return!1;if(s.to>i)return!0;s.next(),l.next()}},e.spans=function(e,t,n,i,r){void 0===r&&(r=-1);for(var o=new xt(e,null,r).goto(t),a=t,s=o.openStart;;){var l=Math.min(o.to,n);if(o.point){var c=o.activeForPoint(o.to),u=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,s);i.point(a,l,o.point,c,u,o.pointRank),s=Math.min(o.openEnd(l),c.length)}else l>a&&(i.span(a,l,o.active,s),s=o.openEnd(l));if(o.to>n)return s+(o.point&&o.to>n?1:0);a=o.to,o.next()}},e.of=function(e,t){void 0===t&&(t=!1);for(var n=new kt,i=0,r=e instanceof gt?[e]:t?function(e){if(e.length>1)for(var t=e[0],n=1;n<e.length;n++){var i=e[n];if(yt(t,i)>0)return e.slice().sort(yt);t=i}return e}(e):e;i<r.length;i++){var o=r[i];n.add(o.from,o.to,o.value)}return n.finish()},e.join=function(t){if(!t.length)return e.empty;for(var n=t[t.length-1],i=t.length-2;i>=0;i--)for(var r=t[i];r!=e.empty;r=r.nextLayer)n=new e(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n},e}();wt.empty=new wt([],[],null,-1),wt.empty.nextLayer=wt.empty;var kt=function(){function e(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}return e.prototype.finishChunk=function(e){this.chunks.push(new bt(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])},e.prototype.add=function(t,n,i){this.addInner(t,n,i)||(this.nextLayer||(this.nextLayer=new e)).add(t,n,i)},e.prototype.addInner=function(e,t,n){var i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)},e.prototype.addChunk=function(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);var n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0},e.prototype.finish=function(){return this.finishInner(wt.empty)},e.prototype.finishInner=function(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;var t=wt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t},e}();function Ct(e,t,n){for(var i=new Map,r=0,o=e;r<o.length;r++)for(var a=o[r],s=0;s<a.chunk.length;s++)a.chunk[s].maxPoint<=0&&i.set(a.chunk[s],a.chunkPos[s]);for(var l=new Set,c=0,u=t;c<u.length;c++)for(a=u[c],s=0;s<a.chunk.length;s++){var h=i.get(a.chunk[s]);null==h||(n?n.mapPos(h):h)!=a.chunkPos[s]||(null==n?void 0:n.touchesRange(h,h+a.chunk[s].length))||l.add(a.chunk[s])}return l}var Mt=function(){function e(e,t,n,i){void 0===i&&(i=0),this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}return Object.defineProperty(e.prototype,"startSide",{get:function(){return this.value?this.value.startSide:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endSide",{get:function(){return this.value?this.value.endSide:0},enumerable:!1,configurable:!0}),e.prototype.goto=function(e,t){return void 0===t&&(t=-1e9),this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this},e.prototype.gotoInner=function(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){var i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){var r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()},e.prototype.forward=function(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)},e.prototype.next=function(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}var e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}},e.prototype.setRangeIndex=function(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e},e.prototype.nextChunk=function(){this.chunkIndex++,this.rangeIndex=0,this.next()},e.prototype.compare=function(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide},e}(),Et=function(){function e(e){this.heap=e}return e.from=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=-1);for(var r=[],o=0;o<t.length;o++)for(var a=t[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&r.push(new Mt(a,n,i,o));return 1==r.length?r[0]:new e(r)},Object.defineProperty(e.prototype,"startSide",{get:function(){return this.value?this.value.startSide:0},enumerable:!1,configurable:!0}),e.prototype.goto=function(e,t){void 0===t&&(t=-1e9);for(var n=0,i=this.heap;n<i.length;n++){i[n].goto(e,t)}for(var r=this.heap.length>>1;r>=0;r--)St(this.heap,r);return this.next(),this},e.prototype.forward=function(e,t){for(var n=0,i=this.heap;n<i.length;n++){i[n].forward(e,t)}for(var r=this.heap.length>>1;r>=0;r--)St(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()},e.prototype.next=function(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{var e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),St(this.heap,0)}},e}();function St(e,t){for(var n=e[t];;){var i=1+(t<<1);if(i>=e.length)break;var r=e[i];if(i+1<e.length&&r.compare(e[i+1])>=0&&(r=e[i+1],i++),n.compare(r)<0)break;e[i]=n,e[t]=r,t=i}}var xt=function(){function e(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Et.from(e,t,n)}return e.prototype.goto=function(e,t){return void 0===t&&(t=-1e9),this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this},e.prototype.forward=function(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)},e.prototype.removeActive=function(e){At(this.active,e),At(this.activeTo,e),At(this.activeRank,e),this.minActive=Pt(this.active,this.activeTo)},e.prototype.addActive=function(e){for(var t=0,n=this.cursor,i=n.value,r=n.to,o=n.rank;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;Lt(this.active,t,i),Lt(this.activeTo,t,r),Lt(this.activeRank,t,o),e&&Lt(e,t,this.cursor.from),this.minActive=Pt(this.active,this.activeTo)},e.prototype.next=function(){var e=this.to,t=this.point;this.point=null;for(var n=this.openStart<0?[]:null;;){var i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&At(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}var r=this.cursor.value;if(r.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}if(n){this.openStart=0;for(var o=n.length-1;o>=0&&n[o]<e;o--)this.openStart++}},e.prototype.activeForPoint=function(e){if(!this.active.length)return this.active;for(var t=[],n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()},e.prototype.openEnd=function(e){for(var t=0,n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t},e}();function Tt(e,t,n,i,r,o){e.goto(t),n.goto(i);for(var a=i+r,s=i,l=i-t;;){var c=e.to+l-n.to,u=c||e.endSide-n.endSide,h=u<0?e.to+l:n.to,d=Math.min(h,a);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&Dt(e.activeForPoint(e.to),n.activeForPoint(n.to))||o.comparePoint(s,d,e.point,n.point):d>s&&!Dt(e.active,n.active)&&o.compareRange(s,d,e.active,n.active),h>a)break;(c||e.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(h),s=h,u<=0&&e.next(),u>=0&&n.next()}}function Dt(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function At(e,t){for(var n=t,i=e.length-1;n<i;n++)e[n]=e[n+1];e.pop()}function Lt(e,t,n){for(var i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=n}function Pt(e,t){for(var n=-1,i=1e9,r=0;r<t.length;r++)(t[r]-i||e[r].endSide-e[n].endSide)<0&&(n=r,i=t[r]);return n}function It(e,t,n){void 0===n&&(n=e.length);for(var i=0,r=0;r<n;)9==e.charCodeAt(r)?(i+=t-i%t,r++):(i++,r=ce(e,r));return i}function Ft(e,t,n,i){for(var r=0,o=0;;){if(o>=t)return r;if(r==e.length)break;o+=9==e.charCodeAt(r)?n-o%n:1,r=ce(e,r)}return!0===i?-1:e.length}const Ot="undefined"==typeof Symbol?"__Í¼":Symbol.for("Í¼"),Bt="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Nt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Rt{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function r(e,t,o,a){let s=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let a=t[n];if(/&/.test(n))r(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),a,o);else if(a&&"object"==typeof a){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");r(i(n),a,s,c)}else null!=a&&s.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+a+";")}(s.length||c)&&o.push((!n||l||a?e:e.map(n)).join(", ")+" {"+s.join(" ")+"}")}for(let t in e)r(i(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Nt[Ot]||1;return Nt[Ot]=e+1,"Í¼"+e.toString(36)}static mount(e,t,n){let i=e[Bt],r=n&&n.nonce;i?r&&i.setNonce(r):i=new Vt(e,r),i.mount(Array.isArray(t)?t:[t],e)}}let Ht=new Map;class Vt{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let t=Ht.get(n);if(t)return e[Bt]=t;this.sheet=new i.CSSStyleSheet,Ht.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Bt]=this}mount(e,t){let n=this.sheet,i=0,r=0;for(let t=0;t<e.length;t++){let o=e[t],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),-1==a){if(this.modules.splice(r++,0,o),n)for(let e=0;e<o.rules.length;e++)n.insertRule(o.rules[e],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var zt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qt={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ut="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),_t="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Wt=0;Wt<10;Wt++)zt[48+Wt]=zt[96+Wt]=String(Wt);for(Wt=1;Wt<=24;Wt++)zt[Wt+111]="F"+Wt;for(Wt=65;Wt<=90;Wt++)zt[Wt]=String.fromCharCode(Wt+32),qt[Wt]=String.fromCharCode(Wt);for(var jt in zt)qt.hasOwnProperty(jt)||(qt[jt]=zt[jt]);function Gt(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function Kt(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function Yt(e,t){if(!t||!t.anchorNode)return!1;try{return Kt(e,t.anchorNode)}catch(e){return!1}}function Zt(e){return 3==e.nodeType?cn(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Xt(e,t,n,i){return!!n&&(Jt(e,t,n,i,-1)||Jt(e,t,n,i,1))}function $t(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function Qt(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function Jt(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:en(e))){if("DIV"==e.nodeName)return!1;var o=e.parentNode;if(!o||1!=o.nodeType)return!1;t=$t(e)+(r<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(r<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=r<0?en(e):0}}}function en(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function tn(e,t){var n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function nn(e){var t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function rn(e,t){var n=t.width/e.offsetWidth,i=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-e.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}var on,an=function(){function e(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return e.prototype.eq=function(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset},e.prototype.setRange=function(e){var t=e.anchorNode,n=e.focusNode;this.set(t,Math.min(e.anchorOffset,t?en(t):0),n,Math.min(e.focusOffset,n?en(n):0))},e.prototype.set=function(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i},e}(),sn=null;function ln(e){if(e.setActive)return e.setActive();if(sn)return e.focus(sn);for(var t=[],n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==sn?{get preventScroll(){return sn={preventScroll:!0},!0}}:void 0),!sn){sn=!1;for(var i=0;i<t.length;){var r=t[i++],o=t[i++],a=t[i++];r.scrollTop!=o&&(r.scrollTop=o),r.scrollLeft!=a&&(r.scrollLeft=a)}}}function cn(e,t,n){void 0===n&&(n=t);var i=on||(on=document.createRange());return i.setEnd(e,n),i.setStart(e,t),i}function un(e,t,n,i){var r={key:t,code:t,keyCode:n,which:n,cancelable:!0};i&&(r.altKey=i.altKey,r.ctrlKey=i.ctrlKey,r.shiftKey=i.shiftKey,r.metaKey=i.metaKey);var o=new KeyboardEvent("keydown",r);o.synthetic=!0,e.dispatchEvent(o);var a=new KeyboardEvent("keyup",r);return a.synthetic=!0,e.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function hn(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function dn(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function pn(e,t){for(var n=e,i=t;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;i=en(n=n.childNodes[i-1])}else{if(!n.parentNode||Qt(n))return null;i=$t(n),n=n.parentNode}}}function fn(e,t){for(var n=e,i=t;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||Qt(n))return null;i=$t(n)+1,n=n.parentNode}}}var mn=function(){function e(e,t,n){void 0===n&&(n=!0),this.node=e,this.offset=t,this.precise=n}return e.before=function(t,n){return new e(t.parentNode,$t(t),n)},e.after=function(t,n){return new e(t.parentNode,$t(t)+1,n)},e}(),vn=[],gn=function(){function e(){this.parent=null,this.dom=null,this.flags=2}return Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posAtStart",{get:function(){return this.parent?this.parent.posBefore(this):0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posAtEnd",{get:function(){return this.posAtStart+this.length},enumerable:!1,configurable:!0}),e.prototype.posBefore=function(e){for(var t=this.posAtStart,n=0,i=this.children;n<i.length;n++){var r=i[n];if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")},e.prototype.posAfter=function(e){return this.posBefore(e)+e.length},e.prototype.sync=function(t,n){if(2&this.flags){for(var i=this.dom,r=null,o=void 0,a=0,s=this.children;a<s.length;a++){if(7&(h=s[a]).flags){if(!h.dom&&(o=r?r.nextSibling:i.firstChild)){var l=e.get(o);(!l||!l.parent&&l.canReuseDOM(h))&&h.reuseDOM(o)}h.sync(t,n),h.flags&=-8}if(o=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&o!=h.dom&&(n.written=!0),h.dom.parentNode==i)for(;o&&o!=h.dom;)o=yn(o);else i.insertBefore(h.dom,o);r=h.dom}for((o=r?r.nextSibling:i.firstChild)&&n&&n.node==i&&(n.written=!0);o;)o=yn(o)}else if(1&this.flags)for(var c=0,u=this.children;c<u.length;c++){var h;7&(h=u[c]).flags&&(h.sync(t,n),h.flags&=-8)}},e.prototype.reuseDOM=function(e){},e.prototype.localPosFromDOM=function(t,n){var i;if(t==this.dom)i=this.dom.childNodes[n];else{for(var r=0==en(t)?0:0==n?-1:1;;){var o=t.parentNode;if(o==this.dom)break;0==r&&o.firstChild!=o.lastChild&&(r=t==o.firstChild?-1:1),t=o}i=r<0?t:t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!e.get(i);)i=i.nextSibling;if(!i)return this.length;for(var a=0,s=0;;a++){var l=this.children[a];if(l.dom==i)return s;s+=l.length+l.breakAfter}},e.prototype.domBoundsAround=function(e,t,n){void 0===n&&(n=0);for(var i=-1,r=-1,o=-1,a=-1,s=0,l=n,c=n;s<this.children.length;s++){var u=this.children[s],h=l+u.length;if(l<e&&h>t)return u.domBoundsAround(e,t,l);if(h>=e&&-1==i&&(i=s,r=l),l>t&&u.dom.parentNode==this.dom){o=s,a=c;break}c=h,l=h+u.breakAfter}return{from:r,to:a<0?n+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}},e.prototype.markDirty=function(e){void 0===e&&(e=!1),this.flags|=2,this.markParentsDirty(e)},e.prototype.markParentsDirty=function(e){for(var t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}},e.prototype.setParent=function(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))},e.prototype.setDOM=function(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)},Object.defineProperty(e.prototype,"rootView",{get:function(){for(var e=this;;){var t=e.parent;if(!t)return e;e=t}},enumerable:!1,configurable:!0}),e.prototype.replaceChildren=function(e,t,n){var i;void 0===n&&(n=vn),this.markDirty();for(var r=e;r<t;r++){var o=this.children[r];o.parent==this&&n.indexOf(o)<0&&o.destroy()}n.length<250?(i=this.children).splice.apply(i,w([e,t-e],n,!1)):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(r=0;r<n.length;r++)n[r].setParent(this)},e.prototype.ignoreMutation=function(e){return!1},e.prototype.ignoreEvent=function(e){return!1},e.prototype.childCursor=function(e){return void 0===e&&(e=this.length),new bn(this.children,e,this.children.length)},e.prototype.childPos=function(e,t){return void 0===t&&(t=1),this.childCursor().findPos(e,t)},e.prototype.toString=function(){var e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")},e.get=function(e){return e.cmView},Object.defineProperty(e.prototype,"isEditable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWidget",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.merge=function(e,t,n,i,r,o){return!1},e.prototype.become=function(e){return!1},e.prototype.canReuseDOM=function(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))},e.prototype.getSide=function(){return 0},e.prototype.destroy=function(){for(var e=0,t=this.children;e<t.length;e++){var n=t[e];n.parent==this&&n.destroy()}this.parent=null},e}();function yn(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}gn.prototype.breakAfter=0;var bn=function(){function e(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}return e.prototype.findPos=function(e,t){for(void 0===t&&(t=1);;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;var n=this.children[--this.i];this.pos-=n.length+n.breakAfter}},e}();function wn(e,t,n,i,r,o,a,s,l){var c=e.children,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:a;if(!(t==i&&u&&!a&&!d&&o.length<2&&u.merge(n,r,o.length?h:null,0==n,s,l))){if(i<c.length){var p=c[i];p&&(r<p.length||p.breakAfter&&(null==h?void 0:h.breakAfter))?(t==i&&(p=p.split(r),r=0),!d&&h&&p.merge(0,r,h,!0,0,l)?o[o.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),o.push(p))):(null==p?void 0:p.breakAfter)&&(h?h.breakAfter=1:a=1),i++}for(u&&(u.breakAfter=a,n>0&&(!a&&o.length&&u.merge(n,u.length,o[0],!1,s,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,s,0),t++));t<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:s;else{if(!c[t].become(o[0]))break;t++,o.shift(),s=o.length?0:l}!o.length&&t&&i<c.length&&!c[t-1].breakAfter&&c[i].merge(0,0,c[t-1],!1,s,l)&&t--,(t<i||o.length)&&e.replaceChildren(t,i,o)}}function kn(e,t,n,i,r,o){for(var a=e.childCursor(),s=a.findPos(n,1),l=s.i,c=s.off,u=a.findPos(t,-1),h=u.i,d=u.off,p=t-n,f=0,m=i;f<m.length;f++){p+=m[f].length}e.length+=p,wn(e,h,d,l,c,i,0,r,o)}var Cn="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Mn="undefined"!=typeof document?document:{documentElement:{style:{}}},En=/Edge\/(\d+)/.exec(Cn.userAgent),Sn=/MSIE \d/.test(Cn.userAgent),xn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Cn.userAgent),Tn=!!(Sn||xn||En),Dn=!Tn&&/gecko\/(\d+)/i.test(Cn.userAgent),An=!Tn&&/Chrome\/(\d+)/.exec(Cn.userAgent),Ln="webkitFontSmoothing"in Mn.documentElement.style,Pn=!Tn&&/Apple Computer/.test(Cn.vendor),In=Pn&&(/Mobile\/\w+/.test(Cn.userAgent)||Cn.maxTouchPoints>2),Fn={mac:In||/Mac/.test(Cn.platform),windows:/Win/.test(Cn.platform),linux:/Linux|X11/.test(Cn.platform),ie:Tn,ie_version:Sn?Mn.documentMode||6:xn?+xn[1]:En?+En[1]:0,gecko:Dn,gecko_version:Dn?+(/Firefox\/(\d+)/.exec(Cn.userAgent)||[0,0])[1]:0,chrome:!!An,chrome_version:An?+An[1]:0,ios:In,android:/Android\b/.test(Cn.userAgent),webkit:Ln,safari:Pn,webkit_version:Ln?+(/\bAppleWebKit\/(\d+)/.exec(Cn.userAgent)||[0,0])[1]:0,tabSize:null!=Mn.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},On=function(e){function t(t){var n=e.call(this)||this;return n.text=t,n}return f(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.text.length},enumerable:!1,configurable:!0}),t.prototype.createDOM=function(e){this.setDOM(e||document.createTextNode(this.text))},t.prototype.sync=function(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)},t.prototype.reuseDOM=function(e){3==e.nodeType&&this.createDOM(e)},t.prototype.merge=function(e,n,i){return!(8&this.flags||i&&(!(i instanceof t)||this.length-(n-e)+i.length>256||8&i.flags))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)},t.prototype.split=function(e){var n=new t(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=8&this.flags,n},t.prototype.localPosFromDOM=function(e,t){return e==this.dom?t:t?this.text.length:0},t.prototype.domAtPos=function(e){return new mn(this.dom,e)},t.prototype.domBoundsAround=function(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}},t.prototype.coordsAt=function(e,t){return function(e,t,n){var i=e.nodeValue.length;t>i&&(t=i);var r=t,o=t,a=0;0==t&&n<0||t==i&&n>=0?Fn.chrome||Fn.gecko||(t?(r--,a=1):o<i&&(o++,a=-1)):n<0?r--:o<i&&o++;var s=cn(e,r,o).getClientRects();if(!s.length)return null;var l=s[(a?a<0:n>=0)?0:s.length-1];Fn.safari&&!a&&0==l.width&&(l=Array.prototype.find.call(s,(function(e){return e.width}))||l);return a?tn(l,a<0):l||null}(this.dom,e,t)},t}(gn),Bn=function(e){function t(t,n,i){void 0===n&&(n=[]),void 0===i&&(i=0);var r=e.call(this)||this;r.mark=t,r.children=n,r.length=i;for(var o=0,a=n;o<a.length;o++){a[o].setParent(r)}return r}return f(t,e),t.prototype.setAttrs=function(e){if(hn(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(var t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e},t.prototype.canReuseDOM=function(t){return e.prototype.canReuseDOM.call(this,t)&&!(8&(this.flags|t.flags))},t.prototype.reuseDOM=function(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)},t.prototype.sync=function(t,n){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),e.prototype.sync.call(this,t,n)},t.prototype.merge=function(e,n,i,r,o,a){return(!i||!(!(i instanceof t&&i.mark.eq(this.mark))||e&&o<=0||n<this.length&&a<=0))&&(kn(this,e,n,i?i.children.slice():[],o-1,a-1),this.markDirty(),!0)},t.prototype.split=function(e){for(var n=[],i=0,r=-1,o=0,a=0,s=this.children;a<s.length;a++){var l=s[a],c=i+l.length;c>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=o),i=c,o++}var u=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new t(this.mark,n,u)},t.prototype.domAtPos=function(e){return Hn(this,e)},t.prototype.coordsAt=function(e,t){return zn(this,e,t)},t}(gn);var Nn=function(e){function t(t,n,i){var r=e.call(this)||this;return r.widget=t,r.length=n,r.side=i,r.prevWidget=null,r}return f(t,e),t.create=function(e,n,i){return new t(e,n,i)},t.prototype.split=function(e){var n=t.create(this.widget,this.length-e,this.side);return this.length-=e,n},t.prototype.sync=function(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))},t.prototype.getSide=function(){return this.side},t.prototype.merge=function(e,n,i,r,o,a){return!(i&&(!(i instanceof t&&this.widget.compare(i.widget))||e>0&&o<=0||n<this.length&&a<=0))&&(this.length=e+(i?i.length:0)+(this.length-n),!0)},t.prototype.become=function(e){return!this.widget.noReuse&&e instanceof t&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)?this.dom&&e.widget.become(this.dom,this.widget):this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)},t.prototype.ignoreMutation=function(){return!0},t.prototype.ignoreEvent=function(e){return this.widget.ignoreEvent(e)},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){if(0==this.length)return J.empty;for(var e=this;e.parent;)e=e.parent;var t=e.view,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):J.empty},enumerable:!1,configurable:!0}),t.prototype.domAtPos=function(e){return(this.length?0==e:this.side>0)?mn.before(this.dom):mn.after(this.dom,e==this.length)},t.prototype.domBoundsAround=function(){return null},t.prototype.coordsAt=function(e,t){var n=this.widget.coordsAt(this.dom,e,t);if(n)return n;var i=this.dom.getClientRects(),r=null;if(!i.length)return null;for(var o=this.side?this.side<0:e>0,a=o?i.length-1:0;r=i[a],!(e>0?0==a:a==i.length-1||r.top<r.bottom);a+=o?-1:1);return tn(r,!o)},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWidget",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this.widget.isHidden},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.dom&&this.widget.destroy(this.dom)},t}(gn),Rn=function(e){function t(t){var n=e.call(this)||this;return n.side=t,n}return f(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.merge=function(){return!1},t.prototype.become=function(e){return e instanceof t&&e.side==this.side},t.prototype.split=function(){return new t(this.side)},t.prototype.sync=function(){if(!this.dom){var e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}},t.prototype.getSide=function(){return this.side},t.prototype.domAtPos=function(e){return this.side>0?mn.before(this.dom):mn.after(this.dom)},t.prototype.localPosFromDOM=function(){return 0},t.prototype.domBoundsAround=function(){return null},t.prototype.coordsAt=function(e){return this.dom.getBoundingClientRect()},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return J.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(gn);function Hn(e,t){for(var n=e.dom,i=e.children,r=0,o=0;r<i.length;r++){var a=i[r],s=o+a.length;if(!(s==o&&a.getSide()<=0)){if(t>o&&t<s&&a.dom.parentNode==n)return a.domAtPos(t-o);if(t<=o)break;o=s}}for(var l=r;l>0;l--){var c=i[l-1];if(c.dom.parentNode==n)return c.domAtPos(c.length)}for(l=r;l<i.length;l++){var u=i[l];if(u.dom.parentNode==n)return u.domAtPos(0)}return new mn(n,0)}function Vn(e,t,n){var i,r=e.children;n>0&&t instanceof Bn&&r.length&&(i=r[r.length-1])instanceof Bn&&i.mark.eq(t.mark)?Vn(i,t.children[0],n-1):(r.push(t),t.setParent(e)),e.length+=t.length}function zn(e,t,n){var i=null,r=-1,o=null,a=-1;!function e(t,s){for(var l=0,c=0;l<t.children.length&&c<=s;l++){var u=t.children[l],h=c+u.length;h>=s&&(u.children.length?e(u,s-c):(!o||o.isHidden&&n>0)&&(h>s||c==h&&u.getSide()>0)?(o=u,a=s-c):(c<s||c==h&&u.getSide()<0&&!u.isHidden)&&(i=u,r=s-c)),c=h}}(e,t);var s=(n<0?i:o)||i||o;return s?s.coordsAt(Math.max(0,s==i?r:a),n):function(e){var t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();var n=Zt(t);return n[n.length-1]||null}(e)}function qn(e,t){for(var n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}On.prototype.children=Nn.prototype.children=Rn.prototype.children=vn;var Un=Object.create(null);function _n(e,t,n){if(e==t)return!0;e||(e=Un),t||(t=Un);var i=Object.keys(e),r=Object.keys(t);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(var o=0,a=i;o<a.length;o++){var s=a[o];if(s!=n&&(-1==r.indexOf(s)||e[s]!==t[s]))return!1}return!0}function Wn(e,t,n){var i=!1;if(t)for(var r in t)n&&r in n||(i=!0,"style"==r?e.style.cssText="":e.removeAttribute(r));if(n)for(var r in n)t&&t[r]==n[r]||(i=!0,"style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i}function jn(e){for(var t=Object.create(null),n=0;n<e.attributes.length;n++){var i=e.attributes[n];t[i.name]=i.value}return t}var Gn=function(){function e(){}return e.prototype.eq=function(e){return!1},e.prototype.updateDOM=function(e,t){return!1},e.prototype.become=function(e,t){},e.prototype.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineBreaks",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.ignoreEvent=function(e){return!0},e.prototype.coordsAt=function(e,t,n){return null},Object.defineProperty(e.prototype,"isHidden",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noReuse",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){},e}(),Kn=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Kn||(Kn={})),Yn=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.startSide=t,o.endSide=n,o.widget=i,o.spec=r,o}return f(t,e),Object.defineProperty(t.prototype,"heightRelevant",{get:function(){return!1},enumerable:!1,configurable:!0}),t.mark=function(e){return new Zn(e)},t.widget=function(e){var t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new $n(e,t,t,n,e.widget||null,!1)},t.replace=function(e){var t,n,i=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{var r=Qn(e,i);t=(r.start?i?-3e8:-1:5e8)-1,n=1+(r.end?i?2e8:1:-6e8)}return new $n(e,t,n,i,e.widget||null,!0)},t.line=function(e){return new Xn(e)},t.set=function(e,t){return void 0===t&&(t=!1),wt.of(e,t)},t.prototype.hasHeight=function(){return!!this.widget&&this.widget.estimatedHeight>-1},t}(vt);Yn.none=wt.empty;var Zn=function(e){function t(t){var n=this,i=Qn(t),r=i.start,o=i.end;return(n=e.call(this,r?-1:5e8,o?1:-6e8,null,t)||this).tagName=t.tagName||"span",n.class=t.class||"",n.attrs=t.attributes||null,n}return f(t,e),t.prototype.eq=function(e){var n,i;return this==e||e instanceof t&&this.tagName==e.tagName&&(this.class||(null===(n=this.attrs)||void 0===n?void 0:n.class))==(e.class||(null===(i=e.attrs)||void 0===i?void 0:i.class))&&_n(this.attrs,e.attrs,"class")},t.prototype.range=function(t,n){if(void 0===n&&(n=t),t>=n)throw new RangeError("Mark decorations may not be empty");return e.prototype.range.call(this,t,n)},t}(Yn);Zn.prototype.point=!1;var Xn=function(e){function t(t){return e.call(this,-2e8,-2e8,null,t)||this}return f(t,e),t.prototype.eq=function(e){return e instanceof t&&this.spec.class==e.spec.class&&_n(this.spec.attributes,e.spec.attributes)},t.prototype.range=function(t,n){if(void 0===n&&(n=t),n!=t)throw new RangeError("Line decoration ranges must be zero-length");return e.prototype.range.call(this,t,n)},t}(Yn);Xn.prototype.mapMode=fe.TrackBefore,Xn.prototype.point=!0;var $n=function(e){function t(t,n,i,r,o,a){var s=e.call(this,n,i,o,t)||this;return s.block=r,s.isReplace=a,s.mapMode=r?n<=0?fe.TrackBefore:fe.TrackAfter:fe.TrackDel,s}return f(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.startSide!=this.endSide?Kn.WidgetRange:this.startSide<=0?Kn.WidgetBefore:Kn.WidgetAfter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heightRelevant",{get:function(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)},enumerable:!1,configurable:!0}),t.prototype.eq=function(e){return e instanceof t&&(n=this.widget,i=e.widget,n==i||!!(n&&i&&n.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var n,i},t.prototype.range=function(t,n){if(void 0===n&&(n=t),this.isReplace&&(t>n||t==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return e.prototype.range.call(this,t,n)},t}(Yn);function Qn(e,t){void 0===t&&(t=!1);var n=e.inclusiveStart,i=e.inclusiveEnd;return null==n&&(n=e.inclusive),null==i&&(i=e.inclusive),{start:null!=n?n:t,end:null!=i?i:t}}function Jn(e,t,n,i){void 0===i&&(i=0);var r=n.length-1;r>=0&&n[r]+i>=e?n[r]=Math.max(n[r],t):n.push(e,t)}$n.prototype.point=!0;var ei=function(e){function t(){var t=e.apply(this,arguments)||this;return t.children=[],t.length=0,t.prevAttrs=void 0,t.attrs=null,t.breakAfter=0,t}return f(t,e),t.prototype.merge=function(e,n,i,r,o,a){if(i){if(!(i instanceof t))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),kn(this,e,n,i?i.children.slice():[],o,a),!0},t.prototype.split=function(e){var n=new t;if(n.breakAfter=this.breakAfter,0==this.length)return n;var i=this.childPos(e),r=i.i,o=i.off;o&&(n.append(this.children[r].split(o),0),this.children[r].merge(o,this.children[r].length,null,!1,0,0),r++);for(var a=r;a<this.children.length;a++)n.append(this.children[a],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n},t.prototype.transferDOM=function(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)},t.prototype.setDeco=function(e){_n(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)},t.prototype.append=function(e,t){Vn(this,e,t)},t.prototype.addLineDeco=function(e){var t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=qn(t,this.attrs||{})),n&&(this.attrs=qn({class:n},this.attrs||{}))},t.prototype.domAtPos=function(e){return Hn(this,e)},t.prototype.reuseDOM=function(e){"DIV"==e.nodeName&&e.classList.contains("cm-view")&&(this.setDOM(e),this.flags|=6)},t.prototype.sync=function(t,n){var i;this.dom?4&this.flags&&(hn(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Wn(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),e.prototype.sync.call(this,t,n);for(var r=this.dom.lastChild;r&&gn.get(r)instanceof Bn;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(i=gn.get(r))||void 0===i?void 0:i.isEditable)||Fn.ios&&this.children.some((function(e){return e instanceof On}))))){var o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}},t.prototype.measureTextSize=function(){if(0==this.children.length||this.length>20)return null;for(var e,t=0,n=0,i=this.children;n<i.length;n++){var r=i[n];if(!(r instanceof On)||/[^ -~]/.test(r.text))return null;var o=Zt(r.dom);if(1!=o.length)return null;t+=o[0].width,e=o[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null},t.prototype.coordsAt=function(e,t){var n=zn(this,e,t);if(!this.children.length&&n&&this.parent){var i=this.parent.view.viewState.heightOracle,r=n.bottom-n.top;if(Math.abs(r-i.lineHeight)<2&&i.textHeight<r){var o=(r-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n},t.prototype.become=function(e){return e instanceof t&&0==this.children.length&&0==e.children.length&&_n(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter},t.prototype.covers=function(){return!0},t.find=function(e,n){for(var i=0,r=0;i<e.children.length;i++){var o=e.children[i],a=r+o.length;if(a>=n){if(o instanceof t)return o;if(a>n)break}r=a+o.breakAfter}return null},t}(gn),ti=function(e){function t(t,n,i){var r=e.call(this)||this;return r.widget=t,r.length=n,r.deco=i,r.breakAfter=0,r.prevWidget=null,r}return f(t,e),t.prototype.merge=function(e,n,i,r,o,a){return!(i&&(!(i instanceof t&&this.widget.compare(i.widget))||e>0&&o<=0||n<this.length&&a<=0))&&(this.length=e+(i?i.length:0)+(this.length-n),!0)},t.prototype.domAtPos=function(e){return 0==e?mn.before(this.dom):mn.after(this.dom,e==this.length)},t.prototype.split=function(e){var n=this.length-e;this.length=e;var i=new t(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i},Object.defineProperty(t.prototype,"children",{get:function(){return vn},enumerable:!1,configurable:!0}),t.prototype.sync=function(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):J.empty},enumerable:!1,configurable:!0}),t.prototype.domBoundsAround=function(){return null},t.prototype.become=function(e){return!this.widget.noReuse&&e instanceof t&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)?this.dom&&e.widget.become(this.dom,this.widget):this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)},t.prototype.ignoreMutation=function(){return!0},t.prototype.ignoreEvent=function(e){return this.widget.ignoreEvent(e)},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWidget",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.coordsAt=function(e,t){var n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof ni?null:tn(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.dom&&this.widget.destroy(this.dom)},t.prototype.covers=function(e){var t=this.deco,n=t.startSide,i=t.endSide;return n!=i&&(e<0?n<0:i>0)},t}(gn),ni=function(e){function t(t){var n=e.call(this)||this;return n.height=t,n}return f(t,e),t.prototype.toDOM=function(){var e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e},t.prototype.eq=function(e){return e.height==this.height},t.prototype.updateDOM=function(e){return e.style.height=this.height+"px",!0},Object.defineProperty(t.prototype,"editable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return this.height},enumerable:!1,configurable:!0}),t.prototype.ignoreEvent=function(){return!1},t}(Gn),ii=function(){function e(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}return e.prototype.posCovered=function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ti&&e.deco.endSide<0)},e.prototype.getLine=function(){return this.curLine||(this.content.push(this.curLine=new ei),this.atCursorPos=!0),this.curLine},e.prototype.flushBuffer=function(e){void 0===e&&(e=this.bufferMarks),this.pendingBuffer&&(this.curLine.append(ri(new Rn(-1),e),e.length),this.pendingBuffer=0)},e.prototype.addBlockWidget=function(e){this.flushBuffer(),this.curLine=null,this.content.push(e)},e.prototype.finish=function(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof ti||this.getLine()},e.prototype.buildText=function(e,t,n){for(;e>0;){if(this.textOff==this.text.length){var i=this.cursor.next(this.skip),r=i.value,o=i.lineBreak,a=i.done;if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=r,this.textOff=0}var s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(ri(new On(this.text.slice(this.textOff,this.textOff+s)),t),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=0}},e.prototype.span=function(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)},e.prototype.point=function(e,t,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof $n){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}var a=t-e;if(n instanceof $n)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ti(n.widget||oi.block,a,n));else{var s=Nn.create(n.widget||oi.inline,a,a?0:n.startSide),l=this.atCursorPos&&!s.isEditable&&r<=i.length&&(e<t||n.startSide>0),c=!s.isEditable&&(e<t||r>i.length||n.startSide<=0),u=this.getLine();2!=this.pendingBuffer||l||s.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),l&&(u.append(ri(new Rn(1),i),r),r=i.length+Math.max(0,r-i.length)),u.append(ri(s,i),r),this.atCursorPos=c,this.pendingBuffer=c?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)},e.build=function(t,n,i,r,o){var a=new e(t,n,i,o);return a.openEnd=wt.spans(r,n,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a},e}();function ri(e,t){for(var n=0,i=t;n<i.length;n++){var r=i[n];e=new Bn(r,[e],e.length)}return e}var oi=function(e){function t(t){var n=e.call(this)||this;return n.tag=t,n}return f(t,e),t.prototype.eq=function(e){return e.tag==this.tag},t.prototype.toDOM=function(){return document.createElement(this.tag)},t.prototype.updateDOM=function(e){return e.nodeName.toLowerCase()==this.tag},Object.defineProperty(t.prototype,"isHidden",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(Gn);oi.inline=new oi("span"),oi.block=new oi("div");var ai=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(ai||(ai={})),si=ai.LTR,li=ai.RTL;function ci(e){for(var t=[],n=0;n<e.length;n++)t.push(1<<+e[n]);return t}for(var ui=ci("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),hi=ci("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),di=Object.create(null),pi=[],fi=0,mi=["()","[]","{}"];fi<mi.length;fi++){var vi=mi[fi],gi=vi.charCodeAt(0),yi=vi.charCodeAt(1);di[gi]=yi,di[yi]=-gi}function bi(e){return e<=247?ui[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?hi[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}var wi=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,ki=function(){function e(e,t,n){this.from=e,this.to=t,this.level=n}return Object.defineProperty(e.prototype,"dir",{get:function(){return this.level%2?li:si},enumerable:!1,configurable:!0}),e.prototype.side=function(e,t){return this.dir==t==e?this.to:this.from},e.prototype.forward=function(e,t){return e==(this.dir==t)},e.find=function(e,t,n,i){for(var r=-1,o=0;o<e.length;o++){var a=e[o];if(a.from<=t&&a.to>=t){if(a.level==n)return o;(r<0||(0!=i?i<0?a.from<t:a.to>t:e[r].level>a.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r},e}();function Ci(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Ci(i.inner,r.inner))return!1}return!0}var Mi=[];function Ei(e,t,n,i,r,o,a){var s=i%2?2:1;if(i%2==r%2)for(var l=t,c=0;l<n;){var u=!0,h=!1;if(c==o.length||l<o[c].from)(y=Mi[l])!=s&&(u=!1,h=16==y);var d=u||1!=s?null:[],p=u?i:i+1,f=l;e:for(;;)if(c<o.length&&f==o[c].from){if(h)break e;var m=o[c];if(!u)for(var v=m.to,g=c+1;;){if(v==n)break e;if(!(g<o.length&&o[g].from==v)){if(Mi[v]==s)break e;break}v=o[g++].to}if(c++,d)d.push(m);else m.from>l&&a.push(new ki(l,m.from,p)),Si(e,m.direction==si!=!(p%2)?i+1:i,r,m.inner,m.from,m.to,a),l=m.to;f=m.to}else{if(f==n||(u?Mi[f]!=s:Mi[f]==s))break;f++}d?Ei(e,l,f,i+1,r,d,a):l<f&&a.push(new ki(l,f,p)),l=f}else for(l=n,c=o.length;l>t;){var y;u=!0,h=!1;if(!c||l>o[c-1].to)(y=Mi[l-1])!=s&&(u=!1,h=16==y);d=u||1!=s?null:[],p=u?i:i+1,f=l;e:for(;;)if(c&&f==o[c-1].to){if(h)break e;m=o[--c];if(!u)for(v=m.from,g=c;;){if(v==t)break e;if(!g||o[g-1].to!=v){if(Mi[v-1]==s)break e;break}v=o[--g].from}if(d)d.push(m);else m.to<l&&a.push(new ki(m.to,l,p)),Si(e,m.direction==si!=!(p%2)?i+1:i,r,m.inner,m.from,m.to,a),l=m.from;f=m.from}else{if(f==t||(u?Mi[f-1]!=s:Mi[f-1]==s))break;f--}d?Ei(e,f,l,i+1,r,d,a):f<l&&a.push(new ki(f,l,p)),l=f}}function Si(e,t,n,i,r,o,a){var s=t%2?2:1;!function(e,t,n,i,r){for(var o=0;o<=i.length;o++){for(var a=o?i[o-1].to:t,s=o<i.length?i[o].from:n,l=o?256:r,c=a,u=l,h=l;c<s;c++)512==(d=bi(e.charCodeAt(c)))?d=u:8==d&&4==h&&(d=16),Mi[c]=4==d?2:d,7&d&&(h=d),u=d;for(c=a,u=l,h=l;c<s;c++){var d;if(128==(d=Mi[c]))c<s-1&&u==Mi[c+1]&&24&u?d=Mi[c]=u:Mi[c]=256;else if(64==d){for(var p=c+1;p<s&&64==Mi[p];)p++;for(var f=c&&8==u||p<n&&8==Mi[p]?1==h?1:8:256,m=c;m<p;m++)Mi[m]=f;c=p-1}else 8==d&&1==h&&(Mi[c]=1);u=d,7&d&&(h=d)}}}(e,r,o,i,s),function(e,t,n,i,r){for(var o=1==r?2:1,a=0,s=0,l=0;a<=i.length;a++)for(var c=a?i[a-1].to:t,u=a<i.length?i[a].from:n,h=c,d=void 0,p=void 0,f=void 0;h<u;h++)if(p=di[d=e.charCodeAt(h)])if(p<0){for(var m=s-3;m>=0;m-=3)if(pi[m+1]==-p){var v=pi[m+2],g=2&v?r:4&v?1&v?o:r:0;g&&(Mi[h]=Mi[pi[m]]=g),s=m;break}}else{if(189==pi.length)break;pi[s++]=h,pi[s++]=d,pi[s++]=l}else if(2==(f=Mi[h])||1==f){var y=f==r;for(l=y?0:1,m=s-3;m>=0;m-=3){var b=pi[m+2];if(2&b)break;if(y)pi[m+2]|=2;else{if(4&b)break;pi[m+2]|=4}}}}(e,r,o,i,s),function(e,t,n,i){for(var r=0,o=i;r<=n.length;r++)for(var a=r?n[r-1].to:e,s=r<n.length?n[r].from:t,l=a;l<s;){var c=Mi[l];if(256==c){for(var u=l+1;;)if(u==s){if(r==n.length)break;u=n[r++].to,s=r<n.length?n[r].from:t}else{if(256!=Mi[u])break;u++}for(var h=1==o,d=h==(1==(u<t?Mi[u]:i))?h?1:2:i,p=u,f=r,m=f?n[f-1].to:e;p>l;)p==m&&(p=n[--f].from,m=f?n[f-1].to:e),Mi[--p]=d;l=u}else o=c,l++}}(r,o,i,s),Ei(e,r,o,t,n,i,a)}function xi(e,t,n){if(!e)return[new ki(0,0,t==li?1:0)];if(t==si&&!n.length&&!wi.test(e))return Ti(e.length);if(n.length)for(;e.length>Mi.length;)Mi[Mi.length]=256;var i=[],r=t==si?0:1;return Si(e,r,r,n,0,e.length,i),i}function Ti(e){return[new ki(0,e,0)]}var Di="";function Ai(e,t,n,i,r){var o,a=i.head-e.from,s=ki.find(t,a,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=t[s],c=l.side(r,n);if(a==c){var u=s+=r?1:-1;if(u<0||u>=t.length)return null;a=(l=t[s=u]).side(!r,n),c=l.side(r,n)}var h=ce(e.text,a,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),Di=e.text.slice(Math.min(a,h),Math.max(a,h));var d=s==(r?t.length-1:0)?null:t[s+(r?1:-1)];return d&&h==c&&d.level+(r?0:1)<l.level?Ee.cursor(d.side(!r,n)+e.from,d.forward(r,n)?1:-1,d.level):Ee.cursor(h+e.from,l.forward(r,n)?-1:1,l.level)}function Li(e,t,n){for(var i=t;i<n;i++){var r=bi(e.charCodeAt(i));if(1==r)return si;if(2==r||4==r)return li}return si}var Pi=Te.define(),Ii=Te.define(),Fi=Te.define(),Oi=Te.define(),Bi=Te.define(),Ni=Te.define(),Ri=Te.define(),Hi=Te.define(),Vi=Te.define(),zi=Te.define({combine:function(e){return e.some((function(e){return e}))}}),qi=Te.define({combine:function(e){return e.some((function(e){return e}))}}),Ui=Te.define(),_i=function(){function e(e,t,n,i,r,o){void 0===t&&(t="nearest"),void 0===n&&(n="nearest"),void 0===i&&(i=5),void 0===r&&(r=5),void 0===o&&(o=!1),this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}return e.prototype.map=function(t){return t.empty?this:new e(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)},e.prototype.clip=function(t){return this.range.to<=t.doc.length?this:new e(Ee.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)},e}(),Wi=nt.define({map:function(e,t){return e.map(t)}}),ji=nt.define();function Gi(e,t,n){var i=e.facet(Oi);i.length?i[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}var Ki=Te.define({combine:function(e){return!e.length||e[0]}}),Yi=0,Zi=Te.define(),Xi=function(){function e(e,t,n,i,r){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}return e.define=function(t,n){var i=n||{},r=i.eventHandlers,o=i.eventObservers,a=i.provide,s=i.decorations;return new e(Yi++,t,r,o,(function(e){var t=[Zi.of(e)];return s&&t.push(er.of((function(t){var n=t.plugin(e);return n?s(n):Yn.none}))),a&&t.push(a(e)),t}))},e.fromClass=function(t,n){return e.define((function(e){return new t(e)}),n)},e}(),$i=function(){function e(e){this.spec=e,this.mustUpdate=null,this.value=null}return e.prototype.update=function(e){if(this.value){if(this.mustUpdate){var t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(Gi(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Gi(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this},e.prototype.destroy=function(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Gi(e.state,t,"CodeMirror plugin crashed")}},e.prototype.deactivate=function(){this.spec=this.value=null},e}(),Qi=Te.define(),Ji=Te.define(),er=Te.define(),tr=Te.define(),nr=Te.define(),ir=Te.define();function rr(e,t){var n=e.state.facet(ir);if(!n.length)return n;var i=n.map((function(t){return t instanceof Function?t(e):t})),r=[];return wt.spans(i,t.from,t.to,{point:function(){},span:function(e,n,i,o){for(var a=e-t.from,s=n-t.from,l=r,c=i.length-1;c>=0;c--,o--){var u=i[c].spec.bidiIsolate,h=void 0;if(null==u&&(u=Li(t.text,a,s)),o>0&&l.length&&(h=l[l.length-1]).to==a&&h.direction==u)h.to=s,l=h.inner;else{var d={from:a,to:s,direction:u,inner:[]};l.push(d),l=d.inner}}}}),r}var or=Te.define();function ar(e){for(var t=0,n=0,i=0,r=0,o=0,a=e.state.facet(or);o<a.length;o++){var s=(0,a[o])(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:t,right:n,top:i,bottom:r}}var sr=Te.define(),lr=function(){function e(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}return e.prototype.join=function(t){return new e(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))},e.prototype.addToSet=function(e){for(var t=e.length,n=this;t>0;t--){var i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e},e.extendWithRanges=function(t,n){if(0==n.length)return t;for(var i=[],r=0,o=0,a=0,s=0;;r++){for(var l=r==t.length?null:t[r],c=a-s,u=l?l.fromB:1e9;o<n.length&&n[o]<u;){var h=n[o],d=n[o+1],p=Math.max(s,h),f=Math.min(u,d);if(p<=f&&new e(p+c,f+c,p,f).addToSet(i),d>u)break;o+=2}if(!l)return i;new e(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),a=l.toA,s=l.toB}},e}(),cr=function(){function e(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ve.empty(this.startState.doc.length);for(var i=0,r=n;i<r.length;i++){var o=r[i];this.changes=this.changes.compose(o.changes)}var a=[];this.changes.iterChangedRanges((function(e,t,n,i){return a.push(new lr(e,t,n,i))})),this.changedRanges=a}return e.create=function(t,n,i){return new e(t,n,i)},Object.defineProperty(e.prototype,"viewportChanged",{get:function(){return(4&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportMoved",{get:function(){return(8&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heightChanged",{get:function(){return(2&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geometryChanged",{get:function(){return this.docChanged||(18&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focusChanged",{get:function(){return(1&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docChanged",{get:function(){return!this.changes.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionSet",{get:function(){return this.transactions.some((function(e){return e.selection}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this.flags&&0==this.transactions.length},enumerable:!1,configurable:!0}),e}(),ur=function(e){function t(t){var n=e.call(this)||this;return n.view=t,n.decorations=[],n.dynamicDecorationMap=[!1],n.domChanged=null,n.hasComposition=null,n.markedForComposition=new Set,n.editContextFormatting=Yn.none,n.lastCompositionAfterCursor=!1,n.minWidth=0,n.minWidthFrom=0,n.minWidthTo=0,n.impreciseAnchor=null,n.impreciseHead=null,n.forceSelection=!1,n.lastUpdate=Date.now(),n.setDOM(t.contentDOM),n.children=[new ei],n.children[0].setParent(n),n.updateDeco(),n.updateInner([new lr(0,0,0,t.state.doc.length)],0,null),n}return f(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.view.state.doc.length},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var t,n=this,i=e.changedRanges;this.minWidth>0&&i.length&&(i.every((function(e){var t=e.fromA;return e.toA<n.minWidthFrom||t>n.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);var r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?r=this.domChanged.newSel.head:function(e,t){var n=!1;t&&e.iterChangedRanges((function(e,i){e<t.to&&i>t.from&&(n=!0)}));return n}(e.changes,this.hasComposition)||e.selectionSet||(r=e.state.selection.main.head));var o=r>-1?function(e,t,n){var i=hr(e,n);if(!i)return null;var r=i.node,o=i.from,a=i.to,s=r.nodeValue;if(/[\n\r]/.test(s))return null;if(e.state.doc.sliceString(i.from,i.to)!=s)return null;for(var l=t.invertedDesc,c=new lr(l.mapPos(o),l.mapPos(a),o,a),u=[],h=r.parentNode;;h=h.parentNode){var d=gn.get(h);if(d instanceof Bn)u.push({node:h,deco:d.mark});else{if(d instanceof ei||"DIV"==h.nodeName&&h.parentNode==e.contentDOM)return{range:c,text:r,marks:u,line:h};if(h==e.contentDOM)return null;u.push({node:h,deco:new Zn({inclusive:!0,attributes:jn(h),tagName:h.tagName.toLowerCase()})})}}}(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();var a=this.hasComposition,s=a.from,l=a.to;i=new lr(s,l,e.changes.mapPos(s,-1),e.changes.mapPos(l,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Fn.ie||Fn.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);var c,u,h,d,p=this.decorations,f=this.updateDeco(),m=(c=p,u=f,h=e.changes,d=new dr,wt.compare(c,u,h,d),d.changes);return i=lr.extendWithRanges(i,m),!!(7&this.flags||0!=i.length)&&(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)},t.prototype.updateInner=function(e,t,n){var i=this;this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);var r=this.view.observer;r.ignore((function(){i.dom.style.height=i.view.viewState.contentHeight/i.view.scaleY+"px",i.dom.style.flexBasis=i.minWidth?i.minWidth+"px":"";var e=Fn.chrome||Fn.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;i.sync(i.view,e),i.flags&=-8,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(i.forceSelection=!0),i.dom.style.height=""})),this.markedForComposition.forEach((function(e){return e.flags&=-9}));var o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(var a=0,s=this.children;a<s.length;a++){var l=s[a];l instanceof ti&&l.widget instanceof ni&&o.push(l.dom)}r.updateGaps(o)},t.prototype.updateChildren=function(e,t,n){for(var i,r=n?n.range.addToSet(e.slice()):e,o=this.childCursor(t),a=r.length-1;;a--){var s=a>=0?r[a]:null;if(!s)break;var l=s.fromA,c=s.toA,u=s.fromB,h=s.toB,d=void 0,p=void 0,f=void 0,m=void 0;if(n&&n.range.fromB<h&&n.range.toB>u){var v=ii.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),g=ii.build(this.view.state.doc,n.range.toB,h,this.decorations,this.dynamicDecorationMap);p=v.breakAtStart,f=v.openStart,m=g.openEnd;var y=this.compositionView(n);g.breakAtStart?y.breakAfter=1:g.content.length&&y.merge(y.length,y.length,g.content[0],!1,g.openStart,0)&&(y.breakAfter=g.content[0].breakAfter,g.content.shift()),v.content.length&&y.merge(0,0,v.content[v.content.length-1],!0,0,v.openEnd)&&v.content.pop(),d=v.content.concat(y).concat(g.content)}else d=(i=ii.build(this.view.state.doc,u,h,this.decorations,this.dynamicDecorationMap)).content,p=i.breakAtStart,f=i.openStart,m=i.openEnd;var b=o.findPos(c,1),w=b.i,k=b.off,C=o.findPos(l,-1);wn(this,C.i,C.off,w,k,d,p,f,m)}n&&this.fixCompositionDOM(n)},t.prototype.updateEditContextFormatting=function(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(var t=0,n=e.transactions;t<n.length;t++)for(var i=0,r=n[t].effects;i<r.length;i++){var o=r[i];o.is(ji)&&(this.editContextFormatting=o.value)}},t.prototype.compositionView=function(e){var t=new On(e.text.nodeValue);t.flags|=8;for(var n=0,i=e.marks;n<i.length;n++){var r=i[n].deco;t=new Bn(r,[t],t.length)}var o=new ei;return o.append(t,0),o},t.prototype.fixCompositionDOM=function(e){var t=this,n=function(e,n){n.flags|=8|(n.children.some((function(e){return 7&e.flags}))?1:0),t.markedForComposition.add(n);var i=gn.get(e);i&&i!=n&&(i.dom=null),n.setDOM(e)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(var o=e.marks.length-1;o>=-1;o--)i=r.childPos(i.off,1),r=r.children[i.i],n(o>=0?e.marks[o].node:e.text,r)},t.prototype.updateSelection=function(e,t){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1),!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();var i=this.view.root.activeElement,r=i==this.dom,o=!r&&!(this.view.state.facet(Ki)||this.dom.tabIndex>-1)&&Yt(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(r||t||o){var a=this.forceSelection;this.forceSelection=!1;var s=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(s.anchor)),c=s.empty?l:this.moveToLine(this.domAtPos(s.head));if(Fn.gecko&&s.empty&&!this.hasComposition&&function(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}(l)){var u=document.createTextNode("");this.view.observer.ignore((function(){return l.node.insertBefore(u,l.node.childNodes[l.offset]||null)})),l=c=new mn(u,0),a=!0}var h=this.view.observer.selectionRange;!a&&h.focusNode&&(Xt(l.node,l.offset,h.anchorNode,h.anchorOffset)&&Xt(c.node,c.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((function(){var e;Fn.android&&Fn.chrome&&n.dom.contains(h.focusNode)&&function(e,t){for(var n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,n.dom)&&(n.dom.blur(),n.dom.focus({preventScroll:!0}));var t,r,a=Gt(n.view.root);if(a)if(s.empty){if(Fn.gecko){var u=(t=l.node,r=l.offset,1!=t.nodeType?0:(r&&"false"==t.childNodes[r-1].contentEditable?1:0)|(r<t.childNodes.length&&"false"==t.childNodes[r].contentEditable?2:0));if(u&&3!=u){var d=(1==u?pn:fn)(l.node,l.offset);d&&(l=new mn(d.node,d.offset))}}a.collapse(l.node,l.offset),null!=s.bidiLevel&&void 0!==a.caretBidiLevel&&(a.caretBidiLevel=s.bidiLevel)}else if(a.extend){a.collapse(l.node,l.offset);try{a.extend(c.node,c.offset)}catch(e){}}else{var p=document.createRange();s.anchor>s.head&&(l=(e=[c,l])[0],c=e[1]),p.setEnd(c.node,c.offset),p.setStart(l.node,l.offset),a.removeAllRanges(),a.addRange(p)}else;o&&n.view.root.activeElement==n.dom&&(n.dom.blur(),i&&i.focus())})),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new mn(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new mn(h.focusNode,h.focusOffset)}},t.prototype.suppressWidgetCursorChange=function(e,t){return this.hasComposition&&t.empty&&Xt(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head},t.prototype.enforceCursorAssoc=function(){if(!this.hasComposition){var e=this.view,t=e.state.selection.main,n=Gt(e.root),i=e.observer.selectionRange,r=i.anchorNode,o=i.anchorOffset;if(n&&t.empty&&t.assoc&&n.modify){var a=ei.find(this,t.head);if(a){var s=a.posAtStart;if(t.head!=s&&t.head!=s+a.length){var l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(l&&c&&!(l.bottom>c.top)){var u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();var h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&n.collapse(r,o)}}}}}},t.prototype.moveToLine=function(e){var t,n=this.dom;if(e.node!=n)return e;for(var i=e.offset;!t&&i<n.childNodes.length;i++){(r=gn.get(n.childNodes[i]))instanceof ei&&(t=r.domAtPos(0))}for(i=e.offset-1;!t&&i>=0;i--){var r;(r=gn.get(n.childNodes[i]))instanceof ei&&(t=r.domAtPos(r.length))}return t?new mn(t.node,t.offset,!0):e},t.prototype.nearest=function(e){for(var t=e;t;){var n=gn.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null},t.prototype.posFromDOM=function(e,t){var n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart},t.prototype.domAtPos=function(e){for(var t=this.childCursor().findPos(e,-1),n=t.i,i=t.off;n<this.children.length-1;){var r=this.children[n];if(i<r.length||r instanceof ei)break;n++,i=0}return this.children[n].domAtPos(i)},t.prototype.coordsAt=function(e,t){for(var n=null,i=0,r=this.length,o=this.children.length-1;o>=0;o--){var a=this.children[o],s=r-a.breakAfter,l=s-a.length;if(s<e)break;if(l<=e&&(l<e||a.covers(-1))&&(s>e||a.covers(1))&&(!n||a instanceof ei&&!(n instanceof ei&&t>=0)))n=a,i=l;else if(n&&l==e&&s==e&&a instanceof ti&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(e-i,t):null},t.prototype.coordsForChar=function(e){var t=this.childPos(e,1),n=t.i,i=t.off,r=this.children[n];if(!(r instanceof ei))return null;for(;r.children.length;){for(var o=r.childPos(i,1),a=o.i,s=o.off;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=s}if(!(r instanceof On))return null;var l=ce(r.text,i);if(l==i)return null;for(var c=cn(r.dom,i,l).getClientRects(),u=0;u<c.length;u++){var h=c[u];if(u==c.length-1||h.top<h.bottom&&h.left<h.right)return h}return null},t.prototype.measureVisibleLineHeights=function(e){for(var t=[],n=e.from,i=e.to,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,s=this.view.textDirection==ai.LTR,l=0,c=0;c<this.children.length;c++){var u=this.children[c],h=l+u.length;if(h>i)break;if(l>=n){var d=u.dom.getBoundingClientRect();if(t.push(d.height),o){var p=u.dom.lastChild,f=p?Zt(p):[];if(f.length){var m=f[f.length-1],v=s?m.right-d.left:d.right-m.left;v>a&&(a=v,this.minWidth=r,this.minWidthFrom=l,this.minWidthTo=h)}}}l=h+u.breakAfter}return t},t.prototype.textDirectionAt=function(e){var t=this.childPos(e,1).i;return"rtl"==getComputedStyle(this.children[t].dom).direction?ai.RTL:ai.LTR},t.prototype.measureTextSize=function(){for(var e=this,t=0,n=this.children;t<n.length;t++){var i=n[t];if(i instanceof ei){var r=i.measureTextSize();if(r)return r}}var o,a,s,l=document.createElement("div");return l.className="cm-line",l.style.width="99999px",l.style.position="absolute",l.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((function(){e.dom.appendChild(l);var t=Zt(l.firstChild)[0];o=l.getBoundingClientRect().height,a=t?t.width/27:7,s=t?t.height:o,l.remove()})),{lineHeight:o,charWidth:a,textHeight:s}},t.prototype.childCursor=function(e){void 0===e&&(e=this.length);var t=this.children.length;return t&&(e-=this.children[--t].length),new bn(this.children,e,t)},t.prototype.computeBlockGapDeco=function(){for(var e=[],t=this.view.viewState,n=0,i=0;;i++){var r=i==t.viewports.length?null:t.viewports[i],o=r?r.from-1:this.length;if(o>n){var a=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Yn.replace({widget:new ni(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return Yn.set(e)},t.prototype.updateDeco=function(){var e=this,t=1,n=this.view.state.facet(er).map((function(n){return(e.dynamicDecorationMap[t++]="function"==typeof n)?n(e.view):n})),i=!1,r=this.view.state.facet(tr).map((function(t,n){var r="function"==typeof t;return r&&(i=!0),r?t(e.view):t}));for(r.length&&(this.dynamicDecorationMap[t++]=i,n.push(wt.join(r))),this.decorations=w(w([this.editContextFormatting],n,!0),[this.computeBlockGapDeco(),this.view.viewState.lineGapDeco],!1);t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations},t.prototype.scrollIntoView=function(e){if(this.dom.offsetParent){if(e.isSnapshot){var t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(var n=0,i=this.view.state.facet(Ui);n<i.length;n++){var r=i[n];try{if(r(this.view,e.range,e))return!0}catch(e){Gi(this.view.state,e,"scroll handler")}}var o,a=e.range,s=this.coordsAt(a.head,a.empty?a.assoc:a.head>a.anchor?-1:1);if(s){!a.empty&&(o=this.coordsAt(a.anchor,a.anchor>a.head?-1:1))&&(s={left:Math.min(s.left,o.left),top:Math.min(s.top,o.top),right:Math.max(s.right,o.right),bottom:Math.max(s.bottom,o.bottom)});var l=ar(this.view),c={left:s.left-l.left,top:s.top-l.top,right:s.right+l.right,bottom:s.bottom+l.bottom},u=this.view.scrollDOM,h=u.offsetWidth,d=u.offsetHeight;!function(e,t,n,i,r,o,a,s){for(var l,c=e.ownerDocument,u=c.defaultView||window,h=e,d=!1;h&&!d;)if(1==h.nodeType){var p=void 0,f=h==c.body,m=1,v=1;if(f)p=nn(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(d=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}var g=h.getBoundingClientRect();m=(l=rn(h,g)).scaleX,v=l.scaleY,p={left:g.left,right:g.left+h.clientWidth*m,top:g.top,bottom:g.top+h.clientHeight*v}}var y=0,b=0;if("nearest"==r)t.top<p.top?(b=-(p.top-t.top+a),n>0&&t.bottom>p.bottom+b&&(b=t.bottom-p.bottom+b+a)):t.bottom>p.bottom&&(b=t.bottom-p.bottom+a,n<0&&t.top-b<p.top&&(b=-(p.top+b-t.top+a)));else{var w=t.bottom-t.top,k=p.bottom-p.top;b=("center"==r&&w<=k?t.top+w/2-k/2:"start"==r||"center"==r&&n<0?t.top-a:t.bottom-k+a)-p.top}if("nearest"==i?t.left<p.left?(y=-(p.left-t.left+o),n>0&&t.right>p.right+y&&(y=t.right-p.right+y+o)):t.right>p.right&&(y=t.right-p.right+o,n<0&&t.left<p.left+y&&(y=-(p.left+y-t.left+o))):y=("center"==i?t.left+(t.right-t.left)/2-(p.right-p.left)/2:"start"==i==s?t.left-o:t.right-(p.right-p.left)+o)-p.left,y||b)if(f)u.scrollBy(y,b);else{var C=0,M=0;if(b){var E=h.scrollTop;h.scrollTop+=b/v,M=(h.scrollTop-E)*v}y&&(E=h.scrollLeft,h.scrollLeft+=y/m,C=(h.scrollLeft-E)*m),t={left:t.left-C,top:t.top-M,right:t.right-C,bottom:t.bottom-M},C&&Math.abs(C-y)<1&&(i="nearest"),M&&Math.abs(M-b)<1&&(r="nearest")}if(f)break;h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,c,a.head<a.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,h),-h),Math.max(Math.min(e.yMargin,d),-d),this.view.textDirection==ai.LTR)}}},t}(gn);function hr(e,t){var n=e.observer.selectionRange;if(!n.focusNode)return null;var i=pn(n.focusNode,n.focusOffset),r=fn(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){var a=gn.get(r.node);if(!a||a instanceof On&&a.text!=r.node.nodeValue)o=r;else if(e.docView.lastCompositionAfterCursor){var s=gn.get(i.node);!s||s instanceof On&&s.text!=i.node.nodeValue||(o=r)}}if(e.docView.lastCompositionAfterCursor=o!=i,!o)return null;var l=t-o.offset;return{from:l,to:l+o.node.nodeValue.length,node:o.node}}var dr=function(){function e(){this.changes=[]}return e.prototype.compareRange=function(e,t){Jn(e,t,this.changes)},e.prototype.comparePoint=function(e,t){Jn(e,t,this.changes)},e.prototype.boundChange=function(e){Jn(e,e,this.changes)},e}();function pr(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function fr(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function mr(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function vr(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function gr(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function yr(e,t,n){for(var i,r,o,a,s,l,c,u,h=!1,d=e.firstChild;d;d=d.nextSibling)for(var p=Zt(d),f=0;f<p.length;f++){var m=p[f];r&&mr(r,m)&&(m=vr(gr(m,r.bottom),r.top));var v=pr(t,m),g=fr(n,m);if(0==v&&0==g)return 3==d.nodeType?br(d,t,n):yr(d,t,n);if(!i||a>g||a==g&&o>v){i=d,r=m,o=v,a=g;var y=g?n<m.top?-1:1:v?t<m.left?-1:1:0;h=!y||(y>0?f<p.length-1:f>0)}0==v?n>m.bottom&&(!c||c.bottom<m.bottom)?(s=d,c=m):n<m.top&&(!u||u.top>m.top)&&(l=d,u=m):c&&mr(c,m)?c=gr(c,m.bottom):u&&mr(u,m)&&(u=vr(u,m.top))}if(c&&c.bottom>=n?(i=s,r=c):u&&u.top<=n&&(i=l,r=u),!i)return{node:e,offset:0};var b=Math.max(r.left,Math.min(r.right,t));return 3==i.nodeType?br(i,b,n):h&&"false"!=i.contentEditable?yr(i,b,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,i)+(t>=(r.left+r.right)/2?1:0)}}function br(e,t,n){for(var i=e.nodeValue.length,r=-1,o=1e9,a=0,s=0;s<i;s++)for(var l=cn(e,s,s+1).getClientRects(),c=0;c<l.length;c++){var u=l[c];if(u.top!=u.bottom){a||(a=t-u.left);var h=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=t&&u.right+1>=t&&h<o){var d=t>=(u.left+u.right)/2,p=d;if(Fn.chrome||Fn.gecko)cn(e,s).getBoundingClientRect().left==u.right&&(p=!d);if(h<=0)return{node:e,offset:s+(p?1:0)};r=s+(p?1:0),o=h}}}return{node:e,offset:r>-1?r:a>0?e.nodeValue.length:0}}function wr(e,t,n,i){var r,o,a;void 0===i&&(i=-1);var s,l=e.contentDOM.getBoundingClientRect(),c=l.top+e.viewState.paddingTop,u=e.viewState.docHeight,h=t.x,d=t.y,p=d-c;if(p<0)return 0;if(p>u)return e.state.doc.length;for(var f=e.viewState.heightOracle.textHeight/2,m=!1;(s=e.elementAtHeight(p)).type!=Kn.Text;)for(;!((p=i>0?s.bottom+f:s.top-f)>=0&&p<=u);){if(m)return n?null:0;m=!0,i=-i}d=c+p;var v=s.from;if(v<e.viewport.from)return 0==e.viewport.from?0:n?null:kr(e,l,s,h,d);if(v>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:kr(e,l,s,h,d);var g=e.dom.ownerDocument,y=e.root.elementFromPoint?e.root:g,b=y.elementFromPoint(h,d);b&&!e.contentDOM.contains(b)&&(b=null),b||(h=Math.max(l.left+1,Math.min(l.right-1,h)),(b=y.elementFromPoint(h,d))&&!e.contentDOM.contains(b)&&(b=null));var w,k=-1;if(b&&0!=(null===(o=e.docView.nearest(b))||void 0===o?void 0:o.isEditable)){if(g.caretPositionFromPoint){var C=g.caretPositionFromPoint(h,d);C&&(w=C.offsetNode,k=C.offset)}else if(g.caretRangeFromPoint){var M=g.caretRangeFromPoint(h,d);M&&(w=M.startContainer,k=M.startOffset,(!e.contentDOM.contains(w)||Fn.safari&&function(e,t,n){var i;if(3!=e.nodeType||t!=(i=e.nodeValue.length))return!1;for(var r=e.nextSibling;r;r=r.nextSibling)if(1!=r.nodeType||"BR"!=r.nodeName)return!1;return cn(e,i-1,i).getBoundingClientRect().left>n}(w,k,h)||Fn.chrome&&function(e,t,n){if(0!=t)return!1;for(var i=e;;){var r=i.parentNode;if(!r||1!=r.nodeType||r.firstChild!=i)return!1;if(r.classList.contains("cm-line"))break;i=r}var o=1==e.nodeType?e.getBoundingClientRect():cn(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-o.left>5}(w,k,h))&&(w=void 0))}w&&(k=Math.min(en(w),k))}if(!w||!e.docView.dom.contains(w)){var E=ei.find(e.docView,v);if(!E)return p>s.top+s.height/2?s.to:s.from;w=(r=yr(E.dom,h,d)).node,k=r.offset}var S=e.docView.nearest(w);if(!S)return null;if(S.isWidget&&1==(null===(a=S.dom)||void 0===a?void 0:a.nodeType)){var x=S.dom.getBoundingClientRect();return t.y<x.top||t.y<=x.bottom&&t.x<=(x.left+x.right)/2?S.posAtStart:S.posAtEnd}return S.localPosFromDOM(w,k)+S.posAtStart}function kr(e,t,n,i,r){var o=Math.round((i-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){var a=e.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(e.defaultLineHeight-a))/a)*e.viewState.heightOracle.lineLength}var s=e.state.sliceDoc(n.from,n.to);return n.from+Ft(s,o,e.state.tabSize)}function Cr(e,t){var n=e.lineBlockAt(t);if(Array.isArray(n.type))for(var i=0,r=n.type;i<r.length;i++){var o=r[i];if(o.to>t||o.to==t&&(o.to==n.to||o.type==Kn.Text))return o}return n}function Mr(e,t,n,i){for(var r=e.state.doc.lineAt(t.head),o=e.bidiSpans(r),a=e.textDirectionAt(r.from),s=t,l=null;;){var c=Ai(r,o,a,s,n),u=Di;if(!c){if(r.number==(n?e.state.doc.lines:1))return s;u="\n",r=e.state.doc.line(r.number+(n?1:-1)),o=e.bidiSpans(r),c=e.visualLineSide(r,!n)}if(l){if(!l(u))return s}else{if(!i)return c;l=i(u)}s=c}}function Er(e,t,n){for(var i=function(){for(var i=0,r=0,o=e;r<o.length;r++){o[r].between(t-1,t+1,(function(e,r,o){if(t>e&&t<r){var a=i||n||(t-e<r-t?-1:1);t=a<0?e:r,i=a}}))}if(!i)return{value:t}};;){var r=i();if("object"==typeof r)return r.value}}function Sr(e,t,n){var i=Er(e.state.facet(nr).map((function(t){return t(e)})),n.from,t.head>n.from?-1:1);return i==n.from?n:Ee.cursor(i,i<n.from?1:-1)}var xr="ï¿¿",Tr=function(){function e(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ft.lineSeparator)}return e.prototype.append=function(e){this.text+=e},e.prototype.lineBreak=function(){this.text+=xr},e.prototype.readRange=function(e,t){if(!e)return this;for(var n=e.parentNode,i=e;;){this.findPointBefore(n,i);var r=this.text.length;this.readNode(i);var o=i.nextSibling;if(o==t)break;var a=gn.get(i),s=gn.get(o);(a&&s?a.breakAfter:(a?a.breakAfter:Qt(i))||Qt(o)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>r)&&this.lineBreak(),i=o}return this.findPointBefore(n,t),this},e.prototype.readTextNode=function(e){for(var t=e.nodeValue,n=0,i=this.points;n<i.length;n++){(h=i[n]).node==e&&(h.pos=this.text.length+Math.min(h.offset,t.length))}for(var r=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){var a=-1,s=1,l=void 0;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(l=o.exec(t))&&(a=l.index,s=l[0].length),this.append(t.slice(r,a<0?t.length:a)),a<0)break;if(this.lineBreak(),s>1)for(var c=0,u=this.points;c<u.length;c++){var h;(h=u[c]).node==e&&h.pos>this.text.length&&(h.pos-=s-1)}r=a+s}},e.prototype.readNode=function(e){if(!e.cmIgnore){var t=gn.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(var i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}},e.prototype.findPointBefore=function(e,t){for(var n=0,i=this.points;n<i.length;n++){var r=i[n];r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}},e.prototype.findPointInside=function(e,t){for(var n=0,i=this.points;n<i.length;n++){var r=i[n];(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Dr(e,r.node,r.offset)?t:0))}},e}();function Dr(e,t,n){for(;;){if(!t||n<en(t))return!1;if(t==e)return!0;n=$t(t)+1,t=t.parentNode}}var Ar=function(e,t){this.node=e,this.offset=t,this.pos=-1},Lr=function(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;var r=e.docView,o=r.impreciseHead,a=r.impreciseAnchor;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){var s=o||a?[]:function(e){var t=[];if(e.root.activeElement!=e.contentDOM)return t;var n=e.observer.selectionRange,i=n.anchorNode,r=n.anchorOffset,o=n.focusNode,a=n.focusOffset;return i&&(t.push(new Ar(i,r)),o==i&&a==r||t.push(new Ar(o,a))),t}(e),l=new Tr(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=function(e,t){if(0==e.length)return null;var n=e[0].pos,i=2==e.length?e[1].pos:n;return n>-1&&i>-1?Ee.single(n+t,i+t):null}(s,this.bounds.from)}else{var c=e.observer.selectionRange,u=o&&o.node==c.focusNode&&o.offset==c.focusOffset||!Kt(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),h=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Kt(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),d=e.viewport;if((Fn.ios||Fn.chrome)&&e.state.selection.main.empty&&u!=h&&(d.from>0||d.to<e.state.doc.length)){var p=Math.min(u,h),f=Math.max(u,h),m=d.from-p,v=d.to-f;0!=m&&1!=m&&0!=p||0!=v&&-1!=v&&f!=e.state.doc.length||(u=0,h=e.state.doc.length)}this.newSel=Ee.single(h,u)}};function Pr(e,t){var n,i=t.newSel,r=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){var a=t.bounds,s=a.from,l=a.to,c=r.from,u=null;(8===o||Fn.android&&t.text.length<l-s)&&(c=r.to,u="end");var h=function(e,t,n,i){var r=Math.min(e.length,t.length),o=0;for(;o<r&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&e.length==t.length)return null;var a=e.length,s=t.length;for(;a>0&&s>0&&e.charCodeAt(a-1)==t.charCodeAt(s-1);)a--,s--;if("end"==i){n-=a+Math.max(0,o-Math.min(a,s))-o}if(a<o&&e.length<t.length){s=(o-=n<=o&&n>=a?o-n:0)+(s-a),a=o}else if(s<o){a=(o-=n<=o&&n>=s?o-n:0)+(a-s),s=o}return{from:o,toA:a,toB:s}}(e.state.doc.sliceString(s,l,xr),t.text,c-s,u);h&&(Fn.chrome&&13==o&&h.toB==h.from+2&&t.text.slice(h.from,h.toB)==xr+xr&&h.toB--,n={from:s+h.from,to:s+h.toA,insert:J.of(t.text.slice(h.from,h.toB).split(xr))})}else i&&(!e.hasFocus&&e.state.facet(Ki)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&t.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,r.to))}:Fn.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(i&&(i=Ee.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:J.of([" "])}),n)return Ir(e,n,i,o);if(i&&!i.main.eq(r)){var d=!1,p="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(d=!0),p=e.inputState.lastSelectionOrigin),e.dispatch({selection:i,scrollIntoView:d,userEvent:p}),!0}return!1}function Ir(e,t,n,i){if(void 0===i&&(i=-1),Fn.ios&&e.inputState.flushIOSKey(t))return!0;var r=e.state.selection.main;if(Fn.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&" "==e.state.sliceDoc(t.from,r.from))&&1==t.insert.length&&2==t.insert.lines&&un(e.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&0==t.insert.length||8==i&&t.insert.length<t.to-t.from&&t.to>r.head)&&un(e.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&0==t.insert.length&&un(e.contentDOM,"Delete",46)))return!0;var o,a=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;var s=function(){return o||(o=function(e,t,n){var i,r=e.state,o=r.selection.main;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){var a=o.from<t.from?r.sliceDoc(o.from,t.from):"",s=o.to>t.to?r.sliceDoc(t.to,o.to):"";i=r.replaceSelection(e.state.toText(a+t.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{var l=r.changes(t),c=n&&n.main.to<=l.newLength?n.main:void 0;if(r.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){var u,h=e.state.sliceDoc(t.from,t.to),d=n&&hr(e,n.main.head);if(d){var p=t.insert.length-(t.to-t.from);u={from:d.from,to:d.to-p}}else u=e.state.doc.lineAt(o.head);var f=o.to-t.to,m=o.to-o.from;i=r.changeByRange((function(n){if(n.from==o.from&&n.to==o.to)return{changes:l,range:c||n.map(l)};var i=n.to-f,a=i-h.length;if(n.to-n.from!=m||e.state.sliceDoc(a,i)!=h||n.to>=u.from&&n.from<=u.to)return{range:n};var s=r.changes({from:a,to:i,insert:t.insert}),d=n.to-o.to;return{changes:s,range:c?Ee.range(Math.max(0,c.anchor+d),Math.max(0,c.head+d)):n.map(s)}}))}else i={changes:l,selection:c&&r.selection.replaceRange(c)}}var v="input.type";(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,v+=".compose",e.inputState.compositionFirstChange&&(v+=".start",e.inputState.compositionFirstChange=!1));return r.update(i,{userEvent:v,scrollIntoView:!0})}(e,t,n))};return e.state.facet(Ni).some((function(n){return n(e,t.from,t.to,a,s)}))||e.dispatch(s()),!0}var Fr=function(){function e(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Fn.safari&&e.contentDOM.addEventListener("input",(function(){return null})),Fn.gecko&&function(e){ao.has(e)||(ao.add(e),e.addEventListener("copy",(function(){})),e.addEventListener("cut",(function(){})))}(e.contentDOM.ownerDocument)}return e.prototype.setSelectionOrigin=function(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()},e.prototype.handleEvent=function(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target,i=void 0;n!=e.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(i=gn.get(n))&&i.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))},e.prototype.runHandlers=function(e,t){var n=this.handlers[e];if(n){for(var i=0,r=n.observers;i<r.length;i++){(0,r[i])(this.view,t)}for(var o=0,a=n.handlers;o<a.length;o++){var s=a[o];if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}},e.prototype.ensureHandlers=function(e){var t=Br(e),n=this.handlers,i=this.view.contentDOM;for(var r in t)if("scroll"!=r){var o=!t[r].handlers.length,a=n[r];a&&o!=!a.handlers.length&&(i.removeEventListener(r,this.handleEvent),a=null),a||i.addEventListener(r,this.handleEvent,{passive:o})}for(var r in n)"scroll"==r||t[r]||i.removeEventListener(r,this.handleEvent);this.handlers=t},e.prototype.keydown=function(e){var t,n=this;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode)||(this.tabFocusMode>0&&27!=e.keyCode&&Hr.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),!Fn.android||!Fn.chrome||e.synthetic||13!=e.keyCode&&8!=e.keyCode?!Fn.ios||e.synthetic||e.altKey||e.metaKey||!((t=Nr.find((function(t){return t.keyCode==e.keyCode})))&&!e.ctrlKey||Rr.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout((function(){return n.flushIOSKey()}),250),!0):(this.view.observer.delayAndroidKey(e.key,e.keyCode),!0))},e.prototype.flushIOSKey=function(e){var t=this.pendingIOSKey;return!!t&&(!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,un(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0)))},e.prototype.ignoreDuringComposition=function(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(Fn.safari&&!Fn.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))},e.prototype.startMouseSelection=function(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e},e.prototype.update=function(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)},e.prototype.destroy=function(){this.mouseSelection&&this.mouseSelection.destroy()},e}();function Or(e,t){return function(n,i){try{return t.call(e,i,n)}catch(e){Gi(n.state,e)}}}function Br(e){var t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(var i=0,r=e;i<r.length;i++){var o=r[i],a=o.spec;if(a&&a.domEventHandlers)for(var s in a.domEventHandlers){(l=a.domEventHandlers[s])&&n(s).handlers.push(Or(o.value,l))}if(a&&a.domEventObservers)for(var s in a.domEventObservers){var l;(l=a.domEventObservers[s])&&n(s).observers.push(Or(o.value,l))}}for(var s in qr)n(s).handlers.push(qr[s]);for(var s in Ur)n(s).observers.push(Ur[s]);return t}var Nr=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Rr="dthko",Hr=[16,17,18,20,91,92,224,225];function Vr(e){return.7*Math.max(0,e)+8}var zr=function(){function e(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){for(var t,n,i=e.ownerDocument,r=e.parentNode;r&&!(r==i.body||t&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:t,y:n}}(e.contentDOM),this.atoms=e.state.facet(nr).map((function(t){return t(e)}));var r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ft.allowMultipleSelections)&&function(e,t){var n=e.state.facet(Pi);return n.length?n[0](t):Fn.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){var n=e.state.selection.main;if(n.empty)return!1;var i=Gt(e.root);if(!i||0==i.rangeCount)return!0;for(var r=i.getRangeAt(0).getClientRects(),o=0;o<r.length;o++){var a=r[o];if(a.left<=t.clientX&&a.right>=t.clientX&&a.top<=t.clientY&&a.bottom>=t.clientY)return!0}return!1}(e,t)||1!=eo(t))&&null}return e.prototype.start=function(e){!1===this.dragging&&this.select(e)},e.prototype.move=function(e){var t,n;if(0==e.buttons)return this.destroy();if(!(this.dragging||null==this.dragging&&(i=this.startEvent,r=e,Math.max(Math.abs(i.clientX-r.clientX),Math.abs(i.clientY-r.clientY))<10))){var i,r;this.select(this.lastEvent=e);var o=0,a=0,s=0,l=0,c=this.view.win.innerWidth,u=this.view.win.innerHeight;this.scrollParents.x&&(s=(t=this.scrollParents.x.getBoundingClientRect()).left,c=t.right),this.scrollParents.y&&(l=(n=this.scrollParents.y.getBoundingClientRect()).top,u=n.bottom);var h=ar(this.view);e.clientX-h.left<=s+6?o=-Vr(s-e.clientX):e.clientX+h.right>=c-6&&(o=Vr(e.clientX-c)),e.clientY-h.top<=l+6?a=-Vr(l-e.clientY):e.clientY+h.bottom>=u-6&&(a=Vr(e.clientY-u)),this.setScrollSpeed(o,a)}},e.prototype.up=function(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()},e.prototype.destroy=function(){this.setScrollSpeed(0,0);var e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null},e.prototype.setScrollSpeed=function(e,t){var n=this;this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((function(){return n.scroll()}),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)},e.prototype.scroll=function(){var e=this.scrollSpeed,t=e.x,n=e.y;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(t||n)&&this.view.win.scrollBy(t,n),!1===this.dragging&&this.select(this.lastEvent)},e.prototype.skipAtoms=function(e){for(var t=null,n=0;n<e.ranges.length;n++){var i=e.ranges[n],r=null;if(i.empty){var o=Er(this.atoms,i.from,0);o!=i.from&&(r=Ee.cursor(o,-1))}else{var a=Er(this.atoms,i.from,-1),s=Er(this.atoms,i.to,1);a==i.from&&s==i.to||(r=Ee.range(i.from==i.anchor?a:s,i.from==i.head?a:s))}r&&(t||(t=e.ranges.slice()),t[n]=r)}return t?Ee.create(t,e.mainIndex):e},e.prototype.select=function(e){var t=this.view,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1},e.prototype.update=function(e){var t=this;e.transactions.some((function(e){return e.isUserEvent("input.type")}))?this.destroy():this.style.update(e)&&setTimeout((function(){return t.select(t.lastEvent)}),20)},e}();var qr=Object.create(null),Ur=Object.create(null),_r=Fn.ie&&Fn.ie_version<15||Fn.ios&&Fn.webkit_version<604;function Wr(e,t,n){for(var i=0,r=e.facet(t);i<r.length;i++){n=(0,r[i])(n,e)}return n}function jr(e,t){t=Wr(e.state,Hi,t);var n,i=e.state,r=1,o=i.toText(t),a=o.lines==i.selection.ranges.length,s=null!=no&&i.selection.ranges.every((function(e){return e.empty}))&&no==o.toString();if(s){var l=-1;n=i.changeByRange((function(e){var n=i.doc.lineAt(e.from);if(n.from==l)return{range:e};l=n.from;var s=i.toText((a?o.line(r++).text:t)+i.lineBreak);return{changes:{from:n.from,insert:s},range:Ee.cursor(e.from+s.length)}}))}else n=a?i.changeByRange((function(e){var t=o.line(r++);return{changes:{from:e.from,to:e.to,insert:t.text},range:Ee.cursor(e.from+t.length)}})):i.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function Gr(e,t,n,i){if(1==i)return Ee.cursor(t,n);if(2==i)return function(e,t,n){void 0===n&&(n=1);var i=e.charCategorizer(t),r=e.doc.lineAt(t),o=t-r.from;if(0==r.length)return Ee.cursor(t);0==o?n=1:o==r.length&&(n=-1);var a=o,s=o;n<0?a=ce(r.text,o,!1):s=ce(r.text,o);for(var l=i(r.text.slice(a,s));a>0;){var c=ce(r.text,a,!1);if(i(r.text.slice(c,a))!=l)break;a=c}for(;s<r.length;){var u=ce(r.text,s);if(i(r.text.slice(s,u))!=l)break;s=u}return Ee.range(a+r.from,s+r.from)}(e.state,t,n);var r=ei.find(e.docView,t),o=e.state.doc.lineAt(r?r.posAtEnd:t),a=r?r.posAtStart:o.from,s=r?r.posAtEnd:o.to;return s<e.state.doc.length&&s==o.to&&s++,Ee.range(a,s)}Ur.scroll=function(e){e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},qr.keydown=function(e,t){return e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1},Ur.touchstart=function(e,t){e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Ur.touchmove=function(e){e.inputState.setSelectionOrigin("select.pointer")},qr.mousedown=function(e,t){if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;for(var n=null,i=0,r=e.state.facet(Fi);i<r.length;i++){if(n=(0,r[i])(e,t))break}if(n||0!=t.button||(n=function(e,t){var n=Zr(e,t),i=eo(t),r=e.state.selection;return{update:function(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),r=r.map(e.changes))},get:function(t,o,a){var s,l=Zr(e,t),c=Gr(e,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){var u=Gr(e,n.pos,n.bias,i),h=Math.min(u.from,c.from),d=Math.max(u.to,c.to);c=h<c.from?Ee.range(h,d):Ee.range(d,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&1==i&&r.ranges.length>1&&(s=function(e,t){for(var n=0;n<e.ranges.length;n++){var i=e.ranges[n],r=i.from,o=i.to;if(r<=t&&o>=t)return Ee.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(r,l.pos))?s:a?r.addRange(c):Ee.create([c])}}}(e,t)),n){var o=!e.hasFocus;e.inputState.startMouseSelection(new zr(e,t,n,o)),o&&e.observer.ignore((function(){ln(e.contentDOM);var t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()}));var a=e.inputState.mouseSelection;if(a)return a.start(t),!1===a.dragging}return!1};var Kr=function(e,t,n){return t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right};function Yr(e,t,n,i){var r=ei.find(e.docView,t);if(!r)return 1;var o=t-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;var a=r.coordsAt(o,-1);if(a&&Kr(n,i,a))return-1;var s=r.coordsAt(o,1);return s&&Kr(n,i,s)?1:a&&a.bottom>=i?-1:1}function Zr(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:Yr(e,n,t.clientX,t.clientY)}}var Xr=Fn.ie&&Fn.ie_version<=11,$r=null,Qr=0,Jr=0;function eo(e){if(!Xr)return e.detail;var t=$r,n=Jr;return $r=e,Jr=Date.now(),Qr=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Qr+1)%3:1}function to(e,t,n,i){if(n=Wr(e.state,Hi,n)){var r=e.posAtCoords({x:t.clientX,y:t.clientY},!1),o=e.inputState.draggedContent,a=i&&o&&function(e,t){var n=e.state.facet(Ii);return n.length?n[0](t):Fn.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:o.from,to:o.to}:null,s={from:r,insert:n},l=e.state.changes(a?[a,s]:s);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"}),e.inputState.draggedContent=null}}qr.dragstart=function(e,t){var n=e.state.selection.main;if(t.target.draggable){var i=e.docView.nearest(t.target);if(i&&i.isWidget){var r=i.posAtStart,o=r+i.length;(r>=n.to||o<=n.from)&&(n=Ee.range(r,o))}}var a=e.inputState;return a.mouseSelection&&(a.mouseSelection.dragging=!0),a.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",Wr(e.state,Vi,e.state.sliceDoc(n.from,n.to))),t.dataTransfer.effectAllowed="copyMove"),!1},qr.dragend=function(e){return e.inputState.draggedContent=null,!1},qr.drop=function(e,t){if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;var n=t.dataTransfer.files;if(n&&n.length){for(var i=Array(n.length),r=0,o=function(){++r==n.length&&to(e,t,i.filter((function(e){return null!=e})).join(e.state.lineBreak),!1)},a=function(e){var t=new FileReader;t.onerror=o,t.onload=function(){/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(i[e]=t.result),o()},t.readAsText(n[e])},s=0;s<n.length;s++)a(s);return!0}var l=t.dataTransfer.getData("Text");return!!l&&(to(e,t,l,!0),!0)},qr.paste=function(e,t){if(e.state.readOnly)return!0;e.observer.flush();var n=_r?null:t.clipboardData;return n?(jr(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){var t=e.dom.parentNode;if(t){var n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){e.focus(),n.remove(),jr(e,n.value)}),50)}}(e),!1)};var no=null;qr.copy=qr.cut=function(e,t){var n=function(e){for(var t=[],n=[],i=!1,r=0,o=e.selection.ranges;r<o.length;r++){var a=o[r];a.empty||(t.push(e.sliceDoc(a.from,a.to)),n.push(a))}if(!t.length){for(var s=-1,l=0,c=e.selection.ranges;l<c.length;l++){var u=c[l].from,h=e.doc.lineAt(u);h.number>s&&(t.push(h.text),n.push({from:h.from,to:Math.min(e.doc.length,h.to+1)})),s=h.number}i=!0}return{text:Wr(e,Vi,t.join(e.lineBreak)),ranges:n,linewise:i}}(e.state),i=n.text,r=n.ranges,o=n.linewise;if(!i&&!o)return!1;no=o?i:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});var a=_r?null:t.clipboardData;return a?(a.clearData(),a.setData("text/plain",i),!0):(function(e,t){var n=e.dom.parentNode;if(n){var i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout((function(){i.remove(),e.focus()}),50)}}(e,i),!1)};var io=Je.define();function ro(e,t){for(var n=[],i=0,r=e.facet(Ri);i<r.length;i++){var o=(0,r[i])(e,t);o&&n.push(o)}return n?e.update({effects:n,annotations:io.of(!0)}):null}function oo(e){setTimeout((function(){var t=e.hasFocus;if(t!=e.inputState.notifiedFocused){var n=ro(e.state,t);n?e.dispatch(n):e.update([])}}),10)}Ur.focus=function(e){e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),oo(e)},Ur.blur=function(e){e.observer.clearSelectionRange(),oo(e)},Ur.compositionstart=Ur.compositionupdate=function(e){e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},Ur.compositionend=function(e){e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,Fn.ios||Fn.android?Fn.chrome&&Fn.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((function(){return e.observer.flush()})):setTimeout((function(){e.inputState.composing<0&&e.docView.hasComposition&&e.update([])}),50):e.observer.forceFlush())},Ur.contextmenu=function(e){e.inputState.lastContextMenu=Date.now()},qr.beforeinput=function(e,t){var n,i,r;if("insertReplacementText"==t.inputType&&e.observer.editContext){var o=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),a=t.getTargetRanges();if(o&&a.length){var s=a[0],l=e.posAtDOM(s.startContainer,s.startOffset),c=e.posAtDOM(s.endContainer,s.endOffset);return Ir(e,{from:l,to:c,insert:e.state.toText(o)},null),!0}}if(Fn.chrome&&Fn.android&&(r=Nr.find((function(e){return e.inputType==t.inputType})))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){var u=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((function(){var t;((null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0)>u+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}return Fn.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),Fn.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout((function(){return Ur.compositionend(e,t)}),20),!1};var ao=new Set;var so=["pre-wrap","normal","pre-line","break-spaces"],lo=!1;function co(){lo=!1}var uo=function(){function e(e){this.lineWrapping=e,this.doc=J.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}return e.prototype.heightForGap=function(e,t){var n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n},e.prototype.heightForLine=function(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight},e.prototype.setDoc=function(e){return this.doc=e,this},e.prototype.mustRefreshForWrapping=function(e){return so.indexOf(e)>-1!=this.lineWrapping},e.prototype.mustRefreshForHeights=function(e){for(var t=!1,n=0;n<e.length;n++){var i=e[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t},e.prototype.refresh=function(e,t,n,i,r,o){var a=so.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=r,s){this.heightSamples={};for(var l=0;l<o.length;l++){var c=o[l];c<0?l++:this.heightSamples[Math.floor(10*c)]=!0}}return s},e}(),ho=function(){function e(e,t){this.from=e,this.heights=t,this.index=0}return Object.defineProperty(e.prototype,"more",{get:function(){return this.index<this.heights.length},enumerable:!1,configurable:!0}),e}(),po=function(){function e(e,t,n,i,r){this.from=e,this.length=t,this.top=n,this.height=i,this._content=r}return Object.defineProperty(e.prototype,"type",{get:function(){return"number"==typeof this._content?Kn.Text:Array.isArray(this._content)?this._content:this._content.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this.from+this.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"widget",{get:function(){return this._content instanceof $n?this._content.widget:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"widgetLineBreaks",{get:function(){return"number"==typeof this._content?this._content:0},enumerable:!1,configurable:!0}),e.prototype.join=function(t){var n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new e(this.from,this.length+t.length,this.top,this.height+t.height,n)},e}(),fo=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(fo||(fo={})),mo=.001,vo=function(){function e(e,t,n){void 0===n&&(n=2),this.length=e,this.height=t,this.flags=n}return Object.defineProperty(e.prototype,"outdated",{get:function(){return(2&this.flags)>0},set:function(e){this.flags=(e?2:0)|-3&this.flags},enumerable:!1,configurable:!0}),e.prototype.setHeight=function(e){this.height!=e&&(Math.abs(this.height-e)>mo&&(lo=!0),this.height=e)},e.prototype.replace=function(t,n,i){return e.of(i)},e.prototype.decomposeLeft=function(e,t){t.push(this)},e.prototype.decomposeRight=function(e,t){t.push(this)},e.prototype.applyChanges=function(e,t,n,i){for(var r=this,o=n.doc,a=i.length-1;a>=0;a--){var s=i[a],l=s.fromA,c=s.toA,u=s.fromB,h=s.toB,d=r.lineAt(l,fo.ByPosNoHeight,n.setDoc(t),0,0),p=d.to>=c?d:r.lineAt(c,fo.ByPosNoHeight,n,0,0);for(h+=p.to-c,c=p.to;a>0&&d.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<d.from&&(d=r.lineAt(l,fo.ByPosNoHeight,n,0,0));u+=d.from-l,l=d.from;var f=Mo.build(n.setDoc(o),e,u,h);r=go(r,r.replace(l,c,f))}return r.updateHeight(n,0)},e.empty=function(){return new bo(0,0)},e.of=function(t){if(1==t.length)return t[0];for(var n=0,i=t.length,r=0,o=0;;)if(n==i)if(r>2*o){(a=t[n-1]).break?t.splice(--n,1,a.left,null,a.right):t.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else{if(!(o>2*r))break;var a;(a=t[i]).break?t.splice(i,1,a.left,null,a.right):t.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else if(r<o){(s=t[n++])&&(r+=s.size)}else{var s;(s=t[--i])&&(o+=s.size)}var l=0;return null==t[n-1]?(l=1,n--):null==t[n]&&(l=1,i++),new ko(e.of(t.slice(0,n)),l,e.of(t.slice(i)))},e}();function go(e,t){return e==t?e:(e.constructor!=t.constructor&&(lo=!0),t)}vo.prototype.size=1;var yo=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.deco=i,r}return f(t,e),t.prototype.blockAt=function(e,t,n,i){return new po(i,this.length,n,this.height,this.deco||0)},t.prototype.lineAt=function(e,t,n,i,r){return this.blockAt(0,n,i,r)},t.prototype.forEachLine=function(e,t,n,i,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,n,i,r))},t.prototype.updateHeight=function(e,t,n,i){return void 0===t&&(t=0),void 0===n&&(n=!1),i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this},t.prototype.toString=function(){return"block(".concat(this.length,")")},t}(vo),bo=function(e){function t(t,n){var i=e.call(this,t,n,null)||this;return i.collapsed=0,i.widgetHeight=0,i.breaks=0,i}return f(t,e),t.prototype.blockAt=function(e,t,n,i){return new po(i,this.length,n,this.height,this.breaks)},t.prototype.replace=function(e,n,i){var r=i[0];return 1==i.length&&(r instanceof t||r instanceof wo&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof wo?r=new t(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):vo.of(i)},t.prototype.updateHeight=function(e,t,n,i){return void 0===t&&(t=0),void 0===n&&(n=!1),i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this},t.prototype.toString=function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")},t}(yo),wo=function(e){function t(t){return e.call(this,t,0)||this}return f(t,e),t.prototype.heightMetrics=function(e,t){var n,i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,a=0;if(e.lineWrapping){var s=Math.min(this.height,e.lineHeight*o);n=s/o,this.length>o+1&&(a=(this.height-s)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:a}},t.prototype.blockAt=function(e,t,n,i){var r=this.heightMetrics(t,i),o=r.firstLine,a=r.lastLine,s=r.perLine,l=r.perChar;if(t.lineWrapping){var c=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),u=s+(d=t.doc.lineAt(c)).length*l,h=Math.max(n,e-u/2);return new po(d.from,d.length,h,u,0)}var d=Math.max(0,Math.min(a-o,Math.floor((e-n)/s))),p=t.doc.line(o+d),f=p.from,m=p.length;return new po(f,m,n+s*d,s,0)},t.prototype.lineAt=function(e,t,n,i,r){if(t==fo.ByHeight)return this.blockAt(e,n,i,r);if(t==fo.ByPosNoHeight){var o=n.doc.lineAt(e),a=o.from,s=o.to;return new po(a,s-a,0,0,0)}var l=this.heightMetrics(n,r),c=l.firstLine,u=l.perLine,h=l.perChar,d=n.doc.lineAt(e),p=u+d.length*h,f=d.number-c,m=i+u*f+h*(d.from-r-f);return new po(d.from,d.length,Math.max(i,Math.min(m,i+this.height-p)),p,0)},t.prototype.forEachLine=function(e,t,n,i,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);for(var a=this.heightMetrics(n,r),s=a.firstLine,l=a.perLine,c=a.perChar,u=e,h=i;u<=t;){var d=n.doc.lineAt(u);if(u==e){var p=d.number-s;h+=l*p+c*(e-r-p)}var f=l+c*d.length;o(new po(d.from,d.length,h,f,0)),h+=f,u=d.to+1}},t.prototype.replace=function(e,n,i){var r=this.length-n;if(r>0){var o=i[i.length-1];o instanceof t?i[i.length-1]=new t(o.length+r):i.push(null,new t(r-1))}if(e>0){var a=i[0];a instanceof t?i[0]=new t(e+a.length):i.unshift(new t(e-1),null)}return vo.of(i)},t.prototype.decomposeLeft=function(e,n){n.push(new t(e-1),null)},t.prototype.decomposeRight=function(e,n){n.push(null,new t(this.length-e-1))},t.prototype.updateHeight=function(e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=!1);var o=n+this.length;if(r&&r.from<=n+this.length&&r.more){var a=[],s=Math.max(n,r.from),l=-1;for(r.from>n&&a.push(new t(r.from-n-1).updateHeight(e,n));s<=o&&r.more;){var c=e.doc.lineAt(s).length;a.length&&a.push(null);var u=r.heights[r.index++];-1==l?l=u:Math.abs(u-l)>=mo&&(l=-2);var h=new bo(c,u);h.outdated=!1,a.push(h),s+=c+1}s<=o&&a.push(null,new t(o-s).updateHeight(e,s));var d=vo.of(a);return(l<0||Math.abs(d.height-this.height)>=mo||Math.abs(l-this.heightMetrics(e,n).perLine)>=mo)&&(lo=!0),go(this,d)}return(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1),this},t.prototype.toString=function(){return"gap(".concat(this.length,")")},t}(vo),ko=function(e){function t(t,n,i){var r=e.call(this,t.length+n+i.length,t.height+i.height,n|(t.outdated||i.outdated?2:0))||this;return r.left=t,r.right=i,r.size=t.size+i.size,r}return f(t,e),Object.defineProperty(t.prototype,"break",{get:function(){return 1&this.flags},enumerable:!1,configurable:!0}),t.prototype.blockAt=function(e,t,n,i){var r=n+this.left.height;return e<r?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)},t.prototype.lineAt=function(e,t,n,i,r){var o=i+this.left.height,a=r+this.left.length+this.break,s=t==fo.ByHeight?e<o:e<a,l=s?this.left.lineAt(e,t,n,i,r):this.right.lineAt(e,t,n,o,a);if(this.break||(s?l.to<a:l.from>a))return l;var c=t==fo.ByPosNoHeight?fo.ByPosNoHeight:fo.ByPos;return s?l.join(this.right.lineAt(a,c,n,o,a)):this.left.lineAt(a,c,n,i,r).join(l)},t.prototype.forEachLine=function(e,t,n,i,r,o){var a=i+this.left.height,s=r+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,n,i,r,o),t>=s&&this.right.forEachLine(e,t,n,a,s,o);else{var l=this.lineAt(s,fo.ByPos,n,i,r);e<l.from&&this.left.forEachLine(e,l.from-1,n,i,r,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,a,s,o)}},t.prototype.replace=function(e,t,n){var i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));var r=[];e>0&&this.decomposeLeft(e,r);for(var o=r.length,a=0,s=n;a<s.length;a++){var l=s[a];r.push(l)}if(e>0&&Co(r,o-1),t<this.length){var c=r.length;this.decomposeRight(t,r),Co(r,c)}return vo.of(r)},t.prototype.decomposeLeft=function(e,t){var n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++n&&t.push(null),e>n&&this.right.decomposeLeft(e-n,t)},t.prototype.decomposeRight=function(e,t){var n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)},t.prototype.balanced=function(e,t){return e.size>2*t.size||t.size>2*e.size?vo.of(this.break?[e,null,t]:[e,t]):(this.left=go(this.left,e),this.right=go(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)},t.prototype.updateHeight=function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=!1);var r=this.left,o=this.right,a=t+r.length+this.break,s=null;return i&&i.from<=t+r.length&&i.more?s=r=r.updateHeight(e,t,n,i):r.updateHeight(e,t,n),i&&i.from<=a+o.length&&i.more?s=o=o.updateHeight(e,a,n,i):o.updateHeight(e,a,n),s?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)},t.prototype.toString=function(){return this.left+(this.break?" ":"-")+this.right},t}(vo);function Co(e,t){var n,i;null==e[t]&&(n=e[t-1])instanceof wo&&(i=e[t+1])instanceof wo&&e.splice(t-1,3,new wo(n.length+1+i.length))}var Mo=function(){function e(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}return Object.defineProperty(e.prototype,"isCovered",{get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering},enumerable:!1,configurable:!0}),e.prototype.span=function(e,t){if(this.lineStart>-1){var n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof bo?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new bo(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t},e.prototype.point=function(e,t,n){if(e<t||n.heightRelevant){var i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);var o=t-e;n.block?this.addBlock(new yo(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)},e.prototype.enterLine=function(){if(!(this.lineStart>-1)){var e=this.oracle.doc.lineAt(this.pos),t=e.from,n=e.to;this.lineStart=t,this.lineEnd=n,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new bo(this.pos-t,-1)),this.writtenTo=this.pos}},e.prototype.blankContent=function(e,t){var n=new wo(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n},e.prototype.ensureLine=function(){this.enterLine();var e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof bo)return e;var t=new bo(0,-1);return this.nodes.push(t),t},e.prototype.addBlock=function(e){this.enterLine();var t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)},e.prototype.addLineDeco=function(e,t,n){var i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n},e.prototype.finish=function(e){var t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof bo||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new bo(0,-1));for(var n=e,i=0,r=this.nodes;i<r.length;i++){var o=r[i];o instanceof bo&&o.updateHeight(this.oracle,n),n+=o?o.length:1}return this.nodes},e.build=function(t,n,i,r){var o=new e(i,t);return wt.spans(n,i,r,o,0),o.finish(i)},e}();var Eo=function(){function e(){this.changes=[]}return e.prototype.compareRange=function(){},e.prototype.comparePoint=function(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&Jn(e,t,this.changes,5)},e}();function So(e,t){for(var n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),a=Math.min(r.innerWidth,n.right),s=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom),c=e.parentNode;c&&c!=i.body;)if(1==c.nodeType){var u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&"visible"!=h.overflow){var d=u.getBoundingClientRect();o=Math.max(o,d.left),a=Math.min(a,d.right),s=Math.max(s,d.top),l=Math.min(c==e.parentNode?r.innerHeight:l,d.bottom)}c="absolute"==h.position||"fixed"==h.position?u.offsetParent:u.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+t),bottom:Math.max(s,l)-(n.top+t)}}function xo(e,t){var n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}var To=function(){function e(e,t,n,i){this.from=e,this.to=t,this.size=n,this.displaySize=i}return e.same=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0},e.prototype.draw=function(e,t){return Yn.replace({widget:new Do(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)},e}(),Do=function(e){function t(t,n){var i=e.call(this)||this;return i.size=t,i.vertical=n,i}return f(t,e),t.prototype.eq=function(e){return e.size==this.size&&e.vertical==this.vertical},t.prototype.toDOM=function(){var e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return this.vertical?this.size:-1},enumerable:!1,configurable:!0}),t}(Gn),Ao=function(){function e(e){var t=this;this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Fo,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ai.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;var n=e.facet(Ji).some((function(e){return"function"!=typeof e&&"cm-lineWrapping"==e.class}));this.heightOracle=new uo(n),this.stateDeco=e.facet(er).filter((function(e){return"function"!=typeof e})),this.heightMap=vo.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle.setDoc(e.doc),[new lr(0,0,0,e.doc.length)]);for(var i=0;i<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Yn.set(this.lineGaps.map((function(e){return e.draw(t,!1)}))),this.computeVisibleRanges()}return e.prototype.updateForViewport=function(){for(var e=[this.viewport],t=this.state.selection.main,n=function(n){var r=n?t.head:t.anchor;if(!e.some((function(e){var t=e.from,n=e.to;return r>=t&&r<=n}))){var o=i.lineBlockAt(r),a=o.from,s=o.to;e.push(new Lo(a,s))}},i=this,r=0;r<=1;r++)n(r);return this.viewports=e.sort((function(e,t){return e.from-t.from})),this.updateScaler()},e.prototype.updateScaler=function(){var e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Fo:new Oo(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2},e.prototype.updateViewportLines=function(){var e=this;this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(function(t){e.viewportLines.push(Bo(t,e.scaler))}))},e.prototype.update=function(e,t){void 0===t&&(t=null),this.state=e.state;var n=this.stateDeco;this.stateDeco=this.state.facet(er).filter((function(e){return"function"!=typeof e}));var i,r,o,a,s=e.changedRanges,l=lr.extendWithRanges(s,(i=n,r=this.stateDeco,o=e?e.changes:ve.empty(this.state.doc.length),a=new Eo,wt.compare(i,r,o,a,0),a.changes)),c=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);co(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=c||lo)&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);var h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));var d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(d||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(qi)&&(this.mustEnforceCursorAssoc=!0)},e.prototype.measure=function(e){var t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?ai.RTL:ai.LTR;var o=this.heightOracle.mustRefreshForWrapping(r),a=t.getBoundingClientRect(),s=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;var l=0,c=0;if(a.width&&a.height){var u=rn(t,a),h=u.scaleX,d=u.scaleY;(h>.005&&Math.abs(this.scaleX-h)>.005||d>.005&&Math.abs(this.scaleY-d)>.005)&&(this.scaleX=h,this.scaleY=d,l|=16,o=s=!0)}var p=(parseInt(n.paddingTop)||0)*this.scaleY,f=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==p&&this.paddingBottom==f||(this.paddingTop=p,this.paddingBottom=f,l|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=16);var m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=dn(e.scrollDOM);var v=(this.printing?xo:So)(t,this.paddingTop),g=v.top-this.pixelViewport.top,y=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;var b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(s=!0)),!this.inView)return 0;var w=a.width;if(this.contentDOMWidth==w&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,l|=16),s){var k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(o=!0),o||i.lineWrapping&&Math.abs(w-this.contentDOMWidth)>i.charWidth){var C=e.docView.measureTextSize(),M=C.lineHeight,E=C.charWidth,S=C.textHeight;(o=M>0&&i.refresh(r,M,E,S,w/E,k))&&(e.docView.minWidth=0,l|=16)}g>0&&y>0?c=Math.max(g,y):g<0&&y<0&&(c=Math.min(g,y)),co();for(var x=0,T=this.viewports;x<T.length;x++){var D=T[x],A=D.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(D);this.heightMap=(o?vo.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle,[new lr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new ho(D.from,A))}lo&&(l|=2)}var L=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return L&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||L)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l},Object.defineProperty(e.prototype,"visibleTop",{get:function(){return this.scaler.fromDOM(this.pixelViewport.top)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleBottom",{get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)},enumerable:!1,configurable:!0}),e.prototype.getViewport=function(e,t){var n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,o=this.visibleTop,a=this.visibleBottom,s=new Lo(i.lineAt(o-1e3*n,fo.ByHeight,r,0,0).from,i.lineAt(a+1e3*(1-n),fo.ByHeight,r,0,0).to);if(t){var l=t.range.head;if(l<s.from||l>s.to){var c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=i.lineAt(l,fo.ByPos,r,0,0),h=void 0;h="center"==t.y?(u.top+u.bottom)/2-c/2:"start"==t.y||"nearest"==t.y&&l<s.from?u.top:u.bottom-c,s=new Lo(i.lineAt(h-500,fo.ByHeight,r,0,0).from,i.lineAt(h+c+500,fo.ByHeight,r,0,0).to)}}return s},e.prototype.mapViewport=function(e,t){var n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Lo(this.heightMap.lineAt(n,fo.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,fo.ByPos,this.heightOracle,0,0).to)},e.prototype.viewportIsAppropriate=function(e,t){var n=e.from,i=e.to;if(void 0===t&&(t=0),!this.inView)return!0;var r=this.heightMap.lineAt(n,fo.ByPos,this.heightOracle,0,0).top,o=this.heightMap.lineAt(i,fo.ByPos,this.heightOracle,0,0).bottom,a=this.visibleTop,s=this.visibleBottom;return(0==n||r<=a-Math.max(10,Math.min(-t,250)))&&(i==this.state.doc.length||o>=s+Math.max(10,Math.min(t,250)))&&r>a-2e3&&o<s+2e3},e.prototype.mapLineGaps=function(e,t){if(!e.length||t.empty)return e;for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i];t.touchesRange(o.from,o.to)||n.push(new To(t.mapPos(o.from),t.mapPos(o.to),o.size,o.displaySize))}return n},e.prototype.ensureLineGaps=function(e,t){var n=this,i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,a=r<<1;if(this.defaultTextDirection!=ai.LTR&&!i)return[];for(var s=[],l=function(r,a,c,u){if(!(a-r<o)){var h=n.state.selection.main,d=[h.from];h.empty||d.push(h.to);for(var p=0,f=d;p<f.length;p++){var m=f[p];if(m>r&&m<a)return l(r,m-10,c,u),void l(m+10,a,c,u)}var v=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];if(t(r))return r}return}(e,(function(e){return e.from>=c.from&&e.to<=c.to&&Math.abs(e.from-r)<o&&Math.abs(e.to-a)<o&&!d.some((function(t){return e.from<t&&e.to>t}))}));if(!v){if(a<c.to&&t&&i&&t.visibleRanges.some((function(e){return e.from<=a&&e.to>=a}))){var g=t.moveToLineBoundary(Ee.cursor(a),!1,!0).head;g>r&&(a=g)}var y=n.gapSize(c,r,a,u);v=new To(r,a,y,i||y<2e6?y:2e6)}s.push(v)}},c=function(t){if(!(t.length<a||t.type!=Kn.Text)){var o=function(e,t,n){var i=[],r=e,o=0;wt.spans(n,e,t,{span:function(){},point:function(e,t){e>r&&(i.push({from:r,to:e}),o+=e-r),r=t}},20),r<t&&(i.push({from:r,to:t}),o+=t-r);return{total:o,ranges:i}}(t.from,t.to,n.stateDeco);if(!(o.total<a)){var s,c,u=n.scrollTarget?n.scrollTarget.range.head:null;if(i){var h=r/n.heightOracle.lineLength*n.heightOracle.lineHeight,d=void 0,p=void 0;if(null!=u)d=(w=Io(o,u))-(k=((n.visibleBottom-n.visibleTop)/2+h)/t.height),p=w+k;else d=(n.visibleTop-t.top-h)/t.height,p=(n.visibleBottom-t.top+h)/t.height;s=Po(o,d),c=Po(o,p)}else{var f=o.total*n.heightOracle.charWidth,m=r*n.heightOracle.charWidth,v=0;if(f>2e6)for(var g=0,y=e;g<y.length;g++){var b=y[g];b.from>=t.from&&b.from<t.to&&b.size!=b.displaySize&&b.from*n.heightOracle.charWidth+v<n.pixelViewport.left&&(v=b.size-b.displaySize)}var w,k,C=n.pixelViewport.left+v,M=n.pixelViewport.right+v,E=void 0,S=void 0;if(null!=u)E=(w=Io(o,u))-(k=((M-C)/2+m)/f),S=w+k;else E=(C-m)/f,S=(M+m)/f;s=Po(o,E),c=Po(o,S)}s>t.from&&l(t.from,s,t,o),c<t.to&&l(c,t.to,t,o)}}},u=0,h=this.viewportLines;u<h.length;u++){var d=h[u];Array.isArray(d.type)?d.type.forEach(c):c(d)}return s},e.prototype.gapSize=function(e,t,n,i){var r=Io(i,n)-Io(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r},e.prototype.updateLineGaps=function(e){var t=this;To.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Yn.set(e.map((function(e){return e.draw(t,t.heightOracle.lineWrapping)}))))},e.prototype.computeVisibleRanges=function(e){var t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));var n=[];wt.spans(t,this.viewport.from,this.viewport.to,{span:function(e,t){n.push({from:e,to:t})},point:function(){}},20);var i=0;if(n.length!=this.visibleRanges.length)i=12;else for(var r=0;r<n.length&&!(8&i);r++){var o=this.visibleRanges[r],a=n[r];o.from==a.from&&o.to==a.to||(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=n,i},e.prototype.lineBlockAt=function(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((function(t){return t.from<=e&&t.to>=e}))||Bo(this.heightMap.lineAt(e,fo.ByPos,this.heightOracle,0,0),this.scaler)},e.prototype.lineBlockAtHeight=function(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((function(t){return t.top<=e&&t.bottom>=e}))||Bo(this.heightMap.lineAt(this.scaler.fromDOM(e),fo.ByHeight,this.heightOracle,0,0),this.scaler)},e.prototype.scrollAnchorAt=function(e){var t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]},e.prototype.elementAtHeight=function(e){return Bo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)},Object.defineProperty(e.prototype,"docHeight",{get:function(){return this.scaler.toDOM(this.heightMap.height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this.docHeight+this.paddingTop+this.paddingBottom},enumerable:!1,configurable:!0}),e}(),Lo=function(e,t){this.from=e,this.to=t};function Po(e,t){var n=e.total,i=e.ranges;if(t<=0)return i[0].from;if(t>=1)return i[i.length-1].to;for(var r=Math.floor(n*t),o=0;;o++){var a=i[o],s=a.from,l=a.to-s;if(r<=l)return s+r;r-=l}}function Io(e,t){for(var n=0,i=0,r=e.ranges;i<r.length;i++){var o=r[i],a=o.from,s=o.to;if(t<=s){n+=t-a;break}n+=s-a}return n/e.total}var Fo={toDOM:function(e){return e},fromDOM:function(e){return e},scale:1,eq:function(e){return e==this}},Oo=function(){function e(e,t,n){var i=0,r=0,o=0;this.viewports=n.map((function(n){var r=n.from,o=n.to,a=t.lineAt(r,fo.ByPos,e,0,0).top,s=t.lineAt(o,fo.ByPos,e,0,0).bottom;return i+=s-a,{from:r,to:o,top:a,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(t.height-i);for(var a=0,s=this.viewports;a<s.length;a++){var l=s[a];l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}}return e.prototype.toDOM=function(e){for(var t=0,n=0,i=0;;t++){var r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-n)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);n=r.bottom,i=r.domBottom}},e.prototype.fromDOM=function(e){for(var t=0,n=0,i=0;;t++){var r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return n+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);n=r.bottom,i=r.domBottom}},e.prototype.eq=function(t){return t instanceof e&&(this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((function(e,n){return e.from==t.viewports[n].from&&e.to==t.viewports[n].to})))},e}();function Bo(e,t){if(1==t.scale)return e;var n=t.toDOM(e.top),i=t.toDOM(e.bottom);return new po(e.from,e.length,n,i-n,Array.isArray(e._content)?e._content.map((function(e){return Bo(e,t)})):e._content)}var No=Te.define({combine:function(e){return e.join(" ")}}),Ro=Te.define({combine:function(e){return e.indexOf(!0)>-1}}),Ho=Rt.newName(),Vo=Rt.newName(),zo=Rt.newName(),qo={"&light":"."+Vo,"&dark":"."+zo};function Uo(e,t,n){return new Rt(t,{finish:function(t){return/&/.test(t)?t.replace(/&\w*/,(function(t){if("&"==t)return e;if(!n||!n[t])throw new RangeError("Unsupported selector: ".concat(t));return n[t]})):e+" "+t}})}var _o=Uo("."+Ho,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},qo),Wo={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},jo=Fn.ie&&Fn.ie_version<=11,Go=function(){function e(e){var t=this;this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new an,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((function(n){for(var i=0,r=n;i<r.length;i++){var o=r[i];t.queue.push(o)}(Fn.ie&&Fn.ie_version<=11||Fn.ios&&e.compositionStarted||Fn.windows&&Fn.chrome&&e.compositionStarted&&!e.composing)&&n.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type}))?t.flushSoon():t.flush()})),!window.EditContext||!1===e.constructor.EDIT_CONTEXT||Fn.chrome&&Fn.chrome_version<126||(this.editContext=new Zo(e),e.state.facet(Ki)&&(e.contentDOM.editContext=this.editContext.editContext)),jo&&(this.onCharData=function(e){t.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),t.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((function(){var e;(null===(e=t.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&t.onResize()})),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((function(e){t.parentCheck<0&&(t.parentCheck=setTimeout(t.listenForScroll.bind(t),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=t.intersecting&&(t.intersecting=!t.intersecting,t.intersecting!=t.view.inView&&t.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((function(e){e.length>0&&e[e.length-1].intersectionRatio>0&&t.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}return e.prototype.onScrollChanged=function(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()},e.prototype.onScroll=function(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)},e.prototype.onResize=function(){var e=this;this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((function(){e.resizeTimeout=-1,e.view.requestMeasure()}),50))},e.prototype.onPrint=function(e){var t=this;("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((function(){t.view.viewState.printing=!1,t.view.requestMeasure()}),500))},e.prototype.updateGaps=function(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((function(t,n){return t!=e[n]})))){this.gapIntersection.disconnect();for(var t=0,n=e;t<n.length;t++){var i=n[t];this.gapIntersection.observe(i)}this.gaps=e}},e.prototype.onSelectionChange=function(e){var t=this.selectionChanged;if(this.readSelectionRange()&&!this.delayedAndroidKey){var n=this.view,i=this.selectionRange;if(n.state.facet(Ki)?n.root.activeElement==this.dom:Yt(this.dom,i)){var r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(e)?t||(this.selectionChanged=!1):(Fn.ie&&Fn.ie_version<=11||Fn.android&&Fn.chrome)&&!n.state.selection.main.empty&&i.focusNode&&Xt(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}}},e.prototype.readSelectionRange=function(){var e=this.view,t=Gt(e.root);if(!t)return!1;var n=Fn.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){var n=t.getComposedRanges(e.root)[0];if(n)return Yo(e,n)}var i=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),i=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",r,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),i?Yo(e,i):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;var i=Yt(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){var n=t.focusNode,i=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=i)return!1;for(i=Math.min(i,en(n));;)if(i){if(1!=n.nodeType)return!1;var r=n.childNodes[i-1];"false"==r.contentEditable?i--:i=en(n=r)}else{if(n==e)return!0;i=$t(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)},e.prototype.setSelectionRange=function(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1},e.prototype.clearSelectionRange=function(){this.selectionRange.set(null,0,null,0)},e.prototype.listenForScroll=function(){this.parentCheck=-1;for(var e=0,t=null,n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(var i=0,r=this.scrollTargets;i<r.length;i++){(n=r[i]).removeEventListener("scroll",this.onScroll)}for(var o=0,a=this.scrollTargets=t;o<a.length;o++){(n=a[o]).addEventListener("scroll",this.onScroll)}}},e.prototype.ignore=function(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}},e.prototype.start=function(){this.active||(this.observer.observe(this.dom,Wo),jo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)},e.prototype.stop=function(){this.active&&(this.active=!1,this.observer.disconnect(),jo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))},e.prototype.clear=function(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1},e.prototype.delayAndroidKey=function(e,t){var n,i=this;if(!this.delayedAndroidKey){this.flushingAndroidKey=this.view.win.requestAnimationFrame((function(){var e=i.delayedAndroidKey;e&&(i.clearDelayedAndroidKey(),i.view.inputState.lastKeyCode=e.keyCode,i.view.inputState.lastKeyTime=Date.now(),!i.flush()&&e.force&&un(i.dom,e.key,e.keyCode))}))}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})},e.prototype.clearDelayedAndroidKey=function(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1},e.prototype.flushSoon=function(){var e=this;this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((function(){e.delayedFlush=-1,e.flush()})))},e.prototype.forceFlush=function(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()},e.prototype.pendingRecords=function(){for(var e=0,t=this.observer.takeRecords();e<t.length;e++){var n=t[e];this.queue.push(n)}return this.queue},e.prototype.processRecords=function(){var e=this.pendingRecords();e.length&&(this.queue=[]);for(var t=-1,n=-1,i=!1,r=0,o=e;r<o.length;r++){var a=o[r],s=this.readMutation(a);s&&(s.typeOver&&(i=!0),-1==t?(t=s.from,n=s.to):(t=Math.min(s.from,t),n=Math.max(s.to,n)))}return{from:t,to:n,typeOver:i}},e.prototype.readChange=function(){var e=this.processRecords(),t=e.from,n=e.to,i=e.typeOver,r=this.selectionChanged&&Yt(this.dom,this.selectionRange);if(t<0&&!r)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;var o=new Lr(this.view,t,n,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o},e.prototype.flush=function(e){if(void 0===e&&(e=!0),this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();var t=this.readChange();if(!t)return this.view.requestMeasure(),!1;var n=this.view.state,i=Pr(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i},e.prototype.readMutation=function(e){var t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){var n=Ko(t,e.previousSibling||e.target.previousSibling,-1),i=Ko(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null},e.prototype.setWindow=function(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))},e.prototype.addWindowListeners=function(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)},e.prototype.removeWindowListeners=function(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)},e.prototype.update=function(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ki)!=e.state.facet(Ki)&&(e.view.contentDOM.editContext=e.state.facet(Ki)?this.editContext.editContext:null))},e.prototype.destroy=function(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(var i=0,r=this.scrollTargets;i<r.length;i++){r[i].removeEventListener("scroll",this.onScroll)}this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())},e}();function Ko(e,t,n){for(;t;){var i=gn.get(t);if(i&&i.parent==e)return i;var r=t.parentNode;t=r!=e.dom?r:n>0?t.nextSibling:t.previousSibling}return null}function Yo(e,t){var n,i=t.startContainer,r=t.startOffset,o=t.endContainer,a=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor);return Xt(s.node,s.offset,o,a)&&(i=(n=[o,a,i,r])[0],r=n[1],o=n[2],a=n[3]),{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:a}}var Zo=function(){function e(e){var t=this;this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);var n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});for(var i in this.handlers.textupdate=function(n){var i=e.state.selection.main.anchor,r=t.toEditorPos(n.updateRangeStart),o=t.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!t.composing&&(t.composing={contextBase:n.updateRangeStart,editorBase:r,drifted:!1});var a={from:r,to:o,insert:J.of(n.text.split("\n"))};if(a.from==t.from&&i<t.from?a.from=i:a.to==t.to&&i>t.to&&(a.to=i),a.from!=a.to||a.insert.length){if(t.pendingContextChange=a,!e.state.readOnly){var s=t.to-t.from+(a.to-a.from+a.insert.length);Ir(e,a,Ee.single(t.toEditorPos(n.selectionStart,s),t.toEditorPos(n.selectionEnd,s)))}t.pendingContextChange&&(t.revertPending(e.state),t.setSelection(e.state))}},this.handlers.characterboundsupdate=function(i){for(var r=[],o=null,a=t.toEditorPos(i.rangeStart),s=t.toEditorPos(i.rangeEnd);a<s;a++){var l=e.coordsForChar(a);o=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||o||new DOMRect,r.push(o)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=function(n){for(var i=[],r=0,o=n.getTextFormats();r<o.length;r++){var a=o[r],s=a.underlineStyle,l=a.underlineThickness;if("None"!=s&&"None"!=l){var c=t.toEditorPos(a.rangeStart),u=t.toEditorPos(a.rangeEnd);if(c<u){var h="text-decoration: underline ".concat("Dashed"==s?"dashed ":"Squiggle"==s?"wavy ":"").concat("Thin"==l?1:2,"px");i.push(Yn.mark({attributes:{style:h}}).range(c,u))}}}e.dispatch({effects:ji.of(Yn.set(i))})},this.handlers.compositionstart=function(){e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=function(){if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,t.composing){var n=t.composing.drifted;t.composing=null,n&&t.reset(e.state)}},this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:function(e){t.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());var n=Gt(e.root);n&&n.rangeCount&&t.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}return e.prototype.applyEdits=function(e){var t=this,n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((function(o,a,s,l,c){if(!i){var u=c.length-(a-o);if(r&&a>=r.to){if(r.from==o&&r.to==a&&r.insert.eq(c))return r=t.pendingContextChange=null,n+=u,void(t.to+=u);r=null,t.revertPending(e.state)}if(o+=n,(a+=n)<=t.from)t.from+=u,t.to+=u;else if(o<t.to){if(o<t.from||a>t.to||t.to-t.from+c.length>3e4)return void(i=!0);t.editContext.updateText(t.toContextPos(o),t.toContextPos(a),c.toString()),t.to+=u}n+=u}})),r&&!i&&this.revertPending(e.state),!i},e.prototype.update=function(e){var t=this,n=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some((function(e){return!e.isUserEvent("input.type")&&e.changes.touchesRange(t.from,t.to)})))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)},e.prototype.resetRange=function(e){var t=e.selection.main.head;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)},e.prototype.reset=function(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)},e.prototype.revertPending=function(e){var t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))},e.prototype.setSelection=function(e){var t=e.selection.main,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)},e.prototype.rangeIsValid=function(e){var t=e.selection.main.head;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)},e.prototype.toEditorPos=function(e,t){void 0===t&&(t=this.to-this.from),e=Math.min(e,t);var n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from},e.prototype.toContextPos=function(e){var t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from},e.prototype.destroy=function(){for(var e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])},e}(),Xo=function(){function e(e){void 0===e&&(e={});var t,n,i=this;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);var r=e.dispatch;this.dispatchTransactions=e.dispatchTransactions||r&&function(e){return e.forEach((function(e){return r(e,i)}))}||function(e){return i.update(e)},this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||(null===(t=e.parent)||void 0===t?void 0:t.ownerDocument)||document,this.viewState=new Ao(e.state||ft.create(e)),e.scrollTo&&e.scrollTo.is(Wi)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Zi).map((function(e){return new $i(e)}));for(var o=0,a=this.plugins;o<a.length;o++){a[o].update(this)}this.observer=new Go(this),this.inputState=new Fr(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ur(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(n=document.fonts)||void 0===n?void 0:n.ready)&&document.fonts.ready.then((function(){return i.requestMeasure()}))}return Object.defineProperty(e.prototype,"state",{get:function(){return this.viewState.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return this.viewState.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleRanges",{get:function(){return this.viewState.visibleRanges},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inView",{get:function(){return this.viewState.inView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"composing",{get:function(){return this.inputState.composing>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositionStarted",{get:function(){return this.inputState.composing>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"win",{get:function(){return this.dom.ownerDocument.defaultView||window},enumerable:!1,configurable:!0}),e.prototype.dispatch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=1==t.length&&t[0]instanceof it?t:1==t.length&&Array.isArray(t[0])?t[0]:[(e=this.state).update.apply(e,t)];this.dispatchTransactions(i,this)},e.prototype.update=function(e){var t=this;if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");for(var n,i=!1,r=!1,o=this.state,a=0,s=e;a<s.length;a++){if((v=s[a]).startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=v.state}if(this.destroyed)this.viewState.state=o;else{var l=this.hasFocus,c=0,u=null;e.some((function(e){return e.annotation(io)}))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,(u=ro(o,l))||(c=1));var h=this.observer.delayedAndroidKey,d=null;if(h?(this.observer.clearDelayedAndroidKey(),((d=this.observer.readChange())&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(d=null)):this.observer.clear(),o.facet(ft.phrases)!=this.state.facet(ft.phrases))return this.setState(o);(n=cr.create(this,o,e)).flags|=c;var p=this.viewState.scrollTarget;try{this.updateState=2;for(var f=0,m=e;f<m.length;f++){var v=m[f];if(p&&(p=p.map(v.changes)),v.scrollIntoView){var g=v.state.selection.main;p=new _i(g.empty?g:Ee.cursor(g.head,g.head>g.anchor?-1:1))}for(var y=0,b=v.effects;y<b.length;y++){var w=b[y];w.is(Wi)&&(p=w.value.clip(this.state))}}this.viewState.update(n,p),this.bidiCache=Jo.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),i=this.docView.update(n),this.state.facet(sr)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some((function(e){return e.isUserEvent("select.pointer")})))}finally{this.updateState=0}if(n.startState.facet(No)!=n.state.facet(No)&&(this.viewState.mustMeasureContent=!0),(i||r||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!n.empty)for(var k=0,C=this.state.facet(Bi);k<C.length;k++){var M=C[k];try{M(n)}catch(w){Gi(this.state,w,"update listener")}}(u||d)&&Promise.resolve().then((function(){u&&t.state==u.startState&&t.dispatch(u),d&&!Pr(t,d)&&h.force&&un(t.contentDOM,h.key,h.keyCode)}))}},e.prototype.setState=function(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)this.viewState.state=e;else{this.updateState=2;var t=this.hasFocus;try{for(var n=0,i=this.plugins;n<i.length;n++){i[n].destroy(this)}this.viewState=new Ao(e),this.plugins=e.facet(Zi).map((function(e){return new $i(e)})),this.pluginMap.clear();for(var r=0,o=this.plugins;r<o.length;r++){o[r].update(this)}this.docView.destroy(),this.docView=new ur(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}},e.prototype.updatePlugins=function(e){var t=e.startState.facet(Zi),n=e.state.facet(Zi);if(t!=n){for(var i=[],r=0,o=n;r<o.length;r++){var a=o[r],s=t.indexOf(a);if(s<0)i.push(new $i(a));else{var l=this.plugins[s];l.mustUpdate=e,i.push(l)}}for(var c=0,u=this.plugins;c<u.length;c++){var h=u[c];h.mustUpdate!=e&&h.destroy(this)}this.plugins=i,this.pluginMap.clear()}else for(var d=0,p=this.plugins;d<p.length;d++){p[d].mustUpdate=e}for(var f=0;f<this.plugins.length;f++)this.plugins[f].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)},e.prototype.docViewUpdate=function(){for(var e=0,t=this.plugins;e<t.length;e++){var n=t[e].value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(e){Gi(this.state,e,"doc view update listener")}}},e.prototype.measure=function(e){var t,n=this;if(void 0===e&&(e=!0),!this.destroyed){if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();var i=null,r=this.scrollDOM,o=r.scrollTop*this.scaleY,a=this.viewState,s=a.scrollAnchorPos,l=a.scrollAnchorHeight;Math.abs(o-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(var c=0;;c++){if(l<0)if(dn(r))s=-1,l=this.viewState.heightMap.height;else{var u=this.viewState.scrollAnchorAt(o);s=u.from,l=u.top}this.updateState=1;var h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var d=[];4&h||(t=[d,this.measureRequests],this.measureRequests=t[0],d=t[1]);var p=d.map((function(e){try{return e.read(n)}catch(e){return Gi(n.state,e),Qo}})),f=cr.create(this,this.state,[]),m=!1;f.flags|=h,i?i.flags|=h:i=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),(m=this.docView.update(f))&&this.docViewUpdate());for(var v=0;v<d.length;v++)if(p[v]!=Qo)try{var g=d[v];g.write&&g.write(p[v],this)}catch(e){Gi(this.state,e)}if(m&&this.docView.updateSelection(!0),!f.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}var y=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(y>1||y<-1){o+=y,r.scrollTop=o/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(var b=0,w=this.state.facet(Bi);b<w.length;b++){(0,w[b])(i)}}},Object.defineProperty(e.prototype,"themeClasses",{get:function(){return Ho+" "+(this.state.facet(Ro)?zo:Vo)+" "+this.state.facet(No)},enumerable:!1,configurable:!0}),e.prototype.updateAttrs=function(){var e=this,t=ea(this,Qi,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ki)?"true":"false",class:"cm-content",style:"".concat(Fn.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),ea(this,Ji,n);var i=this.observer.ignore((function(){var i=Wn(e.contentDOM,e.contentAttrs,n),r=Wn(e.dom,e.editorAttrs,t);return i||r}));return this.editorAttrs=t,this.contentAttrs=n,i},e.prototype.showAnnouncements=function(t){for(var n=!0,i=0,r=t;i<r.length;i++)for(var o=0,a=r[i].effects;o<a.length;o++){var s=a[o];if(s.is(e.announce))n&&(this.announceDOM.textContent=""),n=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=s.value}},e.prototype.mountStyles=function(){this.styleModules=this.state.facet(sr);var t=this.state.facet(e.cspNonce);Rt.mount(this.root,this.styleModules.concat(_o).reverse(),t?{nonce:t}:void 0)},e.prototype.readMeasured=function(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)},e.prototype.requestMeasure=function(e){var t=this;if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((function(){return t.measure()}))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(var n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key)return void(this.measureRequests[n]=e);this.measureRequests.push(e)}},e.prototype.plugin=function(e){var t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((function(t){return t.spec==e}))||null),t&&t.update(this).value},Object.defineProperty(e.prototype,"documentTop",{get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"documentPadding",{get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this.viewState.scaleX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this.viewState.scaleY},enumerable:!1,configurable:!0}),e.prototype.elementAtHeight=function(e){return this.readMeasured(),this.viewState.elementAtHeight(e)},e.prototype.lineBlockAtHeight=function(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)},Object.defineProperty(e.prototype,"viewportLineBlocks",{get:function(){return this.viewState.viewportLines},enumerable:!1,configurable:!0}),e.prototype.lineBlockAt=function(e){return this.viewState.lineBlockAt(e)},Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this.viewState.contentHeight},enumerable:!1,configurable:!0}),e.prototype.moveByChar=function(e,t,n){return Sr(this,e,Mr(this,e,t,n))},e.prototype.moveByGroup=function(e,t){var n=this;return Sr(this,e,Mr(this,e,t,(function(t){return function(e,t,n){var i=e.state.charCategorizer(t),r=i(n);return function(e){var t=i(e);return r==ht.Space&&(r=t),r==t}}(n,e.head,t)})))},e.prototype.visualLineSide=function(e,t){var n=this.bidiSpans(e),i=this.textDirectionAt(e.from),r=n[t?n.length-1:0];return Ee.cursor(r.side(t,i)+e.from,r.forward(!t,i)?1:-1)},e.prototype.moveToLineBoundary=function(e,t,n){return void 0===n&&(n=!0),function(e,t,n,i){var r=Cr(e,t.head),o=i&&r.type==Kn.Text&&(e.lineWrapping||r.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head):null;if(o){var a=e.dom.getBoundingClientRect(),s=e.textDirectionAt(r.from),l=e.posAtCoords({x:n==(s==ai.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(null!=l)return Ee.cursor(l,n?-1:1)}return Ee.cursor(n?r.to:r.from,n?-1:1)}(this,e,t,n)},e.prototype.moveVertically=function(e,t,n){return Sr(this,e,function(e,t,n,i){var r=t.head,o=n?1:-1;if(r==(n?e.state.doc.length:0))return Ee.cursor(r,t.assoc);var a,s=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(r,t.assoc||-1),u=e.documentTop;if(c)null==s&&(s=c.left-l.left),a=o<0?c.top:c.bottom;else{var h=e.viewState.lineBlockAt(r);null==s&&(s=Math.min(l.right-l.left,e.defaultCharacterWidth*(r-h.from))),a=(o<0?h.top:h.bottom)+u}for(var d=l.left+s,p=null!=i?i:e.viewState.heightOracle.textHeight>>1,f=0;;f+=10){var m=a+(p+f)*o,v=wr(e,{x:d,y:m},!1,o);if(m<l.top||m>l.bottom||(o<0?v<r:v>r)){var g=e.docView.coordsForChar(v),y=!g||m<g.top?-1:1;return Ee.cursor(v,y,void 0,s)}}}(this,e,t,n))},e.prototype.domAtPos=function(e){return this.docView.domAtPos(e)},e.prototype.posAtDOM=function(e,t){return void 0===t&&(t=0),this.docView.posFromDOM(e,t)},e.prototype.posAtCoords=function(e,t){return void 0===t&&(t=!0),this.readMeasured(),wr(this,e,t)},e.prototype.coordsAtPos=function(e,t){void 0===t&&(t=1),this.readMeasured();var n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;var i=this.state.doc.lineAt(e),r=this.bidiSpans(i);return tn(n,r[ki.find(r,e-i.from,-1,t)].dir==ai.LTR==t>0)},e.prototype.coordsForChar=function(e){return this.readMeasured(),this.docView.coordsForChar(e)},Object.defineProperty(e.prototype,"defaultCharacterWidth",{get:function(){return this.viewState.heightOracle.charWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultLineHeight",{get:function(){return this.viewState.heightOracle.lineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textDirection",{get:function(){return this.viewState.defaultTextDirection},enumerable:!1,configurable:!0}),e.prototype.textDirectionAt=function(e){return!this.state.facet(zi)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))},Object.defineProperty(e.prototype,"lineWrapping",{get:function(){return this.viewState.heightOracle.lineWrapping},enumerable:!1,configurable:!0}),e.prototype.bidiSpans=function(e){if(e.length>$o)return Ti(e.length);for(var t,n=this.textDirectionAt(e.from),i=0,r=this.bidiCache;i<r.length;i++){var o=r[i];if(o.from==e.from&&o.dir==n&&(o.fresh||Ci(o.isolates,t=rr(this,e))))return o.order}t||(t=rr(this,e));var a=xi(e.text,n,t);return this.bidiCache.push(new Jo(e.from,e.to,n,t,!0,a)),a},Object.defineProperty(e.prototype,"hasFocus",{get:function(){var e;return(this.dom.ownerDocument.hasFocus()||Fn.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM},enumerable:!1,configurable:!0}),e.prototype.focus=function(){var e=this;this.observer.ignore((function(){ln(e.contentDOM),e.docView.updateSelection()}))},e.prototype.setRoot=function(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())},e.prototype.destroy=function(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(var e=0,t=this.plugins;e<t.length;e++){t[e].destroy(this)}this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0},e.scrollIntoView=function(e,t){return void 0===t&&(t={}),Wi.of(new _i("number"==typeof e?Ee.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))},e.prototype.scrollSnapshot=function(){var e=this.scrollDOM,t=e.scrollTop,n=e.scrollLeft,i=this.viewState.scrollAnchorAt(t);return Wi.of(new _i(Ee.cursor(i.from),"start","start",i.top-t,n,!0))},e.prototype.setTabFocusMode=function(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)},e.domEventHandlers=function(e){return Xi.define((function(){return{}}),{eventHandlers:e})},e.domEventObservers=function(e){return Xi.define((function(){return{}}),{eventObservers:e})},e.theme=function(e,t){var n=Rt.newName(),i=[No.of(n),sr.of(Uo(".".concat(n),e))];return t&&t.dark&&i.push(Ro.of(!0)),i},e.baseTheme=function(e){return Ve.lowest(sr.of(Uo("."+Ho,e,qo)))},e.findFromDOM=function(e){var t,n=e.querySelector(".cm-content"),i=n&&gn.get(n)||gn.get(e);return(null===(t=null==i?void 0:i.rootView)||void 0===t?void 0:t.view)||null},e}();Xo.styleModule=sr,Xo.inputHandler=Ni,Xo.clipboardInputFilter=Hi,Xo.clipboardOutputFilter=Vi,Xo.scrollHandler=Ui,Xo.focusChangeEffect=Ri,Xo.perLineTextDirection=zi,Xo.exceptionSink=Oi,Xo.updateListener=Bi,Xo.editable=Ki,Xo.mouseSelectionStyle=Fi,Xo.dragMovesSelection=Ii,Xo.clickAddsSelectionRange=Pi,Xo.decorations=er,Xo.outerDecorations=tr,Xo.atomicRanges=nr,Xo.bidiIsolatedRanges=ir,Xo.scrollMargins=or,Xo.darkTheme=Ro,Xo.cspNonce=Te.define({combine:function(e){return e.length?e[0]:""}}),Xo.contentAttributes=Ji,Xo.editorAttributes=Qi,Xo.lineWrapping=Xo.contentAttributes.of({class:"cm-lineWrapping"}),Xo.announce=nt.define();var $o=4096,Qo={},Jo=function(){function e(e,t,n,i,r,o){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}return e.update=function(t,n){if(n.empty&&!t.some((function(e){return e.fresh})))return t;for(var i=[],r=t.length?t[t.length-1].dir:ai.LTR,o=Math.max(0,t.length-10);o<t.length;o++){var a=t[o];a.dir!=r||n.touchesRange(a.from,a.to)||i.push(new e(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i},e}();function ea(e,t,n){for(var i=e.state.facet(t),r=i.length-1;r>=0;r--){var o=i[r],a="function"==typeof o?o(e):o;a&&qn(a,n)}return n}var ta=Fn.mac?"mac":Fn.windows?"win":Fn.linux?"linux":"key";function na(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}var ia=Ve.default(Xo.domEventHandlers({keydown:function(e,t){return ha(aa(t.state),e,t,"editor")}})),ra=Te.define({enables:ia}),oa=new WeakMap;function aa(e){var t=e.facet(ra),n=oa.get(t);return n||oa.set(t,n=function(e,t){void 0===t&&(t=ta);for(var n=Object.create(null),i=Object.create(null),r=function(e,t){var n=i[e];if(null==n)i[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=function(e,i,o,a,s){for(var l,c,u=n[e]||(n[e]=Object.create(null)),h=i.split(/ (?!$)/).map((function(e){return function(e,t){var n,i,r,o,a=e.split(/-(?!$)/),s=a[a.length-1];"Space"==s&&(s=" ");for(var l=0;l<a.length-1;++l){var c=a[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);"mac"==t?o=!0:i=!0}}return n&&(s="Alt-"+s),i&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}(e,t)})),d=function(t){var n=h.slice(0,t).join(" ");r(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[function(t){var i=la={view:t,prefix:n,scope:e};return setTimeout((function(){la==i&&(la=null)}),ca),!0}]})},p=1;p<h.length;p++)d(p);var f=h.join(" ");r(f,!1);var m=u[f]||(u[f]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&m.run.push(o),a&&(m.preventDefault=!0),s&&(m.stopPropagation=!0)},a=0,s=e;a<s.length;a++){var l=s[a],c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(var u=function(e){var t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,stopPropagation:!1,run:[]});var i=l.any;for(var r in t)t[r].run.push((function(e){return i(e,ua)}))},h=0,d=c;h<d.length;h++){u(v=d[h])}var p=l[t]||l.key;if(p)for(var f=0,m=c;f<m.length;f++){var v;o(v=m[f],p,l.run,l.preventDefault,l.stopPropagation),l.shift&&o(v,"Shift-"+p,l.shift,l.preventDefault,l.stopPropagation)}}return n}(t.reduce((function(e,t){return e.concat(t)}),[]))),n}function sa(e,t,n){return ha(aa(e.state),t,e,n)}var la=null,ca=4e3;var ua=null;function ha(e,t,n,i){ua=t;var r=function(e){var t=!(Ut&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||_t&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?qt:zt)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=de(ue(r,0))==r.length&&" "!=r,a="",s=!1,l=!1,c=!1;la&&la.view==n&&la.scope==i&&(a=la.prefix+" ",Hr.indexOf(t.keyCode)<0&&(l=!0,la=null));var u,h,d=new Set,p=function(e){if(e){for(var t=0,i=e.run;t<i.length;t++){var r=i[t];if(!d.has(r)&&(d.add(r),r(n)))return e.stopPropagation&&(c=!0),!0}e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},f=e[i];return f&&(p(f[a+na(r,t,!o)])?s=!0:o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(Fn.windows&&t.ctrlKey&&t.altKey)&&(u=zt[t.keyCode])&&u!=r?(p(f[a+na(u,t,!0)])||t.shiftKey&&(h=qt[t.keyCode])!=r&&h!=u&&p(f[a+na(h,t,!1)]))&&(s=!0):o&&t.shiftKey&&p(f[a+na(r,t,!0)])&&(s=!0),!s&&p(f._any)&&(s=!0)),l&&(s=!0),s&&c&&t.stopPropagation(),ua=null,s}var da=function(){function e(e,t,n,i,r){this.className=e,this.left=t,this.top=n,this.width=i,this.height=r}return e.prototype.draw=function(){var e=document.createElement("div");return e.className=this.className,this.adjust(e),e},e.prototype.update=function(e,t){return t.className==this.className&&(this.adjust(e),!0)},e.prototype.adjust=function(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"},e.prototype.eq=function(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className},e.forRange=function(t,n,i){if(i.empty){var r=t.coordsAtPos(i.head,i.assoc||1);if(!r)return[];var o=pa(t);return[new e(n,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}return ma(t,n,i)},e}();function pa(e){var t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==ai.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function fa(e,t,n,i){var r=e.coordsAtPos(t,2*n);if(!r)return i;var o=e.dom.getBoundingClientRect(),a=(r.top+r.bottom)/2,s=e.posAtCoords({x:o.left+1,y:a}),l=e.posAtCoords({x:o.right-1,y:a});return null==s||null==l?i:{from:Math.max(i.from,Math.min(s,l)),to:Math.min(i.to,Math.max(s,l))}}function ma(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];var i=Math.max(n.from,e.viewport.from),r=Math.min(n.to,e.viewport.to),o=e.textDirection==ai.LTR,a=e.contentDOM,s=a.getBoundingClientRect(),l=pa(e),c=a.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=s.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=s.right-(u?parseInt(u.paddingRight):0),p=Cr(e,i),f=Cr(e,r),m=p.type==Kn.Text?p:null,v=f.type==Kn.Text?f:null;if(m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=fa(e,i,1,m)),v&&(e.lineWrapping||f.widgetLineBreaks)&&(v=fa(e,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return k(C(n.from,n.to,m));var g=m?C(n.from,null,m):M(p,!1),y=v?C(null,n.to,v):M(f,!0),b=[];return(m||p).to<(v||f).from-(m&&v?1:0)||p.widgetLineBreaks>1&&g.bottom+e.defaultLineHeight/2<y.top?b.push(w(h,g.bottom,d,y.top)):g.bottom<y.top&&e.elementAtHeight((g.bottom+y.top)/2).type==Kn.Text&&(g.bottom=y.top=(g.bottom+y.top)/2),k(g).concat(b).concat(k(y));function w(e,n,i,r){return new da(t,e-l.left,n-l.top,i-e,r-n)}function k(e){for(var t=e.top,n=e.bottom,i=e.horizontal,r=[],o=0;o<i.length;o+=2)r.push(w(i[o],t,i[o+1],n));return r}function C(t,n,i){var r=1e9,a=-1e9,s=[];function l(t,n,l,c,u){var p=e.coordsAtPos(t,t==i.to?-2:2),f=e.coordsAtPos(l,l==i.from?2:-2);p&&f&&(r=Math.min(p.top,f.top,r),a=Math.max(p.bottom,f.bottom,a),u==ai.LTR?s.push(o&&n?h:p.left,o&&c?d:f.right):s.push(!o&&c?h:f.left,!o&&n?d:p.right))}for(var c=null!=t?t:i.from,u=null!=n?n:i.to,p=0,f=e.visibleRanges;p<f.length;p++){var m=f[p];if(m.to>c&&m.from<u)for(var v=Math.max(m.from,c),g=Math.min(m.to,u);;){for(var y=e.state.doc.lineAt(v),b=0,w=e.bidiSpans(y);b<w.length;b++){var k=w[b],C=k.from+y.from,M=k.to+y.from;if(C>=g)break;M>v&&l(Math.max(C,v),null==t&&C<=c,Math.min(M,g),null==n&&M>=u,k.dir)}if((v=y.to+1)>=g)break}}return 0==s.length&&l(c,null==t,u,null==n,e.textDirection),{top:r,bottom:a,horizontal:s}}function M(e,t){var n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}var va=function(){function e(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}return e.prototype.update=function(e){e.startState.facet(ga)!=e.state.facet(ga)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))},e.prototype.docViewUpdate=function(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)},e.prototype.setOrder=function(e){for(var t=0,n=e.facet(ga);t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)},e.prototype.measure=function(){return this.layer.markers(this.view)},e.prototype.scale=function(){var e=this.view,t=e.scaleX,n=e.scaleY;t==this.scaleX&&n==this.scaleY||(this.scaleX=t,this.scaleY=n,this.dom.style.transform="scale(".concat(1/t,", ").concat(1/n,")"))},e.prototype.draw=function(e){var t=this;if(e.length!=this.drawn.length||e.some((function(e,n){return i=e,r=t.drawn[n],!(i.constructor==r.constructor&&i.eq(r));var i,r}))){for(var n=this.dom.firstChild,i=0,r=0,o=e;r<o.length;r++){var a=o[r];a.update&&n&&a.constructor&&this.drawn[i].constructor&&a.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(a.draw(),n)}for(;n;){var s=n.nextSibling;n.remove(),n=s}this.drawn=e}},e.prototype.destroy=function(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()},e}(),ga=Te.define();function ya(e){return[Xi.define((function(t){return new va(t,e)})),ga.of(e)]}var ba=!(Fn.ios&&Fn.webkit&&Fn.webkit_version<534),wa=Te.define({combine:function(e){return mt(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(e,t){return Math.min(e,t)},drawRangeCursor:function(e,t){return e||t}})}});function ka(e){return void 0===e&&(e={}),[wa.of(e),Ea,xa,Da,qi.of(!0)]}function Ca(e){return e.facet(wa)}function Ma(e){return e.startState.facet(wa)!=e.state.facet(wa)}var Ea=ya({above:!0,markers:function(e){for(var t=e.state,n=t.facet(wa),i=[],r=0,o=t.selection.ranges;r<o.length;r++){var a=o[r],s=a==t.selection.main;if(a.empty?!s||ba:n.drawRangeCursor)for(var l=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=a.empty?a:Ee.cursor(a.head,a.head>a.anchor?-1:1),u=0,h=da.forRange(e,l,c);u<h.length;u++){var d=h[u];i.push(d)}}return i},update:function(e,t){e.transactions.some((function(e){return e.selection}))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");var n=Ma(e);return n&&Sa(e.state,t),e.docChanged||e.selectionSet||n},mount:function(e,t){Sa(t.state,e)},class:"cm-cursorLayer"});function Sa(e,t){t.style.animationDuration=e.facet(wa).cursorBlinkRate+"ms"}var xa=ya({above:!1,markers:function(e){return e.state.selection.ranges.map((function(t){return t.empty?[]:da.forRange(e,"cm-selectionBackground",t)})).reduce((function(e,t){return e.concat(t)}))},update:function(e,t){return e.docChanged||e.selectionSet||e.viewportChanged||Ma(e)},class:"cm-selectionLayer"}),Ta={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};ba&&(Ta[".cm-line"].caretColor=Ta[".cm-content"].caretColor="transparent !important");var Da=Ve.highest(Xo.theme(Ta)),Aa=nt.define({map:function(e,t){return null==e?null:t.mapPos(e)}}),La=Fe.define({create:function(){return null},update:function(e,t){return null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((function(e,t){return t.is(Aa)?t.value:e}),e)}}),Pa=Xi.fromClass(function(){function e(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}return e.prototype.update=function(e){var t,n=e.state.field(La);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(La)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))},e.prototype.readPos=function(){var e=this.view,t=e.state.field(La),n=null!=t&&e.coordsAtPos(t);if(!n)return null;var i=e.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+e.scrollDOM.scrollLeft*e.scaleX,top:n.top-i.top+e.scrollDOM.scrollTop*e.scaleY,height:n.bottom-n.top}},e.prototype.drawCursor=function(e){if(this.cursor){var t=this.view,n=t.scaleX,i=t.scaleY;e?(this.cursor.style.left=e.left/n+"px",this.cursor.style.top=e.top/i+"px",this.cursor.style.height=e.height/i+"px"):this.cursor.style.left="-100000px"}},e.prototype.destroy=function(){this.cursor&&this.cursor.remove()},e.prototype.setDropPos=function(e){this.view.state.field(La)!=e&&this.view.dispatch({effects:Aa.of(e)})},e}(),{eventObservers:{dragover:function(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave:function(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend:function(){this.setDropPos(null)},drop:function(){this.setDropPos(null)}}});function Ia(){return[La,Pa]}function Fa(e,t,n,i,r){t.lastIndex=0;for(var o=e.iterRange(n,i),a=n,s=void 0;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=t.exec(o.value);)r(a+s.index,s)}var Oa=function(){function e(e){var t=e.regexp,n=e.decoration,i=e.decorate,r=e.boundary,o=e.maxLength,a=void 0===o?1e3:o;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=function(e,t,n,r){return i(r,n,n+e[0].length,e,t)};else if("function"==typeof n)this.addMatch=function(e,t,i,r){var o=n(e,t,i);o&&r(i,i+e[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=function(e,t,i,r){return r(i,i+e[0].length,n)}}this.boundary=r,this.maxLength=a}return e.prototype.createDeco=function(e){for(var t=this,n=new kt,i=n.add.bind(n),r=0,o=function(e,t){var n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;for(var i=[],r=0,o=n;r<o.length;r++){var a=o[r],s=a.from,l=a.to;s=Math.max(e.state.doc.lineAt(s).from,s-t),l=Math.min(e.state.doc.lineAt(l).to,l+t),i.length&&i[i.length-1].to>=s?i[i.length-1].to=l:i.push({from:s,to:l})}return i}(e,this.maxLength);r<o.length;r++){var a=o[r],s=a.from,l=a.to;Fa(e.state.doc,this.regexp,s,l,(function(n,r){return t.addMatch(r,e,n,i)}))}return n.finish()},e.prototype.updateDeco=function(e,t){var n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((function(t,r,o,a){a>=e.view.viewport.from&&o<=e.view.viewport.to&&(n=Math.min(o,n),i=Math.max(a,i))})),e.viewportMoved||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t},e.prototype.updateRange=function(e,t,n,i){for(var r=this,o=function(o){var s=Math.max(o.from,n),l=Math.min(o.to,i);if(l>s){var c=e.state.doc.lineAt(s),u=c.to<l?e.state.doc.lineAt(l):c,h=Math.max(o.from,c.from),d=Math.min(o.to,u.to);if(a.boundary){for(;s>c.from;s--)if(a.boundary.test(c.text[s-1-c.from])){h=s;break}for(;l<u.to;l++)if(a.boundary.test(u.text[l-u.from])){d=l;break}}var p=[],f=void 0,m=function(e,t,n){return p.push(n.range(e,t))};if(c==u)for(a.regexp.lastIndex=h-c.from;(f=a.regexp.exec(c.text))&&f.index<d-c.from;)a.addMatch(f,e,f.index+c.from,m);else Fa(e.state.doc,a.regexp,h,d,(function(t,n){return r.addMatch(n,e,t,m)}));t=t.update({filterFrom:h,filterTo:d,filter:function(e,t){return e<h||t>d},add:p})}},a=this,s=0,l=e.visibleRanges;s<l.length;s++){o(l[s])}return t},e}(),Ba=null!=/x/.unicode?"gu":"g",Na=new RegExp("[\0-\b\n--ÂŸÂ­Øœâ€‹â€Žâ€\u2028\u2029â€­â€®â¦â§â©\ufeffï¿¹-ï¿¼]",Ba),Ra={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},Ha=null;var Va=Te.define({combine:function(e){var t=mt(e,{render:null,specialChars:Na,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Ha&&"undefined"!=typeof document&&document.body){var t=document.body.style;Ha=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Ha||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Ba)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Ba)),t}});function za(e){return void 0===e&&(e={}),[Va.of(e),qa||(qa=Xi.fromClass(function(){function e(e){this.view=e,this.decorations=Yn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(Va)),this.decorations=this.decorator.createDeco(e)}return e.prototype.makeDecorator=function(e){var t=this;return new Oa({regexp:e.specialChars,decoration:function(n,i,r){var o=i.state.doc,a=ue(n[0],0);if(9==a){var s=o.lineAt(r),l=i.state.tabSize,c=It(s.text,l,r-s.from);return Yn.replace({widget:new _a((l-c%l)*t.view.defaultCharacterWidth/t.view.scaleX)})}return t.decorationCache[a]||(t.decorationCache[a]=Yn.replace({widget:new Ua(e,a)}))},boundary:e.replaceTabs?void 0:/[^]/})},e.prototype.update=function(e){var t=e.state.facet(Va);e.startState.facet(Va)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)},e}(),{decorations:function(e){return e.decorations}}))]}var qa=null;var Ua=function(e){function t(t,n){var i=e.call(this)||this;return i.options=t,i.code=n,i}return f(t,e),t.prototype.eq=function(e){return e.code==this.code},t.prototype.toDOM=function(e){var t=function(e){return e>=32?"â€¢":10==e?"â¤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(Ra[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;var r=document.createElement("span");return r.textContent=t,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r},t.prototype.ignoreEvent=function(){return!1},t}(Gn),_a=function(e){function t(t){var n=e.call(this)||this;return n.width=t,n}return f(t,e),t.prototype.eq=function(e){return e.width==this.width},t.prototype.toDOM=function(){var e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e},t.prototype.ignoreEvent=function(){return!1},t}(Gn),Wa=Xi.fromClass(function(){function e(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}return e.prototype.update=function(e){var t=e.view,n=t.viewState.editorHeight-t.defaultLineHeight-t.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:"padding-bottom: ".concat(n,"px")})},e}());function ja(){return[Wa,Ji.of((function(e){var t;return(null===(t=e.plugin(Wa))||void 0===t?void 0:t.attrs)||null}))]}function Ga(){return Ya}var Ka=Yn.line({class:"cm-activeLine"}),Ya=Xi.fromClass(function(){function e(e){this.decorations=this.getDeco(e)}return e.prototype.update=function(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){for(var t=-1,n=[],i=0,r=e.state.selection.ranges;i<r.length;i++){var o=r[i],a=e.lineBlockAt(o.head);a.from>t&&(n.push(Ka.range(a.from)),t=a.from)}return Yn.set(n)},e}(),{decorations:function(e){return e.decorations}}),Za=function(e){function t(t){var n=e.call(this)||this;return n.content=t,n}return f(t,e),t.prototype.toDOM=function(e){var t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t},t.prototype.coordsAt=function(e){var t=e.firstChild?Zt(e.firstChild):[];if(!t.length)return null;var n=window.getComputedStyle(e.parentNode),i=tn(t[0],"rtl"!=n.direction),r=parseInt(n.lineHeight);return i.bottom-i.top>1.5*r?{left:i.left,right:i.right,top:i.top,bottom:i.top+r}:i},t.prototype.ignoreEvent=function(){return!1},t}(Gn);function Xa(e){return Xi.fromClass(function(){function t(t){this.view=t,this.placeholder=e?Yn.set([Yn.widget({widget:new Za(e),side:1}).range(0)]):Yn.none}return Object.defineProperty(t.prototype,"decorations",{get:function(){return this.view.state.doc.length?Yn.none:this.placeholder},enumerable:!1,configurable:!0}),t}(),{decorations:function(e){return e.decorations}})}var $a=2e3;function Qa(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),i=e.state.doc.lineAt(n),r=n-i.from,o=r>$a?-1:r==i.length?function(e,t){var n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):It(i.text,e.state.tabSize,n-i.from);return{line:i.number,col:o,off:r}}function Ja(e,t){var n=Qa(e,t),i=e.state.selection;return n?{update:function(e){if(e.docChanged){var t=e.changes.mapPos(e.startState.doc.line(n.line).from),r=e.state.doc.lineAt(t);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},i=i.map(e.changes)}},get:function(t,r,o){var a=Qa(e,t);if(!a)return i;var s=function(e,t,n){var i=Math.min(t.line,n.line),r=Math.max(t.line,n.line),o=[];if(t.off>$a||n.off>$a||t.col<0||n.col<0)for(var a=Math.min(t.off,n.off),s=Math.max(t.off,n.off),l=i;l<=r;l++)(h=e.doc.line(l)).length<=s&&o.push(Ee.range(h.from+a,h.to+s));else{var c=Math.min(t.col,n.col),u=Math.max(t.col,n.col);for(l=i;l<=r;l++){var h,d=Ft((h=e.doc.line(l)).text,c,e.tabSize,!0);if(d<0)o.push(Ee.cursor(h.to));else{var p=Ft(h.text,u,e.tabSize);o.push(Ee.range(h.from+d,h.from+p))}}}return o}(e.state,n,a);return s.length?o?Ee.create(s.concat(i.ranges)):Ee.create(s):i}}:null}function es(e){var t=(null==e?void 0:e.eventFilter)||function(e){return e.altKey&&0==e.button};return Xo.mouseSelectionStyle.of((function(e,n){return t(n)?Ja(e,n):null}))}var ts={Alt:[18,function(e){return!!e.altKey}],Control:[17,function(e){return!!e.ctrlKey}],Shift:[16,function(e){return!!e.shiftKey}],Meta:[91,function(e){return!!e.metaKey}]},ns={style:"cursor: crosshair"};function is(e){void 0===e&&(e={});var t=ts[e.key||"Alt"],n=t[0],i=t[1],r=Xi.fromClass(function(){function e(e){this.view=e,this.isDown=!1}return e.prototype.set=function(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))},e}(),{eventObservers:{keydown:function(e){this.set(e.keyCode==n||i(e))},keyup:function(e){e.keyCode!=n&&i(e)||this.set(!1)},mousemove:function(e){this.set(i(e))}}});return[r,Xo.contentAttributes.of((function(e){var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?ns:null}))]}var rs="-10000px",os=function(){function e(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter((function(e){return e}));var r=null;this.tooltipViews=this.tooltips.map((function(e){return r=n(e,r)}))}return e.prototype.update=function(e,t){var n,i=e.state.facet(this.facet),r=i.filter((function(e){return e}));if(i===this.input){for(var o=0,a=this.tooltipViews;o<a.length;o++){(g=a[o]).update&&g.update(e)}return!1}for(var s=[],l=t?[]:null,c=0;c<r.length;c++){var u=r[c],h=-1;if(u){for(var d=0;d<this.tooltips.length;d++){var p=this.tooltips[d];p&&p.create==u.create&&(h=d)}if(h<0)s[c]=this.createTooltipView(u,c?s[c-1]:null),l&&(l[c]=!!u.above);else{var f=s[c]=this.tooltipViews[h];l&&(l[c]=t[h]),f.update&&f.update(e)}}}for(var m=0,v=this.tooltipViews;m<v.length;m++){var g=v[m];s.indexOf(g)<0&&(this.removeTooltipView(g),null===(n=g.destroy)||void 0===n||n.call(g))}return t&&(l.forEach((function(e,n){return t[n]=e})),t.length=l.length),this.input=i,this.tooltips=r,this.tooltipViews=s,!0},e}();function as(e){return void 0===e&&(e={}),ls.of(e)}function ss(e){var t=e.win;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}var ls=Te.define({combine:function(e){var t,n,i;return{position:Fn.ios?"absolute":(null===(t=e.find((function(e){return e.position})))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((function(e){return e.parent})))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=e.find((function(e){return e.tooltipSpace})))||void 0===i?void 0:i.tooltipSpace)||ss}}}),cs=new WeakMap,us=Xi.fromClass(function(){function e(e){var t=this;this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;var n=e.state.facet(ls);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((function(){return t.measureSoon()})):null,this.manager=new os(e,fs,(function(e,n){return t.createTooltip(e,n)}),(function(e){t.resizeObserver&&t.resizeObserver.unobserve(e.dom),e.dom.remove()})),this.above=this.manager.tooltips.map((function(e){return!!e.above})),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>t.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&t.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}return e.prototype.createContainer=function(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom},e.prototype.observeIntersection=function(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(var e=0,t=this.manager.tooltipViews;e<t.length;e++){var n=t[e];this.intersectionObserver.observe(n.dom)}}},e.prototype.measureSoon=function(){var e=this;this.measureTimeout<0&&(this.measureTimeout=setTimeout((function(){e.measureTimeout=-1,e.maybeMeasure()}),50))},e.prototype.update=function(e){e.transactions.length&&(this.lastTransaction=Date.now());var t=this.manager.update(e,this.above);t&&this.observeIntersection();var n=t||e.geometryChanged,i=e.state.facet(ls);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(var r=0,o=this.manager.tooltipViews;r<o.length;r++){(l=o[r]).dom.style.position=this.position}n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(var a=0,s=this.manager.tooltipViews;a<s.length;a++){var l=s[a];this.container.appendChild(l.dom)}n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()},e.prototype.createTooltip=function(e,t){var n=e.create(this.view),i=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){var r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=rs,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n},e.prototype.destroy=function(){var e,t,n;this.view.win.removeEventListener("resize",this.measureSoon);for(var i=0,r=this.manager.tooltipViews;i<r.length;i++){var o=r[i];o.dom.remove(),null===(e=o.destroy)||void 0===e||e.call(o)}this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)},e.prototype.readMeasure=function(){var e,t=this,n=1,i=1,r=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){var o=this.manager.tooltipViews[0].dom;if(Fn.gecko)r=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==rs&&"0px"==o.style.left){var a=o.getBoundingClientRect();r=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}(r||"absolute"==this.position)&&(this.parent?(a=this.parent.getBoundingClientRect()).width&&a.height&&(n=a.width/this.parent.offsetWidth,i=a.height/this.parent.offsetHeight):(n=(e=this.view.viewState).scaleX,i=e.scaleY));var s=this.view.scrollDOM.getBoundingClientRect(),l=ar(this.view);return{visible:{left:s.left+l.left,top:s.top+l.top,right:s.right-l.right,bottom:s.bottom-l.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((function(e,n){var i=t.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):t.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((function(e){return e.dom.getBoundingClientRect()})),space:this.view.state.facet(ls).tooltipSpace(this.view),scaleX:n,scaleY:i,makeAbsolute:r}},e.prototype.writeMeasure=function(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(var n=0,i=this.manager.tooltipViews;n<i.length;n++){i[n].dom.style.position="absolute"}}for(var r=e.visible,o=e.space,a=e.scaleX,s=e.scaleY,l=[],c=0;c<this.manager.tooltips.length;c++){var u=this.manager.tooltips[c],h=this.manager.tooltipViews[c],d=h.dom,p=e.pos[c],f=e.size[c];if(!p||!1!==u.clip&&(p.bottom<=Math.max(r.top,o.top)||p.top>=Math.min(r.bottom,o.bottom)||p.right<Math.max(r.left,o.left)-.1||p.left>Math.min(r.right,o.right)+.1))d.style.top=rs;else{var m=u.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,v=m?7:0,g=f.right-f.left,y=null!==(t=cs.get(h))&&void 0!==t?t:f.bottom-f.top,b=h.offset||ps,w=this.view.textDirection==ai.LTR,k=f.width>o.right-o.left?w?o.left:o.right-f.width:w?Math.max(o.left,Math.min(p.left-(m?14:0)+b.x,o.right-g)):Math.min(Math.max(o.left,p.left-g+(m?14:0)-b.x),o.right-g),C=this.above[c];!u.strictSide&&(C?p.top-y-v-b.y<o.top:p.bottom+y+v+b.y>o.bottom)&&C==o.bottom-p.bottom>p.top-o.top&&(C=this.above[c]=!C);var M=(C?p.top-o.top:o.bottom-p.bottom)-v;if(M<y&&!1!==h.resize){if(M<this.view.defaultLineHeight){d.style.top=rs;continue}cs.set(h,y),d.style.height=(y=M)/s+"px"}else d.style.height&&(d.style.height="");var E=C?p.top-y-v-b.y:p.bottom+v+b.y,S=k+g;if(!0!==h.overlap)for(var x=0,T=l;x<T.length;x++){var D=T[x];D.left<S&&D.right>k&&D.top<E+y&&D.bottom>E&&(E=C?D.top-y-2-v:D.bottom+v+2)}if("absolute"==this.position?(d.style.top=(E-e.parent.top)/s+"px",hs(d,(k-e.parent.left)/a)):(d.style.top=E/s+"px",hs(d,k/a)),m){var A=p.left+(w?b.x:-b.x)-(k+14-7);m.style.left=A/a+"px"}!0!==h.overlap&&l.push({left:k,top:E,right:S,bottom:E+y}),d.classList.toggle("cm-tooltip-above",C),d.classList.toggle("cm-tooltip-below",!C),h.positioned&&h.positioned(e.space)}}},e.prototype.maybeMeasure=function(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(var e=0,t=this.manager.tooltipViews;e<t.length;e++){t[e].dom.style.top=rs}},e}(),{eventObservers:{scroll:function(){this.maybeMeasure()}}});function hs(e,t){var n=parseInt(e.style.left,10);(isNaN(n)||Math.abs(t-n)>1)&&(e.style.left=t+"px")}var ds=Xo.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(14,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ps={x:0,y:0},fs=Te.define({enables:[us,ds]}),ms=Te.define({combine:function(e){return e.reduce((function(e,t){return e.concat(t)}),[])}}),vs=function(){function e(e){var t=this;this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new os(e,ms,(function(e,n){return t.createHostedView(e,n)}),(function(e){return e.dom.remove()}))}return e.create=function(t){return new e(t)},e.prototype.createHostedView=function(e,t){var n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n},e.prototype.mount=function(e){for(var t=0,n=this.manager.tooltipViews;t<n.length;t++){var i=n[t];i.mount&&i.mount(e)}this.mounted=!0},e.prototype.positioned=function(e){for(var t=0,n=this.manager.tooltipViews;t<n.length;t++){var i=n[t];i.positioned&&i.positioned(e)}},e.prototype.update=function(e){this.manager.update(e)},e.prototype.destroy=function(){for(var e,t=0,n=this.manager.tooltipViews;t<n.length;t++){var i=n[t];null===(e=i.destroy)||void 0===e||e.call(i)}},e.prototype.passProp=function(e){for(var t=void 0,n=0,i=this.manager.tooltipViews;n<i.length;n++){var r=i[n][e];if(void 0!==r)if(void 0===t)t=r;else if(t!==r)return}return t},Object.defineProperty(e.prototype,"offset",{get:function(){return this.passProp("offset")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getCoords",{get:function(){return this.passProp("getCoords")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlap",{get:function(){return this.passProp("overlap")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resize",{get:function(){return this.passProp("resize")},enumerable:!1,configurable:!0}),e}(),gs=fs.compute([ms],(function(e){var t=e.facet(ms);return 0===t.length?null:{pos:Math.min.apply(Math,t.map((function(e){return e.pos}))),end:Math.max.apply(Math,t.map((function(e){var t;return null!==(t=e.end)&&void 0!==t?t:e.pos}))),create:vs.create,above:t[0].above,arrow:t.some((function(e){return e.arrow}))}})),ys=function(){function e(e,t,n,i,r){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}return e.prototype.update=function(){var e=this;this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((function(){return e.startHover()}),20))},Object.defineProperty(e.prototype,"active",{get:function(){return this.view.state.field(this.field)},enumerable:!1,configurable:!0}),e.prototype.checkHover=function(){if(this.hoverTimeout=-1,!this.active.length){var e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}},e.prototype.startHover=function(){var e=this;clearTimeout(this.restartTimeout);var t=this.view,n=this.lastMove,i=t.docView.nearest(n.target);if(i){var r,o=1;if(i instanceof Nn)r=i.posAtStart;else{if(null==(r=t.posAtCoords(n)))return;var a=t.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-t.defaultCharacterWidth||n.x>a.right+t.defaultCharacterWidth)return;var s=t.bidiSpans(t.state.doc.lineAt(r)).find((function(e){return e.from<=r&&e.to>=r})),l=s&&s.dir==ai.RTL?-1:1;o=n.x<a.left?-l:l}var c=this.source(t,r,o);if(null==c?void 0:c.then){var u=this.pending={pos:r};c.then((function(n){e.pending==u&&(e.pending=null,!n||Array.isArray(n)&&!n.length||t.dispatch({effects:e.setHover.of(Array.isArray(n)?n:[n])}))}),(function(e){return Gi(t.state,e,"hover tooltip")}))}else!c||Array.isArray(c)&&!c.length||t.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])})}},Object.defineProperty(e.prototype,"tooltip",{get:function(){var e=this.view.plugin(us),t=e?e.manager.tooltips.findIndex((function(e){return e.create==vs.create})):-1;return t>-1?e.manager.tooltipViews[t]:null},enumerable:!1,configurable:!0}),e.prototype.mousemove=function(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));var i=this.active,r=this.tooltip;if(i.length&&r&&!function(e,t){var n,i=e.getBoundingClientRect(),r=i.left,o=i.right,a=i.top,s=i.bottom;if(n=e.querySelector(".cm-tooltip-arrow")){var l=n.getBoundingClientRect();a=Math.min(l.top,a),s=Math.max(l.bottom,s)}return t.clientX>=r-bs&&t.clientX<=o+bs&&t.clientY>=a-bs&&t.clientY<=s+bs}(r.dom,e)||this.pending){var o=(i[0]||this.pending).pos,a=null!==(n=null===(t=i[0])||void 0===t?void 0:t.end)&&void 0!==n?n:o;(o==a?this.view.posAtCoords(this.lastMove)==o:function(e,t,n,i,r){var o=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;var s=e.posAtCoords({x:i,y:r},!1);return s>=t&&s<=n}(this.view,o,a,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}},e.prototype.mouseleave=function(e){if(clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active.length){var t=this.tooltip;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}},e.prototype.watchTooltipLeave=function(e){var t=this,n=function(i){e.removeEventListener("mouseleave",n),t.active.length&&!t.view.dom.contains(i.relatedTarget)&&t.view.dispatch({effects:t.setHover.of([])})};e.addEventListener("mouseleave",n)},e.prototype.destroy=function(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)},e}(),bs=4;function ws(e,t){void 0===t&&(t={});var n=nt.define(),i=Fe.define({create:function(){return[]},update:function(e,i){if(e.length&&(t.hideOnChange&&(i.docChanged||i.selection)?e=[]:t.hideOn&&(e=e.filter((function(e){return!t.hideOn(i,e)}))),i.docChanged)){for(var r=[],o=0,a=e;o<a.length;o++){var s=a[o],l=i.changes.mapPos(s.pos,-1,fe.TrackDel);if(null!=l){var c=Object.assign(Object.create(null),s);c.pos=l,null!=c.end&&(c.end=i.changes.mapPos(c.end)),r.push(c)}}e=r}for(var u=0,h=i.effects;u<h.length;u++){var d=h[u];d.is(n)&&(e=d.value),d.is(Ms)&&(e=[])}return e},provide:function(e){return ms.from(e)}});return{active:i,extension:[i,Xi.define((function(r){return new ys(r,e,i,n,t.hoverTime||300)})),gs]}}function ks(e,t){var n=e.plugin(us);if(!n)return null;var i=n.manager.tooltips.indexOf(t);return i<0?null:n.manager.tooltipViews[i]}function Cs(e){return e.facet(ms).some((function(e){return e}))}var Ms=nt.define(),Es=Ms.of(null);function Ss(e){var t=e.plugin(us);t&&t.maybeMeasure()}var xs=Te.define({combine:function(e){for(var t,n,i=0,r=e;i<r.length;i++){var o=r[i];t=t||o.topContainer,n=n||o.bottomContainer}return{topContainer:t,bottomContainer:n}}});function Ts(e){return e?[xs.of(e)]:[]}function Ds(e,t){var n=e.plugin(As),i=n?n.specs.indexOf(t):-1;return i>-1?n.panels[i]:null}var As=Xi.fromClass(function(){function e(e){this.input=e.state.facet(Is),this.specs=this.input.filter((function(e){return e})),this.panels=this.specs.map((function(t){return t(e)}));var t=e.state.facet(xs);this.top=new Ls(e,!0,t.topContainer),this.bottom=new Ls(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((function(e){return e.top}))),this.bottom.sync(this.panels.filter((function(e){return!e.top})));for(var n=0,i=this.panels;n<i.length;n++){var r=i[n];r.dom.classList.add("cm-panel"),r.mount&&r.mount()}}return e.prototype.update=function(e){var t=e.state.facet(xs);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Ls(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ls(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();var n=e.state.facet(Is);if(n!=this.input){for(var i=n.filter((function(e){return e})),r=[],o=[],a=[],s=[],l=0,c=i;l<c.length;l++){var u=c[l],h=this.specs.indexOf(u),d=void 0;h<0?(d=u(e.view),s.push(d)):(d=this.panels[h]).update&&d.update(e),r.push(d),(d.top?o:a).push(d)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(a);for(var p=0,f=s;p<f.length;p++){(g=f[p]).dom.classList.add("cm-panel"),g.mount&&g.mount()}}else for(var m=0,v=this.panels;m<v.length;m++){var g;(g=v[m]).update&&g.update(e)}},e.prototype.destroy=function(){this.top.sync([]),this.bottom.sync([])},e}(),{provide:function(e){return Xo.scrollMargins.of((function(t){var n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))}}),Ls=function(){function e(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}return e.prototype.sync=function(e){for(var t=0,n=this.panels;t<n.length;t++){var i=n[t];i.destroy&&e.indexOf(i)<0&&i.destroy()}this.panels=e,this.syncDOM()},e.prototype.syncDOM=function(){if(0!=this.panels.length){if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";var e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}for(var t=this.dom.firstChild,n=0,i=this.panels;n<i.length;n++){var r=i[n];if(r.dom.parentNode==this.dom){for(;t!=r.dom;)t=Ps(t);t=t.nextSibling}else this.dom.insertBefore(r.dom,t)}for(;t;)t=Ps(t)}else this.dom&&(this.dom.remove(),this.dom=void 0)},e.prototype.scrollMargin=function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)},e.prototype.syncClasses=function(){if(this.container&&this.classes!=this.view.themeClasses){for(var e=0,t=this.classes.split(" ");e<t.length;e++){(r=t[e])&&this.container.classList.remove(r)}for(var n=0,i=(this.classes=this.view.themeClasses).split(" ");n<i.length;n++){var r;(r=i[n])&&this.container.classList.add(r)}}},e}();function Ps(e){var t=e.nextSibling;return e.remove(),t}var Is=Te.define({enables:As}),Fs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},t.prototype.eq=function(e){return!1},t.prototype.destroy=function(e){},t}(vt);Fs.prototype.elementClass="",Fs.prototype.toDOM=void 0,Fs.prototype.mapMode=fe.TrackBefore,Fs.prototype.startSide=Fs.prototype.endSide=-1,Fs.prototype.point=!0;var Os=Te.define(),Bs=Te.define(),Ns={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return wt.empty},lineMarker:function(){return null},widgetMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Rs=Te.define();function Hs(e){return[zs(),Rs.of(Object.assign(Object.assign({},Ns),e))]}var Vs=Te.define({combine:function(e){return e.some((function(e){return e}))}});function zs(e){var t=[qs];return e&&!1===e.fixed&&t.push(Vs.of(!0)),t}var qs=Xi.fromClass(function(){function e(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(Rs).map((function(t){return new Gs(e,t)}));for(var t=0,n=this.gutters;t<n.length;t++){var i=n[t];this.dom.appendChild(i.dom)}this.fixed=!e.state.facet(Vs),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.contentDOM.parentNode.insertBefore(this.dom,e.contentDOM)}return e.prototype.update=function(e){if(this.updateGutters(e)){var t=this.prevViewport,n=e.view.viewport,i=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Vs)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},e.prototype.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();for(var i=wt.iter(this.view.state.facet(Os),this.view.viewport.from),r=[],o=this.gutters.map((function(e){return new js(e,t.view.viewport,-t.view.documentPadding.top)})),a=0,s=this.view.viewportLineBlocks;a<s.length;a++){var l=s[a];if(r.length&&(r=[]),Array.isArray(l.type))for(var c=!0,u=0,h=l.type;u<h.length;u++){var d=h[u];if(d.type==Kn.Text&&c){_s(i,r,d.from);for(var p=0,f=o;p<f.length;p++){f[p].line(this.view,d,r)}c=!1}else if(d.widget)for(var m=0,v=o;m<v.length;m++){v[m].widget(this.view,d)}}else if(l.type==Kn.Text){_s(i,r,l.from);for(var g=0,y=o;g<y.length;g++){y[g].line(this.view,l,r)}}else if(l.widget){for(var b=0,w=o;b<w.length;b++){w[b].line(this.view,l,r)}for(var k=0,C=o;k<C.length;k++){C[k].widget(this.view,l)}}}for(var M=0,E=o;M<E.length;M++){E[M].finish()}e&&n.parentNode.insertBefore(this.dom,n)},e.prototype.updateGutters=function(e){var t=e.startState.facet(Rs),n=e.state.facet(Rs),i=e.docChanged||e.heightChanged||e.viewportChanged||!wt.eq(e.startState.facet(Os),e.state.facet(Os),e.view.viewport.from,e.view.viewport.to);if(t==n)for(var r=0,o=this.gutters;r<o.length;r++){o[r].update(e)&&(i=!0)}else{i=!0;for(var a=[],s=0,l=n;s<l.length;s++){var c=l[s],u=t.indexOf(c);u<0?a.push(new Gs(this.view,c)):(this.gutters[u].update(e),a.push(this.gutters[u]))}for(var h=0,d=this.gutters;h<d.length;h++){(m=d[h]).dom.remove(),a.indexOf(m)<0&&m.destroy()}for(var p=0,f=a;p<f.length;p++){var m=f[p];this.dom.appendChild(m.dom)}this.gutters=a}return i},e.prototype.destroy=function(){for(var e=0,t=this.gutters;e<t.length;e++){t[e].destroy()}this.dom.remove()},e}(),{provide:function(e){return Xo.scrollMargins.of((function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==ai.LTR?{left:n.dom.offsetWidth*t.scaleX}:{right:n.dom.offsetWidth*t.scaleX}:null}))}});function Us(e){return Array.isArray(e)?e:[e]}function _s(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}function Ws(e){if(e instanceof HTMLElement&&e.classList.contains("cm-line"))return e;if(e.nodeType===Node.TEXT_NODE&&"â€‹"!==e.textContent)return e.parentNode;if(e.firstChild)return Ws(e.firstChild);if(e.nextSibling)return Ws(e.nextSibling);for(var t=e.parentNode;t;){if(t instanceof Element&&t.classList.contains("cm-line"))return t;if(t.nextSibling)return Ws(t.nextSibling);t=t.parentNode}return null}var js=function(){function e(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=wt.iter(e.markers,t.from)}return e.prototype.addElement=function(e,t,n){var i,r=this.gutter,o=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==r.elements.length){var s=new Ks(e,a,o,n);r.elements.push(s),r.dom.appendChild(s.dom),i=s.dom}else{var l=r.elements[this.i];l.update(e,a,o,n),i=l.dom}e.requestMeasure({read:function(e){var n="",i="";try{for(var r=e.domAtPos(t.from),o=r.node.childNodes[r.offset]||r.node,a=o;a.parentElement&&a.parentElement!==e.contentDOM;)a=a.parentElement;n=getComputedStyle(a).paddingTop;var s=Ws(o);"0px"===(i=getComputedStyle(s).lineHeight)&&(i="")}catch(e){}return{paddingTop:n,lineHeight:i}},write:function(e){var t=e.paddingTop,n=e.lineHeight;i.style.paddingTop=t,i.style.lineHeight=n}}),this.height=t.bottom,this.i++},e.prototype.line=function(e,t,n){var i=[];_s(this.cursor,i,t.from),n.length&&(i=i.concat(n));var r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);var o=this.gutter;(0!=i.length||o.config.renderEmptyElements)&&this.addElement(e,t,i)},e.prototype.widget=function(e,t){for(var n=this.gutter.config.widgetMarker(e,t.widget,t),i=n?[n]:null,r=0,o=e.state.facet(Bs);r<o.length;r++){var a=(0,o[r])(e,t.widget,t);a&&(i||(i=[])).push(a)}i&&this.addElement(e,t,i)},e.prototype.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),Gs=function(){function e(e,t){var n=this;this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");var i=function(i){r.dom.addEventListener(i,(function(r){var o,a=r.target;if(a!=n.dom&&n.dom.contains(a)){for(;a.parentNode!=n.dom;)a=a.parentNode;var s=a.getBoundingClientRect();o=(s.top+s.bottom)/2}else o=r.clientY;var l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,r)&&r.preventDefault()}))},r=this;for(var o in t.domEventHandlers)i(o);this.markers=Us(t.markers(e)),t.initialSpacer&&(this.spacer=new Ks(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}return e.prototype.update=function(e){var t=this.markers;if(this.markers=Us(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var i=e.view.viewport;return!wt.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},e.prototype.destroy=function(){for(var e=0,t=this.elements;e<t.length;e++){t[e].destroy()}},e}(),Ks=function(){function e(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}return e.prototype.update=function(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)},e.prototype.setMarkers=function(e,t){for(var n="cm-gutterElement",i=this.dom.firstChild,r=0,o=0;;){var a=o,s=r<t.length?t[r++]:null,l=!1;if(s){var c=s.elementClass;c&&(n+=" "+c);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(s)){a=u,l=!0;break}}else a=this.markers.length;for(;o<a;){var h=this.markers[o++];if(h.toDOM){h.destroy(i);var d=i.nextSibling;i.remove(),i=d}}if(!s)break;s.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(s.toDOM(e),i)),l&&o++}this.dom.className=n,this.markers=t},e.prototype.destroy=function(){this.setMarkers(null,[])},e}();var Ys=Te.define(),Zs=Te.define(),Xs=Te.define({combine:function(e){return mt(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e),i=function(e){var i=n[e],r=t[e];n[e]=i?function(e,t,n){return i(e,t,n)||r(e,t,n)}:r};for(var r in t)i(r);return n}})}}),$s=function(e){function t(t){var n=e.call(this)||this;return n.number=t,n}return f(t,e),t.prototype.eq=function(e){return this.number==e.number},t.prototype.toDOM=function(){return document.createTextNode(this.number)},t}(Fs);function Qs(e,t){return e.state.facet(Xs).formatNumber(t,e.state)}var Js=Rs.compute([Xs],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(Ys)},lineMarker:function(e,t,n){return n.some((function(e){return e.toDOM}))?null:new $s(Qs(e,e.state.doc.lineAt(t.from).number))},widgetMarker:function(e,t,n){for(var i=0,r=e.state.facet(Zs);i<r.length;i++){var o=(0,r[i])(e,t,n);if(o)return o}return null},lineMarkerChange:function(e){return e.startState.facet(Xs)!=e.state.facet(Xs)},initialSpacer:function(e){return new $s(Qs(e,tl(e.state.doc.lines)))},updateSpacer:function(e,t){var n=Qs(t.view,tl(t.view.state.doc.lines));return n==e.number?e:new $s(n)},domEventHandlers:e.facet(Xs).domEventHandlers}}));function el(e){return void 0===e&&(e={}),[Xs.of(e),zs(),Js]}function tl(e){for(var t=9;t<e;)t=10*t+9;return t}var nl=new(function(e){function t(){var t=e.apply(this,arguments)||this;return t.elementClass="cm-activeLineGutter",t}return f(t,e),t}(Fs)),il=Os.compute(["selection"],(function(e){for(var t=[],n=-1,i=0,r=e.selection.ranges;i<r.length;i++){var o=r[i],a=e.doc.lineAt(o.head).from;a>n&&(n=a,t.push(nl.range(a)))}return wt.of(t)}));function rl(){return il}function ol(e){return Xi.define((function(t){return{decorations:e.createDeco(t),update:function(t){this.decorations=e.updateDeco(t,this.decorations)}}}),{decorations:function(e){return e.decorations}})}var al=Yn.mark({class:"cm-highlightTab"}),sl=Yn.mark({class:"cm-highlightSpace"}),ll=ol(new Oa({regexp:/\t| /g,decoration:function(e){return"\t"==e[0]?al:sl},boundary:/\S/}));function cl(){return ll}var ul=ol(new Oa({regexp:/\s+$/g,decoration:Yn.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function hl(){return ul}var dl={HeightMap:vo,HeightOracle:uo,MeasuredHeights:ho,QueryType:fo,ChangedRange:lr,computeOrder:xi,moveVisually:Ai,clearHeightChangeFlag:co,getHeightChangeFlag:function(){return lo}},pl={height:"",paddingTop:"",paddingBottom:"",marginTop:"",marginBottom:""},fl=new WeakMap,ml=function(){function e(e){this.from={},this.to={},this.end={};var t=e||{},n=t.duration,i=void 0===n?100:n,r=t.fn,o=void 0===r?"ease-in-out":r;this.duration=i,this.fn=o}return e.prototype.addProp=function(e,t,n,i){return void 0===i&&(i=null),null!==t&&(this.from[e]=t),null!==n&&(this.to[e]=n),null!==i&&(this.end[e]=i),this},e}();function vl(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}function gl(e){var t=window.getComputedStyle(e),n={};for(var i in pl)if(pl.hasOwnProperty(i)){var r=t[i];if(r&&r.endsWith("px")){var o=parseFloat(r.substr(0,r.length-2));0!==o&&(n[i]=o)}}return n}function yl(e,t){var n=fl.get(e);fl.delete(e),n&&(e.style.transition="",e.style.transitionProperty="",vl(e,n.props.end),n.win.clearTimeout(n.timer),e.removeEventListener("transitionend",n.fn),t||n.complete&&n.complete())}var bl=null;function wl(e,t,n){yl(e),vl(e,t.from);var i={props:t,fn:function(){return yl(e)},timer:0,complete:n,win:e.win};fl.set(e,i);null===bl&&(bl=[],setTimeout((function(){document.body.offsetHeight;var e=bl;bl=null;for(var t=0,n=e;t<n.length;t++){(0,n[t])()}}),0)),bl.push((function(){e.style.transition="all "+t.duration+"ms "+t.fn,e.style.transitionProperty=Object.keys(t.from).join(", "),vl(e,t.to),e.addEventListener("transitionend",(function(t){t.target===e&&i.fn()})),i.timer=i.win.setTimeout(i.fn,t.duration+50)}))}function kl(e){return new Promise((function(t){return function(e,t){yl(e);var n=gl(e),i=new ml({duration:100,fn:"cubic-bezier(.02, .01, .47, 1)"});for(var r in i.addProp("overflowY","clip","clip",""),n)n.hasOwnProperty(r)&&i.addProp(r,"0px",n[r]+"px","");wl(e,i,t)}(e,t)}))}function Cl(e){return new Promise((function(t){return function(e,t){yl(e);var n=gl(e),i=new ml({duration:100,fn:"cubic-bezier(.02, .01, .47, 1)"});for(var r in i.addProp("overflowY","clip","clip",""),n)n.hasOwnProperty(r)&&i.addProp(r,n[r]+"px","0px","");wl(e,i,t)}(e,t)}))}function Ml(e,t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return yl(e),t?n?[4,Cl(e)]:[3,2]:[3,3];case 1:i.sent(),i.label=2;case 2:return e.hide(),[3,5];case 3:return e.show(),n?[4,kl(e)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))}function El(e,t,n,i){return g(this,void 0,Promise,(function(){return y(this,(function(r){switch(r.label){case 0:return n?i?[4,Cl(e)]:[3,2]:[3,3];case 1:r.sent(),r.label=2;case 2:return e.detach(),[3,5];case 3:return e.show(),t.appendChild(e),i?[4,kl(e)]:[3,5];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function Sl(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){return i=e.parentElement,r=e.getBoundingClientRect(),o="right"===n?e:t,a="right"===n?t:e,[2,new Promise((function(s){var l=function(){e.detach(),a.style.removeProperty("position"),a.style.removeProperty("left"),a.style.removeProperty("top"),a.style.removeProperty("width"),a.style.removeProperty("height"),s(null)};t.isShown()||("right"===n?i.insertAfter(t,e):i.insertBefore(t,e)),e.isShown()?(a.style.position="absolute",a.style.left=e.offsetLeft+"px",a.style.top=e.offsetTop+"px",a.style.width=r.width+"px",a.style.height=r.height+"px","left"===n?(wl(o,new ml({duration:Tl,fn:"ease-out"}).addProp("transform","translateX(-20%)","translateX(0)","")),wl(a,new ml({duration:Tl,fn:Dl}).addProp("transform","translateX(0)","translateX(100%)",""),l)):(wl(o,new ml({duration:Tl,fn:"ease-out"}).addProp("transform","translateX(0)","translateX(-20%)","")),wl(a,new ml({duration:Tl,fn:Dl}).addProp("transform","translateX(100%)","translateX(0)",""),l))):l()}))]}))}))}var xl=function(){},Tl=180,Dl="cubic-bezier(0.33, 1, 0.68, 1)",Al="cubic-bezier(0.5, 0, 0.75, 0)";function Ll(e,t,n,i){i=i||xl;for(var r=0,o=Array.prototype.slice.call(e.childNodes);r<o.length;r++){yl(o[r])}var a=e.firstChild;return a?a!==t||a.nextSibling?e.isShown()?void("left"===n?(e.setChildrenInPlace([t,a]),wl(t,new ml({duration:Tl,fn:"ease-out"}).addProp("transform","translateX(-20%)","translateX(0)","")),wl(a,new ml({duration:Tl,fn:Dl}).addProp("transform","translateX(0)","translateX(100%)",""),(function(){a.detach(),i&&i()}))):(e.setChildrenInPlace([a,t]),wl(a,new ml({duration:Tl,fn:"ease-out"}).addProp("transform","translateX(0)","translateX(-20%)","")),wl(t,new ml({duration:Tl,fn:Dl}).addProp("transform","translateX(100%)","translateX(0)",""),(function(){a.detach(),i&&i()})))):(e.setChildrenInPlace([t]),void(i&&i())):void i():(e.appendChild(t),void i())}function Pl(e){var t,n=Date.now(),i=function(r){r&&Date.now()-n<100||(window.clearTimeout(t),window.removeEventListener("resize",i),setTimeout(e,10))};window.addEventListener("resize",i),t=window.setTimeout(i,500)}function Il(e,t,n){void 0===n&&(n="0.85");var i=e.offsetHeight-1,r=Math.clamp(.35*i,100,250);return new Promise((function(o){wl(e,new ml({duration:r,fn:"var(--anim-motion-swing)"}).addProp("transform","translateY(".concat(i,"px)"),""),(function(){return o(null)})),t&&wl(t,new ml({duration:r,fn:Al}).addProp("opacity","0",n))}))}function Fl(e,t,n){var i=e.document.body.createDiv();i.setCssStyles({position:"absolute",transform:"translate(-50%,-50%)",left:"".concat(t,"px"),top:"".concat(n,"px"),boxShadow:"0 0 6px 20px var(--color-accent)",borderRadius:"200px",zIndex:"999"}),wl(i,new ml({duration:200,fn:"ease-out"}).addProp("width","0","200px").addProp("height","0","200px").addProp("opacity","1","0"),(function(){return i.detach()}))}function Ol(e,t){return{x:e,y:t}}function Bl(e){return Ol(e.clientX,e.clientY)}function Nl(e,t,n,i){return{x:e,y:t,width:n,height:i}}function Rl(e,t){return Nl(e.x,e.y,t.width,t.height)}function Hl(e,t){return Math.hypot(e.x-t.x,e.y-t.y)}var Vl,zl=-1!==(Vl=navigator.appVersion).indexOf("Win")?"Windows":-1!==Vl.indexOf("Mac")?"macOS":-1!==Vl.indexOf("X11")||-1!==Vl.indexOf("Linux")?"Linux":"Unknown OS",ql=navigator.userAgent.toLowerCase(),Ul="macOS"===zl,_l="Windows"===zl,Wl="Linux"===zl,jl=ql.indexOf("firefox")>-1,Gl=/^((?!chrome|android).)*safari/i.test(ql),Kl=/android/i.test(ql);function Yl(e){return Ul&&0===e.button&&e.ctrlKey}var Zl={isDesktop:!1,isMobile:!1,isDesktopApp:!1,isMobileApp:!1,isIosApp:!1,isAndroidApp:!1,isPhone:!1,isTablet:!1,isMacOS:Ul,isWin:_l,isLinux:Wl,isSafari:Gl,resourcePathPrefix:"file:///",get canExportPdf(){return Zl.isDesktopApp},get canPopoutWindow(){return Zl.isDesktopApp&&Zl.isDesktop},get canStackTabs(){return!Zl.isPhone},get canSplit(){return!Zl.isPhone},get canDisplayRibbon(){return!Zl.isPhone},get canPinSidebar(){return Zl.isMobile&&!Zl.isPhone},supportsIndexedDb:!!window.indexedDB,mobileSoftKeyboardVisible:!1};Object.prototype.hasOwnProperty;function Xl(e,t){var n=e[t];Object.defineProperty(e,t,{get:function(){return n},set:function(){}})}var $l=/&(amp|lt|gt|quot);/g,Ql={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};function Jl(e){return Ql[e]}function ec(e){return e.replace($l,Jl)}var tc=/[.?*+^$[\]\\(){}|-]/g;function nc(e){return e.replace(tc,"\\$&")}function ic(e){return Array.from(new Set(e))}var rc=function(){function e(){this.data=new Map}return e.prototype.add=function(e,t){var n=this.data,i=n.get(e);i||(i=[],n.set(e,i)),i.contains(t)||i.push(t)},e.prototype.remove=function(e,t){var n=this.data;if(n.has(e)){var i=n.get(e);i.remove(t),0===i.length&&n.delete(e)}},e.prototype.get=function(e){return this.data.get(e)||null},e.prototype.keys=function(){return Array.from(this.data.keys())},e.prototype.clear=function(e){this.data.delete(e)},e.prototype.clearAll=function(){this.data.clear()},e.prototype.contains=function(e,t){var n=this.data.get(e);return!!n&&n.contains(t)},e.prototype.count=function(){for(var e=this.data,t=0,n=0,i=this.keys();n<i.length;n++){var r=i[n],o=e.get(r);o&&(t+=o.length)}return t},e}();function oc(e){for(var t=[],n=0;n<e;n++)t.push((16*Math.random()|0).toString(16));return t.join("")}function ac(e,t){for(var n=0,i=0;i<t&&-1!==(i=e.indexOf("\n",i))&&!(i>=t);)i++,n++;return n}!function(){function e(){this.data=new Map}e.prototype.add=function(e,t){var n=this.data;n.has(e)?n.get(e).push(t):n.set(e,[t])},e.prototype.delete=function(e,t){var n=this.data;if(n.has(e)){var i=n.get(e);i.remove(t),0===i.length&&n.delete(e)}},e.prototype.get=function(e){return this.data.get(e)}}();var sc=function(){function e(){this.data=new Map}return e.prototype.add=function(e,t){var n=this.data;n.has(e)?n.get(e).add(t):n.set(e,new Set([t]))},e.prototype.delete=function(e,t){var n=this.data;if(n.has(e)){var i=n.get(e);i.delete(t),0===i.size&&n.delete(e)}},e.prototype.get=function(e){return this.data.get(e)},e.prototype.getArray=function(e){var t=this.data;return t.has(e)?Array.from(t.get(e)):[]},e}();function lc(e){return"object"!=typeof e}function cc(e,t){if(void 0===t&&(t="\t"),void 0!==e)return uc(e,t).join("\n")}function uc(e,t){if(void 0===e)return["null"];if(lc(e)||!e||"[object Date]"===Object.prototype.toString.call(e))return[JSON.stringify(e)];if(Array.isArray(e)){if(e.every(lc))return[JSON.stringify(e)];for(var n=["["],i=e.length-1,r=0;r<=i;r++)for(var o=(h=uc(e[r],t)).length-1,a=0;a<=o;a++){var s="\t"+h[a];a===o&&r!==i&&(s+=","),n.push(s)}return n.push("]"),n}if("object"==typeof e){var l=!0;for(var c in e)if(e.hasOwnProperty(c)&&!lc(e[c])){l=!1;break}if(l)return[JSON.stringify(e)];n=["{"];var u=Object.keys(e).filter((function(t){return void 0!==e[t]}));for(i=u.length-1,r=0;r<=i;r++){var h;c=u[r];(h=uc(e[c],t))[0]=JSON.stringify(c)+":"+h[0];for(o=h.length-1,a=0;a<=o;a++){s="\t"+h[a];a===o&&r!==i&&(s+=","),n.push(s)}}return n.push("}"),n}return[""]}function hc(e,t){for(var n=0,i=e.length-1;n<=i;){var r=Math.floor((n+i)/2),o=e[r],a=t(o);if(0===a)return o;a<0?i=r-1:n=r+1}return null}function dc(e,t){if(void 0===t&&(t=!1),Array.isArray(e)){var n=e;return t&&(n=n.filter((function(e){return null!=e}))),n.every((function(e){return"string"==typeof e}))}return!1}function pc(e,t){return e.length<=t?e:e.slice(0,t-1).trim()+"â€¦"}var fc=function(e){return JSON.parse(JSON.stringify(e))};function mc(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var i=null,r=null,o=null,a=0,s=0,l=activeWindow,c=function(){var t=r,n=o;return r=null,o=null,e.apply(t,n)},u=function(){if(a){var e=Date.now();if(e<a)return l=activeWindow,i=l.setTimeout(u,a-e),void(a=0)}s=0,i=null,c()},h=function(){for(var e=[],c=0;c<arguments.length;c++)e[c]=arguments[c];r=this,o=e;var d=Date.now();return i?n?a=s=d+t:l!==activeWindow&&s<=d&&(l.clearTimeout(i),l=activeWindow,i=l.setTimeout(u,0)):(l=activeWindow,s=d+t,i=l.setTimeout(u,t)),h};return h.cancel=function(){return i&&(l.clearTimeout(i),i=null),h},h.run=function(){if(i)return l.clearTimeout(i),i=null,c()},h}var vc=window.queueMicrotask||window.setTimeout;function gc(e){var t=null,n=null,i=!1,r=function(){i=!1;var r=t,o=n;t=null,n=null,e.apply(r,o)};return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];t=this,n=e,i||(i=!0,vc(r))}}function yc(e){if(navigator.clipboard&&navigator.permissions)navigator.clipboard.writeText(e);else{var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(e){}document.body.removeChild(t)}}function bc(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){return(t={})[e.type]=e,[2,navigator.clipboard.write([new ClipboardItem(t)])]}))}))}function wc(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return e.arrayBuffer?[2,e.arrayBuffer()]:[2,new Promise((function(t,n){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onabort=i.onerror=function(e){n(e)},i.readAsArrayBuffer(e)}))]}))}))}function kc(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o;return y(this,(function(a){return n=e.getAttr("alt")||null,i=e.createEl("img",{attr:{alt:n}}),r=e.getAttr("width"),o=e.getAttr("height"),r&&i.setAttr("width",r),o&&i.setAttr("height",o),[2,new Promise((function(e){var n=function(){return e()};i.addEventListener("load",n),i.addEventListener("error",n),activeWindow.setTimeout(n,5e3),i.src=t}))]}))}))}function Cc(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,new Promise((function(t){var n=new Image,i=function(){n&&(n.naturalWidth&&n.naturalHeight?t({width:n.naturalWidth,height:n.naturalHeight}):t(null),n=null)};n.addEventListener("load",i),n.addEventListener("error",i),activeWindow.setTimeout(i,5e3),n.src=e}))]}))}))}function Mc(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){return n=e.createEl("audio",{attr:{controls:"",controlsList:"nodownload"}}),[2,new Promise((function(e){var i=function(){return e()};n.addEventListener("loadedmetadata",i),n.addEventListener("error",i),activeWindow.setTimeout(i,5e3),n.src=t}))]}))}))}function Ec(e,t){return g(this,void 0,Promise,(function(){var n,i,r;return y(this,(function(o){return n=e.win,i=e.createEl("video",{attr:{controls:"",preload:"metadata"}}),[2,new Promise((function(o){var a=function(){n.clearTimeout(r),i.style.height="",o()};i.addEventListener("loadedmetadata",(function(){0===i.videoWidth&&0===i.videoHeight?(i.src="",e.removeChild(i),Mc(e,t).then(a,a)):a()})),i.addEventListener("error",a),i.style.height="0",r=n.setTimeout(a,5e3),i.src=t+"#t=0.001"}))]}))}))}function Sc(e,t){var n=activeWindow;if(t>0&&n.requestIdleCallback){var i=!1,r=n.requestIdleCallback((function(){i=!0,n.clearTimeout(o),e()}),{timeout:t}),o=n.setTimeout((function(){i=!0,n.cancelIdleCallback(r),e()}),t);return{high:!1,cancel:function(){i||(i=!0,n.cancelIdleCallback(r),n.clearTimeout(o))}}}var a=n.requestAnimationFrame(e);return{high:!0,cancel:function(){return n.cancelAnimationFrame(a)}}}function xc(e,t){var n=e.relatedTarget;return!n||!t.contains(n)}function Tc(e){e.addEventListener("mousedown",(function(e){1===e.button&&e.preventDefault()}))}var Dc;/bot|crawl|spider/i.test(navigator.userAgent);function Ac(){Dc&&Dc()}var Lc="mobile-tap",Pc="a, button, .tappable, .is-clickable, .clickable-icon, .text-icon-button",Ic=null;var Fc={sx:0,sy:0,ex:0,ey:0,t:0};function Oc(e,t){var n=0,i=0,r=0,o=0,a=function(e){if(1===e.touches.length){var t=e.touches[0];n=t.identifier,i=t.clientX,r=t.clientY,o=Date.now(),window.addEventListener("touchend",s),window.addEventListener("touchcancel",s)}},s=function(e){var a=Nc(e,n);if((0===e.touches.length||a)&&(window.removeEventListener("touchend",s),window.removeEventListener("touchcancel",s),"touchend"===e.type&&a&&Date.now()-o<600&&Math.abs(i-a.clientX)<5&&Math.abs(r-a.clientY)<5)){var l=new MouseEvent("click",{clientX:a.clientX,clientY:a.clientY,button:0,buttons:0,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,bubbles:!0,cancelable:!0});Object.defineProperty(l,"target",{writable:!1,value:e.target}),t(l,e.target),l.defaultPrevented&&e.preventDefault()}};return e.addEventListener("touchstart",a),function(){return e.removeEventListener("touchstart",a)}}function Bc(e){return Fc&&Date.now()-Fc.t<1e3&&(Math.abs(e.clientX-Fc.sx)<5&&Math.abs(e.clientY-Fc.sy)<5||Math.abs(e.clientX-Fc.ex)<5&&Math.abs(e.clientY-Fc.ey)<5)}function Nc(e,t){for(var n=e.changedTouches,i=0;i<n.length;i++){var r=n[i];if(r.identifier===t)return r}return null}function Rc(e){if(!e.parentElement)return e;var t=e.parentElement;return t.scrollHeight>t.clientHeight?t:Rc(t)}function Hc(e,t,n,i,r,o){var a,s,l=Zl.isMobile;i*=i,s=function(e,a){if(n.firstChild!==n.lastChild){e.preventDefault();var s,c=e.win,u=e.win.document,h=a.clientX,d=a.clientY,p=!1,f=!l,m=t.getBoundingClientRect(),v=h-m.x,g=d-m.y,y=0,b=null;c.setTimeout((function(){p||(f=!0,e instanceof TouchEvent&&(Fl(c,h,d),navigator.vibrate(200)))}),250);var w=0,k=0,C=0,M=Rc(n),E=M.getBoundingClientRect(),S=function(e){var i,r=Array.from(n.childNodes);for(i=0;i<r.length-1;i++){var o=r[i].getBoundingClientRect();if(e-g+y/2<o.bottom)break}if(r[i]!==t){var a=M.scrollTop;t.detach();var s=n.childNodes[i];n.insertBefore(t,s),M.scrollTop=a,Zl.isMobile&&navigator.vibrate(0)}return i},x=function(){var e;0!==w&&(void 0===e&&(e=.9),k=k*e+w*(1-e),M.scrollTop+=k,S(C))};return{move:function(e,n){var o=n.clientX,a=C=n.clientY;if(null===b){var l=o-h,m=a-d;if(!(p=l*l+m*m>=i)||!f)return!0;var M=t.offsetWidth,T=t.offsetHeight;b=createDiv("drag-reorder-ghost");var D=t.cloneNode(!0);D.setAttribute("aria-label",null),b.appendChild(D),D.style.width=M+"px",D.style.height=T+"px",u.body.appendChild(b),u.body.addClass("is-grabbing"),t.addClass("drag-ghost-hidden"),r();var A=b.getBoundingClientRect(),L=D.getBoundingClientRect();v+=L.x-A.x,g+=L.y-A.y,y=A.height,s=c.setInterval(x,1e3/60)}e.preventDefault();var P=Math.min(50,E.height/3),I=E.top+P,F=E.bottom-P,O=a-g,B=O+y;return O<I?w=(O-I)/P:B>F?w=(B-F)/P:(w=0,k=0),w=10*Math.clamp(w,-1,1),S(C),b.style.left=o-v+"px",b.style.top=a-g+"px",!0},end:function(e,i){if(b){e.preventDefault();var r=S(C);u.body.removeClass("is-grabbing"),t.removeClass("drag-ghost-hidden"),t.detach(),b.detach();var a=n.childNodes[r];n.insertBefore(t,a),c.clearInterval(s),o(r)}else e.instanceOf(TouchEvent)&&e.target.dispatchEvent(new MouseEvent("click",{button:0,buttons:0,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey,shiftKey:e.shiftKey,screenX:i.screenX,screenY:i.screenY,bubbles:!0,cancelable:!0,clientX:h,clientY:d}))}}}},(a=e).addEventListener("mousedown",(function(e){if(0===e.button&&!Bc(e)){var t=s(e,e);if(t){var n=function(e){t.move(e,e)||o()},i=function(e){o(),t.end(e,e)},r=e.win,o=function(){r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",i)};r.addEventListener("mousemove",n),r.addEventListener("mouseup",i)}}})),a.addEventListener("touchstart",(function(e){if(!(e.touches.length>1)){var t=e.touches[0],n=s(e,t);if(n){var i=t.identifier,r=function(e){var t=Nc(e,i);t&&(c(),n.end(e,t))},o=function(e){var t=Nc(e,i);t&&(c(),n.end(e,t))},a=function(e){var t=Nc(e,i);t&&(n.move(e,t)||c())},l=e.win,c=function(){l.removeEventListener("touchcancel",o),l.removeEventListener("touchend",r),l.removeEventListener("touchmove",a)};l.addEventListener("touchcancel",o),l.addEventListener("touchend",r),l.addEventListener("touchmove",a,{passive:!1})}}}),{passive:!1})}function Vc(e){for(var t=0,n=e.findAll("audio, video");t<n.length;t++){var i=n[t];i.src="",i.srcObject=null}}function zc(e){if(!e||e.contains(" "))return!1;try{new URL(e)}catch(e){return!1}return!0}function qc(e){var t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}var Uc=/^(([^<>()[\]\\.,;:\s@\"`]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\b/;function _c(e){return Uc.test(e)}function Wc(e,t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){return[2,new Promise((function(i){return e.toBlob(i,t,n)}))]}))}))}var jc=/\u00A0|\u202F/g;function Gc(e){return e.replace(jc," ")}function Kc(e){var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function Yc(e){var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}function Zc(e){for(;e;){if(Kc(e).startsWith("."))return!0;e=Yc(e)}return!1}function Xc(e){var t=Kc(e),n=t.lastIndexOf(".");return-1===n||n===t.length-1||0===n?t:t.substr(0,n)}function $c(e){var t=e.lastIndexOf(".");return-1===t||t===e.length-1||0===t?e:e.substr(0,t)}function Qc(e){var t=e.lastIndexOf(".");return-1===t||t===e.length-1||0===t?"":e.substr(t+1).toLowerCase()}function Jc(e,t){return t?e+"."+t:e}function eu(e,t){return Qc(e)===t}function tu(e){return Gc(nu(e)).normalize("NFC")}function nu(e){return""===(e=e.replace(/([\\/])+/g,"/").replace(/(^\/+|\/+$)/g,""))&&(e="/"),e}function iu(e){var t=Kc(e);return"md"===Qc(t)?Xc(t):t}function ru(e){return"md"===Qc(Kc(e))?$c(e):e}var ou={"image/bmp":"bmp","image/png":"png","image/jpeg":"jpg","image/gif":"gif","image/svg+xml":"svg","image/webp":"webp","image/avif":"avif","audio/mp3":"mp3","audio/wav":"wav","audio/m4a":"m4a","audio/3gp":"3gp","audio/flac":"flac","audio/ogg":"opus","video/mp4":"mp4","video/webm":"webm","video/ogg":"ogv","application/ogg":"ogg","video/quicktime":"mov","video/x-matroska":"mkv","application/pdf":"pdf"};function au(e){return ou.hasOwnProperty(e)?ou[e]:""}function su(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function lu(e){return Buffer.from(e)}function cu(e){return{ctime:Math.round(e.birthtimeMs),mtime:Math.round(e.mtimeMs),size:e.size}}var uu=window.process,hu=uu?uu.platform:"",du="darwin"===hu,pu="win32"===hu,fu=du||pu,mu=function(){function e(e){this.thingsHappening=mc(this.kill.bind(this),6e4,!0),this.basePath=e,this.fs=window.require("original-fs"),this.fsPromises=this.fs.promises,this.path=window.require("path"),this.url=window.require("url");var t=window.require("electron");this.ipcRenderer=t.ipcRenderer,this.files={},this.promise=Promise.resolve(),this.watcher=null,this.watchers={},this.handler=null;try{this.btime=window.require("btime")}catch(e){}this.insensitive=du||pu;try{this.testInsensitive()}catch(e){console.error(e)}}return e.prototype.testInsensitive=function(){var e=this,t=e.fs,n=e.path,i=e.basePath,r=n.join(i,".OBSIDIANTEST"),o=n.join(i,".OBSIDIANTEST".toLowerCase());t.existsSync(r)&&t.unlinkSync(r),t.writeFileSync(r,"","utf8"),this.insensitive=t.existsSync(o),t.unlinkSync(r)},e.prototype.getName=function(){return this.path.basename(this.basePath)},e.prototype.getBasePath=function(){return this.basePath},e.prototype.listAll=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return this.files["/"]={type:"folder",realpath:"/"},[4,this.listRecursive("")];case 1:return e.sent(),[2]}}))}))},e.prototype.listRecursive=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=this.getFullRealPath(e),[4,this.fsPromises.readdir(t)];case 1:for(n=s.sent(),this.thingsHappening(),i=[],r=0,o=n;r<o.length;r++)a=o[r],i.push(this.listRecursiveChild(e,a));return[4,Promise.all(i)];case 2:return s.sent(),[2]}}))}))},e.prototype.listRecursiveChild=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=nu(""===e?t:e+"/"+t),i=tu(n),this.trigger("raw",i),Zc(i)?[4,this.reconcileDeletion(n,i)]:[3,2];case 1:return[2,o.sent()];case 2:return o.trys.push([2,4,,8]),[4,this.reconcileFileInternal(n,i)];case 3:return o.sent(),[3,8];case 4:return"ENOENT"!==(r=o.sent()).code?[3,6]:[4,this.reconcileDeletion(n,i,!0)];case 5:return o.sent(),[3,7];case 6:throw r;case 7:return[3,8];case 8:return[2]}}))}))},e.prototype.mkdir=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),[4,this.fsPromises.mkdir(t,{recursive:!0})];case 1:return n.sent(),[4,this.reconcileInternalFile(e)];case 2:return n.sent(),[2]}}))}))}))},e.prototype.trashSystem=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),this.ipcRenderer.sendSync("trash",t)?[4,this.reconcileInternalFile(e)]:[2,!1];case 1:return n.sent(),[2,!0]}}))}))}))},e.prototype.trashLocal=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=this.getFullPath(e),n=this.getFullPath(".trash"),[4,this.fsPromises.mkdir(n,{recursive:!0})];case 1:s.sent(),i=this.path.extname(t),r=this.path.basename(t,i),o=this.path.join(n,r+i),a=1,s.label=2;case 2:return[4,this._exists(o)];case 3:return s.sent()?(a++,o=this.path.join(n,r+" "+a+i),[3,2]):[3,4];case 4:return[4,this.fsPromises.rename(t,o)];case 5:return s.sent(),[4,this.reconcileInternalFile(e)];case 6:return s.sent(),[2]}}))}))}))},e.prototype.rmdir=function(e,t){var n=this;return this.queue((function(){return g(n,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=this.getFullPath(e),t?[4,this.fsPromises.rm(n,{maxRetries:5,recursive:t})]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this.fsPromises.rmdir(n,{maxRetries:5})];case 3:i.sent(),i.label=4;case 4:return[4,this.reconcileInternalFile(e)];case 5:return i.sent(),[2]}}))}))}))},e.prototype.read=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){t=this.getFullPath(e);try{return[2,this.fsPromises.readFile(t,"utf8")]}catch(t){throw this.queue((function(){return n.reconcileInternalFile(e)})),t}return[2]}))}))}))},e.prototype.readBinary=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i=this;return y(this,(function(r){switch(r.label){case 0:t=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fsPromises.readFile(t)];case 2:return[2,su(r.sent())];case 3:throw n=r.sent(),this.queue((function(){return i.reconcileInternalFile(e)})),n;case 4:return[2]}}))}))}))},e.prototype.write=function(e,t,n){var i=this;return this.queue((function(){return g(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,4,6]),[4,this.fsPromises.writeFile(i,t,"utf8")];case 2:return r.sent(),[4,this.applyWriteOptions(i,n)];case 3:return r.sent(),[3,6];case 4:return[4,this.reconcileInternalFile(e)];case 5:return r.sent(),[7];case 6:return[2]}}))}))}))},e.prototype.writeBinary=function(e,t,n){var i=this;return this.queue((function(){return g(i,void 0,void 0,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:i=this.getFullPath(e),r=lu(t),o.label=1;case 1:return o.trys.push([1,,4,6]),[4,this.fsPromises.writeFile(i,r)];case 2:return o.sent(),[4,this.applyWriteOptions(i,n)];case 3:return o.sent(),[3,6];case 4:return[4,this.reconcileInternalFile(e)];case 5:return o.sent(),[7];case 6:return[2]}}))}))}))},e.prototype.append=function(e,t,n){var i=this;return this.queue((function(){return g(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,4,6]),[4,this.fsPromises.appendFile(i,t,"utf8")];case 2:return r.sent(),[4,this.applyWriteOptions(i,n)];case 3:return r.sent(),[3,6];case 4:return[4,this.reconcileInternalFile(e)];case 5:return r.sent(),[7];case 6:return[2]}}))}))}))},e.prototype.process=function(e,t,n){var i=this;return this.queue((function(){return g(i,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=this.getFullPath(e),[4,this.fsPromises.readFile(i,"utf8")];case 1:if(r=a.sent(),(o=t(r))===r)return[2,r];a.label=2;case 2:return a.trys.push([2,,5,7]),[4,this.fsPromises.writeFile(i,o,"utf8")];case 3:return a.sent(),[4,this.applyWriteOptions(i,n)];case 4:return a.sent(),[3,7];case 5:return[4,this.reconcileInternalFile(e)];case 6:return a.sent(),[7];case 7:return[2,o]}}))}))}))},e.prototype.applyWriteOptions=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return t?(n=t.ctime,i=t.mtime,r=t.immediate,n&&this.btime&&this.btime.btime(e,n),i?[4,this.fsPromises.utimes(e,i/1e3,i/1e3)]:[3,2]):[2];case 1:o.sent(),o.label=2;case 2:return r&&r(),[2]}}))}))},e.prototype.getResourcePath=function(e){var t=this.getFullPath(e),n=0,i=this.files[e];i&&"file"===i.type&&(n=i.mtime),n||(n=Date.now());var r=this.url.pathToFileURL(t).href;return r.startsWith("file:///")?r=r.substring(8):r.startsWith("file://")&&(r="%5C%5C"+r.substring(7)),Zl.resourcePathPrefix+r+"?"+n},e.prototype.getFilePath=function(e){var t=this.getFullPath(e);return window.require("url").pathToFileURL(t).toString()},e.prototype.remove=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),[4,this.fsPromises.unlink(t)];case 1:return n.sent(),[4,this.reconcileInternalFile(e)];case 2:return n.sent(),[2]}}))}))}))},e.prototype.update=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.reconcileInternalFile(e)];case 1:return t.sent(),[2]}}))}))}))},e.prototype.rename=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return e===t?[2]:[4,this.queue((function(){return g(n,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return n=this.getFullPath(e),i=this.getFullPath(t),[4,this._exists(i,!1)];case 1:if(d.sent()&&(!this.insensitive||e.toLowerCase()!==t.toLowerCase()))throw new Error("Destination file already exists!");return r=this.files[e],o=r?r.realpath:null,[4,this.fsPromises.rename(n,i)];case 2:return d.sent(),r?(delete this.files[e],a=this.getRealPath(t),r.realpath=a,this.files[t]=r,this.trigger("renamed",t,e),"folder"===r.type&&this.watchers.hasOwnProperty(e)?(this.stopWatchPath(e),[4,this.startWatchPath(t)]):[3,4]):[2];case 3:d.sent(),d.label=4;case 4:if("folder"===r.type)for(s in this.files)this.files.hasOwnProperty(s)&&s.startsWith(e+"/")&&(l=s.slice(e.length),c=t+l,u=this.files[s],delete this.files[s],h=u.realpath.slice(o.length),u.realpath=a+h,this.files[c]=u,this.trigger("renamed",c,s));return[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},e.prototype.copyRecursive=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return[4,this.fsPromises.stat(e)];case 1:return(n=c.sent()).isFile()?[4,this.fsPromises.copyFile(e,t,this.fs.constants.COPYFILE_EXCL)]:[3,3];case 2:c.sent(),c.label=3;case 3:return n.isDirectory()?[4,this.fsPromises.mkdir(t,{recursive:!0})]:[3,9];case 4:return c.sent(),[4,this.fsPromises.readdir(e)];case 5:i=c.sent(),r=0,o=i,c.label=6;case 6:return r<o.length?(a=o[r],s=this.path.join(e,a),l=this.path.join(t,a),[4,this.copyRecursive(s,l)]):[3,9];case 7:c.sent(),c.label=8;case 8:return r++,[3,6];case 9:return[2]}}))}))},e.prototype.copy=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return[4,this.queue((function(){return g(n,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=this.getFullPath(e),i=this.getFullPath(t),[4,this.copyRecursive(n,i)];case 1:return r.sent(),[4,this.reconcileInternalFile(t)];case 2:return r.sent(),[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},e.prototype.exists=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){return[2,this.queue((function(){var i=n.getFullPath(e);return n._exists(i,t)}))]}))}))},e.prototype._exists=function(e,t){return g(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.fsPromises.access(e)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[2,!1];case 3:return t&&this.insensitive?(n=this.path.dirname(e),i=this.path.basename(e),[4,this.fsPromises.readdir(n)]):[3,5];case 4:if(-1===r.sent().indexOf(i))return[2,!1];r.label=5;case 5:return[2,!0]}}))}))},e.prototype.stat=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:t=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fsPromises.stat(t)];case 2:return(n=r.sent()).isFile()?[2,m({type:"file"},cu(n))]:n.isDirectory()?[2,m({type:"folder"},cu(n))]:[3,4];case 3:if("ENOENT"!==(i=r.sent()).code)throw i;return[3,4];case 4:return[2,null]}}))}))}))]}))}))},e.prototype.list=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return t=this.getFullPath(e),[4,this.fsPromises.readdir(t)];case 1:n=u.sent(),i={folders:[],files:[]},r=0,o=n,u.label=2;case 2:return r<o.length?(a=o[r],s=nu(""===e?a:e+"/"+a),l=tu(s),[4,this.fsPromises.stat(this.getFullRealPath(s))]):[3,5];case 3:(c=u.sent()).isFile()&&i.files.push(l),c.isDirectory()&&i.folders.push(l),u.label=4;case 4:return r++,[3,2];case 5:return[2,i]}}))}))}))]}))}))},e.prototype.watch=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){switch(n.label){case 0:return this.stopWatch(),this.handler=e,[4,this.startWatchPath("/")];case 1:return n.sent(),[2,this.queue((function(){return t.listAll()}))]}}))}))},e.prototype.watchHiddenRecursive=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(fu)return[2];l.label=1;case 1:return l.trys.push([1,12,,13]),t=this.getFullRealPath(e),[4,this.fsPromises.readdir(t)];case 2:return n=l.sent(),[4,this.startWatchPath(e)];case 3:l.sent(),i=0,r=n,l.label=4;case 4:if(!(i<r.length))return[3,11];o=r[i],l.label=5;case 5:return l.trys.push([5,9,,10]),a=nu(""===e?o:e+"/"+o),s=this.getFullRealPath(a),[4,this.fsPromises.lstat(s)];case 6:return l.sent().isDirectory()?[4,this.watchHiddenRecursive(a)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:return l.sent(),[3,10];case 10:return i++,[3,4];case 11:return[3,13];case 12:return l.sent(),[3,13];case 13:return[2]}}))}))},e.prototype.stopWatch=function(){for(var e in this.watchers)this.watchers.hasOwnProperty(e)&&this.stopWatchPath(e);this.handler=null},e.prototype.startWatchPath=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:if(t=this.getRealPath(e),this.watchers[e])return[2];n=this.getFullPath(e),i=n,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.fsPromises.realpath(n)];case 2:return i=s.sent(),[3,4];case 3:return"ENOENT"!==(r=s.sent()).code&&console.error(r),[3,4];case 4:return(o=this.fs.watch(n,{persistent:!1,encoding:"utf8",recursive:fu})).on("change",(function(e,n){var i="/"===t?n:t+"/"+n;a.onFileChange(i)})),o.on("error",(function(){a.onFileChange(t)})),this.watchers[e]={watcher:o,resolvedPath:i},[2]}}))}))},e.prototype.stopWatchPath=function(e){var t=this.watchers[e];t&&(t.watcher.close(),delete this.watchers[e])},e.prototype.onFileChange=function(e){var t=this;e&&(e=nu(e),setTimeout((function(){var n=tu(e);t.queue((function(){return t.reconcileFile(e,n,!1)}))}),0))},e.prototype.reconcileInternalFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.reconcileFile(this.getRealPath(e),e)]}))}))},e.prototype.reconcileFile=function(e,t){return g(this,arguments,Promise,(function(e,t,n){var i,r,o,a,s;return void 0===n&&(n=!0),y(this,(function(l){switch(l.label){case 0:return this.trigger("raw",t),Zc(t)?[4,this.reconcileDeletion(e,t,n)]:[3,2];case 1:return[2,l.sent()];case 2:return(i=Yc(t))&&"/"!==i?this.files[t]?[3,4]:[4,this.reconcileFile(Yc(e),i,n)]:[3,4];case 3:l.sent(),l.label=4;case 4:return l.trys.push([4,9,,13]),r=this.getFullRealPath(e),this.insensitive?(o=this.path.dirname(r),a=this.path.basename(t),[4,this.fsPromises.readdir(o)]):[3,7];case 5:return-1!==l.sent().map((function(e){return Gc(e).normalize("NFC")})).indexOf(a)?[3,7]:[4,this.reconcileDeletion(e,t,n)];case 6:return[2,l.sent()];case 7:return[4,this.reconcileFileInternal(e,t)];case 8:return l.sent(),[3,13];case 9:return"ENOENT"!==(s=l.sent()).code?[3,11]:[4,this.reconcileDeletion(e,t,n)];case 10:return l.sent(),[3,12];case 11:console.error(s),l.label=12;case 12:return[3,13];case 13:return[2]}}))}))},e.prototype.reconcileFileInternal=function(e,t){return g(this,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=this.getFullRealPath(e),[4,this.fsPromises.lstat(n)];case 1:return(i=r.sent()).isFile()?[4,this.reconcileFileCreation(e,t,i)]:[3,3];case 2:return r.sent(),[3,7];case 3:return i.isDirectory()?[4,this.reconcileFolderCreation(e,t)]:[3,5];case 4:return r.sent(),[3,7];case 5:return i.isSymbolicLink()?[4,this.reconcileSymbolicLinkCreation(e,t)]:[3,7];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))},e.prototype.reconcileFileCreation=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){if(i=cu(n),r=this.files[t]){if(r.realpath=e,"file"===r.type)return r.mtime===Math.round(n.mtimeMs)&&r.size===n.size||(r.mtime=Math.round(n.mtimeMs),r.size=n.size,this.trigger("raw",t,t,i),this.trigger("modified",t,t,i)),[2];this.removeFile(t)}return this.files[t]=function(e,t){return t.isFile()?{type:"file",realpath:e,ctime:Math.round(t.birthtimeMs),mtime:Math.round(t.mtimeMs),size:t.size}:t.isDirectory()?{type:"folder",realpath:e}:void 0}(e,n),this.trigger("file-created",t,t,i),[2]}))}))},e.prototype.reconcileFolderCreation=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return this.files.hasOwnProperty(t)?[3,4]:(this.files[t]={type:"folder",realpath:e},this.trigger("folder-created",t),fu?[3,2]:[4,this.startWatchPath(t)]);case 1:n.sent(),n.label=2;case 2:return[4,this.listRecursive(e)];case 3:return n.sent(),[3,5];case 4:this.files[t].realpath=e,n.label=5;case 5:return[2]}}))}))},e.prototype.reconcileSymbolicLinkCreation=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:n=this.getFullRealPath(e),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.fsPromises.realpath(n)];case 2:return i=c.sent(),[3,4];case 3:return c.sent(),[2];case 4:if(r=this.path.sep,(o=this.watchers).hasOwnProperty(t))o[t].resolvedPath=i;else for(a in o)if(o.hasOwnProperty(a)&&a!==t&&(s=o[a].resolvedPath,i===s||s.startsWith(i+r)||i.startsWith(s+r)))return[2];return[4,this.fsPromises.stat(n)];case 5:return(l=c.sent()).isFile()?[4,this.reconcileFileCreation(e,t,l)]:[3,7];case 6:return c.sent(),[3,11];case 7:return l.isDirectory()?fu?[4,this.startWatchPath(t)]:[3,9]:[3,11];case 8:c.sent(),c.label=9;case 9:return[4,this.reconcileFolderCreation(e,t)];case 10:c.sent(),c.label=11;case 11:return[2]}}))}))},e.prototype.reconcileDeletion=function(e,t){return g(this,arguments,Promise,(function(e,t,n){var i,r,o=this;return void 0===n&&(n=!0),y(this,(function(a){if("/"===t)return this.trigger("closed",t),[2];if(this.stopWatchPath(t),!(i=this.files[t]))return[2];if(!n)return setTimeout((function(){o.queue((function(){return o.reconcileFile(e,t)}))}),100),[2];if("folder"===i.type)for(r in this.files)this.files.hasOwnProperty(r)&&r.startsWith(t+"/")&&this.removeFile(r);return this.removeFile(t),[2]}))}))},e.prototype.trigger=function(e,t,n,i){this.handler&&this.handler(e,t,n,i)},e.prototype.getRealPath=function(e){for(var t=e;t;){if(this.files.hasOwnProperty(t)){var n=e.substr(t.length);return this.files[t].realpath+n}t=Yc(t)}return e},e.prototype.getFullPath=function(e){var t=this.getRealPath(e);return this.getFullRealPath(t)},e.prototype.getFullRealPath=function(e){return this.path.join(this.basePath,e)},e.prototype.kill=function(){this.killLastAction&&(this.killLastAction(new Error("File system operation timed out.")),this.killLastAction=null)},e.prototype.queue=function(e){var t=this,n=function(){var n=new Promise((function(e,n){return t.killLastAction=n}));return t.thingsHappening(),Promise.race([n,e()])},i=this.promise.then(n,n);return this.promise=i,i},e.prototype.removeFile=function(e){var t=this.files[e];delete this.files[e],t&&("file"===t.type?this.trigger("file-removed",e):"folder"===t.type&&this.trigger("folder-removed",e))},e.readLocalFile=function(e){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return(t=window.require)?(n=t("fs"),i=su,[4,n.promises.readFile(e)]):[3,2];case 1:return[2,i.apply(void 0,[r.sent()])];case 2:return[2,null]}}))}))},e.mkdir=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return(t=window.require)?[4,t("fs").promises.mkdir(e,{recursive:!0})]:[3,2];case 1:return[2,n.sent()];case 2:return[2,null]}}))}))},e}(),vu=1024,gu=0,yu=function(e,t){this.from=e,this.to=t},bu=function(){function e(e){void 0===e&&(e={}),this.id=gu++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||function(){throw new Error("This node type doesn't define a deserialize function")}}return e.prototype.add=function(e){var t=this;if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Cu.match(e)),function(n){var i=e(n);return void 0===i?null:[t,i]}},e}();bu.closedBy=new bu({deserialize:function(e){return e.split(" ")}}),bu.openedBy=new bu({deserialize:function(e){return e.split(" ")}}),bu.group=new bu({deserialize:function(e){return e.split(" ")}}),bu.isolate=new bu({deserialize:function(e){if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),bu.contextHash=new bu({perNode:!0}),bu.lookAhead=new bu({perNode:!0}),bu.mounted=new bu({perNode:!0});var wu=function(){function e(e,t,n){this.tree=e,this.overlay=t,this.parser=n}return e.get=function(e){return e&&e.props&&e.props[bu.mounted.id]},e}(),ku=Object.create(null),Cu=function(){function e(e,t,n,i){void 0===i&&(i=0),this.name=e,this.props=t,this.id=n,this.flags=i}return e.define=function(t){var n=t.props&&t.props.length?Object.create(null):ku,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),r=new e(t.name||"",n,t.id,i);if(t.props)for(var o=0,a=t.props;o<a.length;o++){var s=a[o];if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r},e.prototype.prop=function(e){return this.props[e.id]},Object.defineProperty(e.prototype,"isTop",{get:function(){return(1&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSkipped",{get:function(){return(2&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return(4&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAnonymous",{get:function(){return(8&this.flags)>0},enumerable:!1,configurable:!0}),e.prototype.is=function(e){if("string"==typeof e){if(this.name==e)return!0;var t=this.prop(bu.group);return!!t&&t.indexOf(e)>-1}return this.id==e},e.match=function(e){var t=Object.create(null);for(var n in e)for(var i=0,r=n.split(" ");i<r.length;i++){var o=r[i];t[o]=e[n]}return function(e){for(var n=e.prop(bu.group),i=-1;i<(n?n.length:0);i++){var r=t[i<0?e.name:n[i]];if(r)return r}}},e}();Cu.none=new Cu("",Object.create(null),0,8);var Mu,Eu=function(){function e(e){this.types=e;for(var t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}return e.prototype.extend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=[],r=0,o=this.types;r<o.length;r++){for(var a=o[r],s=null,l=0,c=t;l<c.length;l++){var u=(0,c[l])(a);u&&(s||(s=Object.assign({},a.props)),s[u[0].id]=u[1])}i.push(s?new Cu(a.name,s,a.id,a.flags):a)}return new e(i)},e}(),Su=new WeakMap,xu=new WeakMap;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(Mu||(Mu={}));var Tu=function(){function e(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(var o=0,a=r;o<a.length;o++){var s=a[o],l=s[0],c=s[1];this.props["number"==typeof l?l:l.id]=c}}}return e.prototype.toString=function(){var e=wu.get(this);if(e&&!e.overlay)return e.tree.toString();for(var t="",n=0,i=this.children;n<i.length;n++){var r=i[n].toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t},e.prototype.cursor=function(e){return void 0===e&&(e=0),new zu(this.topNode,e)},e.prototype.cursorAt=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var i=Su.get(this)||this.topNode,r=new zu(i);return r.moveTo(e,t),Su.set(this,r._tree),r},Object.defineProperty(e.prototype,"topNode",{get:function(){return new Fu(this,0,0,null)},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e,t){void 0===t&&(t=0);var n=Pu(Su.get(this)||this.topNode,e,t,!1);return Su.set(this,n),n},e.prototype.resolveInner=function(e,t){void 0===t&&(t=0);var n=Pu(xu.get(this)||this.topNode,e,t,!0);return xu.set(this,n),n},e.prototype.resolveStack=function(e,t){return void 0===t&&(t=0),function(e,t,n){for(var i=e.resolveInner(t,n),r=null,o=i instanceof Fu?i:i.context.parent;o;o=o.parent)if(o.index<0){var a=o.parent;(r||(r=[i])).push(a.resolve(t,n)),o=a}else{var s=wu.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=t&&s.overlay[s.overlay.length-1].to>=t){var l=new Fu(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(Pu(l,t,n,!1))}}return r?Hu(r):i}(this,e,t)},e.prototype.iterate=function(e){for(var t=e.enter,n=e.leave,i=e.from,r=void 0===i?0:i,o=e.to,a=void 0===o?this.length:o,s=e.mode||0,l=(s&Mu.IncludeAnonymous)>0,c=this.cursor(s|Mu.IncludeAnonymous);;){var u=!1;if(c.from<=a&&c.to>=r&&(!l&&c.type.isAnonymous||!1!==t(c))){if(c.firstChild())continue;u=!0}for(;u&&n&&(l||!c.type.isAnonymous)&&n(c),!c.nextSibling();){if(!c.parent())return;u=!0}}},e.prototype.prop=function(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)},Object.defineProperty(e.prototype,"propValues",{get:function(){var e=[];if(this.props)for(var t in this.props)e.push([+t,this.props[t]]);return e},enumerable:!1,configurable:!0}),e.prototype.balance=function(t){var n=this;return void 0===t&&(t={}),this.children.length<=8?this:ju(Cu.none,this.children,this.positions,0,this.children.length,0,this.length,(function(t,i,r){return new e(n.type,t,i,r,n.propValues)}),t.makeTree||function(t,n,i){return new e(Cu.none,t,n,i)})},e.build=function(e){return Uu(e)},e}();Tu.empty=new Tu(Cu.none,[],[],0);var Du=function(){function e(e,t){this.buffer=e,this.index=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this.index},enumerable:!1,configurable:!0}),e.prototype.next=function(){this.index-=4},e.prototype.fork=function(){return new e(this.buffer,this.index)},e}(),Au=function(){function e(e,t,n){this.buffer=e,this.length=t,this.set=n}return Object.defineProperty(e.prototype,"type",{get:function(){return Cu.none},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var e=[],t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")},e.prototype.childString=function(e){var t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;for(var o=[];e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"},e.prototype.findChild=function(e,t,n,i,r){for(var o=this.buffer,a=-1,s=e;s!=t&&!(Lu(r,i,o[s+1],o[s+2])&&(a=s,n>0));s=o[s+3]);return a},e.prototype.slice=function(t,n,i){for(var r=this.buffer,o=new Uint16Array(n-t),a=0,s=t,l=0;s<n;){o[l++]=r[s++],o[l++]=r[s++]-i;var c=o[l++]=r[s++]-i;o[l++]=r[s++]-t,a=Math.max(a,c)}return new e(o,a,this.set)},e}();function Lu(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function Pu(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){if(!(s=!i&&e instanceof Fu&&e.index<0?null:e.parent))return e;e=s}var o=i?0:Mu.IgnoreOverlays;if(i)for(var a=e,s=a.parent;s;s=(a=s).parent)a instanceof Fu&&a.index<0&&(null===(r=s.enter(t,n,o))||void 0===r?void 0:r.from)!=a.from&&(e=s);for(;;){var l=e.enter(t,n,o);if(!l)return e;e=l}}var Iu=function(){function e(){}return e.prototype.cursor=function(e){return void 0===e&&(e=0),new zu(this,e)},e.prototype.getChild=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=Ou(this,e,t,n);return i.length?i[0]:null},e.prototype.getChildren=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),Ou(this,e,t,n)},e.prototype.resolve=function(e,t){return void 0===t&&(t=0),Pu(this,e,t,!1)},e.prototype.resolveInner=function(e,t){return void 0===t&&(t=0),Pu(this,e,t,!0)},e.prototype.matchContext=function(e){return Bu(this.parent,e)},e.prototype.enterUnfinishedNodesBefore=function(e){for(var t=this.childBefore(e),n=this;t;){var i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n},Object.defineProperty(e.prototype,"node",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this.parent},enumerable:!1,configurable:!0}),e}(),Fu=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o._tree=t,o.from=n,o.index=i,o._parent=r,o}return f(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._tree.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._tree.type.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+this._tree.length},enumerable:!1,configurable:!0}),t.prototype.nextChild=function(e,n,i,r,o){void 0===o&&(o=0);for(var a=this;;){for(var s=a._tree,l=s.children,c=s.positions,u=n>0?l.length:-1;e!=u;e+=n){var h=l[e],d=c[e]+a.from;if(Lu(r,i,d,d+h.length))if(h instanceof Au){if(o&Mu.ExcludeBuffers)continue;var p=h.findChild(0,h.buffer.length,n,i-d,r);if(p>-1)return new Ru(new Nu(a,h,e,d),null,p)}else if(o&Mu.IncludeAnonymous||!h.type.isAnonymous||qu(h)){var f=void 0;if(!(o&Mu.IgnoreMounts)&&(f=wu.get(h))&&!f.overlay)return new t(f.tree,d,e,a);var m=new t(h,d,e,a);return o&Mu.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(n<0?h.children.length-1:0,n,i,r)}}if(o&Mu.IncludeAnonymous||!a.type.isAnonymous)return null;if(e=a.index>=0?a.index+n:n<0?-1:a._parent._tree.children.length,!(a=a._parent))return null}},Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.nextChild(0,1,0,4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.nextChild(this._tree.children.length-1,-1,0,4)},enumerable:!1,configurable:!0}),t.prototype.childAfter=function(e){return this.nextChild(0,1,e,2)},t.prototype.childBefore=function(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)},t.prototype.enter=function(e,n,i){var r;if(void 0===i&&(i=0),!(i&Mu.IgnoreOverlays)&&(r=wu.get(this._tree))&&r.overlay)for(var o=e-this.from,a=0,s=r.overlay;a<s.length;a++){var l=s[a],c=l.from,u=l.to;if((n>0?c<=o:c<o)&&(n<0?u>=o:u>o))return new t(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)},t.prototype.nextSignificantParent=function(){for(var e=this;e.type.isAnonymous&&e._parent;)e=e._parent;return e},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent?this._parent.nextSignificantParent():null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevSibling",{get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tree",{get:function(){return this._tree},enumerable:!1,configurable:!0}),t.prototype.toTree=function(){return this._tree},t.prototype.toString=function(){return this._tree.toString()},t}(Iu);function Ou(e,t,n,i){var r=e.cursor(),o=[];if(!r.firstChild())return o;if(null!=n)for(var a=!1;!a;)if(a=r.type.is(n),!r.nextSibling())return o;for(;;){if(null!=i&&r.type.is(i))return o;if(r.type.is(t)&&o.push(r.node),!r.nextSibling())return null==i?o:[]}}function Bu(e,t,n){void 0===n&&(n=t.length-1);for(var i=e;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}var Nu=function(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i},Ru=function(e){function t(t,n,i){var r=e.call(this)||this;return r.context=t,r._parent=n,r.index=i,r.type=t.buffer.set.types[t.buffer.buffer[i]],r}return f(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.type.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]},enumerable:!1,configurable:!0}),t.prototype.child=function(e,n,i){var r=this.context.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return o<0?null:new t(this.context,this,o)},Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.child(1,0,4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.child(-1,0,4)},enumerable:!1,configurable:!0}),t.prototype.childAfter=function(e){return this.child(1,e,2)},t.prototype.childBefore=function(e){return this.child(-1,e,-2)},t.prototype.enter=function(e,n,i){if(void 0===i&&(i=0),i&Mu.ExcludeBuffers)return null;var r=this.context.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new t(this.context,this,o)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent||this.context.parent.nextSignificantParent()},enumerable:!1,configurable:!0}),t.prototype.externalSibling=function(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)},Object.defineProperty(t.prototype,"nextSibling",{get:function(){var e=this.context.buffer,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new t(this.context,this._parent,n):this.externalSibling(1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevSibling",{get:function(){var e=this.context.buffer,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new t(this.context,this._parent,e.findChild(n,this.index,-1,0,4))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tree",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.toTree=function(){var e=[],t=[],n=this.context.buffer,i=this.index+4,r=n.buffer[this.index+3];if(r>i){var o=n.buffer[this.index+1];e.push(n.slice(i,r,o)),t.push(0)}return new Tu(this.type,e,t,this.to-this.from)},t.prototype.toString=function(){return this.context.buffer.childString(this.index)},t}(Iu);function Hu(e){if(!e.length)return null;for(var t=0,n=e[0],i=1;i<e.length;i++){var r=e[i];(r.from>n.from||r.to<n.to)&&(n=r,t=i)}var o=n instanceof Fu&&n.index<0?null:n.parent,a=e.slice();return o?a[t]=o:a.splice(t,1),new Vu(a,n)}var Vu=function(){function e(e,t){this.heads=e,this.node=t}return Object.defineProperty(e.prototype,"next",{get:function(){return Hu(this.heads)},enumerable:!1,configurable:!0}),e}();var zu=function(){function e(e,t){if(void 0===t&&(t=0),this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fu)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(var n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type.name},enumerable:!1,configurable:!0}),e.prototype.yieldNode=function(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)},e.prototype.yieldBuf=function(e,t){this.index=e;var n=this.buffer,i=n.start,r=n.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0},e.prototype.yield=function(e){return!!e&&(e instanceof Fu?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))},e.prototype.toString=function(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()},e.prototype.enterChild=function(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));var i=this.buffer.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))},e.prototype.firstChild=function(){return this.enterChild(1,0,4)},e.prototype.lastChild=function(){return this.enterChild(-1,0,4)},e.prototype.childAfter=function(e){return this.enterChild(1,e,2)},e.prototype.childBefore=function(e){return this.enterChild(-1,e,-2)},e.prototype.enter=function(e,t,n){return void 0===n&&(n=this.mode),this.buffer?!(n&Mu.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))},e.prototype.parent=function(){if(!this.buffer)return this.yieldNode(this.mode&Mu.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var e=this.mode&Mu.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)},e.prototype.sibling=function(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));var t=this.buffer.buffer,n=this.stack.length-1;if(e<0){var i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{var r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))},e.prototype.nextSibling=function(){return this.sibling(1)},e.prototype.prevSibling=function(){return this.sibling(-1)},e.prototype.atLastNode=function(e){var t,n,i,r,o=this.buffer;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(var a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return!1;i=o.index,r=o.parent}else i=(t=this._tree).index,r=t._parent;for(;r;i=(n=r).index,r=n._parent)if(i>-1){a=i+e;for(var s=e<0?-1:r._tree.children.length;a!=s;a+=e){var l=r._tree.children[a];if(this.mode&Mu.IncludeAnonymous||l instanceof Au||!l.type.isAnonymous||qu(l))return!1}}return!0},e.prototype.move=function(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}},e.prototype.next=function(e){return void 0===e&&(e=!0),this.move(1,e)},e.prototype.prev=function(e){return void 0===e&&(e=!0),this.move(-1,e)},e.prototype.moveTo=function(e,t){for(void 0===t&&(t=0);(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this},Object.defineProperty(e.prototype,"node",{get:function(){if(!this.buffer)return this._tree;var e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(var i=this.index,r=this.stack.length;r>=0;){for(var o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,n=r+1;break e}i=this.stack[--r]}for(var a=n;a<this.stack.length;a++)t=new Ru(this.buffer,t,this.stack[a]);return this.bufferNode=new Ru(this.buffer,t,this.index)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tree",{get:function(){return this.buffer?null:this._tree._tree},enumerable:!1,configurable:!0}),e.prototype.iterate=function(e,t){for(var n=0;;){var i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}},e.prototype.matchContext=function(e){if(!this.buffer)return Bu(this.node.parent,e);for(var t=this.buffer.buffer,n=t.set.types,i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return Bu(this._tree,e,i);var o=n[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0},e}();function qu(e){return e.children.some((function(e){return e instanceof Au||!e.type.isAnonymous||qu(e)}))}function Uu(e){var t,n=e.buffer,i=e.nodeSet,r=e.maxBufferLength,o=void 0===r?vu:r,a=e.reused,s=void 0===a?[]:a,l=e.minRepeatType,c=void 0===l?i.types.length:l,u=Array.isArray(n)?new Du(n,n.length):n,h=i.types,d=0,p=0;function f(e,t,n,r,a,l){for(var b=u.id,w=u.start,k=u.end,C=u.size,M=p,E=d;C<0;){if(u.next(),-1==C){var S=s[b];return n.push(S),void r.push(w-e)}if(-3==C)return void(d=b);if(-4==C)return void(p=b);throw new RangeError("Unrecognized record size: ".concat(C))}var x,T,D=h[b],A=w-e;if(k-w<=o&&(T=function(e,t){var n=u.fork(),i=0,r=0,a=0,s=n.end-o,l={size:0,start:0,skip:0};e:for(var h=n.pos-e;n.pos>h;){var d=n.size;if(n.id==t&&d>=0)l.size=i,l.start=r,l.skip=a,a+=4,i+=4,n.next();else{var p=n.pos-d;if(d<0||p<h||n.start<s)break;var f=n.id>=c?4:0,m=n.start;for(n.next();n.pos>p;){if(n.size<0){if(-3!=n.size)break e;f+=4}else n.id>=c&&(f+=4);n.next()}r=m,i+=d,a+=f}}(t<0||i==e)&&(l.size=i,l.start=r,l.skip=a);return l.size>4?l:void 0}(u.pos-t,a))){for(var L=new Uint16Array(T.size-T.skip),P=u.pos-T.size,I=L.length;u.pos>P;)I=y(T.start,L,I);x=new Au(L,k-T.start,i),A=T.start-e}else{P=u.pos-C;u.next();for(var F=[],O=[],B=b>=c?b:-1,N=0,R=k;u.pos>P;)B>=0&&u.id==B&&u.size>=0?(u.end<=R-o&&(v(F,O,w,N,u.end,R,B,M,E),N=F.length,R=u.end),u.next()):l>2500?m(w,P,F,O):f(w,P,F,O,B,l+1);if(B>=0&&N>0&&N<F.length&&v(F,O,w,N,w,R,B,M,E),F.reverse(),O.reverse(),B>-1&&N>0){var H=function(e,t){return function(n,i,r){var o,a,s=0,l=n.length-1;if(l>=0&&(o=n[l])instanceof Tu){if(!l&&o.type==e&&o.length==r)return o;(a=o.prop(bu.lookAhead))&&(s=i[l]+o.length+a)}return g(e,n,i,r,s,t)}}(D,E);x=ju(D,F,O,0,F.length,0,k-w,H,H)}else x=g(D,F,O,k-w,M-k,E)}n.push(x),r.push(A)}function m(e,t,n,r){for(var a=[],s=0,l=-1;u.pos>t;){var c=u.id,h=u.start,d=u.end;if(u.size>4)u.next();else{if(l>-1&&h<l)break;l<0&&(l=d-o),a.push(c,h,d),s++,u.next()}}if(s){for(var p=new Uint16Array(4*s),f=(h=a[a.length-2],a.length-3),m=0;f>=0;f-=3)p[m++]=a[f],p[m++]=a[f+1]-h,p[m++]=a[f+2]-h,p[m++]=m;n.push(new Au(p,a[2]-h,i)),r.push(h-e)}}function v(e,t,n,r,o,a,s,l,c){for(var u=[],h=[];e.length>r;)u.push(e.pop()),h.push(t.pop()+n-o);e.push(g(i.types[s],u,h,a-o,l-a,c)),t.push(o-n)}function g(e,t,n,i,r,o,a){if(o){var s=[bu.contextHash,o];a=a?[s].concat(a):[s]}if(r>25){s=[bu.lookAhead,r];a=a?[s].concat(a):[s]}return new Tu(e,t,n,i,a)}function y(e,t,n){var i=u.id,r=u.start,o=u.end,a=u.size;if(u.next(),a>=0&&i<c){var s=n;if(a>4)for(var l=u.pos-(a-4);u.pos>l;)n=y(e,t,n);t[--n]=s,t[--n]=o-e,t[--n]=r-e,t[--n]=i}else-3==a?d=i:-4==a&&(p=i);return n}for(var b=[],w=[];u.pos>0;)f(e.start||0,e.bufferStart||0,b,w,-1,0);var k=null!==(t=e.length)&&void 0!==t?t:b.length?w[0]+b[0].length:0;return new Tu(h[e.topID],b.reverse(),w.reverse(),k)}var _u=new WeakMap;function Wu(e,t){if(!e.isAnonymous||t instanceof Au||t.type!=e)return 1;var n=_u.get(t);if(null==n){n=1;for(var i=0,r=t.children;i<r.length;i++){var o=r[i];if(o.type!=e||!(o instanceof Tu)){n=1;break}n+=Wu(e,o)}_u.set(t,n)}return n}function ju(e,t,n,i,r,o,a,s,l){for(var c=0,u=i;u<r;u++)c+=Wu(e,t[u]);var h=Math.ceil(1.5*c/8),d=[],p=[];return function t(n,i,r,a,s){for(var c=r;c<a;){var u=c,f=i[c],m=Wu(e,n[c]);for(c++;c<a;c++){var v=Wu(e,n[c]);if(m+v>=h)break;m+=v}if(c==u+1){if(m>h){var g=n[u];t(g.children,g.positions,0,g.children.length,i[u]+s);continue}d.push(n[u])}else{var y=i[c-1]+n[c-1].length-f;d.push(ju(e,n,i,u,c,f,y,null,l))}p.push(f+s-o)}}(t,n,i,r,0),(s||l)(d,p,a)}var Gu=function(){function e(){this.map=new WeakMap}return e.prototype.setBuffer=function(e,t,n){var i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,n)},e.prototype.getBuffer=function(e,t){var n=this.map.get(e);return n&&n.get(t)},e.prototype.set=function(e,t){e instanceof Ru?this.setBuffer(e.context.buffer,e.index,t):e instanceof Fu&&this.map.set(e.tree,t)},e.prototype.get=function(e){return e instanceof Ru?this.getBuffer(e.context.buffer,e.index):e instanceof Fu?this.map.get(e.tree):void 0},e.prototype.cursorSet=function(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)},e.prototype.cursorGet=function(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)},e}(),Ku=function(){function e(e,t,n,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1),this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}return Object.defineProperty(e.prototype,"openStart",{get:function(){return(1&this.open)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openEnd",{get:function(){return(2&this.open)>0},enumerable:!1,configurable:!0}),e.addTree=function(t,n,i){void 0===n&&(n=[]),void 0===i&&(i=!1);for(var r=[new e(0,t.length,t,0,!1,i)],o=0,a=n;o<a.length;o++){var s=a[o];s.to>t.length&&r.push(s)}return r},e.applyChanges=function(t,n,i){if(void 0===i&&(i=128),!n.length)return t;for(var r=[],o=1,a=t.length?t[0]:null,s=0,l=0,c=0;;s++){var u=s<n.length?n[s]:null,h=u?u.fromA:1e9;if(h-l>=i)for(;a&&a.from<h;){var d=a;if(l>=d.from||h<=d.to||c){var p=Math.max(d.from,l)-c,f=Math.min(d.to,h)-c;d=p>=f?null:new e(p,f,d.tree,d.offset+c,s>0,!!u)}if(d&&r.push(d),a.to>h)break;a=o<t.length?t[o++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r},e}(),Yu=function(){function e(){}return e.prototype.startParse=function(e,t,n){return"string"==typeof e&&(e=new Zu(e)),n=n?n.length?n.map((function(e){return new yu(e.from,e.to)})):[new yu(0,0)]:[new yu(0,e.length)],this.createParse(e,t||[],n)},e.prototype.parse=function(e,t,n){for(var i=this.startParse(e,t,n);;){var r=i.advance();if(r)return r}},e}(),Zu=function(){function e(e){this.string=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.string.length},enumerable:!1,configurable:!0}),e.prototype.chunk=function(e){return this.string.slice(e)},Object.defineProperty(e.prototype,"lineChunks",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.read=function(e,t){return this.string.slice(e,t)},e}();function Xu(e){return function(t,n,i,r){return new th(t,e,n,i,r)}}var $u=function(e,t,n,i,r){this.parser=e,this.parse=t,this.overlay=n,this.target=i,this.from=r};function Qu(e){if(!e.length||e.some((function(e){return e.from>=e.to})))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}var Ju=function(e,t,n,i,r,o,a){this.parser=e,this.predicate=t,this.mounts=n,this.index=i,this.start=r,this.target=o,this.prev=a,this.depth=0,this.ranges=[]},eh=new bu({perNode:!0}),th=function(){function e(e,t,n,i,r){this.nest=t,this.input=n,this.fragments=i,this.ranges=r,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}return e.prototype.advance=function(){if(this.baseParse){var e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(var t=0,n=this.inner;t<n.length;t++){n[t].parse.stopAt(this.stoppedAt)}}if(this.innerDone==this.inner.length){var i=this.baseTree;return null!=this.stoppedAt&&(i=new Tu(i.type,i.children,i.positions,i.length,i.propValues.concat([[eh,this.stoppedAt]]))),i}var r=this.inner[this.innerDone],o=r.parse.advance();if(o){this.innerDone++;var a=Object.assign(Object.create(null),r.target.props);a[bu.mounted.id]=new wu(o,r.overlay,r.parser),r.target.props=a}return null},Object.defineProperty(e.prototype,"parsedPos",{get:function(){if(this.baseParse)return 0;for(var e=this.input.length,t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e},enumerable:!1,configurable:!0}),e.prototype.stopAt=function(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(var t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)},e.prototype.startInner=function(){var e=new ah(this.fragments),t=null,n=null,i=new zu(new Fu(this.baseTree,this.ranges[0].from,0,null),Mu.IncludeAnonymous|Mu.IgnoreMounts);e:for(var r=void 0,o=void 0;;){var a=!0,s=void 0;if(null!=this.stoppedAt&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(t){var l=t.mounts.find((function(e){return e.frag.from<=i.from&&e.frag.to>=i.to&&e.mount.overlay}));if(l)for(var c=function(e){var n=e.from+l.pos,r=e.to+l.pos;n>=i.from&&r<=i.to&&!t.ranges.some((function(e){return e.from<r&&e.to>n}))&&t.ranges.push({from:n,to:r})},u=0,h=l.mount.overlay;u<h.length;u++){c(h[u])}}a=!1}else if(n&&(o=nh(n.ranges,i.from,i.to)))a=2!=o;else if(!i.type.isAnonymous&&(r=this.nest(i,this.input))&&(i.from<i.to||!r.overlay)){i.tree||rh(i);var d=e.findMounts(i.from,r.parser);if("function"==typeof r.overlay)t=new Ju(r.parser,r.overlay,d,this.inner.length,i.from,i.tree,t);else(f=sh(this.ranges,r.overlay||(i.from<i.to?[new yu(i.from,i.to)]:[]))).length&&Qu(f),!f.length&&r.overlay||this.inner.push(new $u(r.parser,f.length?r.parser.startParse(this.input,lh(d,f),f):r.parser.startParse(""),r.overlay?r.overlay.map((function(e){return new yu(e.from-i.from,e.to-i.from)})):null,i.tree,f.length?f[0].from:i.from)),r.overlay?f.length&&(n={ranges:f,depth:0,prev:n}):a=!1}else if(t&&(s=t.predicate(i))&&(!0===s&&(s=new yu(i.from,i.to)),s.from<s.to)){var p=t.ranges.length-1;p>=0&&t.ranges[p].to==s.from?t.ranges[p]={from:t.ranges[p].from,to:s.to}:t.ranges.push(s)}if(a&&i.firstChild())t&&t.depth++,n&&n.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;var f;t&&! --t.depth&&((f=sh(this.ranges,t.ranges)).length&&(Qu(f),this.inner.splice(t.index,0,new $u(t.parser,t.parser.startParse(this.input,lh(t.mounts,f),f),t.ranges.map((function(e){return new yu(e.from-t.start,e.to-t.start)})),t.target,f[0].from))),t=t.prev),n&&! --n.depth&&(n=n.prev)}}},e}();function nh(e,t,n){for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.from>=n)break;if(o.to>t)return o.from<=t&&o.to>=n?2:1}return 0}function ih(e,t,n,i,r,o){if(t<n){var a=e.buffer[t+1];i.push(e.slice(t,n,a)),r.push(a-o)}}function rh(e){var t=e.node,n=[],i=t.context.buffer;do{n.push(e.index),e.parent()}while(!e.tree);var r=e.tree,o=r.children.indexOf(i),a=r.children[o],s=a.buffer,l=[o];r.children[o]=function e(i,r,o,c,u,h){var d=n[h],p=[],f=[];ih(a,i,d,p,f,c);var m=s[d+1],v=s[d+2];l.push(p.length);var g=h?e(d+4,s[d+3],a.set.types[s[d]],m,v-m,h-1):t.toTree();return p.push(g),f.push(m-c),ih(a,s[d+3],r,p,f,c),new Tu(o,p,f,u)}(0,s.length,Cu.none,0,a.length,n.length-1);for(var c=0,u=l;c<u.length;c++){var h=u[c],d=e.tree.children[h],p=e.tree.positions[h];e.yield(new Fu(d,p+e.from,h,e._tree))}}var oh=function(){function e(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Mu.IncludeAnonymous|Mu.IgnoreMounts)}return e.prototype.moveTo=function(e){for(var t=this.cursor,n=e-this.offset;!this.done&&t.from<n;)t.to>=e&&t.enter(n,1,Mu.IgnoreOverlays|Mu.ExcludeBuffers)||t.next(!1)||(this.done=!0)},e.prototype.hasNode=function(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(var t=this.cursor.tree;;){if(t==e.tree)return!0;if(!(t.children.length&&0==t.positions[0]&&t.children[0]instanceof Tu))break;t=t.children[0]}return!1},e}(),ah=function(){function e(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){var n=this.curFrag=e[0];this.curTo=null!==(t=n.tree.prop(eh))&&void 0!==t?t:n.to,this.inner=new oh(n.tree,-n.offset)}else this.curFrag=this.inner=null}return e.prototype.hasNode=function(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)},e.prototype.nextFrag=function(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{var t=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(e=t.tree.prop(eh))&&void 0!==e?e:t.to,this.inner=new oh(t.tree,-t.offset)}},e.prototype.findMounts=function(e,t){var n,i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(var r=this.inner.cursor.node;r;r=r.parent){var o=null===(n=r.tree)||void 0===n?void 0:n.prop(bu.mounted);if(o&&o.parser==t)for(var a=this.fragI;a<this.fragments.length;a++){var s=this.fragments[a];if(s.from>=r.to)break;s.tree==this.curFrag.tree&&i.push({frag:s,pos:r.from-s.offset,mount:o})}}}return i},e}();function sh(e,t){for(var n=null,i=t,r=1,o=0;r<e.length;r++)for(var a=e[r-1].to,s=e[r].from;o<i.length;o++){var l=i[o];if(l.from>=s)break;l.to<=a||(n||(i=n=t.slice()),l.from<a?(n[o]=new yu(l.from,a),l.to>s&&n.splice(o+1,0,new yu(s,l.to))):l.to>s?n[o--]=new yu(s,l.to):n.splice(o--,1))}return i}function lh(e,t){for(var n=[],i=function(e,i,r){var o=e+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,s=Math.max(r.from,o),l=Math.min(r.to,a);if(i.overlay)for(var c=i.overlay.map((function(t){return new yu(t.from+e,t.to+e)})),u=function(e,t,n,i){for(var r=0,o=0,a=!1,s=!1,l=-1e9,c=[];;){var u=r==e.length?1e9:a?e[r].to:e[r].from,h=o==t.length?1e9:s?t[o].to:t[o].from;if(a!=s){var d=Math.max(l,n),p=Math.min(u,h,i);d<p&&c.push(new yu(d,p))}if(1e9==(l=Math.min(u,h)))break;u==l&&(a?(a=!1,r++):a=!0),h==l&&(s?(s=!1,o++):s=!0)}return c}(t,c,s,l),h=0,d=s;;h++){var p=h==u.length,f=p?l:u[h].from;if(f>d&&n.push(new Ku(d,f,i.tree,-o,r.from>=d||r.openStart,r.to<=f||r.openEnd)),p)break;d=u[h].to}else n.push(new Ku(s,l,i.tree,-o,r.from>=o||r.openStart,r.to<=a||r.openEnd))},r=0,o=e;r<o.length;r++){var a=o[r];i(a.pos,a.mount,a.frag)}return n}var ch=0,uh=function(){function e(e,t,n,i){this.name=e,this.set=t,this.base=n,this.modified=i,this.id=ch++}return e.prototype.toString=function(){for(var e=this.name,t=0,n=this.modified;t<n.length;t++){var i=n[t];i.name&&(e="".concat(i.name,"(").concat(e,")"))}return e},e.define=function(t,n){var i="string"==typeof t?t:"?";if(t instanceof e&&(n=t),null==n?void 0:n.base)throw new Error("Can not derive from a modified tag");var r=new e(i,[],null,[]);if(r.set.push(r),n)for(var o=0,a=n.set;o<a.length;o++){var s=a[o];r.set.push(s)}return r},e.defineModifier=function(e){var t=new dh(e);return function(e){return e.modified.indexOf(t)>-1?e:dh.get(e.base||e,e.modified.concat(t).sort((function(e,t){return e.id-t.id})))}},e}(),hh=0,dh=function(){function e(e){this.name=e,this.instances=[],this.id=hh++}return e.get=function(t,n){if(!n.length)return t;var i=n[0].instances.find((function(e){return e.base==t&&(i=n,r=e.modified,i.length==r.length&&i.every((function(e,t){return e==r[t]})));var i,r}));if(i)return i;for(var r=[],o=new uh(t.name,r,t,n),a=0,s=n;a<s.length;a++){s[a].instances.push(o)}for(var l=function(e){for(var t=[[]],n=0;n<e.length;n++)for(var i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort((function(e,t){return t.length-e.length}))}(n),c=0,u=t.set;c<u.length;c++){var h=u[c];if(!h.modified.length)for(var d=0,p=l;d<p.length;d++){var f=p[d];r.push(e.get(h,f))}}return o},e}();function ph(e){var t=Object.create(null);for(var n in e){var i=e[n];Array.isArray(i)||(i=[i]);for(var r=0,o=n.split(" ");r<o.length;r++){var a=o[r];if(a){for(var s=[],l=2,c=a,u=0;;){if("..."==c&&u>0&&u+3==a.length){l=1;break}var h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!h)throw new RangeError("Invalid path: "+a);if(s.push("*"==h[0]?"":'"'==h[0][0]?JSON.parse(h[0]):h[0]),(u+=h[0].length)==a.length)break;var d=a[u++];if(u==a.length&&"!"==d){l=0;break}if("/"!=d)throw new RangeError("Invalid path: "+a);c=a.slice(u)}var p=s.length-1,f=s[p];if(!f)throw new RangeError("Invalid path: "+a);var m=new mh(i,l,p>0?s.slice(0,p):null);t[f]=m.sort(t[f])}}}return fh.add(t)}var fh=new bu,mh=function(){function e(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}return Object.defineProperty(e.prototype,"opaque",{get:function(){return 0==this.mode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inherit",{get:function(){return 1==this.mode},enumerable:!1,configurable:!0}),e.prototype.sort=function(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)},Object.defineProperty(e.prototype,"depth",{get:function(){return this.context?this.context.length:0},enumerable:!1,configurable:!0}),e}();function vh(e,t){for(var n=Object.create(null),i=0,r=e;i<r.length;i++){var o=r[i];if(Array.isArray(o.tag))for(var a=0,s=o.tag;a<s.length;a++){var l=s[a];n[l.id]=o.class}else n[o.tag.id]=o.class}var c=t||{},u=c.scope,h=c.all,d=void 0===h?null:h;return{style:function(e){for(var t=d,i=0,r=e;i<r.length;i++)for(var o=0,a=r[i].set;o<a.length;o++){var s=a[o],l=n[s.id];if(l){t=t?t+" "+l:l;break}}return t},scope:u}}function gh(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length);var o=new bh(i,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),i,r,"",o.highlighters),o.flush(r)}function yh(e,t,n,i,r,o,a){void 0===o&&(o=0),void 0===a&&(a=e.length);var s=o;function l(t,n){if(!(t<=s)){for(var o=e.slice(s,t),a=0;;){var l=o.indexOf("\n",a),c=l<0?o.length:l;if(c>a&&i(o.slice(a,c),n),l<0)break;r(),a=l+1}s=t}}gh(t,n,(function(e,t,n){l(e,""),l(t,n)}),o,a),l(a,"")}mh.empty=new mh([],2,null);var bh=function(){function e(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}return e.prototype.startSpan=function(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)},e.prototype.flush=function(e){e>this.at&&this.class&&this.span(this.at,e,this.class)},e.prototype.highlightRange=function(e,t,n,i,r){var o=e.type,a=e.from,s=e.to;if(!(a>=n||s<=t)){o.isTop&&(r=this.highlighters.filter((function(e){return!e.scope||e.scope(o)})));var l=i,c=wh(e)||mh.empty,u=function(e,t){for(var n=null,i=0,r=e;i<r.length;i++){var o=r[i].style(t);o&&(n=n?n+" "+o:o)}return n}(r,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(i+=(i?" ":"")+u)),this.startSpan(Math.max(t,a),l),!c.opaque){var h=e.tree&&e.tree.prop(bu.mounted);if(h&&h.overlay){for(var d=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter((function(e){return!e.scope||e.scope(h.tree.type)})),f=e.firstChild(),m=0,v=a;;m++){var g=m<h.overlay.length?h.overlay[m]:null,y=g?g.from+a:s,b=Math.max(t,v),w=Math.min(n,y);if(b<w&&f)for(;e.from<w&&(this.highlightRange(e,b,w,i,r),this.startSpan(Math.min(w,e.to),l),!(e.to>=y)&&e.nextSibling()););if(!g||y>n)break;(v=g.to+a)>t&&(this.highlightRange(d.cursor(),Math.max(t,g.from+a),Math.min(n,v),"",p),this.startSpan(Math.min(n,v),l))}f&&e.parent()}else if(e.firstChild()){h&&(i="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,r),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}},e}();function wh(e){for(var t=e.type.prop(fh);t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}var kh=uh.define,Ch=kh(),Mh=kh(),Eh=kh(Mh),Sh=kh(Mh),xh=kh(),Th=kh(xh),Dh=kh(xh),Ah=kh(),Lh=kh(Ah),Ph=kh(),Ih=kh(),Fh=kh(),Oh=kh(Fh),Bh=kh(),Nh={comment:Ch,lineComment:kh(Ch),blockComment:kh(Ch),docComment:kh(Ch),name:Mh,variableName:kh(Mh),typeName:Eh,tagName:kh(Eh),propertyName:Sh,attributeName:kh(Sh),className:kh(Mh),labelName:kh(Mh),namespace:kh(Mh),macroName:kh(Mh),literal:xh,string:Th,docString:kh(Th),character:kh(Th),attributeValue:kh(Th),number:Dh,integer:kh(Dh),float:kh(Dh),bool:kh(xh),regexp:kh(xh),escape:kh(xh),color:kh(xh),url:kh(xh),keyword:Ph,self:kh(Ph),null:kh(Ph),atom:kh(Ph),unit:kh(Ph),modifier:kh(Ph),operatorKeyword:kh(Ph),controlKeyword:kh(Ph),definitionKeyword:kh(Ph),moduleKeyword:kh(Ph),operator:Ih,derefOperator:kh(Ih),arithmeticOperator:kh(Ih),logicOperator:kh(Ih),bitwiseOperator:kh(Ih),compareOperator:kh(Ih),updateOperator:kh(Ih),definitionOperator:kh(Ih),typeOperator:kh(Ih),controlOperator:kh(Ih),punctuation:Fh,separator:kh(Fh),bracket:Oh,angleBracket:kh(Oh),squareBracket:kh(Oh),paren:kh(Oh),brace:kh(Oh),content:Ah,heading:Lh,heading1:kh(Lh),heading2:kh(Lh),heading3:kh(Lh),heading4:kh(Lh),heading5:kh(Lh),heading6:kh(Lh),contentSeparator:kh(Ah),list:kh(Ah),quote:kh(Ah),emphasis:kh(Ah),strong:kh(Ah),link:kh(Ah),monospace:kh(Ah),strikethrough:kh(Ah),inserted:kh(),deleted:kh(),changed:kh(),invalid:kh(),meta:Bh,documentMeta:kh(Bh),annotation:kh(Bh),processingInstruction:kh(Bh),definition:uh.defineModifier("definition"),constant:uh.defineModifier("constant"),function:uh.defineModifier("function"),standard:uh.defineModifier("standard"),local:uh.defineModifier("local"),special:uh.defineModifier("special")};for(var Rh in Nh){var Hh=Nh[Rh];Hh instanceof uh&&(Hh.name=Rh)}var Vh,zh=vh([{tag:Nh.link,class:"tok-link"},{tag:Nh.heading,class:"tok-heading"},{tag:Nh.emphasis,class:"tok-emphasis"},{tag:Nh.strong,class:"tok-strong"},{tag:Nh.keyword,class:"tok-keyword"},{tag:Nh.atom,class:"tok-atom"},{tag:Nh.bool,class:"tok-bool"},{tag:Nh.url,class:"tok-url"},{tag:Nh.labelName,class:"tok-labelName"},{tag:Nh.inserted,class:"tok-inserted"},{tag:Nh.deleted,class:"tok-deleted"},{tag:Nh.literal,class:"tok-literal"},{tag:Nh.string,class:"tok-string"},{tag:Nh.number,class:"tok-number"},{tag:[Nh.regexp,Nh.escape,Nh.special(Nh.string)],class:"tok-string2"},{tag:Nh.variableName,class:"tok-variableName"},{tag:Nh.local(Nh.variableName),class:"tok-variableName tok-local"},{tag:Nh.definition(Nh.variableName),class:"tok-variableName tok-definition"},{tag:Nh.special(Nh.variableName),class:"tok-variableName2"},{tag:Nh.definition(Nh.propertyName),class:"tok-propertyName tok-definition"},{tag:Nh.typeName,class:"tok-typeName"},{tag:Nh.namespace,class:"tok-namespace"},{tag:Nh.className,class:"tok-className"},{tag:Nh.macroName,class:"tok-macroName"},{tag:Nh.propertyName,class:"tok-propertyName"},{tag:Nh.operator,class:"tok-operator"},{tag:Nh.comment,class:"tok-comment"},{tag:Nh.meta,class:"tok-meta"},{tag:Nh.invalid,class:"tok-invalid"},{tag:Nh.punctuation,class:"tok-punctuation"}]),qh=new bu;function Uh(e){return Te.define({combine:e?function(t){return t.concat(e)}:void 0})}var _h=new bu,Wh=function(){function e(e,t,n,i){void 0===n&&(n=[]),void 0===i&&(i=""),this.data=e,this.name=i,ft.prototype.hasOwnProperty("tree")||Object.defineProperty(ft.prototype,"tree",{get:function(){return Kh(this)}}),this.parser=t,this.extension=[ad.of(this),ft.languageData.of((function(e,t,n){var i=jh(e,t,n),r=i.type.prop(qh);if(!r)return[];var o=e.facet(r),a=i.type.prop(_h);if(a)for(var s=i.resolve(t-i.from,n),l=0,c=a;l<c.length;l++){var u=c[l];if(u.test(s,e)){var h=e.facet(u.facet);return"replace"==u.type?h:h.concat(o)}}return o}))].concat(n)}return e.prototype.isActiveAt=function(e,t,n){return void 0===n&&(n=-1),jh(e,t,n).type.prop(qh)==this.data},e.prototype.findRegions=function(e){var t=this,n=e.facet(ad);if((null==n?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];var i=[],r=function(e,n){if(e.prop(qh)!=t.data){var o=e.prop(bu.mounted);if(o){if(o.tree.prop(qh)==t.data){if(o.overlay)for(var a=0,s=o.overlay;a<s.length;a++){var l=s[a];i.push({from:l.from+n,to:l.to+n})}else i.push({from:n,to:n+e.length});return}if(o.overlay){var c=i.length;if(r(o.tree,o.overlay[0].from+n),i.length>c)return}}for(var u=0;u<e.children.length;u++){var h=e.children[u];h instanceof Tu&&r(h,e.positions[u]+n)}}else i.push({from:n,to:n+e.length})};return r(Kh(e),0),i},Object.defineProperty(e.prototype,"allowsNesting",{get:function(){return!0},enumerable:!1,configurable:!0}),e}();function jh(e,t,n){var i=e.facet(ad),r=Kh(e).topNode;if(!i||i.allowsNesting)for(var o=r;o;o=o.enter(t,n,Mu.ExcludeBuffers))o.type.isTop&&(r=o);return r}Wh.setState=nt.define();var Gh=function(e){function t(t,n,i){var r=e.call(this,t,n,[],i)||this;return r.parser=n,r}return f(t,e),t.define=function(e){var n=Uh(e.languageData);return new t(n,e.parser.configure({props:[qh.add((function(e){return e.isTop?n:void 0}))]}),e.name)},t.prototype.configure=function(e,n){return new t(this.data,this.parser.configure(e),n||this.name)},Object.defineProperty(t.prototype,"allowsNesting",{get:function(){return this.parser.hasWrappers()},enumerable:!1,configurable:!0}),t}(Wh);function Kh(e){var t=e.field(Wh.state,!1);return t?t.tree:Tu.empty}function Yh(e,t,n){var i;void 0===n&&(n=50);var r=null===(i=e.field(Wh.state,!1))||void 0===i?void 0:i.context;if(!r)return null;var o=r.viewport;r.updateViewport({from:0,to:t});var a=r.isDone(t)||r.work(n,t)?r.tree:null;return r.updateViewport(o),a}function Zh(e,t){var n;return void 0===t&&(t=e.doc.length),(null===(n=e.field(Wh.state,!1))||void 0===n?void 0:n.context.isDone(t))||!1}function Xh(e,t,n){void 0===t&&(t=e.viewport.to),void 0===n&&(n=100);var i=Yh(e.state,t,n);return i!=Kh(e.state)&&e.dispatch({}),!!i}function $h(e){var t;return(null===(t=e.plugin(od))||void 0===t?void 0:t.isWorking())||!1}var Qh=function(){function e(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}return Object.defineProperty(e.prototype,"length",{get:function(){return this.doc.length},enumerable:!1,configurable:!0}),e.prototype.syncTo=function(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length},e.prototype.chunk=function(e){return this.syncTo(e),this.string},Object.defineProperty(e.prototype,"lineChunks",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.read=function(e,t){var n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)},e}(),Jh=null,ed=function(){function e(e,t,n,i,r,o,a,s){void 0===n&&(n=[]),this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=a,this.scheduleOn=s,this.parse=null,this.tempSkipped=[]}return e.create=function(t,n,i){return new e(t,n,[],Tu.empty,0,i,[],null)},e.prototype.startParse=function(){return this.parser.startParse(new Qh(this.state.doc),this.fragments)},e.prototype.work=function(e,t){var n=this;return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Tu.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((function(){var i;if("number"==typeof e){var r=Date.now()+e;e=function(){return Date.now()>r}}for(n.parse||(n.parse=n.startParse()),null!=t&&(null==n.parse.stoppedAt||n.parse.stoppedAt>t)&&t<n.state.doc.length&&n.parse.stopAt(t);;){var o=n.parse.advance();if(o){if(n.fragments=n.withoutTempSkipped(Ku.addTree(o,n.fragments,null!=n.parse.stoppedAt)),n.treeLen=null!==(i=n.parse.stoppedAt)&&void 0!==i?i:n.state.doc.length,n.tree=o,n.parse=null,!(n.treeLen<(null!=t?t:n.state.doc.length)))return!0;n.parse=n.startParse()}if(e())return!1}}))},e.prototype.takeTree=function(){var e,t,n=this;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((function(){for(;!(t=n.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ku.addTree(this.tree,this.fragments,!0)),this.parse=null)},e.prototype.withContext=function(e){var t=Jh;Jh=this;try{return e()}finally{Jh=t}},e.prototype.withoutTempSkipped=function(e){for(var t=void 0;t=this.tempSkipped.pop();)e=td(e,t.from,t.to);return e},e.prototype.changes=function(t,n){var i=this,r=i.fragments,o=i.tree,a=i.treeLen,s=i.viewport,l=i.skipped;if(this.takeTree(),!t.empty){var c=[];if(t.iterChangedRanges((function(e,t,n,i){return c.push({fromA:e,toA:t,fromB:n,toB:i})})),r=Ku.applyChanges(r,c),o=Tu.empty,a=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){l=[];for(var u=0,h=this.skipped;u<h.length;u++){var d=h[u],p=t.mapPos(d.from,1),f=t.mapPos(d.to,-1);p<f&&l.push({from:p,to:f})}}}return new e(this.parser,n,r,o,a,s,l,this.scheduleOn)},e.prototype.updateViewport=function(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;for(var t=this.skipped.length,n=0;n<this.skipped.length;n++){var i=this.skipped[n],r=i.from,o=i.to;r<e.to&&o>e.from&&(this.fragments=td(this.fragments,r,o),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)},e.prototype.reset=function(){this.parse&&(this.takeTree(),this.parse=null)},e.prototype.skipUntilInView=function(e,t){this.skipped.push({from:e,to:t})},e.getSkippingParser=function(e){return new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return f(n,t),n.prototype.createParse=function(t,n,i){var r=i[0].from,o=i[i.length-1].to,a={parsedPos:r,advance:function(){var t=Jh;if(t){for(var n=0,a=i;n<a.length;n++){var s=a[n];t.tempSkipped.push(s)}e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new Tu(Cu.none,[],[],o-r)},stoppedAt:null,stopAt:function(){}};return a},n}(Yu))},e.prototype.isDone=function(e){e=Math.min(e,this.state.doc.length);var t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e},e.get=function(){return Jh},e}();function td(e,t,n){return Ku.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}var nd=function(){function e(e){this.context=e,this.tree=e.tree}return e.prototype.apply=function(t){if(!t.docChanged&&this.tree==this.context.tree)return this;var n=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new e(n)},e.init=function(t){var n=Math.min(3e3,t.doc.length),i=ed.create(t.facet(ad).parser,t,{from:0,to:n});return i.work(20,n)||i.takeTree(),new e(i)},e}();Wh.state=Fe.define({create:nd.init,update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];if(r.is(Wh.setState))return r.value}return t.startState.facet(ad)!=t.state.facet(ad)?nd.init(t.state):e.apply(t)}});var id=function(e){var t=setTimeout((function(){return e()}),500);return function(){return clearTimeout(t)}};"undefined"!=typeof requestIdleCallback&&(id=function(e){var t=-1,n=setTimeout((function(){t=requestIdleCallback(e,{timeout:400})}),100);return function(){return t<0?clearTimeout(n):cancelIdleCallback(t)}});var rd="undefined"!=typeof navigator&&(null===(Vh=navigator.scheduling)||void 0===Vh?void 0:Vh.isInputPending)?function(){return navigator.scheduling.isInputPending()}:null,od=Xi.fromClass(function(){function e(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}return e.prototype.update=function(e){var t=this.view.state.field(Wh.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)},e.prototype.scheduleWork=function(){if(!this.working){var e=this.view.state,t=e.field(Wh.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=id(this.work))}},e.prototype.work=function(e){this.working=null;var t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),!(this.chunkBudget<=0)){var n=this.view,i=n.state,r=n.viewport.to,o=i.field(Wh.state);if(o.tree!=o.context.tree||!o.context.isDone(r+1e5)){var a=Date.now()+Math.min(this.chunkBudget,100,e&&!rd?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<r&&i.doc.length>r+1e3,l=o.context.work((function(){return rd&&rd()||Date.now()>a}),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Wh.setState.of(new nd(o.context))})),this.chunkBudget>0&&(!l||s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}}},e.prototype.checkAsyncSchedule=function(e){var t=this;e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((function(){return t.scheduleWork()})).catch((function(e){return Gi(t.view.state,e)})).then((function(){return t.workScheduled--})),e.scheduleOn=null)},e.prototype.destroy=function(){this.working&&this.working()},e.prototype.isWorking=function(){return!!(this.working||this.workScheduled>0)},e}(),{eventHandlers:{focus:function(){this.scheduleWork()}}}),ad=Te.define({combine:function(e){return e.length?e[0]:null},enables:function(e){return[Wh.state,od,Xo.contentAttributes.compute([e],(function(t){var n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]}}),sd=function(e,t){void 0===t&&(t=[]),this.language=e,this.support=t,this.extension=[e,t]},ld=function(){function e(e,t,n,i,r,o){void 0===o&&(o=void 0),this.name=e,this.alias=t,this.extensions=n,this.filename=i,this.loadFunc=r,this.support=o,this.loading=null}return e.prototype.load=function(){var e=this;return this.loading||(this.loading=this.loadFunc().then((function(t){return e.support=t}),(function(t){throw e.loading=null,t})))},e.of=function(t){var n=t.load,i=t.support;if(!n){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=function(){return Promise.resolve(i)}}return new e(t.name,(t.alias||[]).concat(t.name).map((function(e){return e.toLowerCase()})),t.extensions||[],t.filename,n,i)},e.matchFilename=function(e,t){for(var n=0,i=e;n<i.length;n++){if((s=i[n]).filename&&s.filename.test(t))return s}var r=/\.([^.]+)$/.exec(t);if(r)for(var o=0,a=e;o<a.length;o++){var s;if((s=a[o]).extensions.indexOf(r[1])>-1)return s}return null},e.matchLanguageName=function(e,t,n){void 0===n&&(n=!0),t=t.toLowerCase();for(var i=0,r=e;i<r.length;i++){if((s=r[i]).alias.some((function(e){return e==t})))return s}if(n)for(var o=0,a=e;o<a.length;o++)for(var s,l=0,c=(s=a[o]).alias;l<c.length;l++){var u=c[l],h=t.indexOf(u);if(h>-1&&(u.length>2||!/\w/.test(t[h-1])&&!/\w/.test(t[h+u.length])))return s}return null},e}(),cd=Te.define(),ud=Te.define({combine:function(e){if(!e.length)return"  ";var t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((function(e){return e!=t[0]})))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function hd(e){var t=e.facet(ud);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function dd(e,t){var n="",i=e.tabSize,r=e.facet(ud)[0];if("\t"==r){for(;t>=i;)n+="\t",t-=i;r=" "}for(var o=0;o<t;o++)n+=r;return n}function pd(e,t){e instanceof ft&&(e=new md(e));for(var n=0,i=e.state.facet(cd);n<i.length;n++){var r=(0,i[n])(e,t);if(void 0!==r)return r}var o=Kh(e.state);return o.length>=t?function(e,t,n){var i=t.resolveStack(n),r=t.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){for(var o=[],a=r;a&&(a.from!=i.node.from||a.type!=i.node.type);a=a.parent)o.push(a);for(var s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return gd(i,e,n)}(e,o,t):null}function fd(e,t,n){for(var i=Object.create(null),r=new md(e,{overrideIndentation:function(e){var t;return null!==(t=i[e])&&void 0!==t?t:-1}}),o=[],a=t;a<=n;){var s=e.doc.lineAt(a);a=s.to+1;var l=pd(r,s.from);if(null!=l){/\S/.test(s.text)||(l=0);var c=/^\s*/.exec(s.text)[0],u=dd(e,l);c!=u&&(i[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))}}return e.changes(o)}var md=function(){function e(e,t){void 0===t&&(t={}),this.state=e,this.options=t,this.unit=hd(e)}return e.prototype.lineAt=function(e,t){void 0===t&&(t=1);var n=this.state.doc.lineAt(e),i=this.options,r=i.simulateBreak,o=i.simulateDoubleBreak;return null!=r&&r>=n.from&&r<=n.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n},e.prototype.textAfterPos=function(e,t){if(void 0===t&&(t=1),this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";var n=this.lineAt(e,t),i=n.text,r=n.from;return i.slice(e-r,Math.min(i.length,e+100-r))},e.prototype.column=function(e,t){void 0===t&&(t=1);var n=this.lineAt(e,t),i=n.text,r=n.from,o=this.countColumn(i,e-r),a=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return a>-1&&(o+=a-this.countColumn(i,i.search(/\S|$/))),o},e.prototype.countColumn=function(e,t){return void 0===t&&(t=e.length),It(e,this.state.tabSize,t)},e.prototype.lineIndent=function(e,t){void 0===t&&(t=1);var n=this.lineAt(e,t),i=n.text,r=n.from,o=this.options.overrideIndentation;if(o){var a=o(r);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))},Object.defineProperty(e.prototype,"simulatedBreak",{get:function(){return this.options.simulateBreak||null},enumerable:!1,configurable:!0}),e}(),vd=new bu;function gd(e,t,n){for(var i=e;i;i=i.next){var r=yd(i.node);if(r)return r(wd.create(t,n,i))}return 0}function yd(e){var t=e.type.prop(vd);if(t)return t;var n,i=e.firstChild;if(i&&(n=i.type.prop(bu.closedBy))){var r=e.lastChild,o=r&&n.indexOf(r.name)>-1;return function(e){return Md(e,!0,1,void 0,o&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?r.from:void 0)}}return null==e.parent?bd:null}function bd(){return 0}var wd=function(e){function t(t,n,i){var r=e.call(this,t.state,t.options)||this;return r.base=t,r.pos=n,r.context=i,r}return f(t,e),Object.defineProperty(t.prototype,"node",{get:function(){return this.context.node},enumerable:!1,configurable:!0}),t.create=function(e,n,i){return new t(e,n,i)},Object.defineProperty(t.prototype,"textAfter",{get:function(){return this.textAfterPos(this.pos)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseIndent",{get:function(){return this.baseIndentFor(this.node)},enumerable:!1,configurable:!0}),t.prototype.baseIndentFor=function(e){for(var t=this.state.doc.lineAt(e.from);;){for(var n=e.resolve(t.from);n.parent&&n.parent.from==n.from;)n=n.parent;if(kd(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)},t.prototype.continue=function(){return gd(this.context.next,this.base,this.pos)},t}(md);function kd(e,t){for(var n=t;n;n=n.parent)if(e==n)return!0;return!1}function Cd(e){var t=e.closing,n=e.align,i=void 0===n||n,r=e.units,o=void 0===r?1:r;return function(e){return Md(e,i,o,t)}}function Md(e,t,n,i,r){var o=e.textAfter,a=o.match(/^\s*/)[0].length,s=i&&o.slice(a,a+i.length)==i||r==e.pos+a,l=t?function(e){var t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;for(var r=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),a=null==r||r<=o.from?o.to:Math.min(o.to,r),s=n.to;;){var l=t.childAfter(s);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=a)return null;var c=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+c}}s=l.to}}(e):null;return l?s?e.column(l.from):e.column(l.to):e.baseIndent+(s?0:e.unit*n)}var Ed=function(e){return e.baseIndent};function Sd(e){var t=void 0===e?{}:e,n=t.except,i=t.units,r=void 0===i?1:i;return function(e){var t=n&&n.test(e.textAfter);return e.baseIndent+(t?0:r*e.unit)}}var xd=200;function Td(){return ft.transactionFilter.of((function(e){if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;var t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;var n=e.newDoc,i=e.newSelection.main.head,r=n.lineAt(i);if(i>r.from+xd)return e;var o=n.sliceString(r.from,i);if(!t.some((function(e){return e.test(o)})))return e;for(var a=e.state,s=-1,l=[],c=0,u=a.selection.ranges;c<u.length;c++){var h=u[c].head,d=a.doc.lineAt(h);if(d.from!=s){s=d.from;var p=pd(a,d.from);if(null!=p){var f=/^\s*/.exec(d.text)[0],m=dd(a,p);f!=m&&l.push({from:d.from,to:d.from+f.length,insert:m})}}}return l.length?[e,{changes:l,sequential:!0}]:e}))}var Dd=Te.define(),Ad=new bu;function Ld(e){var t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}function Pd(e,t,n){for(var i=0,r=e.facet(Dd);i<r.length;i++){var o=(0,r[i])(e,t,n);if(o)return o}return function(e,t,n){var i=Kh(e);if(i.length<n)return null;for(var r,o,a=null,s=i.resolveStack(n,1);s;s=s.next){var l=s.node;if(!(l.to<=n||l.from>n)){if(a&&l.from<t)break;var c=l.type.prop(Ad);if(c&&(l.to<i.length-50||i.length==e.doc.length||(o=void 0,!(o=(r=l).lastChild)||o.to!=r.to||!o.type.isError))){var u=c(l,e);u&&u.from<=n&&u.from>=t&&u.to>n&&(a=u)}}}return a}(e,t,n)}function Id(e,t){var n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);return n>=i?void 0:{from:n,to:i}}var Fd=nt.define({map:Id}),Od=nt.define({map:Id});function Bd(e){for(var t=[],n=function(n){if(t.some((function(e){return e.from<=n&&e.to>=n})))return"continue";t.push(e.lineBlockAt(n))},i=0,r=e.state.selection.ranges;i<r.length;i++){n(r[i].head)}return t}var Nd=Fe.define({create:function(){return Yn.none},update:function(e,t){e=e.map(t.changes);for(var n=function(n){if(n.is(Fd)&&!function(e,t,n){var i=!1;return e.between(t,t,(function(e,r){e==t&&r==n&&(i=!0)})),i}(e,n.value.from,n.value.to)){var i=t.state.facet(Zd).preparePlaceholder,r=i?Yn.replace({widget:new Jd(i(t.state,n.value))}):Qd;e=e.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Od)&&(e=e.update({filter:function(e,t){return n.value.from!=e||n.value.to!=t},filterFrom:n.value.from,filterTo:n.value.to}))},i=0,r=t.effects;i<r.length;i++){n(r[i])}if(t.selection){var o=!1,a=t.selection.main.head;e.between(a,a,(function(e,t){e<a&&t>a&&(o=!0)})),o&&(e=e.update({filterFrom:a,filterTo:a,filter:function(e,t){return t<=a||e>=a}}))}return e},provide:function(e){return Xo.decorations.from(e)},toJSON:function(e,t){var n=[];return e.between(0,t.doc.length,(function(e,t){n.push(e,t)})),n},fromJSON:function(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");for(var t=[],n=0;n<e.length;){var i=e[n++],r=e[n++];if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid JSON for fold state");t.push(Qd.range(i,r))}return Yn.set(t,!0)}});function Rd(e){return e.field(Nd,!1)||wt.empty}function Hd(e,t,n){var i,r=null;return null===(i=e.field(Nd,!1))||void 0===i||i.between(t,n,(function(e,t){(!r||r.from>e)&&(r={from:e,to:t})})),r}function Vd(e,t){return e.field(Nd,!1)?t:t.concat(nt.appendConfig.of(Xd()))}var zd=function(e){for(var t=0,n=Bd(e);t<n.length;t++){var i=n[t],r=Pd(e.state,i.from,i.to);if(r)return e.dispatch({effects:Vd(e.state,[Fd.of(r),Ud(e,r)])}),!0}return!1},qd=function(e){if(!e.state.field(Nd,!1))return!1;for(var t=[],n=0,i=Bd(e);n<i.length;n++){var r=i[n],o=Hd(e.state,r.from,r.to);o&&t.push(Od.of(o),Ud(e,o,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function Ud(e,t,n){void 0===n&&(n=!0);var i=e.state.doc.lineAt(t.from).number,r=e.state.doc.lineAt(t.to).number;return Xo.announce.of("".concat(e.state.phrase(n?"Folded lines":"Unfolded lines")," ").concat(i," ").concat(e.state.phrase("to")," ").concat(r,"."))}var _d=function(e){for(var t=e.state,n=[],i=0;i<t.doc.length;){var r=e.lineBlockAt(i),o=Pd(t,r.from,r.to);o&&n.push(Fd.of(o)),i=(o?e.lineBlockAt(o.to):r).to+1}return n.length&&e.dispatch({effects:Vd(e.state,n)}),!!n.length},Wd=function(e){var t=e.state.field(Nd,!1);if(!t||!t.size)return!1;var n=[];return t.between(0,e.state.doc.length,(function(e,t){n.push(Od.of({from:e,to:t}))})),e.dispatch({effects:n}),!0};function jd(e,t){for(var n=t;;){var i=Pd(e.state,n.from,n.to);if(i&&i.to>t.from)return i;if(!n.from)return null;n=e.lineBlockAt(n.from-1)}}var Gd=function(e){for(var t=[],n=0,i=Bd(e);n<i.length;n++){var r=i[n],o=Hd(e.state,r.from,r.to);if(o)t.push(Od.of(o),Ud(e,o,!1));else{var a=jd(e,r);a&&t.push(Fd.of(a),Ud(e,a))}}return t.length>0&&e.dispatch({effects:Vd(e.state,t)}),!!t.length},Kd=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:zd},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:qd},{key:"Ctrl-Alt-[",run:_d},{key:"Ctrl-Alt-]",run:Wd}],Yd={placeholderDOM:null,preparePlaceholder:null,placeholderText:"â€¦"},Zd=Te.define({combine:function(e){return mt(e,Yd)}});function Xd(e){var t=[Nd,ip];return e&&t.push(Zd.of(e)),t}function $d(e,t){var n=e.state,i=n.facet(Zd),r=function(t){var n=e.lineBlockAt(e.posAtDOM(t.target)),i=Hd(e.state,n.from,n.to);i&&e.dispatch({effects:Od.of(i)}),t.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,r,t);var o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}var Qd=Yn.replace({widget:new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.toDOM=function(e){return $d(e,null)},t}(Gn))}),Jd=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return f(t,e),t.prototype.eq=function(e){return this.value==e.value},t.prototype.toDOM=function(e){return $d(e,this.value)},t}(Gn),ep={openText:"âŒ„",closedText:"â€º",markerDOM:null,domEventHandlers:{},foldingChanged:function(){return!1}},tp=function(e){function t(t,n){var i=e.call(this)||this;return i.config=t,i.open=n,i}return f(t,e),t.prototype.eq=function(e){return this.config==e.config&&this.open==e.open},t.prototype.toDOM=function(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);var t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t},t}(Fs);function np(e){void 0===e&&(e={});var t=Object.assign(Object.assign({},ep),e),n=new tp(t,!0),i=new tp(t,!1),r=Xi.fromClass(function(){function e(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}return e.prototype.update=function(e){(e.docChanged||e.viewportChanged||e.startState.facet(ad)!=e.state.facet(ad)||e.startState.field(Nd,!1)!=e.state.field(Nd,!1)||Kh(e.startState)!=Kh(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))},e.prototype.buildMarkers=function(e){for(var t=new kt,r=0,o=e.viewportLineBlocks;r<o.length;r++){var a=o[r],s=Hd(e.state,a.from,a.to)?i:Pd(e.state,a.from,a.to)?n:null;s&&t.add(a.from,a.from,s)}return t.finish()},e}()),o=t.domEventHandlers;return[r,Hs({class:"cm-foldGutter",markers:function(e){var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.markers)||wt.empty},initialSpacer:function(){return new tp(t,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:function(e,t,n){if(o.click&&o.click(e,t,n))return!0;var i=Hd(e.state,t.from,t.to);if(i)return e.dispatch({effects:Od.of(i)}),!0;var r=Pd(e.state,t.from,t.to);return!!r&&(e.dispatch({effects:Fd.of(r)}),!0)}})}),Xd()]}var ip=Xo.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),rp=function(){function e(e,t){var n;function i(e){var t=Rt.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;var r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Wh?function(e){return e.prop(qh)==o.data}:o?function(e){return e==o}:void 0,this.style=vh(e.map((function(e){return{tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}})),{all:r}).style,this.module=n?new Rt(n):null,this.themeType=t.themeType}return e.define=function(t,n){return new e(t,n||{})},e}(),op=Te.define(),ap=Te.define({combine:function(e){return e.length?[e[0]]:null}});function sp(e){var t=e.facet(op);return t.length?t:e.facet(ap)}function lp(e,t){var n,i=[hp];return e instanceof rp&&(e.module&&i.push(Xo.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?i.push(ap.of(e)):n?i.push(op.computeN([Xo.darkTheme],(function(t){return t.facet(Xo.darkTheme)==("dark"==n)?[e]:[]}))):i.push(op.of(e)),i}function cp(e,t,n){var i=sp(e),r=null;if(i)for(var o=0,a=i;o<a.length;o++){var s=a[o];if(!s.scope||n&&s.scope(n)){var l=s.style(t);l&&(r=r?r+" "+l:l)}}return r}var up=function(){function e(e){this.markCache=Object.create(null),this.tree=Kh(e.state),this.decorations=this.buildDeco(e,sp(e.state)),this.decoratedTo=e.viewport.to}return e.prototype.update=function(e){var t=Kh(e.state),n=sp(e.state),i=n!=sp(e.startState),r=e.view.viewport,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=r.to)},e.prototype.buildDeco=function(e,t){var n=this;if(!t||!this.tree.length)return Yn.none;for(var i=new kt,r=0,o=e.visibleRanges;r<o.length;r++){var a=o[r],s=a.from,l=a.to;gh(this.tree,t,(function(e,t,r){i.add(e,t,n.markCache[r]||(n.markCache[r]=Yn.mark({class:r})))}),s,l)}return i.finish()},e}(),hp=Ve.high(Xi.fromClass(up,{decorations:function(e){return e.decorations}})),dp=rp.define([{tag:Nh.meta,color:"#404740"},{tag:Nh.link,textDecoration:"underline"},{tag:Nh.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Nh.emphasis,fontStyle:"italic"},{tag:Nh.strong,fontWeight:"bold"},{tag:Nh.strikethrough,textDecoration:"line-through"},{tag:Nh.keyword,color:"#708"},{tag:[Nh.atom,Nh.bool,Nh.url,Nh.contentSeparator,Nh.labelName],color:"#219"},{tag:[Nh.literal,Nh.inserted],color:"#164"},{tag:[Nh.string,Nh.deleted],color:"#a11"},{tag:[Nh.regexp,Nh.escape,Nh.special(Nh.string)],color:"#e40"},{tag:Nh.definition(Nh.variableName),color:"#00f"},{tag:Nh.local(Nh.variableName),color:"#30a"},{tag:[Nh.typeName,Nh.namespace],color:"#085"},{tag:Nh.className,color:"#167"},{tag:[Nh.special(Nh.variableName),Nh.macroName],color:"#256"},{tag:Nh.definition(Nh.propertyName),color:"#00c"},{tag:Nh.comment,color:"#940"},{tag:Nh.invalid,color:"#f00"}]),pp=Xo.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),fp=1e4,mp="()[]{}",vp=Te.define({combine:function(e){return mt(e,{afterCursor:!0,brackets:mp,maxScanDistance:fp,renderMatch:bp})}}),gp=Yn.mark({class:"cm-matchingBracket"}),yp=Yn.mark({class:"cm-nonmatchingBracket"});function bp(e){var t=[],n=e.matched?gp:yp;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}var wp=Fe.define({create:function(){return Yn.none},update:function(e,t){if(!t.docChanged&&!t.selection)return e;for(var n=[],i=t.state.facet(vp),r=0,o=t.state.selection.ranges;r<o.length;r++){var a=o[r];if(a.empty){var s=xp(t.state,a.head,-1,i)||a.head>0&&xp(t.state,a.head-1,1,i)||i.afterCursor&&(xp(t.state,a.head,1,i)||a.head<t.state.doc.length&&xp(t.state,a.head+1,-1,i));s&&(n=n.concat(i.renderMatch(s,t.state)))}}return Yn.set(n,!0)},provide:function(e){return Xo.decorations.from(e)}}),kp=[wp,pp];function Cp(e){return void 0===e&&(e={}),[vp.of(e),kp]}var Mp=new bu;function Ep(e,t,n){var i=e.prop(t<0?bu.openedBy:bu.closedBy);if(i)return i;if(1==e.name.length){var r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function Sp(e){var t=e.type.prop(Mp);return t?t(e.node):e}function xp(e,t,n,i){void 0===i&&(i={});for(var r=i.maxScanDistance||fp,o=i.brackets||mp,a=Kh(e),s=a.resolveInner(t,n),l=s;l;l=l.parent){var c=Ep(l.type,n,o);if(c&&l.from<l.to){var u=Sp(l);if(u&&(n>0?t>=u.from&&t<u.to:t>u.from&&t<=u.to))return Tp(e,t,n,l,u,c,o)}}return function(e,t,n,i,r,o,a){var s=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=a.indexOf(s);if(l<0||l%2==0!=n>0)return null;for(var c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0,d=0;!u.next().done&&d<=o;){var p=u.value;n<0&&(d+=p.length);for(var f=t+d*n,m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){var g=a.indexOf(p[m]);if(!(g<0||i.resolveInner(f+m,1).type!=r))if(g%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:f+m,to:f+m+1},matched:g>>1==l>>1};h--}}n>0&&(d+=p.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,a,s.type,r,o)}function Tp(e,t,n,i,r,o,a){var s=i.parent,l={from:r.from,to:r.to},c=0,u=null==s?void 0:s.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do{if(n<0?u.to<=i.from:u.from>=i.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to)return{start:l,end:(h=Sp(u))?{from:h.from,to:h.to}:void 0,matched:!0};if(Ep(u.type,n,a))c++;else if(Ep(u.type,-n,a)){var h;if(0==c)return{start:l,end:(h=Sp(u))&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1};c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Dp(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=0),null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r,a=i;a<t;a++)9==e.charCodeAt(a)?o+=n-o%n:o++;return o}var Ap=function(){function e(e,t,n,i,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.lookAhead=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}return e.prototype.eol=function(){return this.pos>=this.string.length},e.prototype.sol=function(){return 0==this.pos},e.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},e.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},e.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e instanceof RegExp?e.test(t):e(t)))return++this.pos,t},e.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},e.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},e.prototype.skipToEnd=function(){this.pos=this.string.length},e.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},e.prototype.backUp=function(e){this.pos-=e},e.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Dp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},e.prototype.indentation=function(){var e;return null!==(e=this.overrideIndent)&&void 0!==e?e:Dp(this.string,null,this.tabSize)},e.prototype.match=function(e,t,n){if("string"==typeof e){var i=function(e){return n?e.toLowerCase():e};return i(this.string.substr(this.pos,e.length))==i(e)?(!1!==t&&(this.pos+=e.length),!0):null}var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)},e.prototype.current=function(){return this.string.slice(this.start,this.pos)},e}();function Lp(e){if("object"!=typeof e)return e;var t={};for(var n in e){var i=e[n];t[n]=i instanceof Array?i.slice():i}return t}var Pp=new WeakMap,Ip=function(e){function t(t){var n,i,r=this,o=Uh(t.languageData),a={name:(i=t).name||"",token:i.token,blankLine:i.blankLine||function(){return null},startState:i.startState||function(){return!0},copyState:i.copyState||Lp,indent:i.indent||function(){return null},languageData:i.languageData||{}},s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.createParse=function(e,t,i){return new Bp(n,e,t,i)},t}(Yu));return(r=e.call(this,o,s,[],t.name)||this).topNode=function(e,t){var n=Cu.define({id:Hp.length,name:"Document",props:[qh.add((function(){return e})),vd.add((function(){return function(e){return t.getIndent(e)}}))],top:!0});return Hp.push(n),n}(o,r),n=r,r.streamParser=a,r.stateAfter=new bu({perNode:!0}),r}return f(t,e),t.define=function(e){return new t(e)},t.prototype.getIndent=function(e){var t=void 0,n=e.options.overrideIndentation;n&&null!=(t=Pp.get(e.state))&&t<e.pos-1e4&&(t=void 0);var i,r,o=Fp(this,e.node.tree,e.node.from,e.node.from,null!=t?t:e.pos);if(o?(r=o.state,i=o.pos+1):(r=this.streamParser.startState(e.unit),i=e.node.from),e.pos-i>1e4)return null;for(var a=function(){var t=e.state.doc.lineAt(i),o=Math.min(e.pos,t.to);if(t.length)for(var a=n?n(t.from):-1,l=new Ap(t.text,e.state.tabSize,e.unit,(function(n){return n+t.number>e.state.doc.lines?"":e.state.doc.line(n+t.number).text}),a<0?void 0:a);l.pos<o-t.from;)Np(s.streamParser.token,l,r);else s.streamParser.blankLine(r,e.unit);if(o==e.pos)return"break";i=t.to+1},s=this;i<e.pos;){if("break"===a())break}var l=e.lineAt(e.pos);n&&null==t&&Pp.set(e.state,l.from);var c=this.streamParser.indent(r,/^\s*(.*)/.exec(l.text)[1],e);return c&&"CodeMirror.Pass"===c.toString()?null:c},Object.defineProperty(t.prototype,"allowsNesting",{get:function(){return!1},enumerable:!1,configurable:!0}),t}(Wh);function Fp(e,t,n,i,r){var o=n>=i&&n+t.length<=r&&t.prop(e.stateAfter);if(o)return{state:e.streamParser.copyState(o),pos:n+t.length};for(var a=t.children.length-1;a>=0;a--){var s=t.children[a],l=n+t.positions[a],c=s instanceof Tu&&l<r&&Fp(e,s,l,i,r);if(c)return c}return null}function Op(e,t,n,i,r){if(r&&n<=0&&i>=t.length)return t;r||0!=n||t.type!=e.topNode||(r=!0);for(var o=t.children.length-1;o>=0;o--){var a=t.positions[o],s=t.children[o],l=void 0;if(a<i&&s instanceof Tu){if(!(l=Op(e,s,n-a,i-a,r)))break;return r?new Tu(t.type,t.children.slice(0,o).concat(l),t.positions.slice(0,o+1),a+l.length):l}}return null}var Bp=function(){function e(e,t,n,i){this.lang=e,this.input=t,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.tokenCache={},this.rangeIndex=0,this.to=i[i.length-1].to;var r=ed.get(),o=i[0].from,a=function(e,t,n,i,r){for(var o=0,a=t;o<a.length;o++){var s=a[o],l=s.from+(s.openStart?25:0),c=s.to-(s.openEnd?25:0),u=l<=n&&c>n&&Fp(e,s.tree,0-s.offset,n,c),h=void 0;if(u&&u.pos<=i&&(h=Op(e,s.tree,n+s.offset,u.pos+s.offset,!1)))return{state:u.state,tree:h}}return{state:e.streamParser.startState(r?hd(r):4),tree:Tu.empty}}(e,n,o,this.to,null==r?void 0:r.state),s=a.state,l=a.tree;this.state=s,this.parsedPos=this.chunkStart=o+l.length;for(var c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);r&&this.parsedPos<r.viewport.from-1e5&&i.some((function(e){return e.from<=r.viewport.from&&e.to>=r.viewport.from}))&&(this.state=this.lang.streamParser.startState(hd(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}return e.prototype.advance=function(){var e=ed.get(),t=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048),i=e.viewport.to+5e3;for(e&&(n=Math.min(n,i));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=i?(e.skipUntilInView(this.parsedPos-5e3,t),this.finish()):null},e.prototype.stopAt=function(e){this.stoppedAt=e},e.prototype.lineAfter=function(e){var t=this.input.chunk(e);if(this.input.lineChunks)"\n"==t&&(t="");else{var n=t.indexOf("\n");n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)},e.prototype.nextLine=function(){for(var e=this.parsedPos,t=this.lineAfter(e),n=e+t.length,i=this.rangeIndex;;){var r=this.ranges[i].to;if(r>=n)break;if(t=t.slice(0,r-(n-t.length)),++i==this.ranges.length)break;var o=this.ranges[i].from,a=this.lineAfter(o);t+=a,n=o+a.length}return{line:t,end:n}},e.prototype.skipGapsTo=function(e,t,n){for(;;){var i=this.ranges[this.rangeIndex].to,r=e+t;if(n>0?i>r:i>=r)break;t+=this.ranges[++this.rangeIndex].from-i}return t},e.prototype.moveRangeIndex=function(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++},e.prototype.emitToken=function(e,t,n,i,r){if(this.ranges.length>1){t+=r=this.skipGapsTo(t,r,1);var o=this.chunk.length;n+=r=this.skipGapsTo(n,r,-1),i+=this.chunk.length-o}var a=this.chunk.length-4;return 4==i&&a>=0&&this.chunk[a]==e&&this.chunk[a+2]==t?this.chunk[a+2]=n:this.chunk.push(e,t,n,i),r},e.prototype.parseLine=function(e){var t=this,n=this.nextLine(),i=n.line,r=n.end,o=0,a=this.lang.streamParser,s=this.tokenCache,l=new Ap(i,e?e.state.tabSize:4,e?hd(e.state):2,(function(e){for(var n=t.parsedPos,i=0;i<e;i++)(n+=t.lineAfter(n).length)<t.input.length&&n++;return t.lineAfter(n)})),c=[],u=new Set;if(l.eol()){var h=a.blankLine(this.state,l.indentUnit);h&&h.split(" ").forEach((function(e){if(e){var t=e.match(/^line-(background-)?(.*)$/);t&&u.add(t[2])}}))}else{for(var d=null,p=function(){var e=Np(a.token,l,f.state);if(e){var t=s[e],n=[],i=void 0;if(t)i=t[0],n=t[1];else{var r=e.split(" ");r=r.filter((function(e){if(!e)return!1;var t=e.match(/^line-(background-)?(.*)$/);return!t||(n.push(t[2]),!1)})),i=r.sort().join(" "),s[e]=[i,n]}if(n.length>0)for(var o=0,h=n;o<h.length;o++){var p=h[o];u.add(p)}var m=f.parsedPos+l.start,v=f.parsedPos+l.pos;d&&d.cls===i&&d.to===m?d.to=v:(d={cls:i,from:m,to:v},c.push(d))}},f=this;!l.eol();)p();for(var m=0,v=c;m<v.length;m++){var g=v[m];o=this.emitToken(qp(g.cls),g.from,g.to,4,o)}}u.size>0&&(o=this.emitToken(qp(Array.from(u).sort().join(" "),!0),this.parsedPos,this.parsedPos+i.length,4*(c.length+1),o)),this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++},e.prototype.finishChunk=function(){var e=Tu.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Vp,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Tu(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos},e.prototype.finish=function(){return new Tu(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()},e}();function Np(e,t,n){t.start=t.pos;for(var i=0;i<10;i++){var r=e(t,n);if(t.pos>t.start)return r}throw new Error("Stream parser failed to advance stream.")}var Rp=Object.create(null),Hp=[Cu.none],Vp=new Eu(Hp),zp=Object.create(null);function qp(e,t){return e?Rp[e]||(Rp[e]=function(e,t){var n,i,r=e.replace(/ /g,"_"),o=r,a=zp[o];if(a)return a.id;var s=zp[o]=Cu.define({id:Hp.length,name:r,props:[t?_p.add((n={},n[r]=e,n)):Up.add((i={},i[r]=e,i))]});return Hp.push(s),s.id}(e,t)):0}var Up=new bu,_p=new bu,Wp=function(){function e(e){this.lineCache=Object.create(null),this.tokenCache=Object.create(null),this.tree=Kh(e.state),this.decorations=this.buildDeco(e)}return e.prototype.update=function(e){var t=Kh(e.state);t.length<e.view.viewport.to||e.view.compositionStarted?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged)&&(this.tree=t,this.decorations=this.buildDeco(e.view))},e.prototype.buildDeco=function(e){var t=this;if(!this.tree.length)return Yn.none;for(var n=[],i=0,r=e.state.facet(Gp);i<r.length;i++){var o=r[i];n.push.apply(n,o.split(" "))}for(var a=new Set(n),s=a.size>0,l=new kt,c=0,u=0,h=e.visibleRanges;u<h.length;u++){var d=h[u],p=d.from,f=d.to;this.tree.iterate({from:p,to:f,enter:function(n){var i=n.type,r=n.from,o=n.to,u=i.prop(_p);if(u){var h=t.lineCache[u]||(t.lineCache[u]=Yn.line({attributes:{class:u}})),d=e.lineBlockAt(r).from;if(c>d)return;l.add(d,d,h),c=d}var p=i.prop(Up);if(p){if(c>r)return;if(!(h=t.tokenCache[p])){var f=p.split(" "),m={class:f.map((function(e){return"cm-"+e})).join(" ")};s&&f.some((function(e){return a.has(e)}))&&(m.attributes={spellcheck:"false"}),h=t.tokenCache[p]=Yn.mark(m)}l.add(r,o,h),c=o}}})}return l.finish()},e}(),jp=Ve.lowest(Xi.define((function(e){return new Wp(e)}),{decorations:function(e){return e.decorations}})),Gp=Te.define({});function Kp(e){return e.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(e)}function Yp(e){for(var t=e.iter();!t.next().done;)if(Kp(t.value))return!0;return!1}var Zp=Te.define({combine:function(e){return e.some((function(e){return e}))}});function Xp(e){void 0===e&&(e={});var t=[$p];return e.alwaysIsolate&&t.push(Zp.of(!0)),t}var $p=Xi.fromClass(function(){function e(e){this.always=e.state.facet(Zp)||e.textDirection!=ai.LTR||e.state.facet(Xo.perLineTextDirection),this.hasRTL=!this.always&&Yp(e.state.doc),this.tree=Kh(e.state),this.decorations=this.always||this.hasRTL?Qp(e,this.tree,this.always):Yn.none}return e.prototype.update=function(e){var t,n,i=e.state.facet(Zp)||e.view.textDirection!=ai.LTR||e.state.facet(Xo.perLineTextDirection);if(i||this.hasRTL||(t=e.changes,n=!1,t.iterChanges((function(e,t,i,r,o){!n&&Yp(o)&&(n=!0)})),!n)||(this.hasRTL=!0),i||this.hasRTL){var r=Kh(e.state);(i!=this.always||r!=this.tree||e.docChanged||e.viewportChanged)&&(this.tree=r,this.always=i,this.decorations=Qp(e.view,r,i))}},e}(),{provide:function(e){function t(t){var n,i;return null!==(i=null===(n=t.plugin(e))||void 0===n?void 0:n.decorations)&&void 0!==i?i:Yn.none}return[Xo.outerDecorations.of(t),Ve.lowest(Xo.bidiIsolatedRanges.of(t))]}});function Qp(e,t,n){var i=new kt,r=e.visibleRanges;n||(r=function(e,t){for(var n=t.iter(),i=0,r=[],o=null,a=0,s=e;a<s.length;a++){var l=s[a],c=l.from,u=l.to;if(!(o&&o.to>c&&(c=o.to)>=u))for(i+n.value.length<c&&(n.next(c-(i+n.value.length)),i=c);;){var h=i,d=i+n.value.length;if(!n.lineBreak&&Kp(n.value)&&(o&&o.to>h-10?o.to=Math.min(u,d):r.push(o={from:h,to:Math.min(u,d)})),d>=u)break;i=d,n.next()}}return r}(r,e.state.doc));for(var o=0,a=r;o<a.length;o++){var s=a[o],l=s.from,c=s.to;t.iterate({enter:function(e){var t=e.type.prop(bu.isolate);t&&i.add(e.from,e.to,Jp[t])},from:l,to:c})}return i.finish()}var Jp={rtl:Yn.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:ai.RTL}),ltr:Yn.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:ai.LTR}),auto:Yn.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})},ef={bold:{nodeType:"strong",surroundingChars:"**",altSurroundingChars:"__"},italic:{nodeType:"em",surroundingChars:"*",altSurroundingChars:"_"},code:{nodeType:"inline-code",surroundingChars:"`"},highlight:{nodeType:"highlight",surroundingChars:"=="},strikethrough:{nodeType:"strikethrough",surroundingChars:"~~"},comment:{nodeType:"comment",surroundingChars:"%%"},math:{nodeType:"math",surroundingChars:"$"}};function tf(e,t){for(var n=t.from,i=t.to;n<i&&/\s+/.test(e.sliceDoc(n,n+1));)n++;for(;i>n&&/\s+/.test(e.sliceDoc(i-1,i));)i--;return{from:n,to:i}}function nf(e,t){var n;e.moveTo(t,-1),e.node.parent&&!(null!==(n=e.node.type.prop(_p))&&void 0!==n?n:"").contains("table")||e.moveTo(t,1)}function rf(e,t){for(var n=Kh(e).cursor(Mu.ExcludeBuffers),i={italic:"em",code:"inline-code",comment:"comment",bold:"strong",highlight:"highlight",strikethrough:"strikethrough",math:"math"},r=!1,o=!0,a=void 0,s=e.doc.lineAt(t.from),l=e.doc.lineAt(t.to),c=s.number!==l.number,u=s.number;u<=l.number;u++){var h=e.doc.line(u);if(!(t.from<h.from||t.to>h.to)||!of(e,h)){var d=af(e,u);if(!c||d.from!==d.to){var p=Math.max(d.from,t.from),f=Math.min(d.to,t.to);nf(n,p);var m=n.from;for(n.node.parent||(i={});;){var v=n.type.prop(Up)||"",g=new Set(v.split(" ")),y=void 0;for(y in i)i.hasOwnProperty(y)&&(g.has("formatting")||(r=!0,g.has(i[y])||delete i[y]));if(o){var b=/\bheader-(\d)\b/.exec(v),w=b?Number(b[1]):0;void 0!==a&&a!==w&&(o=!1),a=w}if(m<n.from&&(i={}),(m=n.to)>=f||!n.next())break}m<f&&(i={})}}}if(r||(i={}),i.math)for(;n.prevSibling();){v=n.type.prop(Up)||"";if((g=new Set(v.split(" "))).has("format-math-begin")){g.has("math-block")&&delete i.math;break}}return{headingLevel:null!=a?a:0,uniformHeading:o,bold:!!i.bold,italic:!!i.italic,code:!!i.code,comment:!!i.comment,highlight:!!i.highlight,strikethrough:!!i.strikethrough,math:!!i.math}}function of(e,t){var n=!1;return Kh(e).iterate({from:t.from,to:t.to,enter:function(e){var t,i=new Set((null!==(t=e.type.prop(_p))&&void 0!==t?t:"").split(" "));if(i.has("HyperMD-table-2")||i.has("HyperMD-codeblock"))return n=!0,!1}}),n}function af(e,t){var n=e.doc.line(t),i=n.from,r=n.to;return Kh(e).iterate({from:n.from,to:n.to,enter:function(e){var t,r=new Set((null!==(t=e.type.prop(Up))&&void 0!==t?t:"").split(" "));(r.has("hmd-list-indent")||r.has("formatting-quote")||r.has("formatting-list")||r.has("formatting-task")||r.has("formatting-header"))&&(i=Math.min(n.to,e.to))}}),tf(e,{from:i,to:r})}function sf(e,t,n){var i=ef[n],r=[];return Kh(e).iterate({from:t.from,to:t.to,enter:function(t){var n,o=(null!==(n=t.type.prop(Up))&&void 0!==n?n:"").split(" "),a=new Set(o);if(a.has("formatting")&&a.has(i.nodeType)){var s=lf(e,t.from,i);s&&r.push(m(m({},s),{insert:""}))}}}),r}function lf(e,t,n,i){void 0===i&&(i=1);var r=[n.surroundingChars];n.altSurroundingChars&&r.push(n.altSurroundingChars);for(var o=0,a=r;o<a.length;o++){var s=a[o],l=t,c=t;if(-1===i?l-=s.length:c+=s.length,e.sliceDoc(l,c)===s)return{from:l,to:c}}return null}function cf(e,t,n,i){var r=function(){var e;return(null!==(e=t.type.prop(Up))&&void 0!==e?e:"").split(" ").contains(o.nodeType)},o=ef[i],a=n.from,s=n.to,l=t.from;nf(t,n.from);for(var c=!0;c&&!(t.to<l);){if(lf(e,t.from,o)&&(a=t.from),!r())break;l=t.from,c=t.prevSibling()}nf(t,n.to),s=t.to,l=t.to;for(var u=!0;u&&!(t.from>l);){if(t.from>a&&lf(e,t.to,o,-1)){s=t.to;break}if(!r())break;s=t.to,l=t.to,u=t.nextSibling()}return{from:a,to:s}}function uf(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function hf(e){return uf((new TextEncoder).encode(e))}function df(e){return(new TextDecoder).decode(new Uint8Array(e))}function pf(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}function ff(e){return mf(new Uint8Array(e))}function mf(e){for(var t=[],n=e.byteLength,i=0;i<n;i++)t.push(String.fromCharCode(e[i]));return window.btoa(t.join(""))}function vf(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=bf,[4,gf(e)];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))}function gf(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,crypto.subtle.digest("SHA-256",new Uint8Array(e))]}))}))}function yf(e){for(var t=e.length/2,n=new ArrayBuffer(t),i=new Uint8Array(n),r=0;r<t;r++)i[r]=parseInt(e.substr(2*r,2),16);return n}function bf(e){for(var t=new Uint8Array(e),n=[],i=0;i<t.length;i++){var r=t[i];n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")}function wf(e){if(e<=0)return"0 B";for(var t=["B","KB","MB","GB","TB","PB"],n=t.length-1,i=0;i<t.length;i++)if(e<Math.pow(1024,i+1)){n=i;break}var r=e/Math.pow(1024,n);return"".concat(function(e,t,n,i){void 0===t&&(t=2);void 0===n&&(n=".");void 0===i&&(i=",");var r=e<0?"-":"";e=Math.abs(e);var o=parseInt(e.toFixed(t),10)+"",a=o.length>3?o.length%3:0;return r+(a?o.substr(0,a)+i:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?n+Math.abs(e-Math.floor(e)).toFixed(t).slice(2):"")}(r,0===n?0:2)," ").concat(t[n])}var kf="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*?()";var Cf=window.require;function Mf(e){return Cf&&Cf(e)}function Ef(e){var t=Mf("electron");t&&e(t)}function Sf(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){return(t=Mf("fs"))&&t.existsSync(e)?[2,t.promises.readFile(e)]:[2,null]}))}))}function xf(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){if(!(t=Mf("electron")))throw new Error("Not electron");return n=t.ipcRenderer,[2,new Promise((function(t,i){var r=oc(16);n.once(r,(function(e,n){n.body?t(n):i(n.error)})),n.send("request-url",r,e)}))]}))}))}var Tf=!1,Df="0.0.0",Af=0;Ef((function(e){Tf=e.ipcRenderer.sendSync("is-dev"),Df=process.versions.electron,Af=parseInt(Df.split(".")[0]),Zl.resourcePathPrefix=e.ipcRenderer.sendSync("file-url")}));var Lf=Tf,Pf=Df,If=Af;function Ff(){return"darwin"===process.platform}function Of(e,t){"darwin"===process.platform&&(e.setBackgroundColor("#00000000"),t?e.setVibrancy("sidebar"):e.setVibrancy(null))}function Bf(e){return"WebViewElement"===e.constructor.name}function Nf(e){return g(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=e.win,(n=window.electron)&&e.isTrusted?(e.stopPropagation(),e.stopImmediatePropagation(),[4,new Promise((function(e){var i=t.setTimeout((function(){e(null)}),1e3),r=n.ipcRenderer;r.once("context-menu",(function(n,r){t.clearTimeout(i),e(r)})),r.send("context-menu")}))]):[2,null];case 1:return[2,i.sent()]}}))}))}function Rf(e){if(!Ul&&window.electron){var t=electron.remote.getCurrentWebContents().session,n=t.availableSpellCheckerLanguages;e&&0!==e.length||(e=[electron.remote.app.getLocale()]);var i=e.filter((function(e){return n.contains(e)}));t.setSpellCheckerLanguages(i)}}function Hf(e){window.electron&&electron.remote.shell.showItemInFolder(e)}Lf||Ef((function(e){try{e.deprecate.setHandler((function(){}))}catch(e){}}));var Vf="language",zf="en",qf={am:"áŠ áˆ›áˆ­áŠ›",ar:"Ø§ÙŽÙ„Ù’Ø¹ÙŽØ±ÙŽØ¨ÙÙŠÙŽÙ‘Ø©Ù",be:"Ð±ÐµÐ»Ð°Ñ€ÑƒÑÐºÐ°Ñ Ð¼Ð¾Ð²Ð°",ca:"catalÃ ",cs:"ÄeÅ¡tina",da:"Dansk",de:"Deutsch",en:"English","en-GB":"English (GB)",es:"EspaÃ±ol",fa:"ÙØ§Ø±Ø³ÛŒ",fr:"FranÃ§ais",he:"×¢×‘×¨×™×ª",hu:"Magyar",id:"Bahasa Indonesia",it:"Italiano",ja:"æ—¥æœ¬èªž",kh:"ážáŸ’áž˜áŸ‚ážš",ko:"í•œêµ­ì–´",lv:"LatvieÅ¡u",ms:"Bahasa Melayu",ne:"à¤¨à¥‡à¤ªà¤¾à¤²à¥€",nl:"Nederlands",no:"Norsk",pl:"Polski",pt:"PortuguÃªs","pt-BR":"PortuguÃªs do Brasil",ro:"RomÃ¢nÄƒ",ru:"PÑƒÑÑÐºÐ¸Ð¹",sq:"Shqip",th:"à¹„à¸—à¸¢",tr:"TÃ¼rkÃ§e",uk:"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°",uz:"oÊ»zbekcha",vi:"Tiáº¿ng Viá»‡t",zh:"ç®€ä½“ä¸­æ–‡","zh-TW":"ç¹é«”ä¸­æ–‡"},Uf=Object.keys(qf).sort(),_f={zh:"zh-cn",cz:"cs",no:"nb"},Wf={interpolation:{prefix:"{{{{",suffix:"}}}}"}},jf="default";function Gf(e,t){if(String.isString(e))return null!==t&&String.isString(t)?t:e;var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=Gf(e[i],t&&t[i]||null));return n}function Kf(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})).replace(/_[0-9]/g,(function(e){return"-"+e.substring(1)}))}i18next.init({fallbackLng:zf,ns:[jf],defaultNS:jf,initImmediate:!1,interpolation:{alwaysFormat:!0,escapeValue:!1,format:function(e,t){return"number"==typeof e?e.toLocaleString():e}}});var Yf=function e(t,n){var i={};for(var r in t)if(t.hasOwnProperty(r)){var o=n(r),a=t[r];String.isString(a)?i[o]=a:i[o]=e(a,n)}return i}(OBSIDIAN_DEFAULT_I18N,Kf);i18next.addResourceBundle(zf,jf,Yf);var Zf=Promise.resolve(),Xf=localStorage.getItem(Vf);if(Xf){Zf=g(void 0,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),Xf.contains("/")||Xf.contains("\\")?(e=JSON.parse(window.require("original-fs").readFileSync(Xf,"utf8")),i18next.addResourceBundle("dev",jf,e),[4,i18next.changeLanguage("dev")]):[3,2];case 1:return o.sent(),[2];case 2:return i=(n=JSON).parse,[4,ajaxPromise({url:"/i18n/"+Xf+".json"})];case 3:return t=i.apply(n,[o.sent()]),i18next.addResourceBundle(Xf,jf,t),[4,i18next.changeLanguage(Xf)];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),console.error("Failed to load language pack.",r),[3,6];case 6:return[2]}}))}));try{var $f=Xf.toLowerCase();_f.hasOwnProperty($f)&&($f=_f[$f]),window.moment.locale($f)}catch(e){}}window.selectLanguageFileLocation=function(){if(Zl.isDesktopApp){var e=electron.remote.dialog.showOpenDialogSync({title:"Pick location of translation file",filters:[{name:"Translation file",extensions:["json"]}],properties:["openFile","dontAddToRecent"]});if(e.length>0){var t=e[0];localStorage.setItem(Vf,t),location.reload()}}},Lf&&(window.i18nResetStaleKey=function(e){if(Zl.isDesktopApp){var t=window.require("original-fs"),n=electron.ipcRenderer.sendSync("resources");for(var i in qf)if(qf.hasOwnProperty(i)){var r=n+"/i18n/"+i+".json";try{if(t.existsSync(r)){for(var o=t.readFileSync(r,"utf8"),a=JSON.parse(o),s=a,l=e.split("."),c=l.pop(),u=Yf,h=0,d=l;h<d.length;h++){var p=d[h];s.hasOwnProperty(p)&&(s=s[p],u=u[p])}s[c]=u[c];var f=JSON.stringify(a,null,"\t");t.writeFileSync(r,f,"utf8"),console.log("Saved bundle for",i)}}catch(e){console.error("Failed to process translation for",i,e)}}}},window.i18nFindStaleValues=function(){if(Zl.isDesktopApp){var e=window.require("original-fs"),t=electron.ipcRenderer.sendSync("resources")+"/i18n/en.json";if(e.existsSync(t)){var n=[];try{var i=e.readFileSync(t,"utf8"),r=JSON.parse(i),o=function(e,t,i){for(var r in t)if(t.hasOwnProperty(r)){var a=e?e+"."+r:r,s=t[r],l=i[r];String.isString(l)&&String.isString(s)?s!==l&&(console.log("found mismatch",{key:a,oldValue:s,newValue:l}),n.push(a)):"object"==typeof s&&o(a,s,l)}};o("",r,Yf)}catch(e){return void console.log("failed:",e)}console.log("mismatches",n.length)}else console.error("en.json does not exist")}},window.i18nGenBundles=function(){if(Zl.isDesktopApp){var e=window.require("original-fs"),t=electron.ipcRenderer.sendSync("resources");for(var n in qf)if(qf.hasOwnProperty(n)){var i=t+"/i18n/"+n+".json";try{if(e.existsSync(i)){var r=e.readFileSync(i,"utf8"),o=JSON.parse(r),a=Gf(Yf,o),s=JSON.stringify(a,null,"\t");e.writeFileSync(i,s,"utf8"),console.log("Saved bundle for",n)}}catch(e){console.error("Failed to process translation for",n,e)}}}});var Qf=function e(t,n){var i={};return new Proxy(n,{get:function(n,r){return i.hasOwnProperty(r)?i[r]:i[r]=e(t+Kf(r)+".",(function(e,n){return String.isString(e)?i18next.t(t+Kf(r)+"."+e,n):i18next.t(t+Kf(r),e)}))}})}("",i18next.t.bind(i18next)),Jf=["ar","dv","fa","ff","he","ks","ku","ur","wo","yi"];function em(e){if(!e)return"";var t=e.split("-"),n={aa:"Afar",ab:"Abkhaz",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi",dz:"Dzongkha",ee:"Ewe",el:"Greek",en:"English",eo:"Esperanto",es:"Spanish",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fula",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Scottish Gaelic",gl:"Galician",gn:"GuaranÃ­",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua",id:"Indonesian",ie:"Interlingue",ig:"Igbo",ii:"Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu",kj:"Kwanyama",kk:"Kazakh",kl:"Kalaallisut",km:"Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kyrgyz",la:"Latin",lb:"Luxembourgish",lg:"Ganda",li:"Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"MÄori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Norwegian BokmÃ¥l",nd:"Northern Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch",nn:"Norwegian Nynorsk",no:"Norwegian",nr:"Southern Ndebele",nv:"Navajo",ny:"Chichewa",oc:"Occitan",oj:"Ojibwe",om:"Oromo",or:"Oriya",os:"Ossetian",pa:"Panjabi",pi:"PÄli",pl:"Polish",ps:"Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Kirundi",ro:"Romanian",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",sh:"Serbo-Croatian",si:"Sinhala",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Southern Sotho",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"VolapÃ¼k",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang",zh:"Chinese",zu:"Zulu"},i={aar:"Afar",abk:"Abkhaz",ace:"Achinese",ach:"Acoli",ada:"Adangme",ady:"Adyghe; Adygei",afa:"Afro-Asiatic languages",afh:"Afrihili",afr:"Afrikaans",ain:"Ainu",aka:"Akan",akk:"Akkadian",alb:"Albanian",ale:"Aleut",alg:"Algonquian languages",alt:"Southern Altai",amh:"Amharic",ang:"English, Old (ca.450-1100)",anp:"Angika",apa:"Apache languages",ara:"Arabic",arc:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",arg:"Aragonese",arm:"Armenian",arn:"Mapudungun; Mapuche",arp:"Arapaho",art:"Artificial languages",arw:"Arawak",asm:"Assamese",ast:"Asturian; Bable; Leonese; Asturleonese",ath:"Athapascan languages",aus:"Australian languages",ava:"Avaric",ave:"Avestan",awa:"Awadhi",aym:"Aymara",aze:"Azerbaijani",bad:"Banda languages",bai:"Bamileke languages",bak:"Bashkir",bal:"Baluchi",bam:"Bambara",ban:"Balinese",baq:"Basque",bas:"Basa",bat:"Baltic languages",bej:"Beja; Bedawiyet",bel:"Belarusian",bem:"Bemba",ben:"Bengali",ber:"Berber languages",bho:"Bhojpuri",bik:"Bikol",bin:"Bini; Edo",bis:"Bislama",bla:"Siksika",bnt:"Bantu languages",bos:"Bosnian",bra:"Braj",bre:"Breton",btk:"Batak languages",bua:"Buriat",bug:"Buginese",bul:"Bulgarian",bur:"Burmese",byn:"Blin; Bilin",cad:"Caddo",cai:"Central American Indian languages",car:"Galibi Carib",cat:"Catalan",cau:"Caucasian languages",ceb:"Cebuano",cel:"Celtic languages",cha:"Chamorro",chb:"Chibcha",che:"Chechen",chg:"Chagatai",chi:"Chinese",chk:"Chuukese",chm:"Mari",chn:"Chinook jargon",cho:"Choctaw",chp:"Chipewyan; Dene Suline",chr:"Cherokee",chu:"Old Church Slavonic",chv:"Chuvash",chy:"Cheyenne",cmc:"Chamic languages",cnr:"Montenegrin",cop:"Coptic",cor:"Cornish",cos:"Corsican",cpe:"Creoles and pidgins, English based",cpf:"Creoles and pidgins, French-based",cpp:"Creoles and pidgins, Portuguese-based",cre:"Cree",crh:"Crimean Tatar; Crimean Turkish",crp:"Creoles and pidgins",csb:"Kashubian",cus:"Cushitic languages",cze:"Czech",dak:"Dakota",dan:"Danish",dar:"Dargwa",day:"Land Dayak languages",del:"Delaware",den:"Slave (Athapascan)",dgr:"Dogrib",din:"Dinka",div:"Divehi",doi:"Dogri",dra:"Dravidian languages",dsb:"Lower Sorbian",dua:"Duala",dum:"Dutch, Middle (ca.1050-1350)",dut:"Dutch",dyu:"Dyula",dzo:"Dzongkha",efi:"Efik",egy:"Egyptian (Ancient)",eka:"Ekajuk",elx:"Elamite",eng:"English",enm:"English, Middle (1100-1500)",epo:"Esperanto",est:"Estonian",ewe:"Ewe",ewo:"Ewondo",fan:"Fang",fao:"Faroese",fat:"Fanti",fij:"Fijian",fil:"Filipino; Pilipino",fin:"Finnish",fiu:"Finno-Ugrian languages",fon:"Fon",fre:"French",frm:"French, Middle (ca.1400-1600)",fro:"French, Old (842-ca.1400)",frr:"Northern Frisian",frs:"Eastern Frisian",fry:"Western Frisian",ful:"Fula",fur:"Friulian",gaa:"Ga",gay:"Gayo",gba:"Gbaya",gem:"Germanic languages",geo:"Georgian",ger:"German",gez:"Geez",gil:"Gilbertese",gla:"Scottish Gaelic",gle:"Irish",glg:"Galician",glv:"Manx",gmh:"German, Middle High (ca.1050-1500)",goh:"German, Old High (ca.750-1050)",gon:"Gondi",gor:"Gorontalo",got:"Gothic",grb:"Grebo",grc:"Greek, Ancient (to 1453)",gre:"Greek",grn:"GuaranÃ­",gsw:"Swiss German; Alemannic; Alsatian",guj:"Gujarati",gwi:"Gwich'in",hai:"Haida",hat:"Haitian",hau:"Hausa",haw:"Hawaiian",heb:"Hebrew",her:"Herero",hil:"Hiligaynon",him:"Himachali languages; Western Pahari languages",hin:"Hindi",hit:"Hittite",hmn:"Hmong; Mong",hmo:"Hiri Motu",hrv:"Croatian",hsb:"Upper Sorbian",hun:"Hungarian",hup:"Hupa",iba:"Iban",ibo:"Igbo",ice:"Icelandic",ido:"Ido",iii:"Nuosu",ijo:"Ijo languages",iku:"Inuktitut",ile:"Interlingue",ilo:"Iloko",ina:"Interlingua",inc:"Indic languages",ind:"Indonesian",ine:"Indo-European languages",inh:"Ingush",ipk:"Inupiaq",ira:"Iranian languages",iro:"Iroquoian languages",ita:"Italian",jav:"Javanese",jbo:"Lojban",jpn:"Japanese",jpr:"Judeo-Persian",jrb:"Judeo-Arabic",kaa:"Kara-Kalpak",kab:"Kabyle",kac:"Kachin; Jingpho",kal:"Kalaallisut",kam:"Kamba",kan:"Kannada",kar:"Karen languages",kas:"Kashmiri",kau:"Kanuri",kaw:"Kawi",kaz:"Kazakh",kbd:"Kabardian",kha:"Khasi",khi:"Khoisan languages",khm:"Khmer",kho:"Khotanese; Sakan",kik:"Kikuyu",kin:"Kinyarwanda",kir:"Kyrgyz",kmb:"Kimbundu",kok:"Konkani",kom:"Komi",kon:"Kongo",kor:"Korean",kos:"Kosraean",kpe:"Kpelle",krc:"Karachay-Balkar",krl:"Karelian",kro:"Kru languages",kru:"Kurukh",kua:"Kwanyama",kum:"Kumyk",kur:"Kurdish",kut:"Kutenai",lad:"Ladino",lah:"Lahnda",lam:"Lamba",lao:"Lao",lat:"Latin",lav:"Latvian",lez:"Lezghian",lim:"Limburgish",lin:"Lingala",lit:"Lithuanian",lol:"Mongo",loz:"Lozi",ltz:"Luxembourgish",lua:"Luba-Lulua",lub:"Luba-Katanga",lug:"Ganda",lui:"Luiseno",lun:"Lunda",luo:"Luo (Kenya and Tanzania)",lus:"Lushai",mac:"Macedonian",mad:"Madurese",mag:"Magahi",mah:"Marshallese",mai:"Maithili",mak:"Makasar",mal:"Malayalam",man:"Mandingo",mao:"MÄori",map:"Austronesian languages",mar:"Marathi",mas:"Masai",may:"Malay",mdf:"Moksha",mdr:"Mandar",men:"Mende",mga:"Irish, Middle (900-1200)",mic:"Mi'kmaq; Micmac",min:"Minangkabau",mis:"Uncoded languages",mkh:"Mon-Khmer languages",mlg:"Malagasy",mlt:"Maltese",mnc:"Manchu",mni:"Manipuri",mno:"Manobo languages",moh:"Mohawk",mon:"Mongolian",mos:"Mossi",mul:"Multiple languages",mun:"Munda languages",mus:"Creek",mwl:"Mirandese",mwr:"Marwari",myn:"Mayan languages",myv:"Erzya",nah:"Nahuatl languages",nai:"North American Indian languages",nap:"Neapolitan",nau:"Nauru",nav:"Navajo",nbl:"Southern Ndebele",nde:"Northern Ndebele",ndo:"Ndonga",nds:"Low German; Low Saxon; German, Low; Saxon, Low",nep:"Nepali",new:"Nepal Bhasa; Newari",nia:"Nias",nic:"Niger-Kordofanian languages",niu:"Niuean",nno:"Norwegian Nynorsk",nob:"Norwegian BokmÃ¥l",nog:"Nogai",non:"Norse, Old",nor:"Norwegian",nqo:"N'Ko",nso:"Pedi; Sepedi; Northern Sotho",nub:"Nubian languages",nwc:"Classical Newari; Old Newari; Classical Nepal Bhasa",nya:"Chichewa",nym:"Nyamwezi",nyn:"Nyankole",nyo:"Nyoro",nzi:"Nzima",oci:"Occitan",oji:"Ojibwe",ori:"Oriya",orm:"Oromo",osa:"Osage",oss:"Ossetian",ota:"Turkish, Ottoman (1500-1928)",oto:"Otomian languages",paa:"Papuan languages",pag:"Pangasinan",pal:"Pahlavi",pam:"Pampanga; Kapampangan",pan:"Panjabi",pap:"Papiamento",pau:"Palauan",peo:"Persian, Old (ca.600-400 B.C.)",per:"Persian",phi:"Philippine languages",phn:"Phoenician",pli:"PÄli",pol:"Polish",pon:"Pohnpeian",por:"Portuguese",pra:"Prakrit languages",pro:"ProvenÃ§al, Old (to 1500); Occitan, Old (to 1500)",pus:"Pashto","qaa-qtz":"Reserved for local use",que:"Quechua",raj:"Rajasthani",rap:"Rapanui",rar:"Rarotongan; Cook Islands Maori",roa:"Romance languages",roh:"Romansh",rom:"Romany",rum:"Romanian",run:"Kirundi",rup:"Aromanian; Arumanian; Macedo-Romanian",rus:"Russian",sad:"Sandawe",sag:"Sango",sah:"Yakut",sai:"South American Indian languages",sal:"Salishan languages",sam:"Samaritan Aramaic",san:"Sanskrit",sas:"Sasak",sat:"Santali",scn:"Sicilian",sco:"Scots",sel:"Selkup",sem:"Semitic languages",sga:"Irish, Old (to 900)",sgn:"Sign Languages",shn:"Shan",sid:"Sidamo",sin:"Sinhala",sio:"Siouan languages",sit:"Sino-Tibetan languages",sla:"Slavic languages",slo:"Slovak",slv:"Slovenian",sma:"Southern Sami",sme:"Northern Sami",smi:"Sami languages",smj:"Lule Sami",smn:"Inari Sami",smo:"Samoan",sms:"Skolt Sami",sna:"Shona",snd:"Sindhi",snk:"Soninke",sog:"Sogdian",som:"Somali",son:"Songhai languages",sot:"Southern Sotho",spa:"Spanish",srd:"Sardinian",srn:"Sranan Tongo",srp:"Serbian",srr:"Serer",ssa:"Nilo-Saharan languages",ssw:"Swati",suk:"Sukuma",sun:"Sundanese",sus:"Susu",sux:"Sumerian",swa:"Swahili",swe:"Swedish",syc:"Classical Syriac",syr:"Syriac",tah:"Tahitian",tai:"Tai languages",tam:"Tamil",tat:"Tatar",tel:"Telugu",tem:"Timne",ter:"Tereno",tet:"Tetum",tgk:"Tajik",tgl:"Tagalog",tha:"Thai",tib:"Tibetan",tig:"Tigre",tir:"Tigrinya",tiv:"Tiv",tkl:"Tokelau",tlh:"Klingon; tlhIngan-Hol",tli:"Tlingit",tmh:"Tamashek",tog:"Tonga (Nyasa)",ton:"Tonga",tpi:"Tok Pisin",tsi:"Tsimshian",tsn:"Tswana",tso:"Tsonga",tuk:"Turkmen",tum:"Tumbuka",tup:"Tupi languages",tur:"Turkish",tut:"Altaic languages",tvl:"Tuvalu",twi:"Twi",tyv:"Tuvinian",udm:"Udmurt",uga:"Ugaritic",uig:"Uyghur",ukr:"Ukrainian",umb:"Umbundu",und:"Undetermined",urd:"Urdu",uzb:"Uzbek",vai:"Vai",ven:"Venda",vie:"Vietnamese",vol:"VolapÃ¼k",vot:"Votic",wak:"Wakashan languages",wal:"Wolaitta; Wolaytta",war:"Waray",was:"Washo",wel:"Welsh",wen:"Sorbian languages",wln:"Walloon",wol:"Wolof",xal:"Kalmyk; Oirat",xho:"Xhosa",yao:"Yao",yap:"Yapese",yid:"Yiddish",yor:"Yoruba",ypk:"Yupik languages",zap:"Zapotec",zbl:"Blissymbols; Blissymbolics; Bliss",zen:"Zenaga",zgh:"Standard Moroccan Tamazight",zha:"Zhuang",znd:"Zande languages",zul:"Zulu",zun:"Zuni",zxx:"No linguistic content; Not applicable",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki"},r={AF:"Afghanistan",AX:"Ã…land Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, the Democratic Republic of the",CK:"Cook Islands",CR:"Costa Rica",CI:"CÃ´te d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"CuraÃ§ao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, the Former Yugoslav Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"RÃ©union",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint BarthÃ©lemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, Bolivarian Republic of",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};return t.length>1?(n[t[0]]||i[t[0]]||t[0])+" ("+(r[t[1]]||t[1])+")"+t.slice(2).map((function(e){return"(".concat(e,")")})).join(""):t.length>0?n[t[0]]||i[t[0]]||r[t[0]]||t[0]:""}function tm(){return localStorage.getItem(Vf)||zf}function nm(e){var t=tm();Jf.contains(t)&&e.body.addClass("mod-rtl"),e.documentElement.lang=t}function im(e){var t=tm();return new Intl.NumberFormat(t,e)}var rm=nt.define(),om=nt.define(),am=new Map,sm=Fe.define({create:function(){return Yn.none},update:function(e,t){e=e.map(t.changes);for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];r.is(rm)?e=e.update({add:r.value,sort:!0}):r.is(om)&&(e=e.update({filter:r.value}))}return e},provide:function(e){return Xo.decorations.from(e)}}),lm=Je.define();function cm(e){return"set"!==e.annotation(it.userEvent)}function um(e){return e.isUserEvent("input")||e.isUserEvent("delete")}function hm(e,t){if(t.line<0)return 0;var n=t.line+1;if(n>e.lines)return e.length;var i=e.line(n);return isFinite(t.ch)?t.ch<0?i.from+Math.max(0,i.length+t.ch):i.from+t.ch:i.to}function dm(e,t){t=Math.clamp(t,0,e.length);var n=e.lineAt(t);return{line:n.number-1,ch:t-n.from}}function pm(e,t,n){return e.from<=n&&e.to>=t}function fm(e,t,n){for(var i=0,r=e;i<r.length;i++){if(pm(r[i],t,n))return!0}return!1}function mm(e,t,n,i){var r=!1;return e.between(n,i,(function(e,n,i){if(i===t)return r=!0,!1})),r}var vm=nt.define();function gm(e,t){return e.some((function(e){return e.effects.some((function(e){return e.is(t)}))}))}function ym(e,t){return Ee.create(e.ranges.map((function(e){var n=e.anchor,i=e.head,r=e.goalColumn,o=e.bidiLevel;return Ee.range(n+t,i+t,r,o)})),e.mainIndex)}function bm(e,t,n){return Ee.create(e.ranges.map((function(e){var i=e.anchor,r=e.head,o=e.goalColumn,a=e.bidiLevel;return Ee.range(Math.clamp(i,t,n),Math.clamp(r,t,n),o,a)})),e.mainIndex)}function wm(e){for(var t=[],n=0,i=e.length,r=0,o=Array.from(e.matchAll(/(\r?\n|\\*\|)/g));r<o.length;r++){var a=o[r],s=a[1],l=a.index,c=s.length,u="|"===s[c-1];if(u){var h=s.match(/^(\\+)/);if(h&&h[1].length%2==1)continue;h&&(l=l+c-1,c=1)}var d=u?"\\|":"<br>",p=l+n;e=e.substring(0,p)+d+e.substring(p+c),n-=c-d.length,t.push({from:l,to:l+c,insert:d})}return{result:e,changes:ve.of(t,i)}}function km(e){for(var t=[],n=0,i=e.length,r=0,o=Array.from(e.matchAll(/(\\+\||<br>)/gi));r<o.length;r++){var a=o[r],s=a[1],l=a.index,c=s.length,u="<br>"!==s.toLowerCase();if(u){var h=s.match(/^(\\+)/);if(h&&h[1].length%2==0)continue;h&&(l=l+c-2,c=2)}var d=u?"|":"\n",p=l+n;e=e.substring(0,p)+d+e.substring(p+c),n-=c-d.length,t.push({from:l,to:l+c,insert:d})}return{result:e,changes:ve.of(t,i)}}function Cm(e,t,n){return e.anchor>=e.head?Ee.range(n,t,e.goalColumn,e.bidiLevel):Ee.range(t,n,e.goalColumn,e.bidiLevel)}var Mm=/^\s*>(\s*)/;function Em(e){var t=e.match(Mm);if(!t)return 0;for(var n=t[0].length-t[1].length,i=t[1];i.startsWith("    ");)i=i.substring(4);return i.startsWith(" ")?n+1:n}var Sm=new Intl.Collator(void 0,{usage:"sort",sensitivity:"base",numeric:!0}).compare,xm=Sm,Tm=function(e,t){return-Sm(e,t)},Dm=function(e,t){return e-t};function Am(e,t){return void 0===t&&(t=0),{line:e,ch:t}}function Lm(e,t){return{line:e.line,ch:e.ch+t}}function Pm(e,t){return e.line===t.line&&e.ch===t.ch}var Im=/^([>\s]*)(([*+-] |(\d+)([.)] ))(?:\[(.)\] )?)?/,Fm=/^([>\s]*)(#{1,6} )?(.*)/,Om=[{regex:/(ï¼)?ã€ã€$/,replace:function(e){return e[1]?"![[":"[["}},{regex:/ã€‘ã€‘$/,replace:function(){return"]]"}},{regex:/ã€ã€$/,replace:function(){return"[["}}],Bm=function(){function e(){}return e.prototype.getDoc=function(){return this},e.prototype.setLine=function(e,t){this.replaceRange(t,Am(e,0),Am(e,this.getLine(e).length))},e.prototype.somethingSelected=function(){return!!this.getSelection()},e.prototype.setCursor=function(e,t){return Number.isNumber(e)?this.setSelection({line:e,ch:t}):this.setSelection(e)},e.prototype.posAtMouse=function(e){return this.posAtCoords(e.clientX,e.clientY)},e.prototype.insertText=function(e){var t=this.lineCount()-1,n=Am(t,this.getLine(t).length);this.replaceRange(e,n),n=Am(t=this.lineCount()-1,this.getLine(t).length),this.setSelection(n)},e.prototype.processLines=function(e,t,n){void 0===n&&(n=!0);for(var i=this.listSelections(),r=function(e){for(var t=[],n=0,i=e;n<i.length;n++)for(var r=i[n],o=Math.min(r.anchor.line,r.head.line),a=Math.max(r.anchor.line,r.head.line),s=o;s<=a;s++)t.push(s);return ic(t).sort(Dm)}(i),o=[],a=0,s=r;a<s.length;a++){var l=s[a],c=this.getLine(l);if(n&&r.length>1&&!c.trim())o.push(null);else{var u=e(l,c);o.push(u)}}for(var h=[],d=0;d<r.length;d++){l=r[d],u=o[d];if(!n||null!==u)(p=t(l,c=this.getLine(l),u))&&h.push(p)}if(0!==h.length){if(1===i.length){var p=h[0],f=i[0],m=f.anchor;if(0===m.ch&&Pm(m,f.head)&&m.line===p.from.line){var v=p.text.length-(p.to?p.to.ch-p.from.ch:0);return m.ch+=v,m.ch<0&&(m.ch=0),void this.transaction({changes:h,selection:{from:m}})}}this.transaction({changes:h})}},e.prototype.setHeading=function(e){this.processLines((function(e,t){return t.match(Fm)}),(function(t,n,i){var r=0===e?"":Array(e).fill("#").join("")+" ";return{from:Am(t,i[1].length),to:Am(t,n.length-i[3].length),text:r}}))},e.prototype.toggleBlockquote=function(){var e=!1;this.processLines((function(t,n){var i=Em(n);return 0===i&&(e=!0),i}),(function(t,n,i){var r=i;return e&&0===r?{from:Am(t,0),text:"> "}:e?void 0:{from:Am(t,0),to:Am(t,r),text:""}}),!1)},e.prototype.toggleBulletList=function(){var e=!1;this.processLines((function(t,n){var i=n.match(Im);return(!i[3]||i[4]||i[6])&&(e=!0),i}),(function(t,n,i){return i?{from:Am(t,0),to:Am(t,i[0].length),text:i[1]+(e?"- ":"")}:null}))},e.prototype.toggleNumberList=function(){var e=!1;this.processLines((function(t,n){var i=n.match(Im);return i[4]||(e=!0),i}),(function(t,n,i){return i?{from:Am(t,0),to:Am(t,i[0].length),text:i[1]+(e?"1. ":"")}:null}))},e.prototype.toggleCheckList=function(e){var t=3;this.processLines((function(n,i){var r=i.match(Im);return t>2&&" "===r[6]&&(t=2),t>1&&!r[6]&&(t=1),e&&t>0&&!r[3]&&(t=0),r}),(function(n,i,r){if(!r)return null;var o=r[0],a=r[1],s=r[3],l={from:Am(n,0),to:Am(n,o.length),text:i.substr(0,o.length)},c=a+(s||"- ");return l.text=c,1===t?r[6]||(l.text=c+"[ ] "):2===t?l.text=c+"[x] ":3===t&&(l.text=e?c:c+"[ ] "),l}))},e.prototype.insertCallout=function(){var e=this.getCursor("from"),t=this.getCursor("to");if(!Pm(e,t)||this.getLine(e.line).substring(0,e.ch).trim()){var n=[],i="> [!NOTE]\n> ",r={from:Am(e.line,4),to:Am(e.line,8)};e.line>0&&this.getLine(e.line-1)&&(i="\n"+i,r.from.line+=1,r.to.line+=1),n.push({from:Am(e.line,0),text:i});for(var o=e.line+1;o<=t.line;o++)n.push({from:Am(o,0),text:"> "});t.line<this.lineCount()-1&&this.getLine(t.line+1)&&n.push({from:Am(t.line+1,0),text:"\n"}),this.transaction({changes:n,selection:r})}else this.transaction({changes:[{from:e,to:t,text:"\n> [!NOTE] Title\n> Contents\n"}],selection:{from:Am(e.line+1,4),to:Am(e.line+1,8)}})},e.prototype.insertCodeblock=function(){this.insertBlock("```","```")},e.prototype.insertMathBlock=function(){this.insertBlock("$$","$$")},e.prototype.indentList=function(){this.exec("indentMore")},e.prototype.unindentList=function(){this.exec("indentLess")},e.prototype.newlineAndIndentContinueMarkdownList=function(){for(var e=this,t=this.listSelections(),n=[],i=function(t){var i=t.head;if(t.head.line!==t.anchor.line||t.head.ch!==t.anchor.ch)return!1;var r=e.getLine(i.line),o=Im.exec(r);if(!o||!o[0])return!1;var a=o[0],s=o[1],l=o[2],c=o[3],u=o[4],h=o[5],d=o[6],p=a.length;if(i.ch<a.length||!l&&!s)return!1;if(!l)for(var f=i.line-1;f>=0;f--){var m=e.getLine(f),v=Im.exec(m);if(v[2]&&v[0].length===p){a=v[0],s=v[1],l=v[2],c=v[3],u=v[4],h=v[5],d=v[6];break}if(v[0].length<p)break}if(""===r.substr(a.length).trim()){if(!s)return n.push({text:"",from:Am(i.line),to:i}),!0;if(s.endsWith(">")||s.endsWith("> ")){if(l)return n.push({text:"",from:Am(i.line,s.length),to:i}),!0;var g=s.endsWith(">")?1:2;if(i.line>0)if(e.getLine(i.line-1)===s)return n.push({text:"",from:Am(i.line-1,s.length-g),to:Am(i.line-1,s.length)},{text:"",from:Am(i.line,s.length-g),to:Am(i.line,s.length)}),!0;var y=s.substr(0,s.length-g);return n.push({text:"\n"+y,from:Am(i.line,s.length-g),to:Am(i.line,s.length)}),!0}if(s.endsWith("\t"))return n.push({text:"",from:Am(i.line,s.length-1),to:Am(i.line,s.length)}),!0;for(var b=0;b<4&&" "===s.charAt(s.length-b-1);b++);return b>0?(n.push({text:"",from:Am(i.line,s.length-b),to:Am(i.line,s.length)}),!0):(n.push({text:"",from:Am(i.line),to:Am(i.line,s.length)}),!0)}if(!l)return n.push({text:r.charAt(i.ch-1)+"\n"+s,from:Am(i.line,i.ch-1),to:i}),!0;var w=c;u&&(w=parseInt(u,10)+1+h),d&&(w+="[ ] ");var k=Im.exec(r.substring(i.ch));return k&&k[3]&&(w=""),n.push({text:r.charAt(i.ch-1)+"\n"+s+w,from:Am(i.line,i.ch-1),to:i}),k&&k[1]&&n.push({text:"",from:i,to:Am(i.line,i.ch+k[1].length)}),!0},r=0,o=t;r<o.length;r++){if(!i(o[r]))return this.exec("newlineAndIndent")}this.transaction({changes:n},"input.type")},e.prototype.newlineAndIndentOnly=function(){for(var e=this,t=this.listSelections(),n=[],i=function(t){var i=t.head;if(t.head.line!==t.anchor.line||t.head.ch!==t.anchor.ch)return!1;var r=e.getLine(i.line),o=Im.exec(r);if(!o||!o[0])return!1;var a=o[0],s=o[1],l=o[2];return!(i.ch<a.length)&&(n.push({text:r.charAt(i.ch-1)+"\n"+s+(l?l.replace(/\t/g,"    ").replace(/./g," "):""),from:Am(i.line,i.ch-1),to:i}),!0)},r=0,o=t;r<o.length;r++){if(!i(o[r]))return this.newlineOnly()}this.transaction({changes:n})},e.prototype.newlineOnly=function(){this.transaction({replaceSelection:"\n"})},e.prototype.expandText=function(){var e=this.getCursor("anchor"),t=this.getCursor("head");if(e.line===t.line&&e.ch===t.ch)for(var n=this.getLine(e.line).substr(0,e.ch),i=0,r=Om;i<r.length;i++){var o=r[i],a=n.match(o.regex);if(a){var s=a[0].length,l=o.replace(a);this.replaceRange(l,Lm(e,-s),e);break}}},e}();function Nm(e,t){for(var n=0,i=0,r=e.indexOf("\n"),o=[],a=0,s=t;a<s.length;a++){for(var l=s[a];r<l;){if(-1===r){r=e.length;break}n++,i=r+1,r=e.indexOf("\n",i)}o.push({line:n,ch:l-i})}return o}var Rm=function(e){var t=e.state,n=t.doc.lineAt(t.selection.main.from),i=Gm(e.state,n.from);return i.line?Vm(e):!!i.block&&jm(e)};function Hm(e,t){return function(n){var i=n.state,r=n.dispatch;if(i.readOnly)return!1;var o=e(t,i);return!!o&&(r(i.update(o)),!0)}}var Vm=Hm(Zm,0),zm=Hm(Zm,1),qm=Hm(Zm,2),Um=Hm(Ym,0),_m=Hm(Ym,1),Wm=Hm(Ym,2),jm=Hm((function(e,t){return Ym(e,t,function(e){for(var t=[],n=0,i=e.selection.ranges;n<i.length;n++){var r=i[n],o=e.doc.lineAt(r.from),a=r.to<=o.to?o:e.doc.lineAt(r.to);a.from>o.from&&a.from==r.to&&(a=r.to==o.to+1?o:e.doc.lineAt(r.to-1));var s=t.length-1;s>=0&&t[s].to>o.from?t[s].to=a.to:t.push({from:o.from+/^\s*/.exec(o.text)[0].length,to:a.to})}return t}(t))}),0);function Gm(e,t){var n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}var Km=50;function Ym(e,t,n){void 0===n&&(n=t.selection.ranges);var i=n.map((function(e){return Gm(t,e.from).block}));if(!i.every((function(e){return e})))return null;var r=n.map((function(e,n){return function(e,t,n,i){var r,o,a=t.open,s=t.close,l=e.sliceDoc(n-Km,n),c=e.sliceDoc(i,i+Km),u=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(c)[0].length,d=l.length-u;if(l.slice(d-a.length,d)==a&&c.slice(h,h+s.length)==s)return{open:{pos:n-u,margin:u&&1},close:{pos:i+h,margin:h&&1}};i-n<=2*Km?r=o=e.sliceDoc(n,i):(r=e.sliceDoc(n,n+Km),o=e.sliceDoc(i-Km,i));var p=/^\s*/.exec(r)[0].length,f=/\s*$/.exec(o)[0].length,m=o.length-f-s.length;return r.slice(p,p+a.length)==a&&o.slice(m,m+s.length)==s?{open:{pos:n+p+a.length,margin:/\s/.test(r.charAt(p+a.length))?1:0},close:{pos:i-f-s.length,margin:/\s/.test(o.charAt(m-1))?1:0}}:null}(t,i[n],e.from,e.to)}));if(2!=e&&!r.every((function(e){return e})))return{changes:t.changes(n.map((function(e,t){return r[t]?[]:[{from:e.from,insert:i[t].open+" "},{from:e.to,insert:" "+i[t].close}]})))};if(1!=e&&r.some((function(e){return e}))){for(var o=[],a=0,s=void 0;a<r.length;a++)if(s=r[a]){var l=i[a],c=s.open,u=s.close;o.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:o}}return null}function Zm(e,t,n){void 0===n&&(n=t.selection.ranges);for(var i=[],r=-1,o=0,a=n;o<a.length;o++){var s=a[o],l=s.from,c=s.to,u=i.length,h=1e9;if(k=Gm(t,l).line){for(var d=l;d<=c;){if((w=t.doc.lineAt(d)).from>r&&(l==c||c>w.from)){r=w.from;var p=(C=/^\s*/.exec(w.text)[0].length)==w.length,f=w.text.slice(C,C+k.length)==k?C:-1;C<w.text.length&&C<h&&(h=C),i.push({line:w,comment:f,token:k,indent:C,empty:p,single:!1})}d=w.to+1}if(h<1e9)for(var m=u;m<i.length;m++)i[m].indent<i[m].line.text.length&&(i[m].indent=h);i.length==u+1&&(i[u].single=!0)}}if(2!=e&&i.some((function(e){return e.comment<0&&(!e.empty||e.single)}))){for(var v=[],g=0,y=i;g<y.length;g++){var b=y[g],w=b.line,k=b.token,C=b.indent;p=b.empty;!b.single&&p||v.push({from:w.from+C,insert:k+" "})}var M=t.changes(v);return{changes:M,selection:t.selection.map(M,1)}}if(1!=e&&i.some((function(e){return e.comment>=0}))){v=[];for(var E=0,S=i;E<S.length;E++){var x=S[E];w=x.line,f=x.comment,k=x.token;if(f>=0){c=(l=w.from+f)+k.length;" "==w.text[c-w.from]&&c++,v.push({from:l,to:c})}}return{changes:v}}return null}var Xm=Je.define(),$m=Je.define(),Qm=Te.define(),Jm=Te.define({combine:function(e){return mt(e,{minDepth:100,newGroupDelay:500,joinToEvent:function(e,t){return t}},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:function(e,t){return function(n,i){return e(n,i)||t(n,i)}}})}}),ev=Fe.define({create:function(){return kv.empty},update:function(e,t){var n=t.state.facet(Jm),i=t.annotation(Xm);if(i){var r=hv.fromTransaction(t,i.selection),o=i.side,a=0==o?e.undone:e.done;return a=r?dv(a,a.length,n.minDepth,r):vv(a,t.startState.selection),new kv(0==o?i.rest:a,0==o?a:i.rest)}var s=t.annotation($m);if("full"!=s&&"before"!=s||(e=e.isolate()),!1===t.annotation(it.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);var l=hv.fromTransaction(t),c=t.annotation(it.time),u=t.annotation(it.userEvent);return l?e=e.addChanges(l,c,u,n,t):t.selection&&(e=e.addSelection(t.startState.selection,c,u,n.newGroupDelay)),"full"!=s&&"after"!=s||(e=e.isolate()),e},toJSON:function(e){return{done:e.done.map((function(e){return e.toJSON()})),undone:e.undone.map((function(e){return e.toJSON()}))}},fromJSON:function(e){return new kv(e.done.map(hv.fromJSON),e.undone.map(hv.fromJSON))}});function tv(e){return void 0===e&&(e={}),[ev,Jm.of(e),Xo.domEventHandlers({beforeinput:function(e,t){var n="historyUndo"==e.inputType?rv:"historyRedo"==e.inputType?ov:null;return!!n&&(e.preventDefault(),n(t))}})]}var nv=ev;function iv(e,t){return function(n){var i=n.state,r=n.dispatch;if(!t&&i.readOnly)return!1;var o=i.field(ev,!1);if(!o)return!1;var a=o.pop(e,i,t);return!!a&&(r(a),!0)}}var rv=iv(0,!1),ov=iv(1,!1),av=iv(0,!0),sv=iv(1,!0);function lv(e){return function(t){var n=t.field(ev,!1);if(!n)return 0;var i=0==e?n.done:n.undone;return i.length-(i.length&&!i[0].changes?1:0)}}var cv=lv(0),uv=lv(1),hv=function(){function e(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}return e.prototype.setSelAfter=function(t){return new e(this.changes,this.effects,this.mapped,this.startSelection,t)},e.prototype.toJSON=function(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){return new e(t.changes&&ve.fromJSON(t.changes),[],t.mapped&&me.fromJSON(t.mapped),t.startSelection&&Ee.fromJSON(t.startSelection),t.selectionsAfter.map(Ee.fromJSON))},e.fromTransaction=function(t,n){for(var i=fv,r=0,o=t.startState.facet(Qm);r<o.length;r++){var a=(0,o[r])(t);a.length&&(i=i.concat(a))}return!i.length&&t.changes.empty?null:new e(t.changes.invert(t.startState.doc),i,void 0,n||t.startState.selection,fv)},e.selection=function(t){return new e(void 0,fv,void 0,void 0,t)},e}();function dv(e,t,n,i){var r=t+1>n+20?t-n-1:0,o=e.slice(r,t);return o.push(i),o}function pv(e,t){return e.length?t.length?e.concat(t):e:t}var fv=[],mv=200;function vv(e,t){if(e.length){var n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-mv));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),dv(e,e.length-1,1e9,n.setSelAfter(i)))}return[hv.selection([t])]}function gv(e){var t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function yv(e,t){if(!e.length)return e;for(var n=e.length,i=fv;n;){var r=bv(e[n-1],t,i);if(r.changes&&!r.changes.empty||r.effects.length){var o=e.slice(0,n);return o[n-1]=r,o}t=r.mapped,n--,i=r.selectionsAfter}return i.length?[hv.selection(i)]:fv}function bv(e,t,n){var i=pv(e.selectionsAfter.length?e.selectionsAfter.map((function(e){return e.map(t)})):fv,n);if(!e.changes)return hv.selection(i);var r=e.changes.map(t),o=t.mapDesc(e.changes,!0),a=e.mapped?e.mapped.composeDesc(o):o;return new hv(r,nt.mapEffects(e.effects,t),a,e.startSelection.map(o),i)}var wv=/^(input\.type|delete)($|\.)/,kv=function(){function e(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=void 0),this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}return e.prototype.isolate=function(){return this.prevTime?new e(this.done,this.undone):this},e.prototype.addChanges=function(t,n,i,r,o){var a=this.done,s=a[a.length-1];return a=s&&s.changes&&!s.changes.empty&&t.changes&&(!i||wv.test(i))&&(!s.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,function(e,t){var n=[],i=!1;return e.iterChangedRanges((function(e,t){return n.push(e,t)})),t.iterChangedRanges((function(e,t,r,o){for(var a=0;a<n.length;){var s=n[a++],l=n[a++];o>=s&&r<=l&&(i=!0)}})),i}(s.changes,t.changes))||"input.type.compose"==i)?dv(a,a.length-1,r.minDepth,new hv(t.changes.compose(s.changes),pv(nt.mapEffects(t.effects,s.changes),s.effects),s.mapped,s.startSelection,fv)):dv(a,a.length,r.minDepth,t),new e(a,fv,n,i)},e.prototype.addSelection=function(t,n,i,r){var o,a,s=this.done.length?this.done[this.done.length-1].selectionsAfter:fv;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&(o=s[s.length-1],a=t,o.ranges.length==a.ranges.length&&0===o.ranges.filter((function(e,t){return e.empty!=a.ranges[t].empty})).length)?this:new e(vv(this.done,t),this.undone,n,i)},e.prototype.addMapping=function(t){return new e(yv(this.done,t),yv(this.undone,t),this.prevTime,this.prevUserEvent)},e.prototype.pop=function(e,t,n){var i=0==e?this.done:this.undone;if(0==i.length)return null;var r=i[i.length-1],o=r.selectionsAfter[0]||t.selection;if(n&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Xm.of({side:e,rest:gv(i),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){var a=1==i.length?fv:i.slice(0,i.length-1);return r.mapped&&(a=yv(a,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Xm.of({side:e,rest:a,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null},e}();kv.empty=new kv(fv,fv);var Cv=[{key:"Mod-z",run:rv,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ov,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ov,preventDefault:!0},{key:"Mod-u",run:av,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:sv,preventDefault:!0}];function Mv(e,t){return Ee.create(e.ranges.map(t),e.mainIndex)}function Ev(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Sv(e,t){var n=e.state,i=e.dispatch,r=Mv(n.selection,t);return!r.eq(n.selection,!0)&&(i(Ev(n,r)),!0)}function xv(e,t){return Ee.cursor(t?e.to:e.from)}function Tv(e,t){return Sv(e,(function(n){return n.empty?e.moveByChar(n,t):xv(n,t)}))}function Dv(e){return e.textDirectionAt(e.state.selection.main.head)==ai.LTR}var Av=function(e){return Tv(e,!Dv(e))},Lv=function(e){return Tv(e,Dv(e))},Pv=function(e){return Tv(e,!0)},Iv=function(e){return Tv(e,!1)};function Fv(e,t,n){var i=t.head,r=e.doc.lineAt(i);return i=i==(n?r.to:r.from)?n?Math.min(e.doc.length,r.to+1):Math.max(0,r.from-1):r.from+ce(r.text,i-r.from,n),Ee.cursor(i,n?-1:1)}function Ov(e,t){return Sv(e,(function(n){return n.empty?Fv(e.state,n,t):xv(n,t)}))}var Bv=function(e){return Ov(e,!0)},Nv=function(e){return Ov(e,!1)};function Rv(e,t){return Sv(e,(function(n){return n.empty?e.moveByGroup(n,t):xv(n,t)}))}var Hv=function(e){return Rv(e,!Dv(e))},Vv=function(e){return Rv(e,Dv(e))},zv=function(e){return Rv(e,!0)},qv=function(e){return Rv(e,!1)};function Uv(e,t,n){var i=e.state.charCategorizer(t),r=i(n),o=r!=ht.Space;return function(e){var t=i(e);return t!=ht.Space?o&&t==r:(o=!1,!0)}}var _v=function(e){return Sv(e,(function(t){return t.empty?e.moveByChar(t,!0,(function(n){return Uv(e,t.head,n)})):xv(t,!0)}))},Wv="undefined"!=typeof Intl&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function jv(e,t,n){var i=e.state.charCategorizer(t.from),r=ht.Space,o=t.from,a=0,s=!1,l=!1,c=!1,u=function(t){if(s)return!1;o+=n?t.length:-t.length;var u,h=i(t);if(h==ht.Word&&t.charCodeAt(0)<128&&/[\W_]/.test(t)&&(h=-1),r==ht.Space&&(r=h),r!=h)return!1;if(r==ht.Word)if(t.toLowerCase()==t){if(!n&&l)return!1;c=!0}else if(c){if(n)return!1;s=!0}else{if(l&&n&&i(u=e.state.sliceDoc(o,o+1))==ht.Word&&u.toLowerCase()==u)return!1;l=!0}return a++,!0},h=e.moveByChar(t,n,(function(e){return u(e),u}));if(Wv&&r==ht.Word&&h.from==t.from+a*(n?1:-1)){var d=Math.min(t.head,h.head),p=Math.max(t.head,h.head),f=e.state.sliceDoc(d,p);if(f.length>1&&/[\u4E00-\uffff]/.test(f)){var m=Array.from(Wv.segment(f));if(m.length>1)return n?Ee.cursor(t.head+m[1].index,-1):Ee.cursor(h.head+m[m.length-1].index,1)}}return h}function Gv(e,t){return Sv(e,(function(n){return n.empty?jv(e,n,t):xv(n,t)}))}var Kv=function(e){return Gv(e,!0)},Yv=function(e){return Gv(e,!1)};function Zv(e,t,n){if(t.type.prop(n))return!0;var i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function Xv(e,t,n){for(var i=Kh(e).resolveInner(t.head),r=n?bu.closedBy:bu.openedBy,o=t.head;;){var a=n?i.childAfter(o):i.childBefore(o);if(!a)break;Zv(e,a,r)?i=a:o=n?a.to:a.from}var s,l;return l=i.type.prop(r)&&(s=n?xp(e,i.from,1):xp(e,i.to,-1))&&s.matched?n?s.end.to:s.end.from:n?i.to:i.from,Ee.cursor(l,n?-1:1)}var $v=function(e){return Sv(e,(function(t){return Xv(e.state,t,!Dv(e))}))},Qv=function(e){return Sv(e,(function(t){return Xv(e.state,t,Dv(e))}))};function Jv(e,t){return Sv(e,(function(n){if(!n.empty)return xv(n,t);var i=e.moveVertically(n,t);return i.head!=n.head?i:e.moveToLineBoundary(n,t)}))}var eg=function(e){return Jv(e,!1)},tg=function(e){return Jv(e,!0)};function ng(e){var t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,i=0,r=0;if(n){for(var o=0,a=e.state.facet(Xo.scrollMargins);o<a.length;o++){var s=(0,a[o])(e);(null==s?void 0:s.top)&&(i=Math.max(null==s?void 0:s.top,i)),(null==s?void 0:s.bottom)&&(r=Math.max(null==s?void 0:s.bottom,r))}t=e.scrollDOM.clientHeight-i-r}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:r,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function ig(e,t){var n,i=ng(e),r=e.state,o=Mv(r.selection,(function(n){return n.empty?e.moveVertically(n,t,i.height):xv(n,t)}));if(o.eq(r.selection))return!1;if(i.selfScroll){var a=e.coordsAtPos(r.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),l=s.top+i.marginTop,c=s.bottom-i.marginBottom;a&&a.top>l&&a.bottom<c&&(n=Xo.scrollIntoView(o.main.head,{y:"start",yMargin:a.top-l}))}return e.dispatch(Ev(r,o),{effects:n}),!0}var rg=function(e){return ig(e,!1)},og=function(e){return ig(e,!0)};function ag(e,t,n){var i=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,n);if(r.head==t.head&&r.head!=(n?i.to:i.from)&&(r=e.moveToLineBoundary(t,n,!1)),!n&&r.head==i.from&&i.length){var o=/^\s*/.exec(e.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&t.head!=i.from+o&&(r=Ee.cursor(i.from+o))}return r}var sg=function(e){return Sv(e,(function(t){return ag(e,t,!0)}))},lg=function(e){return Sv(e,(function(t){return ag(e,t,!1)}))},cg=function(e){return Sv(e,(function(t){return ag(e,t,!Dv(e))}))},ug=function(e){return Sv(e,(function(t){return ag(e,t,Dv(e))}))},hg=function(e){return Sv(e,(function(t){return Ee.cursor(e.lineBlockAt(t.head).from,1)}))},dg=function(e){return Sv(e,(function(t){return Ee.cursor(e.lineBlockAt(t.head).to,-1)}))};function pg(e,t,n){var i=!1,r=Mv(e.selection,(function(t){var r=xp(e,t.head,-1)||xp(e,t.head,1)||t.head>0&&xp(e,t.head-1,1)||t.head<e.doc.length&&xp(e,t.head+1,-1);if(!r||!r.end)return t;i=!0;var o=r.start.from==t.head?r.end.to:r.end.from;return n?Ee.range(t.anchor,o):Ee.cursor(o)}));return!!i&&(t(Ev(e,r)),!0)}var fg=function(e){return pg(e.state,e.dispatch,!1)},mg=function(e){return pg(e.state,e.dispatch,!0)};function vg(e,t){var n=Mv(e.state.selection,(function(e){var n=t(e);return Ee.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(Ev(e.state,n)),!0)}function gg(e,t){return vg(e,(function(n){return e.moveByChar(n,t)}))}var yg=function(e){return gg(e,!Dv(e))},bg=function(e){return gg(e,Dv(e))},wg=function(e){return gg(e,!0)},kg=function(e){return gg(e,!1)},Cg=function(e){return vg(e,(function(t){return Fv(e.state,t,!0)}))},Mg=function(e){return vg(e,(function(t){return Fv(e.state,t,!1)}))};function Eg(e,t){return vg(e,(function(n){return e.moveByGroup(n,t)}))}var Sg=function(e){return Eg(e,!Dv(e))},xg=function(e){return Eg(e,Dv(e))},Tg=function(e){return Eg(e,!0)},Dg=function(e){return Eg(e,!1)},Ag=function(e){return vg(e,(function(t){return e.moveByChar(t,!0,(function(n){return Uv(e,t.head,n)}))}))};function Lg(e,t){return vg(e,(function(n){return jv(e,n,t)}))}var Pg=function(e){return Lg(e,!0)},Ig=function(e){return Lg(e,!1)},Fg=function(e){return vg(e,(function(t){return Xv(e.state,t,!Dv(e))}))},Og=function(e){return vg(e,(function(t){return Xv(e.state,t,Dv(e))}))};function Bg(e,t){return vg(e,(function(n){return e.moveVertically(n,t)}))}var Ng=function(e){return Bg(e,!1)},Rg=function(e){return Bg(e,!0)};function Hg(e,t){return vg(e,(function(n){return e.moveVertically(n,t,ng(e).height)}))}var Vg=function(e){return Hg(e,!1)},zg=function(e){return Hg(e,!0)},qg=function(e){return vg(e,(function(t){return ag(e,t,!0)}))},Ug=function(e){return vg(e,(function(t){return ag(e,t,!1)}))},_g=function(e){return vg(e,(function(t){return ag(e,t,!Dv(e))}))},Wg=function(e){return vg(e,(function(t){return ag(e,t,Dv(e))}))},jg=function(e){return vg(e,(function(t){return Ee.cursor(e.lineBlockAt(t.head).from)}))},Gg=function(e){return vg(e,(function(t){return Ee.cursor(e.lineBlockAt(t.head).to)}))},Kg=function(e){var t=e.state;return(0,e.dispatch)(Ev(t,{anchor:0})),!0},Yg=function(e){var t=e.state;return(0,e.dispatch)(Ev(t,{anchor:t.doc.length})),!0},Zg=function(e){var t=e.state;return(0,e.dispatch)(Ev(t,{anchor:t.selection.main.anchor,head:0})),!0},Xg=function(e){var t=e.state;return(0,e.dispatch)(Ev(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0},$g=function(e){var t=e.state;return(0,e.dispatch)(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0},Qg=function(e){var t=e.state,n=e.dispatch,i=gy(t).map((function(e){var n=e.from,i=e.to;return Ee.range(n,Math.min(i+1,t.doc.length))}));return n(t.update({selection:Ee.create(i),userEvent:"select"})),!0},Jg=function(e){var t=e.state,n=e.dispatch,i=Mv(t.selection,(function(e){var n=Kh(t),i=n.resolveStack(e.from,1);if(e.empty){var r=n.resolveStack(e.from,-1);r.node.from>=i.node.from&&r.node.to<=i.node.to&&(i=r)}for(var o=i;o;o=o.next){var a=o.node;if((a.from<e.from&&a.to>=e.to||a.to>e.to&&a.from<=e.from)&&o.next)return Ee.range(a.to,a.from)}return e}));return!i.eq(t.selection)&&(n(Ev(t,i)),!0)},ey=function(e){var t=e.state,n=e.dispatch,i=t.selection,r=null;return i.ranges.length>1?r=Ee.create([i.main]):i.main.empty||(r=Ee.create([Ee.cursor(i.main.head)])),!!r&&(n(Ev(t,r)),!0)};function ty(e,t){if(e.state.readOnly)return!1;var n="delete.selection",i=e.state,r=i.changeByRange((function(i){var r=i.from,o=i.to;if(r==o){var a=t(i);a<r?(n="delete.backward",a=ny(e,a,!1)):a>r&&(n="delete.forward",a=ny(e,a,!0)),r=Math.min(r,a),o=Math.max(o,a)}else r=ny(e,r,!1),o=ny(e,o,!0);return r==o?{range:i}:{changes:{from:r,to:o},range:Ee.cursor(r,r<i.head?-1:1)}}));return!r.changes.empty&&(e.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?Xo.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function ny(e,t,n){if(e instanceof Xo)for(var i=0,r=e.state.facet(Xo.atomicRanges).map((function(t){return t(e)}));i<r.length;i++){r[i].between(t,t,(function(e,i){e<t&&i>t&&(t=n?i:e)}))}return t}var iy=function(e,t,n){return ty(e,(function(i){var r,o,a=i.from,s=e.state,l=s.doc.lineAt(a);if(n&&!t&&a>l.from&&a<l.from+200&&!/[^ \t]/.test(r=l.text.slice(0,a-l.from))){if("\t"==r[r.length-1])return a-1;for(var c=It(r,s.tabSize)%hd(s)||hd(s),u=0;u<c&&" "==r[r.length-1-u];u++)a--;o=a}else(o=ce(l.text,a-l.from,t,t)+l.from)==a&&l.number!=(t?s.doc.lines:1)?o+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(o-l.from,a-l.from))&&(o=ce(l.text,o-l.from,!1,!1)+l.from);return o}))},ry=function(e){return iy(e,!1,!0)},oy=function(e){return iy(e,!1,!1)},ay=function(e){return iy(e,!0,!1)},sy=function(e,t){return ty(e,(function(n){for(var i=n.head,r=e.state,o=r.doc.lineAt(i),a=r.charCategorizer(i),s=null;;){if(i==(t?o.to:o.from)){i==n.head&&o.number!=(t?r.doc.lines:1)&&(i+=t?1:-1);break}var l=ce(o.text,i-o.from,t)+o.from,c=o.text.slice(Math.min(i,l)-o.from,Math.max(i,l)-o.from),u=a(c);if(null!=s&&u!=s)break;" "==c&&i==n.head||(s=u),i=l}return i}))},ly=function(e){return sy(e,!1)},cy=function(e){return sy(e,!0)},uy=function(e){return ty(e,(function(t){var n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))},hy=function(e){return ty(e,(function(t){var n=e.lineBlockAt(t.head).from;return t.head>n?n:Math.max(0,t.head-1)}))},dy=function(e){return ty(e,(function(t){var n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}))},py=function(e){return ty(e,(function(t){var n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))},fy=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;for(var i=[],r=0,o="",a=t.doc.iter();;){if(a.next(),a.lineBreak||a.done){var s=o.search(/\s+$/);if(s>-1&&i.push({from:r-(o.length-s),to:r}),a.done)break;o=""}else o=a.value;r+=a.value.length}return!!i.length&&(n(t.update({changes:i,userEvent:"delete"})),!0)},my=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=t.changeByRange((function(e){return{changes:{from:e.from,to:e.to,insert:J.of(["",""])},range:Ee.cursor(e.from)}}));return n(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},vy=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=t.changeByRange((function(e){if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};var n=e.from,i=t.doc.lineAt(n),r=n==i.from?n-1:ce(i.text,n-i.from,!1)+i.from,o=n==i.to?n+1:ce(i.text,n-i.from,!0)+i.from;return{changes:{from:r,to:o,insert:t.doc.slice(n,o).append(t.doc.slice(r,n))},range:Ee.cursor(o)}}));return!i.changes.empty&&(n(t.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function gy(e){for(var t=[],n=-1,i=0,r=e.selection.ranges;i<r.length;i++){var o=r[i],a=e.doc.lineAt(o.from),s=e.doc.lineAt(o.to);if(o.empty||o.to!=s.from||(s=e.doc.lineAt(o.to-1)),n>=a.number){var l=t[t.length-1];l.to=s.to,l.ranges.push(o)}else t.push({from:a.from,to:s.to,ranges:[o]});n=s.number+1}return t}function yy(e,t,n){if(e.readOnly)return!1;for(var i=[],r=[],o=0,a=gy(e);o<a.length;o++){var s=a[o];if(n?s.to!=e.doc.length:0!=s.from){var l=e.doc.lineAt(n?s.to+1:s.from-1),c=l.length+1;if(n){i.push({from:s.to,to:l.to},{from:s.from,insert:l.text+e.lineBreak});for(var u=0,h=s.ranges;u<h.length;u++){var d=h[u];r.push(Ee.range(Math.min(e.doc.length,d.anchor+c),Math.min(e.doc.length,d.head+c)))}}else{i.push({from:l.from,to:s.from},{from:s.to,insert:e.lineBreak+l.text});for(var p=0,f=s.ranges;p<f.length;p++){d=f[p];r.push(Ee.range(d.anchor-c,d.head-c))}}}}return!!i.length&&(t(e.update({changes:i,scrollIntoView:!0,selection:Ee.create(r,e.selection.mainIndex),userEvent:"move.line"})),!0)}var by=function(e){return yy(e.state,e.dispatch,!1)},wy=function(e){return yy(e.state,e.dispatch,!0)};function ky(e,t,n){if(e.readOnly)return!1;for(var i=[],r=0,o=gy(e);r<o.length;r++){var a=o[r];n?i.push({from:a.from,insert:e.doc.slice(a.from,a.to)+e.lineBreak}):i.push({from:a.to,insert:e.lineBreak+e.doc.slice(a.from,a.to)})}return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var Cy=function(e){return ky(e.state,e.dispatch,!1)},My=function(e){return ky(e.state,e.dispatch,!0)},Ey=function(e){if(e.state.readOnly)return!1;var t=e.state,n=t.changes(gy(t).map((function(e){var n=e.from,i=e.to;return n>0?n--:i<t.doc.length&&i++,{from:n,to:i}}))),i=Mv(t.selection,(function(t){var n=void 0;if(e.lineWrapping){var i=e.lineBlockAt(t.head),r=e.coordsAtPos(t.head,t.assoc||1);r&&(n=i.bottom+e.documentTop-r.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)})).map(n);return e.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0},Sy=function(e){var t=e.state;return(0,e.dispatch)(t.update(t.replaceSelection(t.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0},xy=function(e){var t=e.state;return(0,e.dispatch)(t.update(t.changeByRange((function(e){var n=/^\s*/.exec(t.doc.lineAt(e.from).text)[0];return{changes:{from:e.from,to:e.to,insert:t.lineBreak+n},range:Ee.cursor(e.from+n.length+1)}})),{scrollIntoView:!0,userEvent:"input"})),!0};var Ty=Ay(!1),Dy=Ay(!0);function Ay(e){return function(t){var n=t.state,i=t.dispatch;if(n.readOnly)return!1;var r=n.changeByRange((function(t){var i=t.from,r=t.to,o=n.doc.lineAt(i),a=!e&&i==r&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};var n,i=Kh(e).resolveInner(t),r=i.childBefore(t),o=i.childAfter(t);return r&&o&&r.to<=t&&o.from>=t&&(n=r.type.prop(bu.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(r.to,o.from))?{from:r.to,to:o.from}:null}(n,i);e&&(i=r=(r<=o.to?o:n.doc.lineAt(r)).to);var s=new md(n,{simulateBreak:i,simulateDoubleBreak:!!a}),l=pd(s,i);for(null==l&&(l=It(/^\s*/.exec(n.doc.lineAt(i).text)[0],n.tabSize));r<o.to&&/\s/.test(o.text[r-o.from]);)r++;a?(i=a.from,r=a.to):i>o.from&&i<o.from+100&&!/\S/.test(o.text.slice(0,i))&&(i=o.from);var c=["",dd(n,l)];return a&&c.push(dd(n,s.lineIndent(o.from,-1))),{changes:{from:i,to:r,insert:J.of(c)},range:Ee.cursor(i+1+c[1].length)}}));return i(n.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ly(e,t){var n=-1;return e.changeByRange((function(i){for(var r=[],o=i.from;o<=i.to;){var a=e.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(t(a,r,i),n=a.number),o=a.to+1}var s=e.changes(r);return{changes:r,range:Ee.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}}))}var Py=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=Object.create(null),r=new md(t,{overrideIndentation:function(e){var t=i[e];return null==t?-1:t}}),o=Ly(t,(function(e,n,o){var a=pd(r,e.from);if(null!=a){/\S/.test(e.text)||(a=0);var s=/^\s*/.exec(e.text)[0],l=dd(t,a);(s!=l||o.from<e.from+s.length)&&(i[e.from]=a,n.push({from:e.from,to:e.from+s.length,insert:l}))}}));return o.changes.empty||n(t.update(o,{userEvent:"indent"})),!0},Iy=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(Ly(t,(function(e,n){n.push({from:e.from,insert:t.facet(ud)})})),{userEvent:"input.indent"})),!0)},Fy=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(Ly(t,(function(e,n){var i=/^\s*/.exec(e.text)[0];if(i){for(var r=It(i,t.tabSize),o=0,a=dd(t,Math.max(0,r-hd(t)));o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:e.from+o,to:e.from+i.length,insert:a.slice(o)})}})),{userEvent:"delete.dedent"})),!0)},Oy=function(e){return e.setTabFocusMode(),!0},By=function(e){return e.setTabFocusMode(2e3),!0},Ny=function(e){var t=e.state,n=e.dispatch;return t.selection.ranges.some((function(e){return!e.empty}))?Iy({state:t,dispatch:n}):(n(t.update(t.replaceSelection("\t"),{scrollIntoView:!0,userEvent:"input"})),!0)},Ry=[{key:"Ctrl-b",run:Av,shift:yg,preventDefault:!0},{key:"Ctrl-f",run:Lv,shift:bg},{key:"Ctrl-p",run:eg,shift:Ng},{key:"Ctrl-n",run:tg,shift:Rg},{key:"Ctrl-a",run:hg,shift:jg},{key:"Ctrl-e",run:dg,shift:Gg},{key:"Ctrl-d",run:ay},{key:"Ctrl-h",run:ry},{key:"Ctrl-k",run:uy},{key:"Ctrl-Alt-h",run:ly},{key:"Ctrl-o",run:my},{key:"Ctrl-t",run:vy},{key:"Ctrl-v",run:og}],Hy=[{key:"ArrowLeft",run:Av,shift:yg,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Hv,shift:Sg,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cg,shift:_g,preventDefault:!0},{key:"ArrowRight",run:Lv,shift:bg,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Vv,shift:xg,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ug,shift:Wg,preventDefault:!0},{key:"ArrowUp",run:eg,shift:Ng,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Kg,shift:Zg},{mac:"Ctrl-ArrowUp",run:rg,shift:Vg},{key:"ArrowDown",run:tg,shift:Rg,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Yg,shift:Xg},{mac:"Ctrl-ArrowDown",run:og,shift:zg},{key:"PageUp",run:rg,shift:Vg},{key:"PageDown",run:og,shift:zg},{key:"Home",run:lg,shift:Ug,preventDefault:!0},{key:"Mod-Home",run:Kg,shift:Zg},{key:"End",run:sg,shift:qg,preventDefault:!0},{key:"Mod-End",run:Yg,shift:Xg},{key:"Enter",run:Ty,shift:Ty},{key:"Mod-a",run:$g},{key:"Backspace",run:ry,shift:ry},{key:"Delete",run:ay},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ly},{key:"Mod-Delete",mac:"Alt-Delete",run:cy},{mac:"Mod-Backspace",run:dy},{mac:"Mod-Delete",run:py}].concat(Ry.map((function(e){return{mac:e.key,run:e.run,shift:e.shift}}))),Vy=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:$v,shift:Fg},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Qv,shift:Og},{key:"Alt-ArrowUp",run:by},{key:"Shift-Alt-ArrowUp",run:Cy},{key:"Alt-ArrowDown",run:wy},{key:"Shift-Alt-ArrowDown",run:My},{key:"Escape",run:ey},{key:"Mod-Enter",run:Dy},{key:"Alt-l",mac:"Ctrl-l",run:Qg},{key:"Mod-i",run:Jg,preventDefault:!0},{key:"Mod-[",run:Fy},{key:"Mod-]",run:Iy},{key:"Mod-Alt-\\",run:Py},{key:"Shift-Mod-k",run:Ey},{key:"Shift-Mod-\\",run:fg},{key:"Mod-/",run:Rm},{key:"Alt-A",run:Um},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Oy}].concat(Hy),zy={key:"Tab",run:Iy,shift:Fy};function qy(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];"string"==typeof r?e.setAttribute(i,r):null!=r&&(e[i]=r)}t++}for(;t<arguments.length;t++)Uy(e,arguments[t]);return e}function Uy(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)Uy(e,t[n])}}var _y="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFKD")}:function(e){return e},Wy=function(){function e(e,t,n,i,r,o){void 0===n&&(n=0),void 0===i&&(i=e.length),this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=r?function(e){return r(_y(e))}:_y,this.query=this.normalize(t)}return e.prototype.peek=function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ue(this.buffer,this.bufferPos)},e.prototype.next=function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()},e.prototype.nextOverlapping=function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=he(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=de(e);var i=this.normalize(t);if(i.length)for(var r=0,o=n;;r++){var a=i.charCodeAt(r),s=this.match(a,o,this.bufferPos+this.bufferStart);if(r==i.length-1){if(s)return this.value=s,this;break}o==n&&r<t.length&&t.charCodeAt(r)==a&&o++}}},e.prototype.match=function(e,t,n){for(var i=null,r=0;r<this.matches.length;r+=2){var o=this.matches[r],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[r+1],to:n}:(this.matches[r]++,a=!0)),a||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i},e}();"undefined"!=typeof Symbol&&(Wy.prototype[Symbol.iterator]=function(){return this});var jy={from:-1,to:-1,match:/.*/.exec("")},Gy="gm"+(null==/x/.unicode?"":"u"),Ky=function(){function e(e,t,n,i,r){if(void 0===i&&(i=0),void 0===r&&(r=e.length),this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=jy,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Xy(e,t,n,i,r);this.re=new RegExp(t,Gy+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();var o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=$y(e,i),this.getLine(this.curLineStart)}return e.prototype.getLine=function(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())},e.prototype.nextLine=function(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)},e.prototype.next=function(){for(var e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;var t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){var n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=$y(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}},e}(),Yy=new WeakMap,Zy=function(){function e(e,t){this.from=e,this.text=t}return Object.defineProperty(e.prototype,"to",{get:function(){return this.from+this.text.length},enumerable:!1,configurable:!0}),e.get=function(t,n,i){var r=Yy.get(t);if(!r||r.from>=i||r.to<=n){var o=new e(n,t.sliceString(n,i));return Yy.set(t,o),o}if(r.from==n&&r.to==i)return r;var a=r.text,s=r.from;return s>n&&(a=t.sliceString(n,s)+a,s=n),r.to<i&&(a+=t.sliceString(r.to,i)),Yy.set(t,new e(s,a)),new e(n,a.slice(n-s,i-s))},e}(),Xy=function(){function e(e,t,n,i,r){this.text=e,this.to=r,this.done=!1,this.value=jy,this.matchPos=$y(e,i),this.re=new RegExp(t,Gy+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=Zy.get(e,i,this.chunkEnd(i+5e3))}return e.prototype.chunkEnd=function(e){return e>=this.to?this.to:this.text.lineAt(e).to},e.prototype.next=function(){for(;;){var e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){var n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=$y(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Zy.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}},e}();function $y(e,t){if(t>=e.length)return t;for(var n,i=e.lineAt(t);t<i.to&&(n=i.text.charCodeAt(t-i.from))>=56320&&n<57344;)t++;return t}function Qy(e){var t=qy("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function n(){var n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(n){var i=e.state,r=i.doc.lineAt(i.selection.main.head),o=n[1],a=n[2],s=n[3],l=n[4],c=s?+s.slice(1):0,u=a?+a:r.number;if(a&&l){var h=u/100;o&&(h=h*("-"==o?-1:1)+r.number/i.doc.lines),u=Math.round(i.doc.lines*h)}else a&&o&&(u=u*("-"==o?-1:1)+r.number);var d=i.doc.line(Math.max(1,Math.min(i.doc.lines,u))),p=Ee.cursor(d.from+Math.max(0,Math.min(c,d.length)));e.dispatch({effects:[Jy.of(!1),Xo.scrollIntoView(p.from,{y:"center"})],selection:p}),e.focus()}}return{dom:qy("form",{class:"cm-gotoLine",onkeydown:function(t){27==t.keyCode?(t.preventDefault(),e.dispatch({effects:Jy.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:function(e){e.preventDefault(),n()}},qy("label",e.state.phrase("Go to line"),": ",t)," ",qy("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Ky.prototype[Symbol.iterator]=Xy.prototype[Symbol.iterator]=function(){return this});var Jy=nt.define(),eb=Fe.define({create:function(){return!0},update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];r.is(Jy)&&(e=r.value)}return e},provide:function(e){return Is.from(e,(function(e){return e?Qy:null}))}}),tb=function(e){var t=Ds(e,Qy);if(!t){var n=[Jy.of(!0)];null==e.state.field(eb,!1)&&n.push(nt.appendConfig.of([eb,nb])),e.dispatch({effects:n}),t=Ds(e,Qy)}return t&&t.dom.querySelector("input").select(),!0},nb=Xo.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),ib={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},rb=Te.define({combine:function(e){return mt(e,ib,{highlightWordAroundCursor:function(e,t){return e||t},minSelectionLength:Math.min,maxMatches:Math.min})}});function ob(e){var t=[ub,cb];return e&&t.push(rb.of(e)),t}var ab=Yn.mark({class:"cm-selectionMatch"}),sb=Yn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function lb(e,t,n,i){return!(0!=n&&e(t.sliceDoc(n-1,n))==ht.Word||i!=t.doc.length&&e(t.sliceDoc(i,i+1))==ht.Word)}var cb=Xi.fromClass(function(){function e(e){this.decorations=this.getDeco(e)}return e.prototype.update=function(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){var t=e.state.facet(rb),n=e.state,i=n.selection;if(i.ranges.length>1)return Yn.none;var r,o=i.main,a=null;if(o.empty){if(!t.highlightWordAroundCursor)return Yn.none;var s=n.wordAt(o.head);if(!s)return Yn.none;a=n.charCategorizer(o.head),r=n.sliceDoc(s.from,s.to)}else{var l=o.to-o.from;if(l<t.minSelectionLength||l>200)return Yn.none;if(t.wholeWords){if(r=n.sliceDoc(o.from,o.to),!lb(a=n.charCategorizer(o.head),n,o.from,o.to)||!function(e,t,n,i){return e(t.sliceDoc(n,n+1))==ht.Word&&e(t.sliceDoc(i-1,i))==ht.Word}(a,n,o.from,o.to))return Yn.none}else if(!(r=n.sliceDoc(o.from,o.to)))return Yn.none}for(var c=[],u=0,h=e.visibleRanges;u<h.length;u++)for(var d=h[u],p=new Wy(n.doc,r,d.from,d.to);!p.next().done;){var f=p.value,m=f.from,v=f.to;if((!a||lb(a,n,m,v))&&(o.empty&&m<=o.from&&v>=o.to?c.push(sb.range(m,v)):(m>=o.to||v<=o.from)&&c.push(ab.range(m,v)),c.length>t.maxMatches))return Yn.none}return Yn.set(c)},e}(),{decorations:function(e){return e.decorations}}),ub=Xo.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var hb=function(e){var t=e.state,n=e.dispatch,i=t.selection.ranges;if(i.some((function(e){return e.from===e.to})))return function(e){var t=e.state,n=e.dispatch,i=t.selection,r=Ee.create(i.ranges.map((function(e){return t.wordAt(e.head)||Ee.cursor(e.head)})),i.mainIndex);return!r.eq(i)&&(n(t.update({selection:r})),!0)}({state:t,dispatch:n});var r=t.sliceDoc(i[0].from,i[0].to);if(t.selection.ranges.some((function(e){return t.sliceDoc(e.from,e.to)!=r})))return!1;var o=function(e,t){for(var n,i,r=e.selection,o=r.main,a=r.ranges,s=e.wordAt(o.head),l=s&&s.from==o.from&&s.to==o.to,c=function(r,o){if(o.next(),!o.done){if(r&&a.some((function(e){return e.from==o.value.from})))return n=r,i=o,"continue";if(l){var s=e.wordAt(o.value.from);if(!s||s.from!=o.value.from||s.to!=o.value.to)return n=r,i=o,"continue"}return{value:o.value}}if(r)return{value:null};o=new Wy(e.doc,t,0,Math.max(0,a[a.length-1].from-1)),n=r=!0,i=o},u=!1,h=new Wy(e.doc,t,a[a.length-1].to);;){var d=c(u,h);if(u=n,h=i,"object"==typeof d)return d.value}}(t,r);return!!o&&(n(t.update({selection:t.selection.addRange(Ee.range(o.from,o.to),!1),effects:Xo.scrollIntoView(o.to)})),!0)},db=Te.define({combine:function(e){return mt(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:function(e){return new jb(e)},scrollToMatch:function(e){return Xo.scrollIntoView(e)}})}});function pb(e){return e?[db.of(e),$b]:$b}var fb=function(){function e(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,Gy),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}return e.prototype.unquote=function(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"}))},e.prototype.eq=function(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord},e.prototype.create=function(){return this.regexp?new kb(this):new gb(this)},e.prototype.getCursor=function(e,t,n){void 0===t&&(t=0);var i=e.doc?e:ft.create({doc:e});return null==n&&(n=i.doc.length),this.regexp?yb(this,i,t,n):vb(this,i,t,n)},e}(),mb=function(e){this.spec=e};function vb(e,t,n,i){return new Wy(t.doc,e.unquoted,n,i,e.caseSensitive?void 0:function(e){return e.toLowerCase()},e.wholeWord?function(e,t){return function(n,i,r,o){return(o>n||o+r.length<i)&&(o=Math.max(0,n-2),r=e.sliceString(o,Math.min(e.length,i+2))),!(t(bb(r,n-o))==ht.Word&&t(wb(r,n-o))==ht.Word||t(wb(r,i-o))==ht.Word&&t(bb(r,i-o))==ht.Word)}}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}var gb=function(e){function t(t){return e.call(this,t)||this}return f(t,e),t.prototype.nextMatch=function(e,t,n){var i=vb(this.spec,e,n,e.doc.length).nextOverlapping();if(i.done){var r=Math.min(e.doc.length,t+this.spec.unquoted.length);i=vb(this.spec,e,0,r).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==n?null:i.value},t.prototype.prevMatchInRange=function(e,t,n){for(var i=n;;){for(var r=Math.max(t,i-1e4-this.spec.unquoted.length),o=vb(this.spec,e,r,i),a=null;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(r==t)return null;i-=1e4}},t.prototype.prevMatch=function(e,t,n){var i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),!i||i.from==t&&i.to==n?null:i},t.prototype.getReplacement=function(e){return this.spec.unquote(this.spec.replace)},t.prototype.matchAll=function(e,t){for(var n=vb(this.spec,e,0,e.doc.length),i=[];!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i},t.prototype.highlight=function(e,t,n,i){for(var r=vb(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));!r.next().done;)i(r.value.from,r.value.to)},t}(mb);function yb(e,t,n,i){return new Ky(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(r=t.charCategorizer(t.selection.main.head),function(e,t,n){return!n[0].length||(r(bb(n.input,n.index))!=ht.Word||r(wb(n.input,n.index))!=ht.Word)&&(r(wb(n.input,n.index+n[0].length))!=ht.Word||r(bb(n.input,n.index+n[0].length))!=ht.Word)}):void 0},n,i);var r}function bb(e,t){return e.slice(ce(e,t,!1),t)}function wb(e,t){return e.slice(t,ce(e,t))}var kb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.nextMatch=function(e,t,n){var i=yb(this.spec,e,n,e.doc.length).next();return i.done&&(i=yb(this.spec,e,0,t).next()),i.done?null:i.value},t.prototype.prevMatchInRange=function(e,t,n){for(var i=1;;i++){for(var r=Math.max(t,n-1e4*i),o=yb(this.spec,e,r,n),a=null;!o.next().done;)a=o.value;if(a&&(r==t||a.from>r+10))return a;if(r==t)return null}},t.prototype.prevMatch=function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)},t.prototype.getReplacement=function(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(function(t,n){return"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t}))},t.prototype.matchAll=function(e,t){for(var n=yb(this.spec,e,0,e.doc.length),i=[];!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i},t.prototype.highlight=function(e,t,n,i){for(var r=yb(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));!r.next().done;)i(r.value.from,r.value.to)},t}(mb),Cb=nt.define(),Mb=nt.define(),Eb=Fe.define({create:function(e){return new Tb(Vb(e).create(),null)},update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];r.is(Cb)?e=new Tb(r.value.create(),e.panel):r.is(Mb)&&(e=new Tb(e.query,r.value?Hb:null))}return e},provide:function(e){return Is.from(e,(function(e){return e.panel}))}});function Sb(e){var t=e.field(Eb,!1);return t?t.query.spec:Vb(e)}function xb(e){var t;return null!=(null===(t=e.field(Eb,!1))||void 0===t?void 0:t.panel)}var Tb=function(e,t){this.query=e,this.panel=t},Db=Yn.mark({class:"cm-searchMatch"}),Ab=Yn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Lb=Xi.fromClass(function(){function e(e){this.view=e,this.decorations=this.highlight(e.state.field(Eb))}return e.prototype.update=function(e){var t=e.state.field(Eb);(t!=e.startState.field(Eb)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))},e.prototype.highlight=function(e){var t=e.query;if(!e.panel||!t.spec.valid)return Yn.none;for(var n=this.view,i=new kt,r=0,o=n.visibleRanges,a=o.length;r<a;r++){for(var s=o[r],l=s.from,c=s.to;r<a-1&&c>o[r+1].from-500;)c=o[++r].to;t.highlight(n.state,l,c,(function(e,t){var r=n.state.selection.ranges.some((function(n){return n.from==e&&n.to==t}));i.add(e,t,r?Ab:Db)}))}return i.finish()},e}(),{decorations:function(e){return e.decorations}});function Pb(e){return function(t){var n=t.state.field(Eb,!1);return n&&n.query.spec.valid?e(t,n):Ub(t)}}var Ib=Pb((function(e,t){var n=t.query,i=e.state.selection.main.to,r=n.nextMatch(e.state,i,i);if(!r)return!1;var o=Ee.single(r.from,r.to),a=e.state.facet(db);return e.dispatch({selection:o,effects:[Zb(e,r),a.scrollToMatch(o.main,e)],userEvent:"select.search"}),qb(e),!0})),Fb=Pb((function(e,t){var n=t.query,i=e.state,r=i.selection.main.from,o=n.prevMatch(i,r,r);if(!o)return!1;var a=Ee.single(o.from,o.to),s=e.state.facet(db);return e.dispatch({selection:a,effects:[Zb(e,o),s.scrollToMatch(a.main,e)],userEvent:"select.search"}),qb(e),!0})),Ob=Pb((function(e,t){var n=t.query.matchAll(e.state,1e3);return!(!n||!n.length)&&(e.dispatch({selection:Ee.create(n.map((function(e){return Ee.range(e.from,e.to)}))),userEvent:"select.search.matches"}),!0)})),Bb=function(e){var t=e.state,n=e.dispatch,i=t.selection;if(i.ranges.length>1||i.main.empty)return!1;for(var r=i.main,o=r.from,a=r.to,s=[],l=0,c=new Wy(t.doc,t.sliceDoc(o,a));!c.next().done;){if(s.length>1e3)return!1;c.value.from==o&&(l=s.length),s.push(Ee.range(c.value.from,c.value.to))}return n(t.update({selection:Ee.create(s,l),userEvent:"select.search.matches"})),!0},Nb=Pb((function(e,t){var n=t.query,i=e.state,r=i.selection.main,o=r.from,a=r.to;if(i.readOnly)return!1;var s=n.nextMatch(i,o,o);if(!s)return!1;var l,c,u=s,h=[],d=[];if(u.from==o&&u.to==a&&(c=i.toText(n.getReplacement(u)),h.push({from:u.from,to:u.to,insert:c}),u=n.nextMatch(i,u.from,u.to),d.push(Xo.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(o).number)+"."))),u){var p=0==h.length||h[0].from>=s.to?0:s.to-s.from-c.length;l=Ee.single(u.from-p,u.to-p),d.push(Zb(e,u)),d.push(i.facet(db).scrollToMatch(l.main,e))}return e.dispatch({changes:h,selection:l,effects:d,userEvent:"input.replace"}),!0})),Rb=Pb((function(e,t){var n=t.query;if(e.state.readOnly)return!1;var i=n.matchAll(e.state,1e9).map((function(e){return{from:e.from,to:e.to,insert:n.getReplacement(e)}}));if(!i.length)return!1;var r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:Xo.announce.of(r),userEvent:"input.replace.all"}),!0}));function Hb(e){return e.state.facet(db).createPanel(e)}function Vb(e,t){var n,i,r,o,a,s=e.selection.main,l=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!l)return t;var c=e.facet(db);return new fb({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null==t?void 0:t.caseSensitive)&&void 0!==i?i:c.caseSensitive,literal:null!==(r=null==t?void 0:t.literal)&&void 0!==r?r:c.literal,regexp:null!==(o=null==t?void 0:t.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(a=null==t?void 0:t.wholeWord)&&void 0!==a?a:c.wholeWord})}function zb(e){var t=Ds(e,Hb);return t&&t.dom.querySelector("[main-field]")}function qb(e){var t=zb(e);t&&t==e.root.activeElement&&t.select()}var Ub=function(e){var t=e.state.field(Eb,!1);if(t&&t.panel){var n=zb(e);if(n&&n!=e.root.activeElement){var i=Vb(e.state,t.query.spec);i.valid&&e.dispatch({effects:Cb.of(i)}),n.focus(),n.select()}}else e.dispatch({effects:[Mb.of(!0),t?Cb.of(Vb(e.state,t.query.spec)):nt.appendConfig.of($b)]});return!0},_b=function(e){var t=e.state.field(Eb,!1);if(!t||!t.panel)return!1;var n=Ds(e,Hb);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Mb.of(!1)}),!0},Wb=[{key:"Mod-f",run:Ub,scope:"editor search-panel"},{key:"F3",run:Ib,shift:Fb,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ib,shift:Fb,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:_b,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Bb},{key:"Mod-Alt-g",run:tb},{key:"Mod-d",run:hb,preventDefault:!0}],jb=function(){function e(e){var t=this;this.view=e;var n=this.query=e.state.field(Eb).query.spec;function i(e,t,n){return qy("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=qy("input",{value:n.search,placeholder:Gb(e,"Find"),"aria-label":Gb(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=qy("input",{value:n.replace,placeholder:Gb(e,"Replace"),"aria-label":Gb(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=qy("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=qy("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=qy("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit}),this.dom=qy("div",{onkeydown:function(e){return t.keydown(e)},class:"cm-search"},w(w([this.searchField,i("next",(function(){return Ib(e)}),[Gb(e,"next")]),i("prev",(function(){return Fb(e)}),[Gb(e,"previous")]),i("select",(function(){return Ob(e)}),[Gb(e,"all")]),qy("label",null,[this.caseField,Gb(e,"match case")]),qy("label",null,[this.reField,Gb(e,"regexp")]),qy("label",null,[this.wordField,Gb(e,"by word")])],e.state.readOnly?[]:[qy("br"),this.replaceField,i("replace",(function(){return Nb(e)}),[Gb(e,"replace")]),i("replaceAll",(function(){return Rb(e)}),[Gb(e,"replace all")])],!0),[qy("button",{name:"close",onclick:function(){return _b(e)},"aria-label":Gb(e,"close"),type:"button"},["Ã—"])],!1))}return e.prototype.commit=function(){var e=new fb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Cb.of(e)}))},e.prototype.keydown=function(e){sa(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Fb:Ib)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),Nb(this.view))},e.prototype.update=function(e){for(var t=0,n=e.transactions;t<n.length;t++)for(var i=0,r=n[t].effects;i<r.length;i++){var o=r[i];o.is(Cb)&&!o.value.eq(this.query)&&this.setQuery(o.value)}},e.prototype.setQuery=function(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord},e.prototype.mount=function(){this.searchField.select()},Object.defineProperty(e.prototype,"pos",{get:function(){return 80},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.view.state.facet(db).top},enumerable:!1,configurable:!0}),e}();function Gb(e,t){return e.state.phrase(t)}var Kb=30,Yb=/[\s\.,:;?!]/;function Zb(e,t){var n=t.from,i=t.to,r=e.state.doc.lineAt(n),o=e.state.doc.lineAt(i).to,a=Math.max(r.from,n-Kb),s=Math.min(o,i+Kb),l=e.state.sliceDoc(a,s);if(a!=r.from)for(var c=0;c<Kb;c++)if(!Yb.test(l[c+1])&&Yb.test(l[c])){l=l.slice(c);break}if(s!=o)for(c=l.length-1;c>l.length-Kb;c--)if(!Yb.test(l[c-1])&&Yb.test(l[c])){l=l.slice(0,c);break}return Xo.announce.of("".concat(e.state.phrase("current match"),". ").concat(l," ").concat(e.state.phrase("on line")," ").concat(r.number,"."))}var Xb=Xo.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),$b=[Eb,Ve.low(Lb),Xb],Qb=new window.TurndownService({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",fence:"```",linkStyle:"inlined"});Qb.remove(["script","style","title"]),Qb.addRule("strikethrough",{filter:["del","s"],replacement:function(e){return"~~"+e+"~~"}}),Qb.addRule("highlight",{filter:["mark"],replacement:function(e){return"=="+e+"=="}});var Jb=/highlight-(?:text|source)-([a-z0-9]+)/;Qb.addRule("highlightedCodeBlock",{filter:function(e){var t=e.firstChild;return"DIV"===e.nodeName&&Jb.test(e.className)&&t&&"PRE"===t.nodeName},replacement:function(e,t,n){var i=((t.className||"").match(Jb)||[null,""])[1];return"\n\n"+n.fence+i+"\n"+t.firstChild.textContent+"\n"+n.fence+"\n\n"}}),Qb.addRule("listItem",{filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var i=n.bulletListMarker+" ",r=t.parentNode;if("OL"===r.nodeName){var o=r.getAttr("start"),a=Array.prototype.indexOf.call(r.children,t);i=(o?Number(o)+a:a+1)+". "}return i+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}}),Qb.addRule("taskListItems",{filter:function(e){return e.instanceOf(HTMLInputElement)&&"checkbox"===e.type&&"LI"===e.parentNode.nodeName},replacement:function(e,t){return t.checked?"[x] ":"[ ] "}}),Qb.addRule("tableCell",{filter:["th","td"],replacement:function(e,t){return(0===Array.prototype.indexOf.call(t.parentNode.childNodes,t)?"|":"")+function(e){return e=e.trim().replace(/\|+/g,"\\|").replace(/\n\r?/g,"<br>"),e+"|"}(e)+iw(t,"   |")}});var ew={left:":--",right:"--:",center:":-:"};function tw(e){if(!e)return!1;var t,n,i=e.parentNode;return"THEAD"===i.nodeName||i.firstChild===e&&("TABLE"===i.nodeName||(n=(t=i).previousSibling,"TBODY"===t.nodeName&&(!n||"THEAD"===n.nodeName&&/^\s*$/i.test(n.textContent))))&&Array.prototype.every.call(e.childNodes,(function(e){return"TH"===e.nodeName}))}function nw(e){var t=e.getAttribute("colspan");if(!t)return 0;var n=parseInt(t);return isNaN(n)?0:Math.max(0,n-1)}function iw(e,t){return t.repeat(nw(e))}function rw(e){return Qb.turndown(e)}Qb.addRule("tableRow",{filter:"tr",replacement:function(e,t){var n="";if(tw(t))for(var i=0;i<t.cells.length;i++){var r=t.cells[i],o=(r.getAttribute("align")||"").toLowerCase(),a=ew[o]||"---";n+=(0===i?"|":"")+a+"|"+iw(r,a+"|")}return"\n"+e+(n?"\n"+n:"")}}),Qb.addRule("table",{filter:"table",replacement:function(e,t){var n=t.rows[0];if(!tw(n)){for(var i=n.cells.length,r=0;r<n.cells.length;r++)i+=nw(n.cells[r]);e="|"+"   |".repeat(i)+"\n|"+"---|".repeat(i)+"\n"+e.replace(/^[\r\n]+/,"")}return"\n\n"+(e=e.replace(/[\r\n]+/g,"\n"))+"\n\n"}}),Qb.addRule("tableSection",{filter:["thead","tbody","tfoot"],replacement:function(e){return e}}),Qb.escape=function(e){return e};var ow=["accentColor","theme","cssTheme","enabledCssSnippets","showViewHeader","showRibbon","nativeMenus","translucency","textFontFamily","interfaceFontFamily","monospaceFontFamily","baseFontSize","baseFontSizeAction"],aw={alwaysUpdateLinks:!1,spellcheck:!0,spellcheckLanguages:null,readableLineLength:!0,strictLineBreaks:!1,propertiesInDocument:"visible",showInlineTitle:!0,showViewHeader:!0,showRibbon:!0,mobileQuickRibbonItem:"",useMarkdownLinks:!1,showUnsupportedFiles:!1,autoPairBrackets:!0,autoPairMarkdown:!0,smartIndentList:!0,foldHeading:!0,foldIndent:!0,showLineNumber:!1,showIndentGuide:!0,useTab:!0,tabSize:4,rightToLeft:!1,autoConvertHtml:!0,vimMode:!1,livePreview:!0,nativeMenus:null,attachmentFolderPath:"/",newFileLocation:"root",newFileFolderPath:"/",newLinkFormat:"shortest",userIgnoreFilters:null,focusNewTab:!0,defaultViewMode:"source",promptDelete:!0,trashOption:"system",pdfExportSettings:{pageSize:"Letter",landscape:!1,margin:"0",downscalePercent:100},uriCallbacks:!1,mobilePullAction:"command-palette:open",mobileToolbarCommands:["editor:insert-wikilink","editor:insert-embed","editor:insert-tag","editor:attach-file","editor:set-heading","editor:toggle-bold","editor:toggle-italics","editor:toggle-strikethrough","editor:toggle-highlight","editor:toggle-code","editor:toggle-blockquote","editor:toggle-comment","editor:insert-link","editor:toggle-bullet-list","editor:toggle-numbered-list","editor:toggle-checklist-status","editor:indent-list","editor:unindent-list","editor:undo","editor:redo","editor:configure-toolbar"],hotkeys:{},theme:"system",accentColor:"",cssTheme:"",enabledCssSnippets:[],translucency:!1,textFontFamily:"",interfaceFontFamily:"",monospaceFontFamily:"",baseFontSize:16,baseFontSizeAction:!1,types:{}},sw=function(){function e(){this._={}}return e.prototype.on=function(e,t,n){var i=this._,r=i[e];r||(i[e]=r=[]);var o={e:this,name:e,fn:t,ctx:n};return r.push(o),o},e.prototype.off=function(e,t){var n=this._,i=n[e],r=[];if(i&&t)for(var o=0;o<i.length;o++)i[o].fn!==t&&r.push(i[o]);r.length>0?n[e]=r:delete n[e]},e.prototype.offref=function(e){if(e){var t=e.name,n=this._,i=n[t],r=[];if(i&&e)for(var o=0;o<i.length;o++)i[o]!==e&&r.push(i[o]);r.length?n[t]=r:delete n[t]}},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._[e];if(i){i=i.slice();for(var r=0;r<i.length;r++)this.tryTrigger(i[r],t)}},e.prototype.tryTrigger=function(e,t){try{e.fn.apply(e.ctx,t)}catch(e){setTimeout((function(){throw e}),0)}},e}(),lw="#^[]|",cw=_l?'*"\\/<>:|?':"\\/:"+(Kl?'*?<>"':""),uw=cw.split("").join("Â "),hw=lw.split("").join("Â "),dw=new RegExp("["+nc(cw)+"]"),pw=new RegExp("["+nc(lw)+"]"),fw=/^(CON|PRN|AUX|NUL|COM[1-9]|LPT[1-9])$/i;function mw(e){try{return vw(e),!0}catch(e){return!1}}function vw(e){if(_l){var t=e.charAt(e.length-1);if("."===t||" "===t)throw new Error("File names cannot end with a dot or a space.");var n=Xc(e);if(fw.test(n))throw new Error("File name is forbidden: "+n)}if(e.split("/").some((function(e){return dw.test(e)})))throw new Error("File name cannot contain any of the following characters: "+uw)}var gw=".obsidian",yw=function(){function e(e,t){this.parent=null,this.deleted=!1,this.vault=e,this.setPath(t)}return e.prototype.setPath=function(e){this.path=e,this.name=Kc(e)},e.prototype.getNewPathAfterRename=function(e){return e=e.replace(/[\x00-\x1F]/g," ").trim(),this.parent?this.parent.isRoot()?e:this.parent.path+"/"+e:""},e}(),bw=new WeakMap,ww=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.saving=!1,i.stat=null,i}return f(t,e),t.prototype.setPath=function(t){e.prototype.setPath.call(this,t),this.basename=Xc(this.name),this.extension=Qc(this.name)},t.prototype.getShortName=function(){return"md"===this.extension?this.basename:this.name},t.prototype.getNewPathAfterRename=function(t){return e.prototype.getNewPathAfterRename.call(this,Jc(t,this.extension))},t.prototype.cache=function(e){if(null!=e){var t=this.vault.cacheLimit;e.length<=t?bw.set(this,e):bw.delete(this)}else bw.delete(this)},t.prototype.updateCacheLimit=function(){var e=this.vault.cacheLimit;bw.has(this)&&bw.get(this).length>e&&bw.delete(this)},t}(yw),kw=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.children=[],i}return f(t,e),t.prototype.isRoot=function(){return"/"===this.path},t.prototype.getParentPrefix=function(){return this.isRoot()?"":this.path+"/"},t.prototype.getFileCount=function(){for(var e=0,n=0,i=this.children;n<i.length;n++){var r=i[n];e+=r instanceof t?r.getFileCount():1}return e},t.prototype.getFolderCount=function(){for(var e=0,n=0,i=this.children;n<i.length;n++){var r=i[n];r instanceof t&&(e+=1+r.getFolderCount())}return e},t}(yw),Cw=function(e){function t(t){var n=e.call(this)||this;return n.fileMap={},n.config={},n.configTs=0,n.configDir=gw,n.requestSaveConfig=mc(n.saveConfig.bind(n),1e3,!0),n.cacheLimit=65536,n.reloadConfig=mc((function(){return g(n,void 0,void 0,(function(){var e,t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:e=this.getConfigFile("app"),t=this.getConfigFile("appearance"),n=!1,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.adapter.stat(e)];case 2:return l.sent().mtime>this.configTs&&(n=!0),[3,4];case 3:return l.sent(),n=!0,[3,4];case 4:return l.trys.push([4,6,,7]),[4,this.adapter.stat(t)];case 5:return l.sent().mtime>this.configTs&&(n=!0),[3,7];case 6:return l.sent(),n=!0,[3,7];case 7:return n?(this.configTs=Date.now(),[4,this.readConfigJson("app")]):[2];case 8:return i=l.sent(),[4,this.readConfigJson("appearance")];case 9:for(s in r=l.sent(),o=Object.assign({},r,i),a=this.config,o)o.hasOwnProperty(s)&&(a.hasOwnProperty(s)&&JSON.stringify(a[s])===JSON.stringify(o[s])||(a[s]=o[s],this.trigger("config-changed",s)));for(s in a)a.hasOwnProperty(s)&&!o.hasOwnProperty(s)&&(delete a[s],this.trigger("config-changed",s));return[2]}}))}))}),500,!0),n.adapter=t,n.root=new kw(n,""),n.onChange("folder-created","/"),n.root=n.fileMap["/"],n}return f(t,e),t.prototype.getName=function(){return this.adapter.getName()},t.prototype.setFileCacheLimit=function(e){this.cacheLimit=e;var t=this.fileMap;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i instanceof ww&&i.updateCacheLimit()}},t.validateConfigDir=function(e){return"."!==e&&e.startsWith(".")&&!dw.test(e)},t.prototype.setConfigDir=function(e){t.validateConfigDir(e)||(e=gw),this.configDir=e},t.prototype.setupConfig=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return t=(e=this).adapter,n=e.configDir,[4,t.exists(n)];case 1:return u.sent()?[3,3]:[4,t.mkdir(n)];case 2:u.sent(),u.label=3;case 3:return this.configTs=Date.now(),[4,this.readConfigJson("app")];case 4:return i=u.sent(),[4,this.readConfigJson("appearance")];case 5:for(s in r=u.sent(),o=this.config=Object.assign({},r,i),a={editorFontFamily:"textFontFamily"})a.hasOwnProperty(s)&&o.hasOwnProperty(s)&&(l=a[s],c=o[s],delete o[s],!o.hasOwnProperty(l)&&c&&(o[l]=c));return this.requestSaveConfig(),[2]}}))}))},t.prototype.saveConfig=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return t=(e=this).adapter,n=e.configDir,[4,t.exists(n)];case 1:return l.sent()?[3,3]:[4,t.mkdir(n)];case 2:l.sent(),l.label=3;case 3:for(a in i=this.config,r={},o={},i)s=a,i.hasOwnProperty(s)&&(ow.contains(s)?o[s]=i[s]:r[s]=i[s]);return[4,this.writeConfigJson("app",r)];case 4:return l.sent(),[4,this.writeConfigJson("appearance",o)];case 5:return l.sent(),this.configTs=Date.now(),[2]}}))}))},t.prototype.getConfig=function(e){var t=this.config[e];return void 0===t&&(t=aw[e]),Array.isArray(t)||t&&"object"==typeof t?JSON.parse(JSON.stringify(t)):t},t.prototype.setConfig=function(e,t){this.config[e]!==t&&(void 0!==t?this.config[e]=t:delete this.config[e],this.requestSaveConfig(),this.trigger("config-changed",e))},t.prototype.readPluginData=function(e){var t=tu(e+"/data.json");return this.readJson(t)},t.prototype.writePluginData=function(e,t,n){var i=tu(e+"/data.json");return this.writeJson(i,t,n)},t.prototype.getConfigFile=function(e){return this.configDir+"/"+e+".json"},t.prototype.readConfigJson=function(e){return this.readJson(this.getConfigFile(e))},t.prototype.writeConfigJson=function(e,t,n){return this.writeJson(this.getConfigFile(e),t,n)},t.prototype.deleteConfigJson=function(e){var t=tu(this.configDir+"/"+e+".json");return this.adapter.remove(t)},t.prototype.readJson=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:t=tu(e),o.label=1;case 1:return o.trys.push([1,3,,4]),i=(n=JSON).parse,[4,this.adapter.read(t)];case 2:return[2,i.apply(n,[o.sent()])];case 3:return"ENOENT"===(r=o.sent()).code?[2,null]:(console.error("failed to read JSON",e,r),[3,4]);case 4:return[2,void 0]}}))}))},t.prototype.writeJson=function(e,t,n){return g(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=tu(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.adapter.write(i,JSON.stringify(t,void 0,2),n)];case 2:return r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},t.prototype.load=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.adapter.watch(this.onChange.bind(this))];case 1:return e.sent(),this.adapter instanceof mu?[4,this.adapter.watchHiddenRecursive(this.configDir)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.getFileByPath=function(e){if(this.fileMap.hasOwnProperty(e)){var t=this.fileMap[e];if(t instanceof ww)return t}return null},t.prototype.getFolderByPath=function(e){if(this.fileMap.hasOwnProperty(e)){var t=this.fileMap[e];if(t instanceof kw)return t}return null},t.prototype.getAbstractFileByPath=function(e){return this.fileMap.hasOwnProperty(e)?this.fileMap[e]:null},t.prototype.getAbstractFileByPathInsensitive=function(e){var t=this.fileMap;if(t.hasOwnProperty(e))return t[e];var n=e.toLowerCase();for(var i in t)if(t.hasOwnProperty(i)&&i.length===n.length&&i.toLowerCase()===n)return t[i];return null},t.prototype.isEmpty=function(){return 1===Object.keys(this.fileMap).length},t.prototype.getRoot=function(){return this.root},t.prototype.checkForDuplicate=function(e,t){var n=e.getNewPathAfterRename(t),i=this.fileMap[n];return i&&i!==e},t.prototype.checkPath=function(e){vw(e)},t.prototype.onChange=function(e,t,n,i){if("folder-created"===e){var r=new kw(this,t);this.fileMap[t]=r,this.addChild(r),this.trigger("create",this.fileMap[t])}else if("file-created"===e){var o=new ww(this,t);o.stat=i,this.fileMap[t]=o,this.addChild(o),this.trigger("create",this.fileMap[t])}else if("modified"===e){if(!this.fileMap.hasOwnProperty(t))return;(a=this.fileMap[t])instanceof ww&&(a.stat=i,a.saving||a.cache(null)),this.trigger("modify",a)}else if("file-removed"===e||"folder-removed"===e){if(this.fileMap.hasOwnProperty(t)){var a=this.fileMap[t];this.removeChild(a),delete this.fileMap[t],a.deleted=!0,this.trigger("delete",a)}}else if("renamed"===e){if(this.fileMap.hasOwnProperty(n)){var s=this.fileMap[n];this.removeChild(s),s.setPath(t),this.addChild(s),this.fileMap[t]=s,delete this.fileMap[n],this.trigger("rename",s,n)}}else"closed"===e?this.trigger("closed"):"raw"===e&&(this.trigger("raw",t),t.startsWith(this.configDir+"/")&&this.adapter instanceof mu&&this.adapter.watchHiddenRecursive(t),t!==this.getConfigFile("app")&&t!==this.getConfigFile("appearance")||this.reloadConfig())},t.prototype.getDirectParent=function(e){var t=e.path,n=t.lastIndexOf("/");if(-1===n)return this.fileMap["/"];var i=t.slice(0,n),r=this.fileMap[i];return r&&r instanceof kw?r:null},t.prototype.addChild=function(e){var t=e.parent,n=this.getDirectParent(e);n&&n!==t&&(t&&t.children.remove(e),n.children.push(e),e.parent=n)},t.prototype.removeChild=function(e){var t=e.parent;t&&(t.children.remove(e),e.parent=null)},t.prototype.exists=function(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=tu(e),[4,this.adapter.exists(n,t)];case 1:return[2,i.sent()]}}))}))},t.prototype.create=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=tu(e),this.checkPath(i),[4,this.adapter.exists(i)];case 1:if(o.sent())throw new Error("File already exists.");return[4,this.adapter.write(i,t,n)];case 2:return o.sent(),(r=this.getAbstractFileByPath(i))instanceof ww?[2,r]:[2,null]}}))}))},t.prototype.createBinary=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=tu(e),this.checkPath(i),[4,this.adapter.exists(i)];case 1:if(o.sent())throw new Error("File already exists.");return[4,this.adapter.writeBinary(i,t,n)];case 2:return o.sent(),(r=this.getAbstractFileByPath(i))instanceof ww?[2,r]:[2,null]}}))}))},t.prototype.createFolder=function(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=tu(e),this.checkPath(t),[4,this.adapter.exists(t)];case 1:if(i.sent())throw new Error("Folder already exists.");return[4,this.adapter.mkdir(t)];case 2:return i.sent(),(n=this.getAbstractFileByPath(t))instanceof kw?[2,n]:[2,null]}}))}))},t.prototype.read=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.adapter.read(e.path)];case 1:return 65279===(t=n.sent()).charCodeAt(0)&&(t=t.substring(1)),e.cache(t),[2,t]}}))}))},t.prototype.cachedRead=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return bw.has(e)?[2,bw.get(e)]:[2,this.read(e)]}))}))},t.prototype.readBinary=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.adapter.readBinary(e.path)];case 1:t=n.sent();try{"md"===e.extension&&t.byteLength<=this.cacheLimit&&e.cache((new TextDecoder).decode(t))}catch(e){}return[2,t]}}))}))},t.prototype.readRaw=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){return t=tu(e),[2,this.adapter.read(t)]}))}))},t.prototype.getResourcePath=function(e){return this.adapter.getResourcePath(e.path)},t.prototype.delete=function(e){return g(this,arguments,Promise,(function(e,t){return void 0===t&&(t=!1),y(this,(function(n){switch(n.label){case 0:return e?e===this.root?[2]:e instanceof ww?[4,this.adapter.remove(e.path)]:[3,2]:[3,4];case 1:return n.sent(),[3,4];case 2:return e instanceof kw?[4,this.adapter.rmdir(e.path,t)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.trash=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e?e===this.root?[2]:t?[4,this.adapter.trashSystem(e.path)]:[3,2]:[2];case 1:if(n.sent())return[2];n.label=2;case 2:return[4,this.adapter.trashLocal(e.path)];case 3:return n.sent(),[2]}}))}))},t.prototype.rename=function(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=tu(t),e.path===n?[2]:(this.checkPath(n),[4,this.adapter.rename(e.path,n)]);case 1:return i.sent(),[2]}}))}))},t.prototype.modify=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:i=e.saving,e.saving=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),(n=n||{}).immediate=function(){return e.cache(t)},[4,this.adapter.write(e.path,t,n)];case 2:return o.sent(),[3,5];case 3:throw r=o.sent(),e.cache(null),r;case 4:return e.saving=i,[7];case 5:return[2]}}))}))},t.prototype.modifyBinary=function(e,t,n){return g(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=e.saving,e.saving=!0,r.label=1;case 1:return r.trys.push([1,,3,4]),(n=n||{}).immediate=function(){return e.cache(null)},[4,this.adapter.writeBinary(e.path,t,n)];case 2:return r.sent(),[3,4];case 3:return e.saving=i,[7];case 4:return[2]}}))}))},t.prototype.append=function(e,t,n){return g(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=e.saving,e.saving=!0,r.label=1;case 1:return r.trys.push([1,,3,4]),(n=n||{}).immediate=function(){return e.cache(null)},[4,this.adapter.append(e.path,t,n)];case 2:return r.sent(),[3,4];case 3:return e.saving=i,[7];case 4:return[2]}}))}))},t.prototype.process=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:i=e.saving,e.saving=!0,o.label=1;case 1:return o.trys.push([1,,3,4]),(n=n||{}).immediate=function(){return e.cache(null)},[4,this.adapter.process(e.path,t,n)];case 2:return r=o.sent(),e.cache(r),[2,r];case 3:return e.saving=i,[7];case 4:return[2]}}))}))},t.prototype.copy=function(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=(n=tu(t)).normalize("NFC"),this.checkPath(n),[4,this.adapter.copy(e.path,n)];case 1:return i.sent(),[2,this.getAbstractFileByPath(n)]}}))}))},t.prototype.getAllLoadedFiles=function(){var e=[];for(var t in this.fileMap)if(this.fileMap.hasOwnProperty(t)){var n=this.fileMap[t];e.push(n)}return e},t.prototype.getAllFolders=function(e){void 0===e&&(e=!1);var t=[];for(var n in this.fileMap)if(this.fileMap.hasOwnProperty(n)){var i=this.fileMap[n];if(i instanceof kw){if(!e&&i.isRoot())continue;t.push(i)}}return t},t.prototype.getAvailablePath=function(e,t){for(var n=1,i=Jc(e,t);this.getAbstractFileByPathInsensitive(i);)i=Jc(e+" "+n,t),n++;return i},t.prototype.getAvailablePathForAttachments=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return i=this.getConfig("attachmentFolderPath"),r="."===i||"./"===i,o=null,i.startsWith("./")&&(o=i.slice(2)),r?i=n?n.parent.path:"":o&&(i=(n?n.parent.getParentPrefix():"")+o),i=tu(i),e=tu(e),(a=this.getAbstractFileByPathInsensitive(i))?[3,2]:[4,this.createFolder(i)];case 1:a=s.sent(),s.label=2;case 2:return a instanceof kw?[2,this.getAvailablePath(a.getParentPrefix()+e,t)]:[2,this.getAvailablePath(e,t)]}}))}))},t.prototype.resolveFileUrl=function(e){if(Zl.isDesktopApp){e.startsWith(Zl.resourcePathPrefix)&&(e="file:///"+e.substring(Zl.resourcePathPrefix.length).split("?")[0]);var t=Mf("url");if(t&&e.startsWith("file://")){var n=t.fileURLToPath(e);return this.resolveFilePath(n)}}return null},t.prototype.resolveFilePath=function(e){var t=this.adapter;if(Zl.isDesktopApp&&t instanceof mu){var n=t.getBasePath();if(e.startsWith(n)){var i=tu(e.substring(n.length)),r=this.getAbstractFileByPath(i);if(r instanceof ww)return r}}return null},t.recurseChildren=function(e,t){for(var n=[e];n.length>0;){var i=n.pop();if(i&&(t(i),i instanceof kw)){var r=i.children;n=n.concat(r)}}},t.prototype.getMarkdownFiles=function(){var e=[],n=this.getRoot();return t.recurseChildren(n,(function(t){t instanceof ww&&"md"===t.extension&&e.push(t)})),e},t.prototype.getFiles=function(){var e=[],n=this.getRoot();return t.recurseChildren(n,(function(t){t instanceof ww&&e.push(t)})),e},t.prototype.iterateFiles=function(e,t){return C(this,arguments,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:n=0,a.label=1;case 1:return n<e.length?(i=e[n],r="","md"!==i.extension?[3,6]:t?[4,k(this.cachedRead(i))]:[3,3]):[3,10];case 2:return o=a.sent(),[3,5];case 3:return[4,k(this.read(i))];case 4:o=a.sent(),a.label=5;case 5:r=o,a.label=6;case 6:return[4,k({file:i,content:r})];case 7:return[4,a.sent()];case 8:a.sent(),a.label=9;case 9:return n++,[3,1];case 10:return[2]}}))}))},t.prototype.generateFiles=function(e,t){return C(this,arguments,(function(){var n,i,r,o,a,s,l,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:p.trys.push([0,12,13,18]),n=!0,i=M(e),p.label=1;case 1:return[4,k(i.next())];case 2:return r=p.sent(),(c=r.done)?[3,11]:(d=r.value,n=!1,a="","md"!==(o=d).extension&&"canvas"!==o.extension?[3,7]:t?[4,k(this.cachedRead(o))]:[3,4]);case 3:return s=p.sent(),[3,6];case 4:return[4,k(this.read(o))];case 5:s=p.sent(),p.label=6;case 6:a=s,p.label=7;case 7:return[4,k({file:o,content:a})];case 8:return[4,p.sent()];case 9:p.sent(),p.label=10;case 10:return n=!0,[3,1];case 11:return[3,18];case 12:return l=p.sent(),u={error:l},[3,18];case 13:return p.trys.push([13,,16,17]),n||c||!(h=i.return)?[3,15]:[4,k(h.call(i))];case 14:p.sent(),p.label=15;case 15:return[3,17];case 16:if(u)throw u.error;return[7];case 17:return[7];case 18:return[2]}}))}))},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(sw);var Mw=/(?:([\u200F\p{sc=Arabic}\p{sc=Hebrew}\p{sc=Syriac}\p{sc=Thaana}])|([\u200E\p{sc=Armenian}\p{sc=Bengali}\p{sc=Bopomofo}\p{sc=Braille}\p{sc=Buhid}\p{sc=Canadian_Aboriginal}\p{sc=Cherokee}\p{sc=Cyrillic}\p{sc=Devanagari}\p{sc=Ethiopic}\p{sc=Georgian}\p{sc=Greek}\p{sc=Gujarati}\p{sc=Gurmukhi}\p{sc=Han}\p{sc=Hangul}\p{sc=Hanunoo}\p{sc=Hiragana}\p{sc=Kannada}\p{sc=Katakana}\p{sc=Khmer}\p{sc=Lao}\p{sc=Latin}\p{sc=Limbu}\p{sc=Malayalam}\p{sc=Mongolian}\p{sc=Myanmar}\p{sc=Ogham}\p{sc=Oriya}\p{sc=Runic}\p{sc=Sinhala}\p{sc=Tagalog}\p{sc=Tagbanwa}\p{sc=Tamil}\p{sc=Telugu}\p{sc=Thai}\p{sc=Tibetan}\p{sc=Yi}]))/u;function Ew(e){var t=e.match(Mw);if(t){if(t[1])return"rtl";if(t[2])return"ltr"}return"auto"}function Sw(e,t){e.focus();var n=e.win,i=n.document.createRange();i.selectNodeContents(e),isBoolean(t)&&i.collapse(t);var r=n.getSelection();r&&(r.removeAllRanges(),r.addRange(i),Zl.isMobile&&Pl((function(){e.scrollIntoView({block:"nearest"})})))}function xw(e){e||(e=activeWindow);var t=e.document.activeElement;t&&t.instanceOf(HTMLElement)&&t.blur();var n=e.getSelection();n&&n.removeAllRanges()}function Tw(e){e.addClass("is-flashing"),e.win.setTimeout((function(){return e.removeClass("is-flashing")}),750)}function Dw(e,t){for(var n=e.document.body;t.win.frameElement;)t=t.win.frameElement;return n.contains(t)}var Aw=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Aw={passive:!1}}}))}catch(e){}function Lw(e,t,n){var i,r,o;n=n||{},t.show();var a=null!==(i=n.gap)&&void 0!==i?i:0,s=n.offsetParent||t.offsetParent||t.doc.documentElement,l=null!==(r=n.horizontalAlignment)&&void 0!==r?r:"left",c=null!==(o=n.preventOverlap)&&void 0!==o&&o;c&&(t.style.maxHeight="");var u=s.scrollTop+s.clientHeight,h=s.scrollTop+10,d=u-10,p=Math.min(e.top,d),f=Math.max(e.bottom,h),m=t.offsetHeight,v=e.top-h,g=d-e.bottom,y=v>=m+a,b=g>=m+a,w=null,k=null;b?w=f+a:y||c&&v>g?k=u-(p-a):w=c?f+a:s.clientHeight<m+a?h:d-m;var C=s.scrollLeft+10,M=s.scrollLeft+s.clientWidth-10,E=t.offsetWidth;if("left"===l){var S=e.left;S<C?S=C:S+E>M&&(S=M-E),t.style.left="".concat(S,"px"),t.style.right=""}else{var x=e.right;x>M?x=M:x-E<C&&(x=C+E),t.style.left="",t.style.right="".concat(s.clientWidth-x,"px")}t.style.top=null!==w?"".concat(w,"px"):"",t.style.bottom=null!==k?"".concat(k,"px"):"",y||b||!c||(t.style.maxHeight="".concat(v>g?v-a:g-a,"px"))}function Pw(e,t,n){var i=e.doc,r=setInterval((function(){i.body.contains(e)||(clearInterval(r),n())}),t);return function(){clearInterval(r)}}function Iw(e,t){e.addClass("mod-fade");t.addEventListener("scroll",mc((function(){var n=t.scrollLeft,i=t.scrollWidth,r=t.offsetWidth;e.toggleClass("mod-at-start",0===n),e.toggleClass("mod-at-end",Math.ceil(n)>=i-r)}),10))}function Fw(e,t){var n=e.clientX,i=e.clientY,r=t.getBoundingClientRect();return n>=r.x&&n<=r.x+r.width&&i>=r.y&&i<=r.y+r.height}function Ow(e,t){for(var n=e.offsetWidth,i=n,r=0,o=0,a=t?t.offsetParent:null;e&&e!==t&&e!==a;){r+=e.offsetTop,o+=e.offsetLeft;for(var s=e.offsetParent,l=e.parentElement;l&&l!==s;)r-=l.scrollTop,o-=l.scrollLeft,l=l.parentElement;s&&s!==a&&(i=s.offsetWidth,s!==t&&(r-=s.scrollTop,o-=s.scrollLeft)),e=s}return{top:r,left:o,right:i-o-n}}function Bw(e,t){var n=Ow(e,t);return{left:n.left,bottom:n.top+e.offsetHeight,top:n.top,right:n.left+e.offsetWidth}}function Nw(e,t){var n=!1,i=null;return{get loaded(){return n},get promise(){if(n)return Promise.resolve();if(!i){t&&t.before&&t.before();var r=function(e,t){return void 0===t&&(t="text/javascript"),new Promise((function(n,i){var r=document.createElement("script");r.type=t,r.src=e,r.addEventListener("load",(function(){return n(r)})),r.addEventListener("error",(function(e){return i(e)})),document.body.appendChild(r)}))}(e,null==t?void 0:t.type);r.catch((function(e){e.detach(),i=null})),i=r.then((function(){n=!0,i=null,t&&t.after&&t.after()}))}return i},then:function(e){return n?Promise.resolve(e()):this.promise.then(e)}}}function Rw(e,t){if(3!==e.nodeType)for(var n=e.firstChild;n;)Rw(n,t),n=n.nextSibling;else t.push(e)}function Hw(e,t,n){var i=[];Rw(e,i);var r=i.map((function(e){return e.textContent||""}));return Vw(i,r,t,n)}function Vw(e,t,n,i){for(var r=0,o=null,a=-1,s=null,l=-1,c=0;c<t.length;c++){var u=r+t[c].length;if(r<=n&&n<=u&&(o=e[c],a=n-r),r<=i&&i<=u){s=e[c],l=i-r;break}r=u}if(o&&s){var h=document.createRange();return h.setStart(o,a),h.setEnd(s,l),h}return null}function zw(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:e.addClass("is-loading"),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,t()];case 2:return n=i.sent(),[3,4];case 3:return e.removeClass("is-loading"),[7];case 4:return[2,n]}}))}))}function qw(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:e.addClass("mod-loading"),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,t()];case 2:return n=i.sent(),[3,4];case 3:return e.removeClass("mod-loading"),[7];case 4:return[2,n]}}))}))}function Uw(e){e.addEventListener("mousemove",(function(t){var n=e.clientHeight,i=e.scrollHeight;if(i>n){var r=(t.clientY-e.getBoundingClientRect().y-30)/(n-60);e.scrollTop=(i-n)*Math.clamp(r,0,1)}}))}for(var _w=new Map,Ww=0,jw="a abbr acronym b bdi bdo big br button canvas cite code data del dfn em embed i iframe img input ins kbd label map mark meter noscript object outputpicture progress q ruby s samp select small span strong sub sup svg textarea time u tt var video wbr".split(" ");Ww<jw.length;Ww++){var Gw=jw[Ww];_w.set(Gw,!0)}for(var Kw=0,Yw="address article aside blockquote details dialog dd div dl dt fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr li main nav ol p pre ul".split(" ");Kw<Yw.length;Kw++){Gw=Yw[Kw];_w.set(Gw,!1)}var Zw=/^[a-z]+$/i;function Xw(e){if(!e||!Zw.test(e))return!1;if(_w.has(e))return _w.get(e);var t,n;try{t=document.createElement(e),document.body.appendChild(t),n=getComputedStyle(t).display}catch(e){}t&&document.body.removeChild(t);var i=n&&n.startsWith("inline");return _w.set(e,i),i}function $w(e,t){var n=e.querySelector(["a[href]","button","input","select","textarea",'[contenteditable]:not([contenteditable="false"])',"[tabindex]"].map((function(e){return e+':not([disabled]):not([tabindex="-1"])'})).join(","));return n&&(n.instanceOf(HTMLElement)||n.instanceOf(SVGElement))?(n.focus(t),n):null}var Qw=new WeakMap;function Jw(e,t){for(var n=[e];n.length;){var i=n.pop();if(!0!==t(i))for(var r=i.firstElementChild;r;)n.push(r),r=r.nextElementSibling}}function ek(e){if(Xw(e.tagName.toLowerCase()))return!0;var t=getComputedStyle(e);return!("none"!==t.display&&!t.display.startsWith("inline"))||(("auto"===t.overflowY||"scroll"===t.overflowY)&&e.scrollTop>0?Qw.set(e,e.scrollTop):Qw.delete(e),!1)}function tk(e){Jw(e,ek)}function nk(e){var t=Qw.get(e);return t&&(e.scrollTop=t,Qw.delete(e)),!1}function ik(e){Jw(e,nk)}function rk(e){var t=0,n=0;e.addEventListener("scroll",(function(){t=e.scrollLeft,n=e.scrollTop}),{passive:!0}),e.onNodeInserted((function(){!n&&!t||e.scrollLeft||e.scrollTop||(e.scrollLeft=t,e.scrollTop=n)}))}function ok(e,t,n){for(var i=e.targetNode;i&&i!==t;){if(i.instanceOf(Element)&&(i.scrollHeight>i.clientHeight||n&&i.scrollWidth>i.clientWidth)){var r=getComputedStyle(i),o=r.overflowY;if("auto"===o||"scroll"===o)return!0;if(n){var a=r.overflowX;if("auto"===a||"scroll"===a)return!0}}i=i.parentNode}return!1}function ak(e){var t=e.frameElement;if(!t)return null;for(var n={x:0,y:0,scale:1,win:e};null!==t;){var i=t.getBoundingClientRect(),r=i.width/t.clientWidth;n.scale*=r,n.x=n.x*r+i.x,n.y=n.y*r+i.y,n.win=t.win,t=t.win.frameElement}return n}function sk(e,t){var n=ak(t);if(n){var i=n.scale,r=n.x,o=n.y;return{rect:{left:e.left*i+r,right:e.right*i+r,top:e.top*i+o,bottom:e.bottom*i+o},win:n.win}}return{rect:e,win:t}}function lk(e,t){var n=0,i=e.win;e.addEventListener("mousedown",(function(e){e.detail>1&&i.clearTimeout(n)})),e.addEventListener("click",(function(r){if(!(r.defaultPrevented||r.detail>1||r.shiftKey)){var o=i.getSelection();if(o.rangeCount>0)for(var a=0;a<o.rangeCount;a++){if(((d=o.getRangeAt(a)).startContainer!==d.endContainer||d.startOffset!==d.endOffset)&&(e.contains(d.startContainer)||e.contains(d.endContainer)))return}var s=!1,l=r.targetNode;if(l&&l.instanceOf(Element)){var c=r.clientX,u=r.clientY;for(a=0;a<l.childNodes.length;a++){var h=l.childNodes[a];if(h.nodeType===Node.TEXT_NODE){var d;(d=new Range).setStart(h,0),d.setEnd(h,h.textContent.length);for(var p=d.getClientRects(),f=0;f<p.length;f++){var m=p[f];if(m.x<=c&&c<=m.x+m.width&&m.y<=u&&u<=m.y+m.height){s=!0;break}}if(s)break}}}i=r.win,n=i.setTimeout((function(){r.defaultPrevented||(r.preventDefault(),t(r))}),s?150:10)}}))}function ck(e,t){var n;e.focus();var i=e.win,r=Hw(e,t.from,null!==(n=t.to)&&void 0!==n?n:t.from),o=i.getSelection();o&&(o.removeAllRanges(),o.addRange(r))}function uk(e,t){if(void 0===t&&(t=!1),e.normalize(),1!==e.childNodes.length||e.firstChild.nodeType!==Node.TEXT_NODE){var n=t?e.textContent:e.getText();e.textContent=n,e.isActiveElement()&&Sw(e,!1)}}function hk(e,t){t.preventDefault();var n=t.clipboardData.getData("text/plain"),i=e.doc;if(i.queryCommandSupported("insertText"))i.execCommand("insertText",!1,n);else{var r=window.getSelection(),o=r.getRangeAt(0);if(!e.contains(o.commonAncestorContainer))return;o.deleteContents();var a=document.createTextNode(n);o.insertNode(a),o.selectNodeContents(a),o.collapse(!1),r.removeAllRanges(),r.addRange(o)}e.normalize()}function dk(e){return!!e&&("INPUT"===e.nodeName||!(!e.instanceOf(HTMLElement)||"true"!==e.contentEditable))}var pk=16*devicePixelRatio;function fk(e,t,n,i){void 0===i&&(i=2);var r=e.getBoundingClientRect(),o=Math.min(r.height/3,pk),a=Math.min(r.width/3,pk),s=!1,l=t.y;l<r.top+o?(e.scrollTop-=i*n*(r.top+o-l)/o,s=!0):l>r.bottom-o&&(e.scrollTop+=i*n*(l-(r.bottom-o))/o,s=!0);var c=t.x;return c<r.left+a?(e.scrollLeft-=i*n*(r.left+a-c)/a,s=!0):c>r.right-a&&(e.scrollLeft+=i*n*(c-(r.right-a))/a,s=!0),s}var mk=function(){};function vk(e,t,n){if(void 0===n&&(n=5),!e.isPrimary)return mk;var i=null;if(0===n&&!(i=t()))return mk;var r=e.view,o=Bl(e),a=function(r){if(r.pointerId===e.pointerId){if(!i){if(Hl(o,Bl(r))<n)return;if(!(i=t()))return void p()}i&&i.move&&i.move(r)}},s=function(t){t.button===e.button&&t.pointerId===e.pointerId&&(p(),i&&i.end&&i.end(t))},l=function(t){t.button===e.button&&t.pointerId===e.pointerId&&(p(),i&&i.cancel&&i.cancel())},c=function(e){p(),i&&i.end&&i.end(e)},u=function(){p(),i&&i.cancel&&i.cancel()},h=function(e){"Escape"===e.key&&(p(),i&&i.cancel&&i.cancel()),i&&i.keydown&&i.keydown(e)},d=function(e){i&&i.keyup&&i.keyup(e)},p=function(){r.removeEventListener("pointermove",a),r.removeEventListener("pointerup",s),r.removeEventListener("pointercancel",l),r.removeEventListener("dragstart",c),r.removeEventListener("drop",c),r.removeEventListener("contextmenu",u),window.removeEventListener("keydown",h),window.removeEventListener("keyup",d),i&&i.cleanup&&i.cleanup()};return r.addEventListener("pointermove",a),r.addEventListener("pointerup",s),r.addEventListener("pointercancel",l),r.addEventListener("dragstart",c),r.addEventListener("drop",c),r.addEventListener("contextmenu",u),window.addEventListener("keydown",h),window.addEventListener("keyup",d),p}function gk(e,t){var n=e.win,i=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},r=n.setTimeout((function(){e.removeEventListener(t,i,{capture:!0}),n.clearTimeout(r)}),0);e.addEventListener(t,i,{capture:!0})}function yk(e){for(var t,n=e.doc.createNodeIterator(e,NodeFilter.SHOW_TEXT);t=n.nextNode();){var i=Ew(t.nodeValue);if("auto"!==i)return i}return"auto"}function bk(e){var t=null;return function(){return t||(t=e(),e=null),t.cloneNode(!0)}}for(var wk={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",91:"OS",93:"ContextMenu",95:"Sleep",106:"*",107:"+",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},kk=1;kk<25;kk++)wk[111+kk]="F"+kk;for(kk=65;kk<91;kk++){var Ck=String.fromCharCode(kk);wk[kk]=Ck.toUpperCase()}for(kk=96;kk<106;kk++)wk[kk]="Numpad"+String.fromCharCode(kk-48);var Mk={ArrowLeft:"â†",ArrowRight:"â†’",ArrowUp:"â†‘",ArrowDown:"â†“"," ":"Space"};function Ek(e){var t=e.key;if(!t){var n=e.which||e.keyCode;t=wk[n]}return t}var Sk=Ul?{Mod:"âŒ˜",Ctrl:"âŒƒ",Meta:"âŒ˜",Alt:"âŒ¥",Shift:"â‡§"}:{Mod:"Ctrl",Ctrl:"Ctrl",Meta:"Win",Alt:"Alt",Shift:"Shift"},xk=["Mod","Ctrl","Meta","Alt","Shift"];var Tk=function(){function e(e){this.tabFocusContainerEl=null,this.keys=[],this.parent=e}return e.prototype.register=function(e,t,n){var i={scope:this,modifiers:e?Ak.compileModifiers(e):null,key:t,func:n};return this.keys.push(i),i},e.prototype.unregister=function(e){this.keys.remove(e)},e.prototype.setTabFocusContainerEl=function(e){this.tabFocusContainerEl=e},e.prototype.handleKey=function(e,t){for(var n=0,i=this.keys;n<i.length;n++){var r=i[n];if(Ak.isMatch(r,t)){var o=r.func(e,t);if(void 0!==o)return o;if(null!==r.key||null!==r.modifiers)return o}}if(this.parent)return this.parent.handleKey(e,t)},e}(),Dk=function(e){function t(t,n){var i=e.call(this,t)||this;return i.cb=n,i}return f(t,e),t.prototype.handleKey=function(t,n){var i=this.cb();return i?i.handleKey(t,n):e.prototype.handleKey.call(this,t,n)},t}(Tk),Ak=function(){function e(){this.modifiers="",this.rootScope=new Tk,this.scope=this.rootScope,this.prevScopes=[],window.addEventListener("keydown",this.onKeyEvent.bind(this),!0),window.addEventListener("focusin",this.onFocusIn.bind(this))}return e.init=function(){return e.global||(e.global=new e),e.global},e.prototype.getRootScope=function(){return this.rootScope},e.prototype.pushScope=function(e){this.scope!==e&&(this.prevScopes.push(this.scope),this.scope=e)},e.prototype.popScope=function(e){e!==this.rootScope&&(this.scope===e?this.scope=this.prevScopes.pop()||this.rootScope:this.prevScopes.remove(e))},e.prototype.onKeyEvent=function(t){this.updateModifiers(t);var n=this.scope;if(n){var i=Ek(t);if(!e.isModifierKey(i)){var r=function(e){var t=e.which||e.keyCode;return wk[t]||"Key"+t}(t);54===t.which&&"^"==t.key&&"KeyI"===t.code&&(r="KeyI");var o={modifiers:this.modifiers,key:i,vkey:r};return!1===n.handleKey(t,o)?(t.preventDefault(),t.stopPropagation(),!1):void 0}}},e.prototype.onFocusIn=function(e){var t=this,n=this.scope;if(n&&n.tabFocusContainerEl){var i=n.tabFocusContainerEl,r=e.targetNode;r&&r!==activeDocument.body&&r.instanceOf(Element)&&!i.contains(r)&&setTimeout((function(){if(t.scope===n&&!$w(i)){var e=activeDocument.activeElement;e&&e.instanceOf(HTMLElement)&&e.blur()}}),0)}},e.prototype.updateModifiers=function(t){this.modifiers=e.getModifiers(t)},e.getModifiers=function(t){var n=[];return t.ctrlKey&&n.push("Ctrl"),t.metaKey&&n.push("Meta"),t.altKey&&n.push("Alt"),t.shiftKey&&n.push("Shift"),e.compileModifiers(n)},e.compileModifiers=function(e){return e.map((function(e){return"Mod"===e?"macOS"===zl?"Meta":"Ctrl":e})).sort().join(",")},e.decompileModifiers=function(e){return e.split(",").map((function(e){return"macOS"===zl&&"Meta"===e||"macOS"!==zl&&"Ctrl"===e?"Mod":e})).filter((function(e){return e}))},e.isModifierKey=function(e){return"Control"===e||"Alt"===e||"Shift"===e||"OS"===e||"Meta"===e},e.prototype.matchModifiers=function(e){return this.modifiers===e},e.prototype.hasModifier=function(t){return e.decompileModifiers(this.modifiers).contains(t)},e.isModifier=function(e,t){return"Ctrl"===t?e.ctrlKey:"Meta"===t?e.metaKey:"Alt"===t?e.altKey:"Shift"===t?e.shiftKey:"Mod"===t&&("macOS"===zl?e.metaKey:e.ctrlKey)},e.isMatch=function(e,t){var n=e.modifiers,i=e.key;return(null===n||n===t.modifiers)&&(!i||(i===t.vkey||!(!t.key||i.toLowerCase()!==t.key.toLowerCase())))},e.isModEvent=function(t){return!!t&&(function(e){return(e.instanceOf(MouseEvent)||e.instanceOf(PointerEvent))&&1===e.button}(t)?"tab":!!e.isModifier(t,"Mod")&&(e.isModifier(t,"Alt")?e.isModifier(t,"Shift")?"window":"split":"tab"))},e}();function Lk(e,t){e.setData("text/plain",t)}function Pk(e,t){e.setData("text/plain",t),e.setData("text/uri-list",t)}function Ik(e){for(var t=0;t<e.items.length;t++){if("file"===e.items[t].kind)return!0}return!(!Zl.isIosApp||-1===e.types.indexOf("Files"))}function Fk(e,t,n){for(var i=[],r=0,o=Array.from(e.items);r<o.length;r++){var a=o[r];if("file"===a.kind)if(p=a.getAsFile()){var s=p.path||"",l=p.name,c=Qc(l),u=Xc(l),h=null;if(Zl.isDesktopApp&&electron.webUtils&&(s=electron.webUtils.getPathForFile(p)),!s){var d=p.type;"image/png"===d?(c="png",u="Pasted image"):"image/jpeg"===d&&(c="jpg",u="Pasted image")}n&&(h=s?Sf(s):wc(p)),i.push({name:u,filepath:s,extension:c,data:h})}}if("clipboard"===t&&0===i.length&&Zl.isDesktopApp&&!e.getData("text/plain")&&!Ak.global.hasModifier("Shift")){var p=function(){var e=Mf("electron");if(!e)return null;var t=e.remote.clipboard,n=t.readImage();if(n&&!n.isEmpty()){var i=uf(n.toPNG());return{name:"Pasted image",extension:"png",data:Promise.resolve(i)}}var r="";if("Windows"===zl?r=t.readBuffer("FileNameW").toString("ucs2").replace("\0",""):"macOS"===zl&&(r=t.read("public.file-url"))&&(r=r.replace("file://",""),r=decodeURI(r)),!r)return null;var o=Kc(tu(r)),a=Qc(o);return{filepath:r,name:Xc(o),extension:a,data:Sf(r)}}();p&&i.push(p)}return i}var Ok=n(9650),Bk=n.n(Ok),Nk=n(6658),Rk=n.n(Nk),Hk=n(4967),Vk=Bk(),zk=Hk.Parser,qk=function(){function e(){this.transformers=[]}return e.prototype.addTransformer=function(e){this.transformers.push(e)},e.prototype.removeTransformer=function(e){for(var t=this.transformers,n=0;n<t.length;)t[n]===e?t.splice(n,1):n++},e}();function Uk(e,t,n,i,r){i.locator=r;var o=e.prototype.inlineTokenizers,a=e.prototype.inlineMethods;o[t]=i,a.splice(a.indexOf(n),0,t)}function _k(e,t,n,i,r){i.locator=r;var o=e.prototype.blockTokenizers,a=e.prototype.blockMethods;o[t]=i,a.splice(a.indexOf(n),0,t)}function Wk(e,t,n){for(var i=0;i<e.length&&e[i][0]!==t;i++);e.splice(i+1,0,[n])}var jk=Rk();function Gk(e,t){var n=t.position.end,i=t.position.end,r=t.children;return r.length>0&&(n=r[0].position.start,i=r[r.length-1].position.end),e.substring(n.offset,i.offset).trim()}function Kk(e){return!(!e.startsWith("./")&&!e.startsWith("../"))||-1===e.indexOf(":")}function Yk(e){try{return new URL(e).toString()}catch(e){console.log(e)}try{return encodeURI(decodeURI(e))}catch(e){}return""}function Zk(e){if((e=e.trim()).startsWith("<")){var t=e.indexOf(">");if(-1!==t)return e.substring(1,t)}var n=/\s/.exec(e);return n?e.substring(0,n.index):e}var Xk=/\u00A0/g;function $k(e){try{return decodeURI(e)}catch(t){return e}}function Qk(e){return(t=e,t.replace(Xk," ")).trim().normalize("NFC");var t}function Jk(e){return e.replace(/[\\\x00\x08\x0B\x0C\x0E-\x1F ]/g,(function(e){return encodeURIComponent(e)}))}function eC(e){var t=e.match(/^#{1,6} (.*)/m);return null!==t?t[1]:null}function tC(e){return e.split("#").filter((function(e){return!!e})).join(" > ").trim()}function nC(e){var t="",n=e.indexOf("|"),i=n>0;return i?(t=e.substring(n+1).trim(),e=e.substring(0,n).trim()):t=tC(e=e.trim()),e.endsWith("\\")&&(e=e.substring(0,e.length-1)),{href:e=Qk(e),title:t,isAlias:i}}var iC=n(2292),rC=n.n(iC),oC=n(7497),aC=n.n(oC),sC=n(7074),lC=n.n(sC);const cC=Symbol.for("yaml.alias"),uC=Symbol.for("yaml.document"),hC=Symbol.for("yaml.map"),dC=Symbol.for("yaml.pair"),pC=Symbol.for("yaml.scalar"),fC=Symbol.for("yaml.seq"),mC=Symbol.for("yaml.node.type"),vC=e=>!!e&&"object"==typeof e&&e[mC]===cC,gC=e=>!!e&&"object"==typeof e&&e[mC]===uC,yC=e=>!!e&&"object"==typeof e&&e[mC]===hC,bC=e=>!!e&&"object"==typeof e&&e[mC]===dC,wC=e=>!!e&&"object"==typeof e&&e[mC]===pC,kC=e=>!!e&&"object"==typeof e&&e[mC]===fC;function CC(e){if(e&&"object"==typeof e)switch(e[mC]){case hC:case fC:return!0}return!1}function MC(e){if(e&&"object"==typeof e)switch(e[mC]){case cC:case hC:case pC:case fC:return!0}return!1}class EC{constructor(e){Object.defineProperty(this,mC,{value:e})}}const SC=Symbol("break visit"),xC=Symbol("skip children"),TC=Symbol("remove node");function DC(e,t){if(gC(e)){AC(null,e.contents,t,Object.freeze([e]))===TC&&(e.contents=null)}else AC(null,e,t,Object.freeze([]))}function AC(e,t,n,i){let r;if("function"==typeof n?r=n(e,t,i):yC(t)?n.Map&&(r=n.Map(e,t,i)):kC(t)?n.Seq&&(r=n.Seq(e,t,i)):bC(t)?n.Pair&&(r=n.Pair(e,t,i)):wC(t)?n.Scalar&&(r=n.Scalar(e,t,i)):vC(t)&&n.Alias&&(r=n.Alias(e,t,i)),MC(r)||bC(r)){const t=i[i.length-1];if(CC(t))t.items[e]=r;else if(bC(t))"key"===e?t.key=r:t.value=r;else{if(!gC(t)){const e=vC(t)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}t.contents=r}return AC(e,r,n,i)}if("symbol"!=typeof r)if(CC(t)){i=Object.freeze(i.concat(t));for(let e=0;e<t.items.length;++e){const r=AC(e,t.items[e],n,i);if("number"==typeof r)e=r-1;else{if(r===SC)return SC;r===TC&&(t.items.splice(e,1),e-=1)}}}else if(bC(t)){i=Object.freeze(i.concat(t));const e=AC("key",t.key,n,i);if(e===SC)return SC;e===TC&&(t.key=null);const r=AC("value",t.value,n,i);if(r===SC)return SC;r===TC&&(t.value=null)}return r}DC.BREAK=SC,DC.SKIP=xC,DC.REMOVE=TC;const LC={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class PC{constructor(e,t){this.marker=null,this.yaml=Object.assign({},PC.defaultYaml,e),this.tags=Object.assign({},PC.defaultTags,t)}atDocument(){const e=new PC(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:PC.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},PC.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:PC.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},PC.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,i]=n;return this.tags[e]=i,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,!0),!1)}default:return t(0,`Unknown directive ${i}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,i]=e.match(/^(.*!)([^!]*)$/);i||t(`The ${e} tag has no suffix`);const r=this.tags[n];return r?r+decodeURIComponent(i):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>LC[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let i;if(e&&n.length>0&&MC(e.contents)){const t={};DC(e.contents,((e,n)=>{MC(n)&&n.tag&&(t[n.tag]=!0)})),i=Object.keys(t)}else i=[];for(const[r,o]of n)"!!"===r&&"tag:yaml.org,2002:"===o||e&&!i.some((e=>e.startsWith(o)))||t.push(`%TAG ${r} ${o}`);return t.join("\n")}}function IC(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>IC(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n)return e.toJSON(t);const i=n.anchors&&n.anchors.get(e);i&&(n.onCreate=e=>{i.res=e,delete n.onCreate});const r=e.toJSON(t,n);return i&&n.onCreate&&n.onCreate(r),r}return n&&n.keep||"bigint"!=typeof e?e:Number(e)}PC.defaultYaml={explicit:!1,version:"1.2"},PC.defaultTags={"!!":"tag:yaml.org,2002:"};class FC extends EC{constructor(e){super(cC),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}toJSON(e,t){if(!t)return IC(this.source,"string"==typeof e?e:null,t);const{anchors:n,maxAliasCount:i}=t,r=n&&n.get(this.source);if(!r||void 0===r.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(i>=0&&(r.count+=1,0===r.aliasCount&&(r.aliasCount=OC(this.source,n)),r.count*r.aliasCount>i)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return r.res}toString({anchors:e,doc:t,implicitKey:n,inStringifyKey:i},r,o){let a=Object.keys(e).find((t=>e[t]===this.source));if(!a&&i&&(a=t.anchors.getName(this.source)||t.anchors.newName()),a)return`*${a}${n?" ":""}`;const s=t.anchors.getName(this.source)?"Alias node must be after source node":"Source node not found for alias node";throw new Error(`${s} [${this.range}]`)}}function OC(e,t){if(vC(e)){const n=t&&t.get(e.source);return n?n.count*n.aliasCount:0}if(CC(e)){let n=0;for(const i of e.items){const e=OC(i,t);e>n&&(n=e)}return n}if(bC(e)){const n=OC(e.key,t),i=OC(e.value,t);return Math.max(n,i)}return 1}const BC=e=>!e||"function"!=typeof e&&"object"!=typeof e;class NC extends EC{constructor(e){super(pC),this.value=e}toJSON(e,t){return t&&t.keep?this.value:IC(this.value,e,t)}toString(){return String(this.value)}}NC.BLOCK_FOLDED="BLOCK_FOLDED",NC.BLOCK_LITERAL="BLOCK_LITERAL",NC.PLAIN="PLAIN",NC.QUOTE_DOUBLE="QUOTE_DOUBLE",NC.QUOTE_SINGLE="QUOTE_SINGLE";function RC(e,t,n){var i,r;if(MC(e))return e;if(bC(e)){const t=null===(r=(i=n.schema.map).createNode)||void 0===r?void 0:r.call(i,n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"function"==typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{onAlias:o,onTagObj:a,prevObjects:s}=n,{map:l,seq:c,tags:u}=n.schema;t&&t.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let h=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),i=e.find((e=>!e.format))||e[0];if(!i)throw new Error(`Tag ${t} not found`);return i}return n.find((t=>t.identify&&t.identify(e)&&!t.format))}(e,t,u);if(!h){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e)return new NC(e);h=e instanceof Map?l:Symbol.iterator in Object(e)?c:l}a&&(a(h),delete n.onTagObj);const d={value:void 0,node:void 0};if(e&&"object"==typeof e){const t=s.get(e);if(t)return o(t);d.value=e,s.set(e,d)}const p=(null==h?void 0:h.createNode)?h.createNode(n.schema,e,n):new NC(e);return t&&(p.tag=t),d.node=p,p}function HC(e,t,n){return n?n.includes("\n")?`${e}\n`+n.replace(/^/gm,`${t||""}#`):e.endsWith(" ")?`${e}#${n}`:`${e} #${n}`:e}const VC="flow",zC="block",qC="quoted";function UC(e,t,n="flow",{indentAtStart:i,lineWidth:r=80,minContentWidth:o=20,onFold:a,onOverflow:s}={}){if(!r||r<0)return e;const l=Math.max(1+o,1+r-t.length);if(e.length<=l)return e;const c=[],u={};let h,d,p=r-t.length;"number"==typeof i&&(i>r-Math.max(2,o)?c.push(0):p=r-i);let f=!1,m=-1,v=-1,g=-1;n===zC&&(m=_C(e,m),-1!==m&&(p=m+l));for(let t;t=e[m+=1];){if(n===qC&&"\\"===t){switch(v=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}g=m}if("\n"===t)n===zC&&(m=_C(e,m)),p=m+l,h=void 0;else{if(" "===t&&d&&" "!==d&&"\n"!==d&&"\t"!==d){const t=e[m+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(h=m)}if(m>=p)if(h)c.push(h),p=h+l,h=void 0;else if(n===qC){for(;" "===d||"\t"===d;)d=t,t=e[m+=1],f=!0;const n=m>g+1?m-2:v-1;if(u[n])return e;c.push(n),u[n]=!0,p=n+l,h=void 0}else f=!0}d=t}if(f&&s&&s(),0===c.length)return e;a&&a();let y=e.slice(0,c[0]);for(let i=0;i<c.length;++i){const r=c[i],o=c[i+1]||e.length;0===r?y=`\n${t}${e.slice(0,o)}`:(n===qC&&u[r]&&(y+=`${e[r]}\\`),y+=`\n${t}${e.slice(r+1,o)}`)}return y}function _C(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const WC=e=>({indentAtStart:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),jC=e=>/^(%|---|\.\.\.)/m.test(e);function GC(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:i}=t,r=t.options.doubleQuotedMinMultiLineLength,o=t.indent||(jC(e)?"  ":"");let a="",s=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(a+=n.slice(s,e)+"\\ ",e+=1,s=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{a+=n.slice(s,e);const t=n.substr(e+2,4);switch(t){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:"00"===t.substr(0,2)?a+="\\x"+t.substr(2):a+=n.substr(e,6)}e+=5,s=e+1}break;case"n":if(i||'"'===n[e+2]||n.length<r)e+=1;else{for(a+=n.slice(s,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)a+="\n",e+=2;a+=o," "===n[e+2]&&(a+="\\"),e+=1,s=e+1}break;default:e+=1}return a=s?a+n.slice(s):n,i?a:UC(a,o,qC,WC(t))}function KC(e,t){if(t.implicitKey){if(/\n/.test(e))return GC(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return GC(e,t);const n=t.indent||(jC(e)?"  ":""),i="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?i:UC(i,n,VC,WC(t))}function YC({comment:e,type:t,value:n},i,r,o){if(/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return GC(n,i);const a=i.indent||(i.forceBlockIndent||jC(n)?"  ":""),s=a?"2":"1",l=t!==NC.BLOCK_FOLDED&&(t===NC.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const i=t-n,r=e.length;if(r<=i)return!1;for(let t=0,n=0;t<r;++t)if("\n"===e[t]){if(t-n>i)return!0;if(n=t+1,r-n<=i)return!1}return!0}(n,i.options.lineWidth,a.length));let c=l?"|":">";if(!n)return c+"\n";let u="",h="";if(n=n.replace(/[\n\t ]*$/,(e=>{const t=e.indexOf("\n");return-1===t?c+="-":n!==e&&t===e.length-1||(c+="+",o&&o()),h=e.replace(/\n$/,""),""})).replace(/^[\n ]*/,(e=>{-1!==e.indexOf(" ")&&(c+=s);const t=e.match(/ +$/);return t?(u=e.slice(0,-t[0].length),t[0]):(u=e,"")})),h&&(h=h.replace(/\n+(?!\n|$)/g,`$&${a}`)),u&&(u=u.replace(/\n+/g,`$&${a}`)),e&&(c+=" #"+e.replace(/ ?[\r\n]+/g," "),r&&r()),!n)return`${c}${s}\n${a}${h}`;if(l)return n=n.replace(/\n+/g,`$&${a}`),`${c}\n${a}${u}${n}${h}`;n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`);const d=UC(`${u}${n}${h}`,a,zC,WC(i));return`${c}\n${a}${d}`}function ZC(e,t,n,i){const{implicitKey:r,inFlow:o}=t,a="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:s}=e;s!==NC.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(s=NC.QUOTE_DOUBLE);const l=e=>{switch(e){case NC.BLOCK_FOLDED:case NC.BLOCK_LITERAL:return r||o?GC(a.value,t):YC(a,t,n,i);case NC.QUOTE_DOUBLE:return GC(a.value,t);case NC.QUOTE_SINGLE:return KC(a.value,t);case NC.PLAIN:return function(e,t,n,i){var r;const{comment:o,type:a,value:s}=e,{actualString:l,implicitKey:c,indent:u,inFlow:h}=t;if(c&&/[\n[\]{},]/.test(s)||h&&/[[\]{},]/.test(s))return GC(s,t);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s)){const r=-1!==s.indexOf('"'),o=-1!==s.indexOf("'");let a;return a=r&&!o?KC:o&&!r?GC:t.options.singleQuote?KC:GC,c||h||-1===s.indexOf("\n")?a(s,t):YC(e,t,n,i)}if(!c&&!h&&a!==NC.PLAIN&&-1!==s.indexOf("\n"))return YC(e,t,n,i);if(""===u&&jC(s))return t.forceBlockIndent=!0,YC(e,t,n,i);const d=s.replace(/\n+/g,`$&\n${u}`);if(l)for(const e of t.doc.schema.tags)if(e.default&&"tag:yaml.org,2002:str"!==e.tag&&(null===(r=e.test)||void 0===r?void 0:r.test(d)))return GC(s,t);const p=c?d:UC(d,u,VC,WC(t));return!o||h||-1===p.indexOf("\n")&&-1===o.indexOf("\n")?p:(n&&n(),function(e,t,n){return n?`#${n.replace(/[\s\S]^/gm,`$&${t}#`)}\n${t}${e}`:e}(p,u,o))}(a,t,n,i);default:return null}};let c=l(s);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,i=r&&e||n;if(c=l(i),null===c)throw new Error(`Unsupported default string type ${i}`)}return c}const XC=(e,t)=>({anchors:Object.create(null),doc:e,indent:"",indentStep:"number"==typeof t.indent?" ".repeat(t.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true"},t)});function $C(e,t,n,i){if(bC(e))return e.toString(t,n,i);if(vC(e))return e.toString(t);let r;const o=MC(e)?e:t.doc.createNode(e,{onTagObj:e=>r=e});r||(r=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))||n[0]}let n,i;if(wC(t)){i=t.value;const r=e.filter((e=>e.identify&&e.identify(i)));n=r.find((e=>e.format===t.format))||r.find((e=>!e.format))}else i=t,n=e.find((e=>e.nodeClass&&i instanceof e.nodeClass));if(!n){const e=i&&i.constructor?i.constructor.name:typeof i;throw new Error(`Tag not resolved for ${e} value`)}return n}(t.doc.schema.tags,o));const a=function(e,t,{anchors:n,doc:i}){const r=[],o=i.anchors.getName(e);return o&&(n[o]=e,r.push(`&${o}`)),e.tag?r.push(i.directives.tagString(e.tag)):t.default||r.push(i.directives.tagString(t.tag)),r.join(" ")}(o,r,t);a.length>0&&(t.indentAtStart=(t.indentAtStart||0)+a.length+1);const s="function"==typeof r.stringify?r.stringify(o,t,n,i):wC(o)?ZC(o,t,n,i):o.toString(t,n,i);return a?wC(o)||"{"===s[0]||"["===s[0]?`${a} ${s}`:`${a}\n${t.indent}${s}`:s}function QC(e,t,n){let i=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=i,i=e}else{const e={};Object.defineProperty(e,"symbol"==typeof n?n:String(n),{value:i,writable:!0,enumerable:!0,configurable:!0}),i=e}}return RC(i,void 0,{onAlias(){throw new Error("Repeated objects are not supported here")},prevObjects:new Map,schema:e})}const JC=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class eM extends EC{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}addIn(e,t){if(JC(e))this.add(t);else{const[n,...i]=e,r=this.get(n,!0);if(CC(r))r.addIn(i,t);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`);this.set(n,QC(this.schema,i,t))}}}deleteIn([e,...t]){if(0===t.length)return this.delete(e);const n=this.get(e,!0);if(CC(n))return n.deleteIn(t);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`)}getIn([e,...t],n){const i=this.get(e,!0);return 0===t.length?!n&&wC(i)?i.value:i:CC(i)?i.getIn(t,n):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!t||MC(t))return!1;const n=t.value;return null==n||e&&wC(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn([e,...t]){if(0===t.length)return this.has(e);const n=this.get(e,!0);return!!CC(n)&&n.hasIn(t)}setIn([e,...t],n){if(0===t.length)this.set(e,n);else{const i=this.get(e,!0);if(CC(i))i.setIn(t,n);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`);this.set(e,QC(this.schema,t,n))}}}_toString(e,{blockItem:t,flowChars:n,itemIndent:i},r,o){const{indent:a,indentStep:s}=e,l=this.flow||e.inFlow;l&&(i+=s),e=Object.assign({},e,{indent:i,inFlow:l,type:null});let c=!1,u=!1;const h=this.items.reduce(((t,n,r)=>{let o=null;if(MC(n)||bC(n)){if(!c&&n.spaceBefore&&t.push({type:"comment",str:""}),n.commentBefore)for(const e of n.commentBefore.match(/^.*$/gm))t.push({type:"comment",str:`#${e}`});n.comment&&(o=n.comment);const e=n;l&&(!c&&n.spaceBefore||n.commentBefore||n.comment||e.key&&(e.key.commentBefore||e.key.comment)||e.value&&(e.value.commentBefore||e.value.comment))&&(u=!0)}c=!1;let a=$C(n,e,(()=>o=null),(()=>c=!0));return l&&!u&&a.includes("\n")&&(u=!0),l&&r<this.items.length-1&&(a+=","),a=HC(a,i,o),c&&(o||l)&&(c=!1),t.push({type:"item",str:a}),t}),[]);let d;if(0===h.length)d=n.start+n.end;else if(l){const{start:e,end:t}=n,i=h.map((e=>e.str));if(u||i.reduce(((e,t)=>e+t.length+2),2)>eM.maxFlowStringSingleLineLength){d=e;for(const e of i)d+=e?`\n${s}${a}${e}`:"\n";d+=`\n${a}${t}`}else d=`${e} ${i.join(" ")} ${t}`}else{const e=h.map(t);d=e.shift()||"";for(const t of e)d+=t?`\n${a}${t}`:"\n"}return this.comment?(d+="\n"+this.comment.replace(/^/gm,`${a}#`),r&&r()):c&&o&&o(),d}}function tM(e,t){"debug"!==e&&"warn"!==e||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(t):console.warn(t))}function nM(e,t,n){const i=RC(e,void 0,n),r=RC(t,void 0,n);return new rM(i,r)}eM.maxFlowStringSingleLineLength=60;function iM(e,t,n){if(!vC(n)||!yC(n.source))throw new Error("Merge sources must be map aliases");const i=n.source.toJSON(null,e,Map);for(const[e,n]of i)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}class rM extends EC{constructor(e,t=null){super(dC),this.key=e,this.value=t}get commentBefore(){return MC(this.key)?this.key.commentBefore:void 0}set commentBefore(e){if(null==this.key&&(this.key=new NC(null)),!MC(this.key)){throw new Error("Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.")}this.key.commentBefore=e}get spaceBefore(){return MC(this.key)?this.key.spaceBefore:void 0}set spaceBefore(e){if(null==this.key&&(this.key=new NC(null)),!MC(this.key)){throw new Error("Pair.spaceBefore is an alias for Pair.key.spaceBefore. To set it, the key must be a Node.")}this.key.spaceBefore=e}addToJSMap(e,t){if(e&&e.doc.schema.merge&&(e=>e===rM.MERGE_KEY||wC(e)&&e.value===rM.MERGE_KEY&&(!e.type||e.type===NC.PLAIN))(this.key))if(kC(this.value))for(const n of this.value.items)iM(e,t,n);else if(Array.isArray(this.value))for(const n of this.value)iM(e,t,n);else iM(e,t,this.value);else{const n=IC(this.key,"",e);if(t instanceof Map){const i=IC(this.value,n,e);t.set(n,i)}else if(t instanceof Set)t.add(n);else{const i=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(MC(e)&&n&&n.doc){const t=XC(n.doc,{});t.inFlow=!0,t.inStringifyKey=!0;const i=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(i);e.length>40&&(e=e.substring(0,36)+'..."'),tM(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(t)}(this.key,n,e),r=IC(this.value,i,e);i in t?Object.defineProperty(t,i,{value:r,writable:!0,enumerable:!0,configurable:!0}):t[i]=r}}return t}toJSON(e,t){const n=t&&t.mapAsMap?new Map:{};return this.addToJSMap(t,n)}toString(e,t,n){if(!e||!e.doc)return JSON.stringify(this);const{allNullValues:i,doc:r,indent:o,indentStep:a,options:{indentSeq:s,simpleKeys:l}}=e;let{key:c,value:u}=this,h=MC(c)&&c.comment||null;if(l){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(CC(c)){throw new Error("With simple keys, collection cannot be used as a key value")}}let d=!l&&(!c||h&&null==u||CC(c)||(wC(c)?c.type===NC.BLOCK_FOLDED||c.type===NC.BLOCK_LITERAL:"object"==typeof c));e=Object.assign({},e,{allNullValues:!1,implicitKey:!d&&(l||!i),indent:o+a});let p=!1,f=$C(c,e,(()=>h=null),(()=>p=!0));if(!d&&!e.inFlow&&f.length>1024){if(l)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(i&&(!l||e.inFlow)||null==u&&(d||e.inFlow))return f=HC(f,e.indent,h),this.comment?(h&&!this.comment.includes("\n")?f+=`\n${e.indent||""}#${this.comment}`:f=HC(f,e.indent,this.comment),t&&t()):p&&!h&&n&&n(),e.inFlow&&!d?f:`? ${f}`;f=d?`? ${HC(f,e.indent,h)}\n${o}:`:HC(`${f}:`,e.indent,h),this.comment&&(!h||d||this.comment.includes("\n")?f=HC(f,e.indent,this.comment):f+=`\n${e.indent||""}#${this.comment}`,t&&t());let m="",v=null;if(MC(u)){if(u.spaceBefore&&(m="\n"),u.commentBefore){m+=`\n${u.commentBefore.replace(/^/gm,`${e.indent}#`)}`}v=u.comment}else u&&"object"==typeof u&&(u=r.createNode(u));e.implicitKey=!1,d||h||this.comment||!wC(u)||(e.indentAtStart=f.length+1),p=!1,s||!(a.length>=2)||e.inFlow||d||!kC(u)||u.flow||u.tag||r.anchors.getName(u)||(e.indent=e.indent.substr(2));const g=$C(u,e,(()=>v=null),(()=>p=!0));let y=" ";if(m||h||this.comment)y=`${m}\n${e.indent}`;else if(!d&&CC(u)){("["===g[0]||"{"===g[0])&&!g.includes("\n")||(y=`\n${e.indent}`)}else"\n"===g[0]&&(y="");return p&&!v&&n&&n(),HC(f+y+g,e.indent,v)}}rM.MERGE_KEY="<<";const oM={anchorPrefix:"a",intAsBigInt:!1,keepUndefined:!1,logLevel:"warn",prettyErrors:!0,strict:!0,version:"1.2"};class aM extends eM{constructor(e){super(fC,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){const t=sM(e);if("number"!=typeof t)return!1;return this.items.splice(t,1).length>0}get(e,t){const n=sM(e);if("number"!=typeof n)return;const i=this.items[n];return!t&&wC(i)?i.value:i}has(e){const t=sM(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=sM(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[n];wC(i)&&BC(t)?i.value=t:this.items[n]=t}toJSON(e,t){const n=[];t&&t.onCreate&&t.onCreate(n);let i=0;for(const e of this.items)n.push(IC(e,String(i++),t));return n}toString(e,t,n){return e?super._toString(e,{blockItem:e=>"comment"===e.type?e.str:`- ${e.str}`,flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  "},t,n):JSON.stringify(this)}}function sM(e){let t=wC(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}class lM{constructor(e){this.map=Object.create(null),this.prefix=e}createAlias(e,t){return this.setAnchor(e,t),new FC(e)}createMergePair(...e){const t=new NC(rM.MERGE_KEY),n=e.map((e=>{if(vC(e)){if(yC(e.source))return e}else if(yC(e))return this.createAlias(e);throw new Error("Merge sources must be Map nodes or their Aliases")}));if(1===n.length)return new rM(t,n[0]);const i=new aM;return i.items=n,new rM(t,i)}getName(e){return Object.keys(this.map).find((t=>this.map[t]===e))}getNames(){return Object.keys(this.map)}getNode(e){return this.map[e]}newName(e){e||(e=this.prefix);const t=Object.keys(this.map);for(let n=1;;++n){const i=`${e}${n}`;if(!t.includes(i))return i}}setAnchor(e,t){const{map:n}=this;if(!e)return t?(delete n[t],t):null;if(!wC(e)&&!CC(e))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(t){if(/[\x00-\x19\s,[\]{}]/.test(t))throw new Error("Anchor names must not contain whitespace or control characters");const i=n[t];i&&i!==e&&(n[this.newName(t)]=i)}const i=Object.keys(n).find((t=>n[t]===e));if(i){if(!t||i===t)return i;delete n[i]}else t||(t=this.newName());return n[t]=e,t}}function cM({format:e,minFractionDigits:t,tag:n,value:i}){if("bigint"==typeof i)return String(i);const r="number"==typeof i?i:Number(i);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let o=JSON.stringify(i);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let e=o.indexOf(".");e<0&&(e=o.length,o+=".");let n=t-(o.length-e-1);for(;n-- >0;)o+="0"}return o}function uM(e,t){const n=wC(t)?t.value:t;for(const i of e)if(bC(i)){if(i.key===t||i.key===n)return i;if(wC(i.key)&&i.key.value===n)return i}}class hM extends eM{constructor(e){super(hC,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,t){let n;n=bC(e)?e:new rM(e&&"object"==typeof e&&"key"in e?e.key:e,e.value);const i=uM(this.items,n.key),r=this.schema&&this.schema.sortMapEntries;if(i){if(!t)throw new Error(`Key ${n.key} already set`);wC(i.value)&&BC(n.value)?i.value.value=n.value:i.value=n.value}else if(r){const e=this.items.findIndex((e=>r(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=uM(this.items,e);if(!t)return!1;return this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=uM(this.items,e),i=n&&n.value;return!t&&wC(i)?i.value:i}has(e){return!!uM(this.items,e)}set(e,t){this.add(new rM(e,t),!0)}toJSON(e,t,n){const i=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(i);for(const e of this.items)e.addToJSMap(t,i);return i}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!bC(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),super._toString(e,{blockItem:e=>e.str,flowChars:{start:"{",end:"}"},itemIndent:e.indent||""},t,n)}}const dM={collection:"map",createNode:function(e,t,n){const{keepUndefined:i,replacer:r}=n,o=new hM(e),a=(e,a)=>{if("function"==typeof r)a=r.call(t,e,a);else if(Array.isArray(r)&&!r.includes(e))return;(void 0!==a||i)&&o.items.push(nM(e,a,n))};if(t instanceof Map)for(const[e,n]of t)a(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))a(e,t[e]);return"function"==typeof e.sortMapEntries&&o.items.sort(e.sortMapEntries),o},default:!0,nodeClass:hM,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(yC(e)||t("Expected a mapping for this tag"),e)};const pM={collection:"seq",createNode:function(e,t,n){const{replacer:i}=n,r=new aM(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let o of t){if("function"==typeof i){const n=t instanceof Set?o:String(e++);o=i.call(t,n,o)}r.items.push(RC(o,void 0,n))}}return r},default:!0,nodeClass:aM,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(kC(e)||t("Expected a sequence for this tag"),e)},fM=[dM,pM,{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,i)=>ZC(e,t=Object.assign({actualString:!0},t),n,i)}],mM=e=>"bigint"==typeof e||Number.isInteger(e),vM=(e,t,n,{intAsBigInt:i})=>i?BigInt(e):parseInt(e.substring(t),n);function gM(e,t,n){const{value:i}=e;return mM(i)&&i>=0?n+i.toString(t):cM(e)}const yM={identify:e=>null==e,createNode:()=>new NC(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new NC(null),stringify:({source:e},t)=>e&&yM.test.test(e)?e:t.options.nullStr},bM={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new NC("t"===e[0]||"T"===e[0]),stringify({source:e,value:t},n){if(e&&bM.test.test(e)){if(t===("t"===e[0]||"T"===e[0]))return e}return t?n.options.trueStr:n.options.falseStr}},wM={identify:e=>mM(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>vM(e,2,8,n),stringify:e=>gM(e,8,"0o")},kM={identify:mM,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>vM(e,0,10,n),stringify:cM},CM={identify:e=>mM(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>vM(e,2,16,n),stringify:e=>gM(e,16,"0x")},MM={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:cM},EM={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify:({value:e})=>Number(e).toExponential()},SM={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new NC(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:cM},xM=fM.concat([yM,bM,wM,kM,CM,MM,EM,SM]);function TM(e){return"bigint"==typeof e||Number.isInteger(e)}const DM=({value:e})=>JSON.stringify(e),AM=[dM,pM].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:DM},{identify:e=>null==e,createNode:()=>new NC(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:DM},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:DM},{identify:TM,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>TM(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:DM}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),LM={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof Buffer)return Buffer.from(e,"base64");if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},i,r,o){const a=n;let s;if("function"==typeof Buffer)s=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<a.length;++t)e+=String.fromCharCode(a[t]);s=btoa(e)}}if(t||(t=NC.BLOCK_LITERAL),t!==NC.QUOTE_DOUBLE){const e=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),n=Math.ceil(s.length/e),r=new Array(n);for(let t=0,i=0;t<n;++t,i+=e)r[t]=s.substr(i,e);s=r.join(t===NC.BLOCK_LITERAL?"\n":" ")}return ZC({comment:e,type:t,value:s},i,r,o)}};function PM(e,t){if(kC(e))for(let n=0;n<e.items.length;++n){let i=e.items[n];if(!bC(i)){if(yC(i)){i.items.length>1&&t("Each pair must have its own sequence indicator");const e=i.items[0]||new rM(null);i.commentBefore&&(e.commentBefore=e.commentBefore?`${i.commentBefore}\n${e.commentBefore}`:i.commentBefore),i.comment&&(e.comment=e.comment?`${i.comment}\n${e.comment}`:i.comment),i=e}e.items[n]=bC(i)?i:new rM(i)}}else t("Expected a sequence for this tag");return e}function IM(e,t,n){const{replacer:i}=n,r=new aM(e);r.tag="tag:yaml.org,2002:pairs";let o=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let a,s;if("function"==typeof i&&(e=i.call(t,String(o++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);a=e[0],s=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected { key: value } tuple: ${e}`);a=t[0],s=e[a]}else a=e;r.items.push(nM(a,s,n))}return r}const FM={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:PM,createNode:IM};class OM extends aM{constructor(){super(),this.add=hM.prototype.add.bind(this),this.delete=hM.prototype.delete.bind(this),this.get=hM.prototype.get.bind(this),this.has=hM.prototype.has.bind(this),this.set=hM.prototype.set.bind(this),this.tag=OM.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t&&t.onCreate&&t.onCreate(n);for(const e of this.items){let i,r;if(bC(e)?(i=IC(e.key,"",t),r=IC(e.value,i,t)):i=IC(e,"",t),n.has(i))throw new Error("Ordered maps must not include duplicate keys");n.set(i,r)}return n}}OM.tag="tag:yaml.org,2002:omap";const BM={collection:"seq",identify:e=>e instanceof Map,nodeClass:OM,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=PM(e,t),i=[];for(const{key:e}of n.items)wC(e)&&(i.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):i.push(e.value));return Object.assign(new OM,n)},createNode(e,t,n){const i=IM(e,t,n),r=new OM;return r.items=i.items,r}};class NM extends hM{constructor(e){super(e),this.tag=NM.tag}add(e){let t;t=bC(e)?e:"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new rM(e.key,null):new rM(e,null);uM(this.items,t.key)||this.items.push(t)}get(e,t){const n=uM(this.items,e);return!t&&bC(n)?wC(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=uM(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new rM(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}}NM.tag="tag:yaml.org,2002:set";const RM={collection:"map",identify:e=>e instanceof Set,nodeClass:NM,default:!1,tag:"tag:yaml.org,2002:set",resolve(e,t){if(yC(e)){if(e.hasAllNullValues(!0))return Object.assign(new NM,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e},createNode(e,t,n){const{replacer:i}=n,r=new NM(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof i&&(e=i.call(t,e,e)),r.items.push(nM(e,null,n));return r}};function HM(e,t){const n=e[0],i="-"===n||"+"===n?e.substring(1):e,r=e=>t?BigInt(e):Number(e),o=i.replace(/_/g,"").split(":").reduce(((e,t)=>e*r(60)+r(t)),r(0));return"-"===n?r(-1)*o:o}function VM(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return cM(e);let i="";t<0&&(i="-",t*=n(-1));const r=n(60),o=[t%r];return t<60?o.unshift(0):(t=(t-o[0])/r,o.unshift(t%r),t>=60&&(t=(t-o[0])/r,o.unshift(t))),i+o.map((e=>e<10?"0"+String(e):String(e))).join(":").replace(/000000\d*$/,"")}const zM={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>HM(e,n),stringify:VM},qM={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>HM(e,!1),stringify:VM},UM={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(UM.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,i,r,o,a,s]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(n,i-1,r,o||0,a||0,s||0,l);const u=t[8];if(u&&"Z"!==u){let e=HM(u,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},_M={identify:e=>null==e,createNode:()=>new NC(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new NC(null),stringify:({source:e},t)=>e&&_M.test.test(e)?e:t.options.nullStr};function WM({value:e,source:t},n){return t&&(e?jM:GM).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const jM={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new NC(!0),stringify:WM},GM={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new NC(!1),stringify:WM},KM=e=>"bigint"==typeof e||Number.isInteger(e);function YM(e,t,n,{intAsBigInt:i}){const r=e[0];if("-"!==r&&"+"!==r||(t+=1),e=e.substring(t).replace(/_/g,""),i){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===r?BigInt(-1)*t:t}const o=parseInt(e,n);return"-"===r?-1*o:o}function ZM(e,t,n){const{value:i}=e;if(KM(i)){const e=i.toString(t);return i<0?"-"+n+e.substr(1):n+e}return cM(e)}const XM=fM.concat([_M,jM,GM,{identify:KM,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>YM(e,2,2,n),stringify:e=>ZM(e,2,"0b")},{identify:KM,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>YM(e,1,8,n),stringify:e=>ZM(e,8,"0")},{identify:KM,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>YM(e,0,10,n),stringify:cM},{identify:KM,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>YM(e,2,16,n),stringify:e=>ZM(e,16,"0x")},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:cM},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify:({value:e})=>Number(e).toExponential()},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new NC(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const i=e.substring(n+1).replace(/_/g,"");"0"===i[i.length-1]&&(t.minFractionDigits=i.length)}return t},stringify:cM}],LM,BM,FM,RM,zM,qM,UM),$M={core:xM,failsafe:fM,json:AM,yaml11:XM},QM={binary:LM,bool:bM,float:SM,floatExp:EM,floatNaN:MM,floatTime:qM,int:kM,intHex:CM,intOct:wM,intTime:zM,map:dM,null:yM,omap:BM,pairs:FM,seq:pM,set:RM,timestamp:UM};const JM=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0,eE={"tag:yaml.org,2002:binary":QM.binary,"tag:yaml.org,2002:omap":QM.omap,"tag:yaml.org,2002:pairs":QM.pairs,"tag:yaml.org,2002:set":QM.set,"tag:yaml.org,2002:timestamp":QM.timestamp};class tE{constructor({customTags:e,merge:t,resolveKnownTags:n,schema:i,sortMapEntries:r}){this.map=QM.map,this.seq=QM.seq,this.merge=!!t,this.name=i||"core",this.knownTags=n?eE:{},this.tags=function(e,t,n,i){let r=e[i.replace(/\W/g,"")];if(!r){const t=Object.keys(e).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${i}"; use one of ${t}`)}if(Array.isArray(n))for(const e of n)r=r.concat(e);else"function"==typeof n&&(r=n(r.slice()));return r.map((e=>{if("string"!=typeof e)return e;const n=t[e];if(n)return n;const i=Object.keys(t).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${i}`)}))}($M,QM,e,this.name),this.sortMapEntries=!0===r?JM:r||null}}function nE(e,t,n,i){if(i&&"object"==typeof i)if(Array.isArray(i))for(let t=0,n=i.length;t<n;++t){const n=i[t],r=nE(e,i,String(t),n);void 0===r?delete i[t]:r!==n&&(i[t]=r)}else if(i instanceof Map)for(const t of Array.from(i.keys())){const n=i.get(t),r=nE(e,i,t,n);void 0===r?i.delete(t):r!==n&&i.set(t,r)}else if(i instanceof Set)for(const t of Array.from(i)){const n=nE(e,i,t,t);void 0===n?i.delete(t):n!==t&&(i.delete(t),i.add(n))}else for(const[t,n]of Object.entries(i)){const r=nE(e,i,t,n);void 0===r?delete i[t]:r!==n&&(i[t]=r)}return e.call(t,n,i)}class iE{constructor(e,t,n){let i;this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,mC,{value:uC}),"function"==typeof t||Array.isArray(t)?i=t:void 0===n&&t&&(n=t,t=void 0);const r=Object.assign({},oM,n);this.options=r,this.anchors=new lM(this.options.anchorPrefix);let{version:o}=r;(null==n?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new PC({version:o}),this.setSchema(o,n),this.contents=void 0===e?null:this.createNode(e,{replacer:i})}add(e){rE(this.contents)&&this.contents.add(e)}addIn(e,t){rE(this.contents)&&this.contents.addIn(e,t)}createNode(e,{flow:t,keepUndefined:n,onTagObj:i,replacer:r,tag:o}={}){if("function"==typeof r)e=r.call({"":e},"",e);else if(Array.isArray(r)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,t=r.filter(e).map(String);t.length>0&&(r=r.concat(t))}"boolean"!=typeof n&&(n=!!this.options.keepUndefined);const a=[],s=RC(e,o,{keepUndefined:n,onAlias(e){const t=new FC(e);return a.push(t),t},onTagObj:i,prevObjects:new Map,replacer:r,schema:this.schema});for(const e of a){e.source=e.source.node;let t=this.anchors.getName(e.source);t||(t=this.anchors.newName(),this.anchors.map[t]=e.source)}return t&&CC(s)&&(s.flow=!0),s}createPair(e,t,n={}){const i=this.createNode(e,n),r=this.createNode(t,n);return new rM(i,r)}delete(e){return!!rE(this.contents)&&this.contents.delete(e)}deleteIn(e){return JC(e)?null!=this.contents&&(this.contents=null,!0):!!rE(this.contents)&&this.contents.deleteIn(e)}get(e,t){return CC(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return JC(e)?!t&&wC(this.contents)?this.contents.value:this.contents:CC(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!CC(this.contents)&&this.contents.has(e)}hasIn(e){return JC(e)?void 0!==this.contents:!!CC(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=QC(this.schema,[e],t):rE(this.contents)&&this.contents.set(e,t)}setIn(e,t){JC(e)?this.contents=t:null==this.contents?this.contents=QC(this.schema,Array.from(e),t):rE(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t){let n;switch(String(e)){case"1.1":this.directives.yaml.version="1.1",n=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},t);break;case"1.2":this.directives.yaml.version="1.2",n=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},t);break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${t}`)}}this.schema=new tE(n)}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:i,onAnchor:r,reviver:o}={}){const a=Object.values(this.anchors.map).map((e=>[e,{alias:[],aliasCount:0,count:1}])),s=a.length>0?new Map(a):null,l={anchors:s,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof i?i:100,stringify:$C},c=IC(this.contents,t||"",l);if("function"==typeof r&&s)for(const{count:e,res:t}of s.values())r(t,e);return"function"==typeof o?nE(o,{"":c},"",c):c}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}const t=[];let n=!0===e.directives;if(!1!==e.directives){const e=this.directives.toString(this);e?(t.push(e),n=!0):this.directives.marker&&(n=!0)}n&&t.push("---"),this.commentBefore&&(1!==t.length&&t.unshift(""),t.unshift(this.commentBefore.replace(/^/gm,"#")));const i=XC(this,e);let r=!1,o=null;if(this.contents){MC(this.contents)&&(this.contents.spaceBefore&&n&&t.push(""),this.contents.commentBefore&&t.push(this.contents.commentBefore.replace(/^/gm,"#")),i.forceBlockIndent=!!this.comment,o=this.contents.comment);const e=o?void 0:()=>r=!0;let a=$C(this.contents,i,(()=>o=null),e);o&&(a=HC(a,"",o)),"|"!==a[0]&&">"!==a[0]||"---"!==t[t.length-1]?t.push(a):t[t.length-1]=`--- ${a}`}else t.push($C(this.contents,i));return this.comment&&(r&&!o||""===t[t.length-1]||t.push(""),t.push(this.comment.replace(/^/gm,"#"))),t.join("\n")+"\n"}}function rE(e){if(CC(e))return!0;throw new Error("Expected a YAML collection as document contents")}class oE extends Error{constructor(e,t,n){if(!n)throw new Error(`Invalid arguments for new ${e}`);super(),this.name=e,this.message=n,this.offset=t}}class aE extends oE{constructor(e,t){super("YAMLParseError",e,t)}}class sE extends oE{constructor(e,t){super("YAMLWarning",e,t)}}const lE=(e,t)=>n=>{if(-1===n.offset)return;n.linePos=t.linePos(n.offset);const{line:i,col:r}=n.linePos;n.message+=` at line ${i}, column ${r}`;let o=r-1,a=e.substring(t.lineStarts[i-1],t.lineStarts[i]).replace(/[\n\r]+$/,"");if(o>=60&&a.length>80){const e=Math.min(o-39,a.length-79);a="â€¦"+a.substring(e),o-=e-1}if(a.length>80&&(a=a.substring(0,79)+"â€¦"),i>1&&/^ *$/.test(a.substring(0,o))){let n=e.substring(t.lineStarts[i-2],t.lineStarts[i-1]);n.length>80&&(n=n.substring(0,79)+"â€¦\n"),a=n+a}if(/[^ ]/.test(a)){const e=" ".repeat(o)+"^";n.message+=`:\n\n${a}\n${e}\n`}};function cE(e,t,n,i,r,o){let a=0,s=!1,l=n,c=n,u="",h=!1,d=!1,p="",f="",m="",v=null,g=null;for(const n of t){switch(n.type){case"space":l&&"doc-start"!==i&&"\t"===n.source[0]&&o(r+a,"Tabs are not allowed as indentation"),c=!0;break;case"comment":{e.options.strict&&!c&&o(r+a,"Comments must be separated from other tokens by white space characters");const t=n.source.substring(1);h?u+=p+t:u=t,h=!0,p="";break}case"newline":l&&!h&&(s=!0),l=!0,d=!0,c=!0,p+=n.source;break;case"anchor":f&&o(r+a,"A node can have at most one anchor"),f=n.source.substring(1),null===g&&(g=r+a),l=!1,c=!1;break;case"tag":{m&&o(r+a,"A node can have at most one tag");const t=e.directives.tagName(n.source,(e=>o(r,e)));t&&(m=t),null===g&&(g=r+a),l=!1,c=!1;break}case i:v={indent:n.indent,offset:r+a},l=!1,c=!1;break;default:o(r+a,`Unexpected ${n.type} token`),l=!1,c=!1}n.source&&(a+=n.source.length)}return{found:v,spaceBefore:s,comment:u,hasNewline:d,anchor:f,tagName:m,length:a,start:null!=g?g:r+a}}function uE(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":return e.source.includes("\n");case"flow-collection":for(const t of e.items)switch(t.type){case"newline":return!0;case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":case"flow-collection":if(uE(t))return!0}return!1;default:return!0}}const hE="All mapping items must start at the same column";function dE(e,t,n,i){let r="";if(e){let o=!1,a=!1,s="";for(const{source:l,type:c}of e){switch(c){case"space":o=!0;break;case"comment":{n&&!o&&i(t,"Comments must be separated from other tokens by white space characters");const e=l.substring(1);a?r+=s+e:r=e,a=!0,s="";break}case"newline":a&&(s+=l),o=!0;break;default:i(t,`Unexpected ${c} at node end`)}t+=l.length}}return{comment:r,offset:t}}function pE(e,t,n,i,r,o){let a;switch(n.type){case"block-map":a=function({composeNode:e,composeEmptyNode:t},n,{indent:i,items:r,offset:o},a,s){var l;const c=o,u=new hM(n.schema);a&&n.anchors.setAnchor(u,a);for(const{start:a,key:c,sep:h,value:d}of r){const r=cE(n,a,!0,"explicit-key-ind",o,s),p=!r.found;if(p){if(c&&("block-seq"===c.type?s(o,"A block sequence may not be used as an implicit map key"):"indent"in c&&c.indent!==i&&s(o,hE)),!r.anchor&&!r.tagName&&!h){r.comment&&(u.comment?u.comment+="\n"+r.comment:u.comment=r.comment);continue}}else(null===(l=r.found)||void 0===l?void 0:l.indent)!==i&&s(o,hE);o+=r.length,p&&uE(c)&&s(o,"Implicit keys need to be on a single line");const f=o,m=c?e(n,c,r,s):t(n,o,a,null,r,s);o=m.range[1];const v=cE(n,h||[],!c||"block-scalar"===c.type,"map-value-ind",o,s);if(o+=v.length,v.found){p&&("block-map"!==(null==d?void 0:d.type)||v.hasNewline||s(o,"Nested mappings are not allowed in compact mappings"),n.options.strict&&r.start<v.found.offset-1024&&s(o,"The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const i=d?e(n,d,v,s):t(n,o,h,null,v,s);o=i.range[1],u.items.push(new rM(m,i))}else p&&s(f,"Implicit map keys need to be followed by map values"),v.comment&&(m.comment?m.comment+="\n"+v.comment:m.comment=v.comment),u.items.push(new rM(m))}return u.range=[c,o],u}(e,t,n,i,o);break;case"block-seq":a=function({composeNode:e,composeEmptyNode:t},n,{items:i,offset:r},o,a){const s=r,l=new aM(n.schema);o&&n.anchors.setAnchor(l,o);for(const{start:o,value:s}of i){const i=cE(n,o,!0,"seq-item-ind",r,a);if(r+=i.length,!i.found){if(!(i.anchor||i.tagName||s)){i.comment&&(l.comment=i.comment);continue}a(r,s&&"block-seq"===s.type?"All sequence items must start at the same column":"Sequence item without - indicator")}const c=s?e(n,s,i,a):t(n,r,o,null,i,a);r=c.range[1],l.items.push(c)}return l.range=[s,r],l}(e,t,n,i,o);break;case"flow-collection":a=function({composeNode:e,composeEmptyNode:t},n,i,r,o){const a="{"===i.start.source,s=a?new hM(n.schema):new aM(n.schema);s.flow=!0,r&&n.anchors.setAnchor(s,r);let l=null,c=null,u=!1,h="",d=!1,p=!1,f="",m="",v="",g=i.offset+1,y=!1,b=!1,w=!1,k=!1,C=null;function M(){const e={spaceBefore:u,comment:h,anchor:m,tagName:v};return u=!1,h="",p=!1,f="",m="",v="",e}function E(e){if(c?p&&(c.comment=h):c=t(n,g,i.items,e,M(),o),a||b)s.items.push(l?new rM(l,c):new rM(c));else{const e=s;if(l){const t=new hM(n.schema);t.flow=!0,t.items.push(new rM(l,c)),e.items.push(t)}else e.items.push(c)}}for(let r=0;r<i.items.length;++r){const S=i.items[r];let x=!0;switch(S.type){case"space":d=!0;break;case"comment":{n.options.strict&&!d&&o(g,"Comments must be separated from other tokens by white space characters");const e=S.source.substring(1);p?h+=f+e:h=e,y=!1,p=!0,f="";break}case"newline":if(y&&!p&&(u=!0),w){if(p){let e=s.items[s.items.length-1];bC(e)&&(e=e.value||e.key),MC(e)?e.comment=h:o(g,"Error adding trailing comment to node"),h="",p=!1}w=!1}else f+=S.source,a||l||!c||(k=!0);y=!0,d=!0;break;case"anchor":m&&o(g,"A node can have at most one anchor"),m=S.source.substring(1),y=!1,w=!1,d=!1;break;case"tag":{v&&o(g,"A node can have at most one tag");const e=n.directives.tagName(S.source,(e=>o(g,e)));e&&(v=e),y=!1,w=!1,d=!1;break}case"explicit-key-ind":(m||v)&&o(g,"Anchors and tags must be after the ? indicator"),b=!0,y=!1,w=!1,d=!1;break;case"map-value-ind":if(l){if(c){o(g,"Missing {} around pair used as mapping key");const e=new hM(n.schema);e.flow=!0,e.items.push(new rM(l,c)),e.range=[l.range[0],c.range[1]],l=e,c=null}}else if(c){if(n.options.strict){const e="Implicit keys of flow sequence pairs need to be on a single line";if(k)o(g,e);else if(C){uE(C)&&o(g,e);const t="offset"in C&&C.offset;"number"==typeof t&&t<g-1024&&o(g,"The : indicator must be at most 1024 chars after the start of an implicit flow sequence key"),C=null}}l=c,c=null}else l=t(n,g,i.items,r,M(),o);p&&(l.comment=h,h="",p=!1),b=!1,w=!1,d=!1;break;case"comma":l||c||m||v||b?E(r):o(g,"Unexpected , in flow "+(a?"map":"sequence")),l=null,c=null,b=!1,w=!0,d=!1,k=!1,C=null;break;case"block-map":case"block-seq":o(g,"Block collections are not allowed within flow collections");default:c&&o(g,"Missing , between flow collection items"),a||l||b||(C=S),c=e(n,S,M(),o),g=c.range[1],y=!1,x=!1,w=!1,d=!1}x&&(g+=S.source.length)}(l||c||m||v||b)&&E(i.items.length);const S=a?"}":"]",[x,...T]=i.end;x&&x.source===S||o(g,`Expected flow ${a?"map":"sequence"} to end with ${S}`);if(x&&(g+=x.source.length),T.length>0){const e=dE(T,g,n.options.strict,o);e.comment&&(s.comment=h),g=e.offset}return s.range=[i.offset,g],s}(e,t,n,i,o)}if(!r)return a;const s=a.constructor;if("!"===r||r===s.tagName)return a.tag=s.tagName,a;const l=yC(a)?"map":"seq";let c=t.schema.tags.find((e=>e.collection===l&&e.tag===r));if(!c){const e=t.schema.knownTags[r];if(!e||e.collection!==l)return o(a.range[0],`Unresolved tag: ${r}`,!0),a.tag=r,a;t.schema.tags.push(Object.assign({},e,{default:!1})),c=e}const u=c.resolve(a,(e=>o(a.range[0],e)),t.options),h=MC(u)?u:new NC(u);return h.range=a.range,h.tag=r,(null==c?void 0:c.format)&&(h.format=c.format),h}function fE(e,t,n){const i=function({offset:e,props:t},n,i){if("block-scalar-header"!==t[0].type)return i(e,"Block scalar header not found"),null;const{source:r}=t[0],o=r[0];let a=0,s="",l=-1;for(let t=1;t<r.length;++t){const n=r[t];if(s||"-"!==n&&"+"!==n){const i=Number(n);!a&&i?a=i:-1===l&&(l=e+t)}else s=n}-1!==l&&i(l,`Block scalar header includes extra characters: ${r}`);let c=!1,u="",h=r.length;for(let r=1;r<t.length;++r){const o=t[r];switch(o.type){case"space":c=!0;case"newline":h+=o.source.length;break;case"comment":if(n&&!c){i(e+h,"Comments must be separated from other tokens by white space characters")}h+=o.source.length,u=o.source.substring(1);break;case"error":i(e+h,o.message),h+=o.source.length;break;default:{i(e+h,`Unexpected token in block scalar header: ${o.type}`);const t=o.source;t&&"string"==typeof t&&(h+=t.length)}}}return{mode:o,indent:a,chomp:s,comment:u,length:h}}(e,t,n);if(!i)return{value:"",type:null,comment:"",length:0};const r=">"===i.mode?NC.BLOCK_FOLDED:NC.BLOCK_LITERAL,o=e.source?function(e){const t=e.split(/\n( *)/),n=t[0],i=n.match(/^( *)/),r=[i&&i[1]?[i[1],n.slice(i[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)r.push([t[e],t[e+1]]);return r}(e.source):[];let a=o.length;for(let e=o.length-1;e>=0;--e){const t=o[e][1];if(""!==t&&"\r"!==t)break;a=e}if(!e.source||0===a){const t="+"===i.chomp?o.map((e=>e[0])).join("\n"):"";let n=i.length;return e.source&&(n+=e.source.length),{value:t,type:r,comment:i.comment,length:n}}let s=e.indent+i.indent,l=e.offset+i.length,c=0;for(let e=0;e<a;++e){const[t,r]=o[e];if(""!==r&&"\r"!==r){if(t.length<s){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+t.length,e)}0===i.indent&&(s=t.length),c=e;break}0===i.indent&&t.length>s&&(s=t.length),l+=t.length+r.length+1}let u="",h="",d=!1;for(let e=0;e<c;++e)u+=o[e][0].slice(s)+"\n";for(let e=c;e<a;++e){let[t,a]=o[e];l+=t.length+a.length+1;const c="\r"===a[a.length-1];if(c&&(a=a.slice(0,-1)),a&&t.length<s){const e=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(l-a.length-(c?2:1),e),t=""}r===NC.BLOCK_LITERAL?(u+=h+t.slice(s)+a,h="\n"):t.length>s||"\t"===a[0]?(" "===h?h="\n":d||"\n"!==h||(h="\n\n"),u+=h+t.slice(s)+a,h="\n",d=!0):""===a?"\n"===h?u+="\n":h="\n":(u+=h+a,h=" ",d=!1)}switch(i.chomp){case"-":break;case"+":for(let e=a;e<o.length;++e)u+="\n"+o[e][0].slice(s);"\n"!==u[u.length-1]&&(u+="\n");break;default:u+="\n"}return{value:u,type:r,comment:i.comment,length:i.length+e.source.length}}function mE({offset:e,type:t,source:n,end:i},r,o){let a,s;const l=(t,n)=>o(e+t,n);switch(t){case"scalar":a=NC.PLAIN,s=function(e,t){switch(e[0]){case"\t":t(0,"Plain value cannot start with a tab character");break;case"|":case">":t(0,`Plain value cannot start with block scalar indicator ${e[0]}`);break;case"@":case"`":t(0,`Plain value cannot start with reserved character ${e[0]}`);break}return vE(e.trim())}(n,l);break;case"single-quoted-scalar":a=NC.QUOTE_SINGLE,s=function(e,t){"'"===e[e.length-1]&&1!==e.length||t(e.length,"Missing closing 'quote");return vE(e.slice(1,-1)).replace(/''/g,"'")}(n,l);break;case"double-quoted-scalar":a=NC.QUOTE_DOUBLE,s=function(e,t){let n="";for(let i=1;i<e.length-1;++i){const r=e[i];if("\r"!==r||"\n"!==e[i+1])if("\n"===r){const{fold:t,offset:r}=gE(e,i);n+=t,i=r}else if("\\"===r){let r=e[++i];const o=yE[r];if(o)n+=o;else if("\n"===r)for(r=e[i+1];" "===r||"\t"===r;)r=e[1+ ++i];else if("x"===r||"u"===r||"U"===r){const o={x:2,u:4,U:8}[r];n+=bE(e,i+1,o,t),i+=o}else{const r=e.substr(i-1,2);t(i-1,`Invalid escape sequence ${r}`),n+=r}}else if(" "===r||"\t"===r){const t=i;let o=e[i+1];for(;" "===o||"\t"===o;)o=e[1+ ++i];"\n"!==o&&(n+=i>t?e.slice(t,i+1):r)}else n+=r}'"'===e[e.length-1]&&1!==e.length||t(e.length,'Missing closing "quote');return n}(n,l);break;default:return o(e,`Expected a flow scalar value, but found: ${t}`),{value:"",type:null,comment:"",length:n.length}}const c=dE(i,0,r,l);return{value:s,type:a,comment:c.comment,length:n.length+c.offset}}function vE(e){const t=e.split(/[ \t]*\r?\n[ \t]*/);let n=t[0],i=" ";for(let e=1;e<t.length-1;++e){const r=t[e];""===r?"\n"===i?n+=i:i="\n":(n+=i+r,i=" ")}return t.length>1&&(n+=i+t[t.length-1]),n}function gE(e,t){let n="",i=e[t+1];for(;!(" "!==i&&"\t"!==i&&"\n"!==i&&"\r"!==i||"\r"===i&&"\n"!==e[t+2]);)"\n"===i&&(n+="\n"),i=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const yE={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"Â…",_:"Â ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function bE(e,t,n,i){const r=e.substr(t,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const r=e.substr(t-2,n+2);return i(t-2,`Invalid escape sequence ${r}`),r}return String.fromCodePoint(o)}function wE(e,t,n,i,r){const{offset:o}=t,{value:a,type:s,comment:l,length:c}="block-scalar"===t.type?fE(t,e.options.strict,r):mE(t,e.options.strict,r),u=i?function(e,t,n,i){var r;if("!"===n)return kE(e);const o=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;o.push(t)}for(const e of o)if(null===(r=e.test)||void 0===r?void 0:r.test(t))return e;const a=e.knownTags[n];if(a&&!a.collection)return e.tags.push(Object.assign({},a,{default:!1,test:void 0})),a;return i(0,`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),kE(e)}(e.schema,a,i,r):function(e,t,n){var i;if(n)for(const n of e.tags)if(n.default&&(null===(i=n.test)||void 0===i?void 0:i.test(t)))return n;return kE(e)}(e.schema,a,"scalar"===t.type);let h;try{const t=u?u.resolve(a,(e=>r(o,e)),e.options):a;h=wC(t)?t:new NC(t)}catch(e){r(o,e.message),h=new NC(a)}return h.range=[o,o+c],h.source=a,s&&(h.type=s),i&&(h.tag=i),(null==u?void 0:u.format)&&(h.format=u.format),l&&(h.comment=l),n&&e.anchors.setAnchor(h,n),h}const kE=e=>e.tags.find((e=>!e.collection&&"tag:yaml.org,2002:str"===e.tag));function CE(e,t,n){if(t){null===n&&(n=t.length);for(let i=n-1;i>=0;--i){let n=t[i];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++i];"space"===(null==n?void 0:n.type);)e+=n.source.length,n=t[++i];break}}return e}const ME={composeNode:EE,composeEmptyNode:SE};function EE(e,t,n,i){const{spaceBefore:r,comment:o,anchor:a,tagName:s}=n;let l;switch(t.type){case"alias":l=function(e,{offset:t,source:n,end:i},r){const o=n.substring(1),a=e.anchors.getNode(o);a||r(t,`Aliased anchor not found: ${o}`);const s=new FC(a),l=dE(i,t+n.length,e.options.strict,r);s.range=[t,l.offset],l.comment&&(s.comment=l.comment);return s}(e,t,i),(a||s)&&i(t.offset,"An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=wE(e,t,a,s,i);break;case"block-map":case"block-seq":case"flow-collection":l=pE(ME,e,t,a,s,i);break;default:throw console.log(t),new Error(`Unsupporten token type: ${t.type}`)}return r&&(l.spaceBefore=!0),o&&("scalar"===t.type&&""===t.source?l.comment=o:l.commentBefore=o),l}function SE(e,t,n,i,{spaceBefore:r,comment:o,anchor:a,tagName:s},l){const c=wE(e,{type:"scalar",offset:CE(t,n,i),indent:-1,source:""},a,s,l);return r&&(c.spaceBefore=!0),o&&(c.comment=o),c}function xE(e){let t="",n=!1,i=!1;for(let r=0;r<e.length;++r){const o=e[r];switch(o[0]){case"#":t+=(""===t?"":i?"\n\n":"\n")+o.substring(1),n=!0,i=!1;break;case"%":"#"!==e[r+1][0]&&(r+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:t,afterEmptyLine:i}}class TE{constructor(e,t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n)=>{n?this.warnings.push(new sE(e,t)):this.errors.push(new aE(e,t))},this.next=e=>{switch(e.type){case"directive":this.directives.add(e.source,this.onError),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:i,value:r,end:o},a){const s=Object.assign({directives:t},e),l=new iE(void 0,s),c=cE(l,i,!0,"doc-start",n,a);c.found&&(l.directives.marker=!0),l.contents=r?EE(l,r,c,a):SE(l,n+c.length,i,null,c,a);const u=dE(o,l.contents.range[1],!1,a);return u.comment&&(l.comment=u.comment),l.range=[n,u.offset],l}(this.options,this.directives,e,this.onError);this.decorate(t,!1),this.doc&&this.onDocument(this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new aE(-1,t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new aE(e.offset,t));break}const t=dE(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[1]=t.offset;break}default:this.errors.push(new aE(-1,`Unsupported token ${e.type}`))}},this.directives=new PC({version:(null==t?void 0:t.version)||oM.version}),this.onDocument=e,this.options=t}decorate(e,t){const{comment:n,afterEmptyLine:i}=xE(this.prelude);if(n){const r=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(i||e.directives.marker||!r)e.commentBefore=n;else if(CC(r)&&!r.flow&&r.items.length>0){const e=r.items[0],t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=r.commentBefore;r.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:xE(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),this.onDocument(this.doc),this.doc=null;else if(e){const e=Object.assign({directives:this.directives},this.options),n=new iE(void 0,e);this.atDirectives&&this.onError(t,"Missing directives-end indicator line"),n.range=[0,t],this.decorate(n,!1),this.onDocument(n)}}}class DE{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const i=t+n>>1;this.lineStarts[i]<e?t=i+1:n=i}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(0===t)return{line:0,col:e};return{line:t,col:e-this.lineStarts[t-1]+1}}}}const AE="";function LE(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const PE=[",","[","]","{","}"],IE=[" ",",","[","]","{","}","\n","\r","\t"],FE=e=>!e||IE.includes(e);class OE{constructor(e){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.next=null,this.pos=0,this.push=e}lex(e,t){e&&(this.buffer=this.buffer?this.buffer+e:e),this.atEnd=!t;let n=this.next||"stream";for(;n&&(t||this.hasChars(1));)n=this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&LE(this.buffer[e+3]))return-1}return e}getLine(){let e=this.buffer.indexOf("\n",this.pos);return-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}parseNext(e){switch(e){case"stream":return this.parseStream();case"line-start":return this.parseLineStart();case"block-start":return this.parseBlockStart();case"doc":return this.parseDocument();case"flow":return this.parseFlowCollection();case"quoted-scalar":return this.parseQuotedScalar();case"block-scalar":return this.parseBlockScalar();case"plain-scalar":return this.parsePlainScalar()}}parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if("\ufeff"===e[0]&&(this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length;const n=e.indexOf("#");if(-1!==n){const i=e[n-1];" "!==i&&"\t"!==i||(t=n-1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const i=this.pushCount(t)+this.pushSpaces(!0);return this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=this.pushSpaces(!0);return this.pushCount(e.length-t),this.pushNewline(),"stream"}return this.push(""),this.parseLineStart()}parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if("---"===e&&LE(this.charAt(3)))return this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&LE(this.charAt(3)))return this.pushCount(3),"stream"}return this.indentValue=this.pushSpaces(!1),this.indentNext>this.indentValue&&!LE(this.charAt(1))&&(this.indentNext=this.indentValue),this.parseBlockStart()}parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&LE(t)){const e=this.pushCount(1)+this.pushSpaces(!0);return this.indentNext=this.indentValue+1,this.indentValue+=e,this.parseBlockStart()}return"doc"}parseDocument(){this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=this.pushIndicators();switch(e[t]){case"#":this.pushCount(e.length-t);case void 0:return this.pushNewline(),this.parseLineStart();case"{":case"[":return this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return this.pushCount(1),"doc";case"*":return this.pushUntil(FE),"doc";case'"':case"'":return this.parseQuotedScalar();case"|":case">":return t+=this.parseBlockScalarHeader(),t+=this.pushSpaces(!0),this.pushCount(e.length-t),this.pushNewline(),this.parseBlockScalar();default:return this.parsePlainScalar()}}parseFlowCollection(){let e,t,n=-1;do{e=this.pushNewline(),t=this.pushSpaces(!0),e>0&&(this.indentValue=n=t)}while(e+t>0);const i=this.getLine();if(null===i)return this.setNext("flow");if(-1!==n&&n<this.indentNext||0===n&&(i.startsWith("---")||i.startsWith("..."))&&LE(i[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&("]"===i[0]||"}"===i[0])))return this.flowLevel=0,this.push(""),this.parseLineStart()}let r=0;for(;","===i[r];)r+=this.pushCount(1)+this.pushSpaces(!0);switch(r+=this.pushIndicators(),i[r]){case void 0:return"flow";case"#":return this.pushCount(i.length-r),"flow";case"{":case"[":return this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return this.pushUntil(FE),"flow";case'"':case"'":return this.flowKey=!0,this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||LE(e)||","===e)return this.pushCount(1),this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,this.parsePlainScalar()}}parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}let n=this.buffer.indexOf("\n",this.pos);if(-1!==n&&n<t){for(;-1!==n&&n<t;){const e=this.continueScalar(n+1);if(-1===e)break;n=this.buffer.indexOf("\n",e)}-1!==n&&n<t&&(t=n-1)}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return this.pushUntil((e=>LE(e)||"#"===e))}parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let i=this.pos;e=this.buffer[i];++i)switch(e){case" ":n+=1;break;case"\n":t=i,n=0;break;case"\r":{const e=this.buffer[i+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let e=t-1,n=this.buffer[e];for("\r"===n&&(n=this.buffer[--e]);" "===n||"\t"===n;)n=this.buffer[--e];if(!("\n"===n&&e>=this.pos))break;t=e}return this.push(AE),this.pushToIndex(t+1,!0),this.parseLineStart()}parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,i=this.pos-1;for(;t=this.buffer[++i];)if(":"===t){const t=this.buffer[i+1];if(LE(t)||e&&","===t)break;n=i}else if(LE(t)){const r=this.buffer[i+1];if("#"===r||e&&PE.includes(r))break;if("\r"===t&&("\n"===r?(i+=1,t="\n"):n=i),"\n"===t){const e=this.continueScalar(i+1);if(-1===e)break;i=Math.max(i,e-2)}}else{if(e&&PE.includes(t))break;n=i}return t||this.atEnd?(this.push(AE),this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}pushCount(e){return e>0?(this.push(this.buffer.substr(this.pos,e)),this.pos+=e,e):0}pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(this.push(n),this.pos+=n.length,n.length):(t&&this.push(""),0)}pushIndicators(){switch(this.charAt(0)){case"!":if("<"===this.charAt(1))return this.pushVerbatimTag()+this.pushSpaces(!0)+this.pushIndicators();case"&":return this.pushUntil(FE)+this.pushSpaces(!0)+this.pushIndicators();case":":case"?":case"-":if(LE(this.charAt(1)))return 0===this.flowLevel&&(this.indentNext=this.indentValue+1),this.pushCount(1)+this.pushSpaces(!0)+this.pushIndicators()}return 0}pushVerbatimTag(){let e=this.pos+2,t=this.buffer[e];for(;!LE(t)&&">"!==t;)t=this.buffer[++e];return this.pushToIndex(">"===t?e+1:e,!1)}pushNewline(){const e=this.buffer[this.pos];return"\n"===e?this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?this.pushCount(2):0}pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const i=n-this.pos;return i>0&&(this.push(this.buffer.substr(this.pos,i)),this.pos=n),i}pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return this.pushToIndex(t,!1)}}function BE(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function NE(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function RE(e){let t=!1;for(let n=0;n<e.length;++n)switch(e[n].type){case"space":break;case"comment":t=!0;break;case"newline":if(!t)return!1;break;default:return!1}if(t)for(let t=e.length-1;t>=0;--t)switch(e[t].type){case"space":break;case"newline":return!0;default:return!1}return!1}function HE(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep||t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function VE(e){var t;if(0===e.length)return[];let n=e.length;e:for(;--n>=0;)switch(e[n].type){case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===(null===(t=e[++n])||void 0===t?void 0:t.type););return e.splice(n,e.length)}class zE{constructor(e,t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.next=e=>{if(this.source=e,this.atScalar)return this.atScalar=!1,this.step(),void(this.offset+=e.length);const t=function(e){switch(e){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case AE:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}},this.lexer=new OE(this.next),this.push=e,this.onNewLine=t}parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0),this.lexer.lex(e,t),t||this.end()}end(){for(;this.stack.length>0;)this.pop()}get sourceToken(){return{type:this.type,indent:this.indent,source:this.source}}step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return this.stream();switch(e.type){case"document":return this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.scalar(e);case"block-scalar":return this.blockScalar(e);case"block-map":return this.blockMap(e);case"block-seq":return this.blockSequence(e);case"flow-collection":return this.flowCollection(e);case"doc-end":return this.documentEnd(e)}this.pop()}else{for(;this.stack.length>0;)this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}pop(e){const t=e||this.stack.pop();if(t)if(0===this.stack.length)this.push(t);else{const e=this.peek(1);switch("block-scalar"!==t.type&&"flow-collection"!==t.type||(t.indent="indent"in e?e.indent:-1),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!BE(n.start,"explicit-key-ind"));n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":e.items.push(t);break;default:this.pop(),this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&!NE(n.start)&&(0===t.indent||n.start.every((e=>"comment"!==e.type||e.indent<t.indent)))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";this.push({type:"error",source:"",message:e})}}stream(){switch(this.type){case"directive-line":return void this.push({type:"directive",source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void this.push(this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}this.push({type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source})}document(e){if(e.value)return this.lineEnd(e);switch(this.type){case"doc-start":return void(NE(e.start)?(this.pop(),this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):this.push({type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source})}scalar(e){if("map-value-ind"===this.type){const t=VE(HE(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else this.lineEnd(e)}blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}this.pop();break;default:this.pop(),this.step()}}blockMap(e){var t;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,!n.sep&&RE(n.start)){const i=e.items[e.items.length-2],r=null===(t=null==i?void 0:i.value)||void 0===t?void 0:t.end;if(Array.isArray(r))return Array.prototype.push.apply(r,n.start),void(n.start=[this.sourceToken])}case"space":case"comment":return void(n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken))}if(this.indent>=e.indent){const t=!this.onKeyLine&&this.indent===e.indent&&(n.sep||NE(n.start));switch(this.type){case"anchor":case"tag":return void(t||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken));case"explicit-key-ind":return n.sep||BE(n.start,"explicit-key-ind")?t||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):n.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(n.sep)if(n.value||t&&!BE(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(BE(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(BE(n.start,"explicit-key-ind")&&function(e){switch(null==e?void 0:e.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}(n.key)&&!BE(n.sep,"newline")){const e=VE(n.start),t=n.key,i=n.sep;i.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:t,sep:i}]})}else n.sep.push(this.sourceToken);else Object.assign(n,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);return void(t||n.value?(e.items.push({start:[],key:i,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(i):(Object.assign(n,{key:i,sep:[]}),this.onKeyLine=!0))}default:{const i=this.startBlockValue(e);if(i)return t&&"block-seq"!==i.type&&BE(n.start,"explicit-key-ind")&&e.items.push({start:[]}),void this.stack.push(i)}}}this.pop(),this.step()}blockSequence(e){var t;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(!n.value&&RE(n.start)){const i=e.items[e.items.length-2],r=null===(t=null==i?void 0:i.value)||void 0===t?void 0:t.end;if(Array.isArray(r))return Array.prototype.push.apply(r,n.start),void(n.start=[this.sourceToken])}case"space":case"comment":return void(n.value?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken));case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;return void n.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(n.value||BE(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return this.stack.push(t)}this.pop(),this.step()}flowCollection(e){if("flow-error-end"===this.type){let e;do{this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"space":case"comment":case"newline":case"comma":case"explicit-key-ind":case"map-value-ind":case"anchor":case"tag":return void e.items.push(this.sourceToken);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return void e.items.push(this.flowScalar(this.type));case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const t=this.startBlockValue(e);if(t)return this.stack.push(t);this.pop(),this.step()}else{const t=this.peek(2);if("block-map"!==t.type||"map-value-ind"!==this.type&&("newline"!==this.type||t.items[t.items.length-1].sep))if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=VE(HE(t)),i=e.end.splice(1,e.end.length);i.push(this.sourceToken);const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else this.lineEnd(e);else this.pop(),this.step()}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken]};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":return this.onKeyLine=!0,{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"map-value-ind":{this.onKeyLine=!0;const t=VE(HE(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&this.pop())}lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":this.pop(),this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&this.pop()}}}function qE(e){const t=!e||!1!==e.prettyErrors;return{lineCounter:e&&e.lineCounter||t&&new DE||null,prettyErrors:t}}function UE(e,t,n){let i;"function"==typeof t?i=t:void 0===n&&t&&"object"==typeof t&&(n=t);const r=function(e,t){const{lineCounter:n,prettyErrors:i}=qE(t);let r=null;const o=new TE((e=>{if(r){if("silent"!==r.options.logLevel){const t="Source contains multiple documents; please use YAML.parseAllDocuments()";r.errors.push(new aE(e.range[0],t))}}else r=e}),t);return new zE(o.next,null==n?void 0:n.addNewLine).parse(e),o.end(!0,e.length),i&&n&&(r.errors.forEach(lE(e,n)),r.warnings.forEach(lE(e,n))),r}(e,n);if(!r)return null;if(r.warnings.forEach((e=>tM(r.options.logLevel,e))),r.errors.length>0){if("silent"!==r.options.logLevel)throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:i},n))}var _E=n(9650),WE=n(6658),jE=n(1039),GE=n(6859),KE=n(7497),YE=n(7194),ZE=n(4297),XE=n(7824),$E=n(7583),QE=n(942),JE={}.hasOwnProperty,eS=!1;function tS(e,t){var n=function(e,t){var n=t||{};void 0===n.allowDangerousHTML||eS||(eS=!0,console.warn("mdast-util-to-hast: deprecation: `allowDangerousHTML` is nonstandard, use `allowDangerousHtml` instead"));var i=n.allowDangerousHtml||n.allowDangerousHTML,r={};return a.dangerous=i,a.definition=n.definitions||KE(e),a.footnoteById=r,a.footnoteOrder=[],a.augment=o,a.handlers=Object.assign({},QE,n.handlers),a.unknownHandler=n.unknownHandler,a.passThrough=n.passThrough,WE(e,"footnoteDefinition",(function(e){var t=String(e.identifier).toUpperCase();JE.call(r,t)||(r[t]=e)})),a;function o(e,t){var n,i;return e&&e.data&&((n=e.data).hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=Object.assign({},t.properties,n.hProperties)),t.children&&n.hChildren&&(t.children=n.hChildren)),i=e&&e.position?e:{position:e},GE(i)||(t.position={start:jE.start(i),end:jE.end(i)}),t}function a(e,t,n,i){return null==i&&"object"==typeof n&&"length"in n&&(i=n,n={}),o(e,{type:"element",tagName:t,properties:n||{},children:i||[]})}}(e,t),i=YE(n,e),r=$E(n);return r&&(i.children=i.children.concat(_E("text","\n"),r)),i}var nS=32,iS=91,rS="[inline";function oS(e,t,n,i){for(var r=e.length,o=-1;++o<r;)if(t[e[o][0]].apply(n,i))return!0;return!1}function aS(e){var t=e.match(/^\s*([0-9]+)\s*(?:x\s*([0-9]+)\s*)?$/);return t?{x:parseInt(t[1]),y:t[2]?parseInt(t[2]):0}:null}function sS(e,t){var n=aS(e);if(!n)return!1;var i=n.x,r=n.y,o=t.data=t.data||{},a=o.hProperties=o.hProperties||{};return a.width=String(i),0!==r&&(a.height=String(r)),!0}var lS=/^#[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]+/;var cS=zk;cS.globalOptions={breaks:!0,commonmark:!0};var uS=new qk,hS=new qk,dS={};function pS(e){var t=lC()(e),n=new cS(String(t),t);n.setOptions(cS.globalOptions);for(var i=n.parse(),r=0,o=uS.transformers;r<o.length;r++){(0,o[r])(i,e)}return i}!function(e){var t=/\s/,n=function(e){return t.test(e)},i="==";Uk(e,"mark","text",(function(e,t,r){if(this.options.gfm&&t.substr(0,2)===i&&t.substr(0,4)!==i+i&&!n(t.charAt(2))){var o="",a="",s="",l="",c=1,u=t.length,h=e.now();for(h.column+=2,h.offset+=2;++c<u;){if(!("="!==(o=t.charAt(c))||"="!==a||s&&n(s)))return!!r||e(i+l+i)({type:"mark",children:this.tokenizeInline(l,h),data:{hName:"mark"}});l+=a,s=a,a=o}}}),(function(e,t){return e.indexOf(i,t)}))}(cS),function(e){var t=/!?\[\[/g,n=/^(!?)\[\[(.+?)]]/;Uk(e,"ilink","link",(function(e,t,i){var r=n.exec(t);if(r){var o=r[2].trim();if(-1!==o.indexOf("[["))return!1;if(i)return!0;var a=("0"+o).substring(1),s="!"===r[1],l=nC(a),c=l.href,u=l.title,h=l.isAlias;if(s)return e(r[0])({type:"iembed",href:c,title:u,data:{hName:"span",hProperties:{className:"internal-embed",src:c,alt:u},hChildren:[{type:"text",value:u}]}});var d={className:"internal-link",href:c,dataHref:c};return h&&(d["aria-label"]=tC(c),d["data-tooltip-position"]="top"),e(r[0])({type:"ilink",href:c,title:u,data:{hName:"a",hProperties:d,hChildren:[{type:"text",value:u}]}})}}),(function(e,n){t.lastIndex=n;var i=t.exec(e);return i?i.index:-1}))}(cS),function(e){var t=/^#\d+$/,n=/\s/;Uk(e,"tag","image",(function(e,n,i){var r=lS.exec(n);if(r){var o=r[0];return!t.test(o)&&(!!i||e(o)({type:"tag",tag:o,data:{hName:"a",hProperties:{className:"tag",href:o},hChildren:[{type:"text",value:o}]}}))}}),(function(e,t){for(var i=t;-1!==(i=e.indexOf("#",i));){if(i<=0)return i;var r=e.charAt(i-1);if(n.test(r))return i;i++}}))}(cS),function(e){function t(e){if("boolean"==typeof e.checked){var t=e,n=t.data=t.data||{},i=n.hProperties=n.hProperties||{};i.className="task-list-item",e.checked&&(i.className+=" is-checked"),e.checklist&&(i.dataTask=e.checklist);var r=t.children[0];r&&"paragraph"===r.type&&(t=r),t.children.unshift({type:"checklist",data:{hName:"input",hProperties:{className:"task-list-item-checkbox",type:"checkbox",checked:e.checked}},position:e.position}),delete e.checked}}e.addTransformer((function(e){jk(e,"listItem",t)}))}(uS),function(e){Uk(e,"math","text",(function(e,t,n){var i,r,o,a,s,l,c,u=t.length,h=!1,d=!1,p=0;if(92===t.charCodeAt(p)&&(d=!0,p++),36===t.charCodeAt(p)){if(p++,d)return!!n||e(t.slice(0,p))({type:"text",value:"$"});if(36===t.charCodeAt(p)&&(h=!0,p++),o=t.charCodeAt(p),h||32!==o&&9!==o){for(a=p;p<u;){if(r=o,o=t.charCodeAt(p+1),36===r){if(i=t.charCodeAt(p-1),!h&&(32!==i&&9!==i&&(o!=o||o<48||o>57))||h&&36===o){if(s=p-1,p++,h)for(var f=++p;f<u;){var m=t.charAt(f);if("\n"===m){p=f+1;break}if(!/\s/.test(m))break;f++}l=p;break}}else 92===r&&(p++,o=t.charCodeAt(p+1));p++}if(void 0!==l)return!!n||(c=t.slice(a,s+1),e(t.slice(0,l))({type:"inlineMath",value:c,data:{hName:"span",hProperties:{className:h?"math math-block":"math math-inline"},hChildren:[{type:"text",value:c}]}}))}}}),(function(e,t){return e.indexOf("$",t)}))}(cS),function(e){_k(e,"math","fencedCode",(function(e,t,n){for(var i,r,o,a,s,l,c,u,h,d,p,f=t.length,m=0;m<f&&32===t.charCodeAt(m);)m++;for(s=m;m<f&&36===t.charCodeAt(m);)m++;if(!((l=m-s)<2)){for(;m<f&&32===t.charCodeAt(m);)m++;for(c=m;m<f;){if(36===(i=t.charCodeAt(m)))return;if(10===i)break;m++}if(10===t.charCodeAt(m)){if(n)return!0;for(r=[],c!==m&&r.push(t.slice(c,m)),m++,o=-1===(o=t.indexOf("\n",m+1))?f:o;m<f;){for(u=!1,d=m,p=o,a=o,h=0;a>d&&32===t.charCodeAt(a-1);)a--;for(;a>d&&36===t.charCodeAt(a-1);)h++,a--;for(l<=h&&t.indexOf("$",d)===a&&(u=!0,p=a);d<=p&&d-m<s&&32===t.charCodeAt(d);)d++;if(u)for(;p>d&&32===t.charCodeAt(p-1);)p--;if(u&&d===p||r.push(t.slice(d,p)),u)break;m=o+1,o=-1===(o=t.indexOf("\n",m+1))?f:o}return r=r.join("\n"),e(t.slice(0,o))({type:"math",value:r,data:{hName:"div",hProperties:{className:"math math-block"},hChildren:[{type:"text",value:r}]}})}}}));var t=e.prototype;Wk(t.interruptParagraph,"fencedCode","math"),Wk(t.interruptList,"fencedCode","math"),Wk(t.interruptBlockquote,"fencedCode","math")}(cS),function(e){for(var t=e.prototype,n=t.blockMethods,i=[],r=0;r<n.length;r++){var o=n[r];"newline"!==o&&"indentedCode"!==o&&"paragraph"!==o&&"footnoteDefinition"!==o&&i.push([o])}i.push(["footnoteDefinition"]),t.interruptFootnoteDefinition=i,Uk(e,"inlineNote","reference",(function(e,t,n){var i,r,o,a,s,l,c,u=t.length+1,h=0,d=0;if(94===t.charCodeAt(h++)&&t.charCodeAt(h++)===iS){for(o=h;h<u;){if((r=t.charCodeAt(h))!=r)return;if(void 0===l)if(92===r)h+=2;else if(r===iS)d++,h++;else if(93===r){if(0===d){a=h,h++;break}d--,h++}else if(96===r){for(s=h,l=1;96===t.charCodeAt(s+l);)l++;h+=l}else h++;else if(96===r){for(s=h,c=1;96===t.charCodeAt(s+c);)c++;h+=c,l===c&&(l=void 0),c=void 0}else h++}if(void 0!==a)return!!n||((i=e.now()).column+=2,i.offset+=2,e(t.slice(0,h))({type:"footnote",children:this.tokenizeInline(t.slice(o,a),i)}))}}),(function(e,t){return e.indexOf("^[",t)})),_k(e,"footnoteDefinition","definition",(function(e,t,n){for(var i,r,o,s,l,c,u,h,d,p,f,m,v,g=this,y=g.interruptFootnoteDefinition,b=g.offset,w=t.length+1,k=0,C=[];k<w&&(9===(s=t.charCodeAt(k))||s===nS);)k++;if(t.charCodeAt(k++)===iS&&94===t.charCodeAt(k++)){for(r=k;k<w;){if((s=t.charCodeAt(k))!=s||10===s||9===s||s===nS)return;if(93===s){o=k,k++;break}k++}if(void 0!==o&&r!==o&&58===t.charCodeAt(k++)){if(n)return!0;for(i=t.slice(r,o),l=e.now(),d=0,p=0,f=k,m=[];k<w;){if((s=t.charCodeAt(k))!=s||10===s)v={start:d,contentStart:f||k,contentEnd:k,end:k},m.push(v),10===s&&(d=k+1,p=0,f=void 0,v.end=d);else if(void 0!==p)if(s===nS||9===s)(p+=s===nS?1:4-p%4)>4&&(p=void 0,f=k);else{if(p<4&&v&&(v.contentStart===v.contentEnd||oS(y,a,g,[e,t.slice(k,1024),!0])))break;p=void 0,f=k}k++}for(k=-1,w=m.length;w>0&&(v=m[w-1]).contentStart===v.contentEnd;)w--;for(c=e(t.slice(0,v.contentEnd));++k<w;)v=m[k],b[l.line+k]=(b[l.line+k]||0)+(v.contentStart-v.start),C.push(t.slice(v.contentStart,v.end));return u=g.enterBlock(),h=g.tokenizeBlock(C.join(""),l),u(),c({type:"footnoteDefinition",identifier:i.toLowerCase(),label:i,children:h})}}})),Uk(e,"footnoteCall","reference",(function(e,t,n){var i,r,o,a,s=t.length+1,l=0;if(t.charCodeAt(l++)===iS&&94===t.charCodeAt(l++)){for(r=l;l<s;){if((a=t.charCodeAt(l))!=a||10===a||9===a||a===nS)return;if(93===a){o=l,l++;break}l++}if(void 0!==o&&r!==o)return!!n||(i=t.slice(r,o),e(t.slice(0,l))({type:"footnoteReference",identifier:i.toLowerCase(),label:i}))}}),(function(e,t){return e.indexOf("[",t)}));var a=t.blockTokenizers,s=t.inlineTokenizers,l=a.definition,c=s.reference;function u(e,t,n){var i=0;if(33===t.charCodeAt(i)&&i++,t.charCodeAt(i)===iS&&94!==t.charCodeAt(i+1))return c.call(this,e,t,n)}a.definition=function(e,t,n){for(var i=0,r=t.charCodeAt(i);r===nS||9===r;)r=t.charCodeAt(++i);if(r===iS&&94!==t.charCodeAt(i+1))return l.call(this,e,t,n)},s.reference=u,u.locator=c.locator}(cS),function(e){var t=e.prototype.inlineTokenizers,n=t.break,i=function(e,t,i){if(!this.options.breaks&&!this.options.breakOnce)return n.call(this,e,t,i);for(var r,o=t.length,a=-1;++a<o;){if(10===(r=t.charCodeAt(a)))return this.options.breakOnce=!1,!!i||e(t.slice(0,a+1))({type:"break"});if(32!==r)return}};i.locator=n.locator,t.break=i}(cS),function(e){var t="---",n=function(e,n,i){if(n.slice(0,3)===t&&"\n"===n.charAt(3)){for(var r=n.indexOf(t,3);-1!==r&&"\n"!==n.charAt(r-1);)r=n.indexOf(t,r+3);return-1!==r?!!i||e(n.slice(0,r+3))({type:"yaml",value:n.slice(4,r-1)}):void 0}};n.onlyAtStart=!0;var i=e.prototype;i.blockMethods.unshift("frontmatter"),i.blockTokenizers.frontmatter=n}(cS),function(e){var t=/^\^([a-zA-Z0-9\-]+)$/,n=/\s/;Uk(e,"blockid","text",(function(e,n,i){var r=t.exec(n);if(r){var o=r[1];return!!i||e(r[0])({type:"blockid",id:o})}}),(function(e,t){for(var i=t;-1!==(i=e.indexOf("^",i));){if(i<=0)return-1;var r=e.charAt(i-1);if(n.test(r))return i;i++}}));var i=/^\^([a-zA-Z0-9\-]+)(?=$|\n$|\n\n)/;_k(e,"blockid","paragraph",(function(e,t,n){var r=i.exec(t);if(r){var o=r[1];return!!n||e(r[0])({type:"blockid",id:o})}}))}(cS),function(e){e.addTransformer((function(e){jk(e,"link",(function(e,t,n){var i=e.url;if(i&&Kk(i)){var r=void 0;try{r=decodeURI(i)}catch(e){return}var o=Qk(r);n.children[t]={type:"ilink",href:o,title:"",converted:!0,data:{url:i,hName:"a",hProperties:{href:o,dataHref:o,className:"internal-link",title:e.title}},children:e.children,position:e.position}}}))}))}(uS),function(e){e.addTransformer((function(e){jk(e,"image",(function(e,t,n){var i=e.url;if(i&&Kk(i)){var r=Qk($k(i));n.children[t]={type:"iembed",href:r,title:e.alt,data:{hName:"span",hProperties:{className:"internal-embed",src:r,alt:e.alt}},children:e.children,position:e.position}}}))}))}(uS),function(e){e.addTransformer((function(e){var t=[],n={},i={};function r(e,t,n){var i,r,o,a,s=String(t+1),l=s;if(n>0&&(l+="-"+n),e.type="fnRef",e.data={hName:"sup",hProperties:{className:"footnote-ref","data-footnote-id":"fnref-"+l}},!e.identifier&&e.hasOwnProperty("children")){var c=e.children,u=null===(r=null===(i=c[0])||void 0===i?void 0:i.position)||void 0===r?void 0:r.start,h=null===(a=null===(o=c[c.length-1])||void 0===o?void 0:o.position)||void 0===a?void 0:a.end;u&&h&&(e.data.contentPosition={start:u,end:h},e.identifier="".concat(rS).concat(t))}e.children=[{type:"element",data:{hName:"a",hProperties:{className:"footnote-link",href:"#fn-"+s,"data-footref":e.identifier},hChildren:[{type:"text",value:"["+l+"]"}]}}]}jk(e,"footnoteDefinition",(function(e){var t=String(e.identifier);i[":"+t]=-1,n[":"+t]={children:e.children,position:e.position}})),jk(e,["footnote","footnoteReference"],(function(e){if("footnote"===e.type){var o=t.length,a=String(o);t.push({count:1,identifier:a}),n[a]={children:e.children,position:e.position,isInline:!e.identifier&&e.hasOwnProperty("children")},r(e,o,0)}else{a=String(e.identifier);if(!i.hasOwnProperty(":"+a))return e.type="text",void(e.value=a);-1===(o=i[":"+a])&&(o=t.length,i[":"+a]=o,t.push({count:0,identifier:":"+a}));var s=t[o],l=s.count;s.count++,r(e,o,l)}}));for(var o=[],a=0;a<t.length;a++){var s=t[a],l=n[s.identifier];if(l){var c=l.children,u=c[c.length-1];u&&"paragraph"===u.type&&(c=u.children);for(var h=String(a+1),d=0;d<s.count;d++){var p=h;d>0&&(p+="-"+d),c.push({type:"element",data:{hName:"a",hProperties:{className:"footnote-backref footnote-link",href:"#fnref-"+p},hChildren:[{type:"text",value:"â†©ï¸Ž"}]}})}o.push({type:"listItem",synthetic:!0,data:{hProperties:{"data-footnote-id":"fn-"+h},isInline:l.isInline},children:[{type:"paragraph",children:l.children}],position:l.position})}}if(0!==o.length){var f,m=e.children[e.children.length-1],v={start:f=m?m.position.end:{line:1,column:1,offset:0},end:f};e.children=e.children.concat({type:"text",value:"\n",position:v},{type:"element",position:v,data:{hName:"section",hProperties:{className:"footnotes"}},children:[{type:"thematicBreak",position:v},{type:"list",position:v,ordered:!0,start:1,spread:!1,children:o}]})}}))}(uS),function(e){e.addTransformer((function(e){jk(e,"image",(function(e){var t=e.alt;if(t){var n=t.lastIndexOf("|");if(-1!==n)sS(t.substr(n+1),e)&&(e.alt=t.substr(0,n))}}))}))}(uS),function(e){e.addTransformer((function(e){jk(e,"iembed",(function(e){var t=e.title;if(t){var n=t.lastIndexOf("|");if(-1!==n)sS(t.substr(n+1),e)&&(t=t.substr(0,n));else sS(t,e)&&(t="");t||(t=e.href),e.data.hProperties.alt=t}}))}))}(uS),function(e,t){t.blockid=function(){return null},e.addTransformer((function(e){for(var t,n=e.children,i=function(e){var i=n[e];if("blockid"===i.type){if(e>0)n[e-1].id=i.id;return n.splice(e,1),e--,t=e,"continue"}if("list"===i.type)return jk(i,"listItem",(function(e){var t=null;jk(e,["list","blockid"],(function(e){return"list"===e.type?"skip":(t=e.id,!1)})),t&&(e.id=t)})),t=e,"continue";var r=null;jk(i,"blockid",(function(e){r=e.id})),r&&(i.id=r),t=e},r=0;r<n.length;r++)i(r),r=t}))}(uS,dS),function(e){e.addTransformer((function(e,t){jk(e,"heading",(function(e,n,i){var r=Gk(t,e);e.data={hProperties:{dataHeading:r}}}))}))}(uS),function(e,t){t.callout=function(e,t){var n=t.callout,i=n.color,r=null;if(i){i=i.replace(/^#([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return"#"+t+t+n+n+i+i}));var o=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);o&&(r="--callout-color: "+[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)].join(",")+";")}return e(t,"div",{className:"callout",dataCallout:n.type,dataCalloutIcon:n.icon,dataCalloutFold:n.fold,dataCalloutMetadata:n.data,style:r},ZE(e,t))},t["callout-title"]=function(e,t){return e(t,"div",{className:"callout-title"},[e({},"div",{className:"callout-icon"}),e({},"div",{className:"callout-title-inner"},ZE(e,t))])},t["callout-content"]=function(e,t){return e(t,"div",{className:"callout-content"},XE(ZE(e,t),!0))},e.addTransformer((function(e){jk(e,"blockquote",(function(e){var t=e.callout;if(t){e.type="callout";var n=[],i=e.children,r=i&&i[0];if(r&&r.position.start.line===e.position.start.line)if("paragraph"===r.type){for(var o=r.children,a=0,s=void 0;a<o.length;a++)if("break"===o[a].type){s=o[a];break}var l=i.slice(1);s?(n.push({type:"callout-title",position:{start:r.position.start,end:s.position.start},children:o.slice(0,a)}),r.position.start=s.position.end,r.children=o.slice(a+1),l.unshift(r)):n.push({type:"callout-title",position:r.position,children:o}),l.length>0&&n.push({type:"callout-content",position:{start:l[0].position.start,end:l[l.length-1].position.end},children:l})}else{n.push({type:"callout-title",position:r.position,children:[r]});var c=i[1];if(c){var u=c.position.start,h=i[i.length-1].position.end;n.push({type:"callout-content",position:{start:u,end:h},children:i.slice(1)})}}else{var d={start:e.position.start,end:e.position.start},p=t.type.trim().replace(/\-/g," ").toLowerCase();p=p.charAt(0).toUpperCase()+p.substr(1),n.push({type:"callout-title",position:d,children:[{type:"text",value:p,position:d}]}),r&&n.push({type:"callout-content",position:e.position,children:i})}e.children=n}}))}))}(uS,dS),function(e){function t(e){var t=e.properties;if(t&&!t.className){t.className="external-link",t.target="_blank",t.rel="noopener nofollow";var n="",i=e.children;i&&i.length>0&&(n=i[0].value),t.href!==n&&(t["aria-label"]=t.href,t["data-tooltip-position"]="top")}}e.addTransformer((function(e){jk(e,{type:"element",tagName:"a"},t)}))}(hS),function(e,t){t.yaml=function(e,t){var n=t.value||"";return e(t.position,"pre",{className:"frontmatter"},[e(t,"code",{className:"language-yaml"},[Vk("text",n)])])}}(0,dS),function(e,t){var n=/^%%(.+?)%%/;Uk(e,"comment","text",(function(e,t,i){var r=n.exec(t);if(r){if(i)return!0;var o=e.now();return o.column+=2,o.offset+=2,e(r[0])({type:"comment",children:this.tokenizeInline(r[1],o)})}}),(function(e,t){return e.indexOf("%%",t)})),t.comment=function(){return null},_k(e,"comment","fencedCode",(function(e,t,n){for(var i=t.length,r=0;r<i&&32===t.charCodeAt(r);)r++;for(var o=r;r<i&&37===t.charCodeAt(r);)r++;var a=r-o;if(!(a<2)){for(var s=r;r<i;){var l=t.charCodeAt(r);if(37===l)return;if(10===l)break;r++}if(n)return!0;for(var c=i,u=0;r<i;){if(37===t.charCodeAt(r)){if(a===++u){c=r+1;break}}else u=0;r++}var h=t.substring(s,c-a),d=e.now();return e(t.slice(0,c))({type:"comment",value:h,children:this.tokenizeInline(h,d)})}}));var i=e.prototype;Wk(i.interruptParagraph,"fencedCode","comment"),Wk(i.interruptList,"fencedCode","comment"),Wk(i.interruptBlockquote,"fencedCode","comment")}(cS,dS);var fS=/^---(\r?\n)/g,mS=/---(\r?\n|$)/g;function vS(e){if(fS.lastIndex=0,!fS.exec(e))return{exists:!1,contentStart:0,from:0,to:0,frontmatter:""};var t=fS.lastIndex;mS.lastIndex=t;for(var n=mS.exec(e);n&&"\n"!==e.charAt(n.index-1);)n=mS.exec(e);if(!n)return{exists:!1,contentStart:0,from:0,to:0,frontmatter:""};var i=n.index,r=mS.lastIndex;return{exists:!0,frontmatter:e.slice(t,i),from:t,to:i,contentStart:r}}function gS(e){var t=e.children[0];return t&&"yaml"===t.type&&e.children.shift(),e}function yS(e){var t=e.children[0];if(t&&"yaml"===t.type)try{var n=UE(t.value,void 0,{});if(n&&"object"==typeof n&&!Array.isArray(n))return n||void 0}catch(e){return null}}function bS(e,t){(t=t||{}).allowDangerousHtml=!0,t.handlers=dS;for(var n=tS(e,t),i=0,r=hS.transformers;i<r.length;i++){(0,r[i])(n,"")}return rC()(n,{allowDangerousHtml:!0})}var wS=Object.prototype.hasOwnProperty;function kS(e,t){if(!e)return null;if("string"==typeof t)return wS.call(e,t)?e[t]:null;for(var n in e)if(wS.call(e,n)&&t.test(n))return e[n];return null}function CS(e,t,n){if(!e)return null;var i=kS(e,t);if(!i)return null;var r=[];if("string"==typeof i&&(i=i.split(/[,\n]/)),Array.isArray(i)){for(var o=0,a=i;o<a.length;o++){var s=a[o];if("string"==typeof s)if(n)for(var l=0,c=s.split(/\s/g);l<c.length;l++){var u=c[l];u&&r.push(u)}else(s=s.trim())&&r.push(s)}return 0===r.length?null:r}return null}function MS(e){return e?CS(e,/^alias(es)?$/i):null}function ES(e){if(!e)return null;var t=CS(e,/^tag(s)?$/i,!0);if(t)for(var n=0;n<t.length;n++){var i=t[n];"#"!==i.charAt(0)&&(t[n]="#"+i)}return t}function SS(e){return e?CS(e,/^cssclass(es)?$/i,!0):null}function xS(e){return aC()(e)}function TS(e){var t=[];if(!e)return t;for(var n=0,i=e;n<i.length;n++){var r=i[n];t.push(DS(r))}return t}function DS(e){if(!e)return"";var t=e.type;if("html"===t)return"";if("iembed"===t)return e.href;if("listItem"===t){var n=TS(e.children);return 1===n.length?n[0]+"\n":n.join("\n")}if("tag"===t)return e.tag;if("comment"===t)return"";var i=e.value||e.alt||e.title||e.hasOwnProperty("children")&&TS(e.children).join("")||"";return"list"===t&&void 0!==e.start&&null!==e.start&&(i=e.start+". "+i),"paragraph"===t||"break"===t||"heading"===t||"code"===t||"break"===t?i+="\n":i.endsWith("\n")&&(i=i.substring(0,i.length-1)),"tableCell"===t?i+=" ":"tableRow"===t&&(i+="\n"),i}function AS(e){return e.hasOwnProperty("position")}function LS(e){return e.hasOwnProperty("key")}function PS(e){return{line:e.line-1,col:e.column-1,offset:e.offset}}function IS(e){return{start:PS(e.start),end:PS(e.end)}}function FS(e){var t=[],n=function(e,n,r){var o=e?e+"."+n:n;if("string"==typeof r){if(r.startsWith("[[")&&r.endsWith("]]")){var a=nC(r.substring(2,r.length-2)),s=a.title,l=a.href;t.push({key:o,link:l,original:r,displayText:s})}}else i(o,r)},i=function(e,t){if(Array.isArray(t))for(var i=0;i<t.length;i++){var r=t[i];n(e,String(i),r)}else if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&n(e,o,t[o])};return i("",e),t}function OS(e,t){var n={links:[],embeds:[],tags:[],headings:[],footnotes:[],footnoteRefs:[],referenceLinks:[],sections:[],listItems:[],blocks:{}},i=pS(e),r=i.children[0];if(r&&"yaml"===r.type){var o=yS(i);o&&(n.frontmatter=o,n.frontmatterPosition=IS(r.position),n.frontmatterLinks=FS(o))}for(var a=0,s=i.children;a<s.length;a++){var l=s[a],c=IS(l.position),u={type:l.type,position:c},h=l.id;h&&"string"==typeof h&&(u.id=h,n.blocks[h.toLowerCase()]={position:c,id:h}),n.sections.push(u)}return jk(i,["heading","ilink","iembed","tag","listItem","fnRef","footnoteDefinition","definition"],(function(i,r,o){var a,s;if("fnRef"===i.type){var l=null===(a=i.data)||void 0===a?void 0:a.contentPosition;l?n.footnotes.push({position:IS(l),id:i.identifier||""}):n.footnoteRefs.push({position:IS(i.position),id:i.identifier||""})}else if("footnoteDefinition"===i.type)n.footnotes.push({position:IS(i.position),id:i.identifier||""});else if("definition"===i.type&&i.url){var c=i.label||i.identifier;n.referenceLinks.push({position:IS(i.position),id:c||"",link:i.url||""})}else if("heading"===i.type&&"root"===o.type){var u=Gk(e,i);n.headings.push({position:IS(i.position),heading:u,level:i.depth||1})}else if("ilink"===i.type){var h=e.substring(i.position.start.offset,i.position.end.offset),d=i.href||"";!(f=i.title||"")&&i.converted&&(f=DS(i));var p={position:IS(i.position),link:d,original:h,displayText:f};t&&delete p.original,n.links.push(p)}else if("iembed"===i.type){h=e.substring(i.position.start.offset,i.position.end.offset),d=i.href||"";var f=i.title||"";p={position:IS(i.position),link:d,original:h,displayText:f};t&&delete p.original,n.embeds.push(p)}else if("tag"===i.type){var m=i.tag||"";n.tags.push({position:IS(i.position),tag:m})}else if("listItem"===i.type){if(i.synthetic){if(null===(s=i.data)||void 0===s?void 0:s.isInline)return;return"skip"}var v=IS(i.position),g=i.children;if(g&&g.length>1)for(var y=g.length-1;y>=0;y--){var b=g[y];if("list"!==b.type){v.end=PS(b.position.end);break}b.listParentPosition=i.position}var w=0;"list"===o.type&&(o.listParentPosition?w=o.listParentPosition.start.line-1:0===(w=-(o.position.start.line-1))&&(w=-1));var k={position:v,parent:w},C=i.checklist;"string"==typeof C&&(k.task=C),(c=i.id)&&"string"==typeof c&&(k.id=c,n.blocks[c.toLowerCase()]={position:v,id:c}),n.listItems.push(k)}})),0===n.links.length&&delete n.links,0===n.embeds.length&&delete n.embeds,0===n.tags.length&&delete n.tags,0===n.headings.length&&delete n.headings,0===n.footnotes.length&&delete n.footnotes,0===n.footnoteRefs.length&&delete n.footnoteRefs,0===n.referenceLinks.length&&delete n.referenceLinks,(0===n.sections.length||t)&&delete n.sections,0===n.listItems.length&&delete n.listItems,0===Object.keys(n.blocks).length&&delete n.blocks,n}function BS(e,t){if(!e)return e;if(e.links)for(var n=0,i=e.links;n<i.length;n++){t(i[n])}if(e.embeds)for(var r=0,o=e.embeds;r<o.length;r++){t(o[r])}if(e.tags)for(var a=0,s=e.tags;a<s.length;a++){t(s[a])}if(e.headings)for(var l=0,c=e.headings;l<c.length;l++){t(c[l])}if(e.sections)for(var u=0,h=e.sections;u<h.length;u++){t(h[u])}if(e.listItems)for(var d=0,p=e.listItems;d<p.length;d++){t(p[d])}if(e.blocks)for(var f in e.blocks)e.blocks.hasOwnProperty(f)&&t(e.blocks[f]);return e}function NS(e){var t=e.start,n=e.end;return[t.line,t.col,t.offset,n.line,n.col,n.offset]}function RS(e){var t=e.position;t&&(delete e.position,e.pos=NS(t))}function HS(e){return{start:{line:e[0],col:e[1],offset:e[2]},end:{line:e[3],col:e[4],offset:e[5]}}}function VS(e){var t=e.pos;t&&Array.isArray(t)&&6===t.length&&(delete e.pos,e.position=HS(t))}function zS(e){return e.frontmatterPos&&(e.frontmatterPosition=HS(e.frontmatterPos),delete e.frontmatterPos),BS(e,VS)}function qS(e){var t=e.v||0;return t<1&&(e.frontmatter&&Array.isArray(e.frontmatter)&&(e.frontmatter=null,delete e.frontmatterPos,delete e.frontmatterLinks),e.frontmatter&&(!e.frontmatterPos&&e.frontmatter.pos&&(e.frontmatterPos=e.frontmatter.pos,delete e.frontmatter.pos),e.frontmatterLinks||(e.frontmatterLinks=FS(e.frontmatter))),GS(e,(function(e){e.link=Qk(e.link)})),e.v=1),e.v!==t}function US(e,t,n){return function(e,t,n){for(var i=0,r=e.length;i<r;){var o=(i+r)/2|0,a=t(e[o]);if(0===a)return o;a<0?i=o+1:r=o}return n?r:i}(e,(function(e){return t<e.position.start.offset?1:t>e.position.end.offset?-1:0}),n)}function _S(e){var t=e.indexOf("#");return-1===t?e:e.substring(0,t)}function WS(e){var t=e.indexOf("#");return{path:-1===t?e:e.substring(0,t),subpath:-1===t?"":e.substring(t)}}function jS(e,t){return!!e&&(!0===KS(e.links,t)||!0===KS(e.embeds,t))}function GS(e,t){return!!e&&(!0===KS(e.frontmatterLinks,t)||(!0===KS(e.links,t)||!0===KS(e.embeds,t)))}function KS(e,t){if(!e)return!1;for(var n=0,i=e;n<i.length;n++){if(!0===t(i[n]))return!0}return!1}function YS(e){if(!e)return null;var t=[],n=ES(e.frontmatter);if(n)for(var i=0,r=n;i<r.length;i++){var o=r[i];t.push(o)}var a=e.tags;if(a)for(var s=0,l=a;s<l.length;s++){o=l[s];t.push(o.tag)}return t}var ZS=/[!"#$%&()*+,.:;<=>?@^`{|}~\/\[\]\\\r\n]/g,XS=/([:#|^\\\r\n]|%%|\[\[|]])/g;function $S(e){return e.replace(ZS," ").replace(/\s+/g," ").trim()}function QS(e){return e.replace(XS," ").replace(/\s+/g," ").trim()}function JS(e,t){if(!e||!t)return null;var n=t.split("#").filter((function(e){return!!e}));if(!n||0===n.length)return null;if(1===n.length){var i=n[0];if(i.startsWith("^")){var r=i.substr(1).toLowerCase(),o=e.blocks;if(o&&o.hasOwnProperty(r))for(var a in o)if(a.toLowerCase()===r&&o.hasOwnProperty(a)){var s=o[a],l=null;if(e.listItems)for(var c=0,u=e.listItems;c<u.length;c++){var h=u[c];if(h.id&&h.id.toLowerCase()===r){l=h;break}}return{type:"block",block:s,list:l,start:s.position.start,end:s.position.end}}}else if(i.startsWith("[^")){var d=i.slice(2,-1);if(e.footnotes)for(var p=0,f=e.footnotes;p<f.length;p++){var m=f[p];if(m.id===d)return{type:"footnote",footnote:m,start:m.position.start,end:m.position.end}}}}var v=e.headings;if(!v||0===v.length)return null;for(var g=0,y=0,b=null,w=null,k=0,C=v;k<C.length;k++){var M=C[k];if(b&&M.level<=y){w=M;break}!b&&M.level>y&&$S(M.heading).toLowerCase()===$S(n[g]).toLowerCase()&&(g++,y=M.level,g===n.length&&(b=M))}return b?{type:"heading",current:b,next:w,start:b.position.start,end:w?w.position.start:null}:null}function ex(e,t,n,i){void 0===i&&(i=!1);var r="",o="",a="",s="";if("block"===n.type&&n.list){var l=function(e,t){var n=e.listItems;if(!n)return t;var i=n.indexOf(t);if(-1===i)return t;var r=new Set;r.add(t.position.start.line);for(var o=t,a=i+1;a<n.length;a++){var s=n[a];if(!r.has(s.parent))break;r.add(s.position.start.line),o=s}return o}(t,n.list),c=function(e,t){var n=e.position.start,i=t.position.end;return{start:n.offset-n.col,end:i.offset}}(n.list,l),u=c.start,h=c.end;r=e.substring(0,u),o=e.substring(h);var d=function(e){var t=e.split("\n"),n=t[0].match(/^\s*/)[0],i=n.replace(/\t/g,"    ").length;if(i>0)for(var r=0;r<t.length;r++){for(var o=t[r],a=0,s=0;a<o.length&&s<i;)s+="\t"===o.charAt(a)?4:1,a++;t[r]=o.substr(a)}return{indent:n,text:t.join("\n")}}(e.substring(u,h));e=d.text,a=d.indent}else{u=n.start.offset,h=n.end?n.end.offset:e.length;var p=u;i&&"heading"===n.type&&(p=n.current.position.end.offset+1,s=e.substring(u,p)),r=e.substring(0,u),o=e.substring(h),e=e.substring(p,h)}if("footnote"===n.type){var f=e.match(/^\[\^[^\]]+\]:\s*/);f&&(r+=f[0],e=e.slice(f[0].length)),e=e.replace(/\n( {4}|\t)/g,"\n")}return{before:r,after:o,indent:a,heading:s,content:e}}function tx(e){return e?e.startsWith("#[^")?"footnote":e.startsWith("#^")?"block":"heading":null}function nx(e){var t=0;if(null==e?void 0:e.footnotes)for(var n=0,i=e.footnotes;n<i.length;n++){var r=i[n];if(!r.id.startsWith(rS)&&/^\d+$/.test(r.id)){var o=parseInt(r.id,10);o>t&&(t=o)}}return t+1}const ix={"a-arrow-down":[[6,"M3.5 13h6"],[6,"m2 16 4.5-9 4.5 9"],[6,"M18 7v9"],[6,"m14 12 4 4 4-4"]],"a-arrow-up":[[6,"M3.5 13h6"],[6,"m2 16 4.5-9 4.5 9"],[6,"M18 16V7"],[6,"m14 11 4-4 4 4"]],"a-large-small":[[6,"M21 14h-5"],[6,"M16 16v-3.5a2.5 2.5 0 0 1 5 0V16"],[6,"M4.5 13h6"],[6,"m3 16 4.5-9 4.5 9"]],accessibility:[[1,16,4,1],[6,"m18 19 1-7-6 1"],[6,"m5 8 3-3 5.5 3-2.36 3.5"],[6,"M4.24 14.5a5 5 0 0 0 6.88 6"],[6,"M13.76 17.5a5 5 0 0 0-6.88-6"]],activity:[[6,"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"]],"activity-square":[[5,3,3,18,18,2],[6,"M17 12h-2l-2 5-2-10-2 5H7"]],"air-vent":[[6,"M6 12H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"],[6,"M6 8h12"],[6,"M18.3 17.7a2.5 2.5 0 0 1-3.16 3.83 2.53 2.53 0 0 1-1.14-2V12"],[6,"M6.6 15.6A2 2 0 1 0 10 17v-5"]],airplay:[[6,"M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"],[6,"m12 15 5 6H7Z"]],"alarm-check":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"m9 13 2 2 4-4"]],"alarm-clock":[[1,12,13,8],[6,"M12 9v4l2 2"],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"]],"alarm-clock-check":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"m9 13 2 2 4-4"]],"alarm-clock-minus":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"M9 13h6"]],"alarm-clock-off":[[6,"M6.87 6.87a8 8 0 1 0 11.26 11.26"],[6,"M19.9 14.25a8 8 0 0 0-9.15-9.15"],[6,"m22 6-3-3"],[6,"M6.26 18.67 4 21"],[6,"m2 2 20 20"],[6,"M4 4 2 6"]],"alarm-clock-plus":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"M12 10v6"],[6,"M9 13h6"]],"alarm-minus":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"M9 13h6"]],"alarm-plus":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"M12 10v6"],[6,"M9 13h6"]],"alarm-smoke":[[6,"M11 21c0-2.5 2-2.5 2-5"],[6,"M16 21c0-2.5 2-2.5 2-5"],[6,"m19 8-.8 3a1.25 1.25 0 0 1-1.2 1H7a1.25 1.25 0 0 1-1.2-1L5 8"],[6,"M21 3a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a1 1 0 0 1 1-1z"],[6,"M6 21c0-2.5 2-2.5 2-5"]],album:[[5,3,3,18,18,2,2],[2,"11 3 11 11 14 8 17 11 17 3"]],"alert-circle":[[1,12,12,10],[0,12,8,12,12],[0,12,16,12.01,16]],"alert-octagon":[[6,"M12 16h.01"],[6,"M12 8v4"],[6,"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z"]],"alert-triangle":[[6,"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"],[6,"M12 9v4"],[6,"M12 17h.01"]],"align-center":[[0,21,6,3,6],[0,17,12,7,12],[0,19,18,5,18]],"align-center-horizontal":[[6,"M2 12h20"],[6,"M10 16v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4"],[6,"M10 8V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v4"],[6,"M20 16v1a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-1"],[6,"M14 8V7c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v1"]],"align-center-vertical":[[6,"M12 2v20"],[6,"M8 10H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h4"],[6,"M16 10h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4"],[6,"M8 20H7a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2h1"],[6,"M16 14h1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-1"]],"align-end-horizontal":[[5,4,2,6,16,2],[5,14,9,6,9,2],[6,"M22 22H2"]],"align-end-vertical":[[5,2,4,16,6,2],[5,9,14,9,6,2],[6,"M22 22V2"]],"align-horizontal-distribute-center":[[5,4,5,6,14,2],[5,14,7,6,10,2],[6,"M17 22v-5"],[6,"M17 7V2"],[6,"M7 22v-3"],[6,"M7 5V2"]],"align-horizontal-distribute-end":[[5,4,5,6,14,2],[5,14,7,6,10,2],[6,"M10 2v20"],[6,"M20 2v20"]],"align-horizontal-distribute-start":[[5,4,5,6,14,2],[5,14,7,6,10,2],[6,"M4 2v20"],[6,"M14 2v20"]],"align-horizontal-justify-center":[[5,2,5,6,14,2],[5,16,7,6,10,2],[6,"M12 2v20"]],"align-horizontal-justify-end":[[5,2,5,6,14,2],[5,12,7,6,10,2],[6,"M22 2v20"]],"align-horizontal-justify-start":[[5,6,5,6,14,2],[5,16,7,6,10,2],[6,"M2 2v20"]],"align-horizontal-space-around":[[5,9,7,6,10,2],[6,"M4 22V2"],[6,"M20 22V2"]],"align-horizontal-space-between":[[5,3,5,6,14,2],[5,15,7,6,10,2],[6,"M3 2v20"],[6,"M21 2v20"]],"align-justify":[[0,3,6,21,6],[0,3,12,21,12],[0,3,18,21,18]],"align-left":[[0,21,6,3,6],[0,15,12,3,12],[0,17,18,3,18]],"align-right":[[0,21,6,3,6],[0,21,12,9,12],[0,21,18,7,18]],"align-start-horizontal":[[5,4,6,6,16,2],[5,14,6,6,9,2],[6,"M22 2H2"]],"align-start-vertical":[[5,6,14,9,6,2],[5,6,4,16,6,2],[6,"M2 2v20"]],"align-vertical-distribute-center":[[6,"M22 17h-3"],[6,"M22 7h-5"],[6,"M5 17H2"],[6,"M7 7H2"],[5,5,14,14,6,2],[5,7,4,10,6,2]],"align-vertical-distribute-end":[[5,5,14,14,6,2],[5,7,4,10,6,2],[6,"M2 20h20"],[6,"M2 10h20"]],"align-vertical-distribute-start":[[5,5,14,14,6,2],[5,7,4,10,6,2],[6,"M2 14h20"],[6,"M2 4h20"]],"align-vertical-justify-center":[[5,5,16,14,6,2],[5,7,2,10,6,2],[6,"M2 12h20"]],"align-vertical-justify-end":[[5,5,12,14,6,2],[5,7,2,10,6,2],[6,"M2 22h20"]],"align-vertical-justify-start":[[5,5,16,14,6,2],[5,7,6,10,6,2],[6,"M2 2h20"]],"align-vertical-space-around":[[5,7,9,10,6,2],[6,"M22 20H2"],[6,"M22 4H2"]],"align-vertical-space-between":[[5,5,15,14,6,2],[5,7,3,10,6,2],[6,"M2 21h20"],[6,"M2 3h20"]],ambulance:[[6,"M10 10H6"],[6,"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"],[6,"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14"],[6,"M8 8v4"],[6,"M9 18h6"],[1,17,18,2],[1,7,18,2]],ampersand:[[6,"M17.5 12c0 4.4-3.6 8-8 8A4.5 4.5 0 0 1 5 15.5c0-6 8-4 8-8.5a3 3 0 1 0-6 0c0 3 2.5 8.5 12 13"],[6,"M16 12h3"]],ampersands:[[6,"M10 17c-5-3-7-7-7-9a2 2 0 0 1 4 0c0 2.5-5 2.5-5 6 0 1.7 1.3 3 3 3 2.8 0 5-2.2 5-5"],[6,"M22 17c-5-3-7-7-7-9a2 2 0 0 1 4 0c0 2.5-5 2.5-5 6 0 1.7 1.3 3 3 3 2.8 0 5-2.2 5-5"]],amphora:[[6,"M10 2v5.632c0 .424-.272.795-.653.982A6 6 0 0 0 6 14c.006 4 3 7 5 8"],[6,"M10 5H8a2 2 0 0 0 0 4h.68"],[6,"M14 2v5.632c0 .424.272.795.652.982A6 6 0 0 1 18 14c0 4-3 7-5 8"],[6,"M14 5h2a2 2 0 0 1 0 4h-.68"],[6,"M18 22H6"],[6,"M9 2h6"]],anchor:[[6,"M12 22V8"],[6,"M5 12H2a10 10 0 0 0 20 0h-3"],[1,12,5,3]],angry:[[1,12,12,10],[6,"M16 16s-1.5-2-4-2-4 2-4 2"],[6,"M7.5 8 10 9"],[6,"m14 9 2.5-1"],[6,"M9 10h.01"],[6,"M15 10h.01"]],annoyed:[[1,12,12,10],[6,"M8 15h8"],[6,"M8 9h2"],[6,"M14 9h2"]],antenna:[[6,"M2 12 7 2"],[6,"m7 12 5-10"],[6,"m12 12 5-10"],[6,"m17 12 5-10"],[6,"M4.5 7h15"],[6,"M12 16v6"]],anvil:[[6,"M7 10H6a4 4 0 0 1-4-4 1 1 0 0 1 1-1h4"],[6,"M7 5a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1 7 7 0 0 1-7 7H8a1 1 0 0 1-1-1z"],[6,"M9 12v5"],[6,"M15 12v5"],[6,"M5 20a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3 1 1 0 0 1-1 1H6a1 1 0 0 1-1-1"]],aperture:[[1,12,12,10],[6,"m14.31 8 5.74 9.94"],[6,"M9.69 8h11.48"],[6,"m7.38 12 5.74-9.94"],[6,"M9.69 16 3.95 6.06"],[6,"M14.31 16H2.83"],[6,"m16.62 12-5.74 9.94"]],"app-window":[[5,2,4,20,16,2],[6,"M10 4v4"],[6,"M2 8h20"],[6,"M6 4v4"]],"app-window-mac":[[5,2,4,20,16,2],[6,"M6 8h.01"],[6,"M10 8h.01"],[6,"M14 8h.01"]],apple:[[6,"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z"],[6,"M10 2c1 .5 2 2 2 5"]],archive:[[5,2,3,20,5,1],[6,"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"],[6,"M10 12h4"]],"archive-restore":[[5,2,3,20,5,1],[6,"M4 8v11a2 2 0 0 0 2 2h2"],[6,"M20 8v11a2 2 0 0 1-2 2h-2"],[6,"m9 15 3-3 3 3"],[6,"M12 12v9"]],"archive-x":[[5,2,3,20,5,1],[6,"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"],[6,"m9.5 17 5-5"],[6,"m9.5 12 5 5"]],"area-chart":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z"]],armchair:[[6,"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"],[6,"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z"],[6,"M5 18v2"],[6,"M19 18v2"]],"arrow-big-down":[[6,"M15 6v6h4l-7 7-7-7h4V6h6z"]],"arrow-big-down-dash":[[6,"M15 5H9"],[6,"M15 9v3h4l-7 7-7-7h4V9z"]],"arrow-big-left":[[6,"M18 15h-6v4l-7-7 7-7v4h6v6z"]],"arrow-big-left-dash":[[6,"M19 15V9"],[6,"M15 15h-3v4l-7-7 7-7v4h3v6z"]],"arrow-big-right":[[6,"M6 9h6V5l7 7-7 7v-4H6V9z"]],"arrow-big-right-dash":[[6,"M5 9v6"],[6,"M9 9h3V5l7 7-7 7v-4H9V9z"]],"arrow-big-up":[[6,"M9 18v-6H5l7-7 7 7h-4v6H9z"]],"arrow-big-up-dash":[[6,"M9 19h6"],[6,"M9 15v-3H5l7-7 7 7h-4v3H9z"]],"arrow-down":[[6,"M12 5v14"],[6,"m19 12-7 7-7-7"]],"arrow-down-01":[[6,"m3 16 4 4 4-4"],[6,"M7 20V4"],[5,15,4,4,6,0,2],[6,"M17 20v-6h-2"],[6,"M15 20h4"]],"arrow-down-10":[[6,"m3 16 4 4 4-4"],[6,"M7 20V4"],[6,"M17 10V4h-2"],[6,"M15 10h4"],[5,15,14,4,6,0,2]],"arrow-down-az":[[6,"m3 16 4 4 4-4"],[6,"M7 20V4"],[6,"M20 8h-5"],[6,"M15 10V6.5a2.5 2.5 0 0 1 5 0V10"],[6,"M15 14h5l-5 6h5"]],"arrow-down-circle":[[1,12,12,10],[6,"M12 8v8"],[6,"m8 12 4 4 4-4"]],"arrow-down-from-line":[[6,"M19 3H5"],[6,"M12 21V7"],[6,"m6 15 6 6 6-6"]],"arrow-down-left":[[6,"M17 7 7 17"],[6,"M17 17H7V7"]],"arrow-down-left-from-circle":[[6,"M2 12a10 10 0 1 1 10 10"],[6,"m2 22 10-10"],[6,"M8 22H2v-6"]],"arrow-down-left-from-square":[[6,"M13 21h6a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6"],[6,"m3 21 9-9"],[6,"M9 21H3v-6"]],"arrow-down-left-square":[[5,3,3,18,18,2],[6,"m16 8-8 8"],[6,"M16 16H8V8"]],"arrow-down-narrow-wide":[[6,"m3 16 4 4 4-4"],[6,"M7 20V4"],[6,"M11 4h4"],[6,"M11 8h7"],[6,"M11 12h10"]],"arrow-down-right":[[6,"m7 7 10 10"],[6,"M17 7v10H7"]],"arrow-down-right-from-circle":[[6,"M12 22a10 10 0 1 1 10-10"],[6,"M22 22 12 12"],[6,"M22 16v6h-6"]],"arrow-down-right-from-square":[[6,"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6"],[6,"m21 21-9-9"],[6,"M21 15v6h-6"]],"arrow-down-right-square":[[5,3,3,18,18,2],[6,"m8 8 8 8"],[6,"M16 8v8H8"]],"arrow-down-square":[[5,3,3,18,18,2],[6,"M12 8v8"],[6,"m8 12 4 4 4-4"]],"arrow-down-to-dot":[[6,"M12 2v14"],[6,"m19 9-7 7-7-7"],[1,12,21,1]],"arrow-down-to-line":[[6,"M12 17V3"],[6,"m6 11 6 6 6-6"],[6,"M19 21H5"]],"arrow-down-up":[[6,"m3 16 4 4 4-4"],[6,"M7 20V4"],[6,"m21 8-4-4-4 4"],[6,"M17 4v16"]],"arrow-down-wide-narrow":[[6,"m3 16 4 4 4-4"],[6,"M7 20V4"],[6,"M11 4h10"],[6,"M11 8h7"],[6,"M11 12h4"]],"arrow-down-za":[[6,"m3 16 4 4 4-4"],[6,"M7 4v16"],[6,"M15 4h5l-5 6h5"],[6,"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"],[6,"M20 18h-5"]],"arrow-left":[[6,"m12 19-7-7 7-7"],[6,"M19 12H5"]],"arrow-left-circle":[[1,12,12,10],[6,"M16 12H8"],[6,"m12 8-4 4 4 4"]],"arrow-left-from-line":[[6,"m9 6-6 6 6 6"],[6,"M3 12h14"],[6,"M21 19V5"]],"arrow-left-right":[[6,"M8 3 4 7l4 4"],[6,"M4 7h16"],[6,"m16 21 4-4-4-4"],[6,"M20 17H4"]],"arrow-left-square":[[5,3,3,18,18,2],[6,"m12 8-4 4 4 4"],[6,"M16 12H8"]],"arrow-left-to-line":[[6,"M3 19V5"],[6,"m13 6-6 6 6 6"],[6,"M7 12h14"]],"arrow-right":[[6,"M5 12h14"],[6,"m12 5 7 7-7 7"]],"arrow-right-circle":[[1,12,12,10],[6,"M8 12h8"],[6,"m12 16 4-4-4-4"]],"arrow-right-from-line":[[6,"M3 5v14"],[6,"M21 12H7"],[6,"m15 18 6-6-6-6"]],"arrow-right-left":[[6,"m16 3 4 4-4 4"],[6,"M20 7H4"],[6,"m8 21-4-4 4-4"],[6,"M4 17h16"]],"arrow-right-square":[[5,3,3,18,18,2],[6,"M8 12h8"],[6,"m12 16 4-4-4-4"]],"arrow-right-to-line":[[6,"M17 12H3"],[6,"m11 18 6-6-6-6"],[6,"M21 5v14"]],"arrow-up":[[6,"m5 12 7-7 7 7"],[6,"M12 19V5"]],"arrow-up-01":[[6,"m3 8 4-4 4 4"],[6,"M7 4v16"],[5,15,4,4,6,0,2],[6,"M17 20v-6h-2"],[6,"M15 20h4"]],"arrow-up-10":[[6,"m3 8 4-4 4 4"],[6,"M7 4v16"],[6,"M17 10V4h-2"],[6,"M15 10h4"],[5,15,14,4,6,0,2]],"arrow-up-az":[[6,"m3 8 4-4 4 4"],[6,"M7 4v16"],[6,"M20 8h-5"],[6,"M15 10V6.5a2.5 2.5 0 0 1 5 0V10"],[6,"M15 14h5l-5 6h5"]],"arrow-up-circle":[[1,12,12,10],[6,"m16 12-4-4-4 4"],[6,"M12 16V8"]],"arrow-up-down":[[6,"m21 16-4 4-4-4"],[6,"M17 20V4"],[6,"m3 8 4-4 4 4"],[6,"M7 4v16"]],"arrow-up-from-dot":[[6,"m5 9 7-7 7 7"],[6,"M12 16V2"],[1,12,21,1]],"arrow-up-from-line":[[6,"m18 9-6-6-6 6"],[6,"M12 3v14"],[6,"M5 21h14"]],"arrow-up-left":[[6,"M7 17V7h10"],[6,"M17 17 7 7"]],"arrow-up-left-from-circle":[[6,"M2 8V2h6"],[6,"m2 2 10 10"],[6,"M12 2A10 10 0 1 1 2 12"]],"arrow-up-left-from-square":[[6,"M13 3h6a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-6"],[6,"m3 3 9 9"],[6,"M3 9V3h6"]],"arrow-up-left-square":[[5,3,3,18,18,2],[6,"M8 16V8h8"],[6,"M16 16 8 8"]],"arrow-up-narrow-wide":[[6,"m3 8 4-4 4 4"],[6,"M7 4v16"],[6,"M11 12h4"],[6,"M11 16h7"],[6,"M11 20h10"]],"arrow-up-right":[[6,"M7 7h10v10"],[6,"M7 17 17 7"]],"arrow-up-right-from-circle":[[6,"M22 12A10 10 0 1 1 12 2"],[6,"M22 2 12 12"],[6,"M16 2h6v6"]],"arrow-up-right-from-square":[[6,"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"],[6,"m21 3-9 9"],[6,"M15 3h6v6"]],"arrow-up-right-square":[[5,3,3,18,18,2],[6,"M8 8h8v8"],[6,"m8 16 8-8"]],"arrow-up-square":[[5,3,3,18,18,2],[6,"m16 12-4-4-4 4"],[6,"M12 16V8"]],"arrow-up-to-line":[[6,"M5 3h14"],[6,"m18 13-6-6-6 6"],[6,"M12 7v14"]],"arrow-up-wide-narrow":[[6,"m3 8 4-4 4 4"],[6,"M7 4v16"],[6,"M11 12h10"],[6,"M11 16h7"],[6,"M11 20h4"]],"arrow-up-za":[[6,"m3 8 4-4 4 4"],[6,"M7 4v16"],[6,"M15 4h5l-5 6h5"],[6,"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"],[6,"M20 18h-5"]],"arrows-up-from-line":[[6,"m4 6 3-3 3 3"],[6,"M7 17V3"],[6,"m14 6 3-3 3 3"],[6,"M17 17V3"],[6,"M4 21h16"]],asterisk:[[6,"M12 6v12"],[6,"M17.196 9 6.804 15"],[6,"m6.804 9 10.392 6"]],"asterisk-square":[[5,3,3,18,18,2],[6,"M12 8v8"],[6,"m8.5 14 7-4"],[6,"m8.5 10 7 4"]],"at-sign":[[1,12,12,4],[6,"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8"]],atom:[[1,12,12,1],[6,"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z"],[6,"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z"]],"audio-lines":[[6,"M2 10v3"],[6,"M6 6v11"],[6,"M10 3v18"],[6,"M14 8v7"],[6,"M18 5v13"],[6,"M22 10v3"]],"audio-waveform":[[6,"M2 13a2 2 0 0 0 2-2V7a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0V4a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0v-4a2 2 0 0 1 2-2"]],award:[[6,"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"],[1,12,8,6]],axe:[[6,"m14 12-8.5 8.5a2.12 2.12 0 1 1-3-3L11 9"],[6,"M15 13 9 7l4-4 6 6h3a8 8 0 0 1-7 7z"]],"axis-3d":[[6,"M4 4v16h16"],[6,"m4 20 7-7"]],baby:[[6,"M9 12h.01"],[6,"M15 12h.01"],[6,"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"],[6,"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"]],backpack:[[6,"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"],[6,"M8 10h8"],[6,"M8 18h8"],[6,"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6"],[6,"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"]],badge:[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"]],"badge-alert":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[0,12,8,12,12],[0,12,16,12.01,16]],"badge-cent":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"M12 7v10"],[6,"M15.4 10a4 4 0 1 0 0 4"]],"badge-check":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"m9 12 2 2 4-4"]],"badge-dollar-sign":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"],[6,"M12 18V6"]],"badge-euro":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"M7 12h5"],[6,"M15 9.4a4 4 0 1 0 0 5.2"]],"badge-help":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],[0,12,17,12.01,17]],"badge-indian-rupee":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"M8 8h8"],[6,"M8 12h8"],[6,"m13 17-5-1h1a4 4 0 0 0 0-8"]],"badge-info":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[0,12,16,12,12],[0,12,8,12.01,8]],"badge-japanese-yen":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"m9 8 3 3v7"],[6,"m12 11 3-3"],[6,"M9 12h6"],[6,"M9 16h6"]],"badge-minus":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[0,8,12,16,12]],"badge-percent":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"m15 9-6 6"],[6,"M9 9h.01"],[6,"M15 15h.01"]],"badge-plus":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[0,12,8,12,16],[0,8,12,16,12]],"badge-pound-sterling":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"M8 12h4"],[6,"M10 16V9.5a2.5 2.5 0 0 1 5 0"],[6,"M8 16h7"]],"badge-russian-ruble":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"M9 16h5"],[6,"M9 12h5a2 2 0 1 0 0-4h-3v9"]],"badge-swiss-franc":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"M11 17V8h4"],[6,"M11 12h3"],[6,"M9 16h4"]],"badge-x":[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[0,15,9,9,15],[0,9,9,15,15]],"baggage-claim":[[6,"M22 18H6a2 2 0 0 1-2-2V7a2 2 0 0 0-2-2"],[6,"M17 14V4a2 2 0 0 0-2-2h-1a2 2 0 0 0-2 2v10"],[5,8,6,13,8,1],[1,18,20,2],[1,9,20,2]],ban:[[1,12,12,10],[6,"m4.9 4.9 14.2 14.2"]],banana:[[6,"M4 13c3.5-2 8-2 10 2a5.5 5.5 0 0 1 8 5"],[6,"M5.15 17.89c5.52-1.52 8.65-6.89 7-12C11.55 4 11.5 2 13 2c3.22 0 5 5.5 5 8 0 6.5-4.2 12-10.49 12C5.11 22 2 22 2 20c0-1.5 1.14-1.55 3.15-2.11Z"]],bandage:[[6,"M10 10.01h.01"],[6,"M10 14.01h.01"],[6,"M14 10.01h.01"],[6,"M14 14.01h.01"],[6,"M18 6v11.5"],[6,"M6 6v12"],[5,2,6,20,12,2]],banknote:[[5,2,6,20,12,2],[1,12,12,2],[6,"M6 12h.01M18 12h.01"]],"bar-chart":[[0,12,20,12,10],[0,18,20,18,4],[0,6,20,6,16]],"bar-chart-2":[[0,18,20,18,10],[0,12,20,12,4],[0,6,20,6,14]],"bar-chart-3":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M18 17V9"],[6,"M13 17V5"],[6,"M8 17v-3"]],"bar-chart-4":[[6,"M13 17V9"],[6,"M18 17V5"],[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M8 17v-3"]],"bar-chart-big":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[5,15,5,4,12,1],[5,7,8,4,9,1]],"bar-chart-horizontal":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M7 16h8"],[6,"M7 11h12"],[6,"M7 6h3"]],"bar-chart-horizontal-big":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[5,7,13,9,4,1],[5,7,5,12,4,1]],barcode:[[6,"M3 5v14"],[6,"M8 5v14"],[6,"M12 5v14"],[6,"M17 5v14"],[6,"M21 5v14"]],baseline:[[6,"M4 20h16"],[6,"m6 16 6-12 6 12"],[6,"M8 12h8"]],bath:[[6,"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5"],[0,10,5,8,7],[0,2,12,22,12],[0,7,19,7,21],[0,17,19,17,21]],battery:[[5,2,7,16,10,2,2],[0,22,11,22,13]],"battery-charging":[[6,"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"],[6,"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1"],[6,"m11 7-3 5h4l-3 5"],[0,22,11,22,13]],"battery-full":[[5,2,7,16,10,2,2],[0,22,11,22,13],[0,6,11,6,13],[0,10,11,10,13],[0,14,11,14,13]],"battery-low":[[5,2,7,16,10,2,2],[0,22,11,22,13],[0,6,11,6,13]],"battery-medium":[[5,2,7,16,10,2,2],[0,22,11,22,13],[0,6,11,6,13],[0,10,11,10,13]],"battery-warning":[[6,"M10 17h.01"],[6,"M10 7v6"],[6,"M14 7h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"],[6,"M22 11v2"],[6,"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"]],beaker:[[6,"M4.5 3h15"],[6,"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3"],[6,"M6 14h12"]],bean:[[6,"M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"],[6,"M5.341 10.62a4 4 0 1 0 5.279-5.28"]],"bean-off":[[6,"M9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22a13.96 13.96 0 0 0 9.9-4.1"],[6,"M10.75 5.093A6 6 0 0 1 22 8c0 2.411-.61 4.68-1.683 6.66"],[6,"M5.341 10.62a4 4 0 0 0 6.487 1.208M10.62 5.341a4.015 4.015 0 0 1 2.039 2.04"],[0,2,2,22,22]],bed:[[6,"M2 4v16"],[6,"M2 8h18a2 2 0 0 1 2 2v10"],[6,"M2 17h20"],[6,"M6 8v9"]],"bed-double":[[6,"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8"],[6,"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4"],[6,"M12 4v6"],[6,"M2 18h20"]],"bed-single":[[6,"M3 20v-8a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8"],[6,"M5 10V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v4"],[6,"M3 18h18"]],beef:[[1,12.5,8.5,2.5],[6,"M12.5 2a6.5 6.5 0 0 0-6.22 4.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3A6.5 6.5 0 0 0 12.5 2Z"],[6,"m18.5 6 2.19 4.5a6.48 6.48 0 0 1 .31 2 6.49 6.49 0 0 1-2.6 5.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5"]],beer:[[6,"M17 11h1a3 3 0 0 1 0 6h-1"],[6,"M9 12v6"],[6,"M13 12v6"],[6,"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5Z"],[6,"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8"]],"beer-off":[[6,"M13 13v5"],[6,"M17 11.47V8"],[6,"M17 11h1a3 3 0 0 1 2.745 4.211"],[6,"m2 2 20 20"],[6,"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-3"],[6,"M7.536 7.535C6.766 7.649 6.154 8 5.5 8a2.5 2.5 0 0 1-1.768-4.268"],[6,"M8.727 3.204C9.306 2.767 9.885 2 11 2c1.56 0 2 1.5 3 1.5s1.72-.5 2.5-.5a1 1 0 1 1 0 5c-.78 0-1.5-.5-2.5-.5a3.149 3.149 0 0 0-.842.12"],[6,"M9 14.6V18"]],bell:[[6,"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"],[6,"M10.3 21a1.94 1.94 0 0 0 3.4 0"]],"bell-dot":[[6,"M19.4 14.9C20.2 16.4 21 17 21 17H3s3-2 3-9c0-3.3 2.7-6 6-6 .7 0 1.3.1 1.9.3"],[6,"M10.3 21a1.94 1.94 0 0 0 3.4 0"],[1,18,8,3]],"bell-electric":[[6,"M18.8 4A6.3 8.7 0 0 1 20 9"],[6,"M9 9h.01"],[1,9,9,7],[5,4,16,10,6,2],[6,"M14 19c3 0 4.6-1.6 4.6-1.6"],[1,20,16,2]],"bell-minus":[[6,"M18.4 12c.8 3.8 2.6 5 2.6 5H3s3-2 3-9c0-3.3 2.7-6 6-6 1.8 0 3.4.8 4.5 2"],[6,"M10.3 21a1.94 1.94 0 0 0 3.4 0"],[6,"M15 8h6"]],"bell-off":[[6,"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5"],[6,"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7"],[6,"M10.3 21a1.94 1.94 0 0 0 3.4 0"],[6,"m2 2 20 20"]],"bell-plus":[[6,"M19.3 14.8C20.1 16.4 21 17 21 17H3s3-2 3-9c0-3.3 2.7-6 6-6 1 0 1.9.2 2.8.7"],[6,"M10.3 21a1.94 1.94 0 0 0 3.4 0"],[6,"M15 8h6"],[6,"M18 5v6"]],"bell-ring":[[6,"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"],[6,"M10.3 21a1.94 1.94 0 0 0 3.4 0"],[6,"M4 2C2.8 3.7 2 5.7 2 8"],[6,"M22 8c0-2.3-.8-4.3-2-6"]],"between-horizonal-end":[[5,3,3,13,7,1],[6,"m22 15-3-3 3-3"],[5,3,14,13,7,1]],"between-horizonal-start":[[5,8,3,13,7,1],[6,"m2 9 3 3-3 3"],[5,8,14,13,7,1]],"between-horizontal-end":[[5,3,3,13,7,1],[6,"m22 15-3-3 3-3"],[5,3,14,13,7,1]],"between-horizontal-start":[[5,8,3,13,7,1],[6,"m2 9 3 3-3 3"],[5,8,14,13,7,1]],"between-vertical-end":[[5,3,3,7,13,1],[6,"m9 22 3-3 3 3"],[5,14,3,7,13,1]],"between-vertical-start":[[5,3,8,7,13,1],[6,"m15 2-3 3-3-3"],[5,14,8,7,13,1]],"biceps-flexed":[[6,"M12.409 13.017A5 5 0 0 1 22 15c0 3.866-4 7-9 7-4.077 0-8.153-.82-10.371-2.462-.426-.316-.631-.832-.62-1.362C2.118 12.723 2.627 2 10 2a3 3 0 0 1 3 3 2 2 0 0 1-2 2c-1.105 0-1.64-.444-2-1"],[6,"M15 14a5 5 0 0 0-7.584 2"],[6,"M9.964 6.825C8.019 7.977 9.5 13 8 15"]],bike:[[1,18.5,17.5,3.5],[1,5.5,17.5,3.5],[1,15,5,1],[6,"M12 17.5V14l-3-3 4-3 2 3h2"]],binary:[[5,14,14,4,6,2],[5,6,4,4,6,2],[6,"M6 20h4"],[6,"M14 10h4"],[6,"M6 14h2v6"],[6,"M14 4h2v6"]],binoculars:[[6,"M10 10h4"],[6,"M19 7V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3"],[6,"M20 21a2 2 0 0 0 2-2v-3.851c0-1.39-2-2.962-2-4.829V8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2z"],[6,"M 22 16 L 2 16"],[6,"M4 21a2 2 0 0 1-2-2v-3.851c0-1.39 2-2.962 2-4.829V8a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2z"],[6,"M9 7V4a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v3"]],biohazard:[[1,12,11.9,2],[6,"M6.7 3.4c-.9 2.5 0 5.2 2.2 6.7C6.5 9 3.7 9.6 2 11.6"],[6,"m8.9 10.1 1.4.8"],[6,"M17.3 3.4c.9 2.5 0 5.2-2.2 6.7 2.4-1.2 5.2-.6 6.9 1.5"],[6,"m15.1 10.1-1.4.8"],[6,"M16.7 20.8c-2.6-.4-4.6-2.6-4.7-5.3-.2 2.6-2.1 4.8-4.7 5.2"],[6,"M12 13.9v1.6"],[6,"M13.5 5.4c-1-.2-2-.2-3 0"],[6,"M17 16.4c.7-.7 1.2-1.6 1.5-2.5"],[6,"M5.5 13.9c.3.9.8 1.8 1.5 2.5"]],bird:[[6,"M16 7h.01"],[6,"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20"],[6,"m20 7 2 .5-2 .5"],[6,"M10 18v3"],[6,"M14 17.75V21"],[6,"M7 18a6 6 0 0 0 3.84-10.61"]],bitcoin:[[6,"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727"]],blend:[[1,9,9,7],[1,15,15,7]],blinds:[[6,"M3 3h18"],[6,"M20 7H8"],[6,"M20 11H8"],[6,"M10 19h10"],[6,"M8 15h12"],[6,"M4 3v14"],[1,4,19,2]],blocks:[[5,14,3,7,7,1],[6,"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3"]],bluetooth:[[6,"m7 7 10 10-5 5V2l5 5L7 17"]],"bluetooth-connected":[[6,"m7 7 10 10-5 5V2l5 5L7 17"],[0,18,12,21,12],[0,3,12,6,12]],"bluetooth-off":[[6,"m17 17-5 5V12l-5 5"],[6,"m2 2 20 20"],[6,"M14.5 9.5 17 7l-5-5v4.5"]],"bluetooth-searching":[[6,"m7 7 10 10-5 5V2l5 5L7 17"],[6,"M20.83 14.83a4 4 0 0 0 0-5.66"],[6,"M18 12h.01"]],bold:[[6,"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"]],bolt:[[6,"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],[1,12,12,4]],bomb:[[1,11,13,9],[6,"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"],[6,"m22 2-1.5 1.5"]],bone:[[6,"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z"]],book:[[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"]],"book-a":[[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"m8 13 4-7 4 7"],[6,"M9.1 11h5.7"]],"book-audio":[[6,"M12 6v7"],[6,"M16 8v3"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"M8 8v3"]],"book-check":[[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"m9 9.5 2 2 4-4"]],"book-copy":[[6,"M2 16V4a2 2 0 0 1 2-2h11"],[6,"M22 18H11a2 2 0 1 0 0 4h10.5a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5H11a2 2 0 0 0-2 2v12"],[6,"M5 14H4a2 2 0 1 0 0 4h1"]],"book-dashed":[[6,"M12 17h2"],[6,"M12 22h2"],[6,"M12 2h2"],[6,"M18 22h1a1 1 0 0 0 1-1"],[6,"M18 2h1a1 1 0 0 1 1 1v1"],[6,"M20 15v2h-2"],[6,"M20 8v3"],[6,"M4 11V9"],[6,"M4 19.5V15"],[6,"M4 5v-.5A2.5 2.5 0 0 1 6.5 2H8"],[6,"M8 22H6.5a1 1 0 0 1 0-5H8"]],"book-down":[[6,"M12 13V7"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"m9 10 3 3 3-3"]],"book-headphones":[[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"M8 12v-2a4 4 0 0 1 8 0v2"],[1,15,12,1],[1,9,12,1]],"book-heart":[[6,"M16 8.2A2.22 2.22 0 0 0 13.8 6c-.8 0-1.4.3-1.8.9-.4-.6-1-.9-1.8-.9A2.22 2.22 0 0 0 8 8.2c0 .6.3 1.2.7 1.6A226.652 226.652 0 0 0 12 13a404 404 0 0 0 3.3-3.1 2.413 2.413 0 0 0 .7-1.7"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"]],"book-image":[[6,"m20 13.7-2.1-2.1a2 2 0 0 0-2.8 0L9.7 17"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[1,10,8,2]],"book-key":[[6,"m19 3 1 1"],[6,"m20 2-4.5 4.5"],[6,"M20 8v13a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H14"],[1,14,8,2]],"book-lock":[[6,"M18 6V4a2 2 0 1 0-4 0v2"],[6,"M20 15v6a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H10"],[5,12,6,8,5,1]],"book-marked":[[6,"M10 2v8l3-3 3 3V2"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"]],"book-minus":[[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"M9 10h6"]],"book-open":[[6,"M12 7v14"],[6,"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"]],"book-open-check":[[6,"M12 21V7"],[6,"m16 12 2 2 4-4"],[6,"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3"]],"book-open-text":[[6,"M12 7v14"],[6,"M16 12h2"],[6,"M16 8h2"],[6,"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"],[6,"M6 12h2"],[6,"M6 8h2"]],"book-plus":[[6,"M12 7v6"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"M9 10h6"]],"book-template":[[6,"M12 17h2"],[6,"M12 22h2"],[6,"M12 2h2"],[6,"M18 22h1a1 1 0 0 0 1-1"],[6,"M18 2h1a1 1 0 0 1 1 1v1"],[6,"M20 15v2h-2"],[6,"M20 8v3"],[6,"M4 11V9"],[6,"M4 19.5V15"],[6,"M4 5v-.5A2.5 2.5 0 0 1 6.5 2H8"],[6,"M8 22H6.5a1 1 0 0 1 0-5H8"]],"book-text":[[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"M8 11h8"],[6,"M8 7h6"]],"book-type":[[6,"M10 13h4"],[6,"M12 6v7"],[6,"M16 8V6H8v2"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"]],"book-up":[[6,"M12 13V7"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"m9 10 3-3 3 3"]],"book-up-2":[[6,"M12 13V7"],[6,"M18 2h1a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2"],[6,"m9 10 3-3 3 3"],[6,"m9 5 3-3 3 3"]],"book-user":[[6,"M15 13a3 3 0 1 0-6 0"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[1,12,8,2]],"book-x":[[6,"m14.5 7-5 5"],[6,"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"],[6,"m9.5 7 5 5"]],bookmark:[[6,"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"]],"bookmark-check":[[6,"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z"],[6,"m9 10 2 2 4-4"]],"bookmark-minus":[[6,"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"],[0,15,10,9,10]],"bookmark-plus":[[6,"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"],[0,12,7,12,13],[0,15,10,9,10]],"bookmark-x":[[6,"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z"],[6,"m14.5 7.5-5 5"],[6,"m9.5 7.5 5 5"]],"boom-box":[[6,"M4 9V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4"],[6,"M8 8v1"],[6,"M12 8v1"],[6,"M16 8v1"],[5,2,9,20,12,2],[1,8,15,2],[1,16,15,2]],bot:[[6,"M12 8V4H8"],[5,4,8,16,12,2],[6,"M2 14h2"],[6,"M20 14h2"],[6,"M15 13v2"],[6,"M9 13v2"]],"bot-message-square":[[6,"M12 6V2H8"],[6,"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"],[6,"M2 12h2"],[6,"M9 11v2"],[6,"M15 11v2"],[6,"M20 12h2"]],"bot-off":[[6,"M13.67 8H18a2 2 0 0 1 2 2v4.33"],[6,"M2 14h2"],[6,"M20 14h2"],[6,"M22 22 2 2"],[6,"M8 8H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 1.414-.586"],[6,"M9 13v2"],[6,"M9.67 4H12v2.33"]],box:[[6,"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"],[6,"m3.3 7 8.7 5 8.7-5"],[6,"M12 22V12"]],"box-select":[[6,"M5 3a2 2 0 0 0-2 2"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M21 19a2 2 0 0 1-2 2"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M9 3h1"],[6,"M9 21h1"],[6,"M14 3h1"],[6,"M14 21h1"],[6,"M3 9v1"],[6,"M21 9v1"],[6,"M3 14v1"],[6,"M21 14v1"]],boxes:[[6,"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"],[6,"m7 16.5-4.74-2.85"],[6,"m7 16.5 5-3"],[6,"M7 16.5v5.17"],[6,"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"],[6,"m17 16.5-5-3"],[6,"m17 16.5 4.74-2.85"],[6,"M17 16.5v5.17"],[6,"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"],[6,"M12 8 7.26 5.15"],[6,"m12 8 4.74-2.85"],[6,"M12 13.5V8"]],braces:[[6,"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1"],[6,"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1"]],brackets:[[6,"M16 3h3v18h-3"],[6,"M8 21H5V3h3"]],brain:[[6,"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"],[6,"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"],[6,"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"],[6,"M17.599 6.5a3 3 0 0 0 .399-1.375"],[6,"M6.003 5.125A3 3 0 0 0 6.401 6.5"],[6,"M3.477 10.896a4 4 0 0 1 .585-.396"],[6,"M19.938 10.5a4 4 0 0 1 .585.396"],[6,"M6 18a4 4 0 0 1-1.967-.516"],[6,"M19.967 17.484A4 4 0 0 1 18 18"]],"brain-circuit":[[6,"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"],[6,"M9 13a4.5 4.5 0 0 0 3-4"],[6,"M6.003 5.125A3 3 0 0 0 6.401 6.5"],[6,"M3.477 10.896a4 4 0 0 1 .585-.396"],[6,"M6 18a4 4 0 0 1-1.967-.516"],[6,"M12 13h4"],[6,"M12 18h6a2 2 0 0 1 2 2v1"],[6,"M12 8h8"],[6,"M16 8V5a2 2 0 0 1 2-2"],[1,16,13,.5],[1,18,3,.5],[1,20,21,.5],[1,20,8,.5]],"brain-cog":[[6,"M12 5a3 3 0 1 0-5.997.142 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588 4 4 0 0 0 7.636 2.106 3.2 3.2 0 0 0 .164-.546c.028-.13.306-.13.335 0a3.2 3.2 0 0 0 .163.546 4 4 0 0 0 7.636-2.106 4 4 0 0 0 .556-6.588 4 4 0 0 0-2.526-5.77A3 3 0 1 0 12 5"],[6,"M17.599 6.5a3 3 0 0 0 .399-1.375"],[6,"M6.003 5.125A3 3 0 0 0 6.401 6.5"],[6,"M3.477 10.896a4 4 0 0 1 .585-.396"],[6,"M19.938 10.5a4 4 0 0 1 .585.396"],[6,"M6 18a4 4 0 0 1-1.967-.516"],[6,"M19.967 17.484A4 4 0 0 1 18 18"],[1,12,12,3],[6,"m15.7 10.4-.9.4"],[6,"m9.2 13.2-.9.4"],[6,"m13.6 15.7-.4-.9"],[6,"m10.8 9.2-.4-.9"],[6,"m15.7 13.5-.9-.4"],[6,"m9.2 10.9-.9-.4"],[6,"m10.5 15.7.4-.9"],[6,"m13.1 9.2.4-.9"]],"brick-wall":[[5,3,3,18,18,2],[6,"M12 9v6"],[6,"M16 15v6"],[6,"M16 3v6"],[6,"M3 15h18"],[6,"M3 9h18"],[6,"M8 15v6"],[6,"M8 3v6"]],briefcase:[[6,"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],[5,2,6,20,14,2]],"briefcase-business":[[6,"M12 12h.01"],[6,"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"],[6,"M22 13a18.15 18.15 0 0 1-20 0"],[5,2,6,20,14,2]],"briefcase-conveyor-belt":[[6,"M10 20v2"],[6,"M14 20v2"],[6,"M18 20v2"],[6,"M21 20H3"],[6,"M6 20v2"],[6,"M8 16V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v12"],[5,4,6,16,10,2]],"briefcase-medical":[[6,"M12 11v4"],[6,"M14 13h-4"],[6,"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"],[6,"M18 6v14"],[6,"M6 6v14"],[5,2,6,20,14,2]],"bring-to-front":[[5,8,8,8,8,2],[6,"M4 10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2"],[6,"M14 20a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2"]],brush:[[6,"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08"],[6,"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z"]],bug:[[6,"m8 2 1.88 1.88"],[6,"M14.12 3.88 16 2"],[6,"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"],[6,"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"],[6,"M12 20v-9"],[6,"M6.53 9C4.6 8.8 3 7.1 3 5"],[6,"M6 13H2"],[6,"M3 21c0-2.1 1.7-3.9 3.8-4"],[6,"M20.97 5c0 2.1-1.6 3.8-3.5 4"],[6,"M22 13h-4"],[6,"M17.2 17c2.1.1 3.8 1.9 3.8 4"]],"bug-off":[[6,"M15 7.13V6a3 3 0 0 0-5.14-2.1L8 2"],[6,"M14.12 3.88 16 2"],[6,"M22 13h-4v-2a4 4 0 0 0-4-4h-1.3"],[6,"M20.97 5c0 2.1-1.6 3.8-3.5 4"],[6,"m2 2 20 20"],[6,"M7.7 7.7A4 4 0 0 0 6 11v3a6 6 0 0 0 11.13 3.13"],[6,"M12 20v-8"],[6,"M6 13H2"],[6,"M3 21c0-2.1 1.7-3.9 3.8-4"]],"bug-play":[[6,"M12.765 21.522a.5.5 0 0 1-.765-.424v-8.196a.5.5 0 0 1 .765-.424l5.878 3.674a1 1 0 0 1 0 1.696z"],[6,"M14.12 3.88 16 2"],[6,"M18 11a4 4 0 0 0-4-4h-4a4 4 0 0 0-4 4v3a6.1 6.1 0 0 0 2 4.5"],[6,"M20.97 5c0 2.1-1.6 3.8-3.5 4"],[6,"M3 21c0-2.1 1.7-3.9 3.8-4"],[6,"M6 13H2"],[6,"M6.53 9C4.6 8.8 3 7.1 3 5"],[6,"m8 2 1.88 1.88"],[6,"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"]],building:[[5,4,2,16,20,2,2],[6,"M9 22v-4h6v4"],[6,"M8 6h.01"],[6,"M16 6h.01"],[6,"M12 6h.01"],[6,"M12 10h.01"],[6,"M12 14h.01"],[6,"M16 10h.01"],[6,"M16 14h.01"],[6,"M8 10h.01"],[6,"M8 14h.01"]],"building-2":[[6,"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"],[6,"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"],[6,"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"],[6,"M10 6h4"],[6,"M10 10h4"],[6,"M10 14h4"],[6,"M10 18h4"]],bus:[[6,"M8 6v6"],[6,"M15 6v6"],[6,"M2 12h19.6"],[6,"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"],[1,7,18,2],[6,"M9 18h5"],[1,16,18,2]],"bus-front":[[6,"M4 6 2 7"],[6,"M10 6h4"],[6,"m22 7-2-1"],[5,4,3,16,16,2],[6,"M4 11h16"],[6,"M8 15h.01"],[6,"M16 15h.01"],[6,"M6 19v2"],[6,"M18 21v-2"]],cable:[[6,"M17 21v-2a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1"],[6,"M19 15V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V9"],[6,"M21 21v-2h-4"],[6,"M3 5h4V3"],[6,"M7 5a1 1 0 0 1 1 1v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1V3"]],"cable-car":[[6,"M10 3h.01"],[6,"M14 2h.01"],[6,"m2 9 20-5"],[6,"M12 12V6.5"],[5,4,12,16,10,3],[6,"M9 12v5"],[6,"M15 12v5"],[6,"M4 17h16"]],cake:[[6,"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"],[6,"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1"],[6,"M2 21h20"],[6,"M7 8v3"],[6,"M12 8v3"],[6,"M17 8v3"],[6,"M7 4h.01"],[6,"M12 4h.01"],[6,"M17 4h.01"]],"cake-slice":[[1,9,7,2],[6,"M7.2 7.9 3 11v9c0 .6.4 1 1 1h16c.6 0 1-.4 1-1v-9c0-2-3-6-7-8l-3.6 2.6"],[6,"M16 13H3"],[6,"M16 17H3"]],calculator:[[5,4,2,16,20,2],[0,8,6,16,6],[0,16,14,16,18],[6,"M16 10h.01"],[6,"M12 10h.01"],[6,"M8 10h.01"],[6,"M12 14h.01"],[6,"M8 14h.01"],[6,"M12 18h.01"],[6,"M8 18h.01"]],calendar:[[6,"M8 2v4"],[6,"M16 2v4"],[5,3,4,18,18,2],[6,"M3 10h18"]],"calendar-arrow-down":[[6,"m14 18 4 4 4-4"],[6,"M16 2v4"],[6,"M18 14v8"],[6,"M21 11.354V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.343"],[6,"M3 10h18"],[6,"M8 2v4"]],"calendar-arrow-up":[[6,"m14 18 4-4 4 4"],[6,"M16 2v4"],[6,"M18 22v-8"],[6,"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9"],[6,"M3 10h18"],[6,"M8 2v4"]],"calendar-check":[[6,"M8 2v4"],[6,"M16 2v4"],[5,3,4,18,18,2],[6,"M3 10h18"],[6,"m9 16 2 2 4-4"]],"calendar-check-2":[[6,"M8 2v4"],[6,"M16 2v4"],[6,"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"],[6,"M3 10h18"],[6,"m16 20 2 2 4-4"]],"calendar-clock":[[6,"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],[6,"M16 2v4"],[6,"M8 2v4"],[6,"M3 10h5"],[6,"M17.5 17.5 16 16.3V14"],[1,16,16,6]],"calendar-cog":[[6,"m15.2 16.9-.9-.4"],[6,"m15.2 19.1-.9.4"],[6,"M16 2v4"],[6,"m16.9 15.2-.4-.9"],[6,"m16.9 20.8-.4.9"],[6,"m19.5 14.3-.4.9"],[6,"m19.5 21.7-.4-.9"],[6,"M21 10.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6"],[6,"m21.7 16.5-.9.4"],[6,"m21.7 19.5-.9-.4"],[6,"M3 10h18"],[6,"M8 2v4"],[1,18,18,3]],"calendar-days":[[6,"M8 2v4"],[6,"M16 2v4"],[5,3,4,18,18,2],[6,"M3 10h18"],[6,"M8 14h.01"],[6,"M12 14h.01"],[6,"M16 14h.01"],[6,"M8 18h.01"],[6,"M12 18h.01"],[6,"M16 18h.01"]],"calendar-fold":[[6,"M8 2v4"],[6,"M16 2v4"],[6,"M21 17V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11Z"],[6,"M3 10h18"],[6,"M15 22v-4a2 2 0 0 1 2-2h4"]],"calendar-heart":[[6,"M3 10h18V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7"],[6,"M8 2v4"],[6,"M16 2v4"],[6,"M21.29 14.7a2.43 2.43 0 0 0-2.65-.52c-.3.12-.57.3-.8.53l-.34.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L17.5 22l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z"]],"calendar-minus":[[6,"M16 19h6"],[6,"M16 2v4"],[6,"M21 15V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5"],[6,"M3 10h18"],[6,"M8 2v4"]],"calendar-minus-2":[[6,"M8 2v4"],[6,"M16 2v4"],[5,3,4,18,18,2],[6,"M3 10h18"],[6,"M10 16h4"]],"calendar-off":[[6,"M4.2 4.2A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18"],[6,"M21 15.5V6a2 2 0 0 0-2-2H9.5"],[6,"M16 2v4"],[6,"M3 10h7"],[6,"M21 10h-5.5"],[6,"m2 2 20 20"]],"calendar-plus":[[6,"M8 2v4"],[6,"M16 2v4"],[6,"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"],[6,"M3 10h18"],[6,"M16 19h6"],[6,"M19 16v6"]],"calendar-plus-2":[[6,"M8 2v4"],[6,"M16 2v4"],[5,3,4,18,18,2],[6,"M3 10h18"],[6,"M10 16h4"],[6,"M12 14v4"]],"calendar-range":[[5,3,4,18,18,2],[6,"M16 2v4"],[6,"M3 10h18"],[6,"M8 2v4"],[6,"M17 14h-6"],[6,"M13 18H7"],[6,"M7 14h.01"],[6,"M17 18h.01"]],"calendar-search":[[6,"M16 2v4"],[6,"M21 11.75V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.25"],[6,"m22 22-1.875-1.875"],[6,"M3 10h18"],[6,"M8 2v4"],[1,18,18,3]],"calendar-x":[[6,"M8 2v4"],[6,"M16 2v4"],[5,3,4,18,18,2],[6,"M3 10h18"],[6,"m14 14-4 4"],[6,"m10 14 4 4"]],"calendar-x2":[[6,"M8 2v4"],[6,"M16 2v4"],[6,"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"],[6,"M3 10h18"],[6,"m17 22 5-5"],[6,"m17 17 5 5"]],camera:[[6,"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"],[1,12,13,3]],"camera-off":[[0,2,2,22,22],[6,"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16"],[6,"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5"],[6,"M14.121 15.121A3 3 0 1 1 9.88 10.88"]],"candlestick-chart":[[6,"M9 5v4"],[5,7,9,4,6,1],[6,"M9 15v2"],[6,"M17 3v2"],[5,15,5,4,8,1],[6,"M17 13v3"],[6,"M3 3v16a2 2 0 0 0 2 2h16"]],candy:[[6,"m9.5 7.5-2 2a4.95 4.95 0 1 0 7 7l2-2a4.95 4.95 0 1 0-7-7Z"],[6,"M14 6.5v10"],[6,"M10 7.5v10"],[6,"m16 7 1-5 1.37.68A3 3 0 0 0 19.7 3H21v1.3c0 .46.1.92.32 1.33L22 7l-5 1"],[6,"m8 17-1 5-1.37-.68A3 3 0 0 0 4.3 21H3v-1.3a3 3 0 0 0-.32-1.33L2 17l5-1"]],"candy-cane":[[6,"M5.7 21a2 2 0 0 1-3.5-2l8.6-14a6 6 0 0 1 10.4 6 2 2 0 1 1-3.464-2 2 2 0 1 0-3.464-2Z"],[6,"M17.75 7 15 2.1"],[6,"M10.9 4.8 13 9"],[6,"m7.9 9.7 2 4.4"],[6,"M4.9 14.7 7 18.9"]],"candy-off":[[6,"m8.5 8.5-1 1a4.95 4.95 0 0 0 7 7l1-1"],[6,"M11.843 6.187A4.947 4.947 0 0 1 16.5 7.5a4.947 4.947 0 0 1 1.313 4.657"],[6,"M14 16.5V14"],[6,"M14 6.5v1.843"],[6,"M10 10v7.5"],[6,"m16 7 1-5 1.367.683A3 3 0 0 0 19.708 3H21v1.292a3 3 0 0 0 .317 1.341L22 7l-5 1"],[6,"m8 17-1 5-1.367-.683A3 3 0 0 0 4.292 21H3v-1.292a3 3 0 0 0-.317-1.341L2 17l5-1"],[0,2,2,22,22]],cannabis:[[6,"M12 22v-4"],[6,"M7 12c-1.5 0-4.5 1.5-5 3 3.5 1.5 6 1 6 1-1.5 1.5-2 3.5-2 5 2.5 0 4.5-1.5 6-3 1.5 1.5 3.5 3 6 3 0-1.5-.5-3.5-2-5 0 0 2.5.5 6-1-.5-1.5-3.5-3-5-3 1.5-1 4-4 4-6-2.5 0-5.5 1.5-7 3 0-2.5-.5-5-2-7-1.5 2-2 4.5-2 7-1.5-1.5-4.5-3-7-3 0 2 2.5 5 4 6"]],captions:[[5,3,5,18,14,2,2],[6,"M7 15h4M15 15h2M7 11h2M13 11h4"]],"captions-off":[[6,"M10.5 5H19a2 2 0 0 1 2 2v8.5"],[6,"M17 11h-.5"],[6,"M19 19H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2"],[6,"m2 2 20 20"],[6,"M7 11h4"],[6,"M7 15h2.5"]],car:[[6,"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"],[1,7,17,2],[6,"M9 17h6"],[1,17,17,2]],"car-front":[[6,"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8"],[6,"M7 14h.01"],[6,"M17 14h.01"],[5,3,10,18,8,2],[6,"M5 18v2"],[6,"M19 18v2"]],"car-taxi-front":[[6,"M10 2h4"],[6,"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8"],[6,"M7 14h.01"],[6,"M17 14h.01"],[5,3,10,18,8,2],[6,"M5 18v2"],[6,"M19 18v2"]],caravan:[[6,"M18 19V9a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v8a2 2 0 0 0 2 2h2"],[6,"M2 9h3a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2"],[6,"M22 17v1a1 1 0 0 1-1 1H10v-9a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v9"],[1,8,19,2]],carrot:[[6,"M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46"],[6,"M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z"],[6,"M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z"]],"case-lower":[[1,7,12,3],[6,"M10 9v6"],[1,17,12,3],[6,"M14 7v8"]],"case-sensitive":[[6,"m3 15 4-8 4 8"],[6,"M4 13h6"],[1,18,12,3],[6,"M21 9v6"]],"case-upper":[[6,"m3 15 4-8 4 8"],[6,"M4 13h6"],[6,"M15 11h4.5a2 2 0 0 1 0 4H15V7h4a2 2 0 0 1 0 4"]],"cassette-tape":[[5,2,4,20,16,2],[1,8,10,2],[6,"M8 12h8"],[1,16,10,2],[6,"m6 20 .7-2.9A1.4 1.4 0 0 1 8.1 16h7.8a1.4 1.4 0 0 1 1.4 1l.7 3"]],cast:[[6,"M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"],[6,"M2 12a9 9 0 0 1 8 8"],[6,"M2 16a5 5 0 0 1 4 4"],[0,2,20,2.01,20]],castle:[[6,"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z"],[6,"M18 11V4H6v7"],[6,"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4"],[6,"M22 11V9"],[6,"M2 11V9"],[6,"M6 4V2"],[6,"M18 4V2"],[6,"M10 4V2"],[6,"M14 4V2"]],cat:[[6,"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"],[6,"M8 14v.5"],[6,"M16 14v.5"],[6,"M11.25 16.25h1.5L12 17l-.75-.75Z"]],cctv:[[6,"M16.75 12h3.632a1 1 0 0 1 .894 1.447l-2.034 4.069a1 1 0 0 1-1.708.134l-2.124-2.97"],[6,"M17.106 9.053a1 1 0 0 1 .447 1.341l-3.106 6.211a1 1 0 0 1-1.342.447L3.61 12.3a2.92 2.92 0 0 1-1.3-3.91L3.69 5.6a2.92 2.92 0 0 1 3.92-1.3z"],[6,"M2 19h3.76a2 2 0 0 0 1.8-1.1L9 15"],[6,"M2 21v-4"],[6,"M7 9h.01"]],"chart-area":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z"]],"chart-bar":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M7 16h8"],[6,"M7 11h12"],[6,"M7 6h3"]],"chart-bar-big":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[5,7,13,9,4,1],[5,7,5,12,4,1]],"chart-bar-decreasing":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M7 11h8"],[6,"M7 16h3"],[6,"M7 6h12"]],"chart-bar-increasing":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M7 11h8"],[6,"M7 16h12"],[6,"M7 6h3"]],"chart-bar-stacked":[[6,"M11 13v4"],[6,"M15 5v4"],[6,"M3 3v16a2 2 0 0 0 2 2h16"],[5,7,13,9,4,1],[5,7,5,12,4,1]],"chart-candlestick":[[6,"M9 5v4"],[5,7,9,4,6,1],[6,"M9 15v2"],[6,"M17 3v2"],[5,15,5,4,8,1],[6,"M17 13v3"],[6,"M3 3v16a2 2 0 0 0 2 2h16"]],"chart-column":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M18 17V9"],[6,"M13 17V5"],[6,"M8 17v-3"]],"chart-column-big":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[5,15,5,4,12,1],[5,7,8,4,9,1]],"chart-column-decreasing":[[6,"M13 17V9"],[6,"M18 17v-3"],[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M8 17V5"]],"chart-column-increasing":[[6,"M13 17V9"],[6,"M18 17V5"],[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M8 17v-3"]],"chart-column-stacked":[[6,"M11 13H7"],[6,"M19 9h-4"],[6,"M3 3v16a2 2 0 0 0 2 2h16"],[5,15,5,4,12,1],[5,7,8,4,9,1]],"chart-gantt":[[6,"M10 6h8"],[6,"M12 16h6"],[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M8 11h7"]],"chart-line":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"m19 9-5 5-4-4-3 3"]],"chart-network":[[6,"m13.11 7.664 1.78 2.672"],[6,"m14.162 12.788-3.324 1.424"],[6,"m20 4-6.06 1.515"],[6,"M3 3v16a2 2 0 0 0 2 2h16"],[1,12,6,2],[1,16,12,2],[1,9,15,2]],"chart-no-axes-column":[[0,18,20,18,10],[0,12,20,12,4],[0,6,20,6,14]],"chart-no-axes-column-decreasing":[[6,"M12 20V10"],[6,"M18 20v-4"],[6,"M6 20V4"]],"chart-no-axes-column-increasing":[[0,12,20,12,10],[0,18,20,18,4],[0,6,20,6,16]],"chart-no-axes-combined":[[6,"M12 16v5"],[6,"M16 14v7"],[6,"M20 10v11"],[6,"m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15"],[6,"M4 18v3"],[6,"M8 14v7"]],"chart-no-axes-gantt":[[6,"M8 6h10"],[6,"M6 12h9"],[6,"M11 18h7"]],"chart-pie":[[6,"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z"],[6,"M21.21 15.89A10 10 0 1 1 8 2.83"]],"chart-scatter":[[1,7.5,7.5,.5],[1,18.5,5.5,.5],[1,11.5,11.5,.5],[1,7.5,16.5,.5],[1,17.5,14.5,.5],[6,"M3 3v16a2 2 0 0 0 2 2h16"]],"chart-spline":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"M7 16c.5-2 1.5-7 4-7 2 0 2 3 4 3 2.5 0 4.5-5 5-7"]],check:[[6,"M20 6 9 17l-5-5"]],"check-check":[[6,"M18 6 7 17l-5-5"],[6,"m22 10-7.5 7.5L13 16"]],"check-circle":[[6,"M21.801 10A10 10 0 1 1 17 3.335"],[6,"m9 11 3 3L22 4"]],"check-circle-2":[[1,12,12,10],[6,"m9 12 2 2 4-4"]],"check-square":[[6,"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5"],[6,"m9 11 3 3L22 4"]],"check-square-2":[[5,3,3,18,18,2],[6,"m9 12 2 2 4-4"]],"chef-hat":[[6,"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z"],[6,"M6 17h12"]],cherry:[[6,"M2 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z"],[6,"M12 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z"],[6,"M7 14c3.22-2.91 4.29-8.75 5-12 1.66 2.38 4.94 9 5 12"],[6,"M22 9c-4.29 0-7.14-2.33-10-7 5.71 0 10 4.67 10 7Z"]],"chevron-down":[[6,"m6 9 6 6 6-6"]],"chevron-down-circle":[[1,12,12,10],[6,"m16 10-4 4-4-4"]],"chevron-down-square":[[5,3,3,18,18,2],[6,"m16 10-4 4-4-4"]],"chevron-first":[[6,"m17 18-6-6 6-6"],[6,"M7 6v12"]],"chevron-last":[[6,"m7 18 6-6-6-6"],[6,"M17 6v12"]],"chevron-left":[[6,"m15 18-6-6 6-6"]],"chevron-left-circle":[[1,12,12,10],[6,"m14 16-4-4 4-4"]],"chevron-left-square":[[5,3,3,18,18,2],[6,"m14 16-4-4 4-4"]],"chevron-right":[[6,"m9 18 6-6-6-6"]],"chevron-right-circle":[[1,12,12,10],[6,"m10 8 4 4-4 4"]],"chevron-right-square":[[5,3,3,18,18,2],[6,"m10 8 4 4-4 4"]],"chevron-up":[[6,"m18 15-6-6-6 6"]],"chevron-up-circle":[[1,12,12,10],[6,"m8 14 4-4 4 4"]],"chevron-up-square":[[5,3,3,18,18,2],[6,"m8 14 4-4 4 4"]],"chevrons-down":[[6,"m7 6 5 5 5-5"],[6,"m7 13 5 5 5-5"]],"chevrons-down-up":[[6,"m7 20 5-5 5 5"],[6,"m7 4 5 5 5-5"]],"chevrons-left":[[6,"m11 17-5-5 5-5"],[6,"m18 17-5-5 5-5"]],"chevrons-left-right":[[6,"m9 7-5 5 5 5"],[6,"m15 7 5 5-5 5"]],"chevrons-left-right-ellipsis":[[6,"m18 8 4 4-4 4"],[6,"m6 8-4 4 4 4"],[6,"M8 12h.01"],[6,"M12 12h.01"],[6,"M16 12h.01"]],"chevrons-right":[[6,"m6 17 5-5-5-5"],[6,"m13 17 5-5-5-5"]],"chevrons-right-left":[[6,"m20 17-5-5 5-5"],[6,"m4 17 5-5-5-5"]],"chevrons-up":[[6,"m17 11-5-5-5 5"],[6,"m17 18-5-5-5 5"]],"chevrons-up-down":[[6,"m7 15 5 5 5-5"],[6,"m7 9 5-5 5 5"]],chrome:[[1,12,12,10],[1,12,12,4],[0,21.17,8,12,8],[0,3.95,6.06,8.54,14],[0,10.88,21.94,15.46,14]],church:[[6,"M10 9h4"],[6,"M12 7v5"],[6,"M14 22v-4a2 2 0 0 0-4 0v4"],[6,"M18 22V5.618a1 1 0 0 0-.553-.894l-4.553-2.277a2 2 0 0 0-1.788 0L6.553 4.724A1 1 0 0 0 6 5.618V22"],[6,"m18 7 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.618a1 1 0 0 1 .553-.894L6 7"]],cigarette:[[6,"M17 12H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h14"],[6,"M18 8c0-2.5-2-2.5-2-5"],[6,"M21 16a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"],[6,"M22 8c0-2.5-2-2.5-2-5"],[6,"M7 12v4"]],"cigarette-off":[[6,"M12 12H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h13"],[6,"M18 8c0-2.5-2-2.5-2-5"],[6,"m2 2 20 20"],[6,"M21 12a1 1 0 0 1 1 1v2a1 1 0 0 1-.5.866"],[6,"M22 8c0-2.5-2-2.5-2-5"],[6,"M7 12v4"]],circle:[[1,12,12,10]],"circle-alert":[[1,12,12,10],[0,12,8,12,12],[0,12,16,12.01,16]],"circle-arrow-down":[[1,12,12,10],[6,"M12 8v8"],[6,"m8 12 4 4 4-4"]],"circle-arrow-left":[[1,12,12,10],[6,"M16 12H8"],[6,"m12 8-4 4 4 4"]],"circle-arrow-out-down-left":[[6,"M2 12a10 10 0 1 1 10 10"],[6,"m2 22 10-10"],[6,"M8 22H2v-6"]],"circle-arrow-out-down-right":[[6,"M12 22a10 10 0 1 1 10-10"],[6,"M22 22 12 12"],[6,"M22 16v6h-6"]],"circle-arrow-out-up-left":[[6,"M2 8V2h6"],[6,"m2 2 10 10"],[6,"M12 2A10 10 0 1 1 2 12"]],"circle-arrow-out-up-right":[[6,"M22 12A10 10 0 1 1 12 2"],[6,"M22 2 12 12"],[6,"M16 2h6v6"]],"circle-arrow-right":[[1,12,12,10],[6,"M8 12h8"],[6,"m12 16 4-4-4-4"]],"circle-arrow-up":[[1,12,12,10],[6,"m16 12-4-4-4 4"],[6,"M12 16V8"]],"circle-check":[[1,12,12,10],[6,"m9 12 2 2 4-4"]],"circle-check-big":[[6,"M21.801 10A10 10 0 1 1 17 3.335"],[6,"m9 11 3 3L22 4"]],"circle-chevron-down":[[1,12,12,10],[6,"m16 10-4 4-4-4"]],"circle-chevron-left":[[1,12,12,10],[6,"m14 16-4-4 4-4"]],"circle-chevron-right":[[1,12,12,10],[6,"m10 8 4 4-4 4"]],"circle-chevron-up":[[1,12,12,10],[6,"m8 14 4-4 4 4"]],"circle-dashed":[[6,"M10.1 2.182a10 10 0 0 1 3.8 0"],[6,"M13.9 21.818a10 10 0 0 1-3.8 0"],[6,"M17.609 3.721a10 10 0 0 1 2.69 2.7"],[6,"M2.182 13.9a10 10 0 0 1 0-3.8"],[6,"M20.279 17.609a10 10 0 0 1-2.7 2.69"],[6,"M21.818 10.1a10 10 0 0 1 0 3.8"],[6,"M3.721 6.391a10 10 0 0 1 2.7-2.69"],[6,"M6.391 20.279a10 10 0 0 1-2.69-2.7"]],"circle-divide":[[0,8,12,16,12],[0,12,16,12,16],[0,12,8,12,8],[1,12,12,10]],"circle-dollar-sign":[[1,12,12,10],[6,"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"],[6,"M12 18V6"]],"circle-dot":[[1,12,12,10],[1,12,12,1]],"circle-dot-dashed":[[6,"M10.1 2.18a9.93 9.93 0 0 1 3.8 0"],[6,"M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7"],[6,"M21.82 10.1a9.93 9.93 0 0 1 0 3.8"],[6,"M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69"],[6,"M13.9 21.82a9.94 9.94 0 0 1-3.8 0"],[6,"M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7"],[6,"M2.18 13.9a9.93 9.93 0 0 1 0-3.8"],[6,"M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69"],[1,12,12,1]],"circle-ellipsis":[[1,12,12,10],[6,"M17 12h.01"],[6,"M12 12h.01"],[6,"M7 12h.01"]],"circle-equal":[[6,"M7 10h10"],[6,"M7 14h10"],[1,12,12,10]],"circle-fading-arrow-up":[[6,"M12 2a10 10 0 0 1 7.38 16.75"],[6,"m16 12-4-4-4 4"],[6,"M12 16V8"],[6,"M2.5 8.875a10 10 0 0 0-.5 3"],[6,"M2.83 16a10 10 0 0 0 2.43 3.4"],[6,"M4.636 5.235a10 10 0 0 1 .891-.857"],[6,"M8.644 21.42a10 10 0 0 0 7.631-.38"]],"circle-fading-plus":[[6,"M12 2a10 10 0 0 1 7.38 16.75"],[6,"M12 8v8"],[6,"M16 12H8"],[6,"M2.5 8.875a10 10 0 0 0-.5 3"],[6,"M2.83 16a10 10 0 0 0 2.43 3.4"],[6,"M4.636 5.235a10 10 0 0 1 .891-.857"],[6,"M8.644 21.42a10 10 0 0 0 7.631-.38"]],"circle-gauge":[[6,"M15.6 2.7a10 10 0 1 0 5.7 5.7"],[1,12,12,2],[6,"M13.4 10.6 19 5"]],"circle-help":[[1,12,12,10],[6,"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],[6,"M12 17h.01"]],"circle-minus":[[1,12,12,10],[6,"M8 12h8"]],"circle-off":[[6,"m2 2 20 20"],[6,"M8.35 2.69A10 10 0 0 1 21.3 15.65"],[6,"M19.08 19.08A10 10 0 1 1 4.92 4.92"]],"circle-parking":[[1,12,12,10],[6,"M9 17V7h4a3 3 0 0 1 0 6H9"]],"circle-parking-off":[[1,12,12,10],[6,"m5 5 14 14"],[6,"M13 13a3 3 0 1 0 0-6H9v2"],[6,"M9 17v-2.34"]],"circle-pause":[[1,12,12,10],[0,10,15,10,9],[0,14,15,14,9]],"circle-percent":[[1,12,12,10],[6,"m15 9-6 6"],[6,"M9 9h.01"],[6,"M15 15h.01"]],"circle-play":[[1,12,12,10],[3,"10 8 16 12 10 16 10 8"]],"circle-plus":[[1,12,12,10],[6,"M8 12h8"],[6,"M12 8v8"]],"circle-power":[[6,"M12 7v4"],[6,"M7.998 9.003a5 5 0 1 0 8-.005"],[1,12,12,10]],"circle-slash":[[1,12,12,10],[0,9,15,15,9]],"circle-slash-2":[[1,12,12,10],[6,"M22 2 2 22"]],"circle-slashed":[[1,12,12,10],[6,"M22 2 2 22"]],"circle-stop":[[1,12,12,10],[5,9,9,6,6,1]],"circle-user":[[1,12,12,10],[1,12,10,3],[6,"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"]],"circle-user-round":[[6,"M18 20a6 6 0 0 0-12 0"],[1,12,10,4],[1,12,12,10]],"circle-x":[[1,12,12,10],[6,"m15 9-6 6"],[6,"m9 9 6 6"]],"circuit-board":[[5,3,3,18,18,2],[6,"M11 9h4a2 2 0 0 0 2-2V3"],[1,9,9,2],[6,"M7 21v-4a2 2 0 0 1 2-2h4"],[1,15,15,2]],citrus:[[6,"M21.66 17.67a1.08 1.08 0 0 1-.04 1.6A12 12 0 0 1 4.73 2.38a1.1 1.1 0 0 1 1.61-.04z"],[6,"M19.65 15.66A8 8 0 0 1 8.35 4.34"],[6,"m14 10-5.5 5.5"],[6,"M14 17.85V10H6.15"]],clapperboard:[[6,"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z"],[6,"m6.2 5.3 3.1 3.9"],[6,"m12.4 3.4 3.1 4"],[6,"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z"]],clipboard:[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"]],"clipboard-check":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"m9 14 2 2 4-4"]],"clipboard-copy":[[5,8,2,8,4,1,1],[6,"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"],[6,"M16 4h2a2 2 0 0 1 2 2v4"],[6,"M21 14H11"],[6,"m15 10-4 4 4 4"]],"clipboard-edit":[[5,8,2,8,4,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"],[6,"M4 13.5V6a2 2 0 0 1 2-2h2"],[6,"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"clipboard-list":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"M12 11h4"],[6,"M12 16h4"],[6,"M8 11h.01"],[6,"M8 16h.01"]],"clipboard-minus":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"M9 14h6"]],"clipboard-paste":[[6,"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"],[6,"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"],[6,"m17 10 4 4-4 4"]],"clipboard-pen":[[5,8,2,8,4,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"],[6,"M4 13.5V6a2 2 0 0 1 2-2h2"],[6,"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"clipboard-pen-line":[[5,8,2,8,4,1],[6,"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5"],[6,"M16 4h2a2 2 0 0 1 1.73 1"],[6,"M8 18h1"],[6,"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"clipboard-plus":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"M9 14h6"],[6,"M12 17v-6"]],"clipboard-signature":[[5,8,2,8,4,1],[6,"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5"],[6,"M16 4h2a2 2 0 0 1 1.73 1"],[6,"M8 18h1"],[6,"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"clipboard-type":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"M9 12v-1h6v1"],[6,"M11 17h2"],[6,"M12 11v6"]],"clipboard-x":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"m15 11-6 6"],[6,"m9 11 6 6"]],clock:[[1,12,12,10],[2,"12 6 12 12 16 14"]],"clock-1":[[1,12,12,10],[2,"12 6 12 12 14.5 8"]],"clock-10":[[1,12,12,10],[2,"12 6 12 12 8 10"]],"clock-11":[[1,12,12,10],[2,"12 6 12 12 9.5 8"]],"clock-12":[[1,12,12,10],[2,"12 6 12 12"]],"clock-2":[[1,12,12,10],[2,"12 6 12 12 16 10"]],"clock-3":[[1,12,12,10],[2,"12 6 12 12 16.5 12"]],"clock-4":[[1,12,12,10],[2,"12 6 12 12 16 14"]],"clock-5":[[1,12,12,10],[2,"12 6 12 12 14.5 16"]],"clock-6":[[1,12,12,10],[2,"12 6 12 12 12 16.5"]],"clock-7":[[1,12,12,10],[2,"12 6 12 12 9.5 16"]],"clock-8":[[1,12,12,10],[2,"12 6 12 12 8 14"]],"clock-9":[[1,12,12,10],[2,"12 6 12 12 7.5 12"]],"clock-alert":[[6,"M12 6v6l4 2"],[6,"M16 21.16a10 10 0 1 1 5-13.516"],[6,"M20 11.5v6"],[6,"M20 21.5h.01"]],"clock-arrow-down":[[6,"M12.338 21.994A10 10 0 1 1 21.925 13.227"],[6,"M12 6v6l2 1"],[6,"m14 18 4 4 4-4"],[6,"M18 14v8"]],"clock-arrow-up":[[6,"M13.228 21.925A10 10 0 1 1 21.994 12.338"],[6,"M12 6v6l1.562.781"],[6,"m14 18 4-4 4 4"],[6,"M18 22v-8"]],cloud:[[6,"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"]],"cloud-cog":[[1,12,17,3],[6,"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2"],[6,"m15.7 18.4-.9-.3"],[6,"m9.2 15.9-.9-.3"],[6,"m10.6 20.7.3-.9"],[6,"m13.1 14.2.3-.9"],[6,"m13.6 20.7-.4-1"],[6,"m10.8 14.3-.4-1"],[6,"m8.3 18.6 1-.4"],[6,"m14.7 15.8 1-.4"]],"cloud-download":[[6,"M12 13v8l-4-4"],[6,"m12 21 4-4"],[6,"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284"]],"cloud-drizzle":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M8 19v1"],[6,"M8 14v1"],[6,"M16 19v1"],[6,"M16 14v1"],[6,"M12 21v1"],[6,"M12 16v1"]],"cloud-fog":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M16 17H7"],[6,"M17 21H9"]],"cloud-hail":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M16 14v2"],[6,"M8 14v2"],[6,"M16 20h.01"],[6,"M8 20h.01"],[6,"M12 16v2"],[6,"M12 22h.01"]],"cloud-lightning":[[6,"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973"],[6,"m13 12-3 5h4l-3 5"]],"cloud-moon":[[6,"M10.188 8.5A6 6 0 0 1 16 4a1 1 0 0 0 6 6 6 6 0 0 1-3 5.197"],[6,"M13 16a3 3 0 1 1 0 6H7a5 5 0 1 1 4.9-6Z"]],"cloud-moon-rain":[[6,"M10.188 8.5A6 6 0 0 1 16 4a1 1 0 0 0 6 6 6 6 0 0 1-3 5.197"],[6,"M11 20v2"],[6,"M3 20a5 5 0 1 1 8.9-4H13a3 3 0 0 1 2 5.24"],[6,"M7 19v2"]],"cloud-off":[[6,"m2 2 20 20"],[6,"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193"],[6,"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07"]],"cloud-rain":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M16 14v6"],[6,"M8 14v6"],[6,"M12 16v6"]],"cloud-rain-wind":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"m9.2 22 3-7"],[6,"m9 13-3 7"],[6,"m17 13-3 7"]],"cloud-snow":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M8 15h.01"],[6,"M8 19h.01"],[6,"M12 17h.01"],[6,"M12 21h.01"],[6,"M16 15h.01"],[6,"M16 19h.01"]],"cloud-sun":[[6,"M12 2v2"],[6,"m4.93 4.93 1.41 1.41"],[6,"M20 12h2"],[6,"m19.07 4.93-1.41 1.41"],[6,"M15.947 12.65a4 4 0 0 0-5.925-4.128"],[6,"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"]],"cloud-sun-rain":[[6,"M12 2v2"],[6,"m4.93 4.93 1.41 1.41"],[6,"M20 12h2"],[6,"m19.07 4.93-1.41 1.41"],[6,"M15.947 12.65a4 4 0 0 0-5.925-4.128"],[6,"M3 20a5 5 0 1 1 8.9-4H13a3 3 0 0 1 2 5.24"],[6,"M11 20v2"],[6,"M7 19v2"]],"cloud-upload":[[6,"M12 13v8"],[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"m8 17 4-4 4 4"]],cloudy:[[6,"M17.5 21H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"],[6,"M22 10a3 3 0 0 0-3-3h-2.207a5.502 5.502 0 0 0-10.702.5"]],clover:[[6,"M16.17 7.83 2 22"],[6,"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12"],[6,"m7.83 7.83 8.34 8.34"]],club:[[6,"M17.28 9.05a5.5 5.5 0 1 0-10.56 0A5.5 5.5 0 1 0 12 17.66a5.5 5.5 0 1 0 5.28-8.6Z"],[6,"M12 17.66L12 22"]],code:[[2,"16 18 22 12 16 6"],[2,"8 6 2 12 8 18"]],"code-2":[[6,"m18 16 4-4-4-4"],[6,"m6 8-4 4 4 4"],[6,"m14.5 4-5 16"]],"code-square":[[6,"M10 9.5 8 12l2 2.5"],[6,"m14 9.5 2 2.5-2 2.5"],[5,3,3,18,18,2]],"code-xml":[[6,"m18 16 4-4-4-4"],[6,"m6 8-4 4 4 4"],[6,"m14.5 4-5 16"]],codepen:[[3,"12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"],[0,12,22,12,15.5],[2,"22 8.5 12 15.5 2 8.5"],[2,"2 15.5 12 8.5 22 15.5"],[0,12,2,12,8.5]],codesandbox:[[6,"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],[2,"7.5 4.21 12 6.81 16.5 4.21"],[2,"7.5 19.79 7.5 14.6 3 12"],[2,"21 12 16.5 14.6 16.5 19.79"],[2,"3.27 6.96 12 12.01 20.73 6.96"],[0,12,22.08,12,12]],coffee:[[6,"M10 2v2"],[6,"M14 2v2"],[6,"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1"],[6,"M6 2v2"]],cog:[[6,"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"],[6,"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"],[6,"M12 2v2"],[6,"M12 22v-2"],[6,"m17 20.66-1-1.73"],[6,"M11 10.27 7 3.34"],[6,"m20.66 17-1.73-1"],[6,"m3.34 7 1.73 1"],[6,"M14 12h8"],[6,"M2 12h2"],[6,"m20.66 7-1.73 1"],[6,"m3.34 17 1.73-1"],[6,"m17 3.34-1 1.73"],[6,"m11 13.73-4 6.93"]],coins:[[1,8,8,6],[6,"M18.09 10.37A6 6 0 1 1 10.34 18"],[6,"M7 6h1v4"],[6,"m16.71 13.88.7.71-2.82 2.82"]],columns:[[5,3,3,18,18,2],[6,"M12 3v18"]],"columns-2":[[5,3,3,18,18,2],[6,"M12 3v18"]],"columns-3":[[5,3,3,18,18,2],[6,"M9 3v18"],[6,"M15 3v18"]],"columns-4":[[5,3,3,18,18,2],[6,"M7.5 3v18"],[6,"M12 3v18"],[6,"M16.5 3v18"]],combine:[[6,"M10 18H5a3 3 0 0 1-3-3v-1"],[6,"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2"],[6,"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2"],[6,"m7 21 3-3-3-3"],[5,14,14,8,8,2],[5,2,2,8,8,2]],command:[[6,"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"]],compass:[[6,"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z"],[1,12,12,10]],component:[[6,"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z"],[6,"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z"],[6,"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z"],[6,"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z"]],computer:[[5,5,2,14,8,2],[5,2,14,20,8,2],[6,"M6 18h2"],[6,"M12 18h6"]],"concierge-bell":[[6,"M3 20a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1Z"],[6,"M20 16a8 8 0 1 0-16 0"],[6,"M12 4v4"],[6,"M10 4h4"]],cone:[[6,"m20.9 18.55-8-15.98a1 1 0 0 0-1.8 0l-8 15.98"],[4,12,19,9,3]],construction:[[5,2,6,20,8,1],[6,"M17 14v7"],[6,"M7 14v7"],[6,"M17 3v3"],[6,"M7 3v3"],[6,"M10 14 2.3 6.3"],[6,"m14 6 7.7 7.7"],[6,"m8 6 8 8"]],contact:[[6,"M16 2v2"],[6,"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"],[6,"M8 2v2"],[1,12,11,3],[5,3,4,18,18,2]],"contact-2":[[6,"M16 2v2"],[6,"M17.915 22a6 6 0 0 0-12 0"],[6,"M8 2v2"],[1,12,12,4],[5,3,4,18,18,2]],"contact-round":[[6,"M16 2v2"],[6,"M17.915 22a6 6 0 0 0-12 0"],[6,"M8 2v2"],[1,12,12,4],[5,3,4,18,18,2]],container:[[6,"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z"],[6,"M10 21.9V14L2.1 9.1"],[6,"m10 14 11.9-6.9"],[6,"M14 19.8v-8.1"],[6,"M18 17.5V9.4"]],contrast:[[1,12,12,10],[6,"M12 18a6 6 0 0 0 0-12v12z"]],cookie:[[6,"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"],[6,"M8.5 8.5v.01"],[6,"M16 15.5v.01"],[6,"M12 12v.01"],[6,"M11 17v.01"],[6,"M7 14v.01"]],"cooking-pot":[[6,"M2 12h20"],[6,"M20 12v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8"],[6,"m4 8 16-4"],[6,"m8.86 6.78-.45-1.81a2 2 0 0 1 1.45-2.43l1.94-.48a2 2 0 0 1 2.43 1.46l.45 1.8"]],copy:[[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-check":[[6,"m12 15 2 2 4-4"],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-minus":[[0,12,15,18,15],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-plus":[[0,15,12,15,18],[0,12,15,18,15],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-slash":[[0,12,18,18,12],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-x":[[0,12,12,18,18],[0,12,18,18,12],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],copyleft:[[1,12,12,10],[6,"M9.17 14.83a4 4 0 1 0 0-5.66"]],copyright:[[1,12,12,10],[6,"M14.83 14.83a4 4 0 1 1 0-5.66"]],"corner-down-left":[[2,"9 10 4 15 9 20"],[6,"M20 4v7a4 4 0 0 1-4 4H4"]],"corner-down-right":[[2,"15 10 20 15 15 20"],[6,"M4 4v7a4 4 0 0 0 4 4h12"]],"corner-left-down":[[2,"14 15 9 20 4 15"],[6,"M20 4h-7a4 4 0 0 0-4 4v12"]],"corner-left-up":[[2,"14 9 9 4 4 9"],[6,"M20 20h-7a4 4 0 0 1-4-4V4"]],"corner-right-down":[[2,"10 15 15 20 20 15"],[6,"M4 4h7a4 4 0 0 1 4 4v12"]],"corner-right-up":[[2,"10 9 15 4 20 9"],[6,"M4 20h7a4 4 0 0 0 4-4V4"]],"corner-up-left":[[2,"9 14 4 9 9 4"],[6,"M20 20v-7a4 4 0 0 0-4-4H4"]],"corner-up-right":[[2,"15 14 20 9 15 4"],[6,"M4 20v-7a4 4 0 0 1 4-4h12"]],cpu:[[5,4,4,16,16,2],[5,9,9,6,6,1],[6,"M15 2v2"],[6,"M15 20v2"],[6,"M2 15h2"],[6,"M2 9h2"],[6,"M20 15h2"],[6,"M20 9h2"],[6,"M9 2v2"],[6,"M9 20v2"]],"creative-commons":[[1,12,12,10],[6,"M10 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1"],[6,"M17 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1"]],"credit-card":[[5,2,5,20,14,2],[0,2,10,22,10]],croissant:[[6,"m4.6 13.11 5.79-3.21c1.89-1.05 4.79 1.78 3.71 3.71l-3.22 5.81C8.8 23.16.79 15.23 4.6 13.11Z"],[6,"m10.5 9.5-1-2.29C9.2 6.48 8.8 6 8 6H4.5C2.79 6 2 6.5 2 8.5a7.71 7.71 0 0 0 2 4.83"],[6,"M8 6c0-1.55.24-4-2-4-2 0-2.5 2.17-2.5 4"],[6,"m14.5 13.5 2.29 1c.73.3 1.21.7 1.21 1.5v3.5c0 1.71-.5 2.5-2.5 2.5a7.71 7.71 0 0 1-4.83-2"],[6,"M18 16c1.55 0 4-.24 4 2 0 2-2.17 2.5-4 2.5"]],crop:[[6,"M6 2v14a2 2 0 0 0 2 2h14"],[6,"M18 22V8a2 2 0 0 0-2-2H2"]],cross:[[6,"M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z"]],crosshair:[[1,12,12,10],[0,22,12,18,12],[0,6,12,2,12],[0,12,6,12,2],[0,12,22,12,18]],crown:[[6,"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"],[6,"M5 21h14"]],cuboid:[[6,"m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z"],[6,"M10 22v-8L2.25 9.15"],[6,"m10 14 11.77-6.87"]],"cup-soda":[[6,"m6 8 1.75 12.28a2 2 0 0 0 2 1.72h4.54a2 2 0 0 0 2-1.72L18 8"],[6,"M5 8h14"],[6,"M7 15a6.47 6.47 0 0 1 5 0 6.47 6.47 0 0 0 5 0"],[6,"m12 8 1-6h2"]],"curly-braces":[[6,"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1"],[6,"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1"]],currency:[[1,12,12,8],[0,3,3,6,6],[0,21,3,18,6],[0,3,21,6,18],[0,21,21,18,18]],cylinder:[[4,12,5,9,3],[6,"M3 5v14a9 3 0 0 0 18 0V5"]],dam:[[6,"M11 11.31c1.17.56 1.54 1.69 3.5 1.69 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"],[6,"M11.75 18c.35.5 1.45 1 2.75 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"],[6,"M2 10h4"],[6,"M2 14h4"],[6,"M2 18h4"],[6,"M2 6h4"],[6,"M7 3a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1L10 4a1 1 0 0 0-1-1z"]],database:[[4,12,5,9,3],[6,"M3 5V19A9 3 0 0 0 21 19V5"],[6,"M3 12A9 3 0 0 0 21 12"]],"database-backup":[[4,12,5,9,3],[6,"M3 12a9 3 0 0 0 5 2.69"],[6,"M21 9.3V5"],[6,"M3 5v14a9 3 0 0 0 6.47 2.88"],[6,"M12 12v4h4"],[6,"M13 20a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L12 16"]],"database-zap":[[4,12,5,9,3],[6,"M3 5V19A9 3 0 0 0 15 21.84"],[6,"M21 5V8"],[6,"M21 12L18 17H22L19 22"],[6,"M3 12A9 3 0 0 0 14.59 14.87"]],delete:[[6,"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z"],[6,"m12 9 6 6"],[6,"m18 9-6 6"]],dessert:[[1,12,4,2],[6,"M10.2 3.2C5.5 4 2 8.1 2 13a2 2 0 0 0 4 0v-1a2 2 0 0 1 4 0v4a2 2 0 0 0 4 0v-4a2 2 0 0 1 4 0v1a2 2 0 0 0 4 0c0-4.9-3.5-9-8.2-9.8"],[6,"M3.2 14.8a9 9 0 0 0 17.6 0"]],diameter:[[1,19,19,2],[1,5,5,2],[6,"M6.48 3.66a10 10 0 0 1 13.86 13.86"],[6,"m6.41 6.41 11.18 11.18"],[6,"M3.66 6.48a10 10 0 0 0 13.86 13.86"]],diamond:[[6,"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z"]],"diamond-minus":[[6,"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z"],[6,"M8 12h8"]],"diamond-percent":[[6,"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0Z"],[6,"M9.2 9.2h.01"],[6,"m14.5 9.5-5 5"],[6,"M14.7 14.8h.01"]],"diamond-plus":[[6,"M12 8v8"],[6,"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z"],[6,"M8 12h8"]],"dice-1":[[5,3,3,18,18,2,2],[6,"M12 12h.01"]],"dice-2":[[5,3,3,18,18,2,2],[6,"M15 9h.01"],[6,"M9 15h.01"]],"dice-3":[[5,3,3,18,18,2,2],[6,"M16 8h.01"],[6,"M12 12h.01"],[6,"M8 16h.01"]],"dice-4":[[5,3,3,18,18,2,2],[6,"M16 8h.01"],[6,"M8 8h.01"],[6,"M8 16h.01"],[6,"M16 16h.01"]],"dice-5":[[5,3,3,18,18,2,2],[6,"M16 8h.01"],[6,"M8 8h.01"],[6,"M8 16h.01"],[6,"M16 16h.01"],[6,"M12 12h.01"]],"dice-6":[[5,3,3,18,18,2,2],[6,"M16 8h.01"],[6,"M16 12h.01"],[6,"M16 16h.01"],[6,"M8 8h.01"],[6,"M8 12h.01"],[6,"M8 16h.01"]],dices:[[5,2,10,12,12,2,2],[6,"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"],[6,"M6 18h.01"],[6,"M10 14h.01"],[6,"M15 6h.01"],[6,"M18 9h.01"]],diff:[[6,"M12 3v14"],[6,"M5 10h14"],[6,"M5 21h14"]],disc:[[1,12,12,10],[1,12,12,2]],"disc-2":[[1,12,12,10],[1,12,12,4],[6,"M12 12h.01"]],"disc-3":[[1,12,12,10],[6,"M6 12c0-1.7.7-3.2 1.8-4.2"],[1,12,12,2],[6,"M18 12c0 1.7-.7 3.2-1.8 4.2"]],"disc-album":[[5,3,3,18,18,2],[1,12,12,5],[6,"M12 12h.01"]],divide:[[1,12,6,1],[0,5,12,19,12],[1,12,18,1]],"divide-circle":[[0,8,12,16,12],[0,12,16,12,16],[0,12,8,12,8],[1,12,12,10]],"divide-square":[[5,3,3,18,18,2,2],[0,8,12,16,12],[0,12,16,12,16],[0,12,8,12,8]],dna:[[6,"m10 16 1.5 1.5"],[6,"m14 8-1.5-1.5"],[6,"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993"],[6,"m16.5 10.5 1 1"],[6,"m17 6-2.891-2.891"],[6,"M2 15c6.667-6 13.333 0 20-6"],[6,"m20 9 .891.891"],[6,"M3.109 14.109 4 15"],[6,"m6.5 12.5 1 1"],[6,"m7 18 2.891 2.891"],[6,"M9 22c1.798-1.998 2.518-3.995 2.807-5.993"]],"dna-off":[[6,"M15 2c-1.35 1.5-2.092 3-2.5 4.5L14 8"],[6,"m17 6-2.891-2.891"],[6,"M2 15c3.333-3 6.667-3 10-3"],[6,"m2 2 20 20"],[6,"m20 9 .891.891"],[6,"M22 9c-1.5 1.35-3 2.092-4.5 2.5l-1-1"],[6,"M3.109 14.109 4 15"],[6,"m6.5 12.5 1 1"],[6,"m7 18 2.891 2.891"],[6,"M9 22c1.35-1.5 2.092-3 2.5-4.5L10 16"]],dock:[[6,"M2 8h20"],[5,2,4,20,16,2],[6,"M6 16h12"]],dog:[[6,"M11.25 16.25h1.5L12 17z"],[6,"M16 14v.5"],[6,"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309"],[6,"M8 14v.5"],[6,"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5"]],"dollar-sign":[[0,12,2,12,22],[6,"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"]],donut:[[6,"M20.5 10a2.5 2.5 0 0 1-2.4-3H18a2.95 2.95 0 0 1-2.6-4.4 10 10 0 1 0 6.3 7.1c-.3.2-.8.3-1.2.3"],[1,12,12,3]],"door-closed":[[6,"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14"],[6,"M2 20h20"],[6,"M14 12v.01"]],"door-open":[[6,"M13 4h3a2 2 0 0 1 2 2v14"],[6,"M2 20h3"],[6,"M13 20h9"],[6,"M10 12v.01"],[6,"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"]],dot:[[1,12.1,12.1,1]],"dot-square":[[5,3,3,18,18,2],[1,12,12,1]],download:[[6,"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],[2,"7 10 12 15 17 10"],[0,12,15,12,3]],"download-cloud":[[6,"M12 13v8l-4-4"],[6,"m12 21 4-4"],[6,"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284"]],"drafting-compass":[[6,"m12.99 6.74 1.93 3.44"],[6,"M19.136 12a10 10 0 0 1-14.271 0"],[6,"m21 21-2.16-3.84"],[6,"m3 21 8.02-14.26"],[1,12,5,2]],drama:[[6,"M10 11h.01"],[6,"M14 6h.01"],[6,"M18 6h.01"],[6,"M6.5 13.1h.01"],[6,"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3"],[6,"M17.4 9.9c-.8.8-2 .8-2.8 0"],[6,"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7"],[6,"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4"]],dribbble:[[1,12,12,10],[6,"M19.13 5.09C15.22 9.14 10 10.44 2.25 10.94"],[6,"M21.75 12.84c-6.62-1.41-12.14 1-16.38 6.32"],[6,"M8.56 2.75c4.37 6 6 9.42 8 17.72"]],drill:[[6,"M14 9c0 .6-.4 1-1 1H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9c.6 0 1 .4 1 1Z"],[6,"M18 6h4"],[6,"M14 4h3a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-3"],[6,"m5 10-2 8"],[6,"M12 10v3c0 .6-.4 1-1 1H8"],[6,"m7 18 2-8"],[6,"M5 22c-1.7 0-3-1.3-3-3 0-.6.4-1 1-1h7c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1Z"]],droplet:[[6,"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"]],droplets:[[6,"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"],[6,"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"]],drum:[[6,"m2 2 8 8"],[6,"m22 2-8 8"],[4,12,9,10,5],[6,"M7 13.4v7.9"],[6,"M12 14v8"],[6,"M17 13.4v7.9"],[6,"M2 9v8a10 5 0 0 0 20 0V9"]],drumstick:[[6,"M15.4 15.63a7.875 6 135 1 1 6.23-6.23 4.5 3.43 135 0 0-6.23 6.23"],[6,"m8.29 12.71-2.6 2.6a2.5 2.5 0 1 0-1.65 4.65A2.5 2.5 0 1 0 8.7 18.3l2.59-2.59"]],dumbbell:[[6,"M14.4 14.4 9.6 9.6"],[6,"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z"],[6,"m21.5 21.5-1.4-1.4"],[6,"M3.9 3.9 2.5 2.5"],[6,"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z"]],ear:[[6,"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0"],[6,"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4"]],"ear-off":[[6,"M6 18.5a3.5 3.5 0 1 0 7 0c0-1.57.92-2.52 2.04-3.46"],[6,"M6 8.5c0-.75.13-1.47.36-2.14"],[6,"M8.8 3.15A6.5 6.5 0 0 1 19 8.5c0 1.63-.44 2.81-1.09 3.76"],[6,"M12.5 6A2.5 2.5 0 0 1 15 8.5M10 13a2 2 0 0 0 1.82-1.18"],[0,2,2,22,22]],earth:[[6,"M21.54 15H17a2 2 0 0 0-2 2v4.54"],[6,"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"],[6,"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"],[1,12,12,10]],"earth-lock":[[6,"M7 3.34V5a3 3 0 0 0 3 3"],[6,"M11 21.95V18a2 2 0 0 0-2-2 2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"],[6,"M21.54 15H17a2 2 0 0 0-2 2v4.54"],[6,"M12 2a10 10 0 1 0 9.54 13"],[6,"M20 6V4a2 2 0 1 0-4 0v2"],[5,14,6,8,5,1]],eclipse:[[1,12,12,10],[6,"M12 2a7 7 0 1 0 10 10"]],edit:[[6,"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],[6,"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"]],"edit-2":[[6,"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"]],"edit-3":[[6,"M12 20h9"],[6,"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z"]],egg:[[6,"M12 22c6.23-.05 7.87-5.57 7.5-10-.36-4.34-3.95-9.96-7.5-10-3.55.04-7.14 5.66-7.5 10-.37 4.43 1.27 9.95 7.5 10z"]],"egg-fried":[[1,11.5,12.5,3.5],[6,"M3 8c0-3.5 2.5-6 6.5-6 5 0 4.83 3 7.5 5s5 2 5 6c0 4.5-2.5 6.5-7 6.5-2.5 0-2.5 2.5-6 2.5s-7-2-7-5.5c0-3 1.5-3 1.5-5C3.5 10 3 9 3 8Z"]],"egg-off":[[6,"M6.399 6.399C5.362 8.157 4.65 10.189 4.5 12c-.37 4.43 1.27 9.95 7.5 10 3.256-.026 5.259-1.547 6.375-3.625"],[6,"M19.532 13.875A14.07 14.07 0 0 0 19.5 12c-.36-4.34-3.95-9.96-7.5-10-1.04.012-2.082.502-3.046 1.297"],[0,2,2,22,22]],ellipsis:[[1,12,12,1],[1,19,12,1],[1,5,12,1]],"ellipsis-vertical":[[1,12,12,1],[1,12,5,1],[1,12,19,1]],equal:[[0,5,9,19,9],[0,5,15,19,15]],"equal-not":[[0,5,9,19,9],[0,5,15,19,15],[0,19,5,5,19]],"equal-square":[[5,3,3,18,18,2],[6,"M7 10h10"],[6,"M7 14h10"]],eraser:[[6,"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"],[6,"M22 21H7"],[6,"m5 11 9 9"]],"ethernet-port":[[6,"m15 20 3-3h2a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h2l3 3z"],[6,"M6 8v1"],[6,"M10 8v1"],[6,"M14 8v1"],[6,"M18 8v1"]],euro:[[6,"M4 10h12"],[6,"M4 14h9"],[6,"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2"]],expand:[[6,"m21 21-6-6m6 6v-4.8m0 4.8h-4.8"],[6,"M3 16.2V21m0 0h4.8M3 21l6-6"],[6,"M21 7.8V3m0 0h-4.8M21 3l-6 6"],[6,"M3 7.8V3m0 0h4.8M3 3l6 6"]],"external-link":[[6,"M15 3h6v6"],[6,"M10 14 21 3"],[6,"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"]],eye:[[6,"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"],[1,12,12,3]],"eye-off":[[6,"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"],[6,"M14.084 14.158a3 3 0 0 1-4.242-4.242"],[6,"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"],[6,"m2 2 20 20"]],facebook:[[6,"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"]],factory:[[6,"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"M17 18h1"],[6,"M12 18h1"],[6,"M7 18h1"]],fan:[[6,"M10.827 16.379a6.082 6.082 0 0 1-8.618-7.002l5.412 1.45a6.082 6.082 0 0 1 7.002-8.618l-1.45 5.412a6.082 6.082 0 0 1 8.618 7.002l-5.412-1.45a6.082 6.082 0 0 1-7.002 8.618l1.45-5.412Z"],[6,"M12 12v.01"]],"fast-forward":[[3,"13 19 22 12 13 5 13 19"],[3,"2 19 11 12 2 5 2 19"]],feather:[[6,"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z"],[6,"M16 8 2 22"],[6,"M17.5 15H9"]],fence:[[6,"M4 3 2 5v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z"],[6,"M6 8h4"],[6,"M6 18h4"],[6,"m12 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z"],[6,"M14 8h4"],[6,"M14 18h4"],[6,"m20 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z"]],"ferris-wheel":[[1,12,12,2],[6,"M12 2v4"],[6,"m6.8 15-3.5 2"],[6,"m20.7 7-3.5 2"],[6,"M6.8 9 3.3 7"],[6,"m20.7 17-3.5-2"],[6,"m9 22 3-8 3 8"],[6,"M8 22h8"],[6,"M18 18.7a9 9 0 1 0-12 0"]],figma:[[6,"M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"],[6,"M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"],[6,"M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"],[6,"M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"],[6,"M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"]],file:[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"]],"file-archive":[[6,"M10 12v-1"],[6,"M10 18v-2"],[6,"M10 7V6"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01"],[1,10,20,2]],"file-audio":[[6,"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0"]],"file-audio-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v2"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[1,3,17,1],[6,"M2 17v-3a4 4 0 0 1 8 0v3"],[1,9,17,1]],"file-axis-3d":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m8 18 4-4"],[6,"M8 10v8h8"]],"file-badge":[[6,"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"],[6,"M7 16.5 8 22l-3-1-3 1 1-5.5"]],"file-badge-2":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[1,12,10,3],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m14 12.5 1 5.5-3-1-3 1 1-5.5"]],"file-bar-chart":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M8 18v-2"],[6,"M12 18v-4"],[6,"M16 18v-6"]],"file-bar-chart-2":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M8 18v-1"],[6,"M12 18v-6"],[6,"M16 18v-3"]],"file-box":[[6,"M14.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M3 13.1a2 2 0 0 0-1 1.76v3.24a2 2 0 0 0 .97 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01Z"],[6,"M7 17v5"],[6,"M11.7 14.2 7 17l-4.7-2.8"]],"file-chart-column":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M8 18v-1"],[6,"M12 18v-6"],[6,"M16 18v-3"]],"file-chart-column-increasing":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M8 18v-2"],[6,"M12 18v-4"],[6,"M16 18v-6"]],"file-chart-line":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m16 13-3.5 3.5-2-2L8 17"]],"file-chart-pie":[[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3.5"],[6,"M4.017 11.512a6 6 0 1 0 8.466 8.475"],[6,"M9 16a1 1 0 0 1-1-1v-4c0-.552.45-1.008.995-.917a6 6 0 0 1 4.922 4.922c.091.544-.365.995-.917.995z"]],"file-check":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m9 15 2 2 4-4"]],"file-check-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m3 15 2 2 4-4"]],"file-clock":[[6,"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[1,8,16,6],[6,"M9.5 17.5 8 16.25V14"]],"file-code":[[6,"M10 12.5 8 15l2 2.5"],[6,"m14 12.5 2 2.5-2 2.5"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z"]],"file-code-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m5 12-3 3 3 3"],[6,"m9 18 3-3-3-3"]],"file-cog":[[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m3.2 12.9-.9-.4"],[6,"m3.2 15.1-.9.4"],[6,"M4.677 21.5a2 2 0 0 0 1.313.5H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v2.5"],[6,"m4.9 11.2-.4-.9"],[6,"m4.9 16.8-.4.9"],[6,"m7.5 10.3-.4.9"],[6,"m7.5 17.7-.4-.9"],[6,"m9.7 12.5-.9.4"],[6,"m9.7 15.5-.9-.4"],[1,6,14,3]],"file-cog-2":[[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m3.2 12.9-.9-.4"],[6,"m3.2 15.1-.9.4"],[6,"M4.677 21.5a2 2 0 0 0 1.313.5H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v2.5"],[6,"m4.9 11.2-.4-.9"],[6,"m4.9 16.8-.4.9"],[6,"m7.5 10.3-.4.9"],[6,"m7.5 17.7-.4-.9"],[6,"m9.7 12.5-.9.4"],[6,"m9.7 15.5-.9-.4"],[1,6,14,3]],"file-diff":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M9 10h6"],[6,"M12 13V7"],[6,"M9 17h6"]],"file-digit":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[5,2,12,4,6,2],[6,"M10 12h2v6"],[6,"M10 18h4"]],"file-down":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M12 18v-6"],[6,"m9 15 3 3 3-3"]],"file-edit":[[6,"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"file-heart":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v2"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M10.29 10.7a2.43 2.43 0 0 0-2.66-.52c-.29.12-.56.3-.78.53l-.35.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L6.5 18l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z"]],"file-image":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[1,10,12,2],[6,"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22"]],"file-input":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M2 15h10"],[6,"m9 18 3-3-3-3"]],"file-json":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"],[6,"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"]],"file-json-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M4 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"],[6,"M8 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"]],"file-key":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[1,10,16,2],[6,"m16 10-4.5 4.5"],[6,"m15 11 1 1"]],"file-key-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v6"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[1,4,16,2],[6,"m10 10-4.5 4.5"],[6,"m9 11 1 1"]],"file-line-chart":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m16 13-3.5 3.5-2-2L8 17"]],"file-lock":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[5,8,12,8,6,1],[6,"M10 12v-2a2 2 0 1 1 4 0v2"]],"file-lock-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v1"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[5,2,13,8,5,1],[6,"M8 13v-2a2 2 0 1 0-4 0v2"]],"file-minus":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M9 15h6"]],"file-minus-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M3 15h6"]],"file-music":[[1,14,16,2],[1,6,18,2],[6,"M4 12.4V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-7.5"],[6,"M8 18v-7.7L16 9v7"]],"file-output":[[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M4 7V4a2 2 0 0 1 2-2 2 2 0 0 0-2 2"],[6,"M4.063 20.999a2 2 0 0 0 2 1L18 22a2 2 0 0 0 2-2V7l-5-5H6"],[6,"m5 11-3 3"],[6,"m5 17-3-3h10"]],"file-pen":[[6,"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"file-pen-line":[[6,"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"],[6,"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"],[6,"M8 18h1"]],"file-pie-chart":[[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3.5"],[6,"M4.017 11.512a6 6 0 1 0 8.466 8.475"],[6,"M9 16a1 1 0 0 1-1-1v-4c0-.552.45-1.008.995-.917a6 6 0 0 1 4.922 4.922c.091.544-.365.995-.917.995z"]],"file-plus":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M9 15h6"],[6,"M12 18v-6"]],"file-plus-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M3 15h6"],[6,"M6 12v6"]],"file-question":[[6,"M12 17h.01"],[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z"],[6,"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3"]],"file-scan":[[6,"M20 10V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M16 14a2 2 0 0 0-2 2"],[6,"M20 14a2 2 0 0 1 2 2"],[6,"M20 22a2 2 0 0 0 2-2"],[6,"M16 22a2 2 0 0 1-2-2"]],"file-search":[[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"],[6,"m9 18-1.5-1.5"],[1,5,14,3]],"file-search-2":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[1,11.5,14.5,2.5],[6,"M13.3 16.3 15 18"]],"file-signature":[[6,"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"],[6,"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"],[6,"M8 18h1"]],"file-sliders":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M8 12h8"],[6,"M10 11v2"],[6,"M8 17h8"],[6,"M14 16v2"]],"file-spreadsheet":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M8 13h2"],[6,"M14 13h2"],[6,"M8 17h2"],[6,"M14 17h2"]],"file-stack":[[6,"M21 7h-3a2 2 0 0 1-2-2V2"],[6,"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z"],[6,"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15"],[6,"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11"]],"file-symlink":[[6,"m10 18 3-3-3-3"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M4 11V4a2 2 0 0 1 2-2h9l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7"]],"file-terminal":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m8 16 2-2-2-2"],[6,"M12 18h4"]],"file-text":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M10 9H8"],[6,"M16 13H8"],[6,"M16 17H8"]],"file-type":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M9 13v-1h6v1"],[6,"M12 12v6"],[6,"M11 18h2"]],"file-type-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M2 13v-1h6v1"],[6,"M5 12v6"],[6,"M4 18h2"]],"file-up":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M12 12v6"],[6,"m15 15-3-3-3 3"]],"file-user":[[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M15 18a3 3 0 1 0-6 0"],[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z"],[1,12,13,2]],"file-video":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m10 11 5 3-5 3v-6Z"]],"file-video-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[5,2,12,8,6,1],[6,"m10 15.5 4 2.5v-6l-4 2.5"]],"file-volume":[[6,"M11 11a5 5 0 0 1 0 6"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M4 6.765V4a2 2 0 0 1 2-2h9l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-.93-.23"],[6,"M7 10.51a.5.5 0 0 0-.826-.38l-1.893 1.628A1 1 0 0 1 3.63 12H2.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h1.129a1 1 0 0 1 .652.242l1.893 1.63a.5.5 0 0 0 .826-.38z"]],"file-volume-2":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"M8 15h.01"],[6,"M11.5 13.5a2.5 2.5 0 0 1 0 3"],[6,"M15 12a5 5 0 0 1 0 6"]],"file-warning":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M12 9v4"],[6,"M12 17h.01"]],"file-x":[[6,"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m14.5 12.5-5 5"],[6,"m9.5 12.5 5 5"]],"file-x2":[[6,"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"],[6,"M14 2v4a2 2 0 0 0 2 2h4"],[6,"m8 12.5-5 5"],[6,"m3 12.5 5 5"]],files:[[6,"M20 7h-3a2 2 0 0 1-2-2V2"],[6,"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z"],[6,"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8"]],film:[[5,3,3,18,18,2],[6,"M7 3v18"],[6,"M3 7.5h4"],[6,"M3 12h18"],[6,"M3 16.5h4"],[6,"M17 3v18"],[6,"M17 7.5h4"],[6,"M17 16.5h4"]],filter:[[3,"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"]],"filter-x":[[6,"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055"],[6,"m22 3-5 5"],[6,"m17 3 5 5"]],fingerprint:[[6,"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4"],[6,"M14 13.12c0 2.38 0 6.38-1 8.88"],[6,"M17.29 21.02c.12-.6.43-2.3.5-3.02"],[6,"M2 12a10 10 0 0 1 18-6"],[6,"M2 16h.01"],[6,"M21.8 16c.2-2 .131-5.354 0-6"],[6,"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2"],[6,"M8.65 22c.21-.66.45-1.32.57-2"],[6,"M9 6.8a6 6 0 0 1 9 5.2v2"]],"fire-extinguisher":[[6,"M15 6.5V3a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3.5"],[6,"M9 18h8"],[6,"M18 3h-3"],[6,"M11 3a6 6 0 0 0-6 6v11"],[6,"M5 13h4"],[6,"M17 10a4 4 0 0 0-8 0v10a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2Z"]],fish:[[6,"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z"],[6,"M18 12v.5"],[6,"M16 17.93a9.77 9.77 0 0 1 0-11.86"],[6,"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33"],[6,"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4"],[6,"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98"]],"fish-off":[[6,"M18 12.47v.03m0-.5v.47m-.475 5.056A6.744 6.744 0 0 1 15 18c-3.56 0-7.56-2.53-8.5-6 .348-1.28 1.114-2.433 2.121-3.38m3.444-2.088A8.802 8.802 0 0 1 15 6c3.56 0 6.06 2.54 7 6-.309 1.14-.786 2.177-1.413 3.058"],[6,"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33m7.48-4.372A9.77 9.77 0 0 1 16 6.07m0 11.86a9.77 9.77 0 0 1-1.728-3.618"],[6,"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98M8.53 3h5.27a2 2 0 0 1 1.98 1.67l.23 1.4M2 2l20 20"]],"fish-symbol":[[6,"M2 16s9-15 20-4C11 23 2 8 2 8"]],flag:[[6,"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"],[0,4,22,4,15]],"flag-off":[[6,"M8 2c3 0 5 2 8 2s4-1 4-1v11"],[6,"M4 22V4"],[6,"M4 15s1-1 4-1 5 2 8 2"],[0,2,2,22,22]],"flag-triangle-left":[[6,"M17 22V2L7 7l10 5"]],"flag-triangle-right":[[6,"M7 22V2l10 5-10 5"]],flame:[[6,"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"]],"flame-kindling":[[6,"M12 2c1 3 2.5 3.5 3.5 4.5A5 5 0 0 1 17 10a5 5 0 1 1-10 0c0-.3 0-.6.1-.9a2 2 0 1 0 3.3-2C8 4.5 11 2 12 2Z"],[6,"m5 22 14-4"],[6,"m5 18 14 4"]],flashlight:[[6,"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z"],[0,6,6,18,6],[0,12,12,12,12]],"flashlight-off":[[6,"M16 16v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4"],[6,"M7 2h11v4c0 2-2 2-2 4v1"],[0,11,6,18,6],[0,2,2,22,22]],"flask-conical":[[6,"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"],[6,"M8.5 2h7"],[6,"M7 16h10"]],"flask-conical-off":[[6,"M10 10 4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-1.272-2.542"],[6,"M10 2v2.343"],[6,"M14 2v6.343"],[6,"M8.5 2h7"],[6,"M7 16h9"],[0,2,2,22,22]],"flask-round":[[6,"M10 2v7.31"],[6,"M14 9.3V1.99"],[6,"M8.5 2h7"],[6,"M14 9.3a6.5 6.5 0 1 1-4 0"],[6,"M5.52 16h12.96"]],"flip-horizontal":[[6,"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3"],[6,"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3"],[6,"M12 20v2"],[6,"M12 14v2"],[6,"M12 8v2"],[6,"M12 2v2"]],"flip-horizontal-2":[[6,"m3 7 5 5-5 5V7"],[6,"m21 7-5 5 5 5V7"],[6,"M12 20v2"],[6,"M12 14v2"],[6,"M12 8v2"],[6,"M12 2v2"]],"flip-vertical":[[6,"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3"],[6,"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3"],[6,"M4 12H2"],[6,"M10 12H8"],[6,"M16 12h-2"],[6,"M22 12h-2"]],"flip-vertical-2":[[6,"m17 3-5 5-5-5h10"],[6,"m17 21-5-5-5 5h10"],[6,"M4 12H2"],[6,"M10 12H8"],[6,"M16 12h-2"],[6,"M22 12h-2"]],flower:[[1,12,12,3],[6,"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5"],[6,"M12 7.5V9"],[6,"M7.5 12H9"],[6,"M16.5 12H15"],[6,"M12 16.5V15"],[6,"m8 8 1.88 1.88"],[6,"M14.12 9.88 16 8"],[6,"m8 16 1.88-1.88"],[6,"M14.12 14.12 16 16"]],"flower-2":[[6,"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1"],[1,12,8,2],[6,"M12 10v12"],[6,"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z"],[6,"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z"]],focus:[[1,12,12,3],[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"]],"fold-horizontal":[[6,"M2 12h6"],[6,"M22 12h-6"],[6,"M12 2v2"],[6,"M12 8v2"],[6,"M12 14v2"],[6,"M12 20v2"],[6,"m19 9-3 3 3 3"],[6,"m5 15 3-3-3-3"]],"fold-vertical":[[6,"M12 22v-6"],[6,"M12 8V2"],[6,"M4 12H2"],[6,"M10 12H8"],[6,"M16 12h-2"],[6,"M22 12h-2"],[6,"m15 19-3-3-3 3"],[6,"m15 5-3 3-3-3"]],folder:[[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"]],"folder-archive":[[1,15,19,2],[6,"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1"],[6,"M15 11v-1"],[6,"M15 17v-2"]],"folder-check":[[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"],[6,"m9 13 2 2 4-4"]],"folder-clock":[[1,16,16,6],[6,"M7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2"],[6,"M16 14v2l1 1"]],"folder-closed":[[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"],[6,"M2 10h20"]],"folder-code":[[6,"M10 10.5 8 13l2 2.5"],[6,"m14 10.5 2 2.5-2 2.5"],[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2z"]],"folder-cog":[[1,18,18,3],[6,"M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v3.3"],[6,"m21.7 19.4-.9-.3"],[6,"m15.2 16.9-.9-.3"],[6,"m16.6 21.7.3-.9"],[6,"m19.1 15.2.3-.9"],[6,"m19.6 21.7-.4-1"],[6,"m16.8 15.3-.4-1"],[6,"m14.3 19.6 1-.4"],[6,"m20.7 16.8 1-.4"]],"folder-cog-2":[[1,18,18,3],[6,"M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v3.3"],[6,"m21.7 19.4-.9-.3"],[6,"m15.2 16.9-.9-.3"],[6,"m16.6 21.7.3-.9"],[6,"m19.1 15.2.3-.9"],[6,"m19.6 21.7-.4-1"],[6,"m16.8 15.3-.4-1"],[6,"m14.3 19.6 1-.4"],[6,"m20.7 16.8 1-.4"]],"folder-dot":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,12,13,1]],"folder-down":[[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"],[6,"M12 10v6"],[6,"m15 13-3 3-3-3"]],"folder-edit":[[6,"M2 11.5V5a2 2 0 0 1 2-2h3.9c.7 0 1.3.3 1.7.9l.8 1.2c.4.6 1 .9 1.7.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5"],[6,"M11.378 13.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"folder-git":[[1,12,13,2],[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"],[6,"M14 13h3"],[6,"M7 13h3"]],"folder-git-2":[[6,"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5"],[1,13,12,2],[6,"M18 19c-2.8 0-5-2.2-5-5v8"],[1,20,19,2]],"folder-heart":[[6,"M11 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v1.5"],[6,"M13.9 17.45c-1.2-1.2-1.14-2.8-.2-3.73a2.43 2.43 0 0 1 3.44 0l.36.34.34-.34a2.43 2.43 0 0 1 3.45-.01c.95.95 1 2.53-.2 3.74L17.5 21Z"]],"folder-input":[[6,"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1"],[6,"M2 13h10"],[6,"m9 16 3-3-3-3"]],"folder-kanban":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[6,"M8 10v4"],[6,"M12 10v2"],[6,"M16 10v6"]],"folder-key":[[1,16,20,2],[6,"M10 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v2"],[6,"m22 14-4.5 4.5"],[6,"m21 15 1 1"]],"folder-lock":[[5,14,17,8,5,1],[6,"M10 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v2.5"],[6,"M20 17v-2a2 2 0 1 0-4 0v2"]],"folder-minus":[[6,"M9 13h6"],[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"]],"folder-open":[[6,"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"]],"folder-open-dot":[[6,"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2"],[1,14,15,1]],"folder-output":[[6,"M2 7.5V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-1.5"],[6,"M2 13h10"],[6,"m5 10-3 3 3 3"]],"folder-pen":[[6,"M2 11.5V5a2 2 0 0 1 2-2h3.9c.7 0 1.3.3 1.7.9l.8 1.2c.4.6 1 .9 1.7.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5"],[6,"M11.378 13.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"folder-plus":[[6,"M12 10v6"],[6,"M9 13h6"],[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"]],"folder-root":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,12,13,2],[6,"M12 15v5"]],"folder-search":[[6,"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1"],[6,"m21 21-1.9-1.9"],[1,17,17,3]],"folder-search-2":[[1,11.5,12.5,2.5],[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"],[6,"M13.3 14.3 15 16"]],"folder-symlink":[[6,"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7"],[6,"m8 16 3-3-3-3"]],"folder-sync":[[6,"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5"],[6,"M12 10v4h4"],[6,"m12 14 1.535-1.605a5 5 0 0 1 8 1.5"],[6,"M22 22v-4h-4"],[6,"m22 18-1.535 1.605a5 5 0 0 1-8-1.5"]],"folder-tree":[[6,"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z"],[6,"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z"],[6,"M3 5a2 2 0 0 0 2 2h3"],[6,"M3 3v13a2 2 0 0 0 2 2h3"]],"folder-up":[[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"],[6,"M12 10v6"],[6,"m9 13 3-3 3 3"]],"folder-x":[[6,"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"],[6,"m9.5 10.5 5 5"],[6,"m14.5 10.5-5 5"]],folders:[[6,"M20 17a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.9a2 2 0 0 1-1.69-.9l-.81-1.2a2 2 0 0 0-1.67-.9H8a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2Z"],[6,"M2 8v11a2 2 0 0 0 2 2h14"]],footprints:[[6,"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z"],[6,"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z"],[6,"M16 17h4"],[6,"M4 13h4"]],"fork-knife":[[6,"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"],[6,"M7 2v20"],[6,"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"]],"fork-knife-crossed":[[6,"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8"],[6,"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7"],[6,"m2.1 21.8 6.4-6.3"],[6,"m19 5-7 7"]],forklift:[[6,"M12 12H5a2 2 0 0 0-2 2v5"],[1,13,19,2],[1,5,19,2],[6,"M8 19h3m5-17v17h6M6 12V7c0-1.1.9-2 2-2h3l5 5"]],"form-input":[[5,2,6,20,12,2],[6,"M12 12h.01"],[6,"M17 12h.01"],[6,"M7 12h.01"]],forward:[[2,"15 17 20 12 15 7"],[6,"M4 18v-2a4 4 0 0 1 4-4h12"]],frame:[[0,22,6,2,6],[0,22,18,2,18],[0,6,2,6,22],[0,18,2,18,22]],framer:[[6,"M5 16V9h14V2H5l14 14h-7m-7 0 7 7v-7m-7 0h7"]],frown:[[1,12,12,10],[6,"M16 16s-1.5-2-4-2-4 2-4 2"],[0,9,9,9.01,9],[0,15,9,15.01,9]],fuel:[[0,3,22,15,22],[0,4,9,14,9],[6,"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18"],[6,"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5"]],fullscreen:[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[5,7,8,10,8,1]],"function-square":[[5,3,3,18,18,2,2],[6,"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3"],[6,"M9 11.2h5.7"]],"gallery-horizontal":[[6,"M2 3v18"],[5,6,3,12,18,2],[6,"M22 3v18"]],"gallery-horizontal-end":[[6,"M2 7v10"],[6,"M6 5v14"],[5,10,3,12,18,2]],"gallery-thumbnails":[[5,3,3,18,14,2],[6,"M4 21h1"],[6,"M9 21h1"],[6,"M14 21h1"],[6,"M19 21h1"]],"gallery-vertical":[[6,"M3 2h18"],[5,3,6,18,12,2],[6,"M3 22h18"]],"gallery-vertical-end":[[6,"M7 2h10"],[6,"M5 6h14"],[5,3,10,18,12,2]],gamepad:[[0,6,12,10,12],[0,8,10,8,14],[0,15,13,15.01,13],[0,18,11,18.01,11],[5,2,6,20,12,2]],"gamepad-2":[[0,6,11,10,11],[0,8,9,8,13],[0,15,12,15.01,12],[0,18,10,18.01,10],[6,"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"]],"gantt-chart":[[6,"M8 6h10"],[6,"M6 12h9"],[6,"M11 18h7"]],"gantt-chart-square":[[5,3,3,18,18,2],[6,"M9 8h7"],[6,"M8 12h6"],[6,"M11 16h5"]],gauge:[[6,"m12 14 4-4"],[6,"M3.34 19a10 10 0 1 1 17.32 0"]],"gauge-circle":[[6,"M15.6 2.7a10 10 0 1 0 5.7 5.7"],[1,12,12,2],[6,"M13.4 10.6 19 5"]],gavel:[[6,"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8"],[6,"m16 16 6-6"],[6,"m8 8 6-6"],[6,"m9 7 8 8"],[6,"m21 11-8-8"]],gem:[[6,"M6 3h12l4 6-10 13L2 9Z"],[6,"M11 3 8 9l4 13 4-13-3-6"],[6,"M2 9h20"]],ghost:[[6,"M9 10h.01"],[6,"M15 10h.01"],[6,"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"]],gift:[[5,3,8,18,4,1],[6,"M12 8v13"],[6,"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"],[6,"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"]],"git-branch":[[0,6,3,6,15],[1,18,6,3],[1,6,18,3],[6,"M18 9a9 9 0 0 1-9 9"]],"git-branch-plus":[[6,"M6 3v12"],[6,"M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],[6,"M6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],[6,"M15 6a9 9 0 0 0-9 9"],[6,"M18 15v6"],[6,"M21 18h-6"]],"git-commit":[[1,12,12,3],[0,3,12,9,12],[0,15,12,21,12]],"git-commit-horizontal":[[1,12,12,3],[0,3,12,9,12],[0,15,12,21,12]],"git-commit-vertical":[[6,"M12 3v6"],[1,12,12,3],[6,"M12 15v6"]],"git-compare":[[1,18,18,3],[1,6,6,3],[6,"M13 6h3a2 2 0 0 1 2 2v7"],[6,"M11 18H8a2 2 0 0 1-2-2V9"]],"git-compare-arrows":[[1,5,6,3],[6,"M12 6h5a2 2 0 0 1 2 2v7"],[6,"m15 9-3-3 3-3"],[1,19,18,3],[6,"M12 18H7a2 2 0 0 1-2-2V9"],[6,"m9 15 3 3-3 3"]],"git-fork":[[1,12,18,3],[1,6,6,3],[1,18,6,3],[6,"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"],[6,"M12 12v3"]],"git-graph":[[1,5,6,3],[6,"M5 9v6"],[1,5,18,3],[6,"M12 3v18"],[1,19,6,3],[6,"M16 15.7A9 9 0 0 0 19 9"]],"git-merge":[[1,18,18,3],[1,6,6,3],[6,"M6 21V9a9 9 0 0 0 9 9"]],"git-pull-request":[[1,18,18,3],[1,6,6,3],[6,"M13 6h3a2 2 0 0 1 2 2v7"],[0,6,9,6,21]],"git-pull-request-arrow":[[1,5,6,3],[6,"M5 9v12"],[1,19,18,3],[6,"m15 9-3-3 3-3"],[6,"M12 6h5a2 2 0 0 1 2 2v7"]],"git-pull-request-closed":[[1,6,6,3],[6,"M6 9v12"],[6,"m21 3-6 6"],[6,"m21 9-6-6"],[6,"M18 11.5V15"],[1,18,18,3]],"git-pull-request-create":[[1,6,6,3],[6,"M6 9v12"],[6,"M13 6h3a2 2 0 0 1 2 2v3"],[6,"M18 15v6"],[6,"M21 18h-6"]],"git-pull-request-create-arrow":[[1,5,6,3],[6,"M5 9v12"],[6,"m15 9-3-3 3-3"],[6,"M12 6h5a2 2 0 0 1 2 2v3"],[6,"M19 15v6"],[6,"M22 18h-6"]],"git-pull-request-draft":[[1,18,18,3],[1,6,6,3],[6,"M18 6V5"],[6,"M18 11v-1"],[0,6,9,6,21]],github:[[6,"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"],[6,"M9 18c-4.51 2-5-2-7-2"]],gitlab:[[6,"m22 13.29-3.33-10a.42.42 0 0 0-.14-.18.38.38 0 0 0-.22-.11.39.39 0 0 0-.23.07.42.42 0 0 0-.14.18l-2.26 6.67H8.32L6.1 3.26a.42.42 0 0 0-.1-.18.38.38 0 0 0-.26-.08.39.39 0 0 0-.23.07.42.42 0 0 0-.14.18L2 13.29a.74.74 0 0 0 .27.83L12 21l9.69-6.88a.71.71 0 0 0 .31-.83Z"]],"glass-water":[[6,"M15.2 22H8.8a2 2 0 0 1-2-1.79L5 3h14l-1.81 17.21A2 2 0 0 1 15.2 22Z"],[6,"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0"]],glasses:[[1,6,15,4],[1,18,15,4],[6,"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2"],[6,"M2.5 13 5 7c.7-1.3 1.4-2 3-2"],[6,"M21.5 13 19 7c-.7-1.3-1.5-2-3-2"]],globe:[[1,12,12,10],[6,"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"],[6,"M2 12h20"]],"globe-2":[[6,"M21.54 15H17a2 2 0 0 0-2 2v4.54"],[6,"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"],[6,"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"],[1,12,12,10]],"globe-lock":[[6,"M15.686 15A14.5 14.5 0 0 1 12 22a14.5 14.5 0 0 1 0-20 10 10 0 1 0 9.542 13"],[6,"M2 12h8.5"],[6,"M20 6V4a2 2 0 1 0-4 0v2"],[5,14,6,8,5,1]],goal:[[6,"M12 13V2l8 4-8 4"],[6,"M20.561 10.222a9 9 0 1 1-12.55-5.29"],[6,"M8.002 9.997a5 5 0 1 0 8.9 2.02"]],grab:[[6,"M18 11.5V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1.4"],[6,"M14 10V8a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2"],[6,"M10 9.9V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v5"],[6,"M6 14a2 2 0 0 0-2-2a2 2 0 0 0-2 2"],[6,"M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-4a8 8 0 0 1-8-8 2 2 0 1 1 4 0"]],"graduation-cap":[[6,"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z"],[6,"M22 10v6"],[6,"M6 12.5V16a6 3 0 0 0 12 0v-3.5"]],grape:[[6,"M22 5V2l-5.89 5.89"],[1,16.6,15.89,3],[1,8.11,7.4,3],[1,12.35,11.65,3],[1,13.91,5.85,3],[1,18.15,10.09,3],[1,6.56,13.2,3],[1,10.8,17.44,3],[1,5,19,3]],grid:[[5,3,3,18,18,2],[6,"M3 9h18"],[6,"M3 15h18"],[6,"M9 3v18"],[6,"M15 3v18"]],"grid-2x-2":[[5,3,3,18,18,2],[6,"M3 12h18"],[6,"M12 3v18"]],"grid-2x-2check":[[6,"M12 3v17a1 1 0 0 1-1 1H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6a1 1 0 0 1-1 1H3"],[6,"m16 19 2 2 4-4"]],"grid-2x-2plus":[[6,"M12 3v17a1 1 0 0 1-1 1H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6a1 1 0 0 1-1 1H3"],[6,"M16 19h6"],[6,"M19 22v-6"]],"grid-2x-2x":[[6,"M12 3v17a1 1 0 0 1-1 1H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6a1 1 0 0 1-1 1H3"],[6,"m16 16 5 5"],[6,"m16 21 5-5"]],"grid-3x-3":[[5,3,3,18,18,2],[6,"M3 9h18"],[6,"M3 15h18"],[6,"M9 3v18"],[6,"M15 3v18"]],grip:[[1,12,5,1],[1,19,5,1],[1,5,5,1],[1,12,12,1],[1,19,12,1],[1,5,12,1],[1,12,19,1],[1,19,19,1],[1,5,19,1]],"grip-horizontal":[[1,12,9,1],[1,19,9,1],[1,5,9,1],[1,12,15,1],[1,19,15,1],[1,5,15,1]],"grip-vertical":[[1,9,12,1],[1,9,5,1],[1,9,19,1],[1,15,12,1],[1,15,5,1],[1,15,19,1]],group:[[6,"M3 7V5c0-1.1.9-2 2-2h2"],[6,"M17 3h2c1.1 0 2 .9 2 2v2"],[6,"M21 17v2c0 1.1-.9 2-2 2h-2"],[6,"M7 21H5c-1.1 0-2-.9-2-2v-2"],[5,7,7,7,5,1],[5,10,12,7,5,1]],guitar:[[6,"m11.9 12.1 4.514-4.514"],[6,"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z"],[6,"m6 16 2 2"],[6,"M8.2 9.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4 2 2 0 0 0 1.8-1.2z"],[1,11.5,12.5,.5]],ham:[[6,"M13.144 21.144A7.274 10.445 45 1 0 2.856 10.856"],[6,"M13.144 21.144A7.274 4.365 45 0 0 2.856 10.856a7.274 4.365 45 0 0 10.288 10.288"],[6,"M16.565 10.435 18.6 8.4a2.501 2.501 0 1 0 1.65-4.65 2.5 2.5 0 1 0-4.66 1.66l-2.024 2.025"],[6,"m8.5 16.5-1-1"]],hammer:[[6,"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9"],[6,"m18 15 4-4"],[6,"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5"]],hand:[[6,"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2"],[6,"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2"],[6,"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8"],[6,"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"]],"hand-coins":[[6,"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17"],[6,"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"],[6,"m2 16 6 6"],[1,16,9,2.9],[1,6,5,3]],"hand-heart":[[6,"M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16"],[6,"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"],[6,"m2 15 6 6"],[6,"M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z"]],"hand-helping":[[6,"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14"],[6,"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"],[6,"m2 13 6 6"]],"hand-metal":[[6,"M18 12.5V10a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1.4"],[6,"M14 11V9a2 2 0 1 0-4 0v2"],[6,"M10 10.5V5a2 2 0 1 0-4 0v9"],[6,"m7 15-1.76-1.76a2 2 0 0 0-2.83 2.82l3.6 3.6C7.5 21.14 9.2 22 12 22h2a8 8 0 0 0 8-8V7a2 2 0 1 0-4 0v5"]],"hand-platter":[[6,"M12 3V2"],[6,"M5 10a7.1 7.1 0 0 1 14 0"],[6,"M4 10h16"],[6,"M2 14h12a2 2 0 1 1 0 4h-2"],[6,"m15.4 17.4 3.2-2.8a2 2 0 0 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2L5 18"],[6,"M5 14v7H2"]],handshake:[[6,"m11 17 2 2a1 1 0 1 0 3-3"],[6,"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4"],[6,"m21 3 1 11h-2"],[6,"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3"],[6,"M3 4h8"]],"hard-drive":[[0,22,12,2,12],[6,"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"],[0,6,16,6.01,16],[0,10,16,10.01,16]],"hard-drive-download":[[6,"M12 2v8"],[6,"m16 6-4 4-4-4"],[5,2,14,20,8,2],[6,"M6 18h.01"],[6,"M10 18h.01"]],"hard-drive-upload":[[6,"m16 6-4-4-4 4"],[6,"M12 2v8"],[5,2,14,20,8,2],[6,"M6 18h.01"],[6,"M10 18h.01"]],"hard-hat":[[6,"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z"],[6,"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5"],[6,"M4 15v-3a6 6 0 0 1 6-6"],[6,"M14 6a6 6 0 0 1 6 6v3"]],hash:[[0,4,9,20,9],[0,4,15,20,15],[0,10,3,8,21],[0,16,3,14,21]],haze:[[6,"m5.2 6.2 1.4 1.4"],[6,"M2 13h2"],[6,"M20 13h2"],[6,"m17.4 7.6 1.4-1.4"],[6,"M22 17H2"],[6,"M22 21H2"],[6,"M16 13a4 4 0 0 0-8 0"],[6,"M12 5V2.5"]],"hdmi-port":[[6,"M22 9a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h1l2 2h12l2-2h1a1 1 0 0 0 1-1Z"],[6,"M7.5 12h9"]],heading:[[6,"M6 12h12"],[6,"M6 20V4"],[6,"M18 20V4"]],"heading-1":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"m17 12 3-2v8"]],"heading-2":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"]],"heading-3":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"],[6,"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"]],"heading-4":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"M17 10v4h4"],[6,"M21 10v8"]],"heading-5":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"M17 13v-3h4"],[6,"M17 17.7c.4.2.8.3 1.3.3 1.5 0 2.7-1.1 2.7-2.5S19.8 13 18.3 13H17"]],"heading-6":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[1,19,16,2],[6,"M20 10c-2 2-3 3.5-3 6"]],"headphone-off":[[6,"M21 14h-1.343"],[6,"M9.128 3.47A9 9 0 0 1 21 12v3.343"],[6,"m2 2 20 20"],[6,"M20.414 20.414A2 2 0 0 1 19 21h-1a2 2 0 0 1-2-2v-3"],[6,"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 2.636-6.364"]],headphones:[[6,"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3"]],headset:[[6,"M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z"],[6,"M21 16v2a4 4 0 0 1-4 4h-5"]],heart:[[6,"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"]],"heart-crack":[[6,"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"],[6,"m12 13-1-1 2-2-3-3 2-2"]],"heart-handshake":[[6,"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"],[6,"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"],[6,"m18 15-2-2"],[6,"m15 18-2-2"]],"heart-off":[[0,2,2,22,22],[6,"M16.5 16.5 12 21l-7-7c-1.5-1.45-3-3.2-3-5.5a5.5 5.5 0 0 1 2.14-4.35"],[6,"M8.76 3.1c1.15.22 2.13.78 3.24 1.9 1.5-1.5 2.74-2 4.5-2A5.5 5.5 0 0 1 22 8.5c0 2.12-1.3 3.78-2.67 5.17"]],"heart-pulse":[[6,"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"],[6,"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27"]],heater:[[6,"M11 8c2-3-2-3 0-6"],[6,"M15.5 8c2-3-2-3 0-6"],[6,"M6 10h.01"],[6,"M6 14h.01"],[6,"M10 16v-4"],[6,"M14 16v-4"],[6,"M18 16v-4"],[6,"M20 6a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3"],[6,"M5 20v2"],[6,"M19 20v2"]],"help-circle":[[1,12,12,10],[6,"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],[6,"M12 17h.01"]],"helping-hand":[[6,"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14"],[6,"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"],[6,"m2 13 6 6"]],hexagon:[[6,"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"]],highlighter:[[6,"m9 11-6 6v3h9l3-3"],[6,"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"]],history:[[6,"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"],[6,"M3 3v5h5"],[6,"M12 7v5l4 2"]],home:[[6,"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"],[6,"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"]],hop:[[6,"M10.82 16.12c1.69.6 3.91.79 5.18.85.55.03 1-.42.97-.97-.06-1.27-.26-3.5-.85-5.18"],[6,"M11.5 6.5c1.64 0 5-.38 6.71-1.07.52-.2.55-.82.12-1.17A10 10 0 0 0 4.26 18.33c.35.43.96.4 1.17-.12.69-1.71 1.07-5.07 1.07-6.71 1.34.45 3.1.9 4.88.62a.88.88 0 0 0 .73-.74c.3-2.14-.15-3.5-.61-4.88"],[6,"M15.62 16.95c.2.85.62 2.76.5 4.28a.77.77 0 0 1-.9.7 16.64 16.64 0 0 1-4.08-1.36"],[6,"M16.13 21.05c1.65.63 3.68.84 4.87.91a.9.9 0 0 0 .96-.96 17.68 17.68 0 0 0-.9-4.87"],[6,"M16.94 15.62c.86.2 2.77.62 4.29.5a.77.77 0 0 0 .7-.9 16.64 16.64 0 0 0-1.36-4.08"],[6,"M17.99 5.52a20.82 20.82 0 0 1 3.15 4.5.8.8 0 0 1-.68 1.13c-2.33.2-5.3-.32-8.27-1.57"],[6,"M4.93 4.93 3 3a.7.7 0 0 1 0-1"],[6,"M9.58 12.18c1.24 2.98 1.77 5.95 1.57 8.28a.8.8 0 0 1-1.13.68 20.82 20.82 0 0 1-4.5-3.15"]],"hop-off":[[6,"M10.82 16.12c1.69.6 3.91.79 5.18.85.28.01.53-.09.7-.27"],[6,"M11.14 20.57c.52.24 2.44 1.12 4.08 1.37.46.06.86-.25.9-.71.12-1.52-.3-3.43-.5-4.28"],[6,"M16.13 21.05c1.65.63 3.68.84 4.87.91a.9.9 0 0 0 .7-.26"],[6,"M17.99 5.52a20.83 20.83 0 0 1 3.15 4.5.8.8 0 0 1-.68 1.13c-1.17.1-2.5.02-3.9-.25"],[6,"M20.57 11.14c.24.52 1.12 2.44 1.37 4.08.04.3-.08.59-.31.75"],[6,"M4.93 4.93a10 10 0 0 0-.67 13.4c.35.43.96.4 1.17-.12.69-1.71 1.07-5.07 1.07-6.71 1.34.45 3.1.9 4.88.62a.85.85 0 0 0 .48-.24"],[6,"M5.52 17.99c1.05.95 2.91 2.42 4.5 3.15a.8.8 0 0 0 1.13-.68c.2-2.34-.33-5.3-1.57-8.28"],[6,"M8.35 2.68a10 10 0 0 1 9.98 1.58c.43.35.4.96-.12 1.17-1.5.6-4.3.98-6.07 1.05"],[6,"m2 2 20 20"]],hospital:[[6,"M12 6v4"],[6,"M14 14h-4"],[6,"M14 18h-4"],[6,"M14 8h-4"],[6,"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2"],[6,"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18"]],hotel:[[6,"M10 22v-6.57"],[6,"M12 11h.01"],[6,"M12 7h.01"],[6,"M14 15.43V22"],[6,"M15 16a5 5 0 0 0-6 0"],[6,"M16 11h.01"],[6,"M16 7h.01"],[6,"M8 11h.01"],[6,"M8 7h.01"],[5,4,2,16,20,2]],hourglass:[[6,"M5 22h14"],[6,"M5 2h14"],[6,"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"],[6,"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"]],house:[[6,"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"],[6,"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"]],"house-plug":[[6,"M10 12V8.964"],[6,"M14 12V8.964"],[6,"M15 12a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2a1 1 0 0 1 1-1z"],[6,"M8.5 21H5a2 2 0 0 1-2-2v-9a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-2"]],"house-plus":[[6,"M13.22 2.416a2 2 0 0 0-2.511.057l-7 5.999A2 2 0 0 0 3 10v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7.354"],[6,"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"],[6,"M15 6h6"],[6,"M18 3v6"]],"ice-cream":[[6,"m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11"],[6,"M17 7A5 5 0 0 0 7 7"],[6,"M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4"]],"ice-cream-2":[[6,"M12 17c5 0 8-2.69 8-6H4c0 3.31 3 6 8 6m-4 4h8m-4-3v3M5.14 11a3.5 3.5 0 1 1 6.71 0"],[6,"M12.14 11a3.5 3.5 0 1 1 6.71 0"],[6,"M15.5 6.5a3.5 3.5 0 1 0-7 0"]],"ice-cream-bowl":[[6,"M12 17c5 0 8-2.69 8-6H4c0 3.31 3 6 8 6m-4 4h8m-4-3v3M5.14 11a3.5 3.5 0 1 1 6.71 0"],[6,"M12.14 11a3.5 3.5 0 1 1 6.71 0"],[6,"M15.5 6.5a3.5 3.5 0 1 0-7 0"]],"ice-cream-cone":[[6,"m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11"],[6,"M17 7A5 5 0 0 0 7 7"],[6,"M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4"]],"id-card":[[6,"M16 10h2"],[6,"M16 14h2"],[6,"M6.17 15a3 3 0 0 1 5.66 0"],[1,9,11,2],[5,2,5,20,14,2]],image:[[5,3,3,18,18,2,2],[1,9,9,2],[6,"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"]],"image-down":[[6,"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21"],[6,"m14 19 3 3v-5.5"],[6,"m17 22 3-3"],[1,9,9,2]],"image-minus":[[6,"M21 9v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"],[0,16,5,22,5],[1,9,9,2],[6,"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"]],"image-off":[[0,2,2,22,22],[6,"M10.41 10.41a2 2 0 1 1-2.83-2.83"],[0,13.5,13.5,6,21],[0,18,12,21,15],[6,"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59"],[6,"M21 15V5a2 2 0 0 0-2-2H9"]],"image-play":[[6,"m11 16-5 5"],[6,"M11 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6.5"],[6,"M15.765 22a.5.5 0 0 1-.765-.424V13.38a.5.5 0 0 1 .765-.424l5.878 3.674a1 1 0 0 1 0 1.696z"],[1,9,9,2]],"image-plus":[[6,"M16 5h6"],[6,"M19 2v6"],[6,"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5"],[6,"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"],[1,9,9,2]],"image-up":[[6,"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21"],[6,"m14 19.5 3-3 3 3"],[6,"M17 22v-5.5"],[1,9,9,2]],images:[[6,"M18 22H4a2 2 0 0 1-2-2V6"],[6,"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18"],[1,12,8,2],[5,6,2,16,16,2]],import:[[6,"M12 3v12"],[6,"m8 11 4 4 4-4"],[6,"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4"]],inbox:[[2,"22 12 16 12 14 15 10 15 8 12 2 12"],[6,"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"]],indent:[[2,"3 8 7 12 3 16"],[0,21,12,11,12],[0,21,6,11,6],[0,21,18,11,18]],"indent-decrease":[[2,"7 8 3 12 7 16"],[0,21,12,11,12],[0,21,6,11,6],[0,21,18,11,18]],"indent-increase":[[2,"3 8 7 12 3 16"],[0,21,12,11,12],[0,21,6,11,6],[0,21,18,11,18]],"indian-rupee":[[6,"M6 3h12"],[6,"M6 8h12"],[6,"m6 13 8.5 8"],[6,"M6 13h3"],[6,"M9 13c6.667 0 6.667-10 0-10"]],infinity:[[6,"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z"]],info:[[1,12,12,10],[6,"M12 16v-4"],[6,"M12 8h.01"]],inspect:[[6,"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"],[6,"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6"]],"inspection-panel":[[5,3,3,18,18,2],[6,"M7 7h.01"],[6,"M17 7h.01"],[6,"M7 17h.01"],[6,"M17 17h.01"]],instagram:[[5,2,2,20,20,5,5],[6,"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"],[0,17.5,6.5,17.51,6.5]],italic:[[0,19,4,10,4],[0,14,20,5,20],[0,15,4,9,20]],"iteration-ccw":[[6,"M20 10c0-4.4-3.6-8-8-8s-8 3.6-8 8 3.6 8 8 8h8"],[2,"16 14 20 18 16 22"]],"iteration-cw":[[6,"M4 10c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8H4"],[2,"8 22 4 18 8 14"]],"japanese-yen":[[6,"M12 9.5V21m0-11.5L6 3m6 6.5L18 3"],[6,"M6 15h12"],[6,"M6 11h12"]],joystick:[[6,"M21 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2Z"],[6,"M6 15v-2"],[6,"M12 15V9"],[1,12,6,3]],kanban:[[6,"M6 5v11"],[6,"M12 5v6"],[6,"M18 5v14"]],"kanban-square":[[5,3,3,18,18,2],[6,"M8 7v7"],[6,"M12 7v4"],[6,"M16 7v9"]],"kanban-square-dashed":[[6,"M8 7v7"],[6,"M12 7v4"],[6,"M16 7v9"],[6,"M5 3a2 2 0 0 0-2 2"],[6,"M9 3h1"],[6,"M14 3h1"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M21 9v1"],[6,"M21 14v1"],[6,"M21 19a2 2 0 0 1-2 2"],[6,"M14 21h1"],[6,"M9 21h1"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M3 14v1"],[6,"M3 9v1"]],key:[[6,"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"],[6,"m21 2-9.6 9.6"],[1,7.5,15.5,5.5]],"key-round":[[6,"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"],[1,16.5,7.5,.5]],"key-square":[[6,"M12.4 2.7a2.5 2.5 0 0 1 3.4 0l5.5 5.5a2.5 2.5 0 0 1 0 3.4l-3.7 3.7a2.5 2.5 0 0 1-3.4 0L8.7 9.8a2.5 2.5 0 0 1 0-3.4z"],[6,"m14 7 3 3"],[6,"m9.4 10.6-6.814 6.814A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814"]],keyboard:[[6,"M10 8h.01"],[6,"M12 12h.01"],[6,"M14 8h.01"],[6,"M16 12h.01"],[6,"M18 8h.01"],[6,"M6 8h.01"],[6,"M7 16h10"],[6,"M8 12h.01"],[5,2,4,20,16,2]],"keyboard-music":[[5,2,4,20,16,2],[6,"M6 8h4"],[6,"M14 8h.01"],[6,"M18 8h.01"],[6,"M2 12h20"],[6,"M6 12v4"],[6,"M10 12v4"],[6,"M14 12v4"],[6,"M18 12v4"]],"keyboard-off":[[6,"M 20 4 A2 2 0 0 1 22 6"],[6,"M 22 6 L 22 16.41"],[6,"M 7 16 L 16 16"],[6,"M 9.69 4 L 20 4"],[6,"M14 8h.01"],[6,"M18 8h.01"],[6,"m2 2 20 20"],[6,"M20 20H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2"],[6,"M6 8h.01"],[6,"M8 12h.01"]],lamp:[[6,"M8 2h8l4 10H4L8 2Z"],[6,"M12 12v6"],[6,"M8 22v-2c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v2H8Z"]],"lamp-ceiling":[[6,"M12 2v5"],[6,"M6 7h12l4 9H2l4-9Z"],[6,"M9.17 16a3 3 0 1 0 5.66 0"]],"lamp-desk":[[6,"m14 5-3 3 2 7 8-8-7-2Z"],[6,"m14 5-3 3-3-3 3-3 3 3Z"],[6,"M9.5 6.5 4 12l3 6"],[6,"M3 22v-2c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v2H3Z"]],"lamp-floor":[[6,"M9 2h6l3 7H6l3-7Z"],[6,"M12 9v13"],[6,"M9 22h6"]],"lamp-wall-down":[[6,"M11 13h6l3 7H8l3-7Z"],[6,"M14 13V8a2 2 0 0 0-2-2H8"],[6,"M4 9h2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H4v6Z"]],"lamp-wall-up":[[6,"M11 4h6l3 7H8l3-7Z"],[6,"M14 11v5a2 2 0 0 1-2 2H8"],[6,"M4 15h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H4v-6Z"]],"land-plot":[[6,"m12 8 6-3-6-3v10"],[6,"m8 11.99-5.5 3.14a1 1 0 0 0 0 1.74l8.5 4.86a2 2 0 0 0 2 0l8.5-4.86a1 1 0 0 0 0-1.74L16 12"],[6,"m6.49 12.85 11.02 6.3"],[6,"M17.51 12.85 6.5 19.15"]],landmark:[[0,3,22,21,22],[0,6,18,6,11],[0,10,18,10,11],[0,14,18,14,11],[0,18,18,18,11],[3,"12 2 20 7 4 7"]],languages:[[6,"m5 8 6 6"],[6,"m4 14 6-6 2-3"],[6,"M2 5h12"],[6,"M7 2h1"],[6,"m22 22-5-10-5 10"],[6,"M14 18h6"]],laptop:[[6,"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16"]],"laptop-2":[[5,3,4,18,12,2,2],[0,2,20,22,20]],"laptop-minimal":[[5,3,4,18,12,2,2],[0,2,20,22,20]],lasso:[[6,"M7 22a5 5 0 0 1-2-4"],[6,"M3.3 14A6.8 6.8 0 0 1 2 10c0-4.4 4.5-8 10-8s10 3.6 10 8-4.5 8-10 8a12 12 0 0 1-5-1"],[6,"M5 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"]],"lasso-select":[[6,"M7 22a5 5 0 0 1-2-4"],[6,"M7 16.93c.96.43 1.96.74 2.99.91"],[6,"M3.34 14A6.8 6.8 0 0 1 2 10c0-4.42 4.48-8 10-8s10 3.58 10 8a7.19 7.19 0 0 1-.33 2"],[6,"M5 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"],[6,"M14.33 22h-.09a.35.35 0 0 1-.24-.32v-10a.34.34 0 0 1 .33-.34c.08 0 .15.03.21.08l7.34 6a.33.33 0 0 1-.21.59h-4.49l-2.57 3.85a.35.35 0 0 1-.28.14z"]],laugh:[[1,12,12,10],[6,"M18 13a6 6 0 0 1-6 5 6 6 0 0 1-6-5h12Z"],[0,9,9,9.01,9],[0,15,9,15.01,9]],layers:[[6,"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"],[6,"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"],[6,"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"]],"layers-2":[[6,"m16.02 12 5.48 3.13a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74L7.98 12"],[6,"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74Z"]],"layers-3":[[6,"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"],[6,"m6.08 9.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59"],[6,"m6.08 14.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59"]],layout:[[5,3,3,18,18,2],[6,"M3 9h18"],[6,"M9 21V9"]],"layout-dashboard":[[5,3,3,7,9,1],[5,14,3,7,5,1],[5,14,12,7,9,1],[5,3,16,7,5,1]],"layout-grid":[[5,3,3,7,7,1],[5,14,3,7,7,1],[5,14,14,7,7,1],[5,3,14,7,7,1]],"layout-list":[[5,3,3,7,7,1],[5,3,14,7,7,1],[6,"M14 4h7"],[6,"M14 9h7"],[6,"M14 15h7"],[6,"M14 20h7"]],"layout-panel-left":[[5,3,3,7,18,1],[5,14,3,7,7,1],[5,14,14,7,7,1]],"layout-panel-top":[[5,3,3,18,7,1],[5,3,14,7,7,1],[5,14,14,7,7,1]],"layout-template":[[5,3,3,18,7,1],[5,3,14,9,7,1],[5,16,14,5,7,1]],leaf:[[6,"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"],[6,"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"]],"leafy-green":[[6,"M2 22c1.25-.987 2.27-1.975 3.9-2.2a5.56 5.56 0 0 1 3.8 1.5 4 4 0 0 0 6.187-2.353 3.5 3.5 0 0 0 3.69-5.116A3.5 3.5 0 0 0 20.95 8 3.5 3.5 0 1 0 16 3.05a3.5 3.5 0 0 0-5.831 1.373 3.5 3.5 0 0 0-5.116 3.69 4 4 0 0 0-2.348 6.155C3.499 15.42 4.409 16.712 4.2 18.1 3.926 19.743 3.014 20.732 2 22"],[6,"M2 22 17 7"]],lectern:[[6,"M16 12h3a2 2 0 0 0 1.902-1.38l1.056-3.333A1 1 0 0 0 21 6H3a1 1 0 0 0-.958 1.287l1.056 3.334A2 2 0 0 0 5 12h3"],[6,"M18 6V3a1 1 0 0 0-1-1h-3"],[5,8,10,8,12,1]],"letter-text":[[6,"M15 12h6"],[6,"M15 6h6"],[6,"m3 13 3.553-7.724a.5.5 0 0 1 .894 0L11 13"],[6,"M3 18h18"],[6,"M4 11h6"]],library:[[6,"m16 6 4 14"],[6,"M12 6v14"],[6,"M8 8v12"],[6,"M4 4v16"]],"library-big":[[5,3,3,8,18,1],[6,"M7 3v18"],[6,"M20.4 18.9c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z"]],"library-square":[[5,3,3,18,18,2],[6,"M7 7v10"],[6,"M11 7v10"],[6,"m15 7 2 10"]],"life-buoy":[[1,12,12,10],[6,"m4.93 4.93 4.24 4.24"],[6,"m14.83 9.17 4.24-4.24"],[6,"m14.83 14.83 4.24 4.24"],[6,"m9.17 14.83-4.24 4.24"],[1,12,12,4]],ligature:[[6,"M8 20V8c0-2.2 1.8-4 4-4 1.5 0 2.8.8 3.5 2"],[6,"M6 12h4"],[6,"M14 12h2v8"],[6,"M6 20h4"],[6,"M14 20h4"]],lightbulb:[[6,"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"],[6,"M9 18h6"],[6,"M10 22h4"]],"lightbulb-off":[[6,"M16.8 11.2c.8-.9 1.2-2 1.2-3.2a6 6 0 0 0-9.3-5"],[6,"m2 2 20 20"],[6,"M6.3 6.3a4.67 4.67 0 0 0 1.2 5.2c.7.7 1.3 1.5 1.5 2.5"],[6,"M9 18h6"],[6,"M10 22h4"]],"line-chart":[[6,"M3 3v16a2 2 0 0 0 2 2h16"],[6,"m19 9-5 5-4-4-3 3"]],link:[[6,"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],[6,"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"]],"link-2":[[6,"M9 17H7A5 5 0 0 1 7 7h2"],[6,"M15 7h2a5 5 0 1 1 0 10h-2"],[0,8,12,16,12]],"link-2off":[[6,"M9 17H7A5 5 0 0 1 7 7"],[6,"M15 7h2a5 5 0 0 1 4 8"],[0,8,12,12,12],[0,2,2,22,22]],linkedin:[[6,"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"],[5,2,9,4,12],[1,4,4,2]],list:[[0,8,6,21,6],[0,8,12,21,12],[0,8,18,21,18],[0,3,6,3.01,6],[0,3,12,3.01,12],[0,3,18,3.01,18]],"list-check":[[6,"M11 18H3"],[6,"m15 18 2 2 4-4"],[6,"M16 12H3"],[6,"M16 6H3"]],"list-checks":[[6,"m3 17 2 2 4-4"],[6,"m3 7 2 2 4-4"],[6,"M13 6h8"],[6,"M13 12h8"],[6,"M13 18h8"]],"list-collapse":[[6,"m3 10 2.5-2.5L3 5"],[6,"m3 19 2.5-2.5L3 14"],[6,"M10 6h11"],[6,"M10 12h11"],[6,"M10 18h11"]],"list-end":[[6,"M16 12H3"],[6,"M16 6H3"],[6,"M10 18H3"],[6,"M21 6v10a2 2 0 0 1-2 2h-5"],[6,"m16 16-2 2 2 2"]],"list-filter":[[6,"M3 6h18"],[6,"M7 12h10"],[6,"M10 18h4"]],"list-minus":[[6,"M11 12H3"],[6,"M16 6H3"],[6,"M16 18H3"],[6,"M21 12h-6"]],"list-music":[[6,"M21 15V6"],[6,"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"],[6,"M12 12H3"],[6,"M16 6H3"],[6,"M12 18H3"]],"list-ordered":[[0,10,6,21,6],[0,10,12,21,12],[0,10,18,21,18],[6,"M4 6h1v4"],[6,"M4 10h2"],[6,"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"]],"list-plus":[[6,"M11 12H3"],[6,"M16 6H3"],[6,"M16 18H3"],[6,"M18 9v6"],[6,"M21 12h-6"]],"list-restart":[[6,"M21 6H3"],[6,"M7 12H3"],[6,"M7 18H3"],[6,"M12 18a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L11 14"],[6,"M11 10v4h4"]],"list-start":[[6,"M16 12H3"],[6,"M16 18H3"],[6,"M10 6H3"],[6,"M21 18V8a2 2 0 0 0-2-2h-5"],[6,"m16 8-2-2 2-2"]],"list-todo":[[5,3,5,6,6,1],[6,"m3 17 2 2 4-4"],[6,"M13 6h8"],[6,"M13 12h8"],[6,"M13 18h8"]],"list-tree":[[6,"M21 12h-8"],[6,"M21 6H8"],[6,"M21 18h-8"],[6,"M3 6v4c0 1.1.9 2 2 2h3"],[6,"M3 10v6c0 1.1.9 2 2 2h3"]],"list-video":[[6,"M12 12H3"],[6,"M16 6H3"],[6,"M12 18H3"],[6,"m16 12 5 3-5 3v-6Z"]],"list-x":[[6,"M11 12H3"],[6,"M16 6H3"],[6,"M16 18H3"],[6,"m19 10-4 4"],[6,"m15 10 4 4"]],loader:[[6,"M12 2v4"],[6,"m16.2 7.8 2.9-2.9"],[6,"M18 12h4"],[6,"m16.2 16.2 2.9 2.9"],[6,"M12 18v4"],[6,"m4.9 19.1 2.9-2.9"],[6,"M2 12h4"],[6,"m4.9 4.9 2.9 2.9"]],"loader-2":[[6,"M21 12a9 9 0 1 1-6.219-8.56"]],"loader-circle":[[6,"M21 12a9 9 0 1 1-6.219-8.56"]],"loader-pinwheel":[[6,"M22 12a1 1 0 0 1-10 0 1 1 0 0 0-10 0"],[6,"M7 20.7a1 1 0 1 1 5-8.7 1 1 0 1 0 5-8.6"],[6,"M7 3.3a1 1 0 1 1 5 8.6 1 1 0 1 0 5 8.6"],[1,12,12,10]],locate:[[0,2,12,5,12],[0,19,12,22,12],[0,12,2,12,5],[0,12,19,12,22],[1,12,12,7]],"locate-fixed":[[0,2,12,5,12],[0,19,12,22,12],[0,12,2,12,5],[0,12,19,12,22],[1,12,12,7],[1,12,12,3]],"locate-off":[[0,2,12,5,12],[0,19,12,22,12],[0,12,2,12,5],[0,12,19,12,22],[6,"M7.11 7.11C5.83 8.39 5 10.1 5 12c0 3.87 3.13 7 7 7 1.9 0 3.61-.83 4.89-2.11"],[6,"M18.71 13.96c.19-.63.29-1.29.29-1.96 0-3.87-3.13-7-7-7-.67 0-1.33.1-1.96.29"],[0,2,2,22,22]],lock:[[5,3,11,18,11,2,2],[6,"M7 11V7a5 5 0 0 1 10 0v4"]],"lock-keyhole":[[1,12,16,1],[5,3,10,18,12,2],[6,"M7 10V7a5 5 0 0 1 10 0v3"]],"lock-keyhole-open":[[1,12,16,1],[5,3,10,18,12,2],[6,"M7 10V7a5 5 0 0 1 9.33-2.5"]],"lock-open":[[5,3,11,18,11,2,2],[6,"M7 11V7a5 5 0 0 1 9.9-1"]],"log-in":[[6,"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"],[2,"10 17 15 12 10 7"],[0,15,12,3,12]],"log-out":[[6,"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],[2,"16 17 21 12 16 7"],[0,21,12,9,12]],logs:[[6,"M13 12h8"],[6,"M13 18h8"],[6,"M13 6h8"],[6,"M3 12h1"],[6,"M3 18h1"],[6,"M3 6h1"],[6,"M8 12h1"],[6,"M8 18h1"],[6,"M8 6h1"]],lollipop:[[1,11,11,8],[6,"m21 21-4.3-4.3"],[6,"M11 11a2 2 0 0 0 4 0 4 4 0 0 0-8 0 6 6 0 0 0 12 0"]],luggage:[[6,"M6 20a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2"],[6,"M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14"],[6,"M10 20h4"],[1,16,20,2],[1,8,20,2]],"m-square":[[5,3,3,18,18,2],[6,"M8 16V8l4 4 4-4v8"]],magnet:[[6,"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15"],[6,"m5 8 4 4"],[6,"m12 15 4 4"]],mail:[[5,2,4,20,16,2],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"]],"mail-check":[[6,"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"m16 19 2 2 4-4"]],"mail-minus":[[6,"M22 15V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M16 19h6"]],"mail-open":[[6,"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z"],[6,"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10"]],"mail-plus":[[6,"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M19 16v6"],[6,"M16 19h6"]],"mail-question":[[6,"M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M18 15.28c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2"],[6,"M20 22v.01"]],"mail-search":[[6,"M22 12.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h7.5"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M18 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"],[1,18,18,3],[6,"m22 22-1.5-1.5"]],"mail-warning":[[6,"M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M20 14v4"],[6,"M20 22v.01"]],"mail-x":[[6,"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"m17 17 4 4"],[6,"m21 17-4 4"]],mailbox:[[6,"M22 17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.5C2 7 4 5 6.5 5H18c2.2 0 4 1.8 4 4v8Z"],[2,"15,9 18,9 18,11"],[6,"M6.5 5C9 5 11 7 11 9.5V17a2 2 0 0 1-2 2"],[0,6,10,7,10]],mails:[[5,6,4,16,13,2],[6,"m22 7-7.1 3.78c-.57.3-1.23.3-1.8 0L6 7"],[6,"M2 8v11c0 1.1.9 2 2 2h14"]],map:[[6,"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"],[6,"M15 5.764v15"],[6,"M9 3.236v15"]],"map-pin":[[6,"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"],[1,12,10,3]],"map-pin-check":[[6,"M19.43 12.935c.357-.967.57-1.955.57-2.935a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 1.202 0 32.197 32.197 0 0 0 .813-.728"],[1,12,10,3],[6,"m16 18 2 2 4-4"]],"map-pin-check-inside":[[6,"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"],[6,"m9 10 2 2 4-4"]],"map-pin-house":[[6,"M15 22a1 1 0 0 1-1-1v-4a1 1 0 0 1 .445-.832l3-2a1 1 0 0 1 1.11 0l3 2A1 1 0 0 1 22 17v4a1 1 0 0 1-1 1z"],[6,"M18 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 .601.2"],[6,"M18 22v-3"],[1,10,10,3]],"map-pin-minus":[[6,"M18.977 14C19.6 12.701 20 11.343 20 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 1.202 0 32 32 0 0 0 .824-.738"],[1,12,10,3],[6,"M16 18h6"]],"map-pin-minus-inside":[[6,"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"],[6,"M9 10h6"]],"map-pin-off":[[6,"M12.75 7.09a3 3 0 0 1 2.16 2.16"],[6,"M17.072 17.072c-1.634 2.17-3.527 3.912-4.471 4.727a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 1.432-4.568"],[6,"m2 2 20 20"],[6,"M8.475 2.818A8 8 0 0 1 20 10c0 1.183-.31 2.377-.81 3.533"],[6,"M9.13 9.13a3 3 0 0 0 3.74 3.74"]],"map-pin-plus":[[6,"M19.914 11.105A7.298 7.298 0 0 0 20 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 1.202 0 32 32 0 0 0 .824-.738"],[1,12,10,3],[6,"M16 18h6"],[6,"M19 15v6"]],"map-pin-plus-inside":[[6,"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"],[6,"M12 7v6"],[6,"M9 10h6"]],"map-pin-x":[[6,"M19.752 11.901A7.78 7.78 0 0 0 20 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 1.202 0 19 19 0 0 0 .09-.077"],[1,12,10,3],[6,"m21.5 15.5-5 5"],[6,"m21.5 20.5-5-5"]],"map-pin-xinside":[[6,"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"],[6,"m14.5 7.5-5 5"],[6,"m9.5 7.5 5 5"]],"map-pinned":[[6,"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0"],[1,12,8,2],[6,"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712"]],martini:[[6,"M8 22h8"],[6,"M12 11v11"],[6,"m19 3-7 8-7-8Z"]],maximize:[[6,"M8 3H5a2 2 0 0 0-2 2v3"],[6,"M21 8V5a2 2 0 0 0-2-2h-3"],[6,"M3 16v3a2 2 0 0 0 2 2h3"],[6,"M16 21h3a2 2 0 0 0 2-2v-3"]],"maximize-2":[[2,"15 3 21 3 21 9"],[2,"9 21 3 21 3 15"],[0,21,3,14,10],[0,3,21,10,14]],medal:[[6,"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15"],[6,"M11 12 5.12 2.2"],[6,"m13 12 5.88-9.8"],[6,"M8 7h8"],[1,12,17,5],[6,"M12 18v-2h-.5"]],megaphone:[[6,"m3 11 18-5v12L3 14v-3z"],[6,"M11.6 16.8a3 3 0 1 1-5.8-1.6"]],"megaphone-off":[[6,"M9.26 9.26 3 11v3l14.14 3.14"],[6,"M21 15.34V6l-7.31 2.03"],[6,"M11.6 16.8a3 3 0 1 1-5.8-1.6"],[0,2,2,22,22]],meh:[[1,12,12,10],[0,8,15,16,15],[0,9,9,9.01,9],[0,15,9,15.01,9]],"memory-stick":[[6,"M6 19v-3"],[6,"M10 19v-3"],[6,"M14 19v-3"],[6,"M18 19v-3"],[6,"M8 11V9"],[6,"M16 11V9"],[6,"M12 11V9"],[6,"M2 15h20"],[6,"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z"]],menu:[[0,4,12,20,12],[0,4,6,20,6],[0,4,18,20,18]],"menu-square":[[5,3,3,18,18,2],[6,"M7 8h10"],[6,"M7 12h10"],[6,"M7 16h10"]],merge:[[6,"m8 6 4-4 4 4"],[6,"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22"],[6,"m20 22-5-5"]],"message-circle":[[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"]],"message-circle-code":[[6,"M10 9.5 8 12l2 2.5"],[6,"m14 9.5 2 2.5-2 2.5"],[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22z"]],"message-circle-dashed":[[6,"M13.5 3.1c-.5 0-1-.1-1.5-.1s-1 .1-1.5.1"],[6,"M19.3 6.8a10.45 10.45 0 0 0-2.1-2.1"],[6,"M20.9 13.5c.1-.5.1-1 .1-1.5s-.1-1-.1-1.5"],[6,"M17.2 19.3a10.45 10.45 0 0 0 2.1-2.1"],[6,"M10.5 20.9c.5.1 1 .1 1.5.1s1-.1 1.5-.1"],[6,"M3.5 17.5 2 22l4.5-1.5"],[6,"M3.1 10.5c0 .5-.1 1-.1 1.5s.1 1 .1 1.5"],[6,"M6.8 4.7a10.45 10.45 0 0 0-2.1 2.1"]],"message-circle-heart":[[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"],[6,"M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7"]],"message-circle-more":[[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"],[6,"M8 12h.01"],[6,"M12 12h.01"],[6,"M16 12h.01"]],"message-circle-off":[[6,"M20.5 14.9A9 9 0 0 0 9.1 3.5"],[6,"m2 2 20 20"],[6,"M5.6 5.6C3 8.3 2.2 12.5 4 16l-2 6 6-2c3.4 1.8 7.6 1.1 10.3-1.7"]],"message-circle-plus":[[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"],[6,"M8 12h8"],[6,"M12 8v8"]],"message-circle-question":[[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"],[6,"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],[6,"M12 17h.01"]],"message-circle-reply":[[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"],[6,"m10 15-3-3 3-3"],[6,"M7 12h7a2 2 0 0 1 2 2v1"]],"message-circle-warning":[[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"],[6,"M12 8v4"],[6,"M12 16h.01"]],"message-circle-x":[[6,"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"],[6,"m15 9-6 6"],[6,"m9 9 6 6"]],"message-square":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"]],"message-square-code":[[6,"M10 7.5 8 10l2 2.5"],[6,"m14 7.5 2 2.5-2 2.5"],[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"]],"message-square-dashed":[[6,"M10 17H7l-4 4v-7"],[6,"M14 17h1"],[6,"M14 3h1"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M21 14v1a2 2 0 0 1-2 2"],[6,"M21 9v1"],[6,"M3 9v1"],[6,"M5 3a2 2 0 0 0-2 2"],[6,"M9 3h1"]],"message-square-diff":[[6,"m5 19-2 2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2"],[6,"M9 10h6"],[6,"M12 7v6"],[6,"M9 17h6"]],"message-square-dot":[[6,"M11.7 3H5a2 2 0 0 0-2 2v16l4-4h12a2 2 0 0 0 2-2v-2.7"],[1,18,6,3]],"message-square-heart":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[6,"M14.8 7.5a1.84 1.84 0 0 0-2.6 0l-.2.3-.3-.3a1.84 1.84 0 1 0-2.4 2.8L12 13l2.7-2.7c.9-.9.8-2.1.1-2.8"]],"message-square-lock":[[6,"M19 15v-2a2 2 0 1 0-4 0v2"],[6,"M9 17H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3.5"],[5,13,15,8,5,1]],"message-square-more":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[6,"M8 10h.01"],[6,"M12 10h.01"],[6,"M16 10h.01"]],"message-square-off":[[6,"M21 15V5a2 2 0 0 0-2-2H9"],[6,"m2 2 20 20"],[6,"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10"]],"message-square-plus":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[6,"M12 7v6"],[6,"M9 10h6"]],"message-square-quote":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[6,"M8 12a2 2 0 0 0 2-2V8H8"],[6,"M14 12a2 2 0 0 0 2-2V8h-2"]],"message-square-reply":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[6,"m10 7-3 3 3 3"],[6,"M17 13v-1a2 2 0 0 0-2-2H7"]],"message-square-share":[[6,"M21 12v3a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h7"],[6,"M16 3h5v5"],[6,"m16 8 5-5"]],"message-square-text":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[6,"M13 8H7"],[6,"M17 12H7"]],"message-square-warning":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[6,"M12 7v2"],[6,"M12 13h.01"]],"message-square-x":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[6,"m14.5 7.5-5 5"],[6,"m9.5 7.5 5 5"]],"messages-square":[[6,"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z"],[6,"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"]],mic:[[6,"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"],[6,"M19 10v2a7 7 0 0 1-14 0v-2"],[0,12,19,12,22]],"mic-2":[[6,"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12"],[6,"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5"],[1,16,7,5]],"mic-off":[[0,2,2,22,22],[6,"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"],[6,"M5 10v2a7 7 0 0 0 12 5"],[6,"M15 9.34V5a3 3 0 0 0-5.68-1.33"],[6,"M9 9v3a3 3 0 0 0 5.12 2.12"],[0,12,19,12,22]],"mic-vocal":[[6,"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12"],[6,"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5"],[1,16,7,5]],microchip:[[6,"M18 12h2"],[6,"M18 16h2"],[6,"M18 20h2"],[6,"M18 4h2"],[6,"M18 8h2"],[6,"M4 12h2"],[6,"M4 16h2"],[6,"M4 20h2"],[6,"M4 4h2"],[6,"M4 8h2"],[6,"M8 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-1.5c-.276 0-.494.227-.562.495a2 2 0 0 1-3.876 0C9.994 2.227 9.776 2 9.5 2z"]],microscope:[[6,"M6 18h8"],[6,"M3 22h18"],[6,"M14 22a7 7 0 1 0 0-14h-1"],[6,"M9 14h2"],[6,"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z"],[6,"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3"]],microwave:[[5,2,4,20,15,2],[5,6,8,8,7,1],[6,"M18 8v7"],[6,"M6 19v2"],[6,"M18 19v2"]],milestone:[[6,"M12 13v8"],[6,"M12 3v3"],[6,"M4 6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h13a2 2 0 0 0 1.152-.365l3.424-2.317a1 1 0 0 0 0-1.635l-3.424-2.318A2 2 0 0 0 17 6z"]],milk:[[6,"M8 2h8"],[6,"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2"],[6,"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0"]],"milk-off":[[6,"M8 2h8"],[6,"M9 2v1.343M15 2v2.789a4 4 0 0 0 .672 2.219l.656.984a4 4 0 0 1 .672 2.22v1.131M7.8 7.8l-.128.192A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3"],[6,"M7 15a6.47 6.47 0 0 1 5 0 6.472 6.472 0 0 0 3.435.435"],[0,2,2,22,22]],minimize:[[6,"M8 3v3a2 2 0 0 1-2 2H3"],[6,"M21 8h-3a2 2 0 0 1-2-2V3"],[6,"M3 16h3a2 2 0 0 1 2 2v3"],[6,"M16 21v-3a2 2 0 0 1 2-2h3"]],"minimize-2":[[2,"4 14 10 14 10 20"],[2,"20 10 14 10 14 4"],[0,14,10,21,3],[0,3,21,10,14]],minus:[[6,"M5 12h14"]],"minus-circle":[[1,12,12,10],[6,"M8 12h8"]],"minus-square":[[5,3,3,18,18,2],[6,"M8 12h8"]],monitor:[[5,2,3,20,14,2],[0,8,21,16,21],[0,12,17,12,21]],"monitor-check":[[6,"m9 10 2 2 4-4"],[5,2,3,20,14,2],[6,"M12 17v4"],[6,"M8 21h8"]],"monitor-cog":[[6,"M12 17v4"],[6,"m15.2 4.9-.9-.4"],[6,"m15.2 7.1-.9.4"],[6,"m16.9 3.2-.4-.9"],[6,"m16.9 8.8-.4.9"],[6,"m19.5 2.3-.4.9"],[6,"m19.5 9.7-.4-.9"],[6,"m21.7 4.5-.9.4"],[6,"m21.7 7.5-.9-.4"],[6,"M22 13v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"],[6,"M8 21h8"],[1,18,6,3]],"monitor-dot":[[1,19,6,3],[6,"M22 12v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h9"],[6,"M12 17v4"],[6,"M8 21h8"]],"monitor-down":[[6,"M12 13V7"],[6,"m15 10-3 3-3-3"],[5,2,3,20,14,2],[6,"M12 17v4"],[6,"M8 21h8"]],"monitor-off":[[6,"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2"],[6,"M22 15V5a2 2 0 0 0-2-2H9"],[6,"M8 21h8"],[6,"M12 17v4"],[6,"m2 2 20 20"]],"monitor-pause":[[6,"M10 13V7"],[6,"M14 13V7"],[5,2,3,20,14,2],[6,"M12 17v4"],[6,"M8 21h8"]],"monitor-play":[[6,"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z"],[6,"M12 17v4"],[6,"M8 21h8"],[5,2,3,20,14,2]],"monitor-smartphone":[[6,"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8"],[6,"M10 19v-3.96 3.15"],[6,"M7 19h5"],[5,16,12,6,10,2]],"monitor-speaker":[[6,"M5.5 20H8"],[6,"M17 9h.01"],[5,12,4,10,16,2],[6,"M8 6H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4"],[1,17,15,1]],"monitor-stop":[[6,"M12 17v4"],[6,"M8 21h8"],[5,2,3,20,14,2],[5,9,7,6,6,1]],"monitor-up":[[6,"m9 10 3-3 3 3"],[6,"M12 13V7"],[5,2,3,20,14,2],[6,"M12 17v4"],[6,"M8 21h8"]],"monitor-x":[[6,"m14.5 12.5-5-5"],[6,"m9.5 12.5 5-5"],[5,2,3,20,14,2],[6,"M12 17v4"],[6,"M8 21h8"]],moon:[[6,"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"]],"moon-star":[[6,"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9"],[6,"M20 3v4"],[6,"M22 5h-4"]],"more-horizontal":[[1,12,12,1],[1,19,12,1],[1,5,12,1]],"more-vertical":[[1,12,12,1],[1,12,5,1],[1,12,19,1]],mountain:[[6,"m8 3 4 8 5-5 5 15H2L8 3z"]],"mountain-snow":[[6,"m8 3 4 8 5-5 5 15H2L8 3z"],[6,"M4.14 15.08c2.62-1.57 5.24-1.43 7.86.42 2.74 1.94 5.49 2 8.23.19"]],mouse:[[5,5,2,14,20,7],[6,"M12 6v4"]],"mouse-off":[[6,"M12 6v.343"],[6,"M18.218 18.218A7 7 0 0 1 5 15V9a7 7 0 0 1 .782-3.218"],[6,"M19 13.343V9A7 7 0 0 0 8.56 2.902"],[6,"M22 22 2 2"]],"mouse-pointer":[[6,"M12.586 12.586 19 19"],[6,"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z"]],"mouse-pointer-2":[[6,"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z"]],"mouse-pointer-ban":[[6,"M2.034 2.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.944L8.204 7.545a1 1 0 0 0-.66.66l-1.066 3.443a.5.5 0 0 1-.944.033z"],[1,16,16,6],[6,"m11.8 11.8 8.4 8.4"]],"mouse-pointer-click":[[6,"M14 4.1 12 6"],[6,"m5.1 8-2.9-.8"],[6,"m6 12-1.9 2"],[6,"M7.2 2.2 8 5.1"],[6,"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"]],"mouse-pointer-square-dashed":[[6,"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"],[6,"M5 3a2 2 0 0 0-2 2"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M9 3h1"],[6,"M9 21h2"],[6,"M14 3h1"],[6,"M3 9v1"],[6,"M21 9v2"],[6,"M3 14v1"]],move:[[2,"5 9 2 12 5 15"],[2,"9 5 12 2 15 5"],[2,"15 19 12 22 9 19"],[2,"19 9 22 12 19 15"],[0,2,12,22,12],[0,12,2,12,22]],"move-3d":[[6,"M5 3v16h16"],[6,"m5 19 6-6"],[6,"m2 6 3-3 3 3"],[6,"m18 16 3 3-3 3"]],"move-diagonal":[[2,"13 5 19 5 19 11"],[2,"11 19 5 19 5 13"],[0,19,5,5,19]],"move-diagonal-2":[[2,"5 11 5 5 11 5"],[2,"19 13 19 19 13 19"],[0,5,5,19,19]],"move-down":[[6,"M8 18L12 22L16 18"],[6,"M12 2V22"]],"move-down-left":[[6,"M11 19H5V13"],[6,"M19 5L5 19"]],"move-down-right":[[6,"M19 13V19H13"],[6,"M5 5L19 19"]],"move-horizontal":[[2,"18 8 22 12 18 16"],[2,"6 8 2 12 6 16"],[0,2,12,22,12]],"move-left":[[6,"M6 8L2 12L6 16"],[6,"M2 12H22"]],"move-right":[[6,"M18 8L22 12L18 16"],[6,"M2 12H22"]],"move-up":[[6,"M8 6L12 2L16 6"],[6,"M12 2V22"]],"move-up-left":[[6,"M5 11V5H11"],[6,"M5 5L19 19"]],"move-up-right":[[6,"M13 5H19V11"],[6,"M19 5L5 19"]],"move-vertical":[[2,"8 18 12 22 16 18"],[2,"8 6 12 2 16 6"],[0,12,2,12,22]],music:[[6,"M9 18V5l12-2v13"],[1,6,18,3],[1,18,16,3]],"music-2":[[1,8,18,4],[6,"M12 18V2l7 4"]],"music-3":[[1,12,18,4],[6,"M16 18V2"]],"music-4":[[6,"M9 18V5l12-2v13"],[6,"m9 9 12-2"],[1,6,18,3],[1,18,16,3]],navigation:[[3,"3 11 22 2 13 21 11 13 3 11"]],"navigation-2":[[3,"12 2 19 21 12 17 5 21 12 2"]],"navigation-2off":[[6,"M9.31 9.31 5 21l7-4 7 4-1.17-3.17"],[6,"M14.53 8.88 12 2l-1.17 3.17"],[0,2,2,22,22]],"navigation-off":[[6,"M8.43 8.43 3 11l8 2 2 8 2.57-5.43"],[6,"M17.39 11.73 22 2l-9.73 4.61"],[0,2,2,22,22]],network:[[5,16,16,6,6,1],[5,2,16,6,6,1],[5,9,2,6,6,1],[6,"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"],[6,"M12 12V8"]],newspaper:[[6,"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"],[6,"M18 14h-8"],[6,"M15 18h-5"],[6,"M10 6h8v4h-8V6Z"]],nfc:[[6,"M6 8.32a7.43 7.43 0 0 1 0 7.36"],[6,"M9.46 6.21a11.76 11.76 0 0 1 0 11.58"],[6,"M12.91 4.1a15.91 15.91 0 0 1 .01 15.8"],[6,"M16.37 2a20.16 20.16 0 0 1 0 20"]],notebook:[[6,"M2 6h4"],[6,"M2 10h4"],[6,"M2 14h4"],[6,"M2 18h4"],[5,4,2,16,20,2],[6,"M16 2v20"]],"notebook-pen":[[6,"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"],[6,"M2 6h4"],[6,"M2 10h4"],[6,"M2 14h4"],[6,"M2 18h4"],[6,"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"]],"notebook-tabs":[[6,"M2 6h4"],[6,"M2 10h4"],[6,"M2 14h4"],[6,"M2 18h4"],[5,4,2,16,20,2],[6,"M15 2v20"],[6,"M15 7h5"],[6,"M15 12h5"],[6,"M15 17h5"]],"notebook-text":[[6,"M2 6h4"],[6,"M2 10h4"],[6,"M2 14h4"],[6,"M2 18h4"],[5,4,2,16,20,2],[6,"M9.5 8h5"],[6,"M9.5 12H16"],[6,"M9.5 16H14"]],"notepad-text":[[6,"M8 2v4"],[6,"M12 2v4"],[6,"M16 2v4"],[5,4,4,16,18,2],[6,"M8 10h6"],[6,"M8 14h8"],[6,"M8 18h5"]],"notepad-text-dashed":[[6,"M8 2v4"],[6,"M12 2v4"],[6,"M16 2v4"],[6,"M16 4h2a2 2 0 0 1 2 2v2"],[6,"M20 12v2"],[6,"M20 18v2a2 2 0 0 1-2 2h-1"],[6,"M13 22h-2"],[6,"M7 22H6a2 2 0 0 1-2-2v-2"],[6,"M4 14v-2"],[6,"M4 8V6a2 2 0 0 1 2-2h2"],[6,"M8 10h6"],[6,"M8 14h8"],[6,"M8 18h5"]],nut:[[6,"M12 4V2"],[6,"M5 10v4a7.004 7.004 0 0 0 5.277 6.787c.412.104.802.292 1.102.592L12 22l.621-.621c.3-.3.69-.488 1.102-.592A7.003 7.003 0 0 0 19 14v-4"],[6,"M12 4C8 4 4.5 6 4 8c-.243.97-.919 1.952-2 3 1.31-.082 1.972-.29 3-1 .54.92.982 1.356 2 2 1.452-.647 1.954-1.098 2.5-2 .595.995 1.151 1.427 2.5 2 1.31-.621 1.862-1.058 2.5-2 .629.977 1.162 1.423 2.5 2 1.209-.548 1.68-.967 2-2 1.032.916 1.683 1.157 3 1-1.297-1.036-1.758-2.03-2-3-.5-2-4-4-8-4Z"]],"nut-off":[[6,"M12 4V2"],[6,"M5 10v4a7.004 7.004 0 0 0 5.277 6.787c.412.104.802.292 1.102.592L12 22l.621-.621c.3-.3.69-.488 1.102-.592a7.01 7.01 0 0 0 4.125-2.939"],[6,"M19 10v3.343"],[6,"M12 12c-1.349-.573-1.905-1.005-2.5-2-.546.902-1.048 1.353-2.5 2-1.018-.644-1.46-1.08-2-2-1.028.71-1.69.918-3 1 1.081-1.048 1.757-2.03 2-3 .194-.776.84-1.551 1.79-2.21m11.654 5.997c.887-.457 1.28-.891 1.556-1.787 1.032.916 1.683 1.157 3 1-1.297-1.036-1.758-2.03-2-3-.5-2-4-4-8-4-.74 0-1.461.068-2.15.192"],[0,2,2,22,22]],octagon:[[6,"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z"]],"octagon-alert":[[6,"M12 16h.01"],[6,"M12 8v4"],[6,"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z"]],"octagon-minus":[[6,"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z"],[6,"M8 12h8"]],"octagon-pause":[[6,"M10 15V9"],[6,"M14 15V9"],[6,"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z"]],"octagon-x":[[6,"m15 9-6 6"],[6,"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z"],[6,"m9 9 6 6"]],omega:[[6,"M3 20h4.5a.5.5 0 0 0 .5-.5v-.282a.52.52 0 0 0-.247-.437 8 8 0 1 1 8.494-.001.52.52 0 0 0-.247.438v.282a.5.5 0 0 0 .5.5H21"]],option:[[6,"M3 3h6l6 18h6"],[6,"M14 3h7"]],orbit:[[1,12,12,3],[1,19,5,2],[1,5,19,2],[6,"M10.4 21.9a10 10 0 0 0 9.941-15.416"],[6,"M13.5 2.1a10 10 0 0 0-9.841 15.416"]],origami:[[6,"M12 12V4a1 1 0 0 1 1-1h6.297a1 1 0 0 1 .651 1.759l-4.696 4.025"],[6,"m12 21-7.414-7.414A2 2 0 0 1 4 12.172V6.415a1.002 1.002 0 0 1 1.707-.707L20 20.009"],[6,"m12.214 3.381 8.414 14.966a1 1 0 0 1-.167 1.199l-1.168 1.163a1 1 0 0 1-.706.291H6.351a1 1 0 0 1-.625-.219L3.25 18.8a1 1 0 0 1 .631-1.781l4.165.027"]],outdent:[[2,"7 8 3 12 7 16"],[0,21,12,11,12],[0,21,6,11,6],[0,21,18,11,18]],package:[[6,"m7.5 4.27 9 5.15"],[6,"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"],[6,"m3.3 7 8.7 5 8.7-5"],[6,"M12 22V12"]],"package-2":[[6,"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z"],[6,"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9"],[6,"M12 3v6"]],"package-check":[[6,"m16 16 2 2 4-4"],[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"m7.5 4.27 9 5.15"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12]],"package-minus":[[6,"M16 16h6"],[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"m7.5 4.27 9 5.15"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12]],"package-open":[[6,"M12 22v-9"],[6,"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z"],[6,"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13"],[6,"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z"]],"package-plus":[[6,"M16 16h6"],[6,"M19 13v6"],[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"m7.5 4.27 9 5.15"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12]],"package-search":[[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"m7.5 4.27 9 5.15"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12],[1,18.5,15.5,2.5],[6,"M20.27 17.27 22 19"]],"package-x":[[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"m7.5 4.27 9 5.15"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12],[6,"m17 13 5 5m-5 0 5-5"]],"paint-bucket":[[6,"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"],[6,"m5 2 5 5"],[6,"M2 13h15"],[6,"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"]],"paint-roller":[[5,2,2,16,6,2],[6,"M10 16v-2a2 2 0 0 1 2-2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"],[5,8,16,4,6,1]],paintbrush:[[6,"m14.622 17.897-10.68-2.913"],[6,"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z"],[6,"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15"]],"paintbrush-2":[[6,"M10 2v2"],[6,"M14 2v4"],[6,"M17 2a1 1 0 0 1 1 1v9H6V3a1 1 0 0 1 1-1z"],[6,"M6 12a1 1 0 0 0-1 1v1a2 2 0 0 0 2 2h2a1 1 0 0 1 1 1v2.9a2 2 0 1 0 4 0V17a1 1 0 0 1 1-1h2a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1"]],"paintbrush-vertical":[[6,"M10 2v2"],[6,"M14 2v4"],[6,"M17 2a1 1 0 0 1 1 1v9H6V3a1 1 0 0 1 1-1z"],[6,"M6 12a1 1 0 0 0-1 1v1a2 2 0 0 0 2 2h2a1 1 0 0 1 1 1v2.9a2 2 0 1 0 4 0V17a1 1 0 0 1 1-1h2a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1"]],palette:[[1,13.5,6.5,.5],[1,17.5,10.5,.5],[1,8.5,7.5,.5],[1,6.5,12.5,.5],[6,"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"]],palmtree:[[6,"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4"],[6,"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3"],[6,"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35"],[6,"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14"]],"panel-bottom":[[5,3,3,18,18,2],[6,"M3 15h18"]],"panel-bottom-close":[[5,3,3,18,18,2],[6,"M3 15h18"],[6,"m15 8-3 3-3-3"]],"panel-bottom-dashed":[[5,3,3,18,18,2],[6,"M14 15h1"],[6,"M19 15h2"],[6,"M3 15h2"],[6,"M9 15h1"]],"panel-bottom-inactive":[[5,3,3,18,18,2],[6,"M14 15h1"],[6,"M19 15h2"],[6,"M3 15h2"],[6,"M9 15h1"]],"panel-bottom-open":[[5,3,3,18,18,2],[6,"M3 15h18"],[6,"m9 10 3-3 3 3"]],"panel-left":[[5,3,3,18,18,2],[6,"M9 3v18"]],"panel-left-close":[[5,3,3,18,18,2],[6,"M9 3v18"],[6,"m16 15-3-3 3-3"]],"panel-left-dashed":[[5,3,3,18,18,2],[6,"M9 14v1"],[6,"M9 19v2"],[6,"M9 3v2"],[6,"M9 9v1"]],"panel-left-inactive":[[5,3,3,18,18,2],[6,"M9 14v1"],[6,"M9 19v2"],[6,"M9 3v2"],[6,"M9 9v1"]],"panel-left-open":[[5,3,3,18,18,2],[6,"M9 3v18"],[6,"m14 9 3 3-3 3"]],"panel-right":[[5,3,3,18,18,2],[6,"M15 3v18"]],"panel-right-close":[[5,3,3,18,18,2],[6,"M15 3v18"],[6,"m8 9 3 3-3 3"]],"panel-right-dashed":[[5,3,3,18,18,2],[6,"M15 14v1"],[6,"M15 19v2"],[6,"M15 3v2"],[6,"M15 9v1"]],"panel-right-inactive":[[5,3,3,18,18,2],[6,"M15 14v1"],[6,"M15 19v2"],[6,"M15 3v2"],[6,"M15 9v1"]],"panel-right-open":[[5,3,3,18,18,2],[6,"M15 3v18"],[6,"m10 15-3-3 3-3"]],"panel-top":[[5,3,3,18,18,2],[6,"M3 9h18"]],"panel-top-close":[[5,3,3,18,18,2],[6,"M3 9h18"],[6,"m9 16 3-3 3 3"]],"panel-top-dashed":[[5,3,3,18,18,2],[6,"M14 9h1"],[6,"M19 9h2"],[6,"M3 9h2"],[6,"M9 9h1"]],"panel-top-inactive":[[5,3,3,18,18,2],[6,"M14 9h1"],[6,"M19 9h2"],[6,"M3 9h2"],[6,"M9 9h1"]],"panel-top-open":[[5,3,3,18,18,2],[6,"M3 9h18"],[6,"m15 14-3 3-3-3"]],"panels-left-bottom":[[5,3,3,18,18,2],[6,"M9 3v18"],[6,"M9 15h12"]],"panels-left-right":[[5,3,3,18,18,2],[6,"M9 3v18"],[6,"M15 3v18"]],"panels-right-bottom":[[5,3,3,18,18,2],[6,"M3 15h12"],[6,"M15 3v18"]],"panels-top-bottom":[[5,3,3,18,18,2],[6,"M21 9H3"],[6,"M21 15H3"]],"panels-top-left":[[5,3,3,18,18,2],[6,"M3 9h18"],[6,"M9 21V9"]],paperclip:[[6,"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"]],parentheses:[[6,"M8 21s-4-3-4-9 4-9 4-9"],[6,"M16 3s4 3 4 9-4 9-4 9"]],"parking-circle":[[1,12,12,10],[6,"M9 17V7h4a3 3 0 0 1 0 6H9"]],"parking-circle-off":[[1,12,12,10],[6,"m5 5 14 14"],[6,"M13 13a3 3 0 1 0 0-6H9v2"],[6,"M9 17v-2.34"]],"parking-meter":[[6,"M9 9a3 3 0 1 1 6 0"],[6,"M12 12v3"],[6,"M11 15h2"],[6,"M19 9a7 7 0 1 0-13.6 2.3C6.4 14.4 8 19 8 19h8s1.6-4.6 2.6-7.7c.3-.8.4-1.5.4-2.3"],[6,"M12 19v3"]],"parking-square":[[5,3,3,18,18,2],[6,"M9 17V7h4a3 3 0 0 1 0 6H9"]],"parking-square-off":[[6,"M3.6 3.6A2 2 0 0 1 5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-.59 1.41"],[6,"M3 8.7V19a2 2 0 0 0 2 2h10.3"],[6,"m2 2 20 20"],[6,"M13 13a3 3 0 1 0 0-6H9v2"],[6,"M9 17v-2.3"]],"party-popper":[[6,"M5.8 11.3 2 22l10.7-3.79"],[6,"M4 3h.01"],[6,"M22 8h.01"],[6,"M15 2h.01"],[6,"M22 20h.01"],[6,"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"],[6,"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17"],[6,"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7"],[6,"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z"]],pause:[[5,14,4,4,16,1],[5,6,4,4,16,1]],"pause-circle":[[1,12,12,10],[0,10,15,10,9],[0,14,15,14,9]],"pause-octagon":[[6,"M10 15V9"],[6,"M14 15V9"],[6,"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z"]],"paw-print":[[1,11,4,2],[1,18,8,2],[1,20,16,2],[6,"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"]],"pc-case":[[5,5,2,14,20,2],[6,"M15 14h.01"],[6,"M9 6h6"],[6,"M9 10h6"]],pen:[[6,"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"]],"pen-box":[[6,"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],[6,"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"]],"pen-line":[[6,"M12 20h9"],[6,"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z"]],"pen-off":[[6,"m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982"],[6,"m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353"],[6,"m2 2 20 20"]],"pen-square":[[6,"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],[6,"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"]],"pen-tool":[[6,"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z"],[6,"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18"],[6,"m2.3 2.3 7.286 7.286"],[1,11,11,2]],pencil:[[6,"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"],[6,"m15 5 4 4"]],"pencil-line":[[6,"M12 20h9"],[6,"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z"],[6,"m15 5 3 3"]],"pencil-off":[[6,"m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982"],[6,"m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353"],[6,"m15 5 4 4"],[6,"m2 2 20 20"]],"pencil-ruler":[[6,"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13"],[6,"m8 6 2-2"],[6,"m18 16 2-2"],[6,"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17"],[6,"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"],[6,"m15 5 4 4"]],pentagon:[[6,"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z"]],percent:[[0,19,5,5,19],[1,6.5,6.5,2.5],[1,17.5,17.5,2.5]],"percent-circle":[[1,12,12,10],[6,"m15 9-6 6"],[6,"M9 9h.01"],[6,"M15 15h.01"]],"percent-diamond":[[6,"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0Z"],[6,"M9.2 9.2h.01"],[6,"m14.5 9.5-5 5"],[6,"M14.7 14.8h.01"]],"percent-square":[[5,3,3,18,18,2],[6,"m15 9-6 6"],[6,"M9 9h.01"],[6,"M15 15h.01"]],"person-standing":[[1,12,5,1],[6,"m9 20 3-6 3 6"],[6,"m6 8 6 2 6-2"],[6,"M12 10v4"]],"philippine-peso":[[6,"M20 11H4"],[6,"M20 7H4"],[6,"M7 21V4a1 1 0 0 1 1-1h4a1 1 0 0 1 0 12H7"]],phone:[[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],"phone-call":[[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[6,"M14.05 2a9 9 0 0 1 8 7.94"],[6,"M14.05 6A5 5 0 0 1 18 10"]],"phone-forwarded":[[2,"18 2 22 6 18 10"],[0,14,6,22,6],[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],"phone-incoming":[[2,"16 2 16 8 22 8"],[0,22,2,16,8],[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],"phone-missed":[[0,22,2,16,8],[0,16,2,22,8],[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],"phone-off":[[6,"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"],[0,22,2,2,22]],"phone-outgoing":[[2,"22 8 22 2 16 2"],[0,16,8,22,2],[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],pi:[[0,9,4,9,20],[6,"M4 7c0-1.7 1.3-3 3-3h13"],[6,"M18 20c-1.7 0-3-1.3-3-3V4"]],"pi-square":[[5,3,3,18,18,2],[6,"M7 7h10"],[6,"M10 7v10"],[6,"M16 17a2 2 0 0 1-2-2V7"]],piano:[[6,"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8"],[6,"M2 14h20"],[6,"M6 14v4"],[6,"M10 14v4"],[6,"M14 14v4"],[6,"M18 14v4"]],pickaxe:[[6,"M14.531 12.469 6.619 20.38a1 1 0 1 1-3-3l7.912-7.912"],[6,"M15.686 4.314A12.5 12.5 0 0 0 5.461 2.958 1 1 0 0 0 5.58 4.71a22 22 0 0 1 6.318 3.393"],[6,"M17.7 3.7a1 1 0 0 0-1.4 0l-4.6 4.6a1 1 0 0 0 0 1.4l2.6 2.6a1 1 0 0 0 1.4 0l4.6-4.6a1 1 0 0 0 0-1.4z"],[6,"M19.686 8.314a12.501 12.501 0 0 1 1.356 10.225 1 1 0 0 1-1.751-.119 22 22 0 0 0-3.393-6.319"]],"picture-in-picture":[[6,"M8 4.5v5H3m-1-6 6 6m13 0v-3c0-1.16-.84-2-2-2h-7m-9 9v2c0 1.05.95 2 2 2h3"],[5,12,13.5,10,7,0,2]],"picture-in-picture-2":[[6,"M21 9V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h4"],[5,12,13,10,7,2]],"pie-chart":[[6,"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z"],[6,"M21.21 15.89A10 10 0 1 1 8 2.83"]],"piggy-bank":[[6,"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z"],[6,"M2 9v1c0 1.1.9 2 2 2h1"],[6,"M16 11h.01"]],pilcrow:[[6,"M13 4v16"],[6,"M17 4v16"],[6,"M19 4H9.5a4.5 4.5 0 0 0 0 9H13"]],"pilcrow-left":[[6,"M14 3v11"],[6,"M14 9h-3a3 3 0 0 1 0-6h9"],[6,"M18 3v11"],[6,"M22 18H2l4-4"],[6,"m6 22-4-4"]],"pilcrow-right":[[6,"M10 3v11"],[6,"M10 9H7a1 1 0 0 1 0-6h8"],[6,"M14 3v11"],[6,"m18 14 4 4H2"],[6,"m22 18-4 4"]],"pilcrow-square":[[5,3,3,18,18,2],[6,"M12 12H9.5a2.5 2.5 0 0 1 0-5H17"],[6,"M12 7v10"],[6,"M16 7v10"]],pill:[[6,"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"],[6,"m8.5 8.5 7 7"]],"pill-bottle":[[6,"M18 11h-4a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h4"],[6,"M6 7v13a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7"],[5,4,2,16,5,1]],pin:[[6,"M12 17v5"],[6,"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"]],"pin-off":[[6,"M12 17v5"],[6,"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"],[6,"m2 2 20 20"],[6,"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"]],pipette:[[6,"m2 22 1-1h3l9-9"],[6,"M3 21v-3l9-9"],[6,"m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z"]],pizza:[[6,"M15 11h.01"],[6,"M11 15h.01"],[6,"M16 16h.01"],[6,"m2 16 20 6-6-20A20 20 0 0 0 2 16"],[6,"M5.71 17.11a17.04 17.04 0 0 1 11.4-11.4"]],plane:[[6,"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"]],"plane-landing":[[6,"M2 22h20"],[6,"M3.77 10.77 2 9l2-4.5 1.1.55c.55.28.9.84.9 1.45s.35 1.17.9 1.45L8 8.5l3-6 1.05.53a2 2 0 0 1 1.09 1.52l.72 5.4a2 2 0 0 0 1.09 1.52l4.4 2.2c.42.22.78.55 1.01.96l.6 1.03c.49.88-.06 1.98-1.06 2.1l-1.18.15c-.47.06-.95-.02-1.37-.24L4.29 11.15a2 2 0 0 1-.52-.38Z"]],"plane-takeoff":[[6,"M2 22h20"],[6,"M6.36 17.4 4 17l-2-4 1.1-.55a2 2 0 0 1 1.8 0l.17.1a2 2 0 0 0 1.8 0L8 12 5 6l.9-.45a2 2 0 0 1 2.09.2l4.02 3a2 2 0 0 0 2.1.2l4.19-2.06a2.41 2.41 0 0 1 1.73-.17L21 7a1.4 1.4 0 0 1 .87 1.99l-.38.76c-.23.46-.6.84-1.07 1.08L7.58 17.2a2 2 0 0 1-1.22.18Z"]],play:[[3,"6 3 20 12 6 21 6 3"]],"play-circle":[[1,12,12,10],[3,"10 8 16 12 10 16 10 8"]],"play-square":[[5,3,3,18,18,2],[6,"m9 8 6 4-6 4Z"]],plug:[[6,"M12 22v-5"],[6,"M9 8V2"],[6,"M15 8V2"],[6,"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z"]],"plug-2":[[6,"M9 2v6"],[6,"M15 2v6"],[6,"M12 17v5"],[6,"M5 8h14"],[6,"M6 11V8h12v3a6 6 0 1 1-12 0Z"]],"plug-zap":[[6,"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z"],[6,"m2 22 3-3"],[6,"M7.5 13.5 10 11"],[6,"M10.5 16.5 13 14"],[6,"m18 3-4 4h6l-4 4"]],"plug-zap-2":[[6,"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z"],[6,"m2 22 3-3"],[6,"M7.5 13.5 10 11"],[6,"M10.5 16.5 13 14"],[6,"m18 3-4 4h6l-4 4"]],plus:[[6,"M5 12h14"],[6,"M12 5v14"]],"plus-circle":[[1,12,12,10],[6,"M8 12h8"],[6,"M12 8v8"]],"plus-square":[[5,3,3,18,18,2],[6,"M8 12h8"],[6,"M12 8v8"]],pocket:[[6,"M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"],[2,"8 10 12 14 16 10"]],"pocket-knife":[[6,"M3 2v1c0 1 2 1 2 2S3 6 3 7s2 1 2 2-2 1-2 2 2 1 2 2"],[6,"M18 6h.01"],[6,"M6 18h.01"],[6,"M20.83 8.83a4 4 0 0 0-5.66-5.66l-12 12a4 4 0 1 0 5.66 5.66Z"],[6,"M18 11.66V22a4 4 0 0 0 4-4V6"]],podcast:[[6,"M16.85 18.58a9 9 0 1 0-9.7 0"],[6,"M8 14a5 5 0 1 1 8 0"],[1,12,11,1],[6,"M13 17a1 1 0 1 0-2 0l.5 4.5a.5.5 0 1 0 1 0Z"]],pointer:[[6,"M22 14a8 8 0 0 1-8 8"],[6,"M18 11v-1a2 2 0 0 0-2-2a2 2 0 0 0-2 2"],[6,"M14 10V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1"],[6,"M10 9.5V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v10"],[6,"M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"]],"pointer-off":[[6,"M10 4.5V4a2 2 0 0 0-2.41-1.957"],[6,"M13.9 8.4a2 2 0 0 0-1.26-1.295"],[6,"M21.7 16.2A8 8 0 0 0 22 14v-3a2 2 0 1 0-4 0v-1a2 2 0 0 0-3.63-1.158"],[6,"m7 15-1.8-1.8a2 2 0 0 0-2.79 2.86L6 19.7a7.74 7.74 0 0 0 6 2.3h2a8 8 0 0 0 5.657-2.343"],[6,"M6 6v8"],[6,"m2 2 20 20"]],popcorn:[[6,"M18 8a2 2 0 0 0 0-4 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0 0 4"],[6,"M10 22 9 8"],[6,"m14 22 1-14"],[6,"M20 8c.5 0 .9.4.8 1l-2.6 12c-.1.5-.7 1-1.2 1H7c-.6 0-1.1-.4-1.2-1L3.2 9c-.1-.6.3-1 .8-1Z"]],popsicle:[[6,"M18.6 14.4c.8-.8.8-2 0-2.8l-8.1-8.1a4.95 4.95 0 1 0-7.1 7.1l8.1 8.1c.9.7 2.1.7 2.9-.1Z"],[6,"m22 22-5.5-5.5"]],"pound-sterling":[[6,"M18 7c0-5.333-8-5.333-8 0"],[6,"M10 7v14"],[6,"M6 21h12"],[6,"M6 13h10"]],power:[[6,"M12 2v10"],[6,"M18.4 6.6a9 9 0 1 1-12.77.04"]],"power-circle":[[6,"M12 7v4"],[6,"M7.998 9.003a5 5 0 1 0 8-.005"],[1,12,12,10]],"power-off":[[6,"M18.36 6.64A9 9 0 0 1 20.77 15"],[6,"M6.16 6.16a9 9 0 1 0 12.68 12.68"],[6,"M12 2v4"],[6,"m2 2 20 20"]],"power-square":[[6,"M12 7v4"],[6,"M7.998 9.003a5 5 0 1 0 8-.005"],[5,3,3,18,18,2]],presentation:[[6,"M2 3h20"],[6,"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3"],[6,"m7 21 5-5 5 5"]],printer:[[6,"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"],[6,"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"],[5,6,14,12,8,1]],"printer-check":[[6,"M13.5 22H7a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v.5"],[6,"m16 19 2 2 4-4"],[6,"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v2"],[6,"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"]],projector:[[6,"M5 7 3 5"],[6,"M9 6V3"],[6,"m13 7 2-2"],[1,9,13,3],[6,"M11.83 12H20a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2.17"],[6,"M16 16h2"]],proportions:[[5,2,4,20,16,2],[6,"M12 9v11"],[6,"M2 9h13a2 2 0 0 1 2 2v9"]],puzzle:[[6,"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z"]],pyramid:[[6,"M2.5 16.88a1 1 0 0 1-.32-1.43l9-13.02a1 1 0 0 1 1.64 0l9 13.01a1 1 0 0 1-.32 1.44l-8.51 4.86a2 2 0 0 1-1.98 0Z"],[6,"M12 2v20"]],"qr-code":[[5,3,3,5,5,1],[5,16,3,5,5,1],[5,3,16,5,5,1],[6,"M21 16h-3a2 2 0 0 0-2 2v3"],[6,"M21 21v.01"],[6,"M12 7v3a2 2 0 0 1-2 2H7"],[6,"M3 12h.01"],[6,"M12 3h.01"],[6,"M12 16v.01"],[6,"M16 12h1"],[6,"M21 12v.01"],[6,"M12 21v-1"]],quote:[[6,"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"],[6,"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"]],rabbit:[[6,"M13 16a3 3 0 0 1 2.24 5"],[6,"M18 12h.01"],[6,"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3"],[6,"M20 8.54V4a2 2 0 1 0-4 0v3"],[6,"M7.612 12.524a3 3 0 1 0-1.6 4.3"]],radar:[[6,"M19.07 4.93A10 10 0 0 0 6.99 3.34"],[6,"M4 6h.01"],[6,"M2.29 9.62A10 10 0 1 0 21.31 8.35"],[6,"M16.24 7.76A6 6 0 1 0 8.23 16.67"],[6,"M12 18h.01"],[6,"M17.99 11.66A6 6 0 0 1 15.77 16.67"],[1,12,12,2],[6,"m13.41 10.59 5.66-5.66"]],radiation:[[6,"M12 12h.01"],[6,"M7.5 4.2c-.3-.5-.9-.7-1.3-.4C3.9 5.5 2.3 8.1 2 11c-.1.5.4 1 1 1h5c0-1.5.8-2.8 2-3.4-1.1-1.9-2-3.5-2.5-4.4z"],[6,"M21 12c.6 0 1-.4 1-1-.3-2.9-1.8-5.5-4.1-7.1-.4-.3-1.1-.2-1.3.3-.6.9-1.5 2.5-2.6 4.3 1.2.7 2 2 2 3.5h5z"],[6,"M7.5 19.8c-.3.5-.1 1.1.4 1.3 2.6 1.2 5.6 1.2 8.2 0 .5-.2.7-.8.4-1.3-.5-.9-1.4-2.5-2.5-4.3-1.2.7-2.8.7-4 0-1.1 1.8-2 3.4-2.5 4.3z"]],radical:[[6,"M3 12h3.28a1 1 0 0 1 .948.684l2.298 7.934a.5.5 0 0 0 .96-.044L13.82 4.771A1 1 0 0 1 14.792 4H21"]],radio:[[6,"M4.9 19.1C1 15.2 1 8.8 4.9 4.9"],[6,"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5"],[1,12,12,2],[6,"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5"],[6,"M19.1 4.9C23 8.8 23 15.1 19.1 19"]],"radio-receiver":[[6,"M5 16v2"],[6,"M19 16v2"],[5,2,8,20,8,2],[6,"M18 12h.01"]],"radio-tower":[[6,"M4.9 16.1C1 12.2 1 5.8 4.9 1.9"],[6,"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5"],[1,12,9,2],[6,"M16.2 4.8c2 2 2.26 5.11.8 7.47"],[6,"M19.1 1.9a9.96 9.96 0 0 1 0 14.1"],[6,"M9.5 18h5"],[6,"m8 22 4-11 4 11"]],radius:[[6,"M20.34 17.52a10 10 0 1 0-2.82 2.82"],[1,19,19,2],[6,"m13.41 13.41 4.18 4.18"],[1,12,12,2]],"rail-symbol":[[6,"M5 15h14"],[6,"M5 9h14"],[6,"m14 20-5-5 6-6-5-5"]],rainbow:[[6,"M22 17a10 10 0 0 0-20 0"],[6,"M6 17a6 6 0 0 1 12 0"],[6,"M10 17a2 2 0 0 1 4 0"]],rat:[[6,"M17 5c0-1.7-1.3-3-3-3s-3 1.3-3 3c0 .8.3 1.5.8 2H11c-3.9 0-7 3.1-7 7c0 2.2 1.8 4 4 4"],[6,"M16.8 3.9c.3-.3.6-.5 1-.7 1.5-.6 3.3.1 3.9 1.6.6 1.5-.1 3.3-1.6 3.9l1.6 2.8c.2.3.2.7.2 1-.2.8-.9 1.2-1.7 1.1 0 0-1.6-.3-2.7-.6H17c-1.7 0-3 1.3-3 3"],[6,"M13.2 18a3 3 0 0 0-2.2-5"],[6,"M13 22H4a2 2 0 0 1 0-4h12"],[6,"M16 9h.01"]],ratio:[[5,6,2,12,20,2],[5,2,6,20,12,2]],receipt:[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"],[6,"M12 17.5v-11"]],"receipt-cent":[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"M12 6.5v11"],[6,"M15 9.4a4 4 0 1 0 0 5.2"]],"receipt-euro":[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"M8 12h5"],[6,"M16 9.5a4 4 0 1 0 0 5.2"]],"receipt-indian-rupee":[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"M8 7h8"],[6,"M12 17.5 8 15h1a4 4 0 0 0 0-8"],[6,"M8 11h8"]],"receipt-japanese-yen":[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"m12 10 3-3"],[6,"m9 7 3 3v7.5"],[6,"M9 11h6"],[6,"M9 15h6"]],"receipt-pound-sterling":[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"M8 13h5"],[6,"M10 17V9.5a2.5 2.5 0 0 1 5 0"],[6,"M8 17h7"]],"receipt-russian-ruble":[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"M8 15h5"],[6,"M8 11h5a2 2 0 1 0 0-4h-3v10"]],"receipt-swiss-franc":[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"M10 17V7h5"],[6,"M10 11h4"],[6,"M8 15h5"]],"receipt-text":[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"],[6,"M14 8H8"],[6,"M16 12H8"],[6,"M13 16H8"]],"rectangle-ellipsis":[[5,2,6,20,12,2],[6,"M12 12h.01"],[6,"M17 12h.01"],[6,"M7 12h.01"]],"rectangle-horizontal":[[5,2,6,20,12,2]],"rectangle-vertical":[[5,6,2,12,20,2]],recycle:[[6,"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5"],[6,"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12"],[6,"m14 16-3 3 3 3"],[6,"M8.293 13.596 7.196 9.5 3.1 10.598"],[6,"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843"],[6,"m13.378 9.633 4.096 1.098 1.097-4.096"]],redo:[[6,"M21 7v6h-6"],[6,"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"]],"redo-2":[[6,"m15 14 5-5-5-5"],[6,"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13"]],"redo-dot":[[1,12,17,1],[6,"M21 7v6h-6"],[6,"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"]],"refresh-ccw":[[6,"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"],[6,"M3 3v5h5"],[6,"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"],[6,"M16 16h5v5"]],"refresh-ccw-dot":[[6,"M3 2v6h6"],[6,"M21 12A9 9 0 0 0 6 5.3L3 8"],[6,"M21 22v-6h-6"],[6,"M3 12a9 9 0 0 0 15 6.7l3-2.7"],[1,12,12,1]],"refresh-cw":[[6,"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"],[6,"M21 3v5h-5"],[6,"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"],[6,"M8 16H3v5"]],"refresh-cw-off":[[6,"M21 8L18.74 5.74A9.75 9.75 0 0 0 12 3C11 3 10.03 3.16 9.13 3.47"],[6,"M8 16H3v5"],[6,"M3 12C3 9.51 4 7.26 5.64 5.64"],[6,"m3 16 2.26 2.26A9.75 9.75 0 0 0 12 21c2.49 0 4.74-1 6.36-2.64"],[6,"M21 12c0 1-.16 1.97-.47 2.87"],[6,"M21 3v5h-5"],[6,"M22 22 2 2"]],refrigerator:[[6,"M5 6a4 4 0 0 1 4-4h6a4 4 0 0 1 4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6Z"],[6,"M5 10h14"],[6,"M15 7v6"]],regex:[[6,"M17 3v10"],[6,"m12.67 5.5 8.66 5"],[6,"m12.67 10.5 8.66-5"],[6,"M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z"]],"remove-formatting":[[6,"M4 7V4h16v3"],[6,"M5 20h6"],[6,"M13 4 8 20"],[6,"m15 15 5 5"],[6,"m20 15-5 5"]],repeat:[[6,"m17 2 4 4-4 4"],[6,"M3 11v-1a4 4 0 0 1 4-4h14"],[6,"m7 22-4-4 4-4"],[6,"M21 13v1a4 4 0 0 1-4 4H3"]],"repeat-1":[[6,"m17 2 4 4-4 4"],[6,"M3 11v-1a4 4 0 0 1 4-4h14"],[6,"m7 22-4-4 4-4"],[6,"M21 13v1a4 4 0 0 1-4 4H3"],[6,"M11 10h1v4"]],"repeat-2":[[6,"m2 9 3-3 3 3"],[6,"M13 18H7a2 2 0 0 1-2-2V6"],[6,"m22 15-3 3-3-3"],[6,"M11 6h6a2 2 0 0 1 2 2v10"]],replace:[[6,"M14 4a2 2 0 0 1 2-2"],[6,"M16 10a2 2 0 0 1-2-2"],[6,"M20 2a2 2 0 0 1 2 2"],[6,"M22 8a2 2 0 0 1-2 2"],[6,"m3 7 3 3 3-3"],[6,"M6 10V5a3 3 0 0 1 3-3h1"],[5,2,14,8,8,2]],"replace-all":[[6,"M14 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2"],[6,"M14 4a2 2 0 0 1 2-2"],[6,"M16 10a2 2 0 0 1-2-2"],[6,"M20 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2"],[6,"M20 2a2 2 0 0 1 2 2"],[6,"M22 8a2 2 0 0 1-2 2"],[6,"m3 7 3 3 3-3"],[6,"M6 10V5a 3 3 0 0 1 3-3h1"],[5,2,14,8,8,2]],reply:[[2,"9 17 4 12 9 7"],[6,"M20 18v-2a4 4 0 0 0-4-4H4"]],"reply-all":[[2,"7 17 2 12 7 7"],[2,"12 17 7 12 12 7"],[6,"M22 18v-2a4 4 0 0 0-4-4H7"]],rewind:[[3,"11 19 2 12 11 5 11 19"],[3,"22 19 13 12 22 5 22 19"]],ribbon:[[6,"M12 11.22C11 9.997 10 9 10 8a2 2 0 0 1 4 0c0 1-.998 2.002-2.01 3.22"],[6,"m12 18 2.57-3.5"],[6,"M6.243 9.016a7 7 0 0 1 11.507-.009"],[6,"M9.35 14.53 12 11.22"],[6,"M9.35 14.53C7.728 12.246 6 10.221 6 7a6 5 0 0 1 12 0c-.005 3.22-1.778 5.235-3.43 7.5l3.557 4.527a1 1 0 0 1-.203 1.43l-1.894 1.36a1 1 0 0 1-1.384-.215L12 18l-2.679 3.593a1 1 0 0 1-1.39.213l-1.865-1.353a1 1 0 0 1-.203-1.422z"]],rocket:[[6,"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"],[6,"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"],[6,"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"],[6,"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"]],"rocking-chair":[[2,"3.5 2 6.5 12.5 18 12.5"],[0,9.5,12.5,5.5,20],[0,15,12.5,18.5,20],[6,"M2.75 18a13 13 0 0 0 18.5 0"]],"roller-coaster":[[6,"M6 19V5"],[6,"M10 19V6.8"],[6,"M14 19v-7.8"],[6,"M18 5v4"],[6,"M18 19v-6"],[6,"M22 19V9"],[6,"M2 19V9a4 4 0 0 1 4-4c2 0 4 1.33 6 4s4 4 6 4a4 4 0 1 0-3-6.65"]],"rotate-3d":[[6,"M16.466 7.5C15.643 4.237 13.952 2 12 2 9.239 2 7 6.477 7 12s2.239 10 5 10c.342 0 .677-.069 1-.2"],[6,"m15.194 13.707 3.814 1.86-1.86 3.814"],[6,"M19 15.57c-1.804.885-4.274 1.43-7 1.43-5.523 0-10-2.239-10-5s4.477-5 10-5c4.838 0 8.873 1.718 9.8 4"]],"rotate-ccw":[[6,"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"],[6,"M3 3v5h5"]],"rotate-ccw-square":[[6,"M20 9V7a2 2 0 0 0-2-2h-6"],[6,"m15 2-3 3 3 3"],[6,"M20 13v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2"]],"rotate-cw":[[6,"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"],[6,"M21 3v5h-5"]],"rotate-cw-square":[[6,"M12 5H6a2 2 0 0 0-2 2v3"],[6,"m9 8 3-3-3-3"],[6,"M4 14v4a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"]],route:[[1,6,19,3],[6,"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"],[1,18,5,3]],"route-off":[[1,6,19,3],[6,"M9 19h8.5c.4 0 .9-.1 1.3-.2"],[6,"M5.2 5.2A3.5 3.53 0 0 0 6.5 12H12"],[6,"m2 2 20 20"],[6,"M21 15.3a3.5 3.5 0 0 0-3.3-3.3"],[6,"M15 5h-4.3"],[1,18,5,3]],router:[[5,2,14,20,8,2],[6,"M6.01 18H6"],[6,"M10.01 18H10"],[6,"M15 10v4"],[6,"M17.84 7.17a4 4 0 0 0-5.66 0"],[6,"M20.66 4.34a8 8 0 0 0-11.31 0"]],rows:[[5,3,3,18,18,2],[6,"M3 12h18"]],"rows-2":[[5,3,3,18,18,2],[6,"M3 12h18"]],"rows-3":[[5,3,3,18,18,2],[6,"M21 9H3"],[6,"M21 15H3"]],"rows-4":[[5,3,3,18,18,2],[6,"M21 7.5H3"],[6,"M21 12H3"],[6,"M21 16.5H3"]],rss:[[6,"M4 11a9 9 0 0 1 9 9"],[6,"M4 4a16 16 0 0 1 16 16"],[1,5,19,1]],ruler:[[6,"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"],[6,"m14.5 12.5 2-2"],[6,"m11.5 9.5 2-2"],[6,"m8.5 6.5 2-2"],[6,"m17.5 15.5 2-2"]],"russian-ruble":[[6,"M6 11h8a4 4 0 0 0 0-8H9v18"],[6,"M6 15h8"]],sailboat:[[6,"M22 18H2a4 4 0 0 0 4 4h12a4 4 0 0 0 4-4Z"],[6,"M21 14 10 2 3 14h18Z"],[6,"M10 2v16"]],salad:[[6,"M7 21h10"],[6,"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z"],[6,"M11.38 12a2.4 2.4 0 0 1-.4-4.77 2.4 2.4 0 0 1 3.2-2.77 2.4 2.4 0 0 1 3.47-.63 2.4 2.4 0 0 1 3.37 3.37 2.4 2.4 0 0 1-1.1 3.7 2.51 2.51 0 0 1 .03 1.1"],[6,"m13 12 4-4"],[6,"M10.9 7.25A3.99 3.99 0 0 0 4 10c0 .73.2 1.41.54 2"]],sandwich:[[6,"M3 11v3a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-3"],[6,"M12 19H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-3.83"],[6,"m3 11 7.77-6.04a2 2 0 0 1 2.46 0L21 11H3Z"],[6,"M12.97 19.77 7 15h12.5l-3.75 4.5a2 2 0 0 1-2.78.27Z"]],satellite:[[6,"M13 7 9 3 5 7l4 4"],[6,"m17 11 4 4-4 4-4-4"],[6,"m8 12 4 4 6-6-4-4Z"],[6,"m16 8 3-3"],[6,"M9 21a6 6 0 0 0-6-6"]],"satellite-dish":[[6,"M4 10a7.31 7.31 0 0 0 10 10Z"],[6,"m9 15 3-3"],[6,"M17 13a6 6 0 0 0-6-6"],[6,"M21 13A10 10 0 0 0 11 3"]],save:[[6,"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"],[6,"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"],[6,"M7 3v4a1 1 0 0 0 1 1h7"]],"save-all":[[6,"M10 2v3a1 1 0 0 0 1 1h5"],[6,"M18 18v-6a1 1 0 0 0-1-1h-6a1 1 0 0 0-1 1v6"],[6,"M18 22H4a2 2 0 0 1-2-2V6"],[6,"M8 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9.172a2 2 0 0 1 1.414.586l2.828 2.828A2 2 0 0 1 22 6.828V16a2 2 0 0 1-2.01 2z"]],"save-off":[[6,"M13 13H8a1 1 0 0 0-1 1v7"],[6,"M14 8h1"],[6,"M17 21v-4"],[6,"m2 2 20 20"],[6,"M20.41 20.41A2 2 0 0 1 19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 .59-1.41"],[6,"M29.5 11.5s5 5 4 5"],[6,"M9 3h6.2a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V15"]],scale:[[6,"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"],[6,"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"],[6,"M7 21h10"],[6,"M12 3v18"],[6,"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"]],"scale-3d":[[1,19,19,2],[1,5,5,2],[6,"M5 7v12h12"],[6,"m5 19 6-6"]],scaling:[[6,"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],[6,"M14 15H9v-5"],[6,"M16 3h5v5"],[6,"M21 3 9 15"]],scan:[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"]],"scan-barcode":[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[6,"M8 7v10"],[6,"M12 7v10"],[6,"M17 7v10"]],"scan-eye":[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[1,12,12,1],[6,"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0"]],"scan-face":[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[6,"M8 14s1.5 2 4 2 4-2 4-2"],[6,"M9 9h.01"],[6,"M15 9h.01"]],"scan-line":[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[6,"M7 12h10"]],"scan-qr-code":[[6,"M17 12v4a1 1 0 0 1-1 1h-4"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M17 8V7"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M7 17h.01"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[5,7,7,5,5,1]],"scan-search":[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[1,12,12,3],[6,"m16 16-1.9-1.9"]],"scan-text":[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[6,"M7 8h8"],[6,"M7 12h10"],[6,"M7 16h6"]],"scatter-chart":[[1,7.5,7.5,.5],[1,18.5,5.5,.5],[1,11.5,11.5,.5],[1,7.5,16.5,.5],[1,17.5,14.5,.5],[6,"M3 3v16a2 2 0 0 0 2 2h16"]],school:[[6,"M14 22v-4a2 2 0 1 0-4 0v4"],[6,"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2"],[6,"M18 5v17"],[6,"m4 6 8-4 8 4"],[6,"M6 5v17"],[1,12,9,2]],"school-2":[[1,12,10,1],[6,"M22 20V8h-4l-6-4-6 4H2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2"],[6,"M6 17v.01"],[6,"M6 13v.01"],[6,"M18 17v.01"],[6,"M18 13v.01"],[6,"M14 22v-5a2 2 0 0 0-2-2a2 2 0 0 0-2 2v5"]],scissors:[[1,6,6,3],[6,"M8.12 8.12 12 12"],[6,"M20 4 8.12 15.88"],[1,6,18,3],[6,"M14.8 14.8 20 20"]],"scissors-line-dashed":[[6,"M5.42 9.42 8 12"],[1,4,8,2],[6,"m14 6-8.58 8.58"],[1,4,16,2],[6,"M10.8 14.8 14 18"],[6,"M16 12h-2"],[6,"M22 12h-2"]],"scissors-square":[[5,2,2,20,20,2],[1,8,8,2],[6,"M9.414 9.414 12 12"],[6,"M14.8 14.8 18 18"],[1,8,16,2],[6,"m18 6-8.586 8.586"]],"scissors-square-dashed-bottom":[[6,"M4 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2"],[6,"M10 22H8"],[6,"M16 22h-2"],[1,8,8,2],[6,"M9.414 9.414 12 12"],[6,"M14.8 14.8 18 18"],[1,8,16,2],[6,"m18 6-8.586 8.586"]],"screen-share":[[6,"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3"],[6,"M8 21h8"],[6,"M12 17v4"],[6,"m17 8 5-5"],[6,"M17 3h5v5"]],"screen-share-off":[[6,"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3"],[6,"M8 21h8"],[6,"M12 17v4"],[6,"m22 3-5 5"],[6,"m17 3 5 5"]],scroll:[[6,"M19 17V5a2 2 0 0 0-2-2H4"],[6,"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"]],"scroll-text":[[6,"M15 12h-5"],[6,"M15 8h-5"],[6,"M19 17V5a2 2 0 0 0-2-2H4"],[6,"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"]],search:[[1,11,11,8],[6,"m21 21-4.3-4.3"]],"search-check":[[6,"m8 11 2 2 4-4"],[1,11,11,8],[6,"m21 21-4.3-4.3"]],"search-code":[[6,"m13 13.5 2-2.5-2-2.5"],[6,"m21 21-4.3-4.3"],[6,"M9 8.5 7 11l2 2.5"],[1,11,11,8]],"search-slash":[[6,"m13.5 8.5-5 5"],[1,11,11,8],[6,"m21 21-4.3-4.3"]],"search-x":[[6,"m13.5 8.5-5 5"],[6,"m8.5 8.5 5 5"],[1,11,11,8],[6,"m21 21-4.3-4.3"]],section:[[6,"M16 5a4 3 0 0 0-8 0c0 4 8 3 8 7a4 3 0 0 1-8 0"],[6,"M8 19a4 3 0 0 0 8 0c0-4-8-3-8-7a4 3 0 0 1 8 0"]],send:[[6,"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"],[6,"m21.854 2.147-10.94 10.939"]],"send-horizonal":[[6,"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z"],[6,"M6 12h16"]],"send-horizontal":[[6,"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z"],[6,"M6 12h16"]],"send-to-back":[[5,14,14,8,8,2],[5,2,2,8,8,2],[6,"M7 14v1a2 2 0 0 0 2 2h1"],[6,"M14 7h1a2 2 0 0 1 2 2v1"]],"separator-horizontal":[[0,3,12,21,12],[2,"8 8 12 4 16 8"],[2,"16 16 12 20 8 16"]],"separator-vertical":[[0,12,3,12,21],[2,"8 8 4 12 8 16"],[2,"16 16 20 12 16 8"]],server:[[5,2,2,20,8,2,2],[5,2,14,20,8,2,2],[0,6,6,6.01,6],[0,6,18,6.01,18]],"server-cog":[[1,12,12,3],[6,"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5"],[6,"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5"],[6,"M6 6h.01"],[6,"M6 18h.01"],[6,"m15.7 13.4-.9-.3"],[6,"m9.2 10.9-.9-.3"],[6,"m10.6 15.7.3-.9"],[6,"m13.6 15.7-.4-1"],[6,"m10.8 9.3-.4-1"],[6,"m8.3 13.6 1-.4"],[6,"m14.7 10.8 1-.4"],[6,"m13.4 8.3-.3.9"]],"server-crash":[[6,"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2"],[6,"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2"],[6,"M6 6h.01"],[6,"M6 18h.01"],[6,"m13 6-4 6h6l-4 6"]],"server-off":[[6,"M7 2h13a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-5"],[6,"M10 10 2.5 2.5C2 2 2 2.5 2 5v3a2 2 0 0 0 2 2h6z"],[6,"M22 17v-1a2 2 0 0 0-2-2h-1"],[6,"M4 14a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16.5l1-.5.5.5-8-8H4z"],[6,"M6 18h.01"],[6,"m2 2 20 20"]],settings:[[6,"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],[1,12,12,3]],"settings-2":[[6,"M20 7h-9"],[6,"M14 17H5"],[1,17,17,3],[1,7,7,3]],shapes:[[6,"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z"],[5,3,14,7,7,1],[1,17.5,17.5,3.5]],share:[[6,"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"],[2,"16 6 12 2 8 6"],[0,12,2,12,15]],"share-2":[[1,18,5,3],[1,6,12,3],[1,18,19,3],[0,8.59,13.51,15.42,17.49],[0,15.41,6.51,8.59,10.49]],sheet:[[5,3,3,18,18,2,2],[0,3,9,21,9],[0,3,15,21,15],[0,9,9,9,21],[0,15,9,15,21]],shell:[[6,"M14 11a2 2 0 1 1-4 0 4 4 0 0 1 8 0 6 6 0 0 1-12 0 8 8 0 0 1 16 0 10 10 0 1 1-20 0 11.93 11.93 0 0 1 2.42-7.22 2 2 0 1 1 3.16 2.44"]],shield:[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"]],"shield-alert":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"M12 8v4"],[6,"M12 16h.01"]],"shield-ban":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"m4.243 5.21 14.39 12.472"]],"shield-check":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"m9 12 2 2 4-4"]],"shield-close":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"m14.5 9.5-5 5"],[6,"m9.5 9.5 5 5"]],"shield-ellipsis":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"M8 12h.01"],[6,"M12 12h.01"],[6,"M16 12h.01"]],"shield-half":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"M12 22V2"]],"shield-minus":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"M9 12h6"]],"shield-off":[[6,"m2 2 20 20"],[6,"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71"],[6,"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264"]],"shield-plus":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"M9 12h6"],[6,"M12 9v6"]],"shield-question":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3"],[6,"M12 17h.01"]],"shield-x":[[6,"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"],[6,"m14.5 9.5-5 5"],[6,"m9.5 9.5 5 5"]],ship:[[6,"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"],[6,"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76"],[6,"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6"],[6,"M12 10v4"],[6,"M12 2v3"]],"ship-wheel":[[1,12,12,8],[6,"M12 2v7.5"],[6,"m19 5-5.23 5.23"],[6,"M22 12h-7.5"],[6,"m19 19-5.23-5.23"],[6,"M12 14.5V22"],[6,"M10.23 13.77 5 19"],[6,"M9.5 12H2"],[6,"M10.23 10.23 5 5"],[1,12,12,2.5]],shirt:[[6,"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"]],"shopping-bag":[[6,"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"],[6,"M3 6h18"],[6,"M16 10a4 4 0 0 1-8 0"]],"shopping-basket":[[6,"m15 11-1 9"],[6,"m19 11-4-7"],[6,"M2 11h20"],[6,"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4"],[6,"M4.5 15.5h15"],[6,"m5 11 4-7"],[6,"m9 11 1 9"]],"shopping-cart":[[1,8,21,1],[1,19,21,1],[6,"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"]],shovel:[[6,"M2 22v-5l5-5 5 5-5 5z"],[6,"M9.5 14.5 16 8"],[6,"m17 2 5 5-.5.5a3.53 3.53 0 0 1-5 0s0 0 0 0a3.53 3.53 0 0 1 0-5L17 2"]],"shower-head":[[6,"m4 4 2.5 2.5"],[6,"M13.5 6.5a4.95 4.95 0 0 0-7 7"],[6,"M15 5 5 15"],[6,"M14 17v.01"],[6,"M10 16v.01"],[6,"M13 13v.01"],[6,"M16 10v.01"],[6,"M11 20v.01"],[6,"M17 14v.01"],[6,"M20 11v.01"]],shrink:[[6,"m15 15 6 6m-6-6v4.8m0-4.8h4.8"],[6,"M9 19.8V15m0 0H4.2M9 15l-6 6"],[6,"M15 4.2V9m0 0h4.8M15 9l6-6"],[6,"M9 4.2V9m0 0H4.2M9 9 3 3"]],shrub:[[6,"M12 22v-7l-2-2"],[6,"M17 8v.8A6 6 0 0 1 13.8 20H10A6.5 6.5 0 0 1 7 8a5 5 0 0 1 10 0Z"],[6,"m14 14-2 2"]],shuffle:[[6,"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22"],[6,"m18 2 4 4-4 4"],[6,"M2 6h1.9c1.5 0 2.9.9 3.6 2.2"],[6,"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8"],[6,"m18 14 4 4-4 4"]],sidebar:[[5,3,3,18,18,2],[6,"M9 3v18"]],"sidebar-close":[[5,3,3,18,18,2],[6,"M9 3v18"],[6,"m16 15-3-3 3-3"]],"sidebar-open":[[5,3,3,18,18,2],[6,"M9 3v18"],[6,"m14 9 3 3-3 3"]],sigma:[[6,"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2"]],"sigma-square":[[5,3,3,18,18,2],[6,"M16 8.9V7H8l4 5-4 5h8v-1.9"]],signal:[[6,"M2 20h.01"],[6,"M7 20v-4"],[6,"M12 20v-8"],[6,"M17 20V8"],[6,"M22 4v16"]],"signal-high":[[6,"M2 20h.01"],[6,"M7 20v-4"],[6,"M12 20v-8"],[6,"M17 20V8"]],"signal-low":[[6,"M2 20h.01"],[6,"M7 20v-4"]],"signal-medium":[[6,"M2 20h.01"],[6,"M7 20v-4"],[6,"M12 20v-8"]],"signal-zero":[[6,"M2 20h.01"]],signature:[[6,"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284"],[6,"M3 21h18"]],signpost:[[6,"M12 13v8"],[6,"M12 3v3"],[6,"M18 6a2 2 0 0 1 1.387.56l2.307 2.22a1 1 0 0 1 0 1.44l-2.307 2.22A2 2 0 0 1 18 13H6a2 2 0 0 1-1.387-.56l-2.306-2.22a1 1 0 0 1 0-1.44l2.306-2.22A2 2 0 0 1 6 6z"]],"signpost-big":[[6,"M10 9H4L2 7l2-2h6"],[6,"M14 5h6l2 2-2 2h-6"],[6,"M10 22V4a2 2 0 1 1 4 0v18"],[6,"M8 22h8"]],siren:[[6,"M7 18v-6a5 5 0 1 1 10 0v6"],[6,"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z"],[6,"M21 12h1"],[6,"M18.5 4.5 18 5"],[6,"M2 12h1"],[6,"M12 2v1"],[6,"m4.929 4.929.707.707"],[6,"M12 12v6"]],"skip-back":[[3,"19 20 9 12 19 4 19 20"],[0,5,19,5,5]],"skip-forward":[[3,"5 4 15 12 5 20 5 4"],[0,19,5,19,19]],skull:[[6,"m12.5 17-.5-1-.5 1h1z"],[6,"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z"],[1,15,12,1],[1,9,12,1]],slack:[[5,13,2,3,8,1.5],[6,"M19 8.5V10h1.5A1.5 1.5 0 1 0 19 8.5"],[5,8,14,3,8,1.5],[6,"M5 15.5V14H3.5A1.5 1.5 0 1 0 5 15.5"],[5,14,13,8,3,1.5],[6,"M15.5 19H14v1.5a1.5 1.5 0 1 0 1.5-1.5"],[5,2,8,8,3,1.5],[6,"M8.5 5H10V3.5A1.5 1.5 0 1 0 8.5 5"]],slash:[[6,"M22 2 2 22"]],"slash-square":[[5,3,3,18,18,2],[0,9,15,15,9]],slice:[[6,"m8 14-6 6h9v-3"],[6,"M18.37 3.63 8 14l3 3L21.37 6.63a2.12 2.12 0 1 0-3-3Z"]],sliders:[[0,4,21,4,14],[0,4,10,4,3],[0,12,21,12,12],[0,12,8,12,3],[0,20,21,20,16],[0,20,12,20,3],[0,2,14,6,14],[0,10,8,14,8],[0,18,16,22,16]],"sliders-horizontal":[[0,21,4,14,4],[0,10,4,3,4],[0,21,12,12,12],[0,8,12,3,12],[0,21,20,16,20],[0,12,20,3,20],[0,14,2,14,6],[0,8,10,8,14],[0,16,18,16,22]],"sliders-vertical":[[0,4,21,4,14],[0,4,10,4,3],[0,12,21,12,12],[0,12,8,12,3],[0,20,21,20,16],[0,20,12,20,3],[0,2,14,6,14],[0,10,8,14,8],[0,18,16,22,16]],smartphone:[[5,5,2,14,20,2,2],[6,"M12 18h.01"]],"smartphone-charging":[[5,5,2,14,20,2,2],[6,"M12.667 8 10 12h4l-2.667 4"]],"smartphone-nfc":[[5,2,6,7,12,1],[6,"M13 8.32a7.43 7.43 0 0 1 0 7.36"],[6,"M16.46 6.21a11.76 11.76 0 0 1 0 11.58"],[6,"M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"]],smile:[[1,12,12,10],[6,"M8 14s1.5 2 4 2 4-2 4-2"],[0,9,9,9.01,9],[0,15,9,15.01,9]],"smile-plus":[[6,"M22 11v1a10 10 0 1 1-9-10"],[6,"M8 14s1.5 2 4 2 4-2 4-2"],[0,9,9,9.01,9],[0,15,9,15.01,9],[6,"M16 5h6"],[6,"M19 2v6"]],snail:[[6,"M2 13a6 6 0 1 0 12 0 4 4 0 1 0-8 0 2 2 0 0 0 4 0"],[1,10,13,8],[6,"M2 21h12c4.4 0 8-3.6 8-8V7a2 2 0 1 0-4 0v6"],[6,"M18 3 19.1 5.2"],[6,"M22 3 20.9 5.2"]],snowflake:[[0,2,12,22,12],[0,12,2,12,22],[6,"m20 16-4-4 4-4"],[6,"m4 8 4 4-4 4"],[6,"m16 4-4 4-4-4"],[6,"m8 20 4-4 4 4"]],sofa:[[6,"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3"],[6,"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z"],[6,"M4 18v2"],[6,"M20 18v2"],[6,"M12 4v9"]],"sort-asc":[[6,"m3 8 4-4 4 4"],[6,"M7 4v16"],[6,"M11 12h4"],[6,"M11 16h7"],[6,"M11 20h10"]],"sort-desc":[[6,"m3 16 4 4 4-4"],[6,"M7 20V4"],[6,"M11 4h10"],[6,"M11 8h7"],[6,"M11 12h4"]],soup:[[6,"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z"],[6,"M7 21h10"],[6,"M19.5 12 22 6"],[6,"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62"],[6,"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62"],[6,"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62"]],space:[[6,"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1"]],spade:[[6,"M5 9c-1.5 1.5-3 3.2-3 5.5A5.5 5.5 0 0 0 7.5 20c1.8 0 3-.5 4.5-2 1.5 1.5 2.7 2 4.5 2a5.5 5.5 0 0 0 5.5-5.5c0-2.3-1.5-4-3-5.5l-7-7-7 7Z"],[6,"M12 18v4"]],sparkle:[[6,"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"]],sparkles:[[6,"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"],[6,"M20 3v4"],[6,"M22 5h-4"],[6,"M4 17v2"],[6,"M5 18H3"]],speaker:[[5,4,2,16,20,2],[6,"M12 6h.01"],[1,12,14,4],[6,"M12 14h.01"]],speech:[[6,"M8.8 20v-4.1l1.9.2a2.3 2.3 0 0 0 2.164-2.1V8.3A5.37 5.37 0 0 0 2 8.25c0 2.8.656 3.054 1 4.55a5.77 5.77 0 0 1 .029 2.758L2 20"],[6,"M19.8 17.8a7.5 7.5 0 0 0 .003-10.603"],[6,"M17 15a3.5 3.5 0 0 0-.025-4.975"]],"spell-check":[[6,"m6 16 6-12 6 12"],[6,"M8 12h8"],[6,"m16 20 2 2 4-4"]],"spell-check-2":[[6,"m6 16 6-12 6 12"],[6,"M8 12h8"],[6,"M4 21c1.1 0 1.1-1 2.3-1s1.1 1 2.3 1c1.1 0 1.1-1 2.3-1 1.1 0 1.1 1 2.3 1 1.1 0 1.1-1 2.3-1 1.1 0 1.1 1 2.3 1 1.1 0 1.1-1 2.3-1"]],spline:[[1,19,5,2],[1,5,19,2],[6,"M5 17A12 12 0 0 1 17 5"]],split:[[6,"M16 3h5v5"],[6,"M8 3H3v5"],[6,"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3"],[6,"m15 9 6-6"]],"split-square-horizontal":[[6,"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3"],[6,"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3"],[0,12,4,12,20]],"split-square-vertical":[[6,"M5 8V5c0-1 1-2 2-2h10c1 0 2 1 2 2v3"],[6,"M19 16v3c0 1-1 2-2 2H7c-1 0-2-1-2-2v-3"],[0,4,12,20,12]],"spray-can":[[6,"M3 3h.01"],[6,"M7 5h.01"],[6,"M11 7h.01"],[6,"M3 7h.01"],[6,"M7 9h.01"],[6,"M3 11h.01"],[5,15,5,4,4],[6,"m19 9 2 2v10c0 .6-.4 1-1 1h-6c-.6 0-1-.4-1-1V11l2-2"],[6,"m13 14 8-2"],[6,"m13 19 8-2"]],sprout:[[6,"M7 20h10"],[6,"M10 20c5.5-2.5.8-6.4 3-10"],[6,"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"],[6,"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z"]],square:[[5,3,3,18,18,2]],"square-activity":[[5,3,3,18,18,2],[6,"M17 12h-2l-2 5-2-10-2 5H7"]],"square-arrow-down":[[5,3,3,18,18,2],[6,"M12 8v8"],[6,"m8 12 4 4 4-4"]],"square-arrow-down-left":[[5,3,3,18,18,2],[6,"m16 8-8 8"],[6,"M16 16H8V8"]],"square-arrow-down-right":[[5,3,3,18,18,2],[6,"m8 8 8 8"],[6,"M16 8v8H8"]],"square-arrow-left":[[5,3,3,18,18,2],[6,"m12 8-4 4 4 4"],[6,"M16 12H8"]],"square-arrow-out-down-left":[[6,"M13 21h6a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6"],[6,"m3 21 9-9"],[6,"M9 21H3v-6"]],"square-arrow-out-down-right":[[6,"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6"],[6,"m21 21-9-9"],[6,"M21 15v6h-6"]],"square-arrow-out-up-left":[[6,"M13 3h6a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-6"],[6,"m3 3 9 9"],[6,"M3 9V3h6"]],"square-arrow-out-up-right":[[6,"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"],[6,"m21 3-9 9"],[6,"M15 3h6v6"]],"square-arrow-right":[[5,3,3,18,18,2],[6,"M8 12h8"],[6,"m12 16 4-4-4-4"]],"square-arrow-up":[[5,3,3,18,18,2],[6,"m16 12-4-4-4 4"],[6,"M12 16V8"]],"square-arrow-up-left":[[5,3,3,18,18,2],[6,"M8 16V8h8"],[6,"M16 16 8 8"]],"square-arrow-up-right":[[5,3,3,18,18,2],[6,"M8 8h8v8"],[6,"m8 16 8-8"]],"square-asterisk":[[5,3,3,18,18,2],[6,"M12 8v8"],[6,"m8.5 14 7-4"],[6,"m8.5 10 7 4"]],"square-bottom-dashed-scissors":[[6,"M4 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2"],[6,"M10 22H8"],[6,"M16 22h-2"],[1,8,8,2],[6,"M9.414 9.414 12 12"],[6,"M14.8 14.8 18 18"],[1,8,16,2],[6,"m18 6-8.586 8.586"]],"square-chart-gantt":[[5,3,3,18,18,2],[6,"M9 8h7"],[6,"M8 12h6"],[6,"M11 16h5"]],"square-check":[[5,3,3,18,18,2],[6,"m9 12 2 2 4-4"]],"square-check-big":[[6,"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5"],[6,"m9 11 3 3L22 4"]],"square-chevron-down":[[5,3,3,18,18,2],[6,"m16 10-4 4-4-4"]],"square-chevron-left":[[5,3,3,18,18,2],[6,"m14 16-4-4 4-4"]],"square-chevron-right":[[5,3,3,18,18,2],[6,"m10 8 4 4-4 4"]],"square-chevron-up":[[5,3,3,18,18,2],[6,"m8 14 4-4 4 4"]],"square-code":[[6,"M10 9.5 8 12l2 2.5"],[6,"m14 9.5 2 2.5-2 2.5"],[5,3,3,18,18,2]],"square-dashed-bottom":[[6,"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2"],[6,"M9 21h1"],[6,"M14 21h1"]],"square-dashed-bottom-code":[[6,"M10 9.5 8 12l2 2.5"],[6,"M14 21h1"],[6,"m14 9.5 2 2.5-2 2.5"],[6,"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2"],[6,"M9 21h1"]],"square-dashed-kanban":[[6,"M8 7v7"],[6,"M12 7v4"],[6,"M16 7v9"],[6,"M5 3a2 2 0 0 0-2 2"],[6,"M9 3h1"],[6,"M14 3h1"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M21 9v1"],[6,"M21 14v1"],[6,"M21 19a2 2 0 0 1-2 2"],[6,"M14 21h1"],[6,"M9 21h1"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M3 14v1"],[6,"M3 9v1"]],"square-dashed-mouse-pointer":[[6,"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"],[6,"M5 3a2 2 0 0 0-2 2"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M9 3h1"],[6,"M9 21h2"],[6,"M14 3h1"],[6,"M3 9v1"],[6,"M21 9v2"],[6,"M3 14v1"]],"square-divide":[[5,3,3,18,18,2,2],[0,8,12,16,12],[0,12,16,12,16],[0,12,8,12,8]],"square-dot":[[5,3,3,18,18,2],[1,12,12,1]],"square-equal":[[5,3,3,18,18,2],[6,"M7 10h10"],[6,"M7 14h10"]],"square-function":[[5,3,3,18,18,2,2],[6,"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3"],[6,"M9 11.2h5.7"]],"square-gantt-chart":[[5,3,3,18,18,2],[6,"M9 8h7"],[6,"M8 12h6"],[6,"M11 16h5"]],"square-kanban":[[5,3,3,18,18,2],[6,"M8 7v7"],[6,"M12 7v4"],[6,"M16 7v9"]],"square-library":[[5,3,3,18,18,2],[6,"M7 7v10"],[6,"M11 7v10"],[6,"m15 7 2 10"]],"square-m":[[5,3,3,18,18,2],[6,"M8 16V8l4 4 4-4v8"]],"square-menu":[[5,3,3,18,18,2],[6,"M7 8h10"],[6,"M7 12h10"],[6,"M7 16h10"]],"square-minus":[[5,3,3,18,18,2],[6,"M8 12h8"]],"square-mouse-pointer":[[6,"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"],[6,"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6"]],"square-parking":[[5,3,3,18,18,2],[6,"M9 17V7h4a3 3 0 0 1 0 6H9"]],"square-parking-off":[[6,"M3.6 3.6A2 2 0 0 1 5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-.59 1.41"],[6,"M3 8.7V19a2 2 0 0 0 2 2h10.3"],[6,"m2 2 20 20"],[6,"M13 13a3 3 0 1 0 0-6H9v2"],[6,"M9 17v-2.3"]],"square-pen":[[6,"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],[6,"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"]],"square-percent":[[5,3,3,18,18,2],[6,"m15 9-6 6"],[6,"M9 9h.01"],[6,"M15 15h.01"]],"square-pi":[[5,3,3,18,18,2],[6,"M7 7h10"],[6,"M10 7v10"],[6,"M16 17a2 2 0 0 1-2-2V7"]],"square-pilcrow":[[5,3,3,18,18,2],[6,"M12 12H9.5a2.5 2.5 0 0 1 0-5H17"],[6,"M12 7v10"],[6,"M16 7v10"]],"square-play":[[5,3,3,18,18,2],[6,"m9 8 6 4-6 4Z"]],"square-plus":[[5,3,3,18,18,2],[6,"M8 12h8"],[6,"M12 8v8"]],"square-power":[[6,"M12 7v4"],[6,"M7.998 9.003a5 5 0 1 0 8-.005"],[5,3,3,18,18,2]],"square-radical":[[6,"M7 12h2l2 5 2-10h4"],[5,3,3,18,18,2]],"square-scissors":[[5,2,2,20,20,2],[1,8,8,2],[6,"M9.414 9.414 12 12"],[6,"M14.8 14.8 18 18"],[1,8,16,2],[6,"m18 6-8.586 8.586"]],"square-sigma":[[5,3,3,18,18,2],[6,"M16 8.9V7H8l4 5-4 5h8v-1.9"]],"square-slash":[[5,3,3,18,18,2],[0,9,15,15,9]],"square-split-horizontal":[[6,"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3"],[6,"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3"],[0,12,4,12,20]],"square-split-vertical":[[6,"M5 8V5c0-1 1-2 2-2h10c1 0 2 1 2 2v3"],[6,"M19 16v3c0 1-1 2-2 2H7c-1 0-2-1-2-2v-3"],[0,4,12,20,12]],"square-square":[[5,3,3,18,18,2],[5,8,8,8,8,1]],"square-stack":[[6,"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2"],[6,"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2"],[5,14,14,8,8,2]],"square-terminal":[[6,"m7 11 2-2-2-2"],[6,"M11 13h4"],[5,3,3,18,18,2,2]],"square-user":[[5,3,3,18,18,2],[1,12,10,3],[6,"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"]],"square-user-round":[[6,"M18 21a6 6 0 0 0-12 0"],[1,12,11,4],[5,3,3,18,18,2]],"square-x":[[5,3,3,18,18,2,2],[6,"m15 9-6 6"],[6,"m9 9 6 6"]],squircle:[[6,"M12 3c7.2 0 9 1.8 9 9s-1.8 9-9 9-9-1.8-9-9 1.8-9 9-9"]],squirrel:[[6,"M15.236 22a3 3 0 0 0-2.2-5"],[6,"M16 20a3 3 0 0 1 3-3h1a2 2 0 0 0 2-2v-2a4 4 0 0 0-4-4V4"],[6,"M18 13h.01"],[6,"M18 6a4 4 0 0 0-4 4 7 7 0 0 0-7 7c0-5 4-5 4-10.5a4.5 4.5 0 1 0-9 0 2.5 2.5 0 0 0 5 0C7 10 3 11 3 17c0 2.8 2.2 5 5 5h10"]],stamp:[[6,"M5 22h14"],[6,"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z"],[6,"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13"]],star:[[3,"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"]],"star-half":[[6,"M12 17.8 5.8 21 7 14.1 2 9.3l7-1L12 2"]],"star-off":[[6,"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43"],[6,"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91"],[0,2,2,22,22]],stars:[[6,"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"],[6,"M20 3v4"],[6,"M22 5h-4"],[6,"M4 17v2"],[6,"M5 18H3"]],"step-back":[[0,18,20,18,4],[3,"14,20 4,12 14,4"]],"step-forward":[[0,6,4,6,20],[3,"10,4 20,12 10,20"]],stethoscope:[[6,"M11 2v2"],[6,"M5 2v2"],[6,"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1"],[6,"M8 15a6 6 0 0 0 12 0v-3"],[1,20,10,2]],sticker:[[6,"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z"],[6,"M14 3v4a2 2 0 0 0 2 2h4"],[6,"M8 13h.01"],[6,"M16 13h.01"],[6,"M10 16s.8 1 2 1c1.3 0 2-1 2-1"]],"sticky-note":[[6,"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z"],[6,"M15 3v4a2 2 0 0 0 2 2h4"]],"stop-circle":[[1,12,12,10],[5,9,9,6,6,1]],store:[[6,"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"],[6,"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"],[6,"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"],[6,"M2 7h20"],[6,"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7"]],"stretch-horizontal":[[5,2,4,20,6,2],[5,2,14,20,6,2]],"stretch-vertical":[[5,4,2,6,20,2],[5,14,2,6,20,2]],strikethrough:[[6,"M16 4H9a3 3 0 0 0-2.83 4"],[6,"M14 12a4 4 0 0 1 0 8H6"],[0,4,12,20,12]],subscript:[[6,"m4 5 8 8"],[6,"m12 5-8 8"],[6,"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07"]],subtitles:[[5,3,5,18,14,2,2],[6,"M7 15h4M15 15h2M7 11h2M13 11h4"]],sun:[[1,12,12,4],[6,"M12 2v2"],[6,"M12 20v2"],[6,"m4.93 4.93 1.41 1.41"],[6,"m17.66 17.66 1.41 1.41"],[6,"M2 12h2"],[6,"M20 12h2"],[6,"m6.34 17.66-1.41 1.41"],[6,"m19.07 4.93-1.41 1.41"]],"sun-dim":[[1,12,12,4],[6,"M12 4h.01"],[6,"M20 12h.01"],[6,"M12 20h.01"],[6,"M4 12h.01"],[6,"M17.657 6.343h.01"],[6,"M17.657 17.657h.01"],[6,"M6.343 17.657h.01"],[6,"M6.343 6.343h.01"]],"sun-medium":[[1,12,12,4],[6,"M12 3v1"],[6,"M12 20v1"],[6,"M3 12h1"],[6,"M20 12h1"],[6,"m18.364 5.636-.707.707"],[6,"m6.343 17.657-.707.707"],[6,"m5.636 5.636.707.707"],[6,"m17.657 17.657.707.707"]],"sun-moon":[[6,"M12 8a2.83 2.83 0 0 0 4 4 4 4 0 1 1-4-4"],[6,"M12 2v2"],[6,"M12 20v2"],[6,"m4.9 4.9 1.4 1.4"],[6,"m17.7 17.7 1.4 1.4"],[6,"M2 12h2"],[6,"M20 12h2"],[6,"m6.3 17.7-1.4 1.4"],[6,"m19.1 4.9-1.4 1.4"]],"sun-snow":[[6,"M10 9a3 3 0 1 0 0 6"],[6,"M2 12h1"],[6,"M14 21V3"],[6,"M10 4V3"],[6,"M10 21v-1"],[6,"m3.64 18.36.7-.7"],[6,"m4.34 6.34-.7-.7"],[6,"M14 12h8"],[6,"m17 4-3 3"],[6,"m14 17 3 3"],[6,"m21 15-3-3 3-3"]],sunrise:[[6,"M12 2v8"],[6,"m4.93 10.93 1.41 1.41"],[6,"M2 18h2"],[6,"M20 18h2"],[6,"m19.07 10.93-1.41 1.41"],[6,"M22 22H2"],[6,"m8 6 4-4 4 4"],[6,"M16 18a4 4 0 0 0-8 0"]],sunset:[[6,"M12 10V2"],[6,"m4.93 10.93 1.41 1.41"],[6,"M2 18h2"],[6,"M20 18h2"],[6,"m19.07 10.93-1.41 1.41"],[6,"M22 22H2"],[6,"m16 6-4 4-4-4"],[6,"M16 18a4 4 0 0 0-8 0"]],superscript:[[6,"m4 19 8-8"],[6,"m12 19-8-8"],[6,"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06"]],"swatch-book":[[6,"M11 17a4 4 0 0 1-8 0V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2Z"],[6,"M16.7 13H19a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H7"],[6,"M 7 17h.01"],[6,"m11 8 2.3-2.3a2.4 2.4 0 0 1 3.404.004L18.6 7.6a2.4 2.4 0 0 1 .026 3.434L9.9 19.8"]],"swiss-franc":[[6,"M10 21V3h8"],[6,"M6 16h9"],[6,"M10 9.5h7"]],"switch-camera":[[6,"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5"],[6,"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"],[1,12,12,3],[6,"m18 22-3-3 3-3"],[6,"m6 2 3 3-3 3"]],sword:[[2,"14.5 17.5 3 6 3 3 6 3 17.5 14.5"],[0,13,19,19,13],[0,16,16,20,20],[0,19,21,21,19]],swords:[[2,"14.5 17.5 3 6 3 3 6 3 17.5 14.5"],[0,13,19,19,13],[0,16,16,20,20],[0,19,21,21,19],[2,"14.5 6.5 18 3 21 3 21 6 17.5 9.5"],[0,5,14,9,18],[0,7,17,4,20],[0,3,19,5,21]],syringe:[[6,"m18 2 4 4"],[6,"m17 7 3-3"],[6,"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5"],[6,"m9 11 4 4"],[6,"m5 19-3 3"],[6,"m14 4 6 6"]],table:[[6,"M12 3v18"],[5,3,3,18,18,2],[6,"M3 9h18"],[6,"M3 15h18"]],"table-2":[[6,"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"]],"table-cells-merge":[[6,"M12 21v-6"],[6,"M12 9V3"],[6,"M3 15h18"],[6,"M3 9h18"],[5,3,3,18,18,2]],"table-cells-split":[[6,"M12 15V9"],[6,"M3 15h18"],[6,"M3 9h18"],[5,3,3,18,18,2]],"table-columns-split":[[6,"M14 14v2"],[6,"M14 20v2"],[6,"M14 2v2"],[6,"M14 8v2"],[6,"M2 15h8"],[6,"M2 3h6a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2"],[6,"M2 9h8"],[6,"M22 15h-4"],[6,"M22 3h-2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h2"],[6,"M22 9h-4"],[6,"M5 3v18"]],"table-of-contents":[[6,"M16 12H3"],[6,"M16 18H3"],[6,"M16 6H3"],[6,"M21 12h.01"],[6,"M21 18h.01"],[6,"M21 6h.01"]],"table-properties":[[6,"M15 3v18"],[5,3,3,18,18,2],[6,"M21 9H3"],[6,"M21 15H3"]],"table-rows-split":[[6,"M14 10h2"],[6,"M15 22v-8"],[6,"M15 2v4"],[6,"M2 10h2"],[6,"M20 10h2"],[6,"M3 19h18"],[6,"M3 22v-6a2 2 135 0 1 2-2h14a2 2 45 0 1 2 2v6"],[6,"M3 2v2a2 2 45 0 0 2 2h14a2 2 135 0 0 2-2V2"],[6,"M8 10h2"],[6,"M9 22v-8"],[6,"M9 2v4"]],tablet:[[5,4,2,16,20,2,2],[0,12,18,12.01,18]],"tablet-smartphone":[[5,3,8,10,14,2],[6,"M5 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-2.4"],[6,"M8 18h.01"]],tablets:[[1,7,7,5],[1,17,17,5],[6,"M12 17h10"],[6,"m3.46 10.54 7.08-7.08"]],tag:[[6,"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"],[1,7.5,7.5,.5]],tags:[[6,"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],[6,"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z"],[1,6.5,9.5,.5]],"tally-1":[[6,"M4 4v16"]],"tally-2":[[6,"M4 4v16"],[6,"M9 4v16"]],"tally-3":[[6,"M4 4v16"],[6,"M9 4v16"],[6,"M14 4v16"]],"tally-4":[[6,"M4 4v16"],[6,"M9 4v16"],[6,"M14 4v16"],[6,"M19 4v16"]],"tally-5":[[6,"M4 4v16"],[6,"M9 4v16"],[6,"M14 4v16"],[6,"M19 4v16"],[6,"M22 6 2 18"]],tangent:[[1,17,4,2],[6,"M15.59 5.41 5.41 15.59"],[1,4,17,2],[6,"M12 22s-4-9-1.5-11.5S22 12 22 12"]],target:[[1,12,12,10],[1,12,12,6],[1,12,12,2]],telescope:[[6,"m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44"],[6,"m13.56 11.747 4.332-.924"],[6,"m16 21-3.105-6.21"],[6,"M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z"],[6,"m6.158 8.633 1.114 4.456"],[6,"m8 21 3.105-6.21"],[1,12,13,2]],tent:[[6,"M3.5 21 14 3"],[6,"M20.5 21 10 3"],[6,"M15.5 21 12 15l-3.5 6"],[6,"M2 21h20"]],"tent-tree":[[1,4,4,2],[6,"m14 5 3-3 3 3"],[6,"m14 10 3-3 3 3"],[6,"M17 14V2"],[6,"M17 14H7l-5 8h20Z"],[6,"M8 14v8"],[6,"m9 14 5 8"]],terminal:[[2,"4 17 10 11 4 5"],[0,12,19,20,19]],"terminal-square":[[6,"m7 11 2-2-2-2"],[6,"M11 13h4"],[5,3,3,18,18,2,2]],"test-tube":[[6,"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2"],[6,"M8.5 2h7"],[6,"M14.5 16h-5"]],"test-tube-2":[[6,"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3"],[6,"m16 2 6 6"],[6,"M12 16H4"]],"test-tube-diagonal":[[6,"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3"],[6,"m16 2 6 6"],[6,"M12 16H4"]],"test-tubes":[[6,"M9 2v17.5A2.5 2.5 0 0 1 6.5 22A2.5 2.5 0 0 1 4 19.5V2"],[6,"M20 2v17.5a2.5 2.5 0 0 1-2.5 2.5a2.5 2.5 0 0 1-2.5-2.5V2"],[6,"M3 2h7"],[6,"M14 2h7"],[6,"M9 16H4"],[6,"M20 16h-5"]],text:[[6,"M17 6.1H3"],[6,"M21 12.1H3"],[6,"M15.1 18H3"]],"text-cursor":[[6,"M17 22h-1a4 4 0 0 1-4-4V6a4 4 0 0 1 4-4h1"],[6,"M7 22h1a4 4 0 0 0 4-4v-1"],[6,"M7 2h1a4 4 0 0 1 4 4v1"]],"text-cursor-input":[[6,"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1"],[6,"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5"],[6,"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1"],[6,"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7"],[6,"M9 7v10"]],"text-quote":[[6,"M17 6H3"],[6,"M21 12H8"],[6,"M21 18H8"],[6,"M3 12v6"]],"text-search":[[6,"M21 6H3"],[6,"M10 12H3"],[6,"M10 18H3"],[1,17,15,3],[6,"m21 19-1.9-1.9"]],"text-select":[[6,"M5 3a2 2 0 0 0-2 2"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M21 19a2 2 0 0 1-2 2"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M9 3h1"],[6,"M9 21h1"],[6,"M14 3h1"],[6,"M14 21h1"],[6,"M3 9v1"],[6,"M21 9v1"],[6,"M3 14v1"],[6,"M21 14v1"],[0,7,8,15,8],[0,7,12,17,12],[0,7,16,13,16]],"text-selection":[[6,"M5 3a2 2 0 0 0-2 2"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M21 19a2 2 0 0 1-2 2"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M9 3h1"],[6,"M9 21h1"],[6,"M14 3h1"],[6,"M14 21h1"],[6,"M3 9v1"],[6,"M21 9v1"],[6,"M3 14v1"],[6,"M21 14v1"],[0,7,8,15,8],[0,7,12,17,12],[0,7,16,13,16]],theater:[[6,"M2 10s3-3 3-8"],[6,"M22 10s-3-3-3-8"],[6,"M10 2c0 4.4-3.6 8-8 8"],[6,"M14 2c0 4.4 3.6 8 8 8"],[6,"M2 10s2 2 2 5"],[6,"M22 10s-2 2-2 5"],[6,"M8 15h8"],[6,"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1"],[6,"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1"]],thermometer:[[6,"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"]],"thermometer-snowflake":[[6,"M2 12h10"],[6,"M9 4v16"],[6,"m3 9 3 3-3 3"],[6,"M12 6 9 9 6 6"],[6,"m6 18 3-3 1.5 1.5"],[6,"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"]],"thermometer-sun":[[6,"M12 9a4 4 0 0 0-2 7.5"],[6,"M12 3v2"],[6,"m6.6 18.4-1.4 1.4"],[6,"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"],[6,"M4 13H2"],[6,"M6.34 7.34 4.93 5.93"]],"thumbs-down":[[6,"M17 14V2"],[6,"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z"]],"thumbs-up":[[6,"M7 10v12"],[6,"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"]],ticket:[[6,"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"M13 5v2"],[6,"M13 17v2"],[6,"M13 11v2"]],"ticket-check":[[6,"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"m9 12 2 2 4-4"]],"ticket-minus":[[6,"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"M9 12h6"]],"ticket-percent":[[6,"M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"M9 9h.01"],[6,"m15 9-6 6"],[6,"M15 15h.01"]],"ticket-plus":[[6,"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"M9 12h6"],[6,"M12 9v6"]],"ticket-slash":[[6,"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"m9.5 14.5 5-5"]],"ticket-x":[[6,"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"m9.5 14.5 5-5"],[6,"m9.5 9.5 5 5"]],tickets:[[6,"m4.5 8 10.58-5.06a1 1 0 0 1 1.342.488L18.5 8"],[6,"M6 10V8"],[6,"M6 14v1"],[6,"M6 19v2"],[5,2,8,20,13,2]],"tickets-plane":[[6,"M10.5 17h1.227a2 2 0 0 0 1.345-.52L18 12"],[6,"m12 13.5 3.75.5"],[6,"m4.5 8 10.58-5.06a1 1 0 0 1 1.342.488L18.5 8"],[6,"M6 10V8"],[6,"M6 14v1"],[6,"M6 19v2"],[5,2,8,20,13,2]],timer:[[0,10,2,14,2],[0,12,14,15,11],[1,12,14,8]],"timer-off":[[6,"M10 2h4"],[6,"M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7"],[6,"M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2"],[6,"m2 2 20 20"],[6,"M12 12v-2"]],"timer-reset":[[6,"M10 2h4"],[6,"M12 14v-4"],[6,"M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],[6,"M9 17H4v5"]],"toggle-left":[[5,2,6,20,12,6,6],[1,8,12,2]],"toggle-right":[[5,2,6,20,12,6,6],[1,16,12,2]],tornado:[[6,"M21 4H3"],[6,"M18 8H6"],[6,"M19 12H9"],[6,"M16 16h-6"],[6,"M11 20H9"]],torus:[[4,12,11,3,2],[4,12,12.5,10,8.5]],touchpad:[[5,2,4,20,16,2],[6,"M2 14h20"],[6,"M12 20v-6"]],"touchpad-off":[[6,"M4 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16"],[6,"M2 14h12"],[6,"M22 14h-2"],[6,"M12 20v-6"],[6,"m2 2 20 20"],[6,"M22 16V6a2 2 0 0 0-2-2H10"]],"tower-control":[[6,"M18.2 12.27 20 6H4l1.8 6.27a1 1 0 0 0 .95.73h10.5a1 1 0 0 0 .96-.73Z"],[6,"M8 13v9"],[6,"M16 22v-9"],[6,"m9 6 1 7"],[6,"m15 6-1 7"],[6,"M12 6V2"],[6,"M13 2h-2"]],"toy-brick":[[5,3,8,18,12,1],[6,"M10 8V5c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v3"],[6,"M19 8V5c0-.6-.4-1-1-1h-3a1 1 0 0 0-1 1v3"]],tractor:[[6,"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20"],[6,"M16 18h-5"],[6,"M18 5a1 1 0 0 0-1 1v5.573"],[6,"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246"],[6,"M4 11V4"],[6,"M7 15h.01"],[6,"M8 10.1V4"],[1,18,18,2],[1,7,15,5]],"traffic-cone":[[6,"M9.3 6.2a4.55 4.55 0 0 0 5.4 0"],[6,"M7.9 10.7c.9.8 2.4 1.3 4.1 1.3s3.2-.5 4.1-1.3"],[6,"M13.9 3.5a1.93 1.93 0 0 0-3.8-.1l-3 10c-.1.2-.1.4-.1.6 0 1.7 2.2 3 5 3s5-1.3 5-3c0-.2 0-.4-.1-.5Z"],[6,"m7.5 12.2-4.7 2.7c-.5.3-.8.7-.8 1.1s.3.8.8 1.1l7.6 4.5c.9.5 2.1.5 3 0l7.6-4.5c.7-.3 1-.7 1-1.1s-.3-.8-.8-1.1l-4.7-2.8"]],train:[[5,4,3,16,16,2],[6,"M4 11h16"],[6,"M12 3v8"],[6,"m8 19-2 3"],[6,"m18 22-2-3"],[6,"M8 15h.01"],[6,"M16 15h.01"]],"train-front":[[6,"M8 3.1V7a4 4 0 0 0 8 0V3.1"],[6,"m9 15-1-1"],[6,"m15 15 1-1"],[6,"M9 19c-2.8 0-5-2.2-5-5v-4a8 8 0 0 1 16 0v4c0 2.8-2.2 5-5 5Z"],[6,"m8 19-2 3"],[6,"m16 19 2 3"]],"train-front-tunnel":[[6,"M2 22V12a10 10 0 1 1 20 0v10"],[6,"M15 6.8v1.4a3 2.8 0 1 1-6 0V6.8"],[6,"M10 15h.01"],[6,"M14 15h.01"],[6,"M10 19a4 4 0 0 1-4-4v-3a6 6 0 1 1 12 0v3a4 4 0 0 1-4 4Z"],[6,"m9 19-2 3"],[6,"m15 19 2 3"]],"train-track":[[6,"M2 17 17 2"],[6,"m2 14 8 8"],[6,"m5 11 8 8"],[6,"m8 8 8 8"],[6,"m11 5 8 8"],[6,"m14 2 8 8"],[6,"M7 22 22 7"]],"tram-front":[[5,4,3,16,16,2],[6,"M4 11h16"],[6,"M12 3v8"],[6,"m8 19-2 3"],[6,"m18 22-2-3"],[6,"M8 15h.01"],[6,"M16 15h.01"]],trash:[[6,"M3 6h18"],[6,"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],[6,"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"]],"trash-2":[[6,"M3 6h18"],[6,"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],[6,"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],[0,10,11,10,17],[0,14,11,14,17]],"tree-deciduous":[[6,"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z"],[6,"M12 19v3"]],"tree-palm":[[6,"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4"],[6,"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3"],[6,"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35"],[6,"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14"]],"tree-pine":[[6,"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z"],[6,"M12 22v-3"]],trees:[[6,"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z"],[6,"M7 16v6"],[6,"M13 19v3"],[6,"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5"]],trello:[[5,3,3,18,18,2,2],[5,7,7,3,9],[5,14,7,3,5]],"trending-down":[[2,"22 17 13.5 8.5 8.5 13.5 2 7"],[2,"16 17 22 17 22 11"]],"trending-up":[[2,"22 7 13.5 15.5 8.5 10.5 2 17"],[2,"16 7 22 7 22 13"]],"trending-up-down":[[6,"M14.828 14.828 21 21"],[6,"M21 16v5h-5"],[6,"m21 3-9 9-4-4-6 6"],[6,"M21 8V3h-5"]],triangle:[[6,"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"]],"triangle-alert":[[6,"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"],[6,"M12 9v4"],[6,"M12 17h.01"]],"triangle-right":[[6,"M22 18a2 2 0 0 1-2 2H3c-1.1 0-1.3-.6-.4-1.3L20.4 4.3c.9-.7 1.6-.4 1.6.7Z"]],trophy:[[6,"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"],[6,"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"],[6,"M4 22h16"],[6,"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"],[6,"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"],[6,"M18 2H6v7a6 6 0 0 0 12 0V2Z"]],truck:[[6,"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"],[6,"M15 18H9"],[6,"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"],[1,17,18,2],[1,7,18,2]],turtle:[[6,"m12 10 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a8 8 0 1 0-16 0v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3l2-4h4Z"],[6,"M4.82 7.9 8 10"],[6,"M15.18 7.9 12 10"],[6,"M16.93 10H20a2 2 0 0 1 0 4H2"]],tv:[[5,2,7,20,15,2,2],[2,"17 2 12 7 7 2"]],"tv-2":[[6,"M7 21h10"],[5,2,3,20,14,2]],"tv-minimal":[[6,"M7 21h10"],[5,2,3,20,14,2]],"tv-minimal-play":[[6,"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z"],[6,"M7 21h10"],[5,2,3,20,14,2]],twitch:[[6,"M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"]],twitter:[[6,"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"]],type:[[2,"4 7 4 4 20 4 20 7"],[0,9,20,15,20],[0,12,4,12,20]],"type-outline":[[6,"M14 16.5a.5.5 0 0 0 .5.5h.5a2 2 0 0 1 0 4H9a2 2 0 0 1 0-4h.5a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5V8a2 2 0 0 1-4 0V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v3a2 2 0 0 1-4 0v-.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5Z"]],umbrella:[[6,"M22 12a10.06 10.06 1 0 0-20 0Z"],[6,"M12 12v8a2 2 0 0 0 4 0"],[6,"M12 2v1"]],"umbrella-off":[[6,"M12 2v1"],[6,"M15.5 21a1.85 1.85 0 0 1-3.5-1v-8H2a10 10 0 0 1 3.428-6.575"],[6,"M17.5 12H22A10 10 0 0 0 9.004 3.455"],[6,"m2 2 20 20"]],underline:[[6,"M6 4v6a6 6 0 0 0 12 0V4"],[0,4,20,20,20]],undo:[[6,"M3 7v6h6"],[6,"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"]],"undo-2":[[6,"M9 14 4 9l5-5"],[6,"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11"]],"undo-dot":[[1,12,17,1],[6,"M3 7v6h6"],[6,"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"]],"unfold-horizontal":[[6,"M16 12h6"],[6,"M8 12H2"],[6,"M12 2v2"],[6,"M12 8v2"],[6,"M12 14v2"],[6,"M12 20v2"],[6,"m19 15 3-3-3-3"],[6,"m5 9-3 3 3 3"]],"unfold-vertical":[[6,"M12 22v-6"],[6,"M12 8V2"],[6,"M4 12H2"],[6,"M10 12H8"],[6,"M16 12h-2"],[6,"M22 12h-2"],[6,"m15 19-3 3-3-3"],[6,"m15 5-3-3-3 3"]],ungroup:[[5,5,4,8,6,1],[5,11,14,8,6,1]],university:[[1,12,10,1],[6,"M22 20V8h-4l-6-4-6 4H2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2"],[6,"M6 17v.01"],[6,"M6 13v.01"],[6,"M18 17v.01"],[6,"M18 13v.01"],[6,"M14 22v-5a2 2 0 0 0-2-2a2 2 0 0 0-2 2v5"]],unlink:[[6,"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71"],[6,"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71"],[0,8,2,8,5],[0,2,8,5,8],[0,16,19,16,22],[0,19,16,22,16]],"unlink-2":[[6,"M15 7h2a5 5 0 0 1 0 10h-2m-6 0H7A5 5 0 0 1 7 7h2"]],unlock:[[5,3,11,18,11,2,2],[6,"M7 11V7a5 5 0 0 1 9.9-1"]],"unlock-keyhole":[[1,12,16,1],[5,3,10,18,12,2],[6,"M7 10V7a5 5 0 0 1 9.33-2.5"]],unplug:[[6,"m19 5 3-3"],[6,"m2 22 3-3"],[6,"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z"],[6,"M7.5 13.5 10 11"],[6,"M10.5 16.5 13 14"],[6,"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z"]],upload:[[6,"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],[2,"17 8 12 3 7 8"],[0,12,3,12,15]],"upload-cloud":[[6,"M12 13v8"],[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"m8 17 4-4 4 4"]],usb:[[1,10,7,1],[1,4,20,1],[6,"M4.7 19.3 19 5"],[6,"m21 3-3 1 2 2Z"],[6,"M9.26 7.68 5 12l2 5"],[6,"m10 14 5 2 3.5-3.5"],[6,"m18 12 1-1 1 1-1 1Z"]],user:[[6,"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],[1,12,7,4]],"user-2":[[1,12,8,5],[6,"M20 21a8 8 0 0 0-16 0"]],"user-check":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[2,"16 11 18 13 22 9"]],"user-check-2":[[6,"M2 21a8 8 0 0 1 13.292-6"],[1,10,8,5],[6,"m16 19 2 2 4-4"]],"user-circle":[[1,12,12,10],[1,12,10,3],[6,"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"]],"user-circle-2":[[6,"M18 20a6 6 0 0 0-12 0"],[1,12,10,4],[1,12,12,10]],"user-cog":[[1,18,15,3],[1,9,7,4],[6,"M10 15H6a4 4 0 0 0-4 4v2"],[6,"m21.7 16.4-.9-.3"],[6,"m15.2 13.9-.9-.3"],[6,"m16.6 18.7.3-.9"],[6,"m19.1 12.2.3-.9"],[6,"m19.6 18.7-.4-1"],[6,"m16.8 12.3-.4-1"],[6,"m14.3 16.6 1-.4"],[6,"m20.7 13.8 1-.4"]],"user-cog-2":[[6,"M2 21a8 8 0 0 1 10.434-7.62"],[1,10,8,5],[1,18,18,3],[6,"m19.5 14.3-.4.9"],[6,"m16.9 20.8-.4.9"],[6,"m21.7 19.5-.9-.4"],[6,"m15.2 16.9-.9-.4"],[6,"m21.7 16.5-.9.4"],[6,"m15.2 19.1-.9.4"],[6,"m19.5 21.7-.4-.9"],[6,"m16.9 15.2-.4-.9"]],"user-minus":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[0,22,11,16,11]],"user-minus-2":[[6,"M2 21a8 8 0 0 1 13.292-6"],[1,10,8,5],[6,"M22 19h-6"]],"user-pen":[[6,"M11.5 15H7a4 4 0 0 0-4 4v2"],[6,"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"],[1,10,7,4]],"user-plus":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[0,19,8,19,14],[0,22,11,16,11]],"user-plus-2":[[6,"M2 21a8 8 0 0 1 13.292-6"],[1,10,8,5],[6,"M19 16v6"],[6,"M22 19h-6"]],"user-round":[[1,12,8,5],[6,"M20 21a8 8 0 0 0-16 0"]],"user-round-check":[[6,"M2 21a8 8 0 0 1 13.292-6"],[1,10,8,5],[6,"m16 19 2 2 4-4"]],"user-round-cog":[[6,"M2 21a8 8 0 0 1 10.434-7.62"],[1,10,8,5],[1,18,18,3],[6,"m19.5 14.3-.4.9"],[6,"m16.9 20.8-.4.9"],[6,"m21.7 19.5-.9-.4"],[6,"m15.2 16.9-.9-.4"],[6,"m21.7 16.5-.9.4"],[6,"m15.2 19.1-.9.4"],[6,"m19.5 21.7-.4-.9"],[6,"m16.9 15.2-.4-.9"]],"user-round-minus":[[6,"M2 21a8 8 0 0 1 13.292-6"],[1,10,8,5],[6,"M22 19h-6"]],"user-round-pen":[[6,"M2 21a8 8 0 0 1 10.821-7.487"],[6,"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"],[1,10,8,5]],"user-round-plus":[[6,"M2 21a8 8 0 0 1 13.292-6"],[1,10,8,5],[6,"M19 16v6"],[6,"M22 19h-6"]],"user-round-search":[[1,10,8,5],[6,"M2 21a8 8 0 0 1 10.434-7.62"],[1,18,18,3],[6,"m22 22-1.9-1.9"]],"user-round-x":[[6,"M2 21a8 8 0 0 1 11.873-7"],[1,10,8,5],[6,"m17 17 5 5"],[6,"m22 17-5 5"]],"user-search":[[1,10,7,4],[6,"M10.3 15H7a4 4 0 0 0-4 4v2"],[1,17,17,3],[6,"m21 21-1.9-1.9"]],"user-square":[[5,3,3,18,18,2],[1,12,10,3],[6,"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"]],"user-square-2":[[6,"M18 21a6 6 0 0 0-12 0"],[1,12,11,4],[5,3,3,18,18,2]],"user-x":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[0,17,8,22,13],[0,22,8,17,13]],"user-x2":[[6,"M2 21a8 8 0 0 1 11.873-7"],[1,10,8,5],[6,"m17 17 5 5"],[6,"m22 17-5 5"]],users:[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[6,"M22 21v-2a4 4 0 0 0-3-3.87"],[6,"M16 3.13a4 4 0 0 1 0 7.75"]],"users-2":[[6,"M18 21a8 8 0 0 0-16 0"],[1,10,8,5],[6,"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"]],"users-round":[[6,"M18 21a8 8 0 0 0-16 0"],[1,10,8,5],[6,"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"]],utensils:[[6,"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"],[6,"M7 2v20"],[6,"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"]],"utensils-crossed":[[6,"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8"],[6,"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7"],[6,"m2.1 21.8 6.4-6.3"],[6,"m19 5-7 7"]],"utility-pole":[[6,"M12 2v20"],[6,"M2 5h20"],[6,"M3 3v2"],[6,"M7 3v2"],[6,"M17 3v2"],[6,"M21 3v2"],[6,"m19 5-7 7-7-7"]],variable:[[6,"M8 21s-4-3-4-9 4-9 4-9"],[6,"M16 3s4 3 4 9-4 9-4 9"],[0,15,9,9,15],[0,9,9,15,15]],vault:[[5,3,3,18,18,2],[1,7.5,7.5,.5],[6,"m7.9 7.9 2.7 2.7"],[1,16.5,7.5,.5],[6,"m13.4 10.6 2.7-2.7"],[1,7.5,16.5,.5],[6,"m7.9 16.1 2.7-2.7"],[1,16.5,16.5,.5],[6,"m13.4 13.4 2.7 2.7"],[1,12,12,2]],vegan:[[6,"M2 2a26.6 26.6 0 0 1 10 20c.9-6.82 1.5-9.5 4-14"],[6,"M16 8c4 0 6-2 6-6-4 0-6 2-6 6"],[6,"M17.41 3.6a10 10 0 1 0 3 3"]],"venetian-mask":[[6,"M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V7h-5a8 8 0 0 0-5 2 8 8 0 0 0-5-2H2Z"],[6,"M6 11c1.5 0 3 .5 3 2-2 0-3 0-3-2Z"],[6,"M18 11c-1.5 0-3 .5-3 2 2 0 3 0 3-2Z"]],verified:[[6,"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],[6,"m9 12 2 2 4-4"]],vibrate:[[6,"m2 8 2 2-2 2 2 2-2 2"],[6,"m22 8-2 2 2 2-2 2 2 2"],[5,8,5,8,14,1]],"vibrate-off":[[6,"m2 8 2 2-2 2 2 2-2 2"],[6,"m22 8-2 2 2 2-2 2 2 2"],[6,"M8 8v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2"],[6,"M16 10.34V6c0-.55-.45-1-1-1h-4.34"],[0,2,2,22,22]],video:[[6,"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"],[5,2,6,14,12,2]],"video-off":[[6,"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196"],[6,"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2"],[6,"m2 2 20 20"]],videotape:[[5,2,4,20,16,2],[6,"M2 8h20"],[1,8,14,2],[6,"M8 12h8"],[1,16,14,2]],view:[[6,"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2"],[6,"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2"],[1,12,12,1],[6,"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0"]],voicemail:[[1,6,12,4],[1,18,12,4],[0,6,16,18,16]],volume:[[6,"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"]],"volume-1":[[6,"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"],[6,"M16 9a5 5 0 0 1 0 6"]],"volume-2":[[6,"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"],[6,"M16 9a5 5 0 0 1 0 6"],[6,"M19.364 18.364a9 9 0 0 0 0-12.728"]],"volume-off":[[6,"M16 9a5 5 0 0 1 .95 2.293"],[6,"M19.364 5.636a9 9 0 0 1 1.889 9.96"],[6,"m2 2 20 20"],[6,"m7 7-.587.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298V11"],[6,"M9.828 4.172A.686.686 0 0 1 11 4.657v.686"]],"volume-x":[[6,"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"],[0,22,9,16,15],[0,16,9,22,15]],vote:[[6,"m9 12 2 2 4-4"],[6,"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z"],[6,"M22 19H2"]],wallet:[[6,"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"],[6,"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"]],"wallet-2":[[6,"M17 14h.01"],[6,"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14"]],"wallet-cards":[[5,3,3,18,18,2],[6,"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2"],[6,"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21"]],"wallet-minimal":[[6,"M17 14h.01"],[6,"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14"]],wallpaper:[[1,8,9,2],[6,"m9 17 6.1-6.1a2 2 0 0 1 2.81.01L22 15V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2"],[6,"M8 21h8"],[6,"M12 17v4"]],wand:[[6,"M15 4V2"],[6,"M15 16v-2"],[6,"M8 9h2"],[6,"M20 9h2"],[6,"M17.8 11.8 19 13"],[6,"M15 9h.01"],[6,"M17.8 6.2 19 5"],[6,"m3 21 9-9"],[6,"M12.2 6.2 11 5"]],"wand-2":[[6,"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"],[6,"m14 7 3 3"],[6,"M5 6v4"],[6,"M19 14v4"],[6,"M10 2v2"],[6,"M7 8H3"],[6,"M21 16h-4"],[6,"M11 3H9"]],"wand-sparkles":[[6,"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"],[6,"m14 7 3 3"],[6,"M5 6v4"],[6,"M19 14v4"],[6,"M10 2v2"],[6,"M7 8H3"],[6,"M21 16h-4"],[6,"M11 3H9"]],warehouse:[[6,"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z"],[6,"M6 18h12"],[6,"M6 14h12"],[5,6,10,12,12]],"washing-machine":[[6,"M3 6h3"],[6,"M17 6h.01"],[5,3,2,18,20,2],[1,12,13,5],[6,"M12 18a2.5 2.5 0 0 0 0-5 2.5 2.5 0 0 1 0-5"]],watch:[[1,12,12,6],[2,"12 10 12 12 13 13"],[6,"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05"],[6,"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05"]],waves:[[6,"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"],[6,"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"],[6,"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"]],waypoints:[[1,12,4.5,2.5],[6,"m10.2 6.3-3.9 3.9"],[1,4.5,12,2.5],[6,"M7 12h10"],[1,19.5,12,2.5],[6,"m13.8 17.7 3.9-3.9"],[1,12,19.5,2.5]],webcam:[[1,12,10,8],[1,12,10,3],[6,"M7 22h10"],[6,"M12 22v-4"]],webhook:[[6,"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2"],[6,"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06"],[6,"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8"]],"webhook-off":[[6,"M17 17h-5c-1.09-.02-1.94.92-2.5 1.9A3 3 0 1 1 2.57 15"],[6,"M9 3.4a4 4 0 0 1 6.52.66"],[6,"m6 17 3.1-5.8a2.5 2.5 0 0 0 .057-2.05"],[6,"M20.3 20.3a4 4 0 0 1-2.3.7"],[6,"M18.6 13a4 4 0 0 1 3.357 3.414"],[6,"m12 6 .6 1"],[6,"m2 2 20 20"]],weight:[[1,12,5,3],[6,"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z"]],wheat:[[6,"M2 22 16 8"],[6,"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"],[6,"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"],[6,"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"],[6,"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z"],[6,"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"],[6,"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"],[6,"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"]],"wheat-off":[[6,"m2 22 10-10"],[6,"m16 8-1.17 1.17"],[6,"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"],[6,"m8 8-.53.53a3.5 3.5 0 0 0 0 4.94L9 15l1.53-1.53c.55-.55.88-1.25.98-1.97"],[6,"M10.91 5.26c.15-.26.34-.51.56-.73L13 3l1.53 1.53a3.5 3.5 0 0 1 .28 4.62"],[6,"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z"],[6,"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"],[6,"m16 16-.53.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.49 3.49 0 0 1 1.97-.98"],[6,"M18.74 13.09c.26-.15.51-.34.73-.56L21 11l-1.53-1.53a3.5 3.5 0 0 0-4.62-.28"],[0,2,2,22,22]],"whole-word":[[1,7,12,3],[6,"M10 9v6"],[1,17,12,3],[6,"M14 7v8"],[6,"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1"]],wifi:[[6,"M12 20h.01"],[6,"M2 8.82a15 15 0 0 1 20 0"],[6,"M5 12.859a10 10 0 0 1 14 0"],[6,"M8.5 16.429a5 5 0 0 1 7 0"]],"wifi-high":[[6,"M12 20h.01"],[6,"M5 12.859a10 10 0 0 1 14 0"],[6,"M8.5 16.429a5 5 0 0 1 7 0"]],"wifi-low":[[6,"M12 20h.01"],[6,"M8.5 16.429a5 5 0 0 1 7 0"]],"wifi-off":[[6,"M12 20h.01"],[6,"M8.5 16.429a5 5 0 0 1 7 0"],[6,"M5 12.859a10 10 0 0 1 5.17-2.69"],[6,"M19 12.859a10 10 0 0 0-2.007-1.523"],[6,"M2 8.82a15 15 0 0 1 4.177-2.643"],[6,"M22 8.82a15 15 0 0 0-11.288-3.764"],[6,"m2 2 20 20"]],"wifi-zero":[[6,"M12 20h.01"]],wind:[[6,"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"],[6,"M9.6 4.6A2 2 0 1 1 11 8H2"],[6,"M12.6 19.4A2 2 0 1 0 14 16H2"]],wine:[[6,"M8 22h8"],[6,"M7 10h10"],[6,"M12 15v7"],[6,"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z"]],"wine-off":[[6,"M8 22h8"],[6,"M7 10h3m7 0h-1.343"],[6,"M12 15v7"],[6,"M7.307 7.307A12.33 12.33 0 0 0 7 10a5 5 0 0 0 7.391 4.391M8.638 2.981C8.75 2.668 8.872 2.34 9 2h6c1.5 4 2 6 2 8 0 .407-.05.809-.145 1.198"],[0,2,2,22,22]],workflow:[[5,3,3,8,8,2],[6,"M7 11v4a2 2 0 0 0 2 2h4"],[5,13,13,8,8,2]],worm:[[6,"m19 12-1.5 3"],[6,"M19.63 18.81 22 20"],[6,"M6.47 8.23a1.68 1.68 0 0 1 2.44 1.93l-.64 2.08a6.76 6.76 0 0 0 10.16 7.67l.42-.27a1 1 0 1 0-2.73-4.21l-.42.27a1.76 1.76 0 0 1-2.63-1.99l.64-2.08A6.66 6.66 0 0 0 3.94 3.9l-.7.4a1 1 0 1 0 2.55 4.34z"]],"wrap-text":[[0,3,6,21,6],[6,"M3 12h15a3 3 0 1 1 0 6h-4"],[2,"16 16 14 18 16 20"],[0,3,18,10,18]],wrench:[[6,"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"]],x:[[6,"M18 6 6 18"],[6,"m6 6 12 12"]],"x-circle":[[1,12,12,10],[6,"m15 9-6 6"],[6,"m9 9 6 6"]],"x-octagon":[[6,"m15 9-6 6"],[6,"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z"],[6,"m9 9 6 6"]],"x-square":[[5,3,3,18,18,2,2],[6,"m15 9-6 6"],[6,"m9 9 6 6"]],youtube:[[6,"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"],[6,"m10 15 5-3-5-3z"]],zap:[[6,"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"]],"zap-off":[[6,"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317"],[6,"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773"],[6,"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643"],[6,"m2 2 20 20"]],"zoom-in":[[1,11,11,8],[0,21,21,16.65,16.65],[0,11,8,11,14],[0,8,11,14,11]],"zoom-out":[[1,11,11,8],[0,21,21,16.65,16.65],[0,8,11,14,11]]};var rx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function ox(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach((function(e){n.setAttribute(e,t[e])})),n}function ax(e){var t=e[0];if(0===t)return ox("line",{x1:e[1],y1:e[2],x2:e[3],y2:e[4]});if(1===t)return ox("circle",{cx:e[1],cy:e[2],r:e[3]});if(2===t)return ox("polyline",{points:e[1]});if(3===t)return ox("polygon",{points:e[1]});if(4===t)return ox("ellipse",{cx:e[1],cy:e[2],rx:e[3],ry:e[4]});if(5===t){var n={x:e[1],y:e[2],width:e[3],height:e[4]};return e[5]&&(n.rx=e[5]),e[6]&&(n.ry=e[6]),e[7]&&(n.transform=e[7]),ox("rect",n)}return 6===t?ox("path",{d:e[1]}):void 0}function sx(e){for(var t=ox("svg",rx),n=0,i=e;n<i.length;n++){var r=i[n];t.appendChild(ax(r))}return t}var lx={"create-new":"edit",trash:"trash-2",search:"search","right-triangle":"right-triangle",document:"file",folder:"folder-open",pencil:"edit-3","left-arrow":"chevron-left","right-arrow":"chevron-right","three-horizontal-bars":"menu","dot-network":"git-fork","audio-file":"file-audio","image-file":"image","pdf-file":"file-text",gear:"settings",documents:"files",blocks:"layout-list","go-to-file":"file-input",presentation:"monitor","cross-in-box":"x-square",microphone:"mic","microphone-filled":"mic","two-columns":"columns",link:"link","popup-open":"arrow-up-right",checkmark:"check",hashtag:"hash","left-arrow-with-tail":"arrow-left","right-arrow-with-tail":"arrow-right","up-arrow-with-tail":"arrow-up","down-arrow-with-tail":"arrow-down","lines-of-text":"align-left","vertical-three-dots":"more-vertical",pin:"pin","magnifying-glass":"search",info:"info","horizontal-split":"separator-horizontal","vertical-split":"separator-vertical","calendar-with-checkmark":"calendar-check","folder-minus":"folder-minus","sheets-in-box":"sheets-in-box","up-and-down-arrows":"move-vertical","broken-link":"unlink",cross:"x","any-key":"plus-circle",reset:"rotate-ccw",star:"star","crossed-star":"star-off",dice:"dice","filled-pin":"pin",enter:"log-in",help:"help",vault:"vault","open-vault":"open-vault","paper-plane":"send","bullet-list":"list","uppercase-lowercase-a":"uppercase-lowercase-a","star-list":"star-list","expand-vertically":"move-vertical",languages:"languages",switch:"repeat","pane-layout":"layout",install:"download-cloud",sync:"refresh-cw","check-in-circle":"check-circle-2","sync-small":"sync-small","check-small":"check-small",paused:"paused","forward-arrow":"forward","stacked-levels":"folder-tree","bracket-glyph":"bracket-glyph","note-glyph":"sticky-note","tag-glyph":"tag","price-tag-glyph":"tag","heading-glyph":"heading-glyph","bold-glyph":"bold","italic-glyph":"italic","strikethrough-glyph":"strikethrough","highlight-glyph":"highlighter","code-glyph":"code-2","quote-glyph":"quote","link-glyph":"link","bullet-list-glyph":"list","number-list-glyph":"list-ordered","checkbox-glyph":"check-square","undo-glyph":"undo-2","redo-glyph":"redo-2","up-chevron-glyph":"chevron-up","down-chevron-glyph":"chevron-down","left-chevron-glyph":"chevron-left","right-chevron-glyph":"chevron-right","percent-sign-glyph":"percent","keyboard-glyph":"keyboard","double-up-arrow-glyph":"chevrons-up","double-down-arrow-glyph":"chevrons-down","image-glyph":"paperclip","wrench-screwdriver-glyph":"wrench",clock:"clock","plus-with-circle":"plus-circle","minus-with-circle":"minus-circle","indent-glyph":"indent","unindent-glyph":"outdent",fullscreen:"maximize","exit-fullscreen":"minimize",cloud:"cloud","run-command":"terminal","compress-glyph":"minimize-2","enlarge-glyph":"maximize-2","scissors-glyph":"scissors","up-curly-arrow-glyph":"corner-right-up","down-curly-arrow-glyph":"corner-right-down","plus-minus-glyph":"diff","links-going-out":"links-going-out","links-coming-in":"links-coming-in","add-note-glyph":"file-plus","duplicate-glyph":"copy","clock-glyph":"clock","calendar-glyph":"calendar-days","command-glyph":"terminal-square","dice-glyph":"dice-glyph","file-explorer-glyph":"files","graph-glyph":"git-fork","import-glyph":"download","navigate-glyph":"navigation","open-elsewhere-glyph":"arrow-up-right","presentation-glyph":"monitor","paper-plane-glyph":"send","question-mark-glyph":"question-mark-glyph","restore-file-glyph":"rotate-ccw","search-glyph":"search","star-glyph":"star","play-audio-glyph":"play-circle","stop-audio-glyph":"stop-circle","tomorrow-glyph":"calendar-plus","wand-glyph":"wand","workspace-glyph":"layout","yesterday-glyph":"calendar-minus","box-glyph":"box-glyph","merge-files-glyph":"git-merge","merge-files":"git-merge","two-blank-pages":"copy",scissors:"scissors",paste:"clipboard-check","paste-text":"clipboard-type",split:"git-branch-plus","select-all-text":"box-select",wand:"wand-2","github-glyph":"file-code","reading-glasses":"glasses","user-manual-filled":"book-open","discord-filled":"discord","chat-bubbles-filled":"message-circle","experiment-filled":"experiment"},cx={"refresh-cw-off":'<path d="M21 8L18.74 5.74A9.75 9.75 0 0 0 12 3C11 3 10.03 3.16 9.13 3.47"/><path d="M8 16H3v5"/><path d="M3 12C3 9.51 4 7.26 5.64 5.64"/><path d="m3 16 2.26 2.26A9.75 9.75 0 0 0 12 21c2.49 0 4.74-1 6.36-2.64"/><path d="M21 12c0 1-.16 1.97-.47 2.87"/><path d="M21 3v5h-5"/><path d="M22 22 2 2"/>',"bracket-glyph":'<path d="M9 21C7.89336 21 5 21 5 21C5 21 5 6.79076 5 3C5 3 8.21882 3.00004 9 3.00004"/><path d="M15 2.99996C16.1066 2.99996 19 2.99996 19 2.99996C19 2.99996 19 17.2092 19 21C19 21 15.7812 21 15 21"/>',"box-glyph":'<path d="M21 13V12.5714C21 11.8964 20.8189 11 19.7143 11L4.28571 11C3.18114 11 3 11.8964 3 12.5714V20.4286C3 21.1036 3.18114 22 4.28571 22H14"/><path d="M21 4.14286C21 3.65194 20.8189 3 19.7143 3L4.28571 3C3.18114 3 3 3.65194 3 4.14286"/><path d="M21 8.14286C21 7.65194 20.8189 7 19.7143 7L4.28571 7C3.18114 7 3 7.65194 3 8.14286"/><path d="M19 16V22"/><path d="M16 19H22"/>',"check-small":'<path d="M12 21C16.9707 21 21 16.9707 21 12C21 7.0293 16.9707 3 12 3C7.0293 3 3 7.0293 3 12C3 16.9707 7.0293 21 12 21Z"/><path d="M7.5 12.5L10.5 15.5L16 10"/>',"dice-glyph":'<path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z"/><path d="M17 16C17 16.5523 16.5523 17 16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16Z"/><path d="M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z"/><path d="M9 8C9 8.55228 8.55228 9 8 9C7.44772 9 7 8.55228 7 8C7 7.44772 7.44772 7 8 7C8.55228 7 9 7.44772 9 8Z"/>',dice:'<path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z"/><path d="M17 16C17 16.5523 16.5523 17 16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16Z"/><path d="M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z"/><path d="M9 8C9 8.55228 8.55228 9 8 9C7.44772 9 7 8.55228 7 8C7 7.44772 7.44772 7 8 7C8.55228 7 9 7.44772 9 8Z"/>',discord:'<path d="M8.795 17.0865C8.34168 17.7478 7.8561 18.3864 7.34 19C3.65 18.895 2.25 16.5 2.25 16.5C2.30245 13.1065 3.12479 9.7693 4.655 6.74C6.00009 5.68771 7.63906 5.07965 9.345 5L9.845 6.155C10.5591 6.05585 11.279 6.00407 12 6C12.7242 6.00238 13.4474 6.05249 14.165 6.15L14.665 4.995C16.3726 5.07897 18.0117 5.69233 19.355 6.75C20.8803 9.7771 21.6991 13.1107 21.75 16.5C21.75 16.5 20.35 18.895 16.66 19C16.1517 18.3894 15.6744 17.7536 15.23 17.095M18.46 15.645C16.54 16.6175 14.682 17.59 12 17.59C9.318 17.59 7.46 16.6175 5.54 15.645" /><path d="M9.25 13.5C9.66421 13.5 10 12.9404 10 12.25C10 11.5596 9.66421 11 9.25 11C8.83579 11 8.5 11.5596 8.5 12.25C8.5 12.9404 8.83579 13.5 9.25 13.5Z" /><path d="M14.75 13.5C15.1642 13.5 15.5 12.9404 15.5 12.25C15.5 11.5596 15.1642 11 14.75 11C14.3358 11 14 11.5596 14 12.25C14 12.9404 14.3358 13.5 14.75 13.5Z" />',"right-triangle":'<path d="M3 8L12 17L21 8"/>',"heading-glyph":'<path d="M9 4H4"/><path d="M20 4H15"/><path d="M20 20H15"/><path d="M9 20H4"/><path d="M18 12L6 12"/><path d="M6 20L6 4"/><path d="M18 20L18 4"/>',help:'<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"/><path d="M9.09009 9.00003C9.32519 8.33169 9.78924 7.76813 10.4 7.40916C11.0108 7.05019 12.079 6.94542 12.7773 7.06519C13.9093 7.25935 14.9767 8.25497 14.9748 9.49073C14.9748 11.9908 12 11.2974 12 14"/><path d="M12 17H12.01"/>',"keyboard-toggle":'<path d="M20 3H4C2.89543 3 2 3.89543 2 5V13C2 14.1046 2.89543 15 4 15H20C21.1046 15 22 14.1046 22 13V5C22 3.89543 21.1046 3 20 3Z"/><path d="M6 7H6.001"/><path d="M10 7H10.001"/><path d="M14 7H14.001"/><path d="M18 7H18.001"/><path d="M6 11H6.001"/><path d="M18 11H18.001"/><path d="M10 11H14"/><path d="M7 19L12 21L17 19"/>',"broken-link":'<path d="M12 18.26L10.4886 19.7786L10.4886 19.761C9.64543 20.5738 8.51382 21.0192 7.34221 20.9994C6.17061 20.9795 5.05478 20.496 4.23971 19.655C3.44441 18.8312 3 17.7313 3 16.5868C3 15.4423 3.44441 14.3425 4.23971 13.5186L5.75111 12"/><path d="M12 5.75153L13.5114 4.24023C14.3546 3.42658 15.4862 2.98075 16.6578 3.00064C17.8294 3.02052 18.9452 3.50449 19.7603 4.34629C20.5556 5.17092 21 6.27188 21 7.4175C21 8.56311 20.5556 9.66407 19.7603 10.4887L18.2489 12"/><path d="M3 8L6 8"/><path d="M8 3L8 6"/><path d="M18 16L21 16"/><path d="M16 18L16 21"/>',experiment:'<path d="M9.18747 9.75V3H14.8125V9.75L20.1485 15.5707C20.5733 16.0343 20.8542 16.6115 20.9567 17.2319C21.0592 17.8523 20.9789 18.4891 20.7257 19.0646C20.4725 19.6402 20.0573 20.1297 19.5307 20.4733C19.0041 20.817 18.3889 21 17.7601 21H6.23994C5.61113 21 4.99591 20.817 4.46931 20.4733C3.94271 20.1297 3.52749 19.6402 3.27428 19.0646C3.02108 18.4891 2.94084 17.8523 3.04334 17.2319C3.14584 16.6115 3.42666 16.0343 3.85154 15.5707L9.18747 9.75Z"/><path d="M8 3H16"/><path d="M5 14C9.08333 16.25 9.66667 14 12 14C14.3333 14 14.9167 16.25 19 14"/>',"left-arrow":'<path d="M16.5 3.5L7.5 12.5L16.5 21.5"/>',link:'<path d="M13.1404 10C13.6728 10.3955 14.1134 10.9001 14.4322 11.4796C14.7511 12.0591 14.9407 12.6999 14.9882 13.3586C15.0357 14.0172 14.94 14.6783 14.7076 15.297C14.4751 15.9157 14.1115 16.4775 13.6412 16.9443L10.8588 19.7073C9.98423 20.5462 8.81284 21.0103 7.59697 20.9998C6.38109 20.9893 5.21801 20.505 4.35822 19.6512C3.49844 18.7974 3.01074 17.6424 3.00018 16.435C2.98961 15.2276 3.45702 14.0644 4.30173 13.1959L5.88768 11.6117"/><path d="M10.8596 14C10.3272 13.6045 9.88658 13.0999 9.56776 12.5204C9.24894 11.9409 9.05935 11.3001 9.01185 10.6414C8.96435 9.98279 9.06004 9.32171 9.29245 8.70302C9.52486 8.08433 9.88853 7.52251 10.3588 7.05567L13.1412 4.29268C14.0158 3.45384 15.1872 2.98968 16.403 3.00017C17.6189 3.01067 18.782 3.49497 19.6418 4.34877C20.5016 5.20257 20.9893 6.35756 20.9998 7.56498C21.0104 8.77239 20.543 9.93562 19.6983 10.8041L18.1123 12.379"/>',"link-glyph":'<path d="M13.1404 10C13.6728 10.3955 14.1134 10.9001 14.4322 11.4796C14.7511 12.0591 14.9407 12.6999 14.9882 13.3586C15.0357 14.0172 14.94 14.6783 14.7076 15.297C14.4751 15.9157 14.1115 16.4775 13.6412 16.9443L10.8588 19.7073C9.98423 20.5462 8.81284 21.0103 7.59697 20.9998C6.38109 20.9893 5.21801 20.505 4.35822 19.6512C3.49844 18.7974 3.01074 17.6424 3.00018 16.435C2.98961 15.2276 3.45702 14.0644 4.30173 13.1959L5.88768 11.6117"/><path d="M10.8596 14C10.3272 13.6045 9.88658 13.0999 9.56776 12.5204C9.24894 11.9409 9.05935 11.3001 9.01185 10.6414C8.96435 9.98279 9.06004 9.32171 9.29245 8.70302C9.52486 8.08433 9.88853 7.52251 10.3588 7.05567L13.1412 4.29268C14.0158 3.45384 15.1872 2.98968 16.403 3.00017C17.6189 3.01067 18.782 3.49497 19.6418 4.34877C20.5016 5.20257 20.9893 6.35756 20.9998 7.56498C21.0104 8.77239 20.543 9.93562 19.6983 10.8041L18.1123 12.379"/>',"links-coming-in":'<path d="M8.70467 12C8.21657 11.6404 7.81269 11.1817 7.52044 10.6549C7.22819 10.1281 7.0544 9.54553 7.01086 8.94677C6.96732 8.348 7.05504 7.74701 7.26808 7.18456C7.48112 6.62212 7.81449 6.11138 8.24558 5.68697L10.7961 3.17516C11.5978 2.41258 12.6716 1.99062 13.7861 2.00016C14.9007 2.0097 15.9668 2.44997 16.755 3.22615C17.5431 4.00234 17.9902 5.05233 17.9998 6.14998C18.0095 7.24763 17.5811 8.30511 16.8067 9.09467L15.9014 10"/><path d="M11.2953 8C11.7834 8.35957 12.1873 8.81831 12.4796 9.34512C12.7718 9.87192 12.9456 10.4545 12.9891 11.0532C13.0327 11.652 12.945 12.253 12.7319 12.8154C12.5189 13.3779 12.1855 13.8886 11.7544 14.313L9.20392 16.8248C8.40221 17.5874 7.32844 18.0094 6.21389 17.9998C5.09933 17.9903 4.03318 17.55 3.24504 16.7738C2.4569 15.9977 2.00985 14.9477 2.00016 13.85C1.99047 12.7524 2.41893 11.6949 3.19326 10.9053L4.09859 10"/><path d="M17 21L14 18L17 15"/><path d="M21 18H14"/>',"links-going-out":'<path d="M8.70467 12C8.21657 11.6404 7.81269 11.1817 7.52044 10.6549C7.22819 10.1281 7.0544 9.54553 7.01086 8.94677C6.96732 8.348 7.05504 7.74701 7.26808 7.18456C7.48112 6.62212 7.81449 6.11138 8.24558 5.68697L10.7961 3.17516C11.5978 2.41258 12.6716 1.99062 13.7861 2.00016C14.9007 2.0097 15.9668 2.44997 16.755 3.22615C17.5431 4.00234 17.9902 5.05233 17.9998 6.14998C18.0095 7.24763 17.5811 8.30511 16.8067 9.09467L15.9014 10"/><path d="M11.2953 8C11.7834 8.35957 12.1873 8.81831 12.4796 9.34512C12.7718 9.87192 12.9456 10.4545 12.9891 11.0532C13.0327 11.652 12.945 12.253 12.7319 12.8154C12.5189 13.3779 12.1855 13.8886 11.7544 14.313L9.20392 16.8248C8.40221 17.5874 7.32844 18.0094 6.21389 17.9998C5.09933 17.9903 4.03318 17.55 3.24504 16.7738C2.4569 15.9977 2.00985 14.9477 2.00016 13.85C1.99047 12.7524 2.41893 11.6949 3.19326 10.9053L4.09859 10"/><path d="M18 21L21 18L18 15"/><path d="M14 18H21"/>',"open-vault":'<path d="M10 21L4.5 21C3.39543 21 3 20.5255 3 19.2L3 4.80001C3 3.47452 3.39543 3.00001 4.5 3.00001L10 3"/><path d="M21 7L22.5 7"/><path d="M21 16L22.5 16"/><path d="M21 18.9104L21 5.09381C21 5.09381 21 3.94236 19.5 3.36674L11.5 1.06397C11.5 1.06397 10 0.488257 10 2.79104L10 21.0928C10 23.5159 11.5 22.9403 11.5 22.9403L19.5 20.6375C21 20.0618 21 18.9104 21 18.9104Z"/><ellipse cx="16" cy="11" rx="1.5" ry="3"/><path d="M16 14L16 17"/>',paused:'<path d="M12 21C16.9707 21 21 16.9707 21 12C21 7.0293 16.9707 3 12 3C7.0293 3 3 7.0293 3 12C3 16.9707 7.0293 21 12 21Z"/><path d="M10 15V9"/><path d="M14 15V9"/>',"question-mark-glyph":'<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"/><path d="M9.09009 9.00003C9.32519 8.33169 9.78924 7.76813 10.4 7.40916C11.0108 7.05019 12.079 6.94542 12.7773 7.06519C13.9093 7.25935 14.9767 8.25497 14.9748 9.49073C14.9748 11.9908 12 11.2974 12 14"/><path d="M12 17H12.01"/>',"right-arrow":'<path d="M7.5 21.5L16.5 12.5L7.5 3.5"/>',"sidebar-left":'<path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"/><path d="M10 4V20"/><path d="M4 7H7"/><path d="M4 10H7"/><path d="M4 13H7"/>',"sidebar-right":'<path d="M3 3H21C22.1046 3 23 3.89543 23 5V19C23 20.1046 22.1046 21 21 21H3C1.89543 21 1 20.1046 1 19V5C1 3.89543 1.89543 3 3 3Z"/><path d="M14 4V20"/><path d="M20 7H17"/><path d="M20 10H17"/><path d="M20 13H17"/>',"sheets-in-box":'<path d="M19 16V22"/><path d="M16 19H22"/><path d="M20.7297 13.0005C20.7297 12.4701 20.519 11.9613 20.1439 11.5863C19.7689 11.2112 19.2602 11.0005 18.7297 11.0005H4.72974C4.1993 11.0005 3.6906 11.2112 3.31552 11.5863C2.94045 11.9613 2.72974 12.4701 2.72974 13.0005L2.72974 19.9886C2.72974 20.519 2.94045 21.0277 3.31552 21.4028C3.6906 21.7779 4.1993 21.9886 4.72974 21.9886H13"/><path d="M21 8C21 8 21 7 20 7H4C3.00199 7 3 7.99347 3 7.99347"/><path d="M21 4C21 4 21.0066 3 20 3L4 3C3 3 3 4 3 4"/>',"star-list":'<path d="M10 12H3"/><path d="M16 6H3"/><path d="M10 18H3"/><path d="M17 11L18.236 13.3039L21 13.6756L19 15.4679L19.472 18L17 16.8039L14.528 18L15 15.4679L13 13.6756L15.764 13.3039L17 11Z"/>',"sync-small":'<path d="M12 21C16.9707 21 21 16.9707 21 12C21 7.0293 16.9707 3 12 3C7.0293 3 3 7.0293 3 12C3 16.9707 7.0293 21 12 21Z"/><path d="M12 21C16.9707 21 21 16.9707 21 12C21 7.0293 16.9707 3 12 3C7.0293 3 3 7.0293 3 12C3 16.9707 7.0293 21 12 21Z"/><path d="M7.6394 11.0114C8.08785 9.01426 9.87182 7.52222 12.0044 7.52222C14 7.52222 15 9 16.0121 10.0057M8.00579 14.0042C9 15 10 16.4695 12.0044 16.4695C14.1282 16.4695 15.9062 14.9897 16.3638 13.0049"/><path d="M16.5 8.5V10.5H14.5"/><path d="M8 16L8 14L10 14"/>',tabs:'<path d="M6 17V19.4444C6 20.3036 6.69645 21 7.55556 21H18.4444C19.3036 21 20 20.3036 20 19.4444V8.55556C20 7.69645 19.3036 7 18.4444 7H16"/><path d="M14.4444 3H3.55556C2.69645 3 2 3.69645 2 4.55556V15.4444C2 16.3036 2.69645 17 3.55556 17H14.4444C15.3036 17 16 16.3036 16 15.4444V4.55556C16 3.69645 15.3036 3 14.4444 3Z"/>',"uppercase-lowercase-a":'<path d="M10.5 14L4.5 14"/><path d="M12.5 18L7.5 6"/><path d="M3 18L7.5 6"/><path d="M15.9526 10.8322C15.9526 10.8322 16.6259 10 18.3832 10C20.1406 9.99999 20.9986 11.0587 20.9986 11.9682V16.7018C20.9986 17.1624 21.2815 17.7461 21.7151 18"/><path d="M20.7151 13.5C18.7151 13.5 15.7151 14.2837 15.7151 16C15.7151 17.7163 17.5908 18.2909 18.7151 18C19.5635 17.7804 20.5265 17.3116 20.889 16.6199"/>',vault:'<path d="M21 19.2L21 4.8C21 3.47452 20.6046 3 19.5 3L4.5 3C3.39543 3 3 3.47452 3 4.8L3 19.2C3 20.5255 3.39543 21 4.5 21L19.5 21C20.6046 21 21 20.5255 21 19.2Z"/><path d="M14.9675 10.56C15.0601 11.1841 14.9535 11.8216 14.6629 12.3817C14.3722 12.9418 13.9124 13.396 13.3488 13.6797C12.7851 13.9634 12.1464 14.0621 11.5234 13.9619C10.9004 13.8616 10.3249 13.5675 9.87868 13.1213C9.43249 12.6751 9.13835 12.0996 9.0381 11.4766C8.93786 10.8536 9.0366 10.2149 9.3203 9.65123C9.60399 9.08759 10.0582 8.62776 10.6183 8.33713C11.1784 8.04651 11.8159 7.93989 12.4401 8.03245C13.0767 8.12687 13.6662 8.42355 14.1213 8.87868C14.5765 9.33381 14.8731 9.92326 14.9675 10.56Z"/><path d="M12 14L12 17"/><path d="M21 7L22.5 7"/><path d="M21 16L22.5 16"/>',"stack-horizontal":'<path d="M10 5H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm10 0h-2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2ZM2 2v20"/>',"stack-vertical":'<path d="M19 10V8a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2Zm0 10v-2a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2Zm3-18H2"/>',"stretch-horizontal":'<path d="M18 8V6c0-1.105-.767-2-1.714-2H7.714C6.768 4 6 4.895 6 6v2c0 1.105.768 2 1.714 2h8.572C17.233 10 18 9.105 18 8Zm0 10v-2c0-1.105-.767-2-1.714-2H7.714C6.768 14 6 14.895 6 16v2c0 1.105.768 2 1.714 2h8.572c.947 0 1.714-.895 1.714-2ZM2 2v20M22 2v20"/>',"stretch-vertical":'<path d="M16 18h2c1.105 0 2-.767 2-1.714V7.714C20 6.768 19.105 6 18 6h-2c-1.105 0-2 .768-2 1.714v8.572c0 .947.895 1.714 2 1.714ZM6 18h2c1.105 0 2-.767 2-1.714V7.714C10 6.768 9.105 6 8 6H6c-1.105 0-2 .768-2 1.714v8.572C4 17.233 4.895 18 6 18ZM22 2H2m20 20H2"/>',"distribute-space-horizontal":'<path d="M7 5H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm12 0h-2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2ZM3 2v20M21 2v20"/>',"distribute-space-vertical":'<path d="M19 7V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2Zm0 12v-2a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2Zm3-16H2m20 18H2"/>',"zoom-to-selection":'<path d="M2 6V4a2 2 0 0 1 2-2h2m12 0h2a2 2 0 0 1 2 2v2m0 12v2a2 2 0 0 1-2 2h-2M6 22H4a2 2 0 0 1-2-2v-2m9-2a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm7 2-3-3"/>',"create-group":'<path d="M2 6V4a2 2 0 0 1 2-2h2m12 0h2a2 2 0 0 1 2 2v2m0 12v2a2 2 0 0 1-2 2h-2M6 22H4a2 2 0 0 1-2-2v-2m9-12H6v5h5V6Zm7 7h-5v5h5v-5Z"/>',"snap-to-object":'<path d="M21 3H3m18 18H3"/><circle cx="3" cy="3" r="2"/><circle cx="3" cy="21" r="2"/><circle cx="21" cy="3" r="2"/><circle cx="21" cy="21" r="2"/><path d="M15.111 8H8.89a.889.889 0 0 0-.89.889v6.222c0 .491.398.889.889.889h6.222a.889.889 0 0 0 .889-.889V8.89a.889.889 0 0 0-.889-.89Z"/>',"line-horizontal":'<path d="M3 12h18"/>',"aspect-ratio":'<path d="M19 4H5c-1.105 0-2 .796-2 1.778v12.444C3 19.204 3.895 20 5 20h14c1.105 0 2-.796 2-1.778V5.778C21 4.796 20.105 4 19 4Z"/><path d="M14 8h3v2m-7 6H7v-2"/>',"rectangle-vertical-double":'<path d="M8 2H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Zm12 0h-4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z"/>'},ux={},hx={viewBox:"0 0 100 100"},dx={};function px(e,t){if(!dx.hasOwnProperty(e)){var n=t();if(!n)return null;n.classList.add("svg-icon",e),dx[e]=n}return dx[e].cloneNode(!0)}function fx(e){return e.startsWith("lucide-")?px(e,(function(){var t=e.substring(7);return ix.hasOwnProperty(t)?sx(ix[t]):null})):ux.hasOwnProperty(e)?px(e,(function(){var t=ox("svg",hx);return t.innerHTML=ux[e],t})):cx.hasOwnProperty(e)?px(e,(function(){var t=ox("svg",rx);return t.innerHTML=cx[e],t})):(lx.hasOwnProperty(e)&&(e=lx[e]),ix.hasOwnProperty(e)?px("lucide-"+e,(function(){return sx(ix[e])})):null)}function mx(e,t){var n=e.firstChild;if(!(n&&n.instanceOf(SVGSVGElement)&&n.classList.contains(t))){n&&e.removeChild(n);var i=fx(t);i&&e.appendChild(i)}}function vx(e,t){delete dx[e],ux[e]=t}function gx(e){delete dx[e],delete ux[e]}function yx(){return[].concat(Object.keys(ix).map((function(e){return"lucide-"+e}))).concat(Object.keys(ux)).concat(Object.keys(cx))}var bx=8,wx=5,kx=750,Cx=100,Mx=null,Ex=null;function Sx(e){e||(e=document);var t=e.body;t.on("mouseover","[aria-label]",Ax),t.on("mouseout","[aria-label]",Lx),t.addEventListener("mouseup",Bx)}var xx=null;function Tx(){xx&&(clearTimeout(xx),xx=null)}function Dx(e){return"true"===getComputedStyle(e).getPropertyValue("--no-tooltip").trim()}function Ax(e,t){xc(e,t)&&(Bc(e)||Dx(t)||Ix(t))}function Lx(e,t){if(xc(e,t)&&!Bc(e)){Bx();var n=e.relatedTarget;if(n&&n.matchParent){var i=n.matchParent("[aria-label]");if(i&&i.instanceOf(HTMLElement)){if(Dx(i))return;Ix(i)}}}}var Px=new WeakMap;function Ix(e){Tx();var t=e.getAttribute("aria-label")||"";Px.has(e)&&(t=Px.get(e)(e));var n="bottom";e.hasAttribute("data-tooltip-position")&&(n=e.getAttribute("data-tooltip-position"));var i=[];e.hasAttribute("data-tooltip-classes")&&(i=(e.getAttribute("data-tooltip-classes")||"").split(" "));var r=kx;e.hasAttribute("data-tooltip-delay")&&(r=parseInt(e.getAttribute("data-tooltip-delay")||""),isNaN(r)&&(r=kx)),Ox(e,t,{placement:n,classes:i,delay:r})}var Fx=0;function Ox(e,t,n){if(t){var i=(n=n||{}).placement,r=void 0===i?"bottom":i,o=n.classes,a=void 0===o?[]:o,s=n.gap,l=void 0===s?bx:s,c=n.horizontalParent,u=n.delay,h=void 0===u?0:u;if(h>0&&(Mx||Date.now()>Fx+Cx))return Tx(),n.delay=0,void(xx=window.setTimeout((function(){return Ox(e,t,n)}),h));if(e.isShown()){var d=e.doc,p=e.getBoundingClientRect(),f=p.top,m=p.left,v=p.width,g=p.height;if(c){var y=c.getBoundingClientRect();m=y.left,v=y.width}Mx&&Ex===e?Mx.setText(t):(Bx(),Mx=createDiv({cls:"tooltip",text:t}));var b=Mx.createDiv("tooltip-arrow"),w=0,k=0;"bottom"===r?(w=f+g+l,k=m+v/2):"right"===r?(w=f+g/2,k=m+v+l,a.push("mod-right")):"left"===r?(w=f+g/2,k=m-l,a.push("mod-left")):"top"===r&&(w=f-l-wx,k=m+v/2,a.push("mod-top")),Mx.addClasses(a),Mx.style.top="0px",Mx.style.left="0px",Mx.style.width="",Mx.style.height="",Mx.parentNode||d.body.appendChild(Mx);var C=Mx.getBoundingClientRect(),M=["bottom","top"].contains(r)?C.width/2:C.width,E="right"===r||"left"===r?C.height/2:C.height;"left"===r?k-=M:"top"===r&&(w-=E);var S=d.body.clientHeight,x=d.body.clientWidth;if(w+E>S&&(w=S-E-l),w=Math.max(w,l),"top"===r||"bottom"===r){if(k+M>x)k-=T=k+M+l-x,b.style.left="initial",b.style.right=M-T-l/2+"px";else if(k-l-M<0){var T;k+=T=-(k-l-M),b.style.right="initial",b.style.left=M-T-l/2+"px"}k=Math.max(k,l)}Mx.style.top=w+"px",Mx.style.left=k+"px",Mx.style.width=C.width+"px",Mx.style.height=C.height+"px",Ex=e}}}function Bx(){Tx(),Mx&&(Fx=Date.now(),Mx.detach(),Mx=null,Ex=null)}function Nx(e,t){var n=t||{},i=n.placement,r=n.classes,o=n.delay;i&&"bottom"!==i&&e.setAttribute("data-tooltip-position",i),r&&e.setAttribute("data-tooltip-classes",r.join(" ")),o&&e.setAttribute("data-tooltip-delay",String(o))}function Rx(e,t,n){e.setAttribute("aria-label",t),Nx(e,n),Ex===e&&Ox(e,t,n)}function Hx(e,t,n){e.setAttribute("aria-label",""),Px.set(e,t),Nx(e,n),Ex===e&&Ox(e,t(e),n)}var Vx={none:[],copy:["copy"],copyLink:["copy","link"],copyMove:["copy","move"],link:["link"],linkMove:["link","move"],move:["move"],all:["copy","link","move"],uninitialized:[]};function zx(e,t){t&&function(e,t){if("none"===t)return!0;var n=Vx[e.dataTransfer.effectAllowed];return!!n&&n.contains(t)}(e,t)&&(e.dataTransfer.dropEffect=t)}var qx=function(){function e(e){var t=this;this.ghostEl=null,this.actionEl=null,this.draggable=null,this.sourceEls=null,this.sourceClass="",this.hoverEl=null,this.hoverClass="",this.overlayEl=createDiv("workspace-drop-overlay"),this.shouldHideOverlay=!1,this.isDragOverHandled=!1,this.dragStart=null,this.onTouchEnd=function(e){0===e.touches.length&&t.onDragEnd()},this.app=e,window.addEventListener("dragstart",this.onDragStartGlobal.bind(this)),window.addEventListener("dragover",this.onDragOverFirst.bind(this),{capture:!0}),window.addEventListener("dragover",this.onDragOver.bind(this)),window.addEventListener("dragleave",this.onDragLeave.bind(this));var n=function(e){e.view===window?t.onDragEnd():setTimeout((function(){return t.onDragEnd()}))};window.addEventListener("dragend",n),window.addEventListener("drop",n)}return e.prototype.onDragLeave=function(e){var t;0===e.clientX&&0===e.clientY&&0===e.screenX&&0===e.screenY&&null===e.relatedTarget&&(null===(t=this.ghostEl)||void 0===t||t.detach(),this.updateHover(null,""))},e.prototype.onDragStartGlobal=function(e){if(Bx(),Zl.isIosApp&&(Ac(),navigator.vibrate(200)),!this.draggable){var t=window.getSelection();if(!(t.rangeCount>0)||t.getRangeAt(0).collapsed){var n=e.target;if("IMG"===n.nodeName){var i=n.src,r=this.app.vault.resolveFileUrl(i);r&&this.onDragStart(e,this.dragFile(e,r))}}}},e.prototype.onDragOverFirst=function(){var e=this;this.isDragOverHandled=!1,queueMicrotask((function(){e.isDragOverHandled||(e.setAction(null),e.updateHover(null,""))})),this.shouldHideOverlay=!0,setTimeout((function(){e.shouldHideOverlay&&e.hideOverlay()}))},e.prototype.onDragOver=function(e){this.isDragOverHandled=!0,Zl.isMobile&&(e.preventDefault(),"none"===e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="move"));var t=e.clientX,n=e.clientY;if(0!==t||0!==n){var i=this.ghostEl,r=this.dragStart;if(i){Zl.isMobile?(t-=i.offsetWidth/2,n-=i.offsetHeight+20):(t+=5,n+=5),i.style.left=t+"px",i.style.top=n+"px";var o=e.doc;i.parentNode!==o.body&&o.body.appendChild(i),i.show()}r&&!r.moved&&(Math.abs(r.evt.clientX-e.clientX)>5||Math.abs(r.evt.clientY-e.clientY)>5)&&(r.moved=!0)}},e.prototype.onDragEnd=function(){var e=this.ghostEl,t=this.dragStart;if(e&&(e.detach(),this.ghostEl=null),this.dragStart=null,this.draggable=null,this.updateSource(null,""),this.updateHover(null,""),document.body.removeClass("is-grabbing"),window.removeEventListener("touchend",this.onTouchEnd),this.removeOverlay(),t&&!t.moved){var n=t.evt;n.target.dispatchEvent(new MouseEvent("contextmenu",{button:0,buttons:0,ctrlKey:n.ctrlKey,altKey:n.altKey,metaKey:n.metaKey,shiftKey:n.shiftKey,screenX:n.screenX,screenY:n.screenY,bubbles:!0,cancelable:!0,clientX:n.clientX,clientY:n.clientY}))||navigator.vibrate(200)}},e.prototype.onDragStart=function(e,t){var n=e.dataTransfer;this.draggable=t,Zl.isMobile&&(this.dragStart={evt:e,moved:!1},window.addEventListener("touchend",this.onTouchEnd),gk(e.targetNode,"contextmenu")),document.body.addClass("is-grabbing"),n.effectAllowed="all";var i=this.ghostEl;i&&i.detach();var r=this.ghostEl=e.doc.body.createDiv("drag-ghost"),o=r.createDiv("drag-ghost-self");t.icon&&mx(o,t.icon),t.title&&o.createSpan({text:t.title}),this.actionEl=r.createDiv("drag-ghost-action"),Ux(e);var a=!0;if(n.items.length>0)for(var s=0,l=Array.from(n.items);s<l.length;s++){var c=l[s];if("string"!==c.kind||""!==n.getData(c.type)){a=!1;break}}a&&n.setData("text/plain",t.title||"-")},e.prototype.handleDrag=function(e,t){var n=this;e.draggable=!0,e.addEventListener("dragstart",(function(e){var i=t(e);i&&n.onDragStart(e,i)}))},e.prototype.dragFile=function(e,t,n){return Pk(e.dataTransfer,this.app.getObsidianUrl(t)),{source:n,type:"file",icon:"lucide-file",title:t.getShortName(),file:t}},e.prototype.dragFolder=function(e,t,n){return Lk(e.dataTransfer,t.name),{source:n,type:"folder",icon:"lucide-folder-open",title:t.name,file:t}},e.prototype.dragFiles=function(e,t,n){if(0===t.length)return null;for(var i,r=0,o=0,a=[],s=0,l=t;s<l.length;s++){var c=l[s];c instanceof ww?(r++,a.push(this.app.getObsidianUrl(c))):c instanceof kw&&o++}return o>0&&r>0?i="".concat(r," files and ").concat(o," folders"):o>0?i="".concat(o," folders"):r>0&&(i="".concat(r," files")),Pk(e.dataTransfer,a.join("\n")),{source:n,type:"files",icon:"lucide-files",title:i,files:t}},e.prototype.dragLink=function(e,t,n,i,r){var o=this.app.metadataCache.getFirstLinkpathDest(_S(t),n),a=t,s=t;return o&&(a=this.app.getObsidianUrl(o),s=o.getShortName()),Pk(e.dataTransfer,a),{source:r,type:"link",icon:"lucide-link",title:i||s,linktext:t,sourcePath:n,file:o}},e.prototype.handleDrop=function(e,t,n){var i=this,r=function(e){if((n||i.draggable)&&!e.defaultPrevented){var r=t(e,i.draggable,!0);if(r){e.preventDefault();var o=r.action,a=r.dropEffect,s=r.hoverEl,l=r.hoverClass;o&&i.setAction(o),a&&(e.dataTransfer.dropEffect=a),s&&l&&i.updateHover(s,l)}}};e.addEventListener("dragover",r),e.addEventListener("dragenter",r),e.addEventListener("drop",(function(e){(n||i.draggable)&&(e.defaultPrevented||t(e,i.draggable,!1)&&e.preventDefault())}))},e.prototype.setAction=function(e){var t=this.actionEl;t&&(e?(t.setText(e),t.show()):t.hide())},e.prototype.updateSource=function(e,t){if(this.sourceEls)for(var n=0,i=this.sourceEls;n<i.length;n++){i[n].removeClass(this.sourceClass)}if(this.sourceEls=e,this.sourceClass=t,e)for(var r=0,o=e;r<o.length;r++){o[r].addClass(t)}},e.prototype.updateHover=function(e,t){e!==this.hoverEl&&(this.hoverEl&&this.hoverEl.removeClass(this.hoverClass),this.hoverEl=e,this.hoverClass=t,e&&e.addClass(t))},e.prototype.showOverlay=function(e,t){var n=this.overlayEl;n.parentNode!==e.body&&e.body.appendChild(n),n.show(),n.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)"),n.style.width=t.width+"px",n.style.height=t.height+"px",this.shouldHideOverlay=!1},e.prototype.hideOverlay=function(){this.overlayEl.hide()},e.prototype.removeOverlay=function(){this.overlayEl.detach()},e}();function Ux(e){var t=new Image;t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",e.doc.body.append(t),e.dataTransfer.setDragImage(t,0,0),setTimeout((function(){return t.detach()}),0)}var _x=Object.entries,Wx=Object.setPrototypeOf,jx=Object.isFrozen,Gx=Object.getPrototypeOf,Kx=Object.getOwnPropertyDescriptor,Yx=Object.freeze,Zx=Object.seal,Xx=Object.create,$x="undefined"!=typeof Reflect&&Reflect,Qx=$x.apply,Jx=$x.construct;Qx||(Qx=function(e,t,n){return e.apply(t,n)}),Yx||(Yx=function(e){return e}),Zx||(Zx=function(e){return e}),Jx||(Jx=function(e,t){return new(e.bind.apply(e,w([void 0],t,!1)))});var eT,tT=dT(Array.prototype.forEach),nT=dT(Array.prototype.pop),iT=dT(Array.prototype.push),rT=dT(String.prototype.toLowerCase),oT=dT(String.prototype.toString),aT=dT(String.prototype.match),sT=dT(String.prototype.replace),lT=dT(String.prototype.indexOf),cT=dT(String.prototype.trim),uT=dT(RegExp.prototype.test),hT=(eT=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jx(eT,t)});function dT(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Qx(e,t,i)}}function pT(e,t,n){n=n||rT,Wx&&Wx(e,null);for(var i=t.length;i--;){var r=t[i];if("string"==typeof r){var o=n(r);o!==r&&(jx(t)||(t[i]=o),r=o)}e[r]=!0}return e}function fT(e){for(var t=Xx(null),n=0,i=_x(e);n<i.length;n++){var r=i[n],o=r[0],a=r[1];t[o]=a}return t}function mT(e,t){for(;null!==e;){var n=Kx(e,t);if(n){if(n.get)return dT(n.get);if("function"==typeof n.value)return dT(n.value)}e=Gx(e)}return function(e){return console.warn("fallback value for",e),null}}var vT=Yx(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),gT=Yx(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),yT=Yx(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bT=Yx(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wT=Yx(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),kT=Yx(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),CT=Yx(["#text"]),MT=Yx(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ET=Yx(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ST=Yx(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xT=Yx(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),TT=Zx(/\{\{[\w\W]*|[\w\W]*\}\}/gm),DT=Zx(/<%[\w\W]*|[\w\W]*%>/gm),AT=Zx(/\${[\w\W]*}/gm),LT=Zx(/^data-[\-\w.\u00B7-\uFFFF]/),PT=Zx(/^aria-[\-\w]+$/),IT=Zx(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),FT=Zx(/^(?:\w+script|data):/i),OT=Zx(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),BT=Zx(/^html$/i),NT=Object.freeze({__proto__:null,MUSTACHE_EXPR:TT,ERB_EXPR:DT,TMPLIT_EXPR:AT,DATA_ATTR:LT,ARIA_ATTR:PT,IS_ALLOWED_URI:IT,IS_SCRIPT_OR_DATA:FT,ATTR_WHITESPACE:OT,DOCTYPE_NAME:BT}),RT=function(){return"undefined"==typeof window?null:window};var HT=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RT(),n=function(t){return e(t)};if(n.version="3.0.1",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var i=t.document,r=t.document,o=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,l=t.Element,c=t.NodeFilter,u=t.NamedNodeMap,h=void 0===u?t.NamedNodeMap||t.MozNamedAttrMap:u,d=t.HTMLFormElement,p=t.DOMParser,f=t.trustedTypes,m=l.prototype,v=mT(m,"cloneNode"),g=mT(m,"nextSibling"),y=mT(m,"childNodes"),b=mT(m,"parentNode");if("function"==typeof a){var k=r.createElement("template");k.content&&k.content.ownerDocument&&(r=k.content.ownerDocument)}var C=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(f,i),M=C?C.createHTML(""):"",E=r.implementation,S=r.createNodeIterator,x=r.createDocumentFragment,T=r.getElementsByTagName,D=i.importNode,A={};n.isSupported="function"==typeof _x&&"function"==typeof b&&E&&void 0!==E.createHTMLDocument;var L,P,I=NT.MUSTACHE_EXPR,F=NT.ERB_EXPR,O=NT.TMPLIT_EXPR,B=NT.DATA_ATTR,N=NT.ARIA_ATTR,R=NT.IS_SCRIPT_OR_DATA,H=NT.ATTR_WHITESPACE,V=NT.IS_ALLOWED_URI,z=null,q=pT({},w(w(w(w(w([],vT,!0),gT,!0),yT,!0),wT,!0),CT,!0)),U=null,_=pT({},w(w(w(w([],MT,!0),ET,!0),ST,!0),xT,!0)),W=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,G=null,K=!0,Y=!0,Z=!1,X=!0,$=!1,Q=!1,J=!1,ee=!1,te=!1,ne=!1,ie=!1,re=!0,oe=!1,ae=!0,se=!1,le={},ce=null,ue=pT({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),he=null,de=pT({},["audio","video","img","source","image","track"]),pe=null,fe=pT({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",ve="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml",ye=ge,be=!1,we=null,ke=pT({},[me,ve,ge],oT),Ce=["application/xhtml+xml","text/html"],Me=null,Ee=r.createElement("form"),Se=function(e){return e instanceof RegExp||e instanceof Function},xe=function(e){Me&&Me===e||(e&&"object"==typeof e||(e={}),e=fT(e),L=L=-1===Ce.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,P="application/xhtml+xml"===L?oT:rT,z="ALLOWED_TAGS"in e?pT({},e.ALLOWED_TAGS,P):q,U="ALLOWED_ATTR"in e?pT({},e.ALLOWED_ATTR,P):_,we="ALLOWED_NAMESPACES"in e?pT({},e.ALLOWED_NAMESPACES,oT):ke,pe="ADD_URI_SAFE_ATTR"in e?pT(fT(fe),e.ADD_URI_SAFE_ATTR,P):fe,he="ADD_DATA_URI_TAGS"in e?pT(fT(de),e.ADD_DATA_URI_TAGS,P):de,ce="FORBID_CONTENTS"in e?pT({},e.FORBID_CONTENTS,P):ue,j="FORBID_TAGS"in e?pT({},e.FORBID_TAGS,P):{},G="FORBID_ATTR"in e?pT({},e.FORBID_ATTR,P):{},le="USE_PROFILES"in e&&e.USE_PROFILES,K=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,Z=e.ALLOW_UNKNOWN_PROTOCOLS||!1,X=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,$=e.SAFE_FOR_TEMPLATES||!1,Q=e.WHOLE_DOCUMENT||!1,te=e.RETURN_DOM||!1,ne=e.RETURN_DOM_FRAGMENT||!1,ie=e.RETURN_TRUSTED_TYPE||!1,ee=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,oe=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,V=e.ALLOWED_URI_REGEXP||V,ye=e.NAMESPACE||ge,W=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Se(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Se(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$&&(Y=!1),ne&&(te=!0),le&&(z=pT({},w([],CT,!0)),U=[],!0===le.html&&(pT(z,vT),pT(U,MT)),!0===le.svg&&(pT(z,gT),pT(U,ET),pT(U,xT)),!0===le.svgFilters&&(pT(z,yT),pT(U,ET),pT(U,xT)),!0===le.mathMl&&(pT(z,wT),pT(U,ST),pT(U,xT))),e.ADD_TAGS&&(z===q&&(z=fT(z)),pT(z,e.ADD_TAGS,P)),e.ADD_ATTR&&(U===_&&(U=fT(U)),pT(U,e.ADD_ATTR,P)),e.ADD_URI_SAFE_ATTR&&pT(pe,e.ADD_URI_SAFE_ATTR,P),e.FORBID_CONTENTS&&(ce===ue&&(ce=fT(ce)),pT(ce,e.FORBID_CONTENTS,P)),ae&&(z["#text"]=!0),Q&&pT(z,["html","head","body"]),z.table&&(pT(z,["tbody"]),delete j.tbody),Yx&&Yx(e),Me=e)},Te=pT({},["mi","mo","mn","ms","mtext"]),De=pT({},["foreignobject","desc","title","annotation-xml"]),Ae=pT({},["title","style","font","a","script"]),Le=pT({},gT);pT(Le,yT),pT(Le,bT);var Pe=pT({},wT);pT(Pe,kT);var Ie=function(e){iT(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Fe=function(e,t){try{iT(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){iT(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!U[e])if(te||ne)try{Ie(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Oe=function(e){var t,n;if(ee)e="<remove></remove>"+e;else{var i=aT(e,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===L&&ye===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=C?C.createHTML(e):e;if(ye===ge)try{t=(new p).parseFromString(o,L)}catch(e){}if(!t||!t.documentElement){t=E.createDocument(ye,"template",null);try{t.documentElement.innerHTML=be?M:o}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),ye===ge?T.call(t,Q?"html":"body")[0]:Q?t.documentElement:a},Be=function(e){return S.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Ne=function(e){return"object"==typeof s?e instanceof s:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Re=function(e,t,i){A[e]&&tT(A[e],(function(e){e.call(n,t,i,Me)}))},He=function(e){var t,i;if(Re("beforeSanitizeElements",e,null),(i=e)instanceof d&&("string"!=typeof i.nodeName||"string"!=typeof i.textContent||"function"!=typeof i.removeChild||!(i.attributes instanceof h)||"function"!=typeof i.removeAttribute||"function"!=typeof i.setAttribute||"string"!=typeof i.namespaceURI||"function"!=typeof i.insertBefore||"function"!=typeof i.hasChildNodes))return Ie(e),!0;var r=P(e.nodeName);if(Re("uponSanitizeElement",e,{tagName:r,allowedTags:z}),e.hasChildNodes()&&!Ne(e.firstElementChild)&&(!Ne(e.content)||!Ne(e.content.firstElementChild))&&uT(/<[/\w]/g,e.innerHTML)&&uT(/<[/\w]/g,e.textContent))return Ie(e),!0;if(!z[r]||j[r]){if(!j[r]&&ze(r)){if(W.tagNameCheck instanceof RegExp&&uT(W.tagNameCheck,r))return!1;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(r))return!1}if(ae&&!ce[r]){var o=b(e)||e.parentNode,a=y(e)||e.childNodes;if(a&&o)for(var s=a.length-1;s>=0;--s)o.insertBefore(v(a[s],!0),g(e))}return Ie(e),!0}return e instanceof l&&!function(e){var t=b(e);t&&t.tagName||(t={namespaceURI:ye,tagName:"template"});var n=rT(e.tagName),i=rT(t.tagName);return!!we[e.namespaceURI]&&(e.namespaceURI===ve?t.namespaceURI===ge?"svg"===n:t.namespaceURI===me?"svg"===n&&("annotation-xml"===i||Te[i]):Boolean(Le[n]):e.namespaceURI===me?t.namespaceURI===ge?"math"===n:t.namespaceURI===ve?"math"===n&&De[i]:Boolean(Pe[n]):e.namespaceURI===ge?!(t.namespaceURI===ve&&!De[i])&&!(t.namespaceURI===me&&!Te[i])&&!Pe[n]&&(Ae[n]||!Le[n]):!("application/xhtml+xml"!==L||!we[e.namespaceURI]))}(e)?(Ie(e),!0):"noscript"!==r&&"noembed"!==r||!uT(/<\/no(script|embed)/i,e.innerHTML)?($&&3===e.nodeType&&(t=e.textContent,t=sT(t,I," "),t=sT(t,F," "),t=sT(t,O," "),e.textContent!==t&&(iT(n.removed,{element:e.cloneNode()}),e.textContent=t)),Re("afterSanitizeElements",e,null),!1):(Ie(e),!0)},Ve=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in Ee))return!1;if(Y&&!G[t]&&uT(B,t));else if(K&&uT(N,t));else if(!U[t]||G[t]){if(!(ze(e)&&(W.tagNameCheck instanceof RegExp&&uT(W.tagNameCheck,e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(e))&&(W.attributeNameCheck instanceof RegExp&&uT(W.attributeNameCheck,t)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(t))||"is"===t&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&uT(W.tagNameCheck,n)||W.tagNameCheck instanceof Function&&W.tagNameCheck(n))))return!1}else if(pe[t]);else if(uT(V,sT(n,H,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==lT(n,"data:")||!he[e]){if(Z&&!uT(R,sT(n,H,"")));else if(n)return!1}else;return!0},ze=function(e){return e.indexOf("-")>0},qe=function(e){var t,i,r,o;Re("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};for(o=a.length;o--;){var l=(t=a[o]).name,c=t.namespaceURI;if(i="value"===l?t.value:cT(t.value),r=P(l),s.attrName=r,s.attrValue=i,s.keepAttr=!0,s.forceKeepAttr=void 0,Re("uponSanitizeAttribute",e,s),i=s.attrValue,!s.forceKeepAttr&&(Fe(l,e),s.keepAttr))if(X||!uT(/\/>/i,i)){$&&(i=sT(i,I," "),i=sT(i,F," "),i=sT(i,O," "));var u=P(e.nodeName);if(Ve(u,r,i)){if(!oe||"id"!==r&&"name"!==r||(Fe(l,e),i="user-content-"+i),C&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(c);else switch(f.getAttributeType(u,r)){case"TrustedHTML":i=C.createHTML(i);break;case"TrustedScriptURL":i=C.createScriptURL(i)}try{c?e.setAttributeNS(c,l,i):e.setAttribute(l,i),nT(n.removed)}catch(e){}}}else Fe(l,e)}Re("afterSanitizeAttributes",e,null)}},Ue=function e(t){var n,i=Be(t);for(Re("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)Re("uponSanitizeShadowNode",n,null),He(n)||(n.content instanceof o&&e(n.content),qe(n));Re("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){var t,r,a,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((be=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Ne(e)){if("function"!=typeof e.toString)throw hT("toString is not a function");if("string"!=typeof(e=e.toString()))throw hT("dirty is not a string, aborting")}if(!n.isSupported)return e;if(J||xe(c),n.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){var u=P(e.nodeName);if(!z[u]||j[u])throw hT("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof s)1===(r=(t=Oe("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?t=r:t.appendChild(r);else{if(!te&&!$&&!Q&&-1===e.indexOf("<"))return C&&ie?C.createHTML(e):e;if(!(t=Oe(e)))return te?null:ie?M:""}t&&ee&&Ie(t.firstChild);for(var h=Be(se?e:t);a=h.nextNode();)He(a)||(a.content instanceof o&&Ue(a.content),qe(a));if(se)return e;if(te){if(ne)for(l=x.call(t.ownerDocument);t.firstChild;)l.appendChild(t.firstChild);else l=t;return(U.shadowroot||U.shadowrootmod)&&(l=D.call(i,l,!0)),l}var d=Q?t.outerHTML:t.innerHTML;return Q&&z["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&uT(BT,t.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+d),$&&(d=sT(d,I," "),d=sT(d,F," "),d=sT(d,O," ")),C&&ie?C.createHTML(d):d},n.setConfig=function(e){xe(e),J=!0},n.clearConfig=function(){Me=null,J=!1},n.isValidAttribute=function(e,t,n){Me||xe({});var i=P(e),r=P(t);return Ve(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&(A[e]=A[e]||[],iT(A[e],t))},n.removeHook=function(e){if(A[e])return nT(A[e])},n.removeHooks=function(e){A[e]&&(A[e]=[])},n.removeAllHooks=function(){A={}},n}();function VT(e,t,n,i){for(var r=e.getAttribute(t),o=[],a=0,s=r.split(n);a<s.length;a++){var l=s[a];l=l.trim().toLowerCase(),i.hasOwnProperty(l)&&i[l]&&o.push(l)}var c=o.join(n);c!==r&&e.setAttribute(t,c)}window.DOMPurify=HT,HT.addHook("afterSanitizeAttributes",(function(e){e.instanceOf(HTMLAnchorElement)&&(e.setAttribute("target","_blank"),e.hasAttribute("rel")||e.setAttribute("rel","noopener nofollow"))}));var zT={ALLOW_UNKNOWN_PROTOCOLS:!0,RETURN_DOM_FRAGMENT:!0,FORBID_TAGS:["style"],ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","allowfullscreen","allow","data-tooltip-position"]};function qT(e){return document.importNode(HT.sanitize(e,zT),!0)}var UT=["bmp","png","jpg","jpeg","gif","svg","webp","avif"],_T=["mp3","wav","m4a","3gp","flac","ogg","oga","opus"],WT=["mp4","webm","ogv","mov","mkv"],jT=["pdf"],GT=["md"],KT=["canvas"],YT=["json","css","js"],ZT=GT.concat(KT),XT=[].concat(UT,_T,WT,jT,GT,KT);function $T(e){return!ZT.contains(Qc(e))}function QT(e,t,n){var i=e.fileManager,r=e.vault;if("file"===t.type)return[i.generateMarkdownLink(t.file,n)];if("files"===t.type){for(var o=[],a=0,s=t.files;a<s.length;a++){(d=s[a])instanceof ww&&o.push(i.generateMarkdownLink(d,n))}return o}if("link"===t.type){if(t.file){var l=WS(t.linktext).subpath;return[i.generateMarkdownLink(t.file,n,l)]}return[t.linktext]}if("heading"===t.type){l=QS(t.heading.heading);return[i.generateMarkdownLink(t.file,n,"#"+l)]}if("bookmarks"===t.type){o=[];for(var c=0,u=t.items;c<u.length;c++){var h=u[c].item;if("file"===h.type){var d,p=h.path,f=(l=h.subpath,h.title);(d=r.getAbstractFileByPath(p))instanceof ww&&o.push(i.generateMarkdownLink(d,n,l,f))}}return o}return[]}var JT=function(){function e(e){this.app=e.app,this.info=e}return e.prototype.getPath=function(){var e;return(null===(e=this.info.file)||void 0===e?void 0:e.path)||""},e.prototype.handlePaste=function(e){if(e.defaultPrevented||this.app.workspace.trigger("editor-paste",e,this.info.editor,this.info),e.defaultPrevented)return!0;var t=this.handleDataTransfer(e.clipboardData);if(t)return this.info.editor.replaceSelection(t,"paste"),e.preventDefault(),!0;e.clipboardData.getData("obsidian/properties")&&this.info instanceof LY&&this.info.handlePaste(e);var n=Fk(e.clipboardData,"clipboard",!0);return n.length>0&&(e.preventDefault(),this.insertFiles(n)),!1},e.prototype.handleDragOver=function(e){var t=this.app.dragManager.draggable;if(t){if(Ul?e.shiftKey:e.altKey)return;if("file"===t.type)zx(e,"link"),this.app.dragManager.setAction(Qf.interface.dragAndDrop.insertLinkHere());else if("files"===t.type)zx(e,"link"),this.app.dragManager.setAction(Qf.interface.dragAndDrop.insertLinksHere());else if("link"===t.type)zx(e,"link"),this.app.dragManager.setAction(Qf.interface.dragAndDrop.insertLinkHere());else if("heading"===t.type)zx(e,"link"),this.app.dragManager.setAction(Qf.interface.dragAndDrop.insertLinkHere());else if("bookmarks"===t.type){t.items.filter((function(e){return"file"===e.item.type})).length>0&&(zx(e,"link"),this.app.dragManager.setAction(Qf.interface.dragAndDrop.insertLinkHere()))}}else e.ctrlKey?zx(e,"link"):zx(e,"copy")},e.prototype.handleDrop=function(e){var t=this.app,n=this.info,i=null,r=t.dragManager.draggable;if(r){if(n instanceof LY&&(Ul?e.shiftKey:e.altKey))return e.preventDefault(),n.handleDrop(e,r,!1),!0;i=QT(this.app,r,this.getPath()).join("\n")}else{if(e.defaultPrevented||this.app.workspace.trigger("editor-drop",e,this.info.editor,this.info),e.defaultPrevented)return!0;e.shiftKey||(i=this.handleDataTransfer(e.dataTransfer)),i||(i=this.handleDropIntoEditor(e))}var o=this.info.editor.activeCM;return o.dispatch({selection:Ee.single(o.posAtCoords({x:e.clientX,y:e.clientY}))}),!!String.isString(i)&&(o.dispatch(o.state.replaceSelection(i)),o.focus(),e.preventDefault(),!0)},e.prototype.handleDropIntoEditor=function(e){if(Ul?e.altKey:e.ctrlKey){for(var t=[],n=0,i=Fk(e.dataTransfer,"drop",!1);n<i.length;n++){var r=i[n].filepath;if(r){var o=this.app.vault.resolveFilePath(r);if(o)t.push(this.app.fileManager.generateMarkdownLink(o,this.getPath()));else{var a=Kc(nu(r)),s=Qc(a),l="md"===s?Xc(a):a,c=Jk(r);c=c.startsWith("/")?"file://"+c:"file:///"+c;var u="[".concat(l,"](").concat(c,")");UT.contains(s)&&(u="!"+u),t.push(u)}}}return 0===t.length?null:t.join("\n")}var h=Fk(e.dataTransfer,"drop",!0);return h.length>0&&e.preventDefault(),this.insertFiles(h),null},e.prototype.handleDataTransfer=function(e){var t=this,n=e.getData("text/html");if(n){if(!this.app.vault.getConfig("autoConvertHtml"))return null;var i=qT(n),r=createEl("div");if(r.appendChild(i),e.files.length>0&&/^<img [^>]+>$/.test(r.innerHTML.trim()))return null;for(var o=[],a=0,s=i.findAll("img, audio, video");a<s.length;a++){var l=s[a];if(l.instanceOf(HTMLImageElement)||l.instanceOf(HTMLMediaElement)){if(Zl.isDesktopApp&&l.src.startsWith(Zl.resourcePathPrefix)){l.src="file:///"+l.src.substring(Zl.resourcePathPrefix.length);var c=this.app.vault.resolveFileUrl(l.src);c instanceof ww&&(l.src=this.app.metadataCache.fileToLinktext(c,this.getPath(),!0))}l.src.startsWith("data:")&&l.src.length>1e3&&(o.push(l.src),l.detach())}}return g(t,void 0,void 0,(function(){var e,t,n,i,r,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:for(n in t=[],e=o)t.push(n);i=0,d.label=1;case 1:if(!(i<t.length))return[3,7];if(!((n=t[i])in e))return[3,6];r=n,d.label=2;case 2:return d.trys.push([2,5,,6]),a=r.match(/^data:([\w/\-.]+);base64,(.*)/),s=a[1],c="image/jpeg"===s,(l="image/png"===s)||c?(u=pf(a[2]),[4,this.saveAttachment("Pasted image",l?"png":"jpg",u,!0)]):[3,4];case 3:d.sent(),d.label=4;case 4:return[3,6];case 5:return h=d.sent(),console.error(h),[3,6];case 6:return i++,[3,1];case 7:return[2]}}))})),rw(r.innerHTML.trim())}var u=e.getData("text/uri-list");if(u){var h=e.getData("text/plain")||"";if(!h){var d=Fk(e,"drop",!1);if(d&&d.length>0){var p=d[0].extension.toLowerCase();if("webloc"===p||"url"===p)return d[0].name}return u}if(u.toLowerCase()!==h.toLowerCase()&&decodeURIComponent(u.toLowerCase())!==h.toLowerCase()){var f=Qc(Kc(u)),m="[".concat(h,"](").concat(u,")");return UT.contains(f)&&(m="!"+m),m}}return null},e.prototype.insertFiles=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:t=0,u.label=1;case 1:return t<e.length?(n=e[t],i=n.name,r=n.extension,o=n.filepath,a=n.data,s=t<e.length-1,o&&(l=this.app.vault.resolveFilePath(o))?(this.insertAttachmentEmbed(l,s),[3,4]):[4,a]):[3,5];case 2:return(c=u.sent())?[4,this.saveAttachment(i,r,c,s)]:[3,4];case 3:u.sent(),u.label=4;case 4:return t++,[3,1];case 5:return[2]}}))}))},e.prototype.saveAttachment=function(e,t,n,i){return g(this,void 0,void 0,(function(){var r;return y(this,(function(o){switch(o.label){case 0:return"Pasted image"===e&&(e+=" "+window.moment().format("YYYYMMDDHHmmss")),[4,this.app.saveAttachment(e,t,n)];case 1:return(r=o.sent())&&this.insertAttachmentEmbed(r,i),[2]}}))}))},e.prototype.insertAttachmentEmbed=function(e,t){var n=this.app.fileManager.generateMarkdownLink(e,this.getPath());t&&(n+="\n\n"),this.info.editor.replaceSelection(n)},e}(),eD=Yn.line({attributes:{class:"cm-active"}}),tD=Xi.fromClass(function(){function e(e){this.decorations=this.getDeco(e)}return e.prototype.update=function(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){for(var t=-1,n=[],i=0,r=e.state.selection.ranges;i<r.length;i++){var o=r[i],a=e.lineBlockAt(o.head);a.from>t&&(n.push(eD.range(a.from)),t=a.from)}return Yn.set(n)},e}(),{decorations:function(e){return e.decorations}}),nD=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.elementClass="cm-active",t}return f(t,e),t}(Fs)),iD=Os.compute(["selection"],(function(e){for(var t=[],n=-1,i=0,r=e.selection.ranges;i<r.length;i++){var o=r[i],a=e.doc.lineAt(o.head).from;a>n&&(n=a,t.push(nD.range(a)))}return wt.of(t)})),rD={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},oD=nt.define({map:function(e,t){var n=t.mapPos(e,-1,fe.TrackAfter);return null==n?void 0:n}}),aD=nt.define({map:function(e,t){return t.mapPos(e)}}),sD=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(vt));sD.startSide=1,sD.endSide=-1;var lD=Fe.define({create:function(){return wt.empty},update:function(e,t){if(t.selection){var n=t.state.doc.lineAt(t.selection.main.head).from,i=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(i,-1)&&(e=wt.empty)}e=e.map(t.changes);for(var r=function(t){t.is(oD)?e=e.update({add:[sD.range(t.value,t.value+1)]}):t.is(aD)&&(e=e.update({filter:function(e){return e!=t.value}}))},o=0,a=t.effects;o<a.length;o++){r(a[o])}return e}});var cD="()[]{}<>";function uD(e){for(var t=0;t<8;t+=2)if(cD.charCodeAt(t)==e)return cD.charAt(t+1);return he(e<128?e:e+1)}function hD(e,t){return e.languageDataAt("closeBrackets",t)[0]||rD}var dD="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),pD=Xo.inputHandler.of((function(e,t,n,i){if((dD?e.composing:e.compositionStarted)||e.state.readOnly)return!1;var r=e.state.selection.main;if(i.length>2||2==i.length&&1==de(ue(i,0))||t!=r.from||n!=r.to)return!1;var o=function(e,t){for(var n=hD(e,e.selection.main.head),i=n.brackets||rD.brackets,r=0,o=i;r<o.length;r++){var a=o[r],s=uD(ue(a,0));if(t==a)return s==a?kD(e,a,i.indexOf(a+a+a)>-1):yD(e,a,s,n.before||rD.before);if(t==s&&mD(e,e.selection.main.from))return bD(e,a,s)}return null}(e.state,i);return!!o&&(e.dispatch(o),!0)})),fD=[{key:"Backspace",run:function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=hD(t,t.selection.main.head).brackets||rD.brackets,r=null,o=t.changeByRange((function(e){if(e.empty)for(var n=function(e,t){var n=e.sliceString(t-2,t);return de(ue(n,0))==n.length?n:n.slice(1)}(t.doc,e.head),o=0,a=i;o<a.length;o++){var s=a[o];if(s==n&&vD(t.doc,e.head)==uD(ue(s,0)))return{changes:{from:e.head-s.length,to:e.head+s.length},range:Ee.cursor(e.head-s.length),userEvent:"delete.backward"}}return{range:r=e}}));return r||n(t.update(o,{scrollIntoView:!0})),!r}}];function mD(e,t){var n=!1;return e.field(lD).between(0,e.doc.length,(function(e){e==t&&(n=!0)})),n}function vD(e,t){var n=e.sliceString(t,t+2);return n.slice(0,de(ue(n,0)))}function gD(e,t){var n=e.doc.lineAt(t.head),i=e.doc.lineAt(t.anchor);return n.number!==i.number}function yD(e,t,n,i){var r=null,o=e.changeByRange((function(o){if(!o.empty)return gD(e,o)?{changes:[{insert:t+n,from:o.from,to:o.to}],effects:oD.of(o.from+t.length),range:Ee.range(o.anchor+t.length,o.anchor+t.length)}:{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:oD.of(o.to+t.length),range:Ee.range(o.anchor+t.length,o.head+t.length)};var a=vD(e.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:t+n,from:o.head},effects:oD.of(o.head+t.length),range:Ee.cursor(o.head+t.length)}:{range:r=o}}));return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function bD(e,t,n){var i=null,r=e.selection.ranges.map((function(t){return t.empty&&vD(e.doc,t.head)==n?Ee.cursor(t.head+n.length):i=t}));return i?null:e.update({selection:Ee.create(r,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((function(e){var t=e.from;return aD.of(t)}))})}var wD=["%","`"];function kD(e,t,n){var i=null,r=e.changeByRange((function(r){if(!r.empty){var o=t,a=t;if(n&&r.from>=2&&e.doc.sliceString(r.from-2,r.from)===t+t)"\n"!==e.doc.sliceString(r.from,r.from+1)&&(o=t+"\n"),"\n"!==e.doc.sliceString(r.to-1,r.to)&&(a="\n"+t);else if(!wD.contains(t)&&gD(e,r))return{changes:[{insert:o+a,from:r.from,to:r.to}],effects:oD.of(r.from+o.length),range:Ee.range(r.from+o.length,r.from+o.length)};return{changes:[{insert:o,from:r.from},{insert:a,from:r.to}],effects:oD.of(r.to+o.length),range:Ee.range(r.anchor+o.length,r.head+o.length)}}var s=r.head,l=vD(e.doc,s);if(l==t){if(CD(e,s))return{changes:{insert:t+t,from:s},effects:oD.of(s+t.length),range:Ee.cursor(s+t.length)};if(mD(e,s)){var c=n&&e.sliceDoc(s,s+3*t.length)==t+t+t;return{range:Ee.cursor(s+t.length*(c?3:1)),effects:aD.of(s)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&CD(e,s-2*t.length))return{changes:{insert:t+"\n"+t+t+t,from:s},effects:oD.of(s+t.length),range:Ee.cursor(s+t.length)};if(e.charCategorizer(s)(l)==ht.Space){var u=e.sliceDoc(s-1,s);if(u!=t&&e.charCategorizer(s)(u)==ht.Space)return{changes:{insert:t+t,from:s},effects:oD.of(s+t.length),range:Ee.cursor(s+t.length)}}}return{range:i=r}}));return i?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function CD(e,t){var n=Kh(e).resolveInner(t+1);return n.parent&&n.from==t}var MD=nt.define(),ED=Xo.inputHandler.of((function(e,t,n,i){if("-"!==i)return!1;var r=e.state.selection.main;if(t!=r.from||n!=r.to)return!1;var o=e.state.doc.lineAt(t);if(o.from>0)return!1;if(/^--$/.test(o.text)){return e.dispatch({changes:[{insert:"-\n\n---\n",from:o.to}],selection:{anchor:t+2},effects:[MD.of()],userEvent:"input.type"}),!0}return!1})),SD=Te.define({combine:function(e){return mt(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(e,t){return Math.min(e,t)},drawRangeCursor:function(e,t){return e||t}})}});function xD(e){return e.startState.facet(SD)!=e.startState.facet(SD)}var TD=ya({above:!0,markers:function(e){for(var t=e.state,n=t.facet(SD),i=[],r=0,o=t.selection.ranges;r<o.length;r++){var a=o[r],s=a==t.selection.main;if(a.empty?!s:n.drawRangeCursor)for(var l=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=a.empty?a:Ee.cursor(a.head,a.head>a.anchor?-1:1),u=0,h=da.forRange(e,l,c);u<h.length;u++){var d=h[u];i.push(d)}}return i},update:function(e,t){e.transactions.some((function(e){return e.scrollIntoView}))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");var n=xD(e);return n&&DD(e.state,t),e.docChanged||e.selectionSet||n},mount:function(e,t){DD(t.state,e)},class:"cm-cursorLayer"});function DD(e,t){t.style.animationDuration=e.facet(SD).cursorBlinkRate+"ms"}var AD=ya({above:!1,markers:function(e){return e.state.selection.ranges.filter((function(t){return t!==e.state.selection.main})).map((function(t){return t.empty?[]:da.forRange(e,"cm-selectionBackground",t)})).reduce((function(e,t){return e.concat(t)}),[])},update:function(e,t){return e.docChanged||e.selectionSet||e.viewportChanged||xD(e)},class:"cm-selectionLayer"});function LD(e,t){e.toggleClass("is-collapsed",t);var n=e.find(".collapse-icon");n&&n.toggleClass("is-collapsed",t)}function PD(e,t,n){var i=null;return e.between(t,n,(function(e,t){(!i||i.from>e)&&(i={from:e,to:t})})),i}var ID=function(e){function t(t){var n=e.call(this)||this;return n.folded=t,n}return f(t,e),t.prototype.eq=function(e){return e.folded==this.folded},t.prototype.toDOM=function(e){var t=createDiv("cm-fold-indicator");t.appendText("â€‹");var n=t.createDiv("collapse-indicator collapse-icon");return LD(t,this.folded),mx(n,"right-triangle"),t.addEventListener("mousedown",(function(e){e.preventDefault()})),t.addEventListener("click",(function(n){var i=e.posAtDOM(t),r=e.state.doc.lineAt(i),o=PD(Rd(e.state),r.from,r.to);if(o)e.dispatch({effects:Od.of(o)});else{var a=Pd(e.state,r.from,r.to);a&&e.dispatch({effects:Fd.of(a)})}})),t},t}(Gn),FD=Yn.widget({widget:new ID(!0)}),OD=Yn.widget({widget:new ID(!1)}),BD=function(){function e(e){this.decorations=Yn.none,this.wasComposing=!1,this.buildDeco(e)}return e.prototype.update=function(e){if(e.view.composing)return this.decorations=this.decorations.map(e.changes),void(this.wasComposing=!0);(e.docChanged||e.viewportChanged||e.startState.facet(ad)!==e.state.facet(ad)||Rd(e.startState)!==Rd(e.state)||this.wasComposing)&&(this.wasComposing=!1,this.buildDeco(e.view))},e.prototype.buildDeco=function(e){for(var t=new kt,n=Rd(e.state),i=0,r=e.viewportLineBlocks;i<r.length;i++){var o=r[i],a=null;if(PD(n,o.from,o.to)?a=FD:Pd(e.state,o.from,o.to)&&(a=OD),a){var s=e.state.doc.sliceString(o.from,o.to),l=o.from+s.match(/^\s*/)[0].length;t.add(l,l,a)}}this.decorations=t.finish()},e}(),ND=ft.transactionFilter.of((function(e){if(e.docChanged&&cm(e)){var t=Rd(e.startState).map(e.changes),n=[];return e.changes.iterChangedRanges((function(e,i,r,o){t.between(e,r,(function(e,t){n.push(Od.of({from:e,to:t}))}))})),[e,{effects:n,sequential:!0}]}return e})),RD=[Xi.define((function(e){return new BD(e)}),{decorations:function(e){return e.decorations}}),Xo.atomicRanges.of((function(e){return Rd(e.state)})),ND],HD=Yn.mark({class:"cm-indent"}),VD=Yn.mark({class:"cm-indent cm-active-indent"}),zD=Yn.mark({class:"cm-indent-spacing"}),qD=Xi.fromClass(function(){function e(e){this.decorations=this.getDeco(e)}return e.prototype.update=function(e){(e.docChanged||e.viewportChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){var t=new kt,n=e.state.doc,i=/^[\s>]+/,r=n.lineAt(e.state.selection.main.from),o="",a="",s=r.text.match(Im);if(s&&s[0])if(o=s[1],s[2])a=" ".repeat(s[2].length);else for(var l=r.number-1;l>0;){var c=n.line(l),u=c.text.match(Im);if(!u||!u[0])break;if(u[2]||u[1]!==o){var h=u[1]||"";u[2]&&o.startsWith(h)&&u[0].length<=o.length&&(r=c,o=u[1],a=" ".repeat(u[2].length));break}l--}for(var d=r.number+1;d<=n.lines;){var p=n.line(d).text;if(!p.startsWith(o))break;if(p=p.substr(o.length),a){if(p.startsWith(a)){d++;continue}a=""}if(!/^(\t| {4})/.test(p))break;d++}for(var f=0,m=e.viewportLineBlocks;f<m.length;f++){var v=m[f],g=n.lineAt(v.from);if(h=g.text.match(i))for(var y=h[0],b=0,w=r.number<g.number&&g.number<d;b<y.length;){var k=y.charAt(b),C=v.from+b,M=!1,E=w&&b===o.length;if(">"===k)b++," "===y.charAt(b)&&b++;else if("\t"===k)M=!0,b++;else{for(var S=!0,x=b+4,T=b;T<x;T++)if(" "!==y.charAt(T)){b=T,S=!1;break}if(!S){t.add(C,v.from+b,zD),b++;continue}M=!0,b=x}M&&t.add(C,v.from+b,E?VD:HD)}}return t.finish()},e}(),{decorations:function(e){return e.decorations}});function UD(e){return UE(e,null,{})}function _D(e){return function(e,t,n){let i=null;if("function"==typeof t||Array.isArray(t)?i=t:void 0===n&&t&&(n=t),"string"==typeof n&&(n=n.length),"number"==typeof n){const e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=n||t||{};if(!e)return}return new iE(e,i,n).toString(n)}(e,null,{nullStr:"",lineWidth:0})}var WD=window.moment;function jD(e,t,n){var i=e.metadataCache.getFileCache(t);if(!i||!i.headings)return null;for(var r=null,o=0,a=i.headings;o<a.length;o++){var s=a[o];if(s.position.start.line>n.line)break;r=s}return r}function GD(e,t){var n=e.content,i=e.node,r=i.position.start.offset,o=i.position.end.offset,a=0,s="paragraph"===i.type||"listItem"===i.type,l="^"+t;if(s){if(l=" "+l,"listItem"===i.type){var c=i.children;if(c&&c.length>1){var u=c[c.length-1],h=c[c.length-2];"list"===u.type&&(o=h.position.end.offset)}}}else l="\n\n"+l,a=2;return s||"\n"===n.charAt(o)&&"\n"===n.charAt(o+1)||(l+="\n",a++),{blockStart:r,blockEnd:o,addition:l,newlines:a}}var KD=new RegExp(lS.source+"$"),YD=/^#\d+$/;function ZD(e){return!!e&&KD.test(e)&&!YD.test(e)}var XD=Yn.mark({class:"is-invalid"}),$D=Yn.replace({block:!0});function QD(e,t){var n=e.coordsAtPos(t);if(!n)return!1;var i=e.coordsAtPos(JD(e.state.doc)+1);return!!i&&i.top===n.top}function JD(e){var t=-1;if("---"===e.line(1).text)for(var n=2;n<=e.lines;n++){var i=e.line(n);if("---"===i.text){t=i.to;break}}return t}function eA(e,t){var n=e.cm,i="",r=null;function o(e){if(e!==i){i=e;try{!function(e){var t,n=null!==(t=UD(e))&&void 0!==t?t:{};if("object"!=typeof n||Array.isArray(n))throw new aE(0,"Frontmatter must be a valid object!")}(e),r=null}catch(e){r=e}}return r}var a=Fe.define({create:function(){return Yn.none},update:function(t,n){var i=[],r=n.newDoc,a=JD(n.newDoc),s=-1!==a&&"source"!==e.app.vault.getConfig("propertiesInDocument");if(-1!==a){var l=o(r.sliceString(3,a-3));if(l){s=!1,i.push(XD.range(0,a));var c=Math.clamp(l.offset+3,4,a-3);i.push(Yn.mark({class:"error-marker",attributes:{"aria-label":Qf.properties.labelInvalidYamlMarker()}}).range(c,c+1))}}return s&&i.push($D.range(0,a)),Yn.set(i,!0)},provide:function(e){return Xo.decorations.from(e)}}),s=ft.transactionFilter.of((function(t){if(n.composing||!cm(t))return t;if("source"===e.app.vault.getConfig("propertiesInDocument"))return t;if(gm([t],MD))return n.dom.win.setTimeout((function(){e.app.commands.executeCommandById("markdown:add-metadata-property")}),30),t;var i=t.startState.doc,r=JD(i);if(-1===r)return t;if(o(i.sliceString(3,r-3)))return t;var a=void 0,s=t.newDoc,l=JD(s),c=s.length;c===l&&(c++,a=[{insert:"\n",from:l}]);var u=t.newSelection;if(u.ranges.some((function(e){var t=e.from,n=e.to;return t<=r||n<=r}))){var h=!1;if(t.changes.iterChangedRanges((function(e,t,n,i){e>=3&&t<r-1&&(h=!0),n===i&&t<=r+1&&(h=!0)}),!0),h)return[];var d=function(e){return Math.clamp(e,r+1,c)},p=Ee.create(u.ranges.map((function(e){return Ee.range(d(e.anchor),d(e.head))})),u.mainIndex);return[t,{changes:a,selection:p,sequential:!0}]}return t}));return[a,s]}var tA,nA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.start=-1,t.end=-1,t}return f(t,e),t.prototype.setPos=function(e,t){this.start=e,this.end=t},t.prototype.hookClickHandler=function(e,n){this.setOwner(n),lk(n,(function(i){for(var r=i.targetNode,o=e.contentDOM;r&&r!==o;){if(r.instanceOf(HTMLElement)&&r.hasClass("cm-editor"))return;r=r.parentNode}t.selectElement(e,n)}))},t.prototype.addEditButton=function(e,n){this.setOwner(n);var i=n.createDiv("edit-block-button");mx(i,"lucide-code-2"),Rx(i,Qf.editor.menu.labelEditBlock()),i.addEventListener("click",(function(){t.selectElement(e,n)}))},t.prototype.resizeWidget=function(e,t){new ResizeObserver((function(){return e.requestMeasure()})).observe(t,{box:"border-box"})},t.prototype.toDOM=function(e){var t=this.containerEl;return t||(this.containerEl=t=this.initDOM(e)),t},t.prototype.setOwner=function(e){t.widgetOwner.set(e,this)},t.selectElement=function(e,n){var i=t.getOwner(n),r=i.start,o=i.end;if(r<0||o<0)!function(e,t){try{var n=t.posAtDOM(e);t.dispatch({selection:{head:n,anchor:n}}),t.focus()}catch(e){}}(n,e);else{Zl.isMobile&&(o=r);try{e.focus(),e.dispatch({selection:{head:r,anchor:o},scrollIntoView:!0})}catch(e){}}},t.getOwner=function(e){return t.widgetOwner.get(e)},t.widgetOwner=new WeakMap,t}(Gn),iA=function(e){function t(t,n){var i=e.call(this)||this;return i.children=[],i.app=t,i.editor=n,i}return f(t,e),Object.defineProperty(t.prototype,"noReuse",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){this.editor.addChild(e),this.children.push(e)},t.prototype.removeChild=function(e){this.editor.removeChild(e),this.children.remove(e)},t}(nA),rA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.become=function(e,t){this.setOwner(e),this.containerEl=e},t.prototype.updateDOM=function(e,t){return!!this.patchDOM(e,t)&&(this.setOwner(e),this.containerEl=e,!0)},t}(nA);function oA(e,t){return{modifiers:e,key:t}}function aA(e){return e.startsWith("Key")&&4===e.length?e.charAt(3):e}function sA(e){var t=[];xk.forEach((function(n){e.modifiers.contains(n)&&t.push(Sk[n])}));var n=(e.code?aA(e.code):e.key)||"";return t.push(function(e){if(Mk.hasOwnProperty(e))return Mk[e];var t=e.replace(/([A-Z])/g," $1").trim();return t.charAt(0).toUpperCase()+t.slice(1)}(n)),t.join(Ul?" ":" + ")}var lA=Symbol("customKeys"),cA=function(){function e(e){this.defaultKeys={},this[tA]={},this.baked=!1,this.bakedHotkeys=[],this.bakedIds=[],this.onConfigFileChange=mc(this.load,50),this.app=e,this.app.scope.register(null,null,this.onTrigger.bind(this))}return Object.defineProperty(e.prototype,"customKeys",{get:function(){return Object.assign({},this[lA])},enumerable:!1,configurable:!0}),e.prototype.registerListeners=function(){this.app.vault.on("raw",this.onRaw.bind(this))},e.prototype.onRaw=function(e){Yc(e)===this.app.vault.configDir&&"json"===Qc(e)&&("hotkeys"===Xc(e)&&this.onConfigFileChange())},e.prototype.save=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.vault.writeConfigJson("hotkeys",this[lA])];case 1:return e.sent(),[2]}}))}))},e.prototype.load=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,this.app.vault.readConfigJson("hotkeys")];case 1:return(e=t.sent())&&"object"==typeof e&&(this[lA]=e||{},this.baked=!1),[2]}}))}))},e.prototype.getDefaultHotkeys=function(e){return this.defaultKeys[e]},e.prototype.addDefaultHotkeys=function(e,t){this.defaultKeys[e]=t,this.baked=!1},e.prototype.removeDefaultHotkeys=function(e){delete this.defaultKeys[e],this.baked=!1},e.prototype.getHotkeys=function(e){return this[lA][e]},e.prototype.setHotkeys=function(e,t){this[lA][e]=t,this.baked=!1,Zl.isDesktopApp&&this.app.appMenuBarManager.requestRender()},e.prototype.removeHotkeys=function(e){delete this[lA][e],this.baked=!1},e.prototype.printHotkeyForCommand=function(e){var t=this.getHotkeys(e)||this.getDefaultHotkeys(e);return t&&t.length>0?sA(t[0]):""},e.prototype.bake=function(){if(!this.baked){this.baked=!0;var e=this.defaultKeys,t=this[lA],n=[],i=[],r=function(e,t){for(var r=0,o=t;r<o.length;r++){var a=o[r];n.push({modifiers:Ak.compileModifiers(a.modifiers),key:a.code?aA(a.code):a.key}),i.push(e)}};for(var o in t)t.hasOwnProperty(o)&&r(o,t[o]);for(var o in e)e.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&r(o,e[o]);this.bakedHotkeys=n,this.bakedIds=i}},e.prototype.onTrigger=function(e,t){this.bake();for(var n=this.bakedHotkeys,i=this.bakedIds,r=0;r<n.length;r++){var o=n[r];if(Ak.isMatch(o,t)){var a=i[r],s=this.app.commands.findCommand(a);if(s&&(!e.repeat||s.repeatable))if(this.app.commands.executeCommand(s))return!1}}},e}();tA=lA;var uA=window.Capacitor&&"web"!==A.getPlatform(),hA=!!uA&&"ios"===A.getPlatform(),dA=!!uA&&"android"===A.getPlatform(),pA=uA?L("App"):null,fA=(uA&&L("Clipboard"),uA?L("Filesystem"):null),mA=uA?L("SplashScreen"):null,vA=uA?L("StatusBar"):null,gA=uA?L("Device"):null,yA=uA?L("KeepAwake"):null,bA=uA?L("Keyboard"):null,wA=(uA&&L("Haptics"),[]);function kA(){if(0===wA.length)try{yA.keepAwake().catch(console.error)}catch(e){console.error(e)}var e={release:function(){if(wA.remove(e),0===wA.length)try{yA.allowSleep().catch(console.error)}catch(e){console.error(e)}}};return wA.push(e),e}function CA(e,t){if(Zl.isMobile){var n=[];e.addEventListener("touchstart",(function(i){if(!(i.touches.length>1)){for(var r=i.targetNode;r;){if(r.instanceOf(HTMLElement)&&r.dataset.ignoreSwipe)return;r=r.parentNode}var o=i.touches[0];if("stylus"!==o.touchType){var a=o.clientX,s=o.clientY,l=document.elementFromPoint(a,s);if(!(l instanceof HTMLCanvasElement)&&e.contains(l)){var c=o.identifier,u=Date.now(),h=!1,d="x",p=o.clientX,f=o.clientY,m=u,v=0,g=0;if(n.length>0)for(var y=0,b=n;y<b.length;y++){b[y].cancel()}n=[];var w=function(e){for(var t=e.changedTouches,n=0;n<t.length;n++){var i=t[n];if(i.identifier===c)return i}t=e.touches;for(n=0;n<t.length;n++){if(t[n].identifier===c)return null}return E(),null},k=function(e){if(w(e)&&(E(),0!==n.length)){var t,i;"x"===d?(t=p-a,i=v):(t=f-s,i=g);for(var r=(i=800*i*window.devicePixelRatio)+t,o=0,l=n;o<l.length;o++){l[o].finish(p,f,r)}n=[]}},C=function(e){if(w(e)&&(E(),0!==n.length)){for(var t=0,i=n;t<i.length;t++){i[t].cancel()}n=[]}},M=function(e){var i=w(e);if(i){var r=i.clientX,o=i.clientY;if(!h){if(Date.now()-u>200)return void E();var c=Math.abs(r-a),y=Math.abs(o-s),b=Math.max(c,y);if(b<10)return;h=!0;for(var k=l,C="x"===(d=c===b?"x":"y")?r-a:o-s;k;){var M="x"===d?k.scrollWidth-k.clientWidth:k.scrollHeight-k.clientHeight;if(M>0){var S=getComputedStyle(k),x="x"===d?S.overflowX:S.overflowY;if("auto"===x||"scroll"===x){var T="x"===d?k.scrollLeft:k.scrollTop;if(C>0&&T>0||C<0&&T<M-1)return void E()}}k=k.parentElement}if(window.getSelection().toString())return void E();t({evt:e,touch:i,points:e.touches.length,targetEl:l,startX:a,startY:s,x:r,y:o,direction:d,registerCallback:function(e){return n.push(e)}})}if(0!==n.length){e.preventDefault();var D=Date.now(),A=D-m,L=1-.8;v=.8*v+(r-p)/A*L,g=.8*g+(o-f)/A*L,p=r,f=o,m=D;for(var P=0,I=n;P<I.length;P++){I[P].move(r,o)}}else E()}},E=function(){window.removeEventListener("touchcancel",C),window.removeEventListener("touchend",k),window.removeEventListener("touchmove",M)};window.addEventListener("touchcancel",C),window.addEventListener("touchend",k),window.addEventListener("touchmove",M,{passive:!1})}}}}),{passive:!1})}}var MA=[];function EA(e){MA.contains(e)||MA.push(e)}function SA(e){MA.contains(e)&&MA.remove(e)}var xA=function(){function e(){this._loaded=!1,this._events=[],this._children=[]}return e.prototype.load=function(){if(!this._loaded){this._loaded=!0,this.onload();for(var e=0,t=this._children.slice();e<t.length;e++){t[e].load()}}},e.prototype.onload=function(){},e.prototype.unload=function(){if(this._loaded){this._loaded=!1;for(var e=this._children,t=this._events;e.length>0;){e.pop().unload()}for(;t.length>0;){t.pop()()}this.onunload()}},e.prototype.onunload=function(){},e.prototype.addChild=function(e){return this._children.push(e),this._loaded&&e.load(),e},e.prototype.removeChild=function(e){var t=this._children,n=t.indexOf(e);return-1!==n&&(t.splice(n,1),e.unload()),e},e.prototype.register=function(e){this._events.push(e)},e.prototype.registerEvent=function(e){this.register((function(){return e.e.offref(e)}))},e.prototype.registerDomEvent=function(e,t,n,i){e.addEventListener(t,n,i),this.register((function(){return e.removeEventListener(t,n,i)}))},e.prototype.registerScopeEvent=function(e){this.register((function(){return e.scope.unregister(e)}))},e.prototype.registerInterval=function(e){return this.register((function(){return clearInterval(e)})),e},e}(),TA=function(){function e(e){this.submenu=null,this.disabled=!1,this.checked=null,this.section="",this.menu=e;var t=this.dom=createDiv("menu-item tappable");this.iconEl=t.createDiv("menu-item-icon"),this.titleEl=t.createDiv("menu-item-title"),t.addEventListener("click",this.handleEvent.bind(this))}return e.prototype.setTitle=function(e){return"string"==typeof e?this.titleEl.setText(e):(this.titleEl.empty(),this.titleEl.appendChild(e)),this},e.prototype.setIcon=function(e){return e?mx(this.iconEl,e):this.iconEl.empty(),this},e.prototype.removeIcon=function(){return this.iconEl.detach(),this},e.prototype.setActive=function(e){return this.setChecked(e)},e.prototype.setChecked=function(e){e?this.checkIconEl||mx(this.checkIconEl=this.dom.createDiv("menu-item-icon mod-checked"),"lucide-check"):this.checkIconEl&&this.checkIconEl.detach();return this.checked=e,this.dom.toggleClass("mod-checked",e),this},e.prototype.setDisabled=function(e){return this.disabled=e,this.dom.toggleClass("is-disabled",e),this},e.prototype.setWarning=function(e){return this.dom.toggleClass("is-warning",e),this},e.prototype.setIsLabel=function(e){return this.dom.toggleClass("tappable",!e),this.dom.toggleClass("is-label",e),this},e.prototype.setSubmenu=function(){var t=this;if(!this.submenu){this.dom.addClass("has-submenu");var n=this.submenu=new PA;mx(this.dom.createDiv("menu-item-icon mod-submenu"),"lucide-chevron-right"),this.onClick((function(i){if(i.preventDefault(),Zl.isPhone){var r=e.create(n);r.setSection("title").setTitle(t.titleEl.getText()).setIcon("lucide-chevron-left").setIsLabel(!0).onClick((function(e){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return e.preventDefault(),AA=this.menu,[4,Sl(this.submenu.scrollEl,this.menu.scrollEl,"left")];case 1:return t.sent(),this.submenu.items.remove(r),[2]}}))}))})),n.items.unshift(r),n.sort(),AA=t.submenu,Sl(t.menu.scrollEl,n.scrollEl,"right")}}))}return this.submenu},e.prototype.onClick=function(e){return this.callback=e,this},e.prototype.handleEvent=function(e){if(this.disabled)e.preventDefault();else{var t=this.callback;t&&t(e)}},e.prototype.setSection=function(e){return this.section=e,this.dom.setAttr("data-section",e),this},e.create=function(t){return new e(t)},e}(),DA=function(e){this.menu=e,this.dom=createDiv("menu-separator")},AA=null;function LA(){for(;AA;){var e=AA.parentMenu;AA.close(),AA=e}}var PA=function(e){function t(){var n=e.call(this)||this;n.unloading=!1,n.useNativeMenu=t.useNativeMenu,n.items=[],n.sections=[],n.submenuConfigs={},n.selected=-1,n.openSubmenuSoon=mc(n.openSubmenu.bind(n),250,!0),n.scope=new Tk(Ak.global.getRootScope());var i=n.dom=createDiv("menu");i.createDiv("menu-grabber");var r=n.scrollEl=i.createDiv("menu-scroll"),o=n.bgEl=createDiv("suggestion-bg");if(o.style.opacity="0",o.addEventListener("mousedown",(function(e){return e.preventDefault()})),i.addEventListener("mousedown",(function(e){0===e.button&&e.preventDefault()})),Zl.isPhone){var a=function(e){e.registerCallback({move:function(t,n){e.evt.stopPropagation(),r.style.overscrollBehavior="none";var a=r.offsetHeight,s=Math.clamp((n-e.startY)/a,0,1);i.style.transform="translateY(".concat(s*a,"px)"),o.style.opacity=String(1-s)},cancel:function(){r.style.overscrollBehavior="",i.style.transform="",o.style.opacity=""},finish:function(t,a,s){r.style.overscrollBehavior="";var l,c=r.offsetHeight,u=Math.clamp((a-e.startY)/c,0,1);s<c/2?(wl(i,new ml({duration:200*(l=u)}).addProp("transform",null,"translateY(0)","")),wl(o,new ml({duration:150*l,fn:"linear"}).addProp("opacity",null,"1",""))):(wl(i,new ml({duration:100*(l=1-u),fn:"ease-out"}).addProp("transform",null,"translateY(".concat(c,"px)"),""),(function(){n.dom.detach(),n.hide()})),wl(o,new ml({duration:150*l,fn:"linear"}).addProp("opacity",null,"0")))}})};CA(i,(function(e){1===e.points&&"y"===e.direction&&(i.scrollTop>0||a(e))})),CA(o,(function(e){1===e.points&&"y"===e.direction&&a(e)}))}return o.onClickEvent((function(){return n.hide()})),n.scope.register([],"ArrowUp",n.onArrowUp.bind(n)),n.scope.register([],"ArrowDown",n.onArrowDown.bind(n)),n.scope.register([],"ArrowLeft",n.onArrowLeft.bind(n)),n.scope.register([],"ArrowRight",n.onArrowRight.bind(n)),n.scope.register([],"Enter",n.onEnter.bind(n)),n.scope.register([],"Escape",n.hide.bind(n)),Zl.isDesktop&&i.addEventListener("mouseover",n.onMouseOver.bind(n)),n}return f(t,e),t.prototype.onload=function(){var e=this;this.registerDomEvent(window,"click",this.onMenuClick.bind(this)),this.registerDomEvent(window,"mousedown",(function(t){var n=t.targetNode;n&&!e.isInside(n)&&e.hide()})),Zl.isDesktop&&this.registerDomEvent(window,"contextmenu",this.hide.bind(this)),Ak.global.pushScope(this.scope)},t.prototype.onunload=function(){Ak.global.popScope(this.scope)},t.prototype.onMenuClick=function(e){var t=e.targetNode;t&&t.instanceOf(Element)&&(t.matchParent(".menu-item.has-submenu")||t.matchParent(".menu-item.is-label"))||this.hide()},t.prototype.isInside=function(e){var t;if(this.dom.contains(e)||(null===(t=this.parentEl)||void 0===t?void 0:t.contains(e)))return!0;for(var n=this.parentMenu;n;){if(n.dom.contains(e))return!0;n=n.parentMenu}for(var i=this.currentSubmenu;i;){if(i.dom.contains(e))return!0;i=i.currentSubmenu}return!1},t.prototype.sort=function(){for(var e=this,t=e.items,n=e.sections,i=e.submenuConfigs,r={"":[]},o=0,a=t;o<a.length;o++){var s="";(b=a[o])instanceof TA&&(s=b.section),""===s||n.contains(s)||n.push(s);var l=r[s];r.hasOwnProperty(s)||(l=r[s]=[]),l.push(b)}t=[];for(var c=null,u=null,h="",d=0,p=n;d<p.length;d++){s=p[d];if(r.hasOwnProperty(s)){var f=s.split(".")[0];c!==f&&(null!==c&&t.push(new DA(this)),c=f);var m=r[s];if(m.length>1&&!Zl.isMobile){var v="";for(var g in i)if(i.hasOwnProperty(g)&&(s===g||s.substring(g.length+1)===g+".")){v=g;break}if(v){if(u&&v===h)u.items.push(new DA(this));else{var y=i[v],b=TA.create(this);t.push(b),b.setTitle(y.title),y.icon&&b.setIcon(y.icon),y.disabled&&b.setDisabled(!0),u=b.setSubmenu(),h=v}for(var w=0,k=r[s];w<k.length;w++){b=k[w];u.items.push(b)}continue}}for(var C=0,M=m;C<M.length;C++){b=M[C];t.push(b)}}}if(!n.contains(""))for(var E=0,S=r[""];E<S.length;E++){b=S[E];t.push(b)}for(;t.last()instanceof DA;)t.pop();this.items=t,this.scrollEl.setChildrenInPlace(t.map((function(e){return e.dom})))},t.prototype.addSections=function(e){var t=this.sections;e=e.filter((function(e){return!t.contains(e)}));var n=t.indexOf("");return-1===n&&(n=t.length),t.splice.apply(t,w([n,0],e,!1)),this},t.prototype.setSectionSubmenu=function(e,t){return this.submenuConfigs[e]=t,this},t.prototype.setNoIcon=function(){return this.dom.addClass("mod-no-icon"),this},t.prototype.setUseNativeMenu=function(e){return this.useNativeMenu=e,this},t.prototype.addItem=function(e){if(this._loaded)return this;var t=TA.create(this);return this.items.push(t),e(t),this},t.prototype.addSeparator=function(){if(this._loaded)return this;var e=new DA(this);return this.items.push(e),this},t.prototype.setParentElement=function(e){return this.parentEl&&this.parentEl.removeClass("has-active-menu"),this.parentEl=e,this},t.prototype.showAtMouseEvent=function(e){return this.showAtPosition({x:e.clientX,y:e.clientY},e.doc)},t.prototype.showAtPosition=function(e,t){var n=this;if(this.unload(),0===this.items.length)return this;var i=(t=t||activeDocument).body,r=e.x,o=e.y,a=ak(i.win);if(a){var s=a.scale;r=r*s+a.x,o=o*s+a.y,i=(t=(w=a.win).document).body}if(this.parentEl&&(this.parentEl.addClass("has-active-menu"),Pw(this.parentEl,500,(function(){return n.hide()}))),this.sort(),Bx(),!Zl.isDesktop||!this.useNativeMenu){EA(this),setTimeout(this.load.bind(this),0);var l=this.dom,c=this.bgEl;if(i.appendChild(l),i.appendChild(c),Zl.isPhone){Zl.isMobileApp&&bA&&bA.hide();var u=l.offsetHeight-1;wl(l,new ml({duration:150,fn:"var(--anim-motion-swing)"}).addProp("transform","translateY(".concat(u,"px)"),"")),wl(c,new ml({duration:150}).addProp("opacity","0","0.85")),l.style.left="0",l.style.top="0"}else{var h=l.offsetWidth,d=l.offsetHeight,p=i.clientWidth,f=i.clientHeight,m=parseFloat(getComputedStyle(i).paddingTop);m&&!isNaN(m)||(m=0);var v=r,g=v;e.width?e.overlap?(v=r,g=r+e.width):(v=r+e.width,g=r):(v=r+2,g=r-2);var y=l.style,b=g-h>=0;!(v+h<=p)||e.left&&b?y.left=Math.max(0,g-h)+"px":y.left=v+"px",o+d>f&&(o=Math.max(m,o-d)),y.top=o+2+"px",Uw(this.scrollEl),c.style.opacity="0.85"}return AA=this,this}var w=t.win,k=function(e){for(var t=[],n=function(e){if(e instanceof TA){var n={label:e.titleEl.getText().replace(/\B&\B/,"&&"),enabled:!e.disabled&&!e.dom.hasClass("is-label"),checked:e.checked,type:isBoolean(e.checked)?"checkbox":void 0,click:function(t,n,i){return e.handleEvent(new MouseEvent("click",i))}};e.submenu&&(e.submenu.sort(),n.submenu=k(e.submenu.items)),t.push(n)}else e instanceof DA&&t.push({type:"separator"})},i=0,r=e;i<r.length;i++){n(r[i])}return t},C=k(this.items),M=w.electron.remote.Menu.buildFromTemplate(C);M.on("menu-will-close",(function(){return n.hide()}));var E=w.electron.remote.getCurrentWebContents(),S=Math.pow(1.2,E.getZoomLevel());M.popup({x:Math.round(r*S),y:Math.round(o*S),window:w.electron.remote.getCurrentWindow()})},t.prototype.hide=function(){var e=this;if(this.unload(),this.unloading)return this;this.unloading=!0,SA(this),this.unselect(),this.closeSubmenu(),this.parentMenu&&this.parentMenu.currentSubmenu===this?(AA===this&&(AA=this.parentMenu),this.parentMenu.currentSubmenu=null):AA=null,this.parentMenu=null,this.parentEl&&(this.parentEl.removeClass("has-active-menu"),this.parentEl=null);var t=this,n=t.dom,i=t.bgEl,r=t.hideCallback;if(Zl.isPhone&&n.isShown()){var o=n.offsetHeight-1;wl(n,new ml({duration:150}).addProp("transform","","translateY(".concat(o,"px)")),(function(){n.detach(),r&&r(),e.unloading=!1})),wl(i,new ml({duration:150}).addProp("opacity",null,"0"),(function(){i.detach()}))}else n.detach(),i.detach(),r&&r(),this.unloading=!1;return this},t.prototype.close=function(){this.hide()},t.prototype.onHide=function(e){this.hideCallback=e},t.prototype.onArrowUp=function(e){e.preventDefault();for(var t=this.items,n=this.selected-1,i=0;i<t.length;){var r=t[n];if(r&&r instanceof TA&&!r.disabled)return this.select(n),!1;--n<0&&(n=t.length-1),i++}return!1},t.prototype.onArrowDown=function(e){e.preventDefault();for(var t=this.items,n=this.selected+1,i=0;i<t.length;){var r=t[n];if(r&&r instanceof TA&&!r.disabled)return this.select(n),!1;++n>=t.length&&(n=0),i++}return!1},t.prototype.onArrowLeft=function(e){return e.preventDefault(),this.parentMenu&&this.hide(),!1},t.prototype.onArrowRight=function(e){e.preventDefault();var t=this.items[this.selected];return t instanceof TA&&t.submenu&&(this.openSubmenu(t),this.currentSubmenu&&this.currentSubmenu.select(0)),!1},t.prototype.onEnter=function(e){var t=this.items[this.selected];return t&&t instanceof TA&&(t.handleEvent(e),this.hide()),!1},t.prototype.onMouseOver=function(e){for(var t=e.targetNode,n=this.parentMenu,i=this.items,r=0;r<i.length;r++){var o=i[r];if(o.dom.contains(t)){if(n)for(var a=n.items,s=0;s<a.length;s++){var l=a[s];if(l instanceof TA&&l.submenu===this){n.selected!==s&&(n.openSubmenuSoon.cancel(),n.select(s));break}}return void(o instanceof TA&&(this.select(r),this.openSubmenuSoon(o)))}}},t.prototype.unselect=function(){var e=this.items[this.selected];e&&e.dom.removeClass("selected"),this.selected=null,this.closeSubmenu()},t.prototype.select=function(e){var t=this.items,n=this.selected;if(0!==t.length){e<0&&(e=t.length-1),e>=t.length&&(e=0);var i=t[n];i&&i.dom.removeClass("selected"),this.selected=e;var r=t[e];r.dom.addClass("selected"),r.dom.scrollIntoView({block:"nearest"})}},t.prototype.openSubmenu=function(e){this.openSubmenuSoon.cancel();var t=e.submenu,n=e.dom,i=this.currentSubmenu,r=this.parentMenu;if(!e.disabled){if(i){if(i===t||r&&r.selected!==this.parentMenu.items.indexOf(e))return;this.closeSubmenu()}if(t){t.parentMenu=this,this.currentSubmenu=t;var o=getComputedStyle(this.dom),a=parseFloat(o.paddingTop)+parseFloat(o.borderTopWidth),s=parseFloat(o.paddingLeft)+parseFloat(o.borderLeftWidth)+2,l=parseFloat(o.paddingRight)+parseFloat(o.borderRightWidth)+2,c=n.getBoundingClientRect();t.showAtPosition({x:c.x-s,y:c.y-a,width:c.width+s+l},n.doc)}}},t.prototype.closeSubmenu=function(){this.openSubmenuSoon.cancel();var e=this.currentSubmenu;e&&(e.hide(),e.parentMenu=null,this.currentSubmenu=null)},t.forEvent=function(e){e.preventDefault();var n=IA.get(e);return n||(n=new t,IA.set(e,n),e.win.setTimeout((function(){return n.showAtMouseEvent(e)}))),n},t.useNativeMenu=!1,t}(xA),IA=new WeakMap;function FA(e){var t=e.showSearch;return t&&"function"==typeof t}function OA(e,t,n,i){e.addSections([i+"-basic",i+"-advanced",i+"-danger"]),e.addItem((function(e){e.setSection(i).setTitle(Qf.interface.formatting.labelFormatting()).setIcon("lucide-paintbrush").setSubmenu().addItem((function(e){return e.setSection(i+"-basic").setTitle(Qf.interface.formatting.toggleBold()).setChecked(n.bold).setIcon("lucide-bold").onClick((function(){return t.toggleMarkdownFormatting("bold")}))})).addItem((function(e){return e.setSection(i+"-basic").setTitle(Qf.interface.formatting.toggleItalics()).setChecked(n.italic).setIcon("lucide-italic").onClick((function(){return t.toggleMarkdownFormatting("italic")}))})).addItem((function(e){return e.setSection(i+"-basic").setTitle(Qf.interface.formatting.toggleStrikethrough()).setChecked(n.strikethrough).setIcon("lucide-strikethrough").onClick((function(){return t.toggleMarkdownFormatting("strikethrough")}))})).addItem((function(e){return e.setSection(i+"-basic").setTitle(Qf.interface.formatting.toggleHighlight()).setChecked(n.highlight).setIcon("lucide-highlighter").onClick((function(){return t.toggleMarkdownFormatting("highlight")}))})).addItem((function(e){return e.setSection(i+"-advanced").setTitle(Qf.interface.formatting.toggleCode()).setChecked(n.code).setIcon("lucide-code-2").onClick((function(){return t.toggleMarkdownFormatting("code")}))})).addItem((function(e){return e.setSection(i+"-advanced").setTitle(Qf.interface.formatting.toggleMath()).setChecked(n.math).setIcon("lucide-sigma").onClick((function(){return t.toggleMarkdownFormatting("math")}))})).addItem((function(e){return e.setSection(i+"-advanced").setTitle(Qf.interface.formatting.toggleComments()).setChecked(n.comment).setIcon("lucide-percent").onClick((function(){return t.toggleComment()}))})).addItem((function(e){return e.setSection(i+"-danger").setTitle(Qf.interface.formatting.clear()).setIcon("lucide-eraser").onClick((function(){return t.clearMarkdownFormatting()}))}))}))}var BA=function(){function e(){}return e.encodeUrlQuery=function(e){if(!e)return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&e[n]&&(!0===e[n]?t.push(encodeURIComponent(n)):t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n])));return t.join("&")},e.decodeUrlQuery=function(e){var t={};if(!e||""===e.trim())return t;for(var n=e.split("&"),i=0;i<n.length;i++){var r=n[i].split("=");if(r.length>=1&&r[0]){var o=decodeURIComponent(r[0]);2===r.length?t[o]=decodeURIComponent(r[1]):t[o]=""}}return t},e.decodeUrl=function(t){t||(t="");var n=t.split("#"),i=n.length>1?n[1]:"",r=n[0].split("?"),o=r.length>1?r[1]:"";return{path:r[0],query:e.decodeUrlQuery(o),hash:e.decodeUrlQuery(i)}},e.addQuery=function(t,n){return t+(t.contains("?")?"&":"?")+e.encodeUrlQuery(n)},e}(),NA=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i;function RA(e){var t=e.trim().match(NA);if(!t)return null;for(var n=(t[1]||"text/plain;charset=us-ascii").split(";").map((function(e){return e.toLowerCase()})),i=n[0],r={},o=0,a=n.slice(1);o<a.length;o++){var s=a[o].split("=");r[s[0]]=s[1]}var l=!!t[t.length-2],c=t[t.length-1]||"";return{contentType:i,properties:r,isBase64:l,data:c,get arrayBuffer(){return l?pf(c):hf(c)}}}var HA=function(e){function t(n,i,r){var o=e.call(this,n)||this;return o.status=i,o.headers=r,Object.setPrototypeOf(o,t.prototype),o}return f(t,e),t}(Error);function VA(e,t,n,i){var r;if((null===(r=e.throw)||void 0===r||r)&&t>=400)throw new HA("Request failed, status "+t,t,n);return{status:t,headers:n,arrayBuffer:i,get json(){return JSON.parse((new TextDecoder).decode(i))},get text(){return(new TextDecoder).decode(i)}}}function zA(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:return String.isString(e)&&(e={url:e}),uA?(n=!1,e.body instanceof ArrayBuffer?(t=ff(e.body),n=!0):t=e.body,[4,pA.requestUrl({url:e.url,method:e.method,contentType:e.contentType,headers:e.headers,body:t,binary:n})]):[3,2];case 1:return i=p.sent(),[2,VA(e,i.status,i.headers,pf(i.body))];case 2:return Mf("electron")?[4,xf(e)]:[3,4];case 3:return r=p.sent(),[2,VA(e,r.status,r.headers,r.body)];case 4:return o=e.url,a=e.method,s=e.contentType,l=e.body,c=null,s&&(c={"Content-Type":s}),[4,fetch(o,{method:a,headers:c,body:l})];case 5:return[4,(u=p.sent()).arrayBuffer()];case 6:return h=p.sent(),d={},u.headers.forEach((function(e,t){return d[t]=e})),[2,VA(e,u.status,d,h)]}}))}))}function qA(e){var t=this,n=e;return Object.defineProperty(n,"arrayBuffer",{get:function(){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return[2,t.sent().arrayBuffer]}}))}))}}),Object.defineProperty(n,"json",{get:function(){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return[2,t.sent().json]}}))}))}}),Object.defineProperty(n,"text",{get:function(){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return[2,t.sent().text]}}))}))}}),n}function UA(e){return qA(zA(e))}function _A(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,zA(e)];case 1:return[2,t.sent().text]}}))}))}function WA(e){return qA(function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return String.isString(e)&&(e={url:e}),[4,zA(e)];case 1:return[2,t.sent()]}}))}))}(e))}function jA(){var e="https://obsidian.md/download";if(Zl.isDesktopApp){var t=window.process.platform,n="win32"===t?"win":"darwin"===t?"mac":"linux",i=window.process.arch;return BA.addQuery(e,{os:n,arch:i})}if(Zl.isMobileApp){n=dA?"android":"ios";return BA.addQuery(e,{os:n})}return e}function GA(e,t){var n=t.toLowerCase();for(var i in e)if(e.hasOwnProperty(i)&&i.toLowerCase()===n)return e[i];return null}window.request=_A,window.requestUrl=UA;var KA=Object.freeze({aliases:{name:"aliases",type:"aliases"},cssclasses:{name:"cssclasses",type:"multitext"},tags:{name:"tags",type:"tags"}}),YA=function(e){function t(t){var n=e.call(this)||this;return n.types={},n.properties={},n.onConfigFileChange=mc(n.loadData,50),n.app=t,n.loadData(),n.registeredTypeWidgets={aliases:GF,text:qF,multitext:eO,tags:KF,number:XF,checkbox:$F,date:YF,datetime:ZF},n.app.metadataCache.on("finished",n.updatePropertyInfoCache,n),n.on("changed",n.updatePropertyInfoCache,n),n}return f(t,e),t.prototype.registerListeners=function(){this.app.vault.on("raw",this.onRaw.bind(this))},t.prototype.onRaw=function(e){e===this.app.vault.configDir+"/types.json"&&this.onConfigFileChange()},t.prototype.updatePropertyInfoCache=function(){this.properties=this.app.metadataCache.getAllPropertyInfos()},t.prototype.getAllProperties=function(){return this.properties},t.prototype.getAssignedType=function(e){if(""===e)return"text";var t=e.toLowerCase();for(var n in this.types)if(this.types.hasOwnProperty(n)&&n.toLowerCase()===t)return this.types[n].type;return null},t.prototype.getTypeInfo=function(e){var t,n=e.key,i=e.value,r=e.type,o=void 0,a=this.getAssignedType(n);if(!a){var s=n.toLowerCase();this.properties.hasOwnProperty(s)&&(a=null===(t=this.properties[s])||void 0===t?void 0:t.type)}if(a&&this.registeredTypeWidgets.hasOwnProperty(a)&&(o=this.registeredTypeWidgets[a],null==i||o.validate(i)))return{expected:o,inferred:o};if(this.registeredTypeWidgets.hasOwnProperty(r)){var l=this.registeredTypeWidgets[r];return{inferred:l,expected:null!=o?o:l}}return{inferred:tO,expected:tO}},t.prototype.getPropertyInfo=function(e){var t;return null!==(t=this.properties[e])&&void 0!==t?t:null},t.prototype.getTypes=function(){return Object.keys(this.types)},t.prototype.loadData=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return[4,this.app.vault.readConfigJson("types")];case 1:if(e=o.sent(),t=this.types,this.types={},e&&e.hasOwnProperty("types"))for(i in n=e.types)n.hasOwnProperty(i)&&(r=i.toLowerCase(),this.types.hasOwnProperty(r)||(this.types[r]={name:i,type:n[i]}),t.hasOwnProperty(r)&&this.trigger("changed",r));return Object.assign(this.types,KA),[2]}}))}))},t.prototype.save=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:for(t in e={},this.types)this.types.hasOwnProperty(t)&&(n=this.types[t],i=n.name,r=n.type,e[i]=r);return[4,this.app.vault.writeConfigJson("types",{types:e})];case 1:return o.sent(),[2]}}))}))},t.prototype.setType=function(e,t){return g(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=e.toLowerCase(),(i=this.types[n])?i.type=t:this.types[n]={name:e,type:t},[4,this.save()];case 1:return r.sent(),this.trigger("changed",n),[2]}}))}))},t.prototype.unsetType=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=e.toLowerCase(),delete this.types[t],[4,this.save()];case 1:return n.sent(),this.trigger("changed",t),[2]}}))}))},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(sw),ZA=function(){function e(e){var t=this;this.shouldRestoreSelection=!0,this.selection=null,this.win=null,this.shouldAnimate=!0,this.dimBackground=!0,this.bgOpacity="0.85",this.app=e,this.scope=new Tk,this.scope.register([],"Escape",this.onEscapeKey.bind(this)),this.onWindowClose=this.onWindowClose.bind(this),this.containerEl=createDiv("modal-container");var n=this.bgEl=this.containerEl.createDiv("modal-bg");this.modalEl=this.containerEl.createDiv("modal");var i=this.modalEl.createDiv("modal-close-button");if(this.headerEl=this.modalEl.createDiv("modal-header"),this.titleEl=this.headerEl.createDiv("modal-title"),this.contentEl=this.modalEl.createDiv("modal-content"),this.scope.setTabFocusContainerEl(this.containerEl),i.addEventListener("click",this.close.bind(this)),Zl.isDesktopApp&&Zl.isMacOS){var r=null,o=null;n.addEventListener("click",(function(e){Math.hypot(e.screenX-r,e.screenY-o)<5&&t.close()})),Zl.isMacOS&&n.addEventListener("mousedown",(function(e){r=e.screenX,o=e.screenY}))}else n.addEventListener("click",this.close.bind(this));Zl.isMobile&&CA(this.titleEl,(function(e){if(1===e.points&&"y"===e.direction){var n=t,i=n.modalEl,r=n.bgEl;e.registerCallback({move:function(n,r){var o=i.offsetHeight,a=Math.clamp((r-e.startY)/o,0,1);i.style.transform="translateY(".concat(a*o,"px)"),t.bgEl.style.opacity=String(1-a)},cancel:function(){i.style.transform="",r.style.opacity=""},finish:function(n,o,a){var s,l=i.offsetHeight,c=Math.clamp((o-e.startY)/l,0,1);a<l/2?(wl(i,new ml({duration:150*(s=c)}).addProp("transform",null,"translateY(0)","")),wl(r,new ml({duration:150*s,fn:"linear"}).addProp("opacity",null,"1",""))):(wl(i,new ml({duration:150*(s=1-c),fn:"ease-out"}).addProp("transform",null,"translateY(".concat(l,"px)"),""),(function(){t.close()})),wl(r,new ml({duration:150*s,fn:"linear"}).addProp("opacity",null,"0")))}})}}))}return e.prototype.open=function(){var e=this.app,t=this.containerEl;if(!t.parentNode){var n=this.win=activeWindow;this.shouldRestoreSelection?this.selection=function(e){e||(e=window);var t=e.getSelection();if(!t)return null;var n=e.document.activeElement;if(n===e.document.body&&(n=null),"IFRAME"===(null==n?void 0:n.tagName)){var i=n;i.contentDocument&&(n=i.contentDocument.activeElement)}var r=null;if(n&&t.rangeCount>0){var o=t.getRangeAt(0),a=o.commonAncestorContainer;(n===a||n.contains(a))&&(r=o)}return{win:e,range:r,focusEl:n}}(n):this.selection=null,xw(n),e.keymap.pushScope(this.scope),n.document.body.appendChild(t),Zl.isPhone&&yl(this.modalEl),this.onOpen();var i=this,r=i.modalEl,o=i.bgEl,a=i.dimBackground;t.toggleClass("mod-dim",a),Zl.isPhone?this.animateOpen():o.style.opacity=a?this.bgOpacity:"0",LA(),EA(this),Zl.isMobile||$w(r),n!==window&&n.addEventListener("beforeunload",this.onWindowClose)}},e.prototype.animateOpen=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.shouldAnimate?((e=this.modalEl.doc.body).addClass("hide-cursor"),[4,Il(this.modalEl,this.bgEl,this.bgOpacity)]):[2];case 1:return t.sent(),e.removeClass("hide-cursor"),[2]}}))}))},e.prototype.animateClose=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.modalEl.doc.body).addClass("hide-cursor"),[4,(n=this.modalEl,i=this.bgEl,new Promise((function(e){var t=n.offsetHeight-1,r=Math.clamp(.35*t,100,250);wl(n,new ml({duration:r,fn:"var(--anim-motion-swing)"}).addProp("transform","","translateY(".concat(t,"px)"),""),(function(){return e(null)})),wl(i,new ml({duration:r,fn:Dl}).addProp("opacity",null,"0",""))})))];case 1:return t.sent(),e.removeClass("hide-cursor"),[2]}var n,i}))}))},e.prototype.close=function(){var e=this,t=this,n=t.app,i=t.win,r=t.containerEl;n.keymap.popScope(this.scope),Zl.isPhone?this.animateClose().then((function(){r.detach(),e.onClose()})):(r.detach(),this.onClose()),SA(this),this.shouldRestoreSelection&&function(e){if(e&&(e.focusEl||e.range)){var t=e.win,n=e.focusEl,i=e.range;t.focus();var r=n&&n.instanceOf(HTMLElement)&&n.hasClass("cm-content");if(i&&!r&&Dw(t,i.startContainer)&&Dw(t,i.endContainer)){var o=t.getSelection();o&&(o.removeAllRanges(),o.addRange(i))}n&&(n.instanceOf(HTMLElement)||n.instanceOf(SVGElement))&&Dw(t,n)&&n.focus({preventScroll:!0})}}(this.selection),i&&i!==window&&i.removeEventListener("beforeunload",this.onWindowClose),this.win=null},e.prototype.onOpen=function(){},e.prototype.onClose=function(){},e.prototype.onWindowClose=function(){this.close()},e.prototype.onEscapeKey=function(e){e.defaultPrevented||this.close()},e.prototype.setTitle=function(e){return this.titleEl.setText(e),this},e.prototype.setContent=function(e){return String.isString(e)?this.contentEl.setText(e):this.contentEl.appendChild(e),this},e.prototype.setBackgroundOpacity=function(e){return this.bgOpacity=e,this},e.prototype.setDimBackground=function(e){return this.dimBackground=e,this},e}(),XA=function(e){function t(t){var n=e.call(this,t)||this;return n.buttonContainerEl=null,n.containerEl.addClass("mod-confirmation"),n.buttonContainerEl=n.modalEl.createDiv("modal-button-container"),n}return f(t,e),t.prototype.addCheckbox=function(e,t){return this.buttonContainerEl.createEl("label",{cls:"mod-checkbox"},(function(n){n.createEl("input",{attr:{tabindex:-1},type:"checkbox"}).addEventListener("click",t),n.appendText(e)})),this},t.prototype.addButton=function(e,t,n){var i=this,r=Array.isArray(e)?e:[e],o=this.buttonContainerEl.createEl("button",{cls:r.join(" "),text:t});return o.addEventListener("click",(function(e){return g(i,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),o.addClass("mod-loading"),[4,n(e)];case 1:return t.sent()||this.close(),[3,3];case 2:return o.removeClass("mod-loading"),[7];case 3:return[2]}}))}))})),this},t.prototype.addCancelButton=function(e){return this.addButton("mod-cancel",Qf.dialogue.buttonCancel(),(function(){e&&e()}))},t.prototype.onClose=function(){Bx()},t}(ZA),$A=function(e){function t(t,n){var i=e.call(this,t)||this;return i.addButton("mod-cta",n,i.accept.bind(i)),i.addCancelButton(i.cancel.bind(i)),i}return f(t,e),t.prototype.onOpen=function(){var e=this;this.promise=new Promise((function(t){e.resolve=t}))},t.prototype.accept=function(){var e;null===(e=this.resolve)||void 0===e||e.call(this,!0)},t.prototype.cancel=function(){var e;null===(e=this.resolve)||void 0===e||e.call(this,!1)},t.prototype.prompt=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return this.open(),[2,this.promise]}))}))},t.prototype.onClose=function(){e.prototype.onClose.call(this),this.cancel()},t}(XA),QA=createDiv("notice-container"),JA=function(){function e(e,t){void 0===t&&(t=4e3);var n=this,i=activeWindow;i.document.body.appendChild(QA);var r=this.containerEl=QA.createDiv({cls:"notice"});this.messageEl=this.noticeEl=r.createDiv({cls:"notice-message",text:e}),Zl.isMobile?wl(r,(new ml).addProp("transform","translateY(100%)","","")):wl(r,(new ml).addProp("transform","translateX(350px)","",""));var o=!1,a=function(){o||n.hide()};t&&(i.setTimeout(a,t),r.addEventListener("mouseenter",(function(){return o=!0})),r.addEventListener("mouseleave",(function(){o=!1,i.setTimeout(a,1e3)}))),r.addEventListener("click",(function(){return n.hide()}))}return e.prototype.setMessage=function(e){return this.messageEl.setText(e),this},e.prototype.addButton=function(e,t){var n=this;return this.containerEl.createDiv({cls:"notice-cta",text:e}).addEventListener("click",(function(e){n.hide(),t(e)})),this},e.prototype.hide=function(){var e=this.containerEl,t=function(){e.detach(),0===QA.childElementCount&&QA.detach()};if(Zl.isMobile)wl(e,new ml({duration:150}).addProp("transform","scale(1, 1)","scale(0.85, 0.85)","").addProp("opacity","1","0",""),t);else{var n=getComputedStyle(e),i=-e.offsetHeight,r=parseInt(n.marginBottom);isNaN(r)||(i-=r),wl(e,new ml({duration:120}).addProp("opacity","1","0").addProp("margin-top","0px",i+"px"),t)}},e}();window.Notice=JA;var eL=function(e){function t(t,n){var i=e.call(this,t)||this;i.title=Qf.dialogue.labelRenameFileGeneric(),i.modalEl.addClass("mod-file-rename");var r=i.inputEl=createEl("textarea",{cls:"rename-textarea"});return r.rows=1,r.innerText=n,i.app.nextFrame((function(){r.style.height="auto",r.style.height=r.scrollHeight+"px"})),r.addEventListener("keypress",(function(e){"Enter"!==e.key||e.isComposing||(e.preventDefault(),i.submit(r.value.trim()))})),r.addEventListener("input",(function(e){Bx(),r.rows=1,r.style.height="auto",r.style.height=r.scrollHeight+"px",i.validate(r.value.trim())})),i.setContent(createFragment((function(e){e.appendChild(r)}))).addButton("mod-cta",Qf.dialogue.buttonSave(),(function(){return i.submit(r.value.trim())})).addCancelButton(),i}return f(t,e),t.prototype.validate=function(e){},t.prototype.onOpen=function(){e.prototype.onOpen.call(this),this.setTitle(this.title),this.inputEl.select(),this.inputEl.focus()},t.prototype.displayError=function(e,t){Ox(this.inputEl,e,{classes:["mod-wide","mod-error"]}),t&&setTimeout((function(){return Bx()}),2e3)},t}(XA),tL=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.onSave=i,r}return f(t,e),t.prototype.validate=function(e){dw.test(e)?this.displayError(Qf.plugins.fileExplorer.msgInvalidCharacters()+uw,!1):e.startsWith(".")?this.displayError(Qf.plugins.fileExplorer.msgBadDotfile(),!1):pw.test(e)&&this.displayError(Qf.plugins.fileExplorer.msgUnsafeCharacters()+hw,!1)},t.prototype.submit=function(e){this.close(),this.onSave(e)},t}(eL),nL=function(e){function t(t,n){var i=e.call(this,t,n.basename)||this;return i.file=n,"md"===n.extension&&(i.title=Qf.dialogue.labelRenameFile()),i}return f(t,e),t.prototype.validate=function(t){e.prototype.validate.call(this,t);var n=this.app,i=this.file;n.vault.checkForDuplicate(i,t)&&this.displayError(Qf.plugins.fileExplorer.msgFileAlreadyExists(),!1)},t.prototype.submit=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:if(this.close(),n=(t=this).app,i=t.file,""===e)return new JA(Qf.plugins.fileExplorer.msgEmptyFileName()),[2];if(r=i.getNewPathAfterRename(e),i.path===r)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.fileManager.renameFile(i,r)];case 2:return s.sent(),new JA(Qf.dialogue.msgRenameSuccess()),[3,4];case 3:return(o=s.sent())&&(a=o.message||o.code||o.toString(),new JA(a)),[3,4];case 4:return[2]}}))}))},t}(eL),iL=function(e){function t(t,n,i,r,o){var a=e.call(this,t,o)||this;return a.file=i,a.editor=n,a.tokenRange=r,a}return f(t,e),t.prototype.submit=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C,M;return y(this,(function(y){switch(y.label){case 0:return(t=this.getError(e))?(Ox(this.inputEl,t,{placement:"bottom",classes:["mod-error"]}),[2,!0]):(i=(n=this).file,r=n.app,o=r.fileManager,a=r.vault,s=this.getChanges(e),l=s.data.size,0!==(c=s.count())?[3,1]:(this.replaceInEditor(e),[3,6]));case 1:return(u=s.get(i.path))&&u.length>0?(s.clear(i.path),h=this.replaceInFile(e),d={link:"",original:"",position:{start:{line:0,col:0,offset:h.start},end:{line:0,col:0,offset:h.end}}},u.push({sourcePath:i.path,change:h.text,reference:d}),[4,a.process(i,(function(e){return EL(e,u)}))]):[3,3];case 2:return y.sent(),[3,4];case 3:this.replaceInEditor(e),y.label=4;case 4:return[4,o.updateInternalLinks(s)];case 5:y.sent(),p=Qf.nouns.linkWithCount({count:c}),f=Qf.nouns.fileWithCount({count:l}),m=Qf.dialogue.msgUpdatedLinks({links:p,files:f}),new JA(m),y.label=6;case 6:for(v=o.linkUpdaters,g=0,b=Object.values(v);g<b.length;g++)w=b[g],k=this.getCustomReplacements(e),C=k.oldSubpath,M=k.newSubpath,w.renameSubpath(this.file,C,M);return this.close(),[2]}}))}))},t}(eL),rL=function(e){function t(t,n,i,r,o){var a=e.call(this,t,n,i,r,o)||this;return a.title=Qf.dialogue.labelRenameHeading(),a.oldHeading=o,a}return f(t,e),t.prototype.getError=function(e){return""===e?Qf.dialogue.msgHeadingEmpty():null},t.prototype.getChanges=function(e){var t=this.file,n=this.app,i=n.metadataCache,r=new rc,o=$S(this.oldHeading).toLowerCase(),a=QS(e);return n.fileManager.iterateAllRefs((function(e,n){var s=WS(n.link),l=s.path,c=s.subpath;c&&($S(c.substring(1)).toLowerCase()===o&&i.getFirstLinkpathDest(l,e)===t&&r.add(e,{sourcePath:e,reference:n,change:SL(n,l+"#"+a)}))})),r},t.prototype.replaceInEditor=function(e){var t=this.tokenRange,n=this.editor,i=n.offsetToPos(t.start),r=n.getLine(i.line),o=this.replaceHeadingText(r,e);n.setLine(i.line,o)},t.prototype.replaceInFile=function(e){var t=this.tokenRange,n=this.editor,i=n.offsetToPos(t.start),r=n.getLine(i.line),o=this.replaceHeadingText(r,e);return m(m({},t),{text:o})},t.prototype.replaceHeadingText=function(e,t){return e.replace(/^(#{1,6} ).*/m,(function(e,n){return n+t}))},t.prototype.getCustomReplacements=function(e){return{oldSubpath:$S(this.oldHeading).toLowerCase(),newSubpath:QS(e)}},t}(iL),oL=function(e){function t(t,n,i,r,o){var a=e.call(this,t,n,i,r,o.text.substring(1))||this;return a.title=Qf.dialogue.labelRenameBlockid(),a.token=o,a}return f(t,e),t.prototype.getError=function(e){return""===e?Qf.dialogue.msgBlockIdEmpty():/^[a-zA-Z0-9\-]+$/.test(e)?null:Qf.dialogue.msgBlockIdInvalid()},t.prototype.getChanges=function(e){var t=this,n=t.file,i=t.app,r=t.token,o=i.metadataCache,a=new rc,s="#"+r.text.toLowerCase();return i.fileManager.iterateAllRefs((function(t,i){var r=WS(i.link),l=r.path,c=r.subpath;c&&(c.toLowerCase()===s&&o.getFirstLinkpathDest(l,t)===n&&a.add(t,{sourcePath:t,reference:i,change:SL(i,l+"#^"+e)}))})),a},t.prototype.replaceInEditor=function(e){var t=this.editor,n=this.token;t.replaceRange("^"+e,n.start,n.end)},t.prototype.replaceInFile=function(e){return m(m({},this.tokenRange),{text:"^"+e})},t.prototype.getCustomReplacements=function(e){return{oldSubpath:this.token.text.toLowerCase(),newSubpath:"^"+e}},t}(iL);function aL(e){if(!e||"string"!=typeof e)return null;var t=!0,n=e.split(".").map((function(e){var n=parseInt(e);return isNaN(n)&&(t=!1),n}));return t?n:null}function sL(e,t){var n=aL(e),i=aL(t);return!!i&&(!n||function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++){if(e[i]<t[i])return!0;if(e[i]>t[i])return!1}return e.length<t.length||(e.length,t.length,!1)}(n,i))}var lL=function(){function e(){this.queue=[],this.offset=0}return e.prototype.get=function(){return this.queue},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length-this.offset},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0==this.queue.length},e.prototype.enqueue=function(e){this.queue.push(e)},e.prototype.enqueueArray=function(e){for(var t=this.queue,n=0,i=e;n<i.length;n++){var r=i[n];t.push(r)}},e.prototype.remove=function(e){for(var t=this.queue,n=t.length-1;n>=this.offset;n--)t[n]===e&&t.splice(n,1)},e.prototype.clear=function(){this.queue=[],this.offset=0},e.prototype.dequeue=function(){var e=this.queue,t=this.offset;if(0!=e.length){var n=e[t];return e[t]=void 0,2*(t+=1)>=e.length&&(this.queue=e.slice(t),t=0),this.offset=t,n}},e.prototype.peek=function(){return this.queue.length>0?this.queue[this.offset]:void 0},e}(),cL=function(){function e(){this.promise=Promise.resolve()}return e.prototype.queue=function(e){var t=this.promise.then(e,e);return this.promise=t,t},e}();function uL(){var e={promise:null,resolve:null,reject:null};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}function hL(e,t,n){var i=this;void 0===n&&(n=t);var r=null,o=0,a=null;return function(){return g(i,void 0,Promise,(function(){var i=this;return y(this,(function(s){return a?[2,a]:r&&o>Date.now()?[2,r]:(a=g(i,void 0,void 0,(function(){return y(this,(function(i){switch(i.label){case 0:o=Date.now()+n,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e()];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),a=null,[2,null];case 4:return o=Date.now()+t,a=null,setTimeout((function(){o>Date.now()&&(r=null)}),t),[2,r]}}))})),[2,a])}))}))}}var dL=function(){function e(e){this.running=!1,this.cancelled=!1;var t=e||{},n=t.onStart,i=t.onStop,r=t.onCancel;this.onStart=n||null,this.onStop=i||null,this.onCancel=r||null}return e.prototype.start=function(){this.running||(this.running=!0,this.onStart&&this.onStart())},e.prototype.stop=function(){this.running&&(this.running=!1,this.onStop&&this.onStop())},e.prototype.cancel=function(){this.stop(),this.cancelled||(this.cancelled=!0,this.onCancel&&this.onCancel())},e.prototype.isRunning=function(){return this.running},e.prototype.isCancelled=function(){return this.cancelled},e}(),pL=function(){function e(e){this.items=new lL,this.promise=null,this.runnable=new dL(e)}return e.prototype.addList=function(e){this.items.enqueueArray(e),this.notify()},e.prototype.add=function(e){this.items.enqueue(e),this.notify()},e.prototype.remove=function(e){this.items.remove(e)},e.prototype.clear=function(){this.items.clear()},e.prototype.notify=function(){var e=this.promise;e&&(this.promise=null,setTimeout((function(){e&&e.resolve()}),0))},e.prototype.cancel=function(){this.runnable.cancel()},e.prototype.generator=function(){return C(this,arguments,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:e=this.runnable,n.label=1;case 1:return e.isCancelled()?[4,k(void 0)]:[3,3];case 2:return[2,n.sent()];case 3:return 0!==(t=this.items).length?[3,5]:(e.stop(),[4,k((this.promise=uL()).promise)]);case 4:return n.sent(),[3,8];case 5:return e.start(),[4,k(t.dequeue())];case 6:return[4,n.sent()];case 7:n.sent(),n.label=8;case 8:return[3,1];case 9:return[2]}}))}))},e}();function fL(e){return C(this,arguments,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:t=0,n=e,i.label=1;case 1:return t<n.length?[4,k(n[t])]:[3,5];case 2:return[4,i.sent()];case 3:i.sent(),i.label=4;case 4:return t++,[3,1];case 5:return[2]}}))}))}function mL(e,t){return C(this,arguments,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,C;return y(this,(function(y){switch(y.label){case 0:i=(n=t||{}).batchSize,r=void 0===i?10:i,o=n.duration,a=void 0===o?5:o,s=n.maxDelay,l=void 0===s?100:s,c=n.beforePause,u=0,h=performance.now(),y.label=1;case 1:y.trys.push([1,9,10,15]),d=!0,p=M(e),y.label=2;case 2:return[4,k(p.next())];case 3:return f=y.sent(),(g=f.done)?[3,8]:(C=f.value,d=!1,[4,k(C)]);case 4:return[4,y.sent()];case 5:return y.sent(),++u%r!=0?[3,7]:(m=performance.now())-h>a?(c&&c(m),[4,k(new Promise((function(e){return Sc(e,l)})))]):[3,7];case 6:y.sent(),h=performance.now(),y.label=7;case 7:return d=!0,[3,2];case 8:return[3,15];case 9:return v=y.sent(),b={error:v},[3,15];case 10:return y.trys.push([10,,13,14]),d||g||!(w=p.return)?[3,12]:[4,k(w.call(p))];case 11:y.sent(),y.label=12;case 12:return[3,14];case 13:if(b)throw b.error;return[7];case 14:return[7];case 15:return[2]}}))}))}var vL=function(){function e(){this.promises=[]}return e.prototype.add=function(e){this.promises.push(e())},e.prototype.addPromise=function(e){this.promises.push(e)},e.prototype.isEmpty=function(){return 0===this.promises.length},e.prototype.promise=function(){return Promise.all(this.promises)},e}();function gL(e){return new Promise((function(t){return e.then(t,t)}))}var yL=/^(!?\[\[)(.*?)(\|(.*))?(]])$/,bL=/^(!?\[)(.*?)(]\(\s*)((<[^>]*?>|[^ "]+?)(\s+([^ ]+|"[^"]+"|'[^']+'|\([^']+\)))?)?(\s*\))$/,wL=function(){function e(e){this.app=null,this.vault=null,this.fileParentCreatorByType={},this.inProgressUpdates=null,this.updateQueue=new cL,this.linkUpdaters={},this.app=e,this.vault=e.vault,this.registerFileParentCreator("md",this.getMarkdownNewFileParent.bind(this))}return e.prototype.getMarkdownNewFileParent=function(e){var t=this.vault,n=t.getConfig("newFileLocation");if("folder"===n){var i=t.getConfig("newFileFolderPath");if((r=t.getAbstractFileByPath(i))instanceof kw)return r}else if("current"===n){var r;i=Yc(e);if((r=t.getAbstractFileByPath(i))instanceof kw)return r}return t.getRoot()},e.prototype.getNewFileParent=function(e,t){var n=t&&Qc(t)||"md",i=this.fileParentCreatorByType[n];return i||(console.error("No file creator assigned to create file with extension "+n+". Falling back to Markdown file creator."),i=this.fileParentCreatorByType.md),i(e)},e.prototype.registerFileParentCreator=function(e,t){this.fileParentCreatorByType[e]=t},e.prototype.unregisterFileCreator=function(e){delete this.fileParentCreatorByType[e]},e.prototype.canCreateFileWithExt=function(e){return this.fileParentCreatorByType.hasOwnProperty(e||"md")},e.prototype.createNewMarkdownFileFromLinktext=function(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){if(!mw(e))throw new Error(Qf.plugins.fileExplorer.msgInvalidCharacters()+uw);return n=null,e.contains("/")||(n=this.getNewFileParent(t,e)),[2,this.createNewMarkdownFile(n,e)]}))}))},e.prototype.createNewMarkdownFile=function(e,t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){return[2,this.createNewFile(e,t,"md",n)]}))}))},e.prototype.createNewFile=function(e,t,n,i){return g(this,void 0,Promise,(function(){var r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return r=this.vault,e||(e=r.getRoot()),n||(n=t&&Qc(t)||"md"),this.fileParentCreatorByType.hasOwnProperty(n)||(n="md"),o=e.getParentPrefix(),t?(eu(t=t.trim(),n)&&(t=$c(t)),t=tu(t),a=r.getAvailablePath(o+t,n)):(s=Qf.plugins.fileExplorer.labelUntitledFile(),a=r.getAvailablePath(o+s,n)),!(l=Yc(a))||"/"===l||r.getAbstractFileByPathInsensitive(l)?[3,2]:[4,r.createFolder(l)];case 1:c.sent(),c.label=2;case 2:return[2,r.create(a,i||"")]}}))}))},e.prototype.createNewFolder=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=!e||e.isRoot()?"":e.path+"/",n=Qf.plugins.fileExplorer.labelUntitledFolder(),i=this.vault.getAvailablePath(t+n),[4,this.vault.createFolder(i)];case 1:return o.sent(),(r=this.vault.getAbstractFileByPath(i))&&r instanceof kw?[2,r]:[2,null]}}))}))},e.prototype.renameFile=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return[4,this.runAsyncLinkUpdate((function(){return n.vault.rename(e,t)}))];case 1:return i.sent(),[2]}}))}))},e.prototype.iterateAllRefs=function(e){this.app.metadataCache.iterateReferences(e);for(var t=this.linkUpdaters,n=0,i=Object.values(t);n<i.length;n++){i[n].iterateReferences(e)}},e.prototype.runAsyncLinkUpdate=function(e){return g(this,void 0,void 0,(function(){var t=this;return y(this,(function(n){return this.inProgressUpdates?(this.inProgressUpdates.push(e),[2]):[2,this.updateQueue.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return[4,new Promise((function(e){return a.app.metadataCache.onCleanCache(e)}))];case 1:s.sent(),t=[],n=this.app,i=n.metadataCache,r=n.vault,this.iterateAllRefs((function(e,n){var o=_S(n.link);if(o){var a=r.getAbstractFileByPath(e);if(a instanceof ww){var s=i.getLinkpathDest(o,e);s.length>0&&t.push({sourceFile:a,reference:n,resolvedFile:s[0],resolvedPaths:s.map((function(e){return e.path}))})}}})),s.label=2;case 2:return s.trys.push([2,,7,8]),this.inProgressUpdates=[],[4,e(t)];case 3:s.sent(),s.label=4;case 4:return this.inProgressUpdates.length>0?(o=this.inProgressUpdates,this.inProgressUpdates=[],[4,Promise.all(o.map((function(e){return e(t)})))]):[3,6];case 5:return s.sent(),[3,4];case 6:return[3,8];case 7:return this.inProgressUpdates=null,[7];case 8:return[4,this.updateAllLinks(t)];case 9:return s.sent(),[2]}}))}))}))]}))}))},e.prototype.updateAllLinks=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(d){for(t=new rc,n=this.app.metadataCache,i=0,r=e;i<r.length;i++)o=r[i],(a=kL(o,n))&&t.add(a.sourcePath,a);return 0===(s=t.count())?[2]:(l=Qf.nouns.linkWithCount({count:s}),c=Qf.nouns.fileWithCount({count:t.data.size}),u=function(){return g(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.updateInternalLinks(t)];case 1:return e.sent(),new JA(Qf.dialogue.msgUpdatedLinks({links:l,files:c})),[2]}}))}))},this.vault.getConfig("alwaysUpdateLinks")?[2,u()]:[2,new Promise((function(e,t){try{var n=Qf.dialogue.labelLinkAffected({links:l,files:c}),i=new ZA(h.app);i.titleEl.setText(Qf.dialogue.labelUpdateLinks()),i.contentEl.createEl("p",{text:Qf.dialogue.labelConfirmUpdateLinkToFile()}),i.contentEl.createEl("p",{text:n}),i.onClose=function(){return e()};var r=function(t){i.onClose=function(){return null},i.close(),t&&h.app.vault.setConfig("alwaysUpdateLinks",!0),e(u())},o=i.modalEl.createDiv("modal-button-container");o.createEl("button",{text:Qf.dialogue.buttonAlwaysUpdate()}).addEventListener("click",(function(){return r(!0)})),o.createEl("button",{text:Qf.dialogue.buttonJustOnce()}).addEventListener("click",(function(){return r()})),o.createEl("button",{text:Qf.dialogue.buttonDoNotUpdate()}).addEventListener("click",(function(){return i.close()})),i.open()}catch(e){t(e)}}))])}))}))},e.prototype.renameProperty=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:n=this.app,i=n.metadataCache,(r=n.metadataTypeManager).types.hasOwnProperty(e)&&(o=r.types[e].type,KA.hasOwnProperty(e)||r.unsetType(e),r.setType(t,o)),a=0,s=i.getCachedFiles(),d.label=1;case 1:return a<s.length?(l=s[a],i.isUserIgnored(l)?[3,3]:(c=i.getCache(l))&&(u=c.frontmatter)&&u.hasOwnProperty(e)&&(h=this.vault.getAbstractFileByPath(l))&&h instanceof ww?[4,this.app.vault.process(h,(function(n){var i,r=xL(n),o=r.content,a=r.frontmatter;return a.hasOwnProperty(t)?(CL(a,((i={})[t]=a[e],i)),delete a[e]):a=function(e,t,n){var i={};for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];r===t?i[n]=o:i[r]=o}return i}(a,e,t),TL(a)+o}))]:[3,3]):[3,4];case 2:d.sent(),d.label=3;case 3:return a++,[3,1];case 4:return[2]}}))}))},e.prototype.getAllLinkResolutions=function(){return[]},e.prototype.updateInternalLinks=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:t=this.linkUpdaters,n=function(n){var r,o,a;return y(this,(function(s){switch(s.label){case 0:return(r=i.vault.getAbstractFileByPath(n))instanceof ww?(o=r.extension,a=e.get(n),t.hasOwnProperty(o)?[4,t[o].applyUpdates(r,a)]:[3,2]):[2,"continue"];case 1:return s.sent(),[3,4];case 2:return[4,i.vault.process(r,(function(e){return EL(e,a)}))];case 3:s.sent(),s.label=4;case 4:return[2]}}))},i=this,r=0,o=e.keys(),s.label=1;case 1:return r<o.length?(a=o[r],[5,n(a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.promptForDeletion=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l=this;return y(this,(function(c){switch(c.label){case 0:return t=this.app,n=t.vault.getConfig("promptDelete"),i=t.vault.getConfig("trashOption"),n?((r=document.createDocumentFragment()).createEl("p",{text:Qf.dialogue.labelConfirmDeletion({filename:e.name})}),"system"===i?r.createEl("p",{text:Qf.dialogue.labelMoveToSystemTrash()}):"local"===i?r.createEl("p",{text:Qf.dialogue.labelMoveToVaultTrash()}):"none"===i&&r.createEl("p",{cls:"mod-warning",text:Qf.dialogue.labelPermanentDelete()}),e instanceof kw&&e.children.length>0&&(r.createEl("p",{cls:"mod-warning",text:Qf.dialogue.labelNonEmptyFolder()}),r.createEl("p",{cls:"mod-warning",text:Qf.dialogue.labelDeleteFolderWarning()})),e instanceof ww&&(o=t.metadataCache.getBacklinksForFile(e),(a=o.count())>0&&(s=Qf.dialogue.labelExistingBacklink({count:a}),r.createEl("p",{cls:"mod-warning",text:s}))),[4,new Promise((function(n,i){var o=!1,a=new XA(t).setTitle(e instanceof kw?Qf.dialogue.labelDeleteFolder():Qf.dialogue.labelDeleteFile()).setContent(r);Zl.isMobile?a.addButton("mod-destructive",Qf.dialogue.buttonDeleteDoNotAskAgain(),(function(){return g(l,void 0,void 0,(function(){var r;return y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t.vault.setConfig("promptDelete",!1),[4,this.trashFile(e)];case 1:return o.sent(),n(),[3,3];case 2:return r=o.sent(),i(r),[3,3];case 3:return[2]}}))}))})):a.addCheckbox(Qf.dialogue.labelDoNotAskAgain(),(function(e){o=e.target.checked})),a.addButton("mod-warning",Qf.dialogue.buttonDelete(),(function(){return g(l,void 0,void 0,(function(){var r;return y(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),o&&t.vault.setConfig("promptDelete",!1),[4,this.trashFile(e)];case 1:return a.sent(),n(),[3,3];case 2:return r=a.sent(),i(r),[3,3];case 3:return[2]}}))}))})).addCancelButton((function(){n()})).open()}))]):[3,2];case 1:return c.sent(),[3,4];case 2:return[4,this.trashFile(e)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))},e.prototype.promptForFolderDeletion=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return[2,this.promptForDeletion(e)]}))}))},e.prototype.promptForFileDeletion=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return[2,this.promptForDeletion(e)]}))}))},e.prototype.promptForFileRename=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return new nL(this.app,e).open(),[2]}))}))},e.prototype.trashFile=function(e){return g(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=this.app,"system"!==(n=t.vault.getConfig("trashOption"))?[3,2]:[4,t.vault.trash(e,!0)];case 1:return i.sent(),[3,6];case 2:return"local"!==n?[3,4]:[4,t.vault.trash(e,!1)];case 3:return i.sent(),[3,6];case 4:return"none"!==n?[3,6]:[4,t.vault.delete(e,!0)];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))},e.prototype.downloadAttachmentsForNote=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return"md"!==e.extension?[2]:(t=[],n=[],i=function(e){var i=pS(e);t=[],n=[],jk(i,["image"],(function(e,i,r){var o=e.url;o&&!Kk(o)&&/^(https?:\/\/|data:)/.test(o)&&(t.push(e),n.push(o))}))},[4,this.app.vault.read(e)]);case 1:return r=s.sent(),i(r),0===n.length?(new JA(Qf.dialogue.labelNoAttachments()),[2]):[4,this.promptForImageDownload(n.unique())];case 2:return(o=s.sent())&&0!==Object.keys(o).length?[4,this.app.vault.process(e,(function(n){n!==r&&i(n);for(var s=[],l=0,c=t;l<c.length;l++){var u=c[l],h=u.url;if(o.hasOwnProperty(h)){var d=o[h],p=u.position,f="";u.alt&&"string"==typeof u.alt&&(f=u.alt);var m=a.app.fileManager.generateMarkdownLink(d,e.path,"",f);s.push({from:p.start.offset,to:p.end.offset,text:m})}}s.sort((function(e,t){return t.from-e.from}));for(var v=0,g=s;v<g.length;v++){var y=g[v];n=n.substring(0,y.from)+y.text+n.substring(y.to)}return n}))]:[2];case 3:return s.sent(),[2]}}))}))},e.prototype.promptForImageDownload=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f=this;return y(this,(function(m){switch(m.label){case 0:if(0===e.length)return[2];for((t=new $A(this.app,Qf.dialogue.buttonDownload()).setTitle(Qf.dialogue.labelDownloadAttachments())).modalEl.addClass("mod-scrollable-content"),n=[],i={},r=0,o=e;r<o.length;r++)a=o[r],s=new AL(a),n.push(s),i[a]=s,a.startsWith("data:")?(l=RA(a))&&(c=au(l.contentType)||"jpg",s.name="Image."+c):(u=new URL(a),h=u.pathname.split("/").filter((function(e){return!!e})).last(),-1!==(d=h.lastIndexOf("."))&&/^[a-z0-9]+$/i.test(h.substring(d+1))&&(s.name=h));return t.contentEl.createDiv("download-attachments").setChildrenInPlace(n.map((function(e){return e.el}))),[4,t.prompt()];case 1:return m.sent()?(p={},[4,zw(t.contentEl,(function(){return g(f,void 0,void 0,(function(){var t,n,r,o,a,s,l,c,u,h,d,f,m,v,g,b,w,k,C,M,E,S,x;return y(this,(function(y){switch(y.label){case 0:t=0,n=e,y.label=1;case 1:return t<n.length?(r=n[t],(o=i[r]).checked?(a=o.name,r.startsWith("data:")?(s=RA(r))?(l=Xc(a)||"Image",c=au(s.contentType)||"jpg",u=p,h=r,[4,this.app.saveAttachment(l,c,s.arrayBuffer)]):[3,3]:[3,4]):[3,7]):[3,8];case 2:u[h]=y.sent(),y.label=3;case 3:return[3,7];case 4:return[4,UA(r)];case 5:if(d=y.sent(),f=GA(d.headers,"Content-Disposition")||"",m=f.split(";").map((function(e){return e.trim()})).filter((function(e){return!!e})),m.contains("attachment"))for(v=0,g=m;v<g.length;v++)if((b=g[v]).startsWith("filename=")){a=b.substring(9).replace(/"/g,"");break}return a||(w=(GA(d.headers,"Content-Type")||"").split(";")[0].trim()).toLowerCase().startsWith("image/")&&(k=au(w)||"jpg",a="Image."+k),a||(a="Image.jpg"),C=Xc(a),M=Qc(a),E=d.arrayBuffer,S=p,x=r,[4,this.app.saveAttachment(C,M,E)];case 6:S[x]=y.sent(),y.label=7;case 7:return t++,[3,1];case 8:return[2]}}))}))}))]):[2,null];case 2:return m.sent(),t.close(),new JA(Qf.dialogue.labelDownloadedAttachments({count:Object.keys(p).length})),[2,p]}}))}))},e.prototype.generateMarkdownLink=function(e,t,n,i){var r,o=this.app,a=o.vault.getConfig("useMarkdownLinks"),s=!a,l=o.metadataCache.fileToLinktext(e,t,s)+(n||"");if(e.path===t&&n&&(l=n),a){var c=Jk(l);r="md"===e.extension?"[".concat(i||e.basename,"](").concat(c,")"):"![".concat(i||"","](").concat(c,")")}else i&&i.toLowerCase()===l.toLowerCase()&&(l=i,i=null),r=i?"[[".concat(l,"|").concat(i,"]]"):"[[".concat(l,"]]"),"md"!==e.extension&&(r="!"+r);return r},e.prototype.createAndOpenMarkdownFile=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return n=this.app.workspace,i=null!==(s=null===(a=n.getActiveFile())||void 0===a?void 0:a.path)&&void 0!==s?s:"",r=this.getNewFileParent(i,e),[4,this.createNewMarkdownFile(r,e)];case 1:return o=l.sent(),[4,n.getLeaf(t).openFile(o,{active:!0,state:{mode:"source"},eState:{rename:"all"}})];case 2:return l.sent(),[2,o]}}))}))},e.prototype.insertIntoFile=function(e,t){return g(this,arguments,void 0,(function(e,t,n){return void 0===n&&(n="append"),y(this,(function(i){switch(i.label){case 0:return[4,this.app.vault.process(e,(function(e){var i,r,o,a,s,l;try{o=(i=xL(t)).content,a=i.frontmatter}catch(e){o=t,a={},new JA(Qf.properties.msgInvalidProperties())}try{s=(r=xL(e)).content,l=r.frontmatter}catch(t){s=e,l={},new JA(Qf.properties.msgInvalidProperties())}var c,u="prepend"===n?o:s,h="prepend"===n?s:o;if(c=u&&h&&!(u.slice(-2)+h.slice(0,2)).contains("\n\n")?u.endsWith("\n")||h.startsWith("\n")?u+"\n"+h:u+"\n\n"+h:u+h,CL(l,a),Object.keys(l).length>0){var d=_D(l).trim();c="---\n".concat(d,"\n---\n")+c}return c}))];case 1:return i.sent(),[2]}}))}))},e.prototype.processFrontMatter=function(e,t,n){return g(this,void 0,void 0,(function(){return y(this,(function(i){switch(i.label){case 0:return"md"!==e.extension?[2]:[4,this.vault.process(e,(function(e){var n=vS(e),i=n.exists?UD(n.frontmatter):{};if(i&&"object"==typeof i||(i={}),t(i),0===Object.keys(i).length)return n.exists?e.slice(n.contentStart):e;var r=_D(i);return n.exists?e.slice(0,n.from)+r+e.slice(n.to):"---\n"+r+"---\n"+e}),n)];case 1:return i.sent(),[2]}}))}))},e.prototype.storeTextFileBackup=function(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),(n=this.app.internalPlugins.getEnabledPluginById("file-recovery"))?[4,n.forceAdd(e,t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.getAvailablePathForAttachment=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){return n=this.app,i=n.vault,r=n.workspace,o=Xc(e),a=Qc(e),s=null,t?(l=i.getAbstractFileByPath(t))&&l instanceof ww&&(s=l):s=r.getActiveFile(),[2,i.getAvailablePathForAttachments(o,a,s)]}))}))},e}();function kL(e,t){var n=e.reference,i=e.sourceFile,r=e.resolvedPaths,o=i.path,a=WS(n.link),s=a.path,l=a.subpath,c=t.getLinkpathDest(s,o).map((function(e){return e.path}));if(0===c.length||!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(r,c)){var u=yL.test(n.original),h=t.fileToLinktext(e.resolvedFile,o,u)+l;if(n.link!==h){var d=[],p=t.getFileCache(e.resolvedFile);return p&&(d=MS(p.frontmatter)),{sourcePath:o,reference:n,change:SL(n,h,d)}}}}function CL(e,t){if(0!==Object.keys(t).length)for(var n in t)if(t.hasOwnProperty(n)){var i=e.hasOwnProperty(n)?e[n]:void 0,r=t[n];i?Array.isArray(i)&&Array.isArray(r)?e[n]=i.concat(r).unique():"object"==typeof i&&null!==r&&"object"==typeof r?CL(i,r):null!==r&&(e[n]=r):e[n]=r}}function ML(e,t,n){for(;e&&t.length;){var i=t.shift();if(Array.isArray(e)){var r=parseInt(i);if(isNaN(r)||r<0||r>=e.length)return;if(!(t.length>0))return void(e[r]=n);e=e[r]}else{if("object"!=typeof e)return;if(!(t.length>0))return void(e[i]=n);e=e[i]}}}function EL(e,t){for(var n=[],i=[],r=0,o=t;r<o.length;r++){var a=o[r];if(AS(a.reference)){var s=a.reference.position;n.push({start:s.start.offset,end:s.end.offset,text:a.change})}else LS(a.reference)&&i.push({key:a.reference.key,value:a.change})}if(e=function(e,t){t.sort((function(e,t){return t.start-e.start}));for(var n=0,i=t;n<i.length;n++){var r=i[n];e=e.substring(0,r.start)+r.text+e.substring(r.end)}return e}(e,n),0===i.length)return e;var l,c=vS(e);if(!c.exists)return e;try{l=UD(c.frontmatter)}catch(t){return e}for(var u=0,h=i;u<h.length;u++){var d=h[u];ML(l,d.key.split("."),d.value)}var p=_D(l);return e.slice(0,c.from)+p+e.slice(c.to)}function SL(e,t,n){var i,r,o=e.original,a=e.link,s=o.match(yL);if(s){var l=s[1],c=s[2],u=s[4],h=void 0===u?"":u,d=s[5];if(h){var p=/\\\|/.test(o)?"\\|":"|",f=h.trim();iu(c)!==f||(null==n?void 0:n.contains(f))||(h=iu(_S(t))),r=l+t+p+h+d}else r=l+t+d}else{var m=o.match(bL),v=!m||!m[5].startsWith("<")?Jk(t):"<"+t+">";if(m){var g=m[2],y=Gc(g).trim();y===iu(c=_S(a))?g=iu(_S(t)):y.contains("/")&&y===ru(c)&&(g=ru(_S(t))),r=m[1]+g+m[3]+v+(null!==(i=m[6])&&void 0!==i?i:"")+m[8]}else r="[](".concat(v,")"),o.startsWith("!")&&(r="!"+r)}return r}function xL(e){var t={},n=vS(e),i=n.contentStart,r=n.frontmatter,o=e.slice(i);return r&&(t=UD(r)),{content:o,frontmatter:t}}function TL(e){var t="";if(e&&Object.keys(e).length>0){var n=_D(e).trim();t="---\n".concat(n,"\n---\n")}return t}function DL(e,t){var n=TL(t),i=vS(e).contentStart;return n+e.slice(i)}var AL=function(){function e(e){var t=this;this.name="",this.url=e,this.el=createDiv("download-attachment-item"),this.el.addEventListener("click",(function(e){0!==e.button||e.defaultPrevented||t.setChecked(!t.checked)}));var n=this.checkboxEl=this.el.createEl("input",{type:"checkbox"});n.addEventListener("change",(function(){t.setChecked(n.checked)})),this.setChecked(!0),Hx(this.el,(function(){var e=pc(t.url,100);return t.name&&(e=t.name+"\n"+e),e})),this.el.createEl("img",{attr:{src:e}})}return e.prototype.setChecked=function(e){this.checked!==e&&(this.checked=e,this.checkboxEl.checked=e,this.el.toggleClass("is-selected",e))},e}(),LL=function(e,t){return e[0]-t[0]};function PL(e){if(0===e.length)return e;e.sort(LL);for(var t=[e[0]],n=1;n<e.length;n++){var i=t.last();i[1]<e[n][0]?t.push(e[n]):i[1]<e[n][1]&&(i[1]=e[n][1])}return t}var IL=/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/,FL=/\s/,OL=/[\u0F00-\u0FFF\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/;function BL(e){for(var t=e.toLowerCase(),n=[],i=0,r=0;r<t.length;r++){var o=t.charAt(r);FL.test(o)?(i!==r&&n.push(t.substring(i,r)),i=r+1):(IL.test(o)||OL.test(o))&&(i!==r&&n.push(t.substring(i,r)),n.push(o),i=r+1)}return i!==t.length&&n.push(t.substring(i,t.length)),{query:e,tokens:n,fuzzy:t.split("")}}function NL(e){var t=BL(e);return function(e){return VL(t,e)}}function RL(e,t,n,i){if(0===e.length)return 0;var r=0;r-=Math.max(0,e.length-1),r-=i/10;var o=e[0][0];return r-=(e[e.length-1][1]-o+1-t)/100,r-=o/1e3,r-=n/1e4}function HL(e,t,n,i){if(0===e.length)return null;for(var r=n.toLowerCase(),o=0,a=0,s=[],l=0;l<e.length;l++){var c=e[l],u=r.indexOf(c,a);if(-1===u)return null;var h=n.charAt(u);if(u>0&&!IL.test(h)&&!OL.test(h)){var d=n.charAt(u-1);if(h.toLowerCase()!==h&&d.toLowerCase()!==d||h.toUpperCase()!==h&&!IL.test(d)&&!FL.test(d)&&!OL.test(d))if(i){if(u!==a){a+=c.length,l--;continue}}else o+=1}if(0===s.length)s.push([u,u+c.length]);else{var p=s[s.length-1];p[1]<u?s.push([u,u+c.length]):p[1]=u+c.length}a=u+c.length}return{matches:s,score:RL(s,t.length,r.length,o)}}function VL(e,t){if(""===e.query)return{score:0,matches:[]};var n=HL(e.tokens,e.query,t,!1);return n||HL(e.fuzzy,e.query,t,!0)}function zL(e){e.sort((function(e,t){return t.match.score-e.match.score}))}function qL(e,t){if(e)for(var n=0,i=e;n<i.length;n++){var r=i[n];r[0]+=t,r[1]+=t}}function UL(e,t){for(var n=t.toLowerCase(),i=[],r=0,o=e;r<o.length;r++){var a=o[r];if(a){for(var s=!1,l=-1,c=a.length;-1!==(l=n.indexOf(a,l));)s=!0,i.push([l,l+c]),l+=c+1;if(!s)return null}}return PL(i)}function _L(e){var t=e.toLowerCase().split(" ");return function(n){return function(e,t,n){var i=UL(e,n);return i?{score:RL(i,t.length,n.length,0),matches:i}:null}(t,e,n)}}function WL(e,t,n,i){void 0===i&&(i=0),jL(e,t,n?n.matches:null,i)}function jL(e,t,n,i){void 0===i&&(i=0),e.appendChild(function(e,t,n){void 0===n&&(n=0);if(!t||0===t.length)return document.createTextNode(e);for(var i=document.createDocumentFragment(),r=0,o=0;r<e.length&&o<t.length;o++){var a=t[o],s=a[0]+n,l=a[1]+n;if(!(l<=0)){if(s>=e.length)break;s<0&&(s=0),s!==r&&i.appendText(e.substring(r,s)),i.createSpan({cls:"suggestion-highlight",text:e.substring(s,l)}),r=l}}r<e.length&&i.appendText(e.substring(r));return i}(t,n,i))}function GL(e,t,n){void 0===n&&(n=100);for(var i=t[0]-1,r=0;r<n&&i>=0;){if("\n"===e.charAt(i))break;i--,r++}i++;for(var o=r===n,a=t[1],s=0;s<n&&a<e.length;){if("\n"===e.charAt(a))break;a++,s++}return[i,a,o,s===n]}function KL(e,t){if(t&&t.length>0){var n=t.last()[1],i=e.indexOf("/",n);if(-1!==i)return e.slice(0,i+1)}return e}var YL=/A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/,ZL=YL.source+/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,XL=new RegExp("[".concat(ZL,"]")),$L=function(e){if(0===e.length)return"";var t=e.charAt(0),n=e.charAt(e.length-1),i=XL.test(t),r=XL.test(n);return(i?"(?:^|[^".concat(ZL,"])"):"")+"(".concat(nc(e),")")+(r?"(?![".concat(ZL,"])"):"()")};var QL=function(){},JL=function(){function e(e,t,n,i){this.cache=null,this.data=null,this.strings=e,this.original=t,this.keys=n,this.caseSensitive=i}return e.prototype.clone=function(){var t=new e(Object.assign({},this.strings),this.original,this.keys.slice(),this.caseSensitive);return t.cache=this.cache,this.data&&(t.data=new Map(this.data)),t},e.prototype.cloneForPropertyContent=function(e){var t=this.clone();return t.keys=["content"],t.strings.content=String(e),t.setData(RP,e),t},e.prototype.setData=function(e,t){this.data||(this.data=new Map),this.data.set(e,t)},e.prototype.getData=function(e){return this.data?this.data.get(e):null},e.prototype.deleteData=function(e){this.data&&(this.data.delete(e),0===this.data.size&&(this.data=null))},e}(),eP=["filename","filepath","content","propertyName","tag"];function tP(e){for(var t=0,n=0,i=eP;n<i.length;n++){var r=i[n];e[r]&&(t+=e[r].length)}return e.properties&&(t+=e.properties.length),t}function nP(e,t){for(var n,i,r=0,o=eP;r<o.length;r++){var a=o[r];t[a]&&(e[a]=t[a].concat(null!==(n=e[a])&&void 0!==n?n:[]))}t.properties&&(e.properties=t.properties.concat(null!==(i=e.properties)&&void 0!==i?i:[]))}var iP=function(){function e(){this.matchedTokens=[]}return e.prototype.eatToken=function(e){var t=e.pos,n=e.tokens;this.matchedTokens.push(n[t]),e.pos++},e.prototype.getContext=function(e){for(var t=0,n=this.matchedTokens;t<n.length;t++){var i=n[t];if(e>=i.pos&&e<=SP(i))return{matcherStack:[this],token:i}}return null},e}(),rP=function(e){function t(t){var n=e.call(this)||this;return n.expected=null,"TRUE"===t?n.expected=!0:"FALSE"===t&&(n.expected=!1),n}return f(t,e),t.prototype.match=function(e){var t=e.getData(RP);return t===this.expected?{content:[[0,String(t).length]]}:null},t.prototype.getInfo=function(){return!0===this.expected?Qf.plugins.search.labelMatchTrue():!1===this.expected?Qf.plugins.search.labelMatchFalse():Qf.plugins.search.labelMatchEmpty()},t.prototype.requiredInputs=function(){return{}},t}(iP),oP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){for(var t={},n=0,i=e.keys;n<i.length;n++){var r=i[n];e.strings[r]&&(t[r]=[[0,0]])}return t},t.prototype.getInfo=function(){return""},t.prototype.requiredInputs=function(){return{}},t}(iP),aP={},sP={},lP=mc((function(){aP={},sP={}}),6e4,!0);function cP(e,t){var n=null,i=t?aP:sP;return i.hasOwnProperty(e)&&(n=i[e]),n||(n=i[e]=new RegExp(e,t?"gm":"gmi")),n}function uP(e,t,n){var i=[];if(!t)return i;for(e.lastIndex=0;;){var r=e.exec(t);if(!r)break;var o=r[0].length;if(0!==o){if(n){if(!r[1]||0===r[1].length){e.lastIndex++;continue}o=r[1].length}var a=e.lastIndex,s=a-o;i.push([s,a])}else e.lastIndex++}return i}var hP=function(e){function t(t){var n=e.call(this)||this;return n.regex=t,n}return f(t,e),t.prototype.match=function(e){if(""!==this.regex)return function(e,t,n){for(var i=cP(t,e.caseSensitive),r=!1,o={},a=0,s=e.keys;a<s.length;a++){var l=s[a],c=uP(i,e.strings[l],n);c.length>0&&(o[l]=c,r=!0)}return r?o:null}(e,this.regex,!1)},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchRegex()+"/".concat(this.regex,"/")},t.prototype.requiredInputs=function(){return{content:!0}},t}(iP),dP=function(e){function t(t,n){var i=e.call(this)||this;return i.key=t,i.value=n,i}return f(t,e),t.prototype.match=function(e){var t;if(e.strings.hasOwnProperty("content")){var n=null===(t=e.cache)||void 0===t?void 0:t.frontmatter;if(!n)return null;var i=[];for(var r in n)if(n.hasOwnProperty(r)){var o=e.clone();o.keys=["propertyName"],o.strings.propertyName=r,this.key.match(o)&&i.push(r)}for(var a=[],s=0,l=i;s<l.length;s++){var c=l[s];if(null!==this.value){var u=n[c];if(Array.isArray(u))for(var h=0;h<u.length;h++){var d=u[h],p=e.cloneForPropertyContent(d);if((g=this.value.match(p))&&g.content)for(var f=0,m=PL(g.content);f<m.length;f++){var v=m[f];a.push({key:c,subkey:[h],pos:v})}}else{var g;p=e.cloneForPropertyContent(u);if((g=this.value.match(p))&&g.content)for(var y=0,b=g.content;y<b.length;y++){v=b[y];a.push({key:c,pos:v})}}}else a.push({key:c})}return a.length>0?{properties:a}:null}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchProperty()},t.prototype.requiredInputs=function(){return{}},t.prototype.getContext=function(t){var n,i=this.key.getContext(t)||(null===(n=this.value)||void 0===n?void 0:n.getContext(t));return i?(i.matcherStack.push(this),i):e.prototype.getContext.call(this,t)},t}(iP),pP=function(e){function t(t){var n=e.call(this)||this;return n.text=t,n.wholeWordRegex=$L(t),n.partialMatchRegex=nc(t),n}return f(t,e),t.prototype.match=function(e){if(""!==this.text){for(var t=!1,n={},i=0,r=e.keys;i<r.length;i++){var o=r[i];if("propertyName"!==o){var a=!1,s=this.partialMatchRegex;"content"===o&&(a=!0,s=this.wholeWordRegex);var l=uP(cP(s,e.caseSensitive),e.strings[o],a);l.length>0&&(n[o]=l,t=!0)}else e.strings[o].toLowerCase()===this.text.toLowerCase()&&(n[o]=[[0,this.text.length]],t=!0)}return t?n:null}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchExactText()+'"'.concat(this.text,'"')},t.prototype.requiredInputs=function(){return{content:!0}},t}(iP),fP=function(e){function t(t){var n=e.call(this,nc(t))||this;return n.text=t,n}return f(t,e),t.prototype.setText=function(e){this.text=e,this.regex=nc(e)},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchText()+'"'.concat(this.text,'"')},t.prototype.match=function(t){return""===this.text?null:e.prototype.match.call(this,t)},t}(hP),mP=function(e){function t(t){var n=e.call(this)||this;return n.matchers=[],n.matchers=t,n}return f(t,e),t.prototype.requiredInputs=function(){for(var e={},t=0,n=this.matchers;t<n.length;t++){var i=n[t];Object.assign(e,i.requiredInputs())}return e},t.prototype.getContext=function(t){for(var n=0,i=this.matchers;n<i.length;n++){var r=i[n].getContext(t);if(r)return r.matcherStack.push(this),r}var o=e.prototype.getContext.call(this,t);return o&&o.matcherStack.push(this),o},t}(iP),vP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){for(var t=void 0,n=0,i=this.matchers;n<i.length;n++){var r=i[n].match(e);if(null===r)return null;t?r&&nP(t,r):t=r}return t},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchAll()},t}(mP),gP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){for(var t=void 0,n=0,i=this.matchers;n<i.length;n++){var r=i[n].match(e);t||void 0===r?r&&nP(t,r):t=r}return t},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchAny()},t}(mP),yP=function(e){function t(t){var n=e.call(this)||this;return n.matcher=t,n}return f(t,e),t.prototype.requiredInputs=function(){return this.matcher.requiredInputs()},t.prototype.getContext=function(t){var n=this.matcher.getContext(t);return n?(n.matcherStack.push(this),n):e.prototype.getContext.call(this,t)},t}(iP),bP=function(e){function t(t,n){var i=e.call(this)||this;if(i.type=t,n instanceof fP)i.text=n.text;else{if(!(n instanceof pP))throw new Error("".concat(t," operator cannot be applied to matcher ").concat(n.getInfo()));i.text=n.text}return i}return f(t,e),t.prototype.match=function(e){var t=e.getData(RP);return null!=t&&("lessthan"===this.type&&t<this.text||"greaterthan"===this.type&&t>this.text)?{content:[[0,String(t).length]]}:null},t.prototype.getInfo=function(){return"lessthan"===this.type?Qf.plugins.search.labelMatchLessThan()+this.text:Qf.plugins.search.labelMatchGreaterThan()+this.text},t.prototype.requiredInputs=function(){return{}},t}(iP),wP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){var t=this.matcher.match(e);if(void 0!==t)return t?null:{}},t.prototype.getInfo=function(){return Qf.plugins.search.labelExcluding()},t}(yP);function kP(e,t){return CP({tokens:e,pos:0,operatorStack:[],operators:t})}function CP(e){for(var t=[],n=[];e.pos<e.tokens.length;){var i=MP(e);if(i&&(t.push(i),e.pos<e.tokens.length)){var r=e.tokens[e.pos];if("or"===r.type){n.push(r),e.pos++;continue}}break}if(0===t.length)return null;if(1===t.length)return t[0];var o=new gP(t);return o.matchedTokens=n,o}function MP(e){for(var t=[];e.pos<e.tokens.length;){var n=EP(e);if(!n)break;t.push(n)}return 0===t.length?null:1===t.length?t[0]:new vP(t)}function EP(e){var t=e.tokens[e.pos];if(!t)return null;var n=t.type,i=t.content;if("text"===n&&e.pos<e.tokens.length-1&&"colon"===e.tokens[e.pos+1].type&&!e.operatorStack.contains("[")){var r=t,o=i.toLowerCase(),a=e.operators[o];if(!a)throw new Error('Operator "'.concat(o,'" not recognized'));if(a.exclusive)for(var s=0,l=e.operatorStack;s<l.length;s++){var c=l[s],u=e.operators[c];if(u.exclusive&&(!u.allowSelf||c!==o))throw new Error('Operator "'.concat(o,'" cannot be nested within "').concat(c,'"'))}e.operatorStack.push(o),e.pos++;var h=e.tokens[e.pos];e.pos++;var d=EP(e);return e.operatorStack.pop(),d||(d=new fP("")),(p=a.operate(d)).matchedTokens.push(r),p.matchedTokens.push(h),p}if("bracket"===n&&"["===i){if(e.operatorStack.contains("["))throw new Error("Property cannot be nested within a property.");e.operatorStack.push(i),e.pos++;var p=function(e){var t=CP(e);t||(t=new fP(""));var n=null,i=[];if(xP(e,"colon")){var r=e.tokens[e.pos];e.operatorStack.push(r.content),i.push(r),e.pos++,n=CP(e),e.operatorStack.pop()}var o=new dP(t,n);return o.matchedTokens=i,o}(e);return p.matchedTokens.push(t),e.operatorStack.pop(),xP(e,"bracket")&&p.eatToken(e),p}if("bracket"===n&&"]"===i)return null;if("text"===n)return(p=new fP(i)).eatToken(e),p;if("quote"===n)return(p=new pP(i)).eatToken(e),p;if("regex"===n){try{new RegExp(i)}catch(e){throw console.error(e),new Error("Failed to parse regular expression. ".concat(e.message))}return(p=new hP(i)).eatToken(e),p}if("parenthesis"===n&&"("===i){e.pos++;var p=function(e){var t=CP(e);if(e.pos<e.tokens.length){var n=e.tokens[e.pos],i=n.type,r=n.content;"parenthesis"===i&&")"===r&&(t&&t.matchedTokens.push(n),e.pos++)}return t}(e);return p||(p=new fP("")),p.matchedTokens.push(t),p}if("parenthesis"===n&&")"===i)return null;if("or"===n)return null;if("false"===n||"true"===n||"empty"===n)return(p=new rP(i)).eatToken(e),p;if("colon"===n)return null;if("not"===n)return e.pos++,(d=EP(e))?((p=new wP(d)).matchedTokens.push(t),p):null;if("greaterthan"===n||"lessthan"===n)return e.pos++,(d=EP(e))?((p=new bP(n,d)).matchedTokens.push(t),p):null;throw new Error("Failed to parse, error at ".concat(t.pos,' "').concat(i,'"'))}function SP(e){var t=e.pos+e.content.length;return"quote"===e.type||"regex"===e.type?t+2:t}function xP(e,t){if(e.pos<e.tokens.length&&e.tokens[e.pos].type===t)return!0;return!1}function TP(e){for(var t=0,n=e.length,i=[],r=function(e,t){"TRUE"===e?i.push({type:"true",content:e,pos:t}):"FALSE"===e?i.push({type:"false",content:e,pos:t}):"EMPTY"===e?i.push({type:"empty",content:e,pos:t}):"OR"===e?i.push({type:"or",content:e,pos:t}):i.push({type:"text",content:e,pos:t})};t<n;){var o=e.charAt(t);if('"'!==o)if("/"!==o)if("-"!==o)for(var a=t,s="";t<=n;){if(t===n){s&&r(s,a);break}h=e.charAt(t);if(t++,"["===h||"]"===h){s&&r(s,a),i.push({type:"bracket",content:h,pos:t-1});break}if("("===h||")"===h){s&&r(s,a),i.push({type:"parenthesis",content:h,pos:t-1});break}if(":"===h){s&&r(s,a),i.push({type:"colon",content:h,pos:t-1});break}if(">"===h){s&&r(s,a),i.push({type:"greaterthan",content:h,pos:t-1});break}if("<"===h){s&&r(s,a),i.push({type:"lessthan",content:h,pos:t-1});break}if(" "===h){s&&(r(s,a),a+=s.length);break}s+=h}else{var l=t;t++,i.push({type:"not",content:o,pos:l})}else{var c=t;t++;for(var u="";t<=n;){if(t===n){i.push({type:"regex",content:u,pos:c});break}var h=e.charAt(t);if(t++,"\\"===h&&t<e.length){var d=e.charAt(t);if("/"===d){u+=d,t++;continue}if("\\"===d){u+="\\\\",t++;continue}}if("/"===h){i.push({type:"regex",content:u,pos:c});break}u+=h}}else{var p=t;t++;for(var f="";t<=n;){if(t===n){i.push({type:"quote",content:f,pos:p});break}var h=e.charAt(t);if(t++,"\\"===h&&t<n)f+=e.charAt(t),t++;else{if('"'===h){i.push({type:"quote",content:f,pos:p});break}f+=h}}}}return i}var DP=function(e){function t(t,n){var i=e.call(this,t)||this;return i.caseSensitive=n,i}return f(t,e),t.prototype.match=function(e){var t=e.clone();return t.caseSensitive=this.caseSensitive,this.matcher.match(t)},t.prototype.getInfo=function(){return this.caseSensitive?Qf.plugins.search.labelCaseSensitive():Qf.plugins.search.labelCaseInsensitive()},t}(yP),AP="filepath",LP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty(AP)){var t=e.clone();return t.keys=[AP],this.matcher.match(t)}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchFilePath()},t.prototype.requiredInputs=function(){return{}},t}(yP),PP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("filename")){var t=e.clone();return t.keys=["filename"],this.matcher.match(t)}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchFileName()},t.prototype.requiredInputs=function(){return{}},t}(yP),IP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.clone();return t.keys=["content"],this.matcher.match(t)}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchContent()},t.prototype.requiredInputs=function(){return{content:!0}},t}(yP),FP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.splitContentMatch=function(e,t){var n=this,i=e.clone();i.keys=["content"];var r=!1,o=!1,a=[];return t(i,(function(e,t){i.strings.content=e;var s=n.matcher.match(i);if(void 0===s)o=!0;else if(s){r=!0;var l=s.content;if(l){qL(l,t);for(var c=0,u=l;c<u.length;c++){var h=u[c];a.push(h)}}else a.push([t,t])}})),r?{content:a}:o?void 0:null},t}(yP),OP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.strings.content;return this.splitContentMatch(e,(function(e,n){for(var i=0,r=0,o=t.split("\n");r<o.length;r++){var a=o[r];n(a,i),i=i+a.length+1}}))}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchLine()},t.prototype.requiredInputs=function(){return{content:!0}},t}(FP),BP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.cache;if(!t)return null;var n=e.strings.content;return this.splitContentMatch(e,(function(e,i){if(t.sections)for(var r=0,o=t.sections;r<o.length;r++){var a=o[r];if("list"!==a.type){var s=(h=a.position).start.offset,l=h.end.offset;i(n.substring(s,l),s)}}if(t.listItems)for(var c=0,u=t.listItems;c<u.length;c++){var h;s=(h=u[c].position).start.offset,l=h.end.offset;i(n.substring(s,l),s)}}))}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchBlock()},t.prototype.requiredInputs=function(){return{content:!0}},t}(FP),NP=new QL,RP=new QL;var HP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.cache;if(!t)return null;var n=e.getData(NP),i=t.headings;if(!i){if(n)return null;e.setData(NP,{sections:null,index:0});var r=this.matcher.match(e);return e.deleteData(NP),r}var o,a,s,l=e.original,c=0;if(n){o=n.sections;var u=n.index,h=o[u];if(0===h.children)return null;c=h.start,a=n.index+1,s=Math.min(o.length,a+h.children)}else o=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=e[i+1],a=r.position.start.offset;0===i&&a>0&&n.push({start:0,end:a,children:0});for(var s=o?o.position.start.offset:t,l=0,c=i+1;c<e.length&&e[c].level>r.level;c++)l++;n.push({start:a,end:s,children:l})}return n}(i,l.length),a=0,s=o.length;return this.splitContentMatch(e,(function(e,t){for(var n=a;n<s;n++){var i=o[n],r=i.start,u=i.end;u<=r||(e.setData(NP,{sections:o,index:n}),t(l.substring(r,u),r-c))}}))}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchSection()},t.prototype.requiredInputs=function(){return{content:!0}},t}(FP),VP=function(e){function t(t,n){var i=this;return t instanceof pP&&""===t.text&&(t=new oP),(i=e.call(this,t)||this).completed=n,i}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.cache;if(!t)return null;var n=e.strings.content,i=this.completed;return this.splitContentMatch(e,(function(e,r){if(t.listItems)for(var o=0,a=t.listItems;o<a.length;o++){var s=a[o];if(void 0!==s.task&&("boolean"!=typeof i||i===(" "!==s.task))){var l=s.position,c=l.start.offset,u=l.end.offset;r(n.substring(c,u),c)}}}))}},t.prototype.getInfo=function(){var e=this.completed;return!0===e?Qf.plugins.search.labelMatchTaskDone():!1===e?Qf.plugins.search.labelMatchTaskTodo():Qf.plugins.search.labelMatchTask()},t.prototype.requiredInputs=function(){return{content:!0}},t}(FP),zP=function(e){function t(t){var n=e.call(this)||this;return"#"!==t.text.charAt(0)&&t.setText("#"+t.text),n.matcher=t,n}return f(t,e),t.prototype.match=function(e){var t=new RegExp("^"+this.matcher.regex+"($|\\/)","gmi");if(e.strings.hasOwnProperty("tag")&&t.test(e.strings.tag))return{};if(e.strings.hasOwnProperty("content")){var n=e.cache;if(!n)return null;var i=void 0,r=[],o=!1,a=ES(n.frontmatter);if(a)for(var s=0,l=a;s<l.length;s++){var c=l[s];t.lastIndex=0,t.test(c)&&(o=!0,i=[{key:"tags"}])}var u=n.tags;if(u)for(var h=0,d=u;h<d.length;h++){c=d[h];t.lastIndex=0,t.test(c.tag)&&(r.push([c.position.start.offset,c.position.end.offset]),o=!0)}return o?{content:r,properties:i}:null}},t.prototype.getInfo=function(){return Qf.plugins.search.labelMatchTag()+this.matcher.text},t.prototype.requiredInputs=function(){return{content:!0}},t.prototype.getContext=function(t){var n=this.matcher.getContext(t);return n?(n.matcherStack.push(this),n):e.prototype.getContext.call(this,t)},t}(iP),qP={"match-case":{operate:function(e){return new DP(e,!0)}},"ignore-case":{operate:function(e){return new DP(e,!1)}},path:{exclusive:!0,operate:function(e){return new LP(e)}},file:{exclusive:!0,operate:function(e){return new PP(e)}},content:{exclusive:!0,operate:function(e){return new IP(e)}},line:{exclusive:!0,operate:function(e){return new OP(e)}},block:{exclusive:!0,operate:function(e){return new BP(e)}},section:{exclusive:!0,allowSelf:!0,operate:function(e){return new HP(e)}},task:{exclusive:!0,operate:function(e){return new VP(e,void 0)}},"task-todo":{exclusive:!0,operate:function(e){return new VP(e,!1)}},"task-done":{exclusive:!0,operate:function(e){return new VP(e,!0)}},tag:{exclusive:!0,operate:function(e){if(!(e instanceof fP))throw new Error('Operator "tag" can only be followed by text');return new zP(e)}}},UP=function(){function e(e,t,n,i){this.app=e,i=i||qP,this.query=t,this.caseSensitive=n;var r=TP(t),o=this.matcher=kP(r,i);this.requiredInputs=o&&o.requiredInputs()}return e.prototype.match=function(e,t){var n=this.app;if("canvas"===e.extension&&n.internalPlugins.getEnabledPluginById("canvas")){var i=void 0;try{i=JSON.parse(t)}catch(e){}if(i&&Array.isArray(i.nodes)){for(var r=!1,o={},a=i.nodes.filter((function(e){return"text"===e.type})),s=n.internalPlugins.getEnabledPluginById("canvas").index.get(e),l=0,c=a;l<c.length;l++){var u=c[l],h=u.id,d=u.text,p=new JL({filename:e.name,filepath:e.path,content:d},d,["content"],this.caseSensitive);p.cache=null==s?void 0:s.caches[h];var f=this._match(p);if(null!==f)if(r=!0,f)o["canvas-".concat(h)]=f.content}var m=this._match(new JL({content:"",filename:e.name,filepath:e.path},"",["content","filename"],this.caseSensitive));if(null!==m&&(r=!0,m&&(o.filename=m.filename)),r)return o}}var v={filename:e.name,filepath:e.path,content:t},g="md"===e.extension?["filename","content"]:[],y=new JL(v,t,g,this.caseSensitive);return"md"===e.extension&&(y.cache=n.metadataCache.getFileCache(e)),this._match(y)},e.prototype.matchContent=function(e){var t={content:e};return this._match(new JL(t,e,["content"],this.caseSensitive))},e.prototype.matchTag=function(e){var t={tag:e};return this._match(new JL(t,e,["tag"],this.caseSensitive))},e.prototype.matchFilepath=function(e){var t={filename:Kc(e),filepath:e};return this._match(new JL(t,e,["filename"],this.caseSensitive))},e.prototype._match=function(e){lP();var t=this.matcher.match(e);if(t)for(var n=0,i=eP;n<i.length;n++){var r=i[n];t.hasOwnProperty(r)&&(t[r]=PL(t[r]))}return void 0===t&&(t={}),t},e}();function _P(e,t,n,i,r){return g(this,void 0,Promise,(function(){var o,a,s,l,c,u,h,d,p,f,m,v,g;return y(this,(function(y){switch(y.label){case 0:o=mL(n.generator(),r),y.label=1;case 1:y.trys.push([1,11,12,17]),a=!0,s=M(o),y.label=2;case 2:return[4,s.next()];case 3:if(l=y.sent(),f=l.done)return[3,10];if(g=l.value,a=!1,c=g,e.metadataCache.isUserIgnored(c.path))return[3,9];if(!e.metadataCache.isSupportedFile(c))return[3,9];if(u="md"===c.extension||"canvas"===c.extension,h="",!u||!t.content)return[3,7];y.label=4;case 4:return y.trys.push([4,6,,7]),[4,e.vault.cachedRead(c)];case 5:return h=y.sent(),[3,7];case 6:return d=y.sent(),console.error(d),[3,7];case 7:return n.runnable.isCancelled()?[2]:[4,i(c,h)];case 8:y.sent(),y.label=9;case 9:return a=!0,[3,2];case 10:return[3,17];case 11:return p=y.sent(),m={error:p},[3,17];case 12:return y.trys.push([12,,15,16]),a||f||!(v=s.return)?[3,14]:[4,v.call(s)];case 13:y.sent(),y.label=14;case 14:return[3,16];case 15:if(m)throw m.error;return[7];case 16:return[7];case 17:return[2]}}))}))}function WP(e,t,n){var i=this;return createEl("button","clickable-icon",(function(r){r.ariaDisabled="true",Rx(r,"backward"===n?Qf.commands.navigateBack():Qf.commands.navigateForward()),r.onClickEvent((function(r){return g(i,void 0,void 0,(function(){var i,o;return y(this,(function(a){switch(a.label){case 0:return 2===r.button?[2]:(i=Ak.isModEvent(r),o=t(),i?[4,e.workspace.duplicateLeaf(t(),i)]:[3,2]);case 1:o=a.sent(),a.label=2;case 2:return o.history.go("backward"===n?-1:1),[2]}}))}))}));var o=function(o){for(var a="backward"===n?t().history.backHistory:t().history.forwardHistory,s=new PA,l=function(r){s.addItem((function(o){return o.setTitle(pc(a[r].title,50)).setIcon(a[r].icon).onClick((function(o){return g(i,void 0,void 0,(function(){var i,s,l;return y(this,(function(c){switch(c.label){case 0:return i=Ak.isModEvent(o),s=t(),i?[4,e.workspace.duplicateLeaf(t(),i)]:[3,2];case 1:s=c.sent(),c.label=2;case 2:return l=a.length-r,"backward"===n&&(l=0-l),s.history.go(l),[2]}}))}))}))}))},c=a.length-1;c>=0;c--)l(c);Bx();var u=r.getBoundingClientRect();s.showAtPosition({x:u.x,y:u.bottom,width:u.width,overlap:!0}),o&&s.dom.addEventListener("mouseup",(function(e){var t=e.targetNode;setTimeout((function(){for(var n=0,i=s.items;n<i.length;n++){var r=i[n];if(r instanceof TA&&r.dom.contains(t))return void r.handleEvent(e)}}))}))};r.addEventListener("contextmenu",(function(){return o(!1)})),function(e,t){e.addEventListener("mousedown",(function(e){var n=window.setTimeout((function(){i(),t(e)}),400),i=function(){window.removeEventListener("mouseup",r),window.removeEventListener("mousemove",o),window.clearTimeout(n)},r=function(){i()},o=function(n){var r=n.clientX-e.clientX,o=n.clientY-e.clientY;r*r+o*o>25&&(i(),o>0&&o>Math.abs(r)&&t(e))};window.addEventListener("mouseup",r),window.addEventListener("mousemove",o)}))}(r,(function(){return o(!0)}))}))}var jP=function(e){function t(t){var n=e.call(this)||this;return n.icon="lucide-file",n.navigation=!1,n.app=t.app,n.leaf=t,n.containerEl=t.containerEl.createDiv("workspace-leaf-content"),n.containerEl.setAttribute("data-type",n.getViewType()),n}return f(t,e),t.prototype.open=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return e.appendChild(this.containerEl),this.load(),[4,this.onOpen()];case 1:return t.sent(),[2]}}))}))},t.prototype.close=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return this.containerEl.detach(),this.unload(),[4,this.onClose()];case 1:return e.sent(),[2]}}))}))},t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.onClose=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.getState=function(){return{}},t.prototype.setState=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.getEphemeralState=function(){return{}},t.prototype.setEphemeralState=function(e){},t.prototype.getIcon=function(){return this.icon?this.icon:"lucide-file"},t.prototype.onResize=function(){},t.prototype.onPaneMenu=function(e,t){},t.prototype.onHeaderMenu=function(e){},t.prototype.onTabMenu=function(e){var t=this,n=this.leaf,i=n.parent,r=i.children.indexOf(n);e.addItem((function(e){return e.setSection("close").setTitle(Qf.interface.menu.close()).setIcon("lucide-x").onClick((function(){return t.leaf.detach()}))}));var o=i.children.slice();if(!this.app.workspace.isInSidebar(n)){var a=o.filter((function(e){return!e.pinned&&e!==n}));a.length>0&&e.addItem((function(e){return e.setSection("close").setTitle(Qf.interface.menu.closeOthers()).setIcon("lucide-x").onClick((function(){for(var e=0,t=a;e<t.length;e++){t[e].detach()}}))}));var s=o.slice(r+1).filter((function(e){return!e.pinned}));s.length>0&&e.addItem((function(e){return e.setSection("close").setTitle(Qf.interface.menu.closeAfter()).setIcon("lucide-x").onClick((function(){for(var e=0,t=s;e<t.length;e++){t[e].detach()}}))}));var l=o.filter((function(e){return!e.pinned}));l.length>0&&(1!==l.length||l[0]!==n)&&e.addItem((function(e){return e.setSection("close").setTitle(Qf.interface.menu.closeAll()).setIcon("lucide-x").onClick((function(){for(var e=0,t=l;e<t.length;e++){t[e].detach()}}))}))}},t.prototype.getSideTooltipPlacement=function(){var e=this.leaf.getRoot();return"left"===e.side?"right":"right"===e.side?"left":void 0},t.prototype.handleCut=function(e){},t.prototype.handleCopy=function(e){},t.prototype.handlePaste=function(e){},t}(xA),GP=function(e){function t(t){var n=e.call(this,t)||this;n.canDropAnywhere=!1;var i=n.app,r=i.workspace,o=n.headerEl=n.containerEl.createDiv("view-header");return n.contentEl=n.containerEl.createDiv("view-content"),o.createDiv("view-header-left",(function(e){Zl.isMobile&&e.createEl("button","view-action clickable-icon mod-left-split-toggle",(function(e){Rx(e,Qf.interface.sidebarExpand()),mx(e,"sidebar-left"),e.addEventListener("click",(function(){n.app.workspace.leftSplit.toggle()}))})),e.createDiv("view-header-nav-buttons",(function(e){n.backButtonEl=WP(i,(function(){return n.leaf}),"backward"),mx(n.backButtonEl,"lucide-arrow-left"),e.appendChild(n.backButtonEl),n.forwardButtonEl=WP(i,(function(){return n.leaf}),"forward"),mx(n.forwardButtonEl,"lucide-arrow-right"),e.appendChild(n.forwardButtonEl)}))})),n.titleContainerEl=o.createDiv("view-header-title-container mod-at-start",(function(e){n.titleParentEl=e.createDiv({cls:"view-header-title-parent"}),n.titleEl=e.createDiv({cls:"view-header-title"})})),Iw(n.titleContainerEl,n.titleEl),n.actionsEl=o.createDiv("view-actions"),Zl.isMobile?(n.moreOptionsButtonEl=n.addAction("lucide-more-vertical",Qf.interface.menu.moreOptions(),(function(e){n.onMoreOptions(e)})),n.moreOptionsButtonEl.addEventListener("contextmenu",(function(e){e.preventDefault(),r.rightSplit.expand()}))):n.moreOptionsButtonEl=n.addAction("lucide-more-vertical",Qf.interface.menu.moreOptions(),(function(e){e.currentTarget.classList.contains("has-active-menu")||n.onMoreOptions(e)})),i.dragManager.handleDrop(n.containerEl,n.handleDrop.bind(n)),n}return f(t,e),t.prototype.updateNavButtons=function(){var e=this.leaf.history,t=e.backHistory,n=e.forwardHistory;this.backButtonEl.ariaDisabled=String(0===t.length),this.forwardButtonEl.ariaDisabled=String(0===n.length)},t.prototype.load=function(){e.prototype.load.call(this);var t=this.leaf;this.titleEl.setText(this.getDisplayText()),this.registerEvent(t.on("group-change",this.onGroupChange,this)),this.registerEvent(t.on("history-change",this.updateNavButtons,this))},t.prototype.handleDrop=function(e,t,n){if(this.canDropAnywhere||(Ul?e.shiftKey:e.altKey)||this.headerEl.contains(e.target)){var i=this.leaf.handleDrop(e,t,n);if(i)return i.hoverEl=this.headerEl,i.hoverClass="is-highlighted",i}},t.prototype.onGroupChange=function(){},t.prototype.addAction=function(e,t,n){var i=createEl("button","clickable-icon view-action");return this.actionsEl.prepend(i),mx(i,e),Rx(i,t),i.onClickEvent((function(e){if(0===e.button||1===e.button)return n(e)})),i},t.prototype.onMoreOptions=function(e){e.preventDefault();var t=(new PA).addSections(["close","pane","open","action","find","info","view","view.linked","system","","danger"]);t.setSectionSubmenu("view.linked",{title:Qf.interface.menu.openLinkedView(),icon:"lucide-link"}),this.onPaneMenu(t,"more-options"),this.onMoreOptionsMenu(t),this.app.workspace.trigger("leaf-menu",t,this.leaf);var n=e.target,i=n.getBoundingClientRect();t.setParentElement(n).showAtPosition({x:i.x,y:i.bottom,width:i.width,overlap:!0,left:!0})},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n);var r=this.app,o=this.leaf;Zl.isPhone&&"more-options"===n&&(t.addItem((function(e){return e.setSection("close").setTitle(Qf.interface.menu.close()).setIcon("lucide-x").onClick((function(){return i.leaf.detach()}))})),t.addItem((function(e){return e.setSection("action").setTitle(i.leaf.pinned?Qf.interface.menu.unpin():Qf.interface.menu.pin()).setIcon(i.leaf.pinned?"lucide-pin-off":"lucide-pin").onClick((function(){return i.leaf.togglePinned()}))}))),Zl.canSplit&&t.addItem((function(e){return e.setSection("open").setTitle(Qf.commands.splitRight()).setDisabled(r.workspace.isInSidebar(i.leaf)).setIcon("lucide-separator-vertical").onClick((function(){return r.workspace.duplicateLeaf(o,"vertical")}))})).addItem((function(e){return e.setSection("open").setTitle(Qf.commands.splitDown()).setIcon("lucide-separator-horizontal").onClick((function(){return r.workspace.duplicateLeaf(o,"horizontal")}))}))},t.prototype.onTabMenu=function(t){var n=this;e.prototype.onTabMenu.call(this,t);var i=this.app,r=this.leaf;t.addItem((function(e){return e.setSection("pane").setTitle(r.pinned?Qf.interface.menu.unpin():Qf.interface.menu.pin()).setIcon("lucide-pin").onClick((function(){return r.togglePinned()}))})),r.group?t.addItem((function(e){return e.setSection("pane").setTitle(Qf.interface.menu.unlinkTab()).setIcon("lucide-link").onClick((function(){return r.setGroup(null)}))})):Zl.isPhone||t.addItem((function(e){return e.setSection("pane").setTitle(Qf.interface.menu.linkTab()).setIcon("lucide-link").onClick((function(){return i.workspace.onStartLink(r)}))})),Zl.canPopoutWindow&&t.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.moveToNewWindow()).setIcon("lucide-picture-in-picture").onClick((function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){return this.app.workspace.moveLeafToPopout(r),[2]}))}))}))}))},t.prototype.onMoreOptionsMenu=function(e){},t}(jP),KP=function(e){function t(t){var n=e.call(this,t)||this;n.canDropAnywhere=!0,n.navigation=!0;var i=n.emptyStateEl=n.contentEl.createDiv("empty-state"),r=n.clickableAreaEl=i.createDiv("empty-state-container");return n.emptyTitleEl=r.createDiv({cls:"empty-state-title",text:Qf.interface.emptyState.noFileOpen()},(function(e){e.createSpan("empty-state-close-button",(function(e){mx(e,"lucide-x"),e.addEventListener("click",(function(){n.leaf.detach()}))}))})),n.actionListEl=r.createDiv("empty-state-action-list"),n.app.dragManager.handleDrop(i,(function(e,t,r){var o=n.leaf.handleDrop(e,t,r);if(o)return o.hoverEl=i,o.hoverClass="is-highlighted",o})),n}return f(t,e),t.prototype.getDisplayText=function(){return Qf.interface.labelNewTab()},t.prototype.getViewType=function(){return"empty"},t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d=this;return y(this,(function(p){return t=(e=this).app,(n=e.actionListEl).empty(),i="file-explorer:new-file",r="",Zl.isMobile||(o=t.hotkeyManager.printHotkeyForCommand(i))&&(r=" (".concat(o,")")),n.createDiv({cls:"empty-state-action tappable",text:Qf.interface.emptyState.createNewFile()+r},(function(e){e.addEventListener("click",(function(e){t.commands.executeCommandById(i,e)}))})),t.vault.isEmpty()||(a="switcher:open",s="",Zl.isMobile||(l=t.hotkeyManager.printHotkeyForCommand(a))&&(s=" (".concat(l,")")),n.createDiv({cls:"empty-state-action tappable",text:Qf.interface.emptyState.goToFile()+s},(function(e){e.addEventListener("click",(function(e){t.commands.executeCommandById(a,e)}))})),n.createDiv({cls:"empty-state-action tappable",text:Qf.interface.emptyState.seeRecentFiles()+s},(function(e){e.addEventListener("click",(function(e){t.commands.executeCommandById(a,e)}))}))),this.app.internalPlugins.getEnabledPluginById("webviewer")&&(c="webviewer:open",u="",(h=t.hotkeyManager.printHotkeyForCommand(c))&&(u=" (".concat(h,")")),n.createDiv({cls:"empty-state-action tappable",text:Qf.plugins.webViewer.actionOpen()+u},(function(e){e.addEventListener("click",(function(e){t.commands.executeCommandById(c,e)}))}))),n.createDiv({cls:"empty-state-action tappable mod-close",text:Qf.interface.emptyState.close()},(function(e){e.addEventListener("click",(function(){d.leaf.detach()}))})),[2]}))}))},t}(GP),YP=function(e){function t(t){var n=e.call(this,t)||this;return n.allowNoFile=!1,n.navigation=!0,n}return f(t,e),t.prototype.renderBreadcrumbs=function(){var e,t,n=this;this.titleParentEl.empty();var i=null===(t=null===(e=this.file)||void 0===e?void 0:e.parent)||void 0===t?void 0:t.path;if(i&&"/"!==i)for(var r=i.split("/"),o=function(e){var t=r.slice(0,e+1).join("/"),i=r[e];a.titleParentEl.createSpan({cls:"view-header-breadcrumb",text:i}).addEventListener("click",(function(){var e=n.app.internalPlugins.getEnabledPluginById("file-explorer");if(e){var i=n.app.vault.getAbstractFileByPath(tu(t));i&&e.revealInFolder(i)}})),a.titleParentEl.createSpan({cls:"view-header-breadcrumb-separator",text:"/"})},a=this,s=0;s<r.length;s++)o(s)},t.prototype.getDisplayText=function(){return this.file?this.file.basename:Qf.interface.noFile()},t.prototype.onload=function(){e.prototype.onload.call(this);var t=this.app.vault;this.registerEvent(t.on("rename",this.onRename.bind(this))),this.registerEvent(t.on("delete",this.onDelete.bind(this)))},t.prototype.getState=function(){var t=e.prototype.getState.call(this),n=this.file;return n&&(t.file=n.path),t},t.prototype.getSyncViewState=function(){var e=this.getState();return e.sync=!0,{state:e,eState:this.getEphemeralState(),active:!1}},t.prototype.syncState=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:if(t=this.leaf,n=t.workspace,i=t.group,r=!0,!i)return[3,5];o=this.getSyncViewState(),a=n.getGroupLeaves(i),s=0,l=a,u.label=1;case 1:return s<l.length?(c=l[s])===t?[3,4]:e||c.view.getViewType()===this.getViewType()?c.working?(r=!1,[3,4]):[3,2]:[3,4]:[3,5];case 2:return[4,c.openFile(this.file,o)];case 3:u.sent(),u.label=4;case 4:return s++,[3,1];case 5:return[2,r]}}))}))},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i,r,o=this;return y(this,(function(a){switch(a.label){case 0:return i=!1,t.hasOwnProperty("file")?(r=this.app.vault.getAbstractFileByPath(t.file))instanceof ww?[4,this.loadFile(r)]:[3,2]:[3,4];case 1:return i=a.sent(),[3,4];case 2:return[4,this.loadFile(null)];case 3:i=a.sent(),a.label=4;case 4:return this.file||this.allowNoFile||(n.close=!0),i&&(n.layout=!0,n.history=!0),[4,e.prototype.setState.call(this,t,n)];case 5:return a.sent(),t.sync||!n.layout&&!n.history||(n.done=function(){return o.syncState(!0)}),[2]}}))}))},t.prototype.onClose=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return this.contentEl.empty(),[4,this.loadFile(null)];case 1:return e.sent(),[2]}}))}))},t.prototype.loadFile=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return(t=this.file)===e?[2,!1]:t?[4,this.onUnloadFile(t)]:[3,2];case 1:o.sent(),o.label=2;case 2:if(this.file=null,!e)return[3,6];o.label=3;case 3:return o.trys.push([3,5,,6]),this.file=e,[4,this.onLoadFile(e)];case 4:return o.sent(),[3,6];case 5:return n=o.sent(),this.file=null,new JA(Qf.interface.msgFailedToLoadFile({plugin:e.path})),console.error(n),[3,6];case 6:return this.renderBreadcrumbs(),this.titleEl.setText(this.getDisplayText()),i=this.leaf,(r=i.workspace).activeLeaf===i&&r.requestActiveLeafEvents(),this.leaf.updateHeader(),[2,!0]}}))}))},t.prototype.onLoadFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.onUnloadFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.onRename=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return e===this.file&&(this.renderBreadcrumbs(),this.titleEl.setText(e.basename),this.app.workspace.onLayoutChange(),this.leaf.updateHeader()),[2]}))}))},t.prototype.onDelete=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e!==this.file?[3,8]:this.allowNoFile?[4,this.loadFile(null)]:[3,2];case 1:return n.sent(),[3,7];case 2:return(t=this.leaf).history.backHistory.length>0?[4,t.history.back()]:[3,4];case 3:return n.sent(),[3,6];case 4:return[4,t.open(null)];case 5:n.sent(),n.label=6;case 6:this.leaf.view instanceof KP&&t.parent.children.length>1&&t.detach(),n.label=7;case 7:this.app.workspace.onLayoutChange(),n.label=8;case 8:return[2]}}))}))},t.prototype.canAcceptExtension=function(e){return!1},t}(GP),ZP=function(e){function t(t){var n=e.call(this,t)||this;return n.navigation=!1,n.allowNoFile=!0,n.requestUpdate=mc(n.update,10),n}return f(t,e),t.prototype.load=function(){var t=this;e.prototype.load.call(this);var n=this.app.workspace;this.registerEvent(n.on("file-open",this.onFileOpen,this)),n.onLayoutReady((function(){return t.onFileOpen(n.getActiveFile())}))},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:return t.hasOwnProperty("group")||this.leaf.pinned||(i=this.leaf.workspace.getActiveFile())&&(t.file=null==i?void 0:i.path),[4,e.prototype.setState.call(this,t,n)];case 1:return r.sent(),[2]}}))}))},t.prototype.onLoadFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(e){return this.update(),[2]}))}))},t.prototype.onUnloadFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(e){return this.requestUpdate(),[2]}))}))},t.prototype.onFileOpen=function(e){this.leaf.group||this.leaf.pinned||(e&&e instanceof ww?this.loadFile(e):this.loadFile(null))},t.prototype.onGroupChange=function(){if(e.prototype.onGroupChange.call(this),this.leaf.group)for(var t=0,n=this.leaf.workspace.getGroupLeaves(this.leaf.group);t<n.length;t++){var i=n[t];if(i!==this.leaf&&i.view instanceof YP){var r=i.view.getSyncViewState();this.leaf.openFile(i.view.file,r)}}else{var o=this.leaf.workspace.getActiveFile();this.loadFile(o)}},t}(YP),XP=function(){function e(e,t){this.navHeaderEl=null,this.navButtonsEl=null,this.app=e;var n=this.navHeaderEl=t.createDiv({cls:"nav-header",prepend:!0});this.navButtonsEl=n.createDiv("nav-buttons-container")}return e.prototype.addNavButton=function(e,t,n,i){var r=this.navButtonsEl.createDiv("clickable-icon nav-action-button");return i&&r.addClass(i),r.addEventListener("click",n),mx(r,e),Rx(r,t),r},e.prototype.addSortButton=function(e,t,n,i){return this.addNavButton("lucide-sort-asc",Qf.plugins.fileExplorer.actionChangeSort(),(function(r){r.preventDefault();var o=r.currentTarget;if(!o.classList.contains("has-active-menu")){for(var a=(new PA).setNoIcon(),s=i(),l=0,c=e;l<c.length;l++){for(var u=function(e){var i=t[e]();a.addItem((function(t){return t.setTitle(i).setChecked(e===s).onClick((function(){n(e)}))}))},h=0,d=c[l];h<d.length;h++){u(d[h])}a.addSeparator()}a.setParentElement(o).showAtMouseEvent(r)}}))},e}(),$P=function(){function e(e){var t=this;if(e)return this.el=e,this.selfEl=this.el.firstChild,this.innerEl=this.selfEl.firstChild,void(this.coverEl=this.selfEl);this.el=e=createDiv("tree-item");var n=this.selfEl=e.createDiv("tree-item-self");n.addEventListener("click",(function(e){0!==e.button||e.defaultPrevented||t.onSelfClick(e)})),n.addEventListener("auxclick",(function(e){1!==e.button||e.defaultPrevented||t.onSelfClick(e)})),this.innerEl=n.createDiv("tree-item-inner"),this.coverEl=this.selfEl}return e.prototype.onSelfClick=function(e){},e.prototype.setClickable=function(e){this.selfEl.toggleClass("is-clickable",e)},e}();function QP(e){var t=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.apply(this,t)||this;return i.collapsible=!1,i.collapsed=!1,i.collapseEl=null,i.childrenEl=i.el.find(".tree-item-children")||i.el.createDiv("tree-item-children"),i}return f(t,e),t.prototype.onCollapseClick=function(e){0===e.button&&(e.preventDefault(),this.toggleCollapsed(!0))},t.prototype.toggleCollapsed=function(e){if(this.collapsible)return this.setCollapsed(!this.collapsed,e)},t.prototype.setCollapsed=function(e,t){if(this.collapsed!==e)return this.collapsed=e,this.updateCollapsed(t)},t.prototype.setCollapsible=function(e){if(this.collapsible!==e){var t=this.selfEl,n=this.collapseEl;this.collapsible=e,e?(n||(mx(n=this.collapseEl=createDiv("tree-item-icon collapse-icon"),"right-triangle"),n.addEventListener("click",this.onCollapseClick.bind(this))),t.prepend(n)):n&&(n.detach(),this.collapseEl=null,this.collapsed=!1),t.toggleClass("mod-collapsible",e)}},t.prototype.updateCollapsed=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=(t=this).el,i=t.childrenEl,r=t.collapsed,LD(n,r),[4,El(i,n,r,e)];case 1:return o.sent(),[2]}}))}))},t}(e);return t}var JP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(QP($P)),eI=function(){function e(e){this._children=[],this.owner=e}return e.prototype.addChild=function(e){this._children.push(e),e.parent=this.owner},e.prototype.setChildren=function(e){this.clear();for(var t=0,n=e;t<n.length;t++){var i=n[t];this.addChild(i)}},e.prototype.removeChild=function(e){this._children.remove(e),e.parent=void 0},e.prototype.hasChildren=function(){return this._children.length>0},e.prototype.first=function(){return this._children.first()},e.prototype.last=function(){return this._children.last()},e.prototype.size=function(){return this._children.length},e.prototype.sort=function(e){return this._children.sort(e)},Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._children=[]},e}();function tI(e){return"vChildren"in e&&"childrenEl"in e}function nI(e){for(var t=[],n=e;n.parent;)t.push(n.parent.vChildren.children.indexOf(n)),n=n.parent;return t.reverse()}function iI(e,t,n){if(void 0===n&&(n=!1),e){for(var i=0,r=e.vChildren.children;i<r.length;i++){var o=r[i];!t(o)&&tI(o)&&(n&&o.collapsed||iI(o,t,n))}return!1}}function rI(e,t){var n;n=function(e,t){for(var n=nI(e),i=nI(t),r=0;r<n.length;r++){var o=n[r],a=i[r];if(void 0===a)return[t,e];if(o!==a)return o<=a?[e,t]:[t,e]}return[e,t]}(e,t),e=n[0];for(var i=[t=n[1]],r=e;r&&r!==t;)i.push(r),r=aI(r,!1);return i}function oI(e){var t=e.parent.vChildren.children,n=t.indexOf(e)+1;return n<t.length?t[n]:null}function aI(e,t){for(;e;){if(!tI(e)||t&&e.collapsed||!e.vChildren.hasChildren())for(var n=!1;e&&e.parent&&!n;){var i=oI(e);i?(e=i,n=!0):e=e.parent}else e=e.vChildren.children[0];if(e&&!e.info.hidden)return e.parent?e:null}return null}function sI(e){var t=e.parent.vChildren.children,n=t.indexOf(e)-1;return n>=0?t[n]:null}function lI(e,t){for(;e;){if(!e||!e.parent)return null;if(0===e.parent.vChildren.children.indexOf(e))e=e.parent;else e=cI(sI(e),t);if(e&&!e.info.hidden)return e}return null}function cI(e,t){if(!e)return null;var n=e;if(tI(n))for(var i=t&&n.collapsed;!i&&tI(n)&&n.vChildren.hasChildren();)n=n.vChildren.last();for(;n.info.hidden;)n=lI(n,!0);return function(e){for(var t,n=e;null===(t=n.parent)||void 0===t?void 0:t.collapsed;)n=n.parent;return n}(n)}function uI(){var e=createDiv();return e.style.width="1px",e.style.height="0.1px",e.style.marginBottom="0",e}var hI=function(e,t){if(t(e),tI(e)){var n=e.vChildren;if(e.childrenEl.parentNode)for(var i=0,r=n.children;i<r.length;i++){var o=r[i];hI(o,t)}}},dI=function(){function e(e){var t=this;this.renderBlockSize=50,this.width=0,this.height=0,this.lastScroll=0,this.queued=null,this.rtl="rtl"===getComputedStyle(e).direction,this.scrollEl=e;var n=getComputedStyle(e).overflowX;this.setWidth="auto"===n||"scroll"===n,e.style.position="relative",e.addEventListener("scroll",this.onScroll.bind(this),Aw),e.onNodeInserted((function(){return t.queueCompute()}))}return e.prototype.invalidate=function(e,t){t?hI(e,(function(e){return e.info.computed=!1})):e.info.computed=!1,this.queueCompute()},e.prototype.invalidateAll=function(){this.rootEl&&(hI(this.rootEl,(function(e){return e.info.computed=!1})),this.queueCompute())},e.prototype.onScroll=function(){var e=this,t=e.scrollEl,n=e.lastScroll,i=e.height,r=t.scrollTop;Math.abs(n-r)>Math.max(i,300)/2&&this.updateVirtualDisplay(r)},e.prototype.onResize=function(){var e=this.scrollEl;if(null!==e.offsetParent){this.height=e.clientHeight;var t=e.clientWidth;t!==this.width?(this.width=t,this.invalidateAll()):this.updateVirtualDisplay()}},e.prototype.queueCompute=function(){var e=this;this.queued||(this.queued=Sc((function(){return e.compute()}),50))},e.prototype.compute=function(e){this.queued&&(this.queued.cancel(),this.queued=null);var t=this.scrollEl,n=this.rootEl;if(n){var i=t.scrollTop;if(null!==t.offsetParent){var r={num:0,limit:e?9999:this.renderBlockSize,finished:!0};this._precompute(n),this._layout(n,r),this._measure(n);var o=r.finished;if(o&&tI(n))for(var a=0,s=n.vChildren.children;a<s.length;a++){if(!s[a].info.computed){o=!1;break}}n.info.computed=o,this.updateVirtualDisplay(i),o||this.queueCompute()}}},e.prototype._precompute=function(e){if(tI(e)){var t=e.vChildren,n=e.childrenEl;if(t.hasChildren()&&n.parentNode)for(var i=t.last(),r=0,o=t.children;r<o.length;r++){var a=o[r];this._precompute(a)||(e.info.computed=!1);var s=a!==i;a.info.next!==s&&(a.info.next=s,a.info.computed=!1,e.info.computed=!1)}}return e.info.queued=!1,e.info.computed},e.prototype._layout=function(e,t){var n,i,r,o=e.info;if(o.computed)return!1;if(t.num>=t.limit)return t.finished=!1,!1;var a=!0,s=!1;if(tI(e)){var l=e.vChildren,c=e.childrenEl,u=e.pusherEl;if(c.parentNode){u.style.marginBottom="0";for(var h=[u],d=0,p=!1,f=0,m=l.children;f<m.length;f++){var v=m[f],g=this._layout(v,t);g&&(s=!0),v.info.computed?(hI(v,(function(e){return d+=e.info.height})),(g||p||v.el.parentNode===c)&&(h.push(v.el),null===(r=v.onRender)||void 0===r||r.call(v),p=!1)):(a=!1,g||t.finished?(h.push(v.el),null===(n=v.onRender)||void 0===n||n.call(v),p=!0):p&&(h.push(v.el),null===(i=v.onRender)||void 0===i||i.call(v),p=!1))}c.setChildrenInPlace(h),c.style.minHeight=d+"px"}}return a&&(o.queued=!0,e.coverEl&&(e.coverEl.style.marginInlineStart="",e.coverEl.style.paddingInlineStart=""),t.num++),a||s},e.prototype._measure=function(e){if(!e.info.computed&&tI(e)){var t=e.vChildren;if(e.childrenEl.parentNode)for(var n=0,i=t.children;n<i.length;n++){var r=i[n];this._measure(r),r.info.queued&&(this.measure(e,r),r.info.computed=!0)}}},e.prototype.measure=function(e,t){var n=t.el,i=t.info;if(n.offsetParent){i.hidden=!1;for(var r=t===e.vChildren.children[0],o=n.nextSibling;o&&!o.isShown();)o=o.nextSibling;var a=r?e.childrenEl.offsetTop:n.offsetTop,s=o?o.offsetTop:n.offsetTop+n.offsetHeight,l=0;if(tI(t)&&(l=t.childrenEl.innerHeight),i.height=s-a-l,i.height<0&&(i.height=0),0===i.height&&0===l&&(i.hidden=!0),this.setWidth&&(i.width=Math.max(n.scrollWidth,n.offsetWidth)),tI(t)&&(i.childTop=t.childrenEl.offsetTop-a),t.coverEl){var c=Ow(t.el,this.scrollEl);i.childLeft=this.rtl?c.right:c.left,i.childLeftPadding=parseInt(getComputedStyle(t.coverEl).paddingInlineStart)}}else i.hidden=!0},e.prototype.updateVirtualDisplay=function(e){var t=this.scrollEl,n=this.rootEl,i=t.scrollTop;"number"==typeof e&&(i=e),this.lastScroll=i;var r=t.clientHeight,o=i+r,a=Math.min(i,t.scrollTop),s=Math.max(r/4,300),l=a-s,c=o+s,u=parseInt(getComputedStyle(t).paddingInlineStart),h=0,d=0;hI(n,(function(e){var t=e.info.height;t>0&&(h+=t,d++)})),h/=d,this.update(n,this.getRootTop(),l,c,u,h),t.scrollTop!==i&&(t.scrollTop=i)},e.prototype.update=function(e,t,n,i,r,o){var a,s=e.info,l=e.coverEl;if(l&&0!==s.childLeft){var c=s.childLeft-r;l.style.setProperty("margin-inline-start",-c+"px","important"),l.style.setProperty("padding-inline-start",c+s.childLeftPadding+"px","important")}if(tI(e)){var u=e.vChildren,h=e.childrenEl,d=e.pusherEl;if(h.parentNode){if(s.hidden)return;var p=this.setWidth,f=0,m=0,v=[d],g=!1,y=0;t+=s.height;for(var b=function(e){var s=0;hI(e,(function(e){return s+=e.info.hidden?0:e.info.height||o})),m+=s;var l=t+s;p&&(y=Math.max(y,e.info.width)),g=!1,l<n?(f+=s,hI(e,(function(e){return e.el.parentNode&&e.el.detach()}))):t>i?hI(e,(function(e){return e.el.parentNode&&e.el.detach()})):(v.push(e.el),null===(a=e.onRender)||void 0===a||a.call(e),w.update(e,t,n,i,r,o),g=!0),t=l},w=this,k=0,C=u.children;k<C.length;k++){b(S=C[k])}h.setChildrenInPlace(v),0===u.children.length&&h.empty(),d.style.marginBottom=f+"px",p&&(y=Math.max(1,y),d.style.width=y+"px"),h.style.minHeight=g?"":m+"px"}else{v=[];for(var M=0,E=u.children;M<E.length;M++){var S=E[M];v.push(S.el)}h.setChildrenInPlace(v),h.style.minHeight=""}}},e.prototype.scrollIntoView=function(e,t){void 0===t&&(t=0),this.compute(!0);for(var n=0;n<9&&!this.rootEl.info.computed;n++)this.compute(!0);var i=this.findElementTop(e,this.rootEl,this.getRootTop());if(null!==i){var r=i+e.info.height,o=this.scrollEl,a=o.scrollTop,s=a+o.clientHeight;r+=t,(i-=t)<a?o.scrollTop=i:r>s&&(o.scrollTop=r-o.clientHeight),this.updateVirtualDisplay()}},e.prototype.findElementTop=function(e,t,n){if(e===t)return n;if(tI(t)){var i=t.vChildren,r=t.childrenEl,o=t.info;if(r.parentNode){n+=o.childTop;for(var a=function(t){var i=s.findElementTop(e,t,n);if(null!==i)return{value:i};var r=0;hI(t,(function(e){return r+=e.info.hidden?0:e.info.height})),n+=r},s=this,l=0,c=i.children;l<c.length;l++){var u=a(c[l]);if("object"==typeof u)return u.value}}}return null},e.prototype.getRootTop=function(){for(var e=this.scrollEl,t=this.rootEl.childrenEl,n=0;t&&t!==e;)n+=t.offsetTop,t=t.offsetParent;return n},e}(),pI=function(e){this.vChildren=new eI(this),this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.pusherEl=uI(),this.el=e,this.childrenEl=e.createDiv()},fI=function(){function e(e,t){var n=this;this.activeDom=null,this.focusedItem=null,this.selectedDoms=new Set,this.prefersCollapsed=!1,this.isAllCollapsed=!0,this.requestSaveFolds=mc(this.saveFolds.bind(this),200),this.id=t.id,this.app=t.app,this.view=e,this.scope=t.scope,this.handleDeleteSelectedItems=t.handleDeleteSelectedItems,this.handleCollapseAll=t.handleCollapseAll,this.handleRenameFocusedItem=t.handleRenameFocusedItem,this.containerEl=t.containerEl,this.getNodeId=t.getNodeId,this.infinityScroll=new dI(t.containerEl),this.infinityScroll.rootEl=new pI(t.containerEl),this.initializeKeyboardNav(),this.containerEl.addEventListener("click",(function(e){e.target===n.containerEl&&(n.clearSelectedDoms(),n.setFocusedItem(null,!1))}))}return e.prototype.isItem=function(e){return!(e instanceof pI)&&!!e},Object.defineProperty(e.prototype,"root",{get:function(){return this.infinityScroll.rootEl},enumerable:!1,configurable:!0}),e.prototype.initializeKeyboardNav=function(){var e=this;this.scope.register([],"ArrowDown",this.onKeyArrowDown.bind(this)),this.scope.register(["Shift"],"ArrowDown",this.onKeyArrowDown.bind(this)),this.scope.register([],"ArrowUp",this.onKeyArrowUp.bind(this)),this.scope.register(["Shift"],"ArrowUp",this.onKeyArrowUp.bind(this)),this.scope.register([],"ArrowLeft",this.onKeyArrowLeft.bind(this)),this.scope.register([],"ArrowRight",this.onKeyArrowRight.bind(this)),Zl.isMacOS&&this.handleRenameFocusedItem?(this.scope.register([],"Enter",this.handleRenameFocusedItem.bind(this)),this.scope.register(["Mod"],"ArrowDown",(function(t){t.preventDefault(),e.focusedItem&&e.onKeyOpen(new KeyboardEvent(t.type,m(m({},t),{metaKey:!1})))}))):this.scope.register([],"Enter",this.onKeyOpen.bind(this)),this.scope.register([]," ",this.onKeyOpen.bind(this)),this.handleRenameFocusedItem&&this.scope.register([],"F2",this.handleRenameFocusedItem.bind(this)),this.scope.register(["Mod"],"Enter",this.onKeyOpen.bind(this)),this.handleDeleteSelectedItems&&(Zl.isMacOS?this.scope.register(["Mod"],"Backspace",this.handleDeleteSelectedItems.bind(this)):this.scope.register([],"Delete",this.handleDeleteSelectedItems.bind(this)))},e.prototype.toggleCollapseAll=function(){this.setCollapseAll(!this.isAllCollapsed)},e.prototype.setCollapseAll=function(e){var t;this.isAllCollapsed!==e&&(this.isAllCollapsed=e,iI(this.root,(function(t){tI(t)&&t.setCollapsed(e,!1)})),null===(t=this.handleCollapseAll)||void 0===t||t.call(this,e),this.requestSaveFolds())},e.prototype.onResize=function(){this.infinityScroll.onResize()},e.prototype.handleItemSelection=function(e,t){var n=this,i=n.selectedDoms,r=n.activeDom,o=n.view;if(!Ak.isModEvent(e)){if(e.altKey&&!e.shiftKey)return this.app.workspace.setActiveLeaf(o.leaf,{focus:!0}),i.has(t)?this.deselectItem(t):(this.selectItem(t),this.setFocusedItem(t,!1),this.activeDom=t),!0;if(e.shiftKey){this.app.workspace.setActiveLeaf(o.leaf,{focus:!0});for(var a=0,s=r?rI(r,t):[t];a<s.length;a++){var l=s[a];this.selectItem(l)}return!0}if(t.selfEl.hasClass("is-being-renamed"))return!0;if(t.selfEl.hasClass("is-active"))return this.app.workspace.setActiveLeaf(o.leaf,{focus:!0}),this.setFocusedItem(t,!1),!0}return this.clearSelectedDoms(),this.setFocusedItem(null),this.activeDom=t,!1},e.prototype.clearSelectedDoms=function(){this.selectedDoms.forEach((function(e){e.selfEl.removeClass("is-selected")})),this.selectedDoms.clear()},e.prototype.deselectItem=function(e){this.isItem(e)&&this.selectedDoms.has(e)&&(this.selectedDoms.delete(e),e.selfEl.removeClass("is-selected"))},e.prototype.selectItem=function(e){this.isItem(e)&&!this.selectedDoms.has(e)&&(this.selectedDoms.add(e),e.selfEl.addClass("is-selected"))},e.prototype.onKeyOpen=function(e){this.isItem(this.focusedItem)&&this.focusedItem.onSelfClick(e)},e.prototype.onKeyArrowUp=function(e){e.preventDefault();var t=this.focusedItem;this.changeFocusedItem("backwards"),e.shiftKey&&(this.selectItem(t),this.selectItem(this.focusedItem))},e.prototype.onKeyArrowDown=function(e){e.preventDefault(),xw();var t=this.focusedItem;this.changeFocusedItem("forwards"),e.shiftKey&&(this.selectItem(t),this.selectItem(this.focusedItem))},e.prototype.onKeyArrowLeft=function(e){var t;if(!dk(e.targetNode)&&(e.preventDefault(),this.focusedItem))if(this.focusedItem!==this.root){if(tI(this.focusedItem)&&this.focusedItem.collapsible)this.focusedItem.collapsed?tI(this.focusedItem.parent)&&this.setFocusedItem(this.focusedItem.parent):this.focusedItem.setCollapsed(!0,!0);else{if(this.focusedItem.parent===this.root)return void this.setCollapseAll(!0);this.focusedItem.parent.setCollapsed(!0,!0)}for(var n=this.focusedItem;null===(t=n.parent)||void 0===t?void 0:t.collapsed;)n=n.parent;this.setFocusedItem(n)}else this.setCollapseAll(!0)},e.prototype.onKeyArrowRight=function(e){if(!dk(e.targetNode)){e.preventDefault();var t=this.focusedItem;t&&tI(t)&&(t.collapsed?t.setCollapsed(!1,!0):t.vChildren.hasChildren()&&this.changeFocusedItem("forwards"))}},e.prototype.setFocusedItem=function(e,t){void 0===t&&(t=!0),e!==this.root&&(this.isItem(this.focusedItem)&&this.focusedItem.selfEl.removeClass("has-focus"),this.focusedItem=e,e&&this.isItem(e)&&(e.selfEl.addClass("has-focus"),t&&this.infinityScroll.scrollIntoView(e)))},e.prototype.changeFocusedItem=function(e){if(this.focusedItem||(this.activeDom?this.focusedItem=this.activeDom:this.selectedDoms.size&&(this.focusedItem=Array.from(this.selectedDoms).last())),this.focusedItem){var t="forwards"===e?aI(this.focusedItem,!0):lI(this.focusedItem,!0);t&&this.setFocusedItem(t)}else{var n=this.root;if("backwards"===e){for(var i=n;tI(i)&&i.vChildren.hasChildren();)i=i.vChildren.last();this.setFocusedItem(i)}else this.setFocusedItem(n.vChildren.children[0])}},e.prototype.getFoldKey=function(){return this.prefersCollapsed?this.id+"-unfold":this.id+"-folds"},e.prototype.loadFolds=function(){var e=this;if(this.getNodeId){var t=new Set(this.app.loadLocalStorage(this.getFoldKey())),n=!this.prefersCollapsed;iI(this.root,(function(i){tI(i)&&t.has(e.getNodeId(i))&&i.setCollapsed(n,!1)}))}},e.prototype.saveFolds=function(){var e=this;if(this.getNodeId&&this.app.workspace.layoutReady){var t=[];iI(this.root,(function(n){tI(n)&&n.collapsed!==e.prefersCollapsed&&t.push(e.getNodeId(n))})),this.app.saveLocalStorage(this.getFoldKey(),t)}},e}();function mI(e,t){var n=null,i=t.root,r=function(e){if(!e)return null;for(var t=aI(e,!0);t.info.hidden;)t=aI(e,!0);return t}(i),o=cI(i,!0),a=r.selfEl.offsetLeft;return!i.vChildren.hasChildren()||r.selfEl.isShown()&&e.clientY<r.selfEl.getBoundingClientRect().top?{node:null,idx:0,placement:"before",x:a,y:r.selfEl.offsetTop}:o.selfEl.isShown()&&e.clientY>o.selfEl.getBoundingClientRect().bottom?{node:null,idx:i.vChildren.children.length,placement:"after",x:a,y:o.selfEl.offsetTop+o.selfEl.offsetHeight}:(iI(i,(function(r){if(!r.info.hidden&&r.selfEl.isShown()){if(t.selectedDoms.has(r))return!0;var o=r.selfEl,s=o.getBoundingClientRect(),l=2*s.height,c=s.bottom-e.clientY;if(c<l&&e.clientY>=s.top){l=c;var u=s.height/2,h=s.top+u,d=Math.abs(e.clientY-h),p=e.clientY>h?"after":"before",f=null,m=!1,v=0;tI(r)&&r.collapsible&&d/u<.9&&(m=!0,p="after"),tI(r)&&!r.collapsed&&"after"===p?(f=r,v=0):(r.parent&&tI(r.parent)?v=(f=r.parent).vChildren.children.indexOf(r):(f=null,v=t.root.vChildren.children.indexOf(r)),"after"===p&&v++);var g=a,y="before"===p?o.offsetTop:o.offsetTop+s.height;f&&f!==i&&(g=f.info.childLeft+f.info.childLeftPadding),n={node:r,parentNode:f,overlapsNode:m,idx:v,placement:p,x:g,y}}}}),!0),n)}var vI=createDiv("drop-indicator is-active"),gI=mc((function(e){var t=e.x,n=e.y,i=e.placement;vI.style.left=t+"px",vI.style.top=n+("after"===i?1:-1)-2+"px"}),0),yI=null,bI=null;function wI(e,t,n,i){var r=e.containerEl.win;if(null==bI||bI.removeClass("is-being-dragged-over"),!i)return vI.detach(),void(bI=null);if(t&&t.overlapsNode&&tI(t.node)&&!n.contains(t.node)){var o=t.node;o.selfEl!==bI&&(r.clearTimeout(yI),yI=null),null==(bI=o.selfEl)||bI.addClass("is-being-dragged-over"),o.collapsed&&!yI&&(yI=r.setTimeout((function(){bI===o.selfEl&&o.setCollapsed(!1,!0)}),750))}else bI=null;t&&(vI.parentNode!==e.containerEl&&e.containerEl.prepend(vI),gI(t));var a=t&&!bI;if(a&&1===e.selectedDoms.size){var s=t.node,l=t.placement,c=e.selectedDoms.values().next().value;(s===c||"after"===l&&s&&s===sI(c)||"before"===l&&s&&s===oI(c))&&(a=!1)}return vI.toggle(a),vI}var kI=function(e){return 255&parseInt(e)},CI=/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*[\d.]+\s*)?\)$/i,MI=/^hsla?\s*\(\s*([\d.]+)(deg|rad|grad|turn)?\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%\s*(,\s*[\d.]+\s*)?\)$/i,EI=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function SI(e){var t=e.match(CI);return t?{r:kI(t[1]),g:kI(t[2]),b:kI(t[3]),a:t[4]?Math.clamp(parseFloat(t[4].substring(1)),0,1):1}:null}function xI(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function TI(e){var t,n,i,r=e.h,o=e.s,a=e.l;if(r/=360,a/=100,0==(o/=100))t=n=i=a;else{var s=a<.5?a*(1+o):a+o-a*o,l=2*a-s;t=xI(l,s,r+1/3),n=xI(l,s,r),i=xI(l,s,r-1/3)}return{r:Math.round(255*t),g:Math.round(255*n),b:Math.round(255*i)}}function DI(e){var t=e.r,n=e.g,i=e.b;t/=255,n/=255,i/=255;var r,o,a=Math.max(t,n,i),s=Math.min(t,n,i),l=(a+s)/2;if(a==s)r=o=0;else{var c=a-s;switch(o=l>.5?c/(2-a-s):c/(a+s),a){case t:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-t)/c+2;break;case i:r=(t-n)/c+4}r/=6}return{h:Math.round(360*r),s:Math.round(100*o),l:Math.round(100*l)}}function AI(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function LI(e){var t=e.r,n=e.g,i=e.b;return"#"+AI(t)+AI(n)+AI(i)}function PI(e){var t=EI.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function II(e){return e.r<<16|e.g<<8|e.b}function FI(e){var t=document.body.createDiv();t.style.color="var(".concat(e,")");var n=getComputedStyle(t).color;return t.detach(),SI(n)}function OI(e){var t=PI(e);if(t)return t;if(t=SI(e))return t;var n=function(e){var t=e.match(MI);if(t){var n=t[1],i=t[2],r=parseFloat(n);return"rad"===i?r=180*r/Math.PI:"grad"===i?r*=.9:"turn"===i&&(r*=360),{h:r,s:kI(t[3]),l:kI(t[4]),a:t[5]?Math.clamp(parseFloat(t[5].substring(1)),0,1):1}}return null}(e);return n?TI(n):null}function BI(e){return(299*e.r+587*e.g+114*e.b)/1e3>=150}var NI=function(){function e(e){this.components=[];var t=this.settingEl=e.createDiv("setting-item"),n=this.infoEl=t.createDiv("setting-item-info");this.nameEl=n.createDiv("setting-item-name"),this.descEl=n.createDiv("setting-item-description"),this.controlEl=t.createDiv("setting-item-control")}return e.prototype.setName=function(e){return this.nameEl.setText(e),this},e.prototype.setDesc=function(e){return this.descEl.setText(e),this},e.prototype.setClass=function(e){return this.settingEl.addClass(e),this},e.prototype.setTooltip=function(e,t){return Rx(this.nameEl,e,t),this},e.prototype.setHeading=function(){return this.settingEl.addClass("setting-item-heading"),this},e.prototype.setDisabled=function(e){this.settingEl.toggleClass("is-disabled",e);for(var t=0,n=this.components;t<n.length;t++){n[t].setDisabled(e)}return this},e.prototype.setNoInfo=function(){return this.infoEl.hide(),this},e.prototype.addButton=function(e){var t=new VI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addExtraButton=function(e){var t=new zI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addToggle=function(e){var t=new qI(this.controlEl);return this.components.push(t),e(t),this.settingEl.addClass("mod-toggle"),this},e.prototype.addText=function(e){var t=new _I(this.controlEl);if(Zl.isMobile){var n=t.inputEl;n.addEventListener("keydown",(function(e){e.isComposing||e.defaultPrevented||"Enter"!==e.key||n.blur()}))}return this.components.push(t),e(t),this},e.prototype.addSearch=function(e){var t=new WI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addTextArea=function(e){var t=new jI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addMomentFormat=function(e){var t=new GI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addDropdown=function(e){var t=new KI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addColorPicker=function(e){var t=new XI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addProgressBar=function(e){var t=new YI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addSlider=function(e){var t=new ZI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.then=function(e){return e(this),this},e.prototype.clear=function(){return this.controlEl.empty(),this.components=[],this},e.prototype.setVisibility=function(e){return this.settingEl.toggle(e),this},e}(),RI=function(){function e(){this.disabled=!1}return e.prototype.then=function(e){return e(this),this},e.prototype.setDisabled=function(e){return this.disabled=e,this},e}(),HI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.registerOptionListener=function(e,t){var n=this;return e[t]=function(e){return void 0!==e&&n.setValue(e),n.getValue()},this},t}(RI),VI=function(e){function t(t){var n=e.call(this)||this;return(n.buttonEl=t.createEl("button")).addEventListener("click",(function(e){var t=n.clickCallback;!n.disabled&&t&&t(e)})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.buttonEl.disabled=t,this},t.prototype.setLoading=function(e){return this.buttonEl.toggleClass("mod-loading",e),this},t.prototype.setCta=function(){return this.buttonEl.addClass("mod-cta"),this},t.prototype.removeCta=function(){return this.buttonEl.removeClass("mod-cta"),this},t.prototype.setWarning=function(){return this.buttonEl.addClass("mod-warning"),this},t.prototype.setTooltip=function(e,t){return Rx(this.buttonEl,e,t),this},t.prototype.setButtonText=function(e){return this.buttonEl.setText(e),this},t.prototype.setIcon=function(e){return mx(this.buttonEl,e),this},t.prototype.setClass=function(e){return this.buttonEl.addClass(e),this},t.prototype.onClick=function(e){return this.clickCallback=e,this},t}(RI),zI=function(e){function t(t){var n=e.call(this)||this,i=n.extraSettingsEl=t.createDiv("clickable-icon extra-setting-button");return mx(i,"lucide-settings"),i.addEventListener("click",(function(){var e=n.changeCallback;!n.disabled&&e&&e()})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.extraSettingsEl.toggleClass("is-disabled",t),this},t.prototype.setTooltip=function(e,t){return Rx(this.extraSettingsEl,e,t),this},t.prototype.setIcon=function(e){return mx(this.extraSettingsEl,e),this},t.prototype.onClick=function(e){return this.changeCallback=e,this},t}(RI),qI=function(e){function t(t){var n=e.call(this)||this;return n.on=!1,(n.toggleEl=t.createDiv("checkbox-container",(function(e){e.createEl("input",{attr:{type:"checkbox",tabIndex:0}})}))).addEventListener("click",n.onClick.bind(n)),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.toggleEl.toggleClass("is-disabled",t),this},t.prototype.getValue=function(){return this.on},t.prototype.setValue=function(e){var t;return this.on!==e&&(this.on=e,this.toggleEl.toggleClass("is-enabled",e),null===(t=this.changeCallback)||void 0===t||t.call(this,e)),this},t.prototype.setSmall=function(){return this.toggleEl.addClass("mod-small"),this},t.prototype.setTooltip=function(e,t){return Rx(this.toggleEl,e,t),this},t.prototype.onClick=function(){this.disabled||this.setValue(!this.getValue())},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}(HI),UI=function(e){function t(t){var n=e.call(this)||this;return n.inputEl=t,t.addEventListener("input",n.onChanged.bind(n)),t.setAttribute("spellcheck","false"),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.inputEl.disabled=t,this},t.prototype.getValue=function(){return this.inputEl.value},t.prototype.setValue=function(e){return String.isString(e)&&(this.inputEl.value=e),this},t.prototype.setPlaceholder=function(e){return this.inputEl.setAttribute("placeholder",e),this},t.prototype.onChanged=function(){var e=this.changeCallback;e&&e(this.inputEl.value)},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}(HI),_I=function(e){function t(t){var n=t.createEl("input",{type:"text"});return e.call(this,n)||this}return f(t,e),t}(UI),WI=function(e){function t(t){var n=this,i=t.createDiv("search-input-container"),r=i.createEl("input",{type:"search",attr:{enterkeyhint:"search"}});return(n=e.call(this,r)||this).containerEl=i,n.clearButtonEl=i.createDiv("search-input-clear-button",(function(e){e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(){n.disabled||(r.value="",n.onChanged(),r.focus())}))})),n}return f(t,e),t.prototype.onChanged=function(){e.prototype.onChanged.call(this)},t.prototype.setValue=function(t){return e.prototype.setValue.call(this,t)},t.prototype.setClass=function(e){return this.containerEl.addClass(e),this},t.prototype.addRightDecorator=function(e){return e(this.containerEl.createDiv("input-right-decorator")),this},t}(UI),jI=function(e){function t(t){return e.call(this,t.createEl("textarea"))||this}return f(t,e),t}(UI),GI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.setDefaultFormat=function(e){return this.defaultFormat=e,this.setPlaceholder(e),this.updateSample(),this},t.prototype.setSampleEl=function(e){return this.sampleEl=e,this.updateSample(),this},t.prototype.setValue=function(t){return e.prototype.setValue.call(this,t),this.updateSample(),this},t.prototype.onChanged=function(){e.prototype.onChanged.call(this),this.updateSample()},t.prototype.updateSample=function(){var e=this.sampleEl;if(e){var t=this.inputEl.value||this.defaultFormat;if(t){var n=window.moment().format(t);e.setText(n)}else e.setText("")}},t}(_I),KI=function(e){function t(t){var n=e.call(this)||this;return n.selectEl=t.createEl("select","dropdown"),n.selectEl.addEventListener("change",(function(){var e=n.changeCallback;e&&e(n.getValue())})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.selectEl.disabled=t,this},t.prototype.addOption=function(e,t){return this.selectEl.createEl("option",{value:e,text:t}),this},t.prototype.addOptions=function(e){for(var t in e)e.hasOwnProperty(t)&&this.selectEl.createEl("option",{value:t,text:e[t]});return this},t.prototype.getValue=function(){return this.selectEl.value},t.prototype.setValue=function(e){return this.selectEl.value=e,this},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}(HI),YI=function(e){function t(t){var n=e.call(this)||this;return n.progressBar=t.createDiv("setting-progress-bar",(function(e){n.lineEl=e.createDiv("setting-progress-bar-inner")})),n}return f(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){return e=Math.clamp(e,0,100),this.value=e,this.lineEl.style.width="".concat(e,"%"),this},t.prototype.setVisibility=function(e){return this.progressBar.hidden=!e,this},t}(HI),ZI=function(e){function t(t){var n=e.call(this)||this;n.dynamicTooltip=!1,n.instant=!1;var i=n.sliderEl=t.createEl("input",{type:"range",cls:"slider"});return i.addEventListener("input",(function(){if(n.dynamicTooltip&&n.showTooltip(),n.instant){var e=n.changeCallback;e&&e(n.getValue())}})),i.addEventListener("change",(function(){if(!n.instant){var e=n.changeCallback;e&&e(n.getValue())}})),i.addEventListener("click",(function(e){e.stopPropagation()})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.sliderEl.disabled=t,this},t.prototype.setInstant=function(e){return this.instant=e,this},t.prototype.setLimits=function(e,t,n){return this.sliderEl.setAttrs({min:e,max:t,step:n}),this},t.prototype.getValue=function(){return this.sliderEl.valueAsNumber},t.prototype.setValue=function(e){if(this.sliderEl.valueAsNumber!==e){this.sliderEl.valueAsNumber=e;var t=this.changeCallback;t&&t(e)}return this},t.prototype.getValuePretty=function(){var e=this.sliderEl,t=this.getValue();return"any"===e.step||parseFloat(e.step)<1?t.toFixed(2):t.toString()},t.prototype.setDynamicTooltip=function(){var e=this.sliderEl;return e.addEventListener("mouseenter",this.showTooltip.bind(this)),e.addEventListener("mouseleave",Bx),this.dynamicTooltip=!0,this},t.prototype.showTooltip=function(){Ox(this.sliderEl,this.getValuePretty(),{placement:"top"})},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}(HI),XI=function(e){function t(t){var n=e.call(this)||this;return n.colorPickerEl=t.createEl("input",{type:"color"}),n.colorPickerEl.addEventListener("change",(function(){var e=n.changeCallback;e&&e(n.getValue())})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.colorPickerEl.disabled=t,this},t.prototype.getValue=function(){return this.colorPickerEl.value},t.prototype.getValueRgb=function(){return PI(this.getValue())||{r:0,g:0,b:0}},t.prototype.getValueHsl=function(){return DI(this.getValueRgb())},t.prototype.getValueInt=function(){return parseInt(this.getValue().slice(1),16)},t.prototype.setValue=function(e){if(this.colorPickerEl.value!==e){this.colorPickerEl.value=e;var t=this.changeCallback;t&&t(this.getValue())}return this},t.prototype.setValueRgb=function(e){return this.setValue(LI(e))},t.prototype.setValueHsl=function(e){return this.setValueRgb(TI(e))},t.prototype.setValueInt=function(e){return this.setValue("#"+e.toString(16).padStart(6,"0"))},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}(HI),$I=Qf.plugins.properties,QI="all-properties",JI="file-properties",eF=[["alphabetical","alphabeticalReverse"],["frequency","frequencyReverse"]],tF={alphabetical:$I.labelSortByNameAToZ,alphabeticalReverse:$I.labelSortByNameZToA,frequency:$I.labelSortByFrequencyHighToLow,frequencyReverse:$I.labelSortByFrequencyLowToHigh},nF=function(){function e(){this.id="properties",this.name=$I.name(),this.description=$I.desc(),this.defaultOn=!1}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerStatusBarItem(),t.registerGlobalCommand({id:"properties:open",name:$I.actionShow(),icon:"lucide-archive",callback:function(){var e=Zl.isMobile?"left":"right";n.app.workspace.ensureSideLeaf(QI,e,{active:!0})}}),t.registerGlobalCommand({id:"properties:open-local",name:$I.actionShowLocal(),icon:"lucide-info",callback:function(){var e=n.app.workspace.getActiveFile();n.ensurePropertiesView(e)}}),t.registerViewType(QI,(function(e){return new rF(e)})),t.registerViewType(JI,(function(e){return new oF(e,n)}))},e.prototype.initLeaf=function(){var e=Zl.isMobile?"left":"right";this.app.workspace.ensureSideLeaf(QI,e,{reveal:!1})},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.updateStatusbar=function(e){var t=this.plugin.statusBarEl;t&&(t.setText(Qf.nouns.propertiesWithCount({count:e})),t.toggle(e>0))},e.prototype.onFileOpen=function(e){var t,n=0;if(e){var i=this.app.metadataCache.getFileCache(e);i&&(n=Object.keys(null!==(t=i.frontmatter)&&void 0!==t?t:{}).length)}this.updateStatusbar(n)},e.prototype.onCacheChanged=function(e,t,n){var i;if(e===this.app.workspace.getActiveFile()){var r=Object.keys(null!==(i=n.frontmatter)&&void 0!==i?i:{}).length;this.updateStatusbar(r)}},e.prototype.onEnable=function(e,t){var n=this;t.registerEvent(e.workspace.on("file-open",this.onFileOpen,this)),t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.metadataCache.on("changed",this.onCacheChanged,this));var i=this.plugin.statusBarEl;i&&(i.addClass("mod-clickable"),i.addEventListener("click",(function(){return g(n,void 0,void 0,(function(){var e;return y(this,(function(t){return e=this.app.workspace.getActiveFile(),this.ensurePropertiesView(e),[2]}))}))}))),e.workspace.registerHoverLinkSource("properties",{display:this.name,defaultMod:!0})},e.prototype.onDisable=function(e,t){e.workspace.unregisterHoverLinkSource("properties")},e.prototype.onFileMenu=function(e,t,n,i){var r=this;!Zl.isMobile&&t instanceof ww&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle($I.actionOpenLocal()).setIcon("lucide-info").onClick((function(){return g(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"horizontal").setViewState({type:JI,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))}))},e.prototype.ensurePropertiesView=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:for(n=this.app.workspace.getLeavesOfType(JI),i=0,r=n;i<r.length;i++)if(!(o=r[i]).pinned||(null===(a=o.getViewState().state)||void 0===a?void 0:a.file)===e.path){t=o;break}return t||(t=this.app.workspace.getRightLeaf(!1)),[4,this.app.workspace.revealLeaf(t)];case 1:return s.sent(),[4,t.setViewState({type:JI,state:e?{file:e.path}:void 0})];case 2:return s.sent(),this.app.workspace.setActiveLeaf(t,{focus:!0}),[2,t.view]}}))}))},e.prototype.addProperty=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.ensurePropertiesView(e)];case 1:return t.sent().metadataEditor.addProperty(),[2]}}))}))},e}(),iF=function(e){function t(t){var n=e.call(this)||this;n.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},n.property=null,n.count=0,n.vChildren=new eI(n),n.pusherEl=uI(),n.view=t,n.app=t.app;var i=n,r=i.selfEl,o=i.innerEl;return n.iconEl=n.selfEl.createDiv({cls:"tree-item-icon",prepend:!0}),n.titleEl=o.createDiv("tree-item-inner-text"),n.flairEl=r.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),n.selfEl.addClass("tappable"),n.selfEl.addEventListener("contextmenu",n.onContextMenu.bind(n)),n.setClickable(!0),n.titleEl.addEventListener("blur",(function(){n.view.acceptRename(n)})),n}return f(t,e),t.prototype.onContextMenu=function(e){var t,n=this;if(!e.defaultPrevented){e.preventDefault(),this.view.tree.setFocusedItem(this,!1);var i=this.app.metadataTypeManager,r=(new PA).addSections(["action","action.changeType","danger"]);if(r.setSectionSubmenu("action.changeType",{title:Qf.properties.optionPropertyType(),icon:"lucide-menu"}),this.view.tree.selectedDoms.size>1&&this.view.tree.selectedDoms.has(this)){var o=Array.from(this.view.tree.selectedDoms),a=o.every((function(e){var t=e.property.key,n=!KA.hasOwnProperty(t),r=!!i.getAssignedType(t);return n&&r}));r.addItem((function(e){return e.setSection("danger").setIcon("lucide-circle-slash").setDisabled(!a).setTitle($I.optUnassignType()).onClick((function(){for(var e=0,t=o;e<t.length;e++){var n=t[e];i.unsetType(n.property.key)}})).setWarning(!0)}))}else{for(var s=!KA.hasOwnProperty(this.property.key),l=!!i.getAssignedType(this.property.key),c=function(e){if(e.reservedKeys&&!(null===(t=e.reservedKeys)||void 0===t?void 0:t.contains(u.property.key)))return"continue";r.addItem((function(t){var r;return t.setTitle(e.name()).setIcon(null!==(r=e.icon)&&void 0!==r?r:"lucide-pencil").setSection("action.changeType").setDisabled(!s).setChecked(e.type===n.property.type).onClick((function(){i.setType(n.property.key,e.type)}))}))},u=this,h=0,d=Object.values(i.registeredTypeWidgets);h<d.length;h++){c(d[h])}r.addItem((function(e){return e.setSection("action").setTitle(Qf.interface.menu.rename()).setIcon("lucide-edit-3").setDisabled(!s).onClick((function(){return n.view.startRename(n)}))})),r.addItem((function(e){return e.setSection("danger").setIcon("lucide-circle-slash").setDisabled(!s||!l).setTitle($I.optUnassignType()).onClick((function(){i.unsetType(n.property.key)})).setWarning(!0)}))}r.setParentElement(this.el).showAtMouseEvent(e)}},t.prototype.displayError=function(e){var t=this.selfEl;Ox(t,e,{placement:"bottom",classes:["mod-error"]}),t.win.setTimeout(Bx,2e3)},t.prototype.startRename=function(){var e=this,t=e.app,n=e.selfEl,i=e.titleEl;n.addClass("is-being-renamed"),i.setAttribute("contenteditable","true");var r=t.vault.getConfig("spellcheck");i.setAttribute("spellcheck",String(r)),Sw(i)},t.prototype.stopRename=function(){var e=this.selfEl,t=this.titleEl;e.removeClass("is-being-renamed"),t.removeAttribute("contenteditable"),t.removeAttribute("spellcheck")},t.prototype.onSelfClick=function(e){if(!this.view.tree.handleItemSelection(e,this)){var t=this.view.app.internalPlugins.getEnabledPluginById("global-search");if(t){var n=Ak.isModEvent(e),i=t.getGlobalSearchQuery(),r='["'.concat(this.property.key,'"]');n&&""!==i?i.contains(r)?t.openGlobalSearch(i.replace(r,"").trim()):t.openGlobalSearch("".concat(i.trim()," ").concat(r)):t.openGlobalSearch(r)}}},t.prototype.updateTitle=function(){this.titleEl.setText(this.property.key)},t.prototype.setProperty=function(e){var t,n=this.app.metadataTypeManager;this.count=e.count,this.property={key:e.name,type:e.type,value:""};var i=n.getTypeInfo({key:e.name,type:e.type,value:void 0});return mx(this.iconEl,null!==(t=i.expected.icon)&&void 0!==t?t:"lucide-file-question"),this.updateTitle(),this.flairEl.setText(String(e.count)),this},t}($P),rF=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-archive",n.doms={},n.searchQuery=null,n.sortOrder="frequency",n.isShowingSearch=!1,n.propertyBeingRenamed=null,n.requestUpdate=mc(n.update.bind(n),100);var i=n.containerEl;n.emptyStateEl=createDiv({cls:"pane-empty properties-pane-empty",text:$I.labelNoProperties()}),n.scope=new Tk(n.app.scope),n.scope.register([],"Enter",n.onKeyEnterInFocus.bind(n)),n.scope.register(["Mod"],"Enter",n.onKeyEnterInFocus.bind(n));var r=new XP(n.app,n.containerEl);return r.addSortButton(eF,tF,(function(e){return n.setSortOrder(e)}),(function(){return n.sortOrder})),n.showSearchButtonEl=r.addNavButton("lucide-search",Qf.plugins.backlinks.labelShowSearch(),n.onToggleShowSearch.bind(n)),n.searchComponent=new WI(r.navHeaderEl).setPlaceholder(Qf.plugins.search.promptStartSearch()).onChange(mc(n.updateSearch.bind(n),300,!0)).then((function(e){Rx(e.clearButtonEl,Qf.plugins.search.tooltipClearSearch()),e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(Zl.isMobile&&xw(),n.updateSearch())})),e.containerEl.hide()})),n.tree=new fI(n,{app:n.app,containerEl:n.contentEl,id:QI,scope:n.scope}),n.propertyRenameScope=new Tk(n.app.scope),n.propertyRenameScope.register([],"Enter",n.onKeyEnterInRename.bind(n)),n.propertyRenameScope.register([],"Escape",n.cancelRename.bind(n)),i.addEventListener("click",(function(){n.tree.setFocusedItem(null)})),n}return f(t,e),t.prototype.onload=function(){var e=this;this.registerEvent(this.app.vault.on("delete",this.requestUpdate,this)),this.registerEvent(this.app.metadataCache.on("finished",this.requestUpdate,this)),this.registerEvent(this.app.metadataTypeManager.on("changed",this.requestUpdate,this)),this.app.workspace.onLayoutReady((function(){e.update()}))},t.prototype.startRename=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return this.propertyBeingRenamed?(this.cancelRename(),[2]):(this.propertyBeingRenamed=e,this.app.keymap.pushScope(this.propertyRenameScope),e.startRename(),[2])}))}))},t.prototype.onKeyEnterInRename=function(e){e.isComposing||(e.preventDefault(),this.acceptRename(this.propertyBeingRenamed))},t.prototype.exitRename=function(){var e=this.propertyBeingRenamed;this.propertyBeingRenamed=null,e.stopRename(),this.app.keymap.popScope(this.propertyRenameScope)},t.prototype.cancelRename=function(){var e=this.propertyBeingRenamed;e&&(e.updateTitle(),this.exitRename())},t.prototype.acceptRename=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return e&&e===this.propertyBeingRenamed?(this.exitRename(),t=e.property.key,n=e.titleEl.getText().trim(),t===n?(e.updateTitle(),[2]):""===n?(e.updateTitle(),e.displayError(Qf.properties.msgEmptyPropertyName()),[2]):(i=this.app.metadataCache.getAllPropertyInfos(),(r=i.hasOwnProperty(n))?[4,new $A(this.app,Qf.dialogue.buttonSave()).setTitle($I.msgMergePropertiesWarning({oldKey:t,newKey:n})).setContent($I.msgMergePropertiesWarningDesc({oldKey:t})).prompt()]:[3,2])):[2];case 1:if(!a.sent())return e.updateTitle(),[2];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.app.fileManager.renameProperty(t,n)];case 3:return a.sent(),o=this.doms[n],this.tree.infinityScroll.scrollIntoView(o,4),r&&Tw(o.selfEl),[3,5];case 4:return a.sent(),e.updateTitle(),[3,5];case 5:return[2]}}))}))},t.prototype.onToggleShowSearch=function(){this.setShowSearch(!this.isShowingSearch),this.isShowingSearch&&this.searchComponent.inputEl.focus()},t.prototype.showSearch=function(){this.setShowSearch(!0),this.searchComponent.inputEl.focus()},t.prototype.setShowSearch=function(e){e!==this.isShowingSearch&&(this.isShowingSearch=e,this.searchComponent.containerEl.toggle(e),this.showSearchButtonEl.toggleClass("is-active",e),e||(this.searchComponent.setValue(""),this.updateSearch()),this.app.workspace.requestSaveLayout())},t.prototype.updateSearch=function(){var e=this.searchComponent.getValue(),t=this.searchQuery;if(!(!t&&!e||t&&t.query===e))try{if(e){var n=new UP(this.app,e,!1);n.matcher?this.searchQuery=n:this.searchQuery=null}else this.searchQuery=null;this.update()}catch(e){console.log(e)}},t.prototype.isItem=function(e){return e instanceof iF},t.prototype.onKeyEnterInFocus=function(e){e.preventDefault(),this.isItem(this.tree.focusedItem)&&this.tree.focusedItem.onSelfClick(e)},t.prototype.getDisplayText=function(){return $I.nameGlobal()},t.prototype.getViewType=function(){return QI},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.sortOrder=this.sortOrder,t.showSearch=this.isShowingSearch,t.searchQuery=this.searchComponent.getValue(),t},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return a.sent(),i=t.searchQuery,r=t.showSearch,o=t.sortOrder,String.isString(o)&&tF.hasOwnProperty(o)&&(this.sortOrder=o),isBoolean(r)&&this.setShowSearch(r),String.isString(i)&&(this.searchComponent.setValue(i),this.updateSearch()),this.update(),[2]}}))}))},t.prototype.setSortOrder=function(e){this.sortOrder=e,this.update()},Object.defineProperty(t.prototype,"root",{get:function(){return this.tree.infinityScroll.rootEl},enumerable:!1,configurable:!0}),t.prototype.onResize=function(){this.tree.infinityScroll.onResize()},t.prototype.update=function(){var e=this.app,t=this.doms,n=e.metadataTypeManager.getAllProperties();if(this.doms={},this.root.vChildren.clear(),this.tree.focusedItem=null,Object.keys(n).length>0){this.emptyStateEl.detach();var i=this.sortOrder,r=null;if("alphabetical"===i)r=function(e,t){return xm(e.property.key,t.property.key)};else if("alphabeticalReverse"===i)r=function(e,t){return-xm(e.property.key,t.property.key)};else{var o="frequencyReverse"===i?-1:1;r=function(e,t){var i,r,a,s,l=e.property.key.toLowerCase(),c=t.property.key.toLowerCase(),u=null!==(r=null===(i=n[l])||void 0===i?void 0:i.count)&&void 0!==r?r:0,h=null!==(s=null===(a=n[c])||void 0===a?void 0:a.count)&&void 0!==s?s:0;return u===h?xm(l,c):o*(h-u)}}for(var a=0,s=Object.entries(n);a<s.length;a++){var l=s[a],c=l[0],u=l[1];if(!this.searchQuery||this.searchQuery.matchContent(c)){var h=t[c]||new iF(this);h.setProperty(u),this.root.vChildren.addChild(h),this.doms[c]=h}}this.root.vChildren.sort(r)}else this.contentEl.appendChild(this.emptyStateEl);this.tree.infinityScroll.queueCompute()},t}(GP),oF=function(e){function t(t,n){var i=e.call(this,t)||this;return i.icon="lucide-info",i.modifyingFile=null,i.rawFrontmatter=null,i.frontmatter={},i.plugin=n,i.scope=new Tk(i.app.scope),i.contentEl.addEventListener("click",(function(e){e.target===i.contentEl&&i.metadataEditor.containerEl.focus()})),i.metadataEditor=new BF(i.app,i),i.contentEl.appendChild(i.metadataEditor.containerEl),i.addChild(i.metadataEditor),i.contentEl.addEventListener("contextmenu",(function(e){e.preventDefault(),e.targetNode===i.contentEl&&i.metadataEditor.showPropertiesMenu(e)})),i.emptyStateEl=i.contentEl.createDiv({cls:"pane-empty"}),i.updateEmptyState(),i}return f(t,e),t.prototype.setEphemeralState=function(t){e.prototype.setEphemeralState.call(this,t),t.focus&&this.metadataEditor.containerEl.focus()},t.prototype.onload=function(){this.registerEvent(this.app.vault.on("modify",this.onFileChange,this)),this.registerEvent(this.app.workspace.on("quick-preview",this.onQuickPreview,this))},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.getFile=function(){return this.file},t.prototype.getHoverSource=function(){return"properties"},t.prototype.shiftFocusAfter=function(){},t.prototype.shiftFocusBefore=function(){},t.prototype.handleCut=function(e){this.metadataEditor.handleCut(e)},t.prototype.handleCopy=function(e){this.metadataEditor.handleCopy(e)},t.prototype.handlePaste=function(e){e.clipboardData.getData("obsidian/properties")&&this.metadataEditor.handlePaste(e)},t.prototype.saveFrontmatter=function(e){var t=this.file,n=this.modifyingFile;t&&"md"===t.extension&&t===n&&this.app.vault.process(t,(function(t){return DL(t,e)}))},t.prototype.isSupportedFile=function(e){return!!e&&"md"===e.extension},t.prototype.readSupportedFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return this.isSupportedFile(e)?[2,this.app.vault.cachedRead(e)]:[2,""]}))}))},t.prototype.onLoadFile=function(t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,this.readSupportedFile(t)];case 1:return n=i.sent(),this.updateFrontmatter(t,n),this.isSupportedFile(t)&&(this.modifyingFile=t),e.prototype.onLoadFile.call(this,t),[2]}}))}))},t.prototype.onUnloadFile=function(t){return g(this,void 0,Promise,(function(){return y(this,(function(n){return this.modifyingFile=null,this.updateFrontmatter(null,""),this.rawFrontmatter=null,this.metadataEditor.clear(),e.prototype.onUnloadFile.call(this,t),[2]}))}))},t.prototype.onQuickPreview=function(e,t){e===this.file&&(this.updateFrontmatter(e,t),this.requestUpdate())},t.prototype.onFileChange=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e!==this.file?[3,2]:[4,this.readSupportedFile(e)];case 1:t=n.sent(),this.updateFrontmatter(e,t),this.requestUpdate(),n.label=2;case 2:return[2]}}))}))},t.prototype.getDisplayText=function(){return!this.file||Zl.isMobile?$I.nameLocal():$I.tabTitle({displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return JI},t.prototype.updateFrontmatter=function(e,t){var n;if(!this.isSupportedFile(e))return this.rawFrontmatter=null,void(this.frontmatter=null);var i=vS(t).frontmatter;if(null===this.rawFrontmatter||this.rawFrontmatter!==i){this.rawFrontmatter=i;try{var r=null!==(n=UD(i))&&void 0!==n?n:{};if("object"!=typeof r||Array.isArray(r))throw new Error("Frontmatter must be a valid object!");this.frontmatter=r}catch(e){this.frontmatter=null}}},t.prototype.updateEmptyState=function(){var e=!this.isSupportedFile(this.file);this.metadataEditor.containerEl.toggle(!e),this.emptyStateEl.toggle(e)},t.prototype.update=function(){this.metadataEditor.synchronize(this.frontmatter),this.updateEmptyState()},t}(ZP);function aF(e){var t=Im.exec(e);return t&&t[0]&&(e=e.slice(t[0].length)),Ew(e)}var sF={auto:Yn.line({attributes:{dir:"auto"}}),rtl:Yn.line({attributes:{dir:"rtl"}}),ltr:Yn.line({attributes:{dir:"ltr"}})};function lF(e){for(var t=e.state.doc,n=JD(t),i=new kt,r="auto",o=0,a=e.viewportLineBlocks;o<a.length;o++){var s=a[o];if(!(s.from<n)){var l=aF(t.sliceString(s.from,s.to));"auto"===l&&(l=r),i.add(s.from,s.from,sF[l]),r=l}}return i.finish()}var cF=Xi.define((function(e){return{deco:lF(e),update:function(e){(e.docChanged||e.viewportChanged||e.heightChanged)&&(this.deco=lF(e.view))}}}),{decorations:function(e){return e.deco}});var uF=function(){function e(e,t,n){var i=this;this.chooser=e,this.containerEl=t,this.values=[],this.suggestions=[],this.selectedItem=0,t.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),t.on("auxclick",".suggestion-item",this.onSuggestionClick.bind(this)),t.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),this.moveUp=this.moveUp.bind(this),this.moveDown=this.moveDown.bind(this),n.register([],"ArrowUp",this.moveUp),n.register([],"ArrowDown",this.moveDown),n.register([],"PageUp",this.pageUp.bind(this)),n.register([],"PageDown",this.pageDown.bind(this)),n.register([],"Home",(function(e){return i.setSelectedItem(0,e),!1})),n.register([],"End",(function(e){return i.setSelectedItem(i.suggestions.length-1,e),!1})),(Zl.isMacOS||Zl.isIosApp)&&(n.register(["Ctrl"],"p",this.moveUp),n.register(["Ctrl"],"n",this.moveDown)),n.register([],"Enter",(function(e){if(!e.isComposing)return i.useSelectedItem(e),!1}))}return e.prototype.moveUp=function(e){if(!e.isComposing)return this.setSelectedItem(this.selectedItem-1,e),!1},e.prototype.moveDown=function(e){if(!e.isComposing)return this.setSelectedItem(this.selectedItem+1,e),!1},Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this.suggestions[this.selectedItem].clientHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numVisibleItems",{get:function(){return Math.floor(this.containerEl.clientHeight/this.rowHeight)},enumerable:!1,configurable:!0}),e.prototype.pageUp=function(e){if(!e.isComposing){var t=this,n=t.containerEl,i=t.numVisibleItems,r=t.rowHeight,o=n.scrollTop-parseFloat(getComputedStyle(n).paddingTop),a=Math.floor(o/r);this.selectedItem<=a&&(a-=i);var s=Math.max(0,a);return this.setSelectedItem(s,e),!1}},e.prototype.pageDown=function(e){if(!e.isComposing){var t=this,n=t.containerEl,i=t.numVisibleItems,r=t.rowHeight,o=n.scrollTop-parseFloat(getComputedStyle(n).paddingTop),a=Math.floor(o/r)+(i-1);this.selectedItem>=a&&(a+=i);var s=Math.min(this.suggestions.length-1,a);return this.setSelectedItem(s,e),!1}},e.prototype.setSuggestions=function(e){var t=this.containerEl;t.empty();var n=[];if(e)for(var i=0,r=e;i<r.length;i++){var o=r[i],a=t.createDiv("suggestion-item");this.chooser.renderSuggestion(o,a),n.push(a)}this.values=e,this.suggestions=n,this.setSelectedItem(0,null)},e.prototype.addSuggestion=function(e){var t=this.values,n=this.suggestions;if(t){var i=this.containerEl.createDiv("suggestion-item");this.chooser.renderSuggestion(e,i),t.push(e),n.push(i)}},e.prototype.addMessage=function(e){return this.containerEl.createDiv({cls:"suggestion-empty",text:e})},e.prototype.setSelectedItem=function(e,t){var n=this.suggestions;0!==n.length&&(e<0?e=n.length-1:e>=n.length&&(e=0),this.forceSetSelectedItem(e,t))},e.prototype.forceSetSelectedItem=function(e,t){var n,i,r=this.suggestions,o=r[this.selectedItem];o&&o.removeClass("is-selected"),this.selectedItem=e;var a=r[this.selectedItem];a&&(a.addClass("is-selected"),t&&!t.instanceOf(KeyboardEvent)||a.scrollIntoView({block:"nearest"})),null===(i=(n=this.chooser).onSelectedChange)||void 0===i||i.call(n,this.values[e],t)},e.prototype.onSuggestionClick=function(e,t){e.preventDefault();var n=this.suggestions.indexOf(t);this.setSelectedItem(n,e),this.useSelectedItem(e)},e.prototype.onSuggestionMouseover=function(e,t){var n=this.suggestions.indexOf(t);this.setSelectedItem(n,e)},e.prototype.useSelectedItem=function(e){if(!this.values)return!1;var t=this.values[this.selectedItem];return void 0!==t&&(this.chooser.selectSuggestion(t,e),!0)},e}(),hF=function(){function e(e,t){var n=this;this.isOpen=!1,this.app=e,this.scope=new Tk(t||e.scope),this.suggestEl=createDiv("suggestion-container");var i=this.suggestEl.createDiv("suggestion");this.suggestions=new uF(this,i,this.scope),this.scope.register([],"Escape",(function(){return n.close(),!1}))}return e.prototype.open=function(){var e=this.app,t=this.suggestEl;this.isOpen||(this.isOpen=!0,e.keymap.pushScope(this.scope),activeDocument.body.appendChild(t),wl(t,new ml({fn:"var(--anim-motion-swing)",duration:80}).addProp("opacity","0","1","")),EA(this))},e.prototype.close=function(){var e=this.app,t=this.suggestEl;this.autoDestroy&&(this.autoDestroy(),this.autoDestroy=null),e.keymap.popScope(this.scope),this.isOpen&&(this.isOpen=!1,this.suggestions.setSuggestions([]),t.detach(),SA(this))},e.prototype.reposition=function(e,t){void 0===t&&(t="auto");var n=this.suggestEl;Lw(e,n,{gap:5,preventOverlap:!0,horizontalAlignment:{rtl:"right",ltr:"left",auto:"rtl"===getComputedStyle(n).direction?"right":"left"}[t]})},e.prototype.setAutoDestroy=function(e){var t=this;this.autoDestroy&&this.autoDestroy(),e&&(this.autoDestroy=Pw(e,500,(function(){t.close()})))},e}();function dF(e,t){e.empty();for(var n=function(t){e.createDiv("prompt-instruction",(function(e){e.createSpan({cls:"prompt-instruction-command",text:t.command}),e.createSpan({text:t.purpose})}))},i=0,r=t;i<r.length;i++){n(r[i])}return e}var pF=function(e){function t(t){var n=e.call(this,t)||this;return n.instructionsEl=createDiv("prompt-instructions"),n.context=null,n.limit=100,n.suggestEl.addEventListener("mousedown",(function(e){return e.preventDefault()})),n}return f(t,e),t.prototype.setInstructions=function(e){e.length>0?(dF(this.instructionsEl,e),this.suggestEl.appendChild(this.instructionsEl)):this.instructionsEl.detach()},t.prototype.trigger=function(e,t,n){var i=this,r=e.getCursor("from"),o=e.getCursor("to");if(r.line!==o.line||r.ch!==o.ch)return this.context=null,!1;var a=this.onTrigger(r,e,t);if(a){var s=this.context={editor:e,file:t,start:a.start,end:a.end,query:a.query};if(n||this.isOpen){var l=this.getSuggestions(s);if(Array.isArray(l))this.showSuggestions(l);else{if(!l)return;g(i,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,l];case 1:return t=n.sent(),e.hasFocus()?(t&&this.showSuggestions(t),[2]):(this.close(),[2])}}))}))}}return!0}return this.context=null,!1},t.prototype.showSuggestions=function(e){if(0!==e.length){var t=this.limit;t>0&&e.length>t&&(e=e.slice(0,t)),this.suggestions.setSuggestions(e),this.updatePosition(!0)}else this.close()},t.prototype.updatePosition=function(e){var t=this.context;if(t){var n=t.editor,i=n.coordsAtPos(t.start),r=n.coordsAtPos(t.end);if(i&&r){var o=sk({top:i.top,left:Math.min(i.left,r.left),right:Math.max(i.right,r.right),bottom:r.bottom},n.containerEl.win).rect;this.open(),this.reposition(o,aF(n.getLine(t.start.line)))}}},t.prototype.close=function(){this.context=null,e.prototype.close.call(this)},t}(hF);function fF(e){var t,n="",i="";return"block"===e.type&&(n=e.file.path,i="#^"+e.node.id),"heading"===e.type&&(n=e.file.path,i="#"+QS(e.heading)),"file"!==e.type&&"alias"!==e.type||(n=e.file.path,i=""),"linktext"===e.type&&(n=(t=WS(e.path)).path,i=t.subpath),{path:n,subpath:i}}var mF=function(e,t){return t.score-e.score},vF={type:"none",matches:null,score:0};function gF(e){return e?-(e.length+(e.length>0?e[0][0]/10:0)):0}function yF(e,t,n,i,r){return g(this,void 0,Promise,(function(){var o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C;return y(this,(function(y){switch(y.label){case 0:if(!n||0===n.length)return[2,[]];o=r.split("#").filter((function(e){return!!e})),r.endsWith("#")&&o.push(""),(a="#"+o.slice(0,o.length-1).join("#")).endsWith("#")||(a+="#"),s=0,l=0,c=[],y.label=1;case 1:y.trys.push([1,6,7,12]),u=!0,h=M(mL(fL(n),{maxDelay:0})),y.label=2;case 2:return[4,h.next()];case 3:if(d=y.sent(),b=d.done)return[3,5];if(C=d.value,u=!1,p=C,e.isCancelled())return[3,5];if(p.level<=l||s>=o.length)return[3,5];f=p.heading.toLowerCase(),s===o.length-1?""===(m=o[s])?c.push({type:"heading",file:t,path:i,subpath:a+QS(p.heading),level:p.level,heading:p.heading,score:0,matches:null}):(v=VL(BL(m),p.heading))&&c.push({type:"heading",file:t,path:i,subpath:a+QS(p.heading),level:p.level,heading:p.heading,score:v.score,matches:v.matches}):f===o[s].toLowerCase()&&(s++,l=p.level),y.label=4;case 4:return u=!0,[3,2];case 5:return[3,12];case 6:return g=y.sent(),w={error:g},[3,12];case 7:return y.trys.push([7,,10,11]),u||b||!(k=h.return)?[3,9]:[4,k.call(h)];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(w)throw w.error;return[7];case 11:return[7];case 12:return[2,c]}}))}))}function bF(e,t,n,i,r){return g(this,void 0,void 0,(function(){var o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k;return y(this,(function(y){switch(y.label){case 0:if(!i)return[2,[]];o=i.content,a=r.toLowerCase().split(" "),s=[],y.label=1;case 1:y.trys.push([1,6,7,12]),l=!0,c=M(mL(fL(i.blocks),{maxDelay:0})),y.label=2;case 2:return[4,c.next()];case 3:if(u=y.sent(),g=u.done)return[3,5];if(k=u.value,l=!1,h=k,e.isCancelled())return[3,5];d=UL(a,h.display.toLowerCase()),p=gF(d),f=null,(m=h.node.id)&&String.isString(m)&&(f=UL(a,m.toLowerCase()))&&(p=0),(d||f)&&s.push({type:"block",file:t,path:n,content:o,display:h.display,node:h.node,score:p,matches:d,idMatch:f}),y.label=4;case 4:return l=!0,[3,2];case 5:return[3,12];case 6:return v=y.sent(),b={error:v},[3,12];case 7:return y.trys.push([7,,10,11]),l||g||!(w=c.return)?[3,9]:[4,w.call(c)];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(b)throw b.error;return[7];case 11:return[7];case 12:return[2,s]}}))}))}function wF(e,t,n){void 0===n&&(n=!1),t.addClass("mod-complex");var i=t.createDiv("suggestion-content"),r=t.createDiv("suggestion-aux"),o=i.createDiv("suggestion-title"),a=i.createDiv("suggestion-note"),s=e.matches;if(!n||"heading"!==e.type&&"block"!==e.type||a.setText(ru(e.file.path)),e.downranked&&t.addClass("mod-downranked"),"none"===e.type)o.setText(Qf.editor.linkSuggestion.labelNoMatchFound());else if("file"===e.type){var l=e.path,c=Kc(l),u=l.substr(0,l.length-c.length);jL(a,u,s),jL(o,c,s,-u.length)}else if("alias"===e.type){var h="lucide-forward";a.setText(e.path),UT.contains(Qc(e.path))&&aS(e.alias)?(h="lucide-scaling",o.setText(Qf.editor.linkSuggestion.labelImageSize({size:e.alias}))):e.alias?jL(o,e.alias,s):o.createSpan({cls:"suggestion-empty-suggestion",text:Qf.editor.linkSuggestion.labelNoAlias()}),r.createSpan({cls:"suggestion-flair"},(function(e){mx(e,h),Rx(e,Qf.interface.tooltip.alias())}))}else if("linktext"===e.type)jL(o,e.path,s);else if("heading"===e.type)e.heading?jL(o,e.heading,s):o.createSpan({cls:"suggestion-empty-suggestion",text:Qf.editor.linkSuggestion.labelNoHeading()}),e.level>0&&r.createSpan({cls:"suggestion-flair",text:"H"+e.level});else if("block"===e.type){jL(o,e.display,s);var d=e.node.id;d&&String.isString(d)&&(a.getText().trim()&&a.appendText(" > "),jL(a,d,e.idMatch))}}function kF(e,t,n,i,r,o,a,s,l){var c=null,u="",h="",d=o,p=o,f="markdown"===l&&e.vault.getConfig("useMarkdownLinks"),m=!f,v="",g="",y=function(t,n){return null!==n?m||!n||"md"!==t.extension||n.endsWith(".md")?n:n+".md":t.path===a?"":e.metadataCache.fileToLinktext(t,a,m)};if("none"===t.type)"Enter"!==s&&"Tab"!==s||(v=n);else if("file"===t.type)u=t.file.basename,v=e.metadataCache.fileToLinktext(t.file,a,m);else if("alias"===t.type){h=u=t.alias;var b=WS(t.path),w=b.path,k=b.subpath;t.file&&(w=e.metadataCache.fileToLinktext(t.file,a,m)),v=w+k}else if("linktext"===t.type)u=t.path,v=t.path;else if("heading"===t.type){w=y(t.file,t.path);u=t.heading,v=w+t.subpath}else if("block"===t.type){u="";w=y(t.file,t.path);var C=t.node;v=C.id?w+"#^"+C.id:w+"#^"+(c=oc(6))}var M=i.match(/^(\s*)(\|)?(.*?)(]])/);if(M&&!M[0].contains("[[")&&(M[2]&&!h&&(h=M[3],u||(u=h)),o+=M[0].length),!h&&"file"===t.type){var E=t.file.extension;("canvas"===E||!UT.contains(E)&&v.contains("/"))&&(h=u)}if(f&&"#"!==s&&"^"!==s)g="[".concat(u,"](").concat(Jk(v),")"),d=p=u?r+g.length:r+1;else{"#"===s?(v+="#","file"===t.type&&jT.contains(t.file.extension)&&(v+="page=")):"^"===s&&(v+="^"),h&&(v+="|"+h);var S=v.endsWith("]]")?"":"]]",x=r+(g="[["+v+S).length-2;"Tab"===s?h?(d=x-h.length,p=x):d=p=x:d=p="#"===s||"^"===s||"|"===s?h?x-h.length-1:x:r+g.length}return{replacement:g,start:r,end:o,selectionStart:d,selectionEnd:p,blockId:c}}var CF=function(){function e(e,t){this.runnable=null,this.mode="file",this.global=!1,this.fileSuggestions=null,this.app=e,this.getSourcePath=t}return e.prototype.getInstructions=function(){return"file"===this.mode?[{command:Qf.editor.linkSuggestion.labelTypeHash(),purpose:Qf.editor.linkSuggestion.labelLinkHeading()},{command:Qf.editor.linkSuggestion.labelTypeBlock(),purpose:Qf.editor.linkSuggestion.labelLinkBlock()},{command:Qf.editor.linkSuggestion.labelTypePipe(),purpose:Qf.editor.linkSuggestion.labelChangeDisplayText()}]:[{command:"â†µ",purpose:Qf.editor.linkSuggestion.labelAccept()}]},e.prototype.getSuggestionsAsync=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c;return y(this,(function(u){if(n=t.indexOf("|"),i=null,-1!==n&&(i=t.substr(n+1),t=t.substr(0,n)),null===i){if(t.startsWith("##"))return t=t.substr(2),this.mode="heading",this.global=!0,[2,this.getGlobalHeadingSuggestions(e,t)];if(t.startsWith("^^"))return t=t.substr(2),this.mode="block",this.global=!0,[2,this.getGlobalBlockSuggestions(e,t)]}return this.global=!1,r=WS(t),o=r.path,a=r.subpath,null!==i?(this.mode="display",[2,this.getDisplaySuggestions(e,o,a,i)]):a?a.startsWith("#^")?(s=a.substr(2),this.mode="block",[2,this.getBlockSuggestions(e,o,s)]):(this.mode="heading",[2,this.getHeadingSuggestions(e,o,a)]):-1!==(l=o.lastIndexOf("^"))?(c=o.substr(l+1),o=o.substr(0,l),this.mode="block",[2,this.getBlockSuggestions(e,o,c)]):(this.mode="file",[2,this.getFileSuggestions(e,o)])}))}))},e.prototype.getDisplaySuggestions=function(e,t,n,i){var r=this.app.metadataCache,o=this.getSourcePath(),a=r.getFirstLinkpathDest(t,o),s=[];if(a){var l=r.getFileCache(a),c=MS(null==l?void 0:l.frontmatter);if(c&&c.length>0)for(var u=BL(i),h=0,d=c;h<d.length;h++){var p=d[h],f=VL(u,p);f&&s.push({type:"alias",alias:p,file:a,path:t+n,score:f.score,matches:f.matches})}}return s.length>0?s:[{type:"alias",file:null,path:t+n,alias:i,score:0,matches:[[0,i.length]]}]},e.prototype.getHeadingSuggestions=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return i=this.app.metadataCache,r=this.getSourcePath(),(o=i.getFirstLinkpathDest(t,r))&&"md"===o.extension?(a=i.getFileCache(o),[4,yF(e,o,null==a?void 0:a.headings,t,n)]):[2,[]];case 1:return(s=l.sent()).length>0?[2,s]:[2,[{type:"heading",file:null,path:t,subpath:n,score:0,heading:n.slice(1),level:0,matches:[[0,n.length]]}]]}}))}))},e.prototype.getGlobalHeadingSuggestions=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k;return y(this,(function(y){switch(y.label){case 0:n=this.app.metadataCache,i=[],r=BL(t),o=0,a=n.getCachedFiles(),y.label=1;case 1:if(!(o<a.length))return[3,14];if(s=a[o],e.isCancelled())return[3,14];if(n.isUserIgnored(s))return[3,13];if(!((l=this.app.vault.getAbstractFileByPath(s))instanceof ww)||"md"!==l.extension)return[3,13];if(!(c=n.getCache(s))||!c.headings||0===c.headings.length)return[3,13];y.label=2;case 2:y.trys.push([2,7,8,13]),u=!0,b=void 0,h=M(mL(fL(c.headings),{maxDelay:0})),y.label=3;case 3:return[4,h.next()];case 4:if(d=y.sent(),g=d.done)return[3,6];if(k=d.value,u=!1,p=k,e.isCancelled())return[3,6];(f=VL(r,p.heading))&&(m="#"+QS(p.heading),i.push({type:"heading",file:l,path:null,subpath:m,level:p.level,heading:p.heading,score:f.score,matches:f.matches})),y.label=5;case 5:return u=!0,[3,3];case 6:return[3,13];case 7:return v=y.sent(),b={error:v},[3,13];case 8:return y.trys.push([8,,11,12]),u||g||!(w=h.return)?[3,10]:[4,w.call(h)];case 9:y.sent(),y.label=10;case 10:return[3,12];case 11:if(b)throw b.error;return[7];case 12:return[7];case 13:return o++,[3,1];case 14:return[2,i]}}))}))},e.prototype.getBlockSuggestions=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return i=this.app.metadataCache,r=this.getSourcePath(),(o=i.getFirstLinkpathDest(t,r))&&"md"===o.extension?[4,i.blockCache.getForFile(e,o)]:[2,[]];case 1:return a=s.sent(),[2,bF(e,o,t,a,n)]}}))}))},e.prototype.getGlobalBlockSuggestions=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C;return y(this,(function(y){switch(y.label){case 0:n=this.app.metadataCache,i=this.getSourcePath(),r=this.app.vault.getAbstractFileByPath(i),o=t.toLowerCase().split(" "),a=[],y.label=1;case 1:y.trys.push([1,6,7,12]),s=!0,l=M(mL(n.blockCache.getAll(e),{batchSize:1,maxDelay:0})),y.label=2;case 2:return[4,l.next()];case 3:if(c=y.sent(),b=c.done)return[3,5];if(C=c.value,s=!1,u=C,e.isCancelled())return[3,5];if(h=u.file,d=u.content,"md"!==h.extension)return[3,4];for(p=0,f=u.blocks;p<f.length;p++)m=f[p],(v=this.matchBlock(r,h,m,null,d,o))&&a.push(v);y.label=4;case 4:return s=!0,[3,2];case 5:return[3,12];case 6:return g=y.sent(),w={error:g},[3,12];case 7:return y.trys.push([7,,10,11]),s||b||!(k=l.return)?[3,9]:[4,k.call(l)];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(w)throw w.error;return[7];case 11:return[7];case 12:return[2,a]}}))}))},e.prototype.matchBlock=function(e,t,n,i,r,o){if(this.sourcePosition&&t===e&&n.node.position.start.line-1<=this.sourcePosition.line&&n.node.position.end.line-1>=this.sourcePosition.line)return null;var a=UL(o,n.display.toLowerCase()),s=gF(a),l=null,c=n.node.id;return c&&String.isString(c)&&(l=UL(o,c.toLowerCase()))&&(s=0),a||l?{type:"block",file:t,path:i,content:r,display:n.display,node:n.node,score:s,matches:a,idMatch:l}:null},e.prototype.getFileSuggestions=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k;return y(this,(function(y){switch(y.label){case 0:if(n=this.app.metadataCache,(i=this.fileSuggestions)||(i=this.fileSuggestions=n.getLinkSuggestions()),r=[],""===t){for(o=0,a=i;o<a.length;o++)if(h=a[o],d=h.file){if(n.isUserIgnored(d.path))continue;(f=h.alias)?r.push({type:"alias",alias:f,file:d,path:h.path,score:d.stat.mtime,matches:null}):r.push({type:"file",file:d,path:h.path,score:d.stat.mtime,matches:null})}else r.push({type:"linktext",path:h.path,score:0,matches:null});return[2,r.sort(mF)]}s=i.length<1e4?NL(t):_L(t),y.label=1;case 1:y.trys.push([1,6,7,12]),l=!0,c=M(mL(fL(i),{maxDelay:0})),y.label=2;case 2:return[4,c.next()];case 3:if(u=y.sent(),g=u.done)return[3,5];if(k=u.value,l=!1,h=k,e.isCancelled())return[3,5];(d=h.file)?(p=n.isUserIgnored(d.path),(f=h.alias)?(m=s(f))&&r.push({type:"alias",alias:f,file:h.file,path:h.path,score:m.score+(p?-10:0),matches:m.matches,downranked:p}):(m=EF(s,h.path))&&r.push({type:"file",file:h.file,path:h.path,score:m.score+(p?-10:0),matches:m.matches,downranked:p})):(m=s(h.path))&&r.push({type:"linktext",path:h.path,score:m.score,matches:m.matches}),y.label=4;case 4:return l=!0,[3,2];case 5:return[3,12];case 6:return v=y.sent(),b={error:v},[3,12];case 7:return y.trys.push([7,,10,11]),l||g||!(w=c.return)?[3,9]:[4,w.call(c)];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(b)throw b.error;return[7];case 11:return[7];case 12:return[2,r]}}))}))},e}(),MF=function(e){function t(t){var n=e.call(this,t)||this;return n.suggestManager=new CF(n.app,(function(){var e,t;return null!==(t=null===(e=n.context.file)||void 0===e?void 0:e.path)&&void 0!==t?t:""})),n.setInstructions(n.suggestManager.getInstructions()),n.scope.register(["Shift"],"Enter",(function(e){if(!e.isComposing)return n.selectSuggestion({type:"none",matches:[],score:0},e),!1})),n.scope.register([],"Tab",(function(e){if(!e.isComposing&&n.suggestions.useSelectedItem(e))return!1})),n.scope.register(null,"#",(function(e){if(("file"===n.suggestManager.mode||"heading"===n.suggestManager.mode)&&n.suggestions.useSelectedItem(e))return!1})),n.scope.register(null,"^",(function(e){if("file"===n.suggestManager.mode&&n.suggestions.useSelectedItem(e))return!1})),n}return f(t,e),t.prototype.onTrigger=function(e,t,n){var i=e.line,r=t.getLine(i).substr(0,e.ch),o=r.lastIndexOf("[["),a=r.lastIndexOf("]");return-1!==o&&a<o?{start:{line:i,ch:o+2},end:{line:i,ch:e.ch},query:r.substr(o+2)}:null},t.prototype.getSuggestions=function(e){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return(t=this.suggestManager.runnable)&&t.cancel(),t=this.suggestManager.runnable=new dL,n=(n=e.query).trim(),[4,this.suggestManager.getSuggestionsAsync(t,n)];case 1:return!(i=r.sent())||t.isCancelled()?[2,null]:(0===i.length&&(i=[vF]),i.sort(mF),this.setInstructions(this.suggestManager.getInstructions()),[2,i])}}))}))},t.prototype.showSuggestions=function(t){if(e.prototype.showSuggestions.call(this,t),this.context){var n=this.context.query;n&&"^"!==n&&"#"!==n||this.suggestions.forceSetSelectedItem(-1,null)}},t.prototype.renderSuggestion=function(e,t){wF(e,t,this.suggestManager.global)},t.prototype.selectSuggestion=function(e,t){var n=this.context;if(this.close(),n){var i=n.editor,r=n.start,o=n.end,a=n.file,s=n.query;r=Lm(r,-2);var l=kF(this.app,e,s,i.getLine(o.line).substr(o.ch),r.ch,o.ch,(null==a?void 0:a.path)||"",t.instanceOf(KeyboardEvent)?Ek(t):"","markdown"),c={line:r.line,ch:0},u=[{from:Lm(c,l.start),to:Lm(c,l.end),text:l.replacement}],h={from:Lm(c,l.selectionStart),to:Lm(c,l.selectionEnd)};if("block"===e.type&&l.blockId){var d=GD(e,l.blockId),p=d.blockStart,f=d.blockEnd,m=d.addition,v=d.newlines,g=e.content,y=e.file;if(a!==y)g=g.slice(0,f)+m+g.slice(f),this.app.vault.modify(y,g);else{var b=g.substring(p,f);if(""===b)return void this.close();for(var w=i.getValue(),k=0,C=-99999;;){var M=w.indexOf(b,k);if(-1===M)break;Math.abs(p-M)<Math.abs(p-C)&&(C=M),k=M+b.length}if(C>=0){var E=Nm(w,[C+b.length])[0];u.push({from:E,text:m}),h.from.line+=v,h.to.line+=v}}}i.transaction({changes:u,selection:h},"input.autocomplete"),setTimeout((function(){return i.focus()}))}},t.prototype.close=function(){e.prototype.close.call(this),this.suggestManager.fileSuggestions=null,this.suggestManager.runnable&&(this.suggestManager.runnable.cancel(),this.suggestManager.runnable=null)},t}(pF);function EF(e,t){var n=Kc(t),i=e(n);return i?(qL(i.matches,t.length-n.length),i):((i=e(t))&&(i.score-=1),i)}var SF=/(^|\s)#[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]*$/g,xF=function(e){function t(t){var n=e.call(this,t)||this;return n.scope.register([],"Tab",(function(e){if(!e.isComposing){var t=n.suggestions,i=t.values[t.selectedItem];if(i){var r=n.context,o=r.editor,a=r.start,s=r.end,l="#"+KL(i.tag,i.matches);return o.transaction({changes:[{from:a,to:s,text:l}]}),!1}}})),n}return f(t,e),t.prototype.onTrigger=function(e,t,n){var i=e.line,r=t.getLine(i),o=r.substr(0,e.ch);if(o.match(SF)&&"#"!==r.substr(e.ch,1)){var a=o.lastIndexOf("#"),s=o.substr(a+1);return{start:{line:i,ch:a},end:{line:i,ch:e.ch},query:s}}return null},t.prototype.renderSuggestion=function(e,t){WL(t,e.tag,e)},t.prototype.selectSuggestion=function(e){var t=this.context;if(this.close(),t){var n=t.editor,i=t.start,r=t.end;n.transaction({changes:[{from:i,to:r,text:"#"+e.tag+" "}]}),setTimeout((function(){return n.focus()}))}},t.prototype.getSuggestions=function(e){return TF(this.app.metadataCache,e.query)},t}(pF);function TF(e,t,n){void 0===n&&(n=!1),t=t.toLowerCase();var i=Object.keys(e.getTags());n||(i=i.map((function(e){return e.slice(1)})));var r=[],o=BL(t);i.sort(xm);for(var a=0,s=i;a<s.length;a++){var l=s[a];if(""===t||"#"===t&&n)r.push({tag:l,score:0,matches:null});else{var c=VL(o,l.toLowerCase());c&&r.push({tag:l,score:c.score,matches:c.matches})}}return r.sort((function(e,t){return t.score-e.score})),r}var DF=function(){function e(e){var t=this,n=this.rootEl=e.createDiv({cls:"multi-select-container"}),i=function(e){t.addElement(e)&&(t.inputEl.innerText="",t.inputEl.trigger("input"))},r=this.inputEl=this._createInputEl();r.addEventListener("blur",(function(e){r.getText()&&i(r.getText())})),r.addEventListener("keydown",(function(e){if(!e.isComposing)if("Enter"===e.key&&r.getText().length>0)e.preventDefault(),i(r.getText());else if("Backspace"===e.key&&0===t.inputText.length&&t.elements.length>0){e.preventDefault();var n=t.elements[t.elements.length-1];n&&n.focus()}else if("ArrowLeft"===e.key){var o=r.win.getSelection();if(0===r.getText().length&&o.rangeCount>0)0===o.getRangeAt(0).startOffset&&(e.preventDefault(),t.focusElement(t.elements.length-1))}})),r.addEventListener("blur",(function(e){i(r.getText())})),n.addEventListener("click",(function(e){e.targetNode===n&&r.focus()})),this.elements=[],this.values=[]}return Object.defineProperty(e.prototype,"inputText",{get:function(){return this.inputEl.getText()},enumerable:!1,configurable:!0}),e.prototype.setInputText=function(e){this.inputEl.innerText=e,this.inputEl.trigger("input")},e.prototype._createInputEl=function(){var e=createDiv({cls:"multi-select-input",attr:{contentEditable:!0,tabIndex:0}});return e.addEventListener("input",(function(t){return uk(e,!1)})),e.addEventListener("paste",(function(t){return hk(e,t)})),e},e.prototype.setValues=function(e){return Array.isArray(e)?this.values=e:this.values=[],this.renderValues(),this.triggerChange(),this},e.prototype.onChange=function(e){return this.changeCallback=e,this},e.prototype.setOptionContextmenuHandler=function(e){return this.onOptionContextmenu=e,this},e.prototype.setOptionRenderer=function(e){return this.optionRenderer=e,this.values.length>0&&this.renderValues(),this},e.prototype.allowCreatingOptions=function(e){return this.createOption=e,this},e.prototype.preventDuplicates=function(e){return this.findDuplicate=e,this},e.prototype.setupInputEl=function(e){return this.setupInput=e,this},e.prototype._createElement=function(e){var t,n=null===(t=this.createOption)||void 0===t?void 0:t.call(this,e);return n||null},e.prototype.addElement=function(e){var t,n=this._createElement(e);if(n){var i=null===(t=this.findDuplicate)||void 0===t?void 0:t.call(this,n,this.values);if(void 0!==i&&i>=0&&i<this.elements.length){var r=this.elements[i];return r.hasClass("multi-select-duplicate")||(r.addClass("multi-select-duplicate"),r.win.setTimeout((function(){return r.removeClass("multi-select-duplicate")}),2e3)),!1}this.values.push(n),this.renderValues(),this.triggerChange()}return!!n},e.prototype.editElement=function(e){var t,n=this;if(!(e<0||e>=this.values.length)){var i=this.elements[e],r=this._createInputEl(),o=!1,a=function(t,i){var r;void 0===i&&(i=!1);var a=n._createElement(t);if(a){var s=null===(r=n.findDuplicate)||void 0===r?void 0:r.call(n,a,n.values);if(void 0!==s&&s>=0&&s<n.elements.length&&s!==e){var l=n.elements[s];return l.hasClass("multi-select-duplicate")||(l.addClass("multi-select-duplicate"),l.win.setTimeout((function(){return l.removeClass("multi-select-duplicate")}),2e3)),!1}return o=!1,n.values[e]=a,n.renderValues(),i&&n.focusElement(e),n.triggerChange(),!0}return!1};null===(t=this.setupInput)||void 0===t||t.call(this,r,a),r.addEventListener("focus",(function(e){o=!0})),r.addEventListener("blur",(function(e){if(o){o=!1;var t=r.getText();t?a(t):(n.rootEl.insertBefore(i,r),r.detach())}})),r.addEventListener("keydown",(function(e){e.isComposing||("Enter"===e.key&&r.getText().length>0?(e.preventDefault(),a(r.getText(),!0)):"Escape"===e.key&&(e.preventDefault(),o=!1,n.rootEl.insertBefore(i,r),r.detach(),i.focus()))})),r.innerText=String(this.values[e]),this.rootEl.insertBefore(r,i),i.detach(),Sw(r)}},e.prototype.removeElement=function(e,t){void 0===t&&(t=!1),e<0||e>=this.values.length||(this.values=this.values.filter((function(t,n){return n!==e})),this.renderValues(),t&&this.focusElement(e-1),this.triggerChange())},e.prototype.focusElement=function(e){var t=Math.max(0,e),n=this.elements[t];n?n.focus():this.inputEl.focus()},e.prototype.renderValues=function(){var e=this;this.elements=[];for(var t=function(t){var i=n.values[t],r=t,o=n.rootEl.createDiv({cls:"multi-select-pill",attr:{tabIndex:0}}),a=o.createDiv({cls:"multi-select-pill-content"}),s=o.createDiv({cls:"multi-select-pill-remove-button"});mx(s,"lucide-x"),o.addEventListener("copy",(function(e){return yc(String(i))})),o.addEventListener("contextmenu",(function(t){var n,s=PA.forEvent(t);s.addSections(["clipboard","selection","","danger"]),s.addItem((function(t){return t.setSection("selection").setTitle(Qf.interface.menu.edit()).setIcon("lucide-edit-3").onClick((function(){return e.editElement(r)}))})).addItem((function(e){return e.setSection("clipboard").setTitle(Qf.interface.menu.copy()).setIcon("lucide-copy").onClick((function(){return navigator.clipboard.writeText(String(i))}))})).addItem((function(t){return t.setWarning(!0).setSection("danger").setIcon("lucide-trash-2").setTitle(Qf.interface.menu.remove()).onClick((function(){return e.removeElement(r)}))})),null===(n=e.onOptionContextmenu)||void 0===n||n.call(e,s,i,{el:a,pillEl:o})})),o.addEventListener("dblclick",(function(t){t.preventDefault(),e.editElement(r)})),o.addEventListener("keydown",(function(t){"Enter"===t.key?(t.preventDefault(),e.editElement(r)):"Backspace"===t.key?(t.preventDefault(),e.removeElement(r,!0)):"ArrowUp"===t.key?(t.preventDefault(),e.focusElement(0)):"ArrowDown"===t.key?(t.preventDefault(),e.inputEl.focus()):"ArrowLeft"===t.key?(t.preventDefault(),e.focusElement(r-1)):"ArrowRight"===t.key&&(t.preventDefault(),e.focusElement(r+1))})),n.optionRenderer?n.optionRenderer(i,{el:a,pillEl:o}):a.createSpan({text:String(i)}),n.elements.push(o),s.addEventListener("mousedown",(function(e){return e.preventDefault()})),s.addEventListener("click",(function(t){e.removeElement(r),e.inputEl.trigger("input")}))},n=this,i=0;i<this.values.length;i++)t(i);this.rootEl.setChildrenInPlace(this.elements.concat([this.inputEl])),this.inputEl.setAttr("placeholder",this.elements.length>0?"":Qf.properties.labelNoValue())},e.prototype.triggerChange=function(){this.changeCallback&&this.changeCallback(this.values)},e}(),AF=function(e){function t(t,n){var i=e.call(this,t)||this;return i.limit=100,i.textInputEl=n,i.autoReposition=i.autoReposition.bind(i),n.addEventListener("input",i.onInputChange.bind(i)),n.addEventListener("focus",i.onInputChange.bind(i)),n.addEventListener("blur",i.close.bind(i)),i.suggestEl.on("mousedown",".suggestion-item",(function(e){e.preventDefault()})),i}return f(t,e),t.prototype.showSuggestions=function(e){var t=this.textInputEl;if(0!==e.length){if(t.isShown()){var n=this.limit;n>0&&e.length>n&&(e=e.slice(0,n)),this.suggestions.setSuggestions(e),this.open(),this.setAutoDestroy(t)}}else this.close()},t.prototype.setValue=function(e){this.textInputEl.instanceOf(HTMLInputElement)?this.textInputEl.value=e:this.textInputEl.innerText=e},t.prototype.getValue=function(){return this.textInputEl.instanceOf(HTMLInputElement)?this.textInputEl.value:this.textInputEl.innerText},t.prototype.onInputChange=function(){var e=this;if(this.textInputEl.isActiveElement()){var t=this.getValue(),n=this.getSuggestions(t);if(Array.isArray(n))this.showSuggestions(n);else{if(!n)return;g(e,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this.showSuggestions,[4,n];case 1:return e.apply(this,[t.sent()]),[2]}}))}))}}},t.prototype.selectSuggestion=function(e,t){var n;null===(n=this.selectCb)||void 0===n||n.call(this,e,t)},t.prototype.onSelect=function(e){return this.selectCb=e,this},t.prototype.close=function(){e.prototype.close.call(this),this.textInputEl.doc.removeEventListener("scroll",this.autoReposition)},t.prototype.reposition=function(t){e.prototype.reposition.call(this,t),this.lastRect=t},t.prototype.open=function(){e.prototype.open.call(this);var t=this.textInputEl;this.reposition(Bw(t)),t.doc.addEventListener("scroll",this.autoReposition,{capture:!0,passive:!0})},t.prototype.autoReposition=function(){var e=this.lastRect,t=Bw(this.textInputEl);t.bottom===e.bottom&&t.top===e.top&&t.left===e.left&&t.right===e.right||this.reposition(t)},t}(hF),LF=["YYYY-MM-DD"],PF=["YYYY-MM-DD[T]HH:mm:ss","YYYY-MM-DD[T]HH:mm","YYYY-MM-DD HH:mm:ss","YYYY-MM-DD HH:mm"];function IF(e){if(null===e)return null;if(Array.isArray(e)){var t=e.filter((function(e){return null!=e})).map((function(e){return String(e)}));return t.length>0?t:null}return String.isString(e)?[e]:[String(e)]}function FF(e){var t,n=e.activeEditor;if(n&&n instanceof LY&&n.canShowProperties())return n.metadataEditor;var i=null===(t=e.activeLeaf)||void 0===t?void 0:t.view;return i instanceof oF||i instanceof LY&&i.canShowProperties()?i.metadataEditor:null}function OF(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return(t=FF(e.workspace))?[2,t]:(n=e.workspace.getActiveFile())&&"md"===n.extension&&(i=e.internalPlugins.getEnabledPluginById("properties"))?[4,i.ensurePropertiesView(n)]:[3,2];case 1:if(r=o.sent())return[2,r.metadataEditor];o.label=2;case 2:return[2,null]}}))}))}var BF=function(e){function t(t,n){var i=e.call(this)||this;i.hoverPopover=null,i.properties=[],i.selectedLines=new Set,i.collapsed=!1,i.app=t,i.owner=n,i.rendered=[],i.containerEl=createDiv({cls:"metadata-container",attr:{tabIndex:-1}}),i.errorEl=i.containerEl.createDiv("metadata-error-container"),i.containerEl.setAttr("data-property-count",0),i.containerEl.addEventListener("keydown",(function(e){e.isComposing||e.target===i.containerEl&&i.handleKeypress(e)})),i.containerEl.addEventListener("focusin",(function(e){for(var t=0,n=i.rendered;t<n.length;t++){if(n[t].containerEl===e.targetNode)return}i.clearSelection()})),i.headingEl=i.containerEl.createDiv({cls:"metadata-properties-heading",attr:{tabIndex:0}},(function(e){mx(i.foldEl=e.createDiv({cls:"collapse-indicator collapse-icon"}),"right-triangle"),e.createDiv({cls:"metadata-properties-title",text:Qf.properties.labelHeading()}),e.addEventListener("click",i.toggleCollapse.bind(i)),e.addEventListener("contextmenu",i.showPropertiesMenu.bind(i)),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("keydown",(function(e){e.isComposing||e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||("ArrowLeft"===e.key?(e.preventDefault(),i.setCollapse(!0)):"ArrowRight"===e.key?(e.preventDefault(),i.setCollapse(!1)):"ArrowUp"===e.key?(e.preventDefault(),i.owner.shiftFocusBefore()):"ArrowDown"!==e.key&&"j"!==e.key||(e.preventDefault(),i.collapsed?i.owner.shiftFocusAfter():i.focusPropertyAtIndex(0)))}))}));var r=i.contentEl=i.containerEl.createDiv("metadata-content");return i.propertyListEl=r.createDiv("metadata-properties"),i.addPropertyButtonEl=r.createDiv({cls:"metadata-add-button text-icon-button",attr:{tabIndex:0}},(function(e){e.createSpan("text-button-icon",(function(e){return mx(e,"lucide-plus")})),e.createSpan({cls:"text-button-label",text:Qf.properties.labelAddPropertyButton()}),e.addEventListener("click",(function(){return i.addProperty()})),e.addEventListener("keydown",(function(e){e.isComposing||(" "===e.key||"Enter"===e.key?(e.preventDefault(),i.addProperty()):"ArrowUp"===e.key||"k"===e.key||e.shiftKey&&"Tab"===e.key?(e.preventDefault(),i.focusPropertyAtIndex(-1)):"ArrowDown"===e.key||"j"===e.key||"Tab"===e.key?(e.preventDefault(),i.owner.shiftFocusAfter()):i.handleKeypress(e))}))})),i}return f(t,e),Object.defineProperty(t.prototype,"focusedLine",{get:function(){for(var e=this.containerEl.doc.activeElement,t=0,n=this.rendered;t<n.length;t++){var i=n[t];if(i.containerEl.contains(e))return i}return null},enumerable:!1,configurable:!0}),t.prototype.handleKeypress=function(e){var t,n,i,r;if("o"===e.key)e.preventDefault(),this.addProperty();else if("Home"===e.key||"ArrowDown"===e.key&&e.altKey)e.preventDefault(),this.owner.shiftFocusAfter();else if("ArrowUp"!==e.key&&"ArrowDown"!==e.key||!e.shiftKey){if("ArrowUp"===e.key||"k"===e.key||"Tab"===e.key&&e.shiftKey){e.preventDefault(),this.clearSelection();c=(s=this.focusedLine)?this.rendered.indexOf(s):-1;var o=this.properties[c-1];o?this.focusProperty(o.key):this.headingEl.focus()}else if("ArrowDown"===e.key||"j"===e.key||"Tab"===e.key&&!e.shiftKey){e.preventDefault(),this.clearSelection();c=(s=this.focusedLine)?this.rendered.indexOf(s):-1;(u=this.properties[c+1])?this.focusProperty(u.key):this.addPropertyButtonEl.focus()}else if("a"===e.key&&Ak.isModifier(e,"Mod"))e.preventDefault(),this.selectAll();else if("z"===e.key&&e.shiftKey&&Ak.isModifier(e,"Mod"))e.preventDefault(),null===(n=(t=this.owner).redo)||void 0===n||n.call(t);else if("z"===e.key&&Ak.isModifier(e,"Mod"))e.preventDefault(),null===(r=(i=this.owner).undo)||void 0===r||r.call(i);else if(Zl.isMacOS&&"Backspace"===e.key&&e.metaKey||"Delete"===e.key){e.preventDefault();s=this.focusedLine;var a=Array.from(this.selectedLines);0===a.length&&s&&a.push(s),this.removeProperties(a),this.clearSelection()}}else{e.preventDefault();var s=this.focusedLine,l="ArrowDown"===e.key?1:-1;if(s){var c=this.rendered.indexOf(s),u=this.rendered[c+l],h=this.selectedLines.has(s)&&this.selectedLines.has(u);u&&(h?this.selectProperty(s,!1):(this.selectProperty(s,!0),this.selectProperty(u,!0)),u.focusProperty())}}},t.prototype.onload=function(){this.registerEvent(this.app.metadataTypeManager.on("changed",this.onMetadataTypeChange,this))},t.prototype.hasFocus=function(){var e=this.containerEl.doc.activeElement;return this.containerEl.contains(e)},t.prototype.hasPropertyFocused=function(){for(var e=this.containerEl.doc.activeElement,t=0,n=this.rendered;t<n.length;t++){if(n[t].containerEl===e)return!0}return!1},t.prototype.showPropertiesMenu=function(e){var t=this;if(!this.headingEl.hasClass("has-active-menu")){var n=PA.forEvent(e);n.addSections(["title","action-primary","action","action.sort","","danger"]),n.setSectionSubmenu("action.sort",{title:"Sort",icon:"lucide-sort-asc"}),n.setParentElement(this.headingEl).addItem((function(e){return e.setTitle(Qf.commands.addProperty()).onClick((function(){return t.addProperty()})).setSection("action-primary")})).addItem((function(e){return e.setTitle(Qf.commands.labelSortPropertyAToZ()).onClick((function(){return t.sortProperties()})).setSection("action.sort")})).addItem((function(e){return e.setTitle(Qf.commands.labelSortPropertyZToA()).onClick((function(){return t.sortProperties(!0)})).setSection("action.sort")})).addItem((function(e){return e.setTitle(Qf.commands.clearProperties()).onClick((function(){return t.removeProperties(t.rendered)})).setSection("danger").setWarning(!0)})),this.app.workspace.trigger("markdown-properties-menu",n,this.owner.getFile())}},t.prototype.toggleCollapse=function(){this.setCollapse(!this.collapsed)},t.prototype.selectAll=function(){for(var e=0,t=this.rendered;e<t.length;e++){var n=t[e];this.selectProperty(n,!0)}},t.prototype.setCollapse=function(e,t){void 0===t&&(t=!0),this.collapsed!==e&&(this.collapsed=e,this.containerEl.toggleClass("is-collapsed",this.collapsed),this.headingEl.toggleClass("is-collapsed",this.collapsed),this.foldEl.toggleClass("is-collapsed",this.collapsed),Ml(this.contentEl,this.collapsed,t))},t.prototype.focusPropertyAtIndex=function(e){-1===e&&(e=this.rendered.length-1);var t=this.rendered[e];t?t.focusProperty():this.addPropertyButtonEl.focus()},t.prototype._copyToClipboard=function(e,t){for(var n={},i=0,r=t;i<r.length;i++){var o=r[i];n[o.entry.key]=o.entry.value}e.clipboardData.setData("Text",_D(n)),e.clipboardData.setData("obsidian/properties",JSON.stringify(n))},t.prototype.handleCut=function(e){if(this.hasPropertyFocused()){var t=Array.from(this.selectedLines);0===t.length&&this.focusedLine&&t.push(this.focusedLine),0!==t.length&&(e.preventDefault(),this._copyToClipboard(e,t),this.removeProperties(t))}},t.prototype.handleCopy=function(e){if(this.hasPropertyFocused()){var t=Array.from(this.selectedLines);0===t.length&&this.focusedLine&&t.push(this.focusedLine),0!==t.length&&(e.preventDefault(),this._copyToClipboard(e,t))}},t.prototype.insertProperties=function(e){var t=this.serialize();CL(t,e),this.synchronize(t),this.save()},t.prototype.handlePaste=function(e){var t=e.clipboardData.getData("obsidian/properties");if(t){e.preventDefault();var n=null;try{n=JSON.parse(t)}catch(e){console.error(e)}n&&this.insertProperties(n)}},t.prototype.handleItemSelection=function(e,t){var n=this.selectedLines,i=this.focusedLine;if(t.focusProperty(),e.altKey&&!e.shiftKey)return this.selectProperty(t,!n.has(t)),!0;if(e.shiftKey){if(i)for(var r=[this.rendered.indexOf(i),this.rendered.indexOf(t)].sort(Dm),o=r[0],a=r[1],s=n.has(i)&&n.has(t),l=o;l<=a;l++)this.selectProperty(this.rendered[l],!s);else this.selectProperty(t,!0);return!0}return this.clearSelection(),!1},t.prototype.selectProperty=function(e,t){e&&(t?(this.selectedLines.add(e),e.setSelected(!0)):(this.selectedLines.delete(e),e.setSelected(!1)))},t.prototype.clearSelection=function(){this.selectedLines.forEach((function(e){e.setSelected(!1)})),this.selectedLines.clear()},t.prototype.clear=function(){this.hasFocus()&&xw(),this.selectedLines=new Set},t.prototype.focus=function(e){return void 0===e&&(e={bottom:!1}),this.properties.length>0&&(this.collapsed||!e.bottom?this.headingEl.focus():this.addPropertyButtonEl.focus(),!0)},t.prototype.focusProperty=function(e){var t=this.rendered.find((function(t){return t.entry.key===e}));null==t||t.focusProperty()},t.prototype.focusKey=function(e){var t=this.rendered.find((function(t){return t.entry.key===e}));null==t||t.focusKey()},t.prototype.focusValue=function(e,t){var n=this.rendered.find((function(t){return t.entry.key===e}));null==n||n.focusValue(t)},t.prototype.onMetadataTypeChange=function(e){var t=this.rendered.find((function(t){return t.entry.key.toLowerCase()===e}));t&&t.renderProperty(t.entry,!0)},t.prototype.synchronize=function(e){for(var t=this,n=!!e,i=function(e){var t=[];if(!e)return t;for(var n=CS(e,/^tag(s)?$/i,!0),i=MS(e),r=SS(e),o=0,a=Object.entries(e);o<a.length;o++){var s=a[o],l=s[0],c=s[1];e.hasOwnProperty(l)&&(l.match(/^alias(es)?$/i)?(l="aliases",c=i):l.match(/^cssclass(es)?$/i)?(l="cssclasses",c=r):l.match(/^tag(s)?$/i)&&(l="tags",c=n),t.push({key:l,type:VF(c),value:c}))}return t}(e),r=[],o=function(e){var t=i[e],n=a.rendered.find((function(e){return e.entry.key===t.key}));n||(n=new NF(a.app,a,t),a.addChild(n)),n.renderProperty(t),r.push(n)},a=this,s=0;s<i.length;s++)o(s);var l=this.rendered.find((function(e){return""===e.entry.key}));if(l){var c=this.containerEl.doc.activeElement;l.containerEl.contains(c)&&(r.push(l),i.push(l.entry))}this.propertyListEl.setChildrenInPlace(r.map((function(e){return e.containerEl})));for(var u=0,h=this.rendered;u<h.length;u++){var d=h[u];r.contains(d)||this.removeChild(d)}this.properties=i,this.rendered=r,this.invalidFrontmatter=!n,this.containerEl.setAttr("data-property-count",this.properties.length),this.containerEl.toggleClass("mod-error",!n),this.headingEl.toggle(n),this.addPropertyButtonEl.toggle(n),this.errorEl.toggle(!n),n||this.errorEl.firstChild||(this.errorEl.createDiv({cls:"metadata-error-title",text:Qf.properties.labelInvalidHeading()}),this.errorEl.createDiv("text-icon-button metadata-show-source-button",(function(e){e.createSpan({cls:"text-button-label",text:Qf.properties.labelShowSource()}),e.addEventListener("click",(function(){var e=t.owner.getFile(),n=t.app.workspace.getActiveFileView();if(n.file!==e){var i=t.app.workspace.getLeaf();i.openFile(e),n=i.view}if(n instanceof LY){var r=n.leaf.getViewState();r.state.mode="source",n.leaf.setViewState(r,{focus:!0,cursor:{from:{line:0,ch:0}}})}}))})))},t.prototype.serialize=function(){for(var e={},t=0,n=this.properties;t<n.length;t++){var i=n[t];e[i.key]=i.value}return e},t.prototype.sortProperties=function(e){void 0===e&&(e=!1);var t=this.serialize(),n=Object.keys(t);e?n.sort(Tm):n.sort(xm);for(var i={},r=0,o=n;r<o.length;r++){var a=o[r];i[a]=t[a]}this.synchronize(i)},t.prototype.addProperty=function(e){if(void 0===e&&(e=""),this.invalidFrontmatter)new JA(Qf.properties.msgInvalidProperties());else{var t=this.serialize();t.hasOwnProperty(e)||(t[e]=null,this.synchronize(t),e&&this.owner.saveFrontmatter(t)),e?this.focusValue(e,"both"):this.focusKey(e)}},t.prototype.removeProperties=function(e,t){void 0===t&&(t=!0);for(var n=0,i=this.focusedLine,r=i?this.rendered.indexOf(i):-1,o=this.serialize(),a=0,s=e;a<s.length;a++){var l=s[a];this.rendered.indexOf(l)<=r&&n++,delete o[l.entry.key]}r-=n,this.synchronize(o),t&&(Object.keys(o).length>0?this.focusPropertyAtIndex(Math.clamp(r,0,this.rendered.length-1)):this.owner.shiftFocusAfter()),this.owner.saveFrontmatter(o)},t.prototype.save=function(){var e=this.serialize();this.owner.saveFrontmatter(e)},t.prototype.reorderKey=function(e,t){var n=this.serialize();delete n[e.key];for(var i={},r=Object.keys(n),o=0;o<r.length;o++){o===t&&(i[e.key]=e.value);var a=r[o];i[a]=n[a]}t>=r.length&&(i[e.key]=e.value),this.owner.saveFrontmatter(i)},t}(xA),NF=function(e){function t(t,n,i){var r=e.call(this)||this;r.app=t,r.metadataEditor=n,r.entry=i,r.typeInfo=r.app.metadataTypeManager.getTypeInfo(i),r.containerEl=createDiv({cls:"metadata-property",attr:{tabIndex:0}}),r.containerEl.setAttr("data-property-key",i.key),r.containerEl.setAttr("data-property-type",i.type),r.containerEl.addEventListener("keydown",(function(e){if(!e.isComposing&&!e.defaultPrevented&&e.target===r.containerEl)if(r.metadataEditor.selectedLines.size>1)r.metadataEditor.handleKeypress(e);else if("Enter"===e.key||" "===e.key||"A"===e.key||"i"===e.key){e.preventDefault();var t="both";"A"===e.key?t="end":"i"===e.key&&(t="start"),r.metadataEditor.focusValue(i.key,t)}else"ArrowLeft"===e.key||"h"===e.key?(e.preventDefault(),r.focusKey()):"ArrowRight"===e.key||"l"===e.key?(e.preventDefault(),r.focusValue()):r.metadataEditor.handleKeypress(e)})),r.keyEl=r.containerEl.createDiv({cls:"metadata-property-key"}),r.iconEl=r.keyEl.createSpan({cls:"metadata-property-icon",attr:{"aria-disabled":!r.entry.key}},(function(e){e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(t){t.preventDefault(),"true"!==e.getAttr("aria-disabled")&&(r.containerEl.hasClass("has-active-menu")||r.handleItemClick(t))})),Zl.isMobileApp||e.addEventListener("contextmenu",(function(t){t.preventDefault(),"true"!==e.getAttr("aria-disabled")&&(r.containerEl.hasClass("has-active-menu")||(r.focusProperty(),r.showPropertyMenu(t)))}))})),r.keyInputEl=r.keyEl.createEl("input",{cls:"metadata-property-key-input",value:r.entry.key,type:"text",attr:{autocapitalize:"none",enterkeyhint:Zl.isAndroidApp?"enter":"next"}},(function(e){Zl.isMobile||Rx(e,r.entry.key),e.addEventListener("blur",(function(t){if(e!==e.doc.activeElement){var n=e.value.trim();""!==n||""!==r.entry.key?r.handleUpdateKey(n)||(e.value=r.entry.key):r.metadataEditor.removeProperties([r],!1)}})),e.addEventListener("keydown",(function(n){if(!n.isComposing&&!n.defaultPrevented)if("Tab"===n.key||"Enter"===n.key){n.preventDefault();var o=e.value.trim();r.handleUpdateKey(o)&&t.nextFrame((function(){r.renderProperty(r.entry,!0),r.focusValue()}))}else"Escape"===n.key&&(n.preventDefault(),e.value=i.key,i.key?r.focusProperty():r.metadataEditor.removeProperties([r]))})),e.addEventListener("input",(function(){var t=i.key||e.value.trim();r.iconEl.setAttr("aria-disabled",!t)})),new JF(t,e,r.metadataEditor.properties).onSelect((function(n){var i=n.text.trim();e.value=i,r.handleUpdateKey(i)&&t.nextFrame((function(){r.renderProperty(r.entry,!0),r.focusValue()}))}))})),r.valueEl=r.containerEl.createDiv("metadata-property-value"),Tc(r.valueEl);var o=r.warningEl=r.containerEl.createDiv({cls:"clickable-icon metadata-property-warning-icon"});return Rx(o,Qf.properties.labelTypeMismatchWarning({type:r.typeInfo.expected.name()})),mx(o,"lucide-alert-triangle"),o.toggle(r.typeInfo.expected!==r.typeInfo.inferred),o.addEventListener("click",(function(e){new iO(r.app,r).open()})),r}return f(t,e),t.prototype.onload=function(){var e=this;Hc(this.iconEl,this.containerEl,this.metadataEditor.propertyListEl,10,(function(){}),(function(t){return e.metadataEditor.reorderKey(e.entry,t)}))},t.prototype.setSelected=function(e){this.containerEl.toggleClass("is-selected",e)},t.prototype.handleItemClick=function(e){this.metadataEditor.handleItemSelection(e,this)||this.showPropertyMenu(e)},t.prototype.focusKey=function(){var e=this.metadataEditor,t=this.keyInputEl;e.collapsed&&e.setCollapse(!1,!0),t.focus()},t.prototype.focusProperty=function(){var e=this.metadataEditor,t=this.containerEl;e.collapsed&&e.setCollapse(!1,!0),t.focus()},t.prototype.focusValue=function(e){void 0===e&&(e="both");var t=this.metadataEditor,n=this.rendered;if(t.collapsed&&t.setCollapse(!1,!0),n)n.focus();else{var i=this.valueEl.find("input");if(i&&i.instanceOf(HTMLInputElement))if(i.focus(),"end"===e){var r=i.value.length;i.setSelectionRange(r,r)}else"start"===e?i.setSelectionRange(0,0):i.select()}},t.prototype.showPropertyMenu=function(e){var t,n=this;e.preventDefault();var i=new PA;i.addSections(["title","action","action.changeType","selection","clipboard","","danger"]);var r=this.app.metadataTypeManager,o=!KA.hasOwnProperty(this.entry.key),a=r.registeredTypeWidgets;Zl.isPhone&&i.addItem((function(e){return e.setTitle(n.entry.key).setSection("title").removeIcon().setIsLabel(!0)})),Zl.isMobile&&i.addItem((function(e){return e.setTitle(Qf.properties.optionPropertyType()).setSection("action.changeType").removeIcon().setIsLabel(!0).titleEl.addClass("u-small")})).onHide((function(){xw()})),i.setSectionSubmenu("action.changeType",{title:Qf.properties.optionPropertyType(),icon:"lucide-menu"});for(var s=function(e){if(e.reservedKeys&&!(null===(t=e.reservedKeys)||void 0===t?void 0:t.contains(l.entry.key)))return"continue";i.addItem((function(t){var i;return t.setTitle(e.name()).setIcon(null!==(i=e.icon)&&void 0!==i?i:"lucide-pencil").setSection("action.changeType").setDisabled(!o).setChecked(e.type===n.typeInfo.expected.type).onClick((function(){r.setType(n.entry.key,e.type),n.renderProperty(n.entry,!0),n.focusValue()}))}))},l=this,c=0,u=Object.values(a);c<u.length;c++){s(u[c])}Zl.isDesktopApp&&(i.addItem((function(t){return t.setTitle(Qf.interface.menu.cut()).setSection("clipboard").setIcon("lucide-scissors").onClick((function(){e.win.electron.remote.getCurrentWebContents().cut()}))})),i.addItem((function(t){return t.setTitle(Qf.interface.menu.copy()).setSection("clipboard").setIcon("lucide-copy").onClick((function(){e.win.electron.remote.getCurrentWebContents().copy()}))})),i.addItem((function(t){return t.setTitle(Qf.interface.menu.paste()).setSection("clipboard").setIcon("lucide-clipboard-check").onClick((function(){e.win.electron.remote.getCurrentWebContents().paste()}))}))),i.addItem((function(e){return e.setTitle(Qf.interface.menu.remove()).setWarning(!0).setSection("danger").setIcon("lucide-trash-2").onClick((function(){n.metadataEditor.removeProperties([n])}))})),i.setParentElement(this.containerEl).showAtMouseEvent(e)},t.prototype.handleUpdateKey=function(e){if(""===e)return this.keyInputEl.isActiveElement()&&Ox(this.keyInputEl,Qf.properties.msgEmptyPropertyName(),{classes:["mod-error"]}),!1;if(this.entry.key!==e){var t=this.metadataEditor.rendered.find((function(t){return t.entry.key.toLowerCase()===e.toLowerCase()}));if(t&&t!==this.metadataEditor.focusedLine)return Tw(t.containerEl),Ox(this.keyInputEl,Qf.properties.msgDuplicatePropertyName(),{classes:["mod-error"]}),!1;this.entry.key=e,this.containerEl.setAttr("data-property-key",e),this.metadataEditor.save()}return Bx(),this.iconEl.setAttr("aria-disabled",!1),!0},t.prototype.handleUpdateValue=function(e){this.entry.value!==e&&(this.entry.value=e,this.metadataEditor.save())},t.prototype.handlePropertyBlur=function(){xw(),Zl.isPhone||this.focusProperty()},t.prototype.renderProperty=function(e,t,n){var i,r,o,a;void 0===t&&(t=!1),void 0===n&&(n=!1);var s=this.typeInfo.inferred.type,l=null===(i=this.entry)||void 0===i?void 0:i.value;this.entry=e;var c=this.typeInfo=this.app.metadataTypeManager.getTypeInfo(e),u=n?c.expected:c.inferred;!t&&(this.valueEl.contains(this.containerEl.doc.activeElement)||this.valueEl.hasChildNodes()&&l===this.entry.value&&s===c.inferred.type)||(mx(this.iconEl,null!==(r=c.expected.icon)&&void 0!==r?r:"lucide-file-question"),Rx(this.warningEl,Qf.properties.labelTypeMismatchWarning({type:this.typeInfo.expected.name()})),this.warningEl.toggle(!n&&c.expected!==c.inferred),this.rendered&&(this.removeChild(this.rendered),this.rendered=void 0),this.valueEl.empty(),this.rendered=u.render(this.valueEl,this.entry,{app:this.app,key:this.entry.key,onChange:this.handleUpdateValue.bind(this),sourcePath:null!==(a=null===(o=this.metadataEditor.owner.getFile())||void 0===o?void 0:o.path)&&void 0!==a?a:"",blur:this.handlePropertyBlur.bind(this),metadataEditor:this.metadataEditor}),this.rendered&&this.addChild(this.rendered))},t}(xA),RF=/^\d{4}-[01]\d-[0-3]\d$/,HF=/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d$/;function VF(e){var t=typeof e;return null==e?"text":"string"==typeof e?HF.test(e)?"datetime":RF.test(e)?"date":"text":"number"===t?"number":"boolean"===t?"checkbox":dc(e,!0)?"multitext":"unknown"}var zF=function(e){function t(t){var n=e.call(this)||this;return n.containerEl=t,n}return f(t,e),t.prototype.onFocus=function(){},t.prototype.focus=function(){this.onFocus()},t}(xA),qF={name:Qf.properties.types.optionText,type:"text",icon:"lucide-text",default:function(){return""},validate:function(e){return"string"==typeof e},render:function(e,t,n){var i,r=String(null!==(i=t.value)&&void 0!==i?i:""),o=new UF(n,e);return o.setValue(r),new QF(n,o.inputEl,(function(e,t){t.preventDefault(),o.setValue(e),n.onChange(e),xw(),n.blur()})),o}},UF=function(e){function t(t,n){var i=e.call(this,n)||this;i.hoverPopover=null,i.ctx=t,i.containerEl=n;var r=String(t.app.vault.getConfig("spellcheck")),o=i.inputEl=n.createDiv({cls:"metadata-input-longtext mod-truncate",attr:{placeholder:Qf.properties.labelNoValue(),contentEditable:!0,spellcheck:r,tabIndex:0}}),a=function(e){i.setValue(e),i.ctx.onChange(e||null)};o.addEventListener("drop",(function(e){var n=t.app.dragManager.draggable;if(n){var i=QT(t.app,n,t.sourcePath);i.length>0&&(e.preventDefault(),a(i[0]))}})),o.addEventListener("keydown",(function(e){if(!e.isComposing)if("Enter"===e.key){if(e.shiftKey)return;if(e.defaultPrevented)return;e.preventDefault(),a(o.textContent),i.ctx.blur()}else"Escape"===e.key&&(e.preventDefault(),i.setValue(i.value),i.ctx.blur())})),o.addEventListener("input",(function(e){e.isComposing||uk(o,!0)})),o.addEventListener("paste",(function(e){hk(o,e)})),o.addEventListener("blur",(function(e){e.defaultPrevented||a(o.textContent.trimEnd())}));var s=i.linkEl=n.createDiv("metadata-link"),l=i.linkTextEl=s.createDiv("metadata-link-inner");return s.createDiv("metadata-link-flair",(function(e){return mx(e,"lucide-pencil")})),l.onClickEvent((function(e){0!==e.button&&1!==e.button||(e.preventDefault(),i.isWikilink()?i.ctx.app.workspace.openLinkText(i.getLinkText(),i.ctx.sourcePath,Ak.isModEvent(e)):zc(i.value)?window.open(i.value,"_blank"):_c(i.value)&&window.open("mailto:"+i.value,"_blank"))})),l.addEventListener("contextmenu",(function(e){e.preventDefault();var t=(new PA).addSections(["title","correction","spellcheck","open","selection","clipboard","action","view","info","","danger"]);i.isWikilink()?(e.preventDefault(),i.ctx.app.workspace.handleLinkContextMenu(t,i.getLinkText(),i.ctx.sourcePath)):zc(i.value)?(e.preventDefault(),i.ctx.app.workspace.handleExternalLinkContextMenu(t,i.value)):_c(i.value)&&(e.preventDefault(),i.ctx.app.workspace.handleExternalLinkContextMenu(t,"mailto:"+i.value)),t.showAtMouseEvent(e)})),i.isWikilink()&&t.app.dragManager.handleDrag(l,(function(e){return t.app.dragManager.dragLink(e,i.getLinkText(),t.sourcePath)})),s.addEventListener("click",(function(e){e.defaultPrevented||i.focus()})),s.addEventListener("mouseover",(function(e){l.hasClass("internal-link")&&i.ctx.app.workspace.trigger("hover-link",{event:e,source:t.metadataEditor.owner.getHoverSource(),hoverParent:i,targetEl:s,linktext:i.getLinkText()})})),i}return f(t,e),t.prototype.isWikilink=function(){var e=this.value;return e&&e.startsWith("[[")&&e.endsWith("]]")},t.prototype.render=function(){var e=this.ctx.app,t=this.linkTextEl,n=this.getLinkText();t.setText(this.getDisplayText());var i=this.isWikilink(),r=!i&&zc(this.value),o=_c(this.value),a=i&&!e.metadataCache.getFirstLinkpathDest(_S(n),this.ctx.sourcePath);t.toggleClass("internal-link",i),t.toggleClass("external-link",r||o),t.toggleClass("is-unresolved",a),i||r||o?(this.inputEl.hide(),this.linkEl.show()):(this.linkEl.hide(),this.inputEl.show())},t.prototype.isAlias=function(){var e=this.value;return!!(e&&e.startsWith("[[")&&e.endsWith("]]"))&&nC(e.slice(2,-2)).isAlias},t.prototype.getDisplayText=function(){var e=this.value;return e&&e.startsWith("[[")&&e.endsWith("]]")?nC(e.slice(2,-2)).title:e||""},t.prototype.getLinkText=function(){var e=this.value;return e&&e.startsWith("[[")&&e.endsWith("]]")?nC(e.slice(2,-2)).href:e||""},t.prototype.setValue=function(e){this.value=e,this.inputEl.textContent=e,this.render()},t.prototype.onFocus=function(){this.inputEl.show(),this.linkEl.hide(),Zl.isPhone?this.inputEl.focus():Sw(this.inputEl)},t}(zF),_F=function(e){function t(t,n,i){var r=e.call(this,n)||this;r.hoverPopover=null,r.ctx=t,r.containerEl=n,null!=i||(i=[]),r.valueSet=new Set(i);var o=function(e,n){new QF(t,e,(function(e,t){return n(e,!0)}),(function(e){return"text"!==e.type||!r.valueSet.has(e.text)}))},a=function(e){return e&&e.startsWith("[[")&&e.endsWith("]]")},s=r.multiselect=new DF(n).setOptionRenderer((function(e,n){var i=n.el,o=n.pillEl;if(a(e)){var s=e.slice(2,-2),l=nC(s),c=l.title,u=l.href;i.createSpan({text:c}),o.addClass("internal-link"),o.toggleClass("is-unresolved",!t.app.metadataCache.getFirstLinkpathDest(_S(u),t.sourcePath)),i.onClickEvent((function(e){0!==e.button&&1!==e.button||t.app.workspace.openLinkText(u,t.sourcePath,Ak.isModEvent(e))})),t.app.dragManager.handleDrag(o,(function(e){return t.app.dragManager.dragLink(e,s,t.sourcePath)})),i.addEventListener("mouseover",(function(e){t.app.workspace.trigger("hover-link",{event:e,source:t.metadataEditor.owner.getHoverSource(),hoverParent:r,targetEl:i,linktext:u})}))}else if(i.setText(e),zc(e)||_c(e)){var h=_c(e)?"mailto:"+e:e;i.addClass("external-link"),i.onClickEvent((function(e){0!==e.button&&1!==e.button||window.open(h,"_blank")}))}})).setOptionContextmenuHandler((function(e,n){if(e.addSections(["title","correction","spellcheck","open","selection","clipboard","action","view","info","","danger"]),a(n)){var i=nC(n.slice(2,-2)).href;r.ctx.app.workspace.handleLinkContextMenu(e,i,t.sourcePath)}else zc(n)&&r.ctx.app.workspace.handleExternalLinkContextMenu(e,n)})).setValues(i).allowCreatingOptions((function(e){return e})).preventDuplicates((function(e,t){return t.indexOf(e)})).setupInputEl(o).onChange((function(e){r.valueSet=new Set(e),t.onChange(e.slice())}));return t.app.dragManager.handleDrop(s.rootEl,(function(e,i,r){if(i){if(!r){var o=QT(t.app,i,t.sourcePath);if(o.length>0){e.preventDefault();for(var a=0,l=o;a<l.length;a++){var c=l[a];s.addElement(c)}}}return{hoverClass:"is-being-dragged-over",hoverEl:n,dropEffect:"copy"}}})),s.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Escape"===e.key&&(e.preventDefault(),t.blur())})),o(s.inputEl,(function(e){r.multiselect.addElement(e),r.multiselect.setInputText("")})),r}return f(t,e),t.prototype.onFocus=function(){Zl.isPhone?this.multiselect.inputEl.focus():Sw(this.multiselect.inputEl)},t}(zF),WF=function(e){function t(t,n,i){var r=e.call(this,n)||this;r.hoverPopover=null,null!=i||(i=[]),r.ctx=t,r.containerEl=n;var o=new Set(i),a=r.multiselect=new DF(n).setOptionRenderer((function(e,n){var i=n.el,r=n.pillEl;e.startsWith("#")&&(e=e.slice(1)),i.createEl("span",{text:e}),ZD("#"+e)||r.addClass("is-invalid"),lk(i,(function(){var n=t.app.internalPlugins.getEnabledPluginById("global-search");n&&n.openGlobalSearch("tag:"+e)}))})).preventDuplicates((function(e,t){var n=function(e){return e.startsWith("#")?e.slice(1):e};return t.map(n).indexOf(n(e))})).allowCreatingOptions((function(e){var t=e;if(t.trim())return t.startsWith("#")||(t="#"+t),ZD(t)?(Bx(),e):(Ox(a.inputEl,Qf.properties.msgInvalidTag(),{classes:["mod-error"]}),null)})).setValues(i).onChange((function(e){r.ctx.onChange(e.slice()),o=new Set(e)}));return a.inputEl.autocapitalize="none",new nO(t.app,a.inputEl,(function(e){return!o.has(e.tag)})).onSelect((function(e){a.addElement(e.tag),a.setInputText("")})),a.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Escape"===e.key&&(e.preventDefault(),r.ctx.blur())})),r}return f(t,e),t.prototype.onFocus=function(){Zl.isPhone?this.multiselect.inputEl.focus():Sw(this.multiselect.inputEl)},t}(zF),jF=function(e){function t(t,n,i){var r=e.call(this,n)||this;r.hoverPopover=null,null!=i||(i=[]),r.ctx=t,r.containerEl=n;var o=r.multiselect=new DF(n).setOptionRenderer((function(e,t){return t.el.setText(e)})).preventDuplicates((function(e,t){return t.indexOf(e)})).allowCreatingOptions((function(e){return e.trim()})).setValues(i).onChange((function(e){return t.onChange(e.slice())}));return o.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Escape"===e.key&&(e.preventDefault(),t.blur())})),r}return f(t,e),t.prototype.onFocus=function(){Zl.isPhone?this.multiselect.inputEl.focus():Sw(this.multiselect.inputEl)},t}(zF),GF={name:Qf.properties.types.optionAliases,type:"aliases",icon:"lucide-forward",default:function(){return[]},reservedKeys:["aliases"],validate:function(e){return dc(e,!0)},render:function(e,t,n){return t.value=IF(t.value),new jF(n,e,t.value)}},KF={name:Qf.properties.types.optionTags,type:"tags",icon:"lucide-tags",default:function(){return[]},reservedKeys:["tags"],validate:function(e){return dc(e,!0)},render:function(e,t,n){return t.value=IF(t.value),new WF(n,e,t.value)}},YF={name:Qf.properties.types.optionDate,type:"date",icon:"lucide-calendar",default:function(){return""},validate:function(e){return!e||window.moment(e,LF).isValid()},render:function(e,t,n){var i=function(e){if(!e)return"";var t=window.moment(e,LF);return t.isValid()?t.format("YYYY-MM-DD"):""},r=i(t.value),o=e.createEl("input",{cls:"metadata-input metadata-input-text mod-date",type:"date",placeholder:Qf.properties.labelNoValue(),value:r,attr:{max:"9999-12-31"}});o.toggleClass("is-empty",!r);var a,s=n.app.internalPlugins.getEnabledPluginById("daily-notes");return s&&(a=e.createDiv("clickable-icon",(function(e){mx(e,"lucide-link"),Rx(e,Qf.plugins.properties.actionOpenDailyNote()),e.onClickEvent((function(e){return g(void 0,void 0,void 0,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=window.moment(t.value),[4,s.getDailyNote(i)];case 1:return r=o.sent(),n.app.workspace.getLeaf(Ak.isModEvent(e)).openFile(r),[2]}}))}))})),e.toggle(!!r)}))),o.addEventListener("change",(function(e){var t=i(o.value);n.onChange(t),o.toggleClass("is-empty",!t),null==a||a.toggle(!!i(t))})),o.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),n.blur())})),null}},ZF={name:Qf.properties.types.optionDatetime,type:"datetime",icon:"lucide-clock",default:function(){return""},validate:function(e){return!e||window.moment(e,PF).isValid()},render:function(e,t,n){var i=function(e){if(!e)return"";var t=window.moment(e,PF);return t.isValid()?t.format("YYYY-MM-DD[T]HH:mm:ss"):""},r=i(t.value),o=e.createEl("input",{cls:"metadata-input metadata-input-text mod-datetime",type:"datetime-local",placeholder:Qf.properties.labelNoValue(),value:r,attr:{max:"9999-12-31T23:59"}});return o.toggleClass("is-empty",!r),o.addEventListener("change",(function(e){var t=i(o.value);o.toggleClass("is-empty",!t),n.onChange(t)})),o.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),n.blur())})),null}},XF={name:Qf.properties.types.optionNumber,type:"number",icon:"lucide-binary",default:function(){return 0},validate:function(e){return Number.isNumber(e)},render:function(e,t,n){var i=e.createEl("input",{cls:"metadata-input metadata-input-number",type:"number",placeholder:Qf.properties.labelNoValue(),value:Number.isNaN(t.value)?"":""+t.value,attr:{inputmode:"decimal"}});function r(e){var t=null;e&&(t=+i.value,Number.isNaN(t))?Ox(i,Qf.properties.msgInvalidNumber(),{classes:["mod-error"]}):n.onChange(t)}return i.addEventListener("keydown",(function(e){e.isComposing||("Enter"===e.key?(e.preventDefault(),r(i.value),n.blur()):"Escape"===e.key&&(e.preventDefault(),i.value=t.value?String(t.value):"",n.blur()))})),i.addEventListener("blur",(function(e){e.defaultPrevented||r(i.value)})),null}},$F={name:Qf.properties.types.optionCheckbox,type:"checkbox",icon:"lucide-check-square",default:function(){return!1},validate:function(e){return"boolean"==typeof e},render:function(e,t,n){var i=e.createEl("input",{type:"checkbox",cls:"metadata-input-checkbox"});return i.checked=t.value,i.setAttr("data-indeterminate",null==t.value),i.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),n.blur())})),i.addEventListener("change",(function(e){n.onChange(i.checked),i.setAttr("data-indeterminate",!1)})),null}},QF=function(e){function t(t,n,i,r){var o=e.call(this,t.app,n)||this;return o.context=t,o.inputEl=n,o.onSelectLink=i,o.suggestionFilter=r,o.instructionsEl=createDiv("prompt-instructions"),o.sourcePath=t.sourcePath,o.manager=new CF(t.app,(function(){return t.sourcePath})),o.scope.register(["Shift"],"Enter",(function(e){return o.selectSuggestion(null,e),!1})),o.scope.register([],"Tab",(function(e){if(!e.isComposing&&o.suggestions.useSelectedItem(e))return!1})),o.scope.register(null,"#",(function(e){if(("file"===o.manager.mode||"heading"===o.manager.mode)&&o.suggestions.useSelectedItem(e))return!1})),o.scope.register(null,"^",(function(e){if("file"===o.manager.mode&&o.suggestions.useSelectedItem(e))return!1})),o}return f(t,e),t.prototype.updateInstructions=function(e){e&&dF(this.instructionsEl,this.manager.getInstructions()),dF(this.instructionsEl,[{command:Qf.properties.valueSuggestion.keyLinkNote(),purpose:Qf.properties.valueSuggestion.instructionLinkNote()},{command:"esc",purpose:Qf.properties.valueSuggestion.instructionDismiss()}])},t.prototype.showSuggestions=function(t){if(e.prototype.showSuggestions.call(this,t),this.context){var n=this.inputEl.getText();("[["===n||n.startsWith("[[^")||n.startsWith("#"))&&this.suggestions.forceSetSelectedItem(-1,null),this.updateInstructions(n.startsWith("[["))}},t.prototype.selectSuggestion=function(e,t){var n,i=!0,r=null;if(null==e){var o=this.getValue();o.startsWith("[[")&&!o.endsWith("]]")&&(o+="]]")}else if("text"===e.type)n=e.text;else{var a=t.instanceOf(KeyboardEvent)?Ek(t):"";i=!a||"Enter"===a;var s=this.inputEl.getText(),l=this.inputEl.win.getSelection().getRangeAt(0),c=s.substring(2,l.startOffset),u=kF(this.app,e,c,s,0,l.startOffset,this.sourcePath,a,"frontmatter");if("block"===e.type&&u.blockId){var h=GD(e,u.blockId),d=h.blockEnd,p=h.addition,f=e.content,m=e.file;f=f.slice(0,d)+p+f.slice(d),this.app.vault.modify(m,f)}n=u.replacement,r={from:u.selectionStart,to:u.selectionEnd}}i?(this.close(),this.onSelectLink(n,t)):(this.inputEl.textContent=n,ck(this.inputEl,r),this.inputEl.trigger("input"))},t.prototype.renderSuggestion=function(e,t){if("text"===e.type)if(e.text.startsWith("[[")&&e.text.endsWith("]]")){t.addClass("mod-complex");var n=t.createDiv("suggestion-content"),i=t.createDiv("suggestion-aux"),r=n.createDiv("suggestion-title"),o=n.createDiv("suggestion-note"),a=nC(e.text.slice(2,-2)),s=a.title,l=a.href,c=a.isAlias;c&&o.setText(l),i.createSpan({cls:"suggestion-flair"},(function(e){c?(mx(e,"lucide-forward"),Rx(e,Qf.interface.tooltip.alias())):mx(e,"lucide-link")})),qL(e.matches,-2),WL(r,s,e)}else WL(t,e.text,e);else wF(e,t,this.manager.global)},t.prototype.getSuggestions=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e.startsWith("[[")?((n=this.manager.runnable)&&n.cancel(),n=this.manager.runnable=new dL,i=void 0,(r=this.inputEl.win.getSelection())&&r.rangeCount>0&&(i=r.getRangeAt(0).startOffset),e=e.slice(2,i),[4,this.manager.getSuggestionsAsync(n,e)]):[3,2];case 1:return!(t=o.sent())||n.isCancelled()?[2,[]]:(0===t.length&&(t=[vF]),t.sort(mF),[3,3]);case 2:t=function(e,t,n){n=n.toLowerCase();for(var i=[],r=[n],o=e.metadataCache.getFrontmatterPropertyValuesForKey(t),a=0,s=Array.from(o);a<s.length;a++){var l=s[a];if(""===n)i.push({type:"text",text:l,score:0,matches:null});else{var c=UL(r,l.toLowerCase());c&&i.push({type:"text",text:l,score:RL(c,n.length,l.length,0),matches:c})}}return i.sort((function(e,t){return t.score-e.score})),i}(this.app,this.context.key,e),o.label=3;case 3:return this.suggestionFilter?[2,t.filter(this.suggestionFilter)]:[2,t]}}))}))},t}(AF);var JF=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.app=t,r.inputEl=n,r.properties=i,r.scope.register(["Shift"],"Enter",(function(e){return r.selectSuggestion({type:"text",text:r.getValue(),propertyType:"text",score:0,matches:null},e),!1})),r}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.addClass("mod-complex");var n=t.createDiv("suggestion-icon");WL(t.createDiv("suggestion-content").createDiv("suggestion-title"),e.text,e);var i=e.propertyType,r=null,o=this.app.metadataTypeManager.registeredTypeWidgets;o.hasOwnProperty(i)&&(r=o[i]),n.createSpan({cls:"suggestion-flair"},(function(e){var t;mx(e,null!==(t=null==r?void 0:r.icon)&&void 0!==t?t:"lucide-file-question")}))},t.prototype.getSuggestions=function(e){var t=new Set(this.properties.map((function(e){return e.key.toLowerCase()}))),n=this.app.metadataTypeManager.getAllProperties(),i=Object.entries(n).filter((function(e){var n=e[0];e[1];return!t.has(n)})).map((function(e){e[0];var t,n=e[1];return[n.name,null!==(t=n.type)&&void 0!==t?t:"text"]}));return function(e,t){t=t.toLowerCase();for(var n=[],i=[t],r=0,o=e;r<o.length;r++){var a=o[r],s=a[0],l=a[1];if(""===t)n.push({type:"text",text:s,propertyType:l,score:0,matches:null});else{var c=UL(i,s.toLowerCase());c&&n.push({type:"text",text:s,propertyType:l,score:RL(c,t.length,s.length,0),matches:c})}}return n.sort((function(e,t){return t.score-e.score})),n}(i,e)},t}(AF);var eO={name:Qf.properties.types.optionMultitext,type:"multitext",icon:"lucide-list",default:function(){return[]},validate:function(e){return"string"==typeof e||dc(e,!0)},render:function(e,t,n){return t.value=IF(t.value),new _F(n,e,t.value)}},tO={name:Qf.properties.types.optionUnknown,type:"unknown",icon:"lucide-file-question",default:function(){},validate:function(e){return!0},render:function(e,t,n){return e.createSpan({cls:"metadata-property-value-item mod-unknown",text:JSON.stringify(t.value)}),null}},nO=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.suggestionFilter=i,r.scope.register([],"Tab",(function(e){if(!e.isComposing){var t=r.suggestions,i=t.values[t.selectedItem];if(i){var o=KL(i.tag,i.matches);n.setText(o),ck(n,{from:o.length}),n.trigger("input")}return!1}})),r}return f(t,e),t.prototype.getSuggestions=function(e){return TF(this.app.metadataCache,e,e.startsWith("#")).filter(this.suggestionFilter)},t.prototype.renderSuggestion=function(e,t){jL(t,e.tag,e.matches)},t}(AF),iO=function(e){function t(t,n){var i=e.call(this,t)||this;return i.line=n,i.setTitle(Qf.plugins.properties.labelChangePropertyType()),i.contentEl.createEl("p",{text:Qf.properties.labelMigrationWarningDesc()}),i.addButton("mod-cta",Qf.dialogue.buttonSave(),(function(e){i.onSubmit(e)})),i.addCancelButton(),i.scope.register([],"Enter",i.onSubmit.bind(i)),i}return f(t,e),t.prototype.onSubmit=function(e){e.preventDefault(),this.close(),this.shouldRestoreSelection=!1,this.line.renderProperty(this.line.entry,!0,!0),this.line.focusValue()},t}(XA),rO=[["alphabetical","alphabeticalReverse"],["byModifiedTime","byModifiedTimeReverse"],["byCreatedTime","byCreatedTimeReverse"]],oO={alphabetical:Qf.plugins.fileExplorer.labelSortAToZ,alphabeticalReverse:Qf.plugins.fileExplorer.labelSortZToA,byModifiedTime:Qf.plugins.fileExplorer.labelSortNewToOld,byModifiedTimeReverse:Qf.plugins.fileExplorer.labelSortOldToNew,byCreatedTime:Qf.plugins.fileExplorer.labelSortCreatedNewToOld,byCreatedTimeReverse:Qf.plugins.fileExplorer.labelSortCreatedOldToNew},aO={alphabetical:function(e,t){return xm(e.basename,t.basename)},alphabeticalReverse:function(e,t){return-aO.alphabetical(e,t)},byModifiedTime:function(e,t){return t.stat.mtime-e.stat.mtime},byModifiedTimeReverse:function(e,t){return-aO.byModifiedTime(e,t)},byCreatedTime:function(e,t){return t.stat.ctime-e.stat.ctime},byCreatedTimeReverse:function(e,t){return-aO.byCreatedTime(e,t)}};function sO(e){return aO.hasOwnProperty(e)||(e="alphabetical"),aO[e]}var lO=/\r?\n\r?\n/y;function cO(e,t,n,i,r){!function(e,t,n,i){for(var r=e,o=0;o<n.length;o++){var a=n[o],s=a[0];if(s>=t)break;var l=a[1];l<e||(s<e&&(s=e),l>t&&(l=t),s>r&&i(!1,r,s),i(!0,s,l),r=l)}r<t&&i(!1,r,t)}(n,i,r,(function(n,i,r){var o=t.substring(i,r);n?e.createSpan({cls:"search-result-file-matched-text",text:o}):e.createSpan({text:o})}))}var uO=function(){function e(e,t,n,i,r,o){void 0===o&&(o=!0);var a=this;this.onMatchRender=null,this.collapsible=!0,this.collapsed=!1,this.extraContext=!0,this.showTitle=!0,this.separateMatches=!1,this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.vChildren=new eI(this),this.pusherEl=uI(),this.app=e,this.parentDom=t,this.file=n,this.result=i,this.content=r,this.showTitle=o;var s=this.el=this.containerEl=createDiv("tree-item search-result");if(o){var l=s.createDiv("tree-item-self search-result-file-title is-clickable"),c=this.collapseEl=l.createDiv("tree-item-icon collapse-icon");mx(c,"right-triangle"),c.style.visibility="hidden",Tc(l),l.onClickEvent(this.onResultClick.bind(this)),l.addEventListener("mouseover",(function(e){return a.onResultMouseover(e,l)})),l.addEventListener("contextmenu",this.onResultContextMenu.bind(this)),c.addEventListener("click",this.onCollapseClick.bind(this));var u=l.createDiv("tree-item-inner");if(i.filename||i.filepath){var h=void 0,d=void 0;if(i.filepath){if(h=n.path,d=i.filepath,i.filename){for(var p=n.path.length-n.name.length,f=0,v=i.filename;f<v.length;f++){var g=v[f];d.push([g[0]+p,g[1]+p])}d=PL(d)}}else h=n.name,d=i.filename,"md"===n.extension&&(0===d.length||d.last()[1]<=n.basename.length)&&(h=n.basename);cO(u,h,0,h.length,d)}else u.setText("md"===n.extension?n.basename:n.name);var y=tP(m(m({},i),{filename:void 0}));y>0&&l.createDiv("tree-item-flair-outer").createSpan("tree-item-flair").setText(String(y));var b=this.app.dragManager;b.handleDrag(l,(function(e){return b.dragFile(e,a.file)}))}this.childrenEl=s.createDiv("search-result-file-matches")}return e.prototype.renderContentMatches=function(){var e=this,t=this,n=t.app,i=t.file,r=t.result,o=t.content,a=t.collapsible,s=t.extraContext,l=t.separateMatches,c=t.collapseEl;this.vChildren.clear(),this.showTitle&&(c.style.visibility="hidden");var u=!1,h=function(t,n,i,r){t.sort((function(e,t){return e[0]-t[0]})),u=!0;var o=0,a=function(a,s,c,u){var h=o+1;if(!l)for(;h<t.length;){var d=t[h];if(d[0]>=s)break;if(d[1]>s){s=d[1],h++;break}h++}var p=t.slice(o,h),f=new dO(e,n,i,a,s,p,r);f.onMatchRender=e.onMatchRender,f.render(c,u),e.vChildren.addChild(f),o=h};if(s)for(;o<t.length;){h=t[o];var c=e.getMatchExtraPositions(n,h,i);a(c[0],c[1])}else for(;o<t.length;){var h=t[o],d=GL(n,h);a(d[0],d[1],d[2],d[3])}};if("canvas"===i.extension&&o)try{for(var d=JSON.parse(o).nodes.filter((function(e){return"text"===e.type})).sort((function(e,t){return e.y-t.y||e.x-t.x})),p=n.internalPlugins.getEnabledPluginById("canvas").index.get(i),f=function(e){var t=e.id,n="canvas-".concat(t);if(r.hasOwnProperty(n)){var i=r[n];i&&i.length>0&&h(i,e.text,p.caches[t]||{},(function(e){e.match.nodeId=t}))}},m=0,v=d;m<v.length;m++){f(v[m])}}catch(e){}else{var g=this.app.metadataCache.getFileCache(i)||{};r.properties&&r.properties.length>0&&function(t,n,i){u=!0;for(var r=function(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];t.hasOwnProperty(r.key)||(t[r.key]=[]),t[r.key].push(r)}return t}(t),o=0,a=Object.keys(r);o<a.length;o++){var s=r[a[o]],l=new hO(e,i,s);l.onMatchRender=e.onMatchRender,l.render(),e.vChildren.addChild(l)}}(r.properties,0,g),r.content&&r.content.length>0&&h(r.content,o,g)}this.showTitle&&a&&u&&(c.style.visibility=""),this.invalidate()},e.prototype.getMatchExtraPositions=function(e,t,n){var i=n.listItems,r=n.sections;if(i){var o=i[u=US(i,t[0])];if(o&&t[0]>=o.position.start.offset&&t[1]<=o.position.end.offset){var a=o,s=u+1,l=new Set;for(l.add(a.position.start.line);s<i.length;){var c=i[s];if(!l.has(c.parent))break;l.add(c.position.start.line),s++,a=c}return[o.position.start.offset-o.position.start.col,a.position.end.offset]}}if(r){var u,h=r[u=US(r,t[0])];if(h&&t[0]>=h.position.start.offset&&t[1]<=h.position.end.offset)return[h.position.start.offset,h.position.end.offset]}for(var d=t[0],p=d-1e3;d>0&&d>p&&10!==e.charCodeAt(d-1);)d--;for(var f=t[0],m=f+1e3;f<e.length&&f<m&&10!==e.charCodeAt(f);)f++;var v=e.substring(d,f).match(Im);if(v&&v[2]){for(var g=f;g<e.length;){var y=e.indexOf("\n",g+1);-1===y&&(y=e.length);var b=e.substring(g+1,y).match(Im);if(b&&b[1].length<=v[1].length)break;g=y}return[d,g]}for(var w=d;w>0&&w>p&&(lO.lastIndex=w,!lO.test(e));)w--;for(;10===e.charCodeAt(w)&&w<d;)w++;for(var k=f;k<e.length&&k<m&&(lO.lastIndex=k,!lO.test(e));)k++;return[w,k]},e.prototype.onCollapseClick=function(e){e.preventDefault(),Ak.isModifier(e,"Mod")?this.parentDom.setCollapseAll(!this.collapsed):this.setCollapse(!this.collapsed,!0)},e.prototype.onResultClick=function(e){e.instanceOf(MouseEvent)&&0!==e.button&&1!==e.button||(e.defaultPrevented||(e.preventDefault(),this.app.workspace.getLeaf(Ak.isModEvent(e)).openFile(this.file,{eState:{match:{content:this.content,matches:this.result.content||[]},propertyMatches:this.result.properties}})))},e.prototype.onResultMouseover=function(e,t,n){if(!e.defaultPrevented&&xc(e,t)){e.preventDefault();var i=this.file.path,r=null;if(n&&n.length>0)r={scroll:ac(this.content,n[0][0])};this.app.workspace.trigger("hover-link",{event:e,source:"search",hoverParent:this.parentDom,targetEl:t,linktext:i,state:r})}},e.prototype.onResultContextMenu=function(e){var t=(new PA).addSections(["title","open","action","view","info","","danger"]);this.app.workspace.handleLinkContextMenu(t,this.file.path,"")&&(e.preventDefault(),t.setParentElement(this.containerEl).showAtMouseEvent(e))},e.prototype.setCollapse=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return this.collapsed===e?[2]:(this.collapsed=e,i=(n=this).containerEl,r=n.childrenEl,LD(i,e),[4,El(r,i,e,t)]);case 1:return o.sent(),this.invalidate(),[2]}}))}))},e.prototype.setCollapsible=function(e){this.collapsible!==e&&(this.collapsible=e,this.collapseEl.style.visibility=e?"":"hidden")},e.prototype.setExtraContext=function(e){this.extraContext!==e&&(this.extraContext=e,this.renderContentMatches())},e.prototype.invalidate=function(){this.parentDom.infinityScroll.invalidate(this,!0)},e}(),hO=function(){function e(e,t,n){this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.onMatchRender=null,this.parentDom=e,this.cache=t,this.matches=n;var i=this.el=createDiv("search-result-file-match tappable");Tc(i),i.onClickEvent(this.onResultClick.bind(this)),i.addEventListener("mouseover",this.onFocusEnter.bind(this)),i.addEventListener("mouseout",this.onFocusExit.bind(this)),i.addEventListener("contextmenu",(function(t){return e.onResultContextMenu(t)}))}return e.prototype.onResultClick=function(e){if(!(e.instanceOf(MouseEvent)&&0!==e.button&&1!==e.button||e.defaultPrevented)){e.preventDefault();var t={propertyMatches:this.matches},n=this.parentDom,i=n.app,r=n.file;i.workspace.getLeaf(Ak.isModEvent(e)).openFile(r,{eState:t})}},e.prototype.onFocusExit=function(e){e&&e.instanceOf(MouseEvent)&&!xc(e,this.el)||this.el.classList.contains("has-focus")},e.prototype.onFocusEnter=function(e){!e||!e.instanceOf(MouseEvent)||xc(e,this.el)},e.prototype.render=function(){var e,t=this,n=t.el,i=t.parentDom,r=t.matches;n.empty();var o=r[0].key;n.createSpan({text:o+": "});var a=(null!==(e=this.cache.frontmatter)&&void 0!==e?e:{})[o];if(Array.isArray(a))for(var s=function(e){var t=a[e];if(!t)return"continue";var i=String(t),o=r.filter((function(t){var n;return t.pos&&(null===(n=t.subkey)||void 0===n?void 0:n[0])===e})),s=PL(o.map((function(e){return e.pos})));cO(n,i,0,i.length,s),n.createSpan({text:" "})},l=0;l<a.length;l++)s(l);else{var c=String(a),u=PL(r.map((function(e){return e.pos})).filter(Boolean));cO(n,c,0,c.length,u)}i.parentDom.infinityScroll.invalidate(this)},e}(),dO=function(){function e(e,t,n,i,r,o,a){var s=this;this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.onMatchRender=null,this.parentDom=e,this.content=t,this.cache=n,this.start=i,this.end=r,this.matches=o,this.mutateEState=a;var l=this.el=createDiv("search-result-file-match tappable");this.showMoreBeforeEl=l.createDiv("search-result-hover-button mod-top",(function(e){mx(e,"lucide-chevron-up"),Rx(e,Qf.plugins.search.labelMoreContext(),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),s.showMoreBefore()}))})),this.showMoreAfterEl=l.createDiv("search-result-hover-button mod-bottom",(function(e){mx(e,"lucide-chevron-down"),Rx(e,Qf.plugins.search.labelMoreContext(),{placement:"bottom"}),e.addEventListener("click",(function(e){e.preventDefault(),s.showMoreAfter()}))})),this.showMoreBeforeEl.hide(),this.showMoreAfterEl.hide(),Tc(l),l.onClickEvent(this.onResultClick.bind(this)),l.addEventListener("mouseover",this.onFocusEnter.bind(this)),l.addEventListener("mouseout",this.onFocusExit.bind(this)),l.addEventListener("contextmenu",(function(t){return e.onResultContextMenu(t)}))}return e.prototype.onResultClick=function(e){var t;if(!(e.instanceOf(MouseEvent)&&0!==e.button&&1!==e.button||e.defaultPrevented)){e.preventDefault();var n={match:{content:this.content,matches:this.matches}};null===(t=this.mutateEState)||void 0===t||t.call(this,n);var i=this.parentDom,r=i.app,o=i.file;r.workspace.getLeaf(Ak.isModEvent(e)).openFile(o,{eState:n})}},e.prototype.onFocusExit=function(e){e&&e.instanceOf(MouseEvent)&&!xc(e,this.el)||this.el.classList.contains("has-focus")||(this.showMoreBeforeEl.hide(),this.showMoreAfterEl.hide())},e.prototype.onFocusEnter=function(e){if(e&&e.instanceOf(MouseEvent)){if(!xc(e,this.el))return;this.parentDom.onResultMouseover(e,this.el,this.matches)}this.toggleShowMoreContextButtons()},e.prototype.toggleShowMoreContextButtons=function(){this.showMoreBeforeEl.toggle(this.start>0),this.showMoreAfterEl.toggle(this.end<this.content.length)},e.prototype.showMoreBefore=function(){for(var e=this.start;e>0;){e--;var t=this.getPrevPos(e);if(t<e){e=t;break}}this.start=e,this.render(),this.onFocusEnter()},e.prototype.showMoreAfter=function(){for(var e=this.end,t=this.content.length;e<t;){e++;var n=this.getNextPos(e);if(n>e){e=n;break}}this.end=e,this.render(),this.onFocusEnter()},e.prototype.getPrevPos=function(e){var t=this.content,n=this.cache,i=n.listItems,r=n.sections;if(i){var o=i[US(i,e,!0)];if(o){var a=o.position,s=a.start,l=a.end;if(s.offset-s.col<=e&&l.offset>=e)return s.offset-s.col}}if(r){var c=r[US(r,e,!0)];if(c&&"list"!==c.type){var u=c.position;s=u.start,l=u.end;if(s.offset-s.col<=e&&l.offset>=e)return s.offset-s.col}}for(var h=e;h>0&&10!==t.charCodeAt(h-1);)h--;return h},e.prototype.getNextPos=function(e){var t=this.content,n=this.cache,i=n.listItems,r=n.sections;if(i){var o=i[p=US(i,e,!0)];if(o){var a=o.position,s=a.start,l=a.end;if(s.offset-s.col<=e&&l.offset>=e){var c=o,u=p+1,h=new Set;for(h.add(c.position.start.line);u<i.length;){var d=i[u];if(!h.has(d.parent))break;h.add(d.position.start.line),u++,c=d}return c.position.end.offset}}}if(r){var p,f=r[p=US(r,e,!0)];if(f&&"list"!==f.type){var m=f.position;s=m.start,l=m.end;if(s.offset-s.col<=e&&l.offset>=e)return l.offset}}for(var v=e;v<t.length&&10!==t.charCodeAt(v);)v++;return v},e.prototype.render=function(e,t){var n=this,i=n.el,r=n.content,o=n.parentDom,a=n.matches,s=n.onMatchRender;i.empty(),e&&i.appendText("..."),cO(i,r,this.start,this.end,a),i.appendChild(this.showMoreBeforeEl),i.appendChild(this.showMoreAfterEl),t&&i.appendText("..."),s&&s(a[0],i),o.parentDom.infinityScroll.invalidate(this)},e}(),pO=function(){function e(e,t,n,i){this.changed=mc(this.onChange.bind(this),0),this.infinityScroll=null,this.vChildren=new eI(this),this.resultDomLookup=new Map,this.focusedItem=null,this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.pusherEl=uI(),this.emptyStateEl=null,this.showingEmptyState=!1,this.working=!1,this.sortOrder="alphabetical",this.collapseAll=!1,this.extraContext=!1,this.app=e,this.el=t,this.emptyStateEl=createDiv({cls:"search-empty-state",text:n}),this.childrenEl=this.el.createDiv("search-results-children");var r=this.infinityScroll=new dI(i||this.el);r.rootEl=this,r.setWidth=!1}return e.prototype.startLoader=function(){this.working=!0,this.el.addClass("is-loading"),this.onChange()},e.prototype.stopLoader=function(){this.working=!1,this.el.removeClass("is-loading"),this.onChange()},e.prototype.onChange=function(){var e=this,t=e.sortOrder,n=e.vChildren,i=e.emptyStateEl,r=e.infinityScroll,o=sO(t);n.sort((function(e,t){return o(e.file,t.file)})),n.hasChildren()||this.working?i.detach():this.el.appendChild(i),r.queueCompute()},e.prototype.emptyResults=function(){this.vChildren.clear(),this.resultDomLookup.clear(),this.changed()},e.prototype.getResult=function(e){return this.resultDomLookup.get(e)},e.prototype.removeResult=function(e){var t=this.vChildren,n=this.resultDomLookup,i=n.get(e);return i&&(t.removeChild(i),n.delete(e),this.changed()),i},e.prototype.addResult=function(e,t,n,i){if(void 0===i&&(i=!0),e){var r=this.vChildren,o=this.resultDomLookup,a=this.removeResult(e),s=new uO(this.app,this,e,t,n,i);return a?s.setCollapse(a.collapsed,!1):s.setCollapse(this.collapseAll,!1),s.extraContext=this.extraContext,r.addChild(s),o.set(e,s),this.changed(),s}},e.prototype.toggle=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,Ml(this.el,e,t)];case 1:return n.sent(),e||this.infinityScroll.invalidateAll(),[2]}}))}))},e.prototype.setCollapseAll=function(e){this.collapseAll=e;for(var t=0,n=this.vChildren.children;t<n.length;t++){n[t].setCollapse(e,!1)}this.infinityScroll.invalidateAll()},e.prototype.setExtraContext=function(e){this.extraContext=e;for(var t=0,n=this.vChildren.children;t<n.length;t++){n[t].setExtraContext(e)}this.infinityScroll.invalidateAll()},e.prototype.onResize=function(){this.infinityScroll.onResize()},e.prototype.getFiles=function(){return this.vChildren.children.map((function(e){return e.file}))},e.prototype.getMatchCount=function(){for(var e=0,t=0,n=this.vChildren.children;t<n.length;t++){e+=tP(n[t].result)}return e},e.prototype.setFocusedItem=function(e){var t;null===(t=this.focusedItem)||void 0===t||t.el.removeClass("has-focus"),this.focusedItem instanceof dO&&this.focusedItem.onFocusExit(),this.focusedItem=e,e&&(e.el.addClass("has-focus"),this.infinityScroll.scrollIntoView(e),e instanceof dO&&e.onFocusEnter())},e.prototype.changeFocusedItem=function(e){if(null!==this.focusedItem){var t="forwards"===e?aI(this.focusedItem,!0):lI(this.focusedItem,!0);t&&this.setFocusedItem(t)}else{var n="forwards"===e?this.vChildren.first():cI(this,!0);this.setFocusedItem(n)}},e}(),fO=function(e){function t(t,n){var i=e.call(this)||this;return i.queue=null,i.app=t,i.dom=n,i}return f(t,e),t.prototype.onload=function(){var e=this.app.vault;this.registerEvent(e.on("rename",this.onFileChanged,this)),this.registerEvent(e.on("delete",this.onFileDeleted,this)),this.registerEvent(this.app.metadataCache.on("changed",this.onFileChanged,this))},t.prototype.onunload=function(){this.stop()},t.prototype.stop=function(){var e=this.queue;e&&(e.cancel(),this.queue=null)},t.prototype.start=function(){var e=this,t=this.app,n=this.dom,i=this.queue=new pL({onStart:function(){n.startLoader()},onStop:function(){n.stopLoader()},onCancel:function(){e.queue=null}}),r=t.vault.getFiles();return r.sort(sO(n.sortOrder)),i.addList(r),i},t.prototype.onFileChanged=function(e){var t=this.queue;t&&t.add(e)},t.prototype.onFileDeleted=function(e){var t=this.queue;t&&t.remove(e),this.dom.removeResult(e)},t}(xA),mO=function(){function e(e,t,n,i){var r=this;this.scope=null,this.searchContainerEl=null,this.searchInputEl=null,this.lastQuery=null,this.highlightRanges=null,this.selectedRange=-1,this.lastText=null,this.renderer=t,this.onClose=i;var o=this.scope=new Tk(e.scope),a=(this.searchContainerEl=n.createDiv({cls:"document-search-container",prepend:!0})).createDiv("document-search"),s=a.createDiv("search-input-container document-search-input"),l=this.searchInputEl=s.createEl("input",{type:"text",placeholder:Qf.editor.search.placeholderFind()});this.countEl=s.createDiv("document-search-count"),l.addEventListener("input",mc(this.onSearchInput.bind(this),150,!0));var c=a.createDiv({cls:"document-search-buttons",type:"text"});c.createEl("button",{cls:"clickable-icon document-search-button"},(function(e){mx(e,"lucide-arrow-up"),Rx(e,Qf.editor.search.labelPrevious()+"\n"+sA(oA(["Shift"],"F3")),{placement:"top"}),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){e.preventDefault(),r.findPrevious()}))})),c.createEl("button",{cls:"clickable-icon document-search-button"},(function(e){mx(e,"lucide-arrow-down"),Rx(e,Qf.editor.search.labelNext()+"\n"+sA(oA([],"F3")),{placement:"top"}),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){e.preventDefault(),r.findNext()}))})),c.createDiv("clickable-icon document-search-close-button",(function(e){mx(e,"lucide-x"),Rx(e,Qf.editor.search.labelExitSearch(),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.close()}))})),o.register([],"F3",this.findNext.bind(this)),o.register(["Mod"],"G",this.findNext.bind(this)),o.register(["Shift"],"F3",this.findPrevious.bind(this)),o.register(["Mod","Shift"],"G",this.findPrevious.bind(this)),o.register([],"Enter",this.onEnter.bind(this)),o.register(["Shift"],"Enter",this.onShiftEnter.bind(this)),o.register([],"Escape",this.close.bind(this));var u=activeWindow.getSelection().toString();u&&(l.value=u),this.updateQuery(),this.updateCount()}return e.prototype.close=function(){var e=this.searchContainerEl,t=this.searchInputEl;e.detach(),t.value="",t.removeClass("mod-no-match"),this.updateQuery(),this.onClose()},e.prototype.updateQuery=function(){var e=this.getQuery().toLowerCase(),t=this.renderer,n=this.searchInputEl,i=t.lastText;e||(i=null);var r=this.lastText!==i,o=this.lastQuery!==e;if(r&&(this.lastText=i),o&&(this.lastQuery=e,this.selectedRange=-1),r||o){n.removeClass("mod-no-match");for(var a=0,s=t.sections;a<s.length;a++){(h=s[a]).highlightRanges=null}if(t.queueRender(),e){for(var l=[],c=0,u=t.sections;c<u.length;c++){var h,d=[];Rw((h=u[c]).el,d);for(var p=d.map((function(e){return e.textContent})).join("").toLowerCase(),f=[],m=0;-1!==(m=p.indexOf(e,m));){var v=m+e.length,g={section:h,start:m,end:v,active:!1};f.push(g),l.push(g),m=v}f.length>0&&(h.highlightRanges=f)}this.highlightRanges=l,n.toggleClass("mod-no-match",0===l.length)}else this.highlightRanges=null}},e.prototype.updateCount=function(){var e,t=this.selectedRange+1,n=(null===(e=this.highlightRanges)||void 0===e?void 0:e.length)||0;this.countEl.toggle(!!this.getQuery()),this.countEl.setText("".concat(t," / ").concat(n))},e.prototype.onSearchInput=function(){this.updateQuery(),this.selectRange(0),this.updateCount()},e.prototype.findNext=function(){this.selectRange(this.selectedRange+1),this.updateCount()},e.prototype.findPrevious=function(){this.selectRange(this.selectedRange-1),this.updateCount()},e.prototype.selectRange=function(e){var t=this.highlightRanges;if(t&&0!==t.length){e>t.length-1&&(e=0),e<0&&(e=t.length-1);var n=t[this.selectedRange];n&&(n.active=!1),this.selectedRange=e;var i=t[this.selectedRange];i.active=!0,this.renderer.selectRange(i)}},e.prototype.getQuery=function(){return this.searchInputEl.value},e.prototype.onEnter=function(e){!e.isComposing&&this.searchInputEl.isActiveElement()&&this.findNext()},e.prototype.onShiftEnter=function(e){!e.isComposing&&this.searchInputEl.isActiveElement()&&this.findPrevious()},e}();var vO=Nw("/lib/pdfjs/pdf.min.mjs",{type:"module",after:function(){window.pdfjsLib.GlobalWorkerOptions.workerSrc="/lib/pdfjs/pdf.worker.min.mjs",Xl(window,"pdfjsLib"),Xl(pdfjsLib.GlobalWorkerOptions,"workerSrc")}}),gO=Nw("/lib/pdfjs/pdf.viewer.min.mjs",{type:"module",after:function(){Xl(window,"pdfjsViewer")}});function yO(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,vO.promise];case 1:return e.sent(),[2,window.pdfjsLib]}}))}))}function bO(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,vO.promise];case 1:return e.sent(),[4,gO.promise];case 2:return e.sent(),[2,window.pdfjsViewer]}}))}))}var wO=Nw("/lib/codemirror/modes.min.js"),kO=Nw("/lib/mermaid.min.js",{after:function(){mermaid.initialize({startOnLoad:!1,securityLevel:"strict",themeVariables:{fontFamily:"var(--font-mermaid)"},flowchart:{useMaxWidth:!1},sequence:{useMaxWidth:!1},gantt:{useMaxWidth:!0,axisFormatter:[["%Y-%m-%d",function(e){return 1===e.getDay()}]]},journey:{useMaxWidth:!0},class:{useMaxWidth:!0},git:{useMaxWidth:!1},state:{useMaxWidth:!0},er:{useMaxWidth:!1},pie:{useMaxWidth:!0}})}});function CO(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,kO.promise];case 1:return e.sent(),[2,mermaid]}}))}))}var MO=Nw("/lib/prism.min.js");function EO(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,MO.promise];case 1:return e.sent(),[2,Prism]}}))}))}var SO=Nw("/lib/mathjax/tex-chtml-full.js",{before:function(){window.MathJax={tex:{inlineMath:[],displayMath:[],processEscapes:!1,processEnvironments:!1,processRefs:!1},startup:{typeset:!1},options:{enableMenu:!1,menuOptions:{settings:{renderer:"CHTML"}},renderActions:{assistiveMml:[]},safeOptions:{safeProtocols:{http:!0,https:!0,file:!0,javascript:!1,data:!1}}}},window.publish&&delete window.MathJax.options.renderActions,localStorage.removeItem("MathJax-Menu-Settings")}});function xO(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,SO.promise];case 1:return e.sent(),[2]}}))}))}function TO(e,t){return MathJax.tex2chtml(e,{display:t})}var DO=null,AO=0,LO=null,PO=function(){var e=MathJax.chtmlStylesheet();LO&&e===LO||(LO&&LO.detach(),LO=e,document.head.appendChild(e)),LO.dataset.change="1"===LO.dataset.change?"2":"1",DO.resolve(),DO=null};function IO(){return DO||(DO=uL()),clearTimeout(AO),AO=window.setTimeout(PO,100),DO.promise}var FO=/^(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com|youtu\.be)(?:\/(?:[\w\-]+\?(?:.*?\&)*v=|embed\/|v\/)?)([\w\-]+)(?:\??&?(?:t|start)=([0-9]+))?(?:\S+)?$/,OO=/^(?:https?:\/\/)?(?:mobile\.)?(?:twitter|x)\.com\/.+\/(\d+)/;function BO(e){if(!e||"string"!=typeof e)return null;var t;if(t=e.match(FO))return e="https://www.youtube.com/embed/"+t[1],t[2]&&(e+="?start="+t[2]),e;if(t=e.match(OO)){var n=document.body.hasClass("theme-dark");return"https://platform.twitter.com/embed/Tweet.html?dnt=true&theme=".concat(n?"dark":"light","&id=").concat(t[1])}return null}function NO(e){var t=createEl("iframe","external-embed mod-receives-events");return t.setAttr("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals allow-popups"),t.setAttr("allow","fullscreen"),t.setAttr("frameborder","0"),t.src=e,e.contains("platform.twitter.com")&&(t.setAttr("scrolling","no"),function(e,t){e.addEventListener("framemessage",(function(e){e.detail&&t(e.detail)})),HO(e.win),e.onWindowMigrated((function(){return HO(e.win)}))}(t,(function(e){var n=e.data;if(n){var i=n["twttr.embed"];if(i&&"twttr.private.resize"===i.method){var r=i.params[0].height;Number.isNumber(r)&&(t.style.height=String(Math.min(1e3,r))+"px")}}}))),t}var RO=new WeakSet;function HO(e){RO.has(e)||(RO.add(e),e.addEventListener("message",(function(t){for(var n=0,i=e.document.body.findAll("iframe");n<i.length;n++){var r=i[n];if(r.contentWindow===t.source)return void r.dispatchEvent(new CustomEvent("framemessage",{bubbles:!1,detail:t}))}})))}var VO=function(){function e(){this.map=new WeakMap}return e.prototype.get=function(e){return this.map.get(e)},e.prototype.set=function(e,t){return this.map.set(e,t),this},e.prototype.has=function(e){return this.map.has(e)},e.prototype.delete=function(e){return this.map.delete(e)},e}(),zO=0,qO=function(){function e(){this._="_weakmap_"+zO++}return e.prototype.get=function(e){return this.has(e)?e[this._]:void 0},e.prototype.set=function(e,t){return Object.defineProperty(e,this._,{configurable:!0,value:t}),this},e.prototype.has=function(e){return Object.hasOwnProperty.call(e,this._)},e.prototype.delete=function(e){return this.has(e)&&delete e[this._]},e}();function UO(){return window.WeakMap?new VO:new qO}var _O=function(){function e(e){this.promise=null,this.worker=e,this.worker.onmessage=this.onReceiveMessageFromWorker.bind(this)}return e.prototype.onReceiveMessageFromWorker=function(e){if(this.promise){var t=this.promise;this.promise=null,t.resolve(e.data)}},e.prototype.submit=function(e,t){return this.promise?null:(this.promise=uL(),this.worker.postMessage(e,t),this.promise.promise)},e}();function WO(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,ajaxPromise({url:e})];case 1:return n=i.sent(),[2,new Worker(window.URL.createObjectURL(new Blob([n])),t)]}}))}))}function jO(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){if(jl)return[2,WO(e,t)];try{return[2,new Worker(e,t)]}catch(t){return[2,WO(e)]}return[2]}))}))}var GO=function(e){function t(t){var n=e.call(this)||this;return n.containerEl=t,n}return f(t,e),t}(xA),KO=function(){function e(e){this.rendered=!1,this.height=0,this.computed=!1,this.lines=0,this.lineStart=0,this.lineEnd=0,this.used=!0,this.highlightRanges=null,this.level=0,this.headingCollapsed=!1,this.shown=!0,this.usesFrontMatter=!1,this.html=e||"",this.el=createDiv(),null===e&&(this.rendered=!0)}return e.prototype.render=function(){if(!this.rendered){var e=qT(this.html);this.el.appendChild(e);var t=this.el.firstChild;t&&t.nodeType===Node.ELEMENT_NODE&&this.el.addClass("el-"+t.tagName.toLowerCase()),this.rendered=!0,this.computed=!1}},e.prototype.resetCompute=function(){this.computed=!1;var e=this.highlightRanges;if(e)for(var t=0,n=e;t<n.length;t++){n[t].rects=null}},e.prototype.setCollapsed=function(e){this.headingCollapsed=e,LD(this.el,e)},e}();function YO(e,t){var n=e.firstChild;n&&n.instanceOf(HTMLHeadingElement)&&t(n)}function ZO(e,t){for(var n=0,i=e.findAll("li");n<i.length;n++){var r=i[n],o=r.findAll("ul, ol");o&&o.length>0&&t(r)}}var XO=null,$O=!0,QO=!0,JO=!0,eB=function(){function e(t,n,i,r,o){void 0===o&&(o=!0);var a=this;this.previewEl=null,this.sizerEl=null,this.pusherEl=null,this.header=null,this.footer=null,this.cssClasses=null,this.sections=[],this.asyncSections=[],this.recycledSections=[],this.lastText=null,this.text="",this.frontmatter=null,this.queued=null,this.rendered=null,this.lastRender=0,this.lastScroll=0,this.viewportHeight=0,this.renderedWidth=0,this.renderExtra=1,this.renderExtraMinPx=500,this.addBottomPadding=!1,this.topSpace=0,this.parsing=!1,this.scrolling=!1,this.owner=t,this.workerPath=r;var s=this.previewEl=i.createDiv("markdown-preview-view markdown-rendered"),l=this.sizerEl=s.createDiv("markdown-preview-sizer markdown-preview-section"),c=this.pusherEl=createDiv("markdown-preview-pusher");c.style.width="1px",c.style.height="0.1px",e.registerDomEvents(l,n,this.handleDetached.bind(this)),l.on("click","a.footnote-link",this.onFootnoteLinkClick.bind(this)),l.on("click",".task-list-item-checkbox",this.onCheckboxClick.bind(this)),l.on("click",".heading-collapse-indicator",this.onHeadingCollapseClick.bind(this)),l.on("click","li > .list-collapse-indicator",this.onListCollapseClick.bind(this)),s.addEventListener("scroll",this.onScroll.bind(this),Aw),o&&s.onNodeInserted((function(){return a.queueRender()})),vc((function(){return a.onResize()}))}return e.prototype.set=function(e){this.text=e,this.queueRender()},e.prototype.rerender=function(e){if(this.lastText=null,e)for(var t=this.header,n=this.footer,i=0,r=this.sections;i<r.length;i++){var o=r[i];o!==t&&o!==n&&(o.rendered=!1,o.el.empty())}this.queueRender()},e.prototype.clear=function(){this.sections=[],this.asyncSections=[],this.recycledSections=[],this.rendered=[],this.sizerEl.empty(),this.text="",this.lastText=null,this.lastScroll=0,this.previewEl.scrollTop=0,this.renderedWidth=0,this.owner.onRenderComplete(),this.cleanupParentComponents(),this.queueRender()},e.prototype.belongsToMe=function(t){return e.belongsToMe(t,this.previewEl,this.handleDetached.bind(this))},e.prototype.handleDetached=function(e){return this.sections.some((function(t){return t.el===e}))},e.prototype.getSectionForElement=function(e){for(var t=0,n=this.sections;t<n.length;t++){var i=n[t];if(i.el.contains(e))return i}return null},e.prototype.getSectionInfo=function(e){if(!this.belongsToMe(e))return null;var t=this.getSectionForElement(e);return t?{text:this.lastText||"",lineStart:t.lineStart,lineEnd:t.lineEnd}:null},e.prototype.getInternalLinkHref=function(e){var t=e.getAttr("data-href")||e.getAttr("href");return t&&this.belongsToMe(e)?t:null},e.prototype.onFootnoteLinkClick=function(e,t){if(0===e.button&&this.belongsToMe(t)){e.preventDefault();var n=t.getAttr("href");if(n&&n.startsWith("#")){for(var i="[data-footnote-id="+(n=n.substr(1))+"]",r=null,o=null,a=0,s=this.sections;a<s.length;a++){var l=s[a];if(o=l.el.find(i)){r=l;break}}if(!o||!r)return;this.showSection(r),this.applyScrollSection(r),this.highlightEl(o),this.updateVirtualDisplay(),o.scrollIntoView({block:"center"}),this.owner.onScroll()}}},e.prototype.onCheckboxClick=function(e,t){if(this.belongsToMe(t)){var n=parseInt(t.getAttribute("data-line"));if(!(n<0||isNaN(n))){var i=this.getSectionContainer(t);if(i){var r=i.lineStart+n;this.owner.onCheckboxClick(e,t,r)}}}},e.prototype.onHeadingCollapseClick=function(e,t){if(0===e.button&&!e.defaultPrevented){var n=t.parentNode;if(n&&n.instanceOf(HTMLHeadingElement)&&this.belongsToMe(n)){var i=this.getSectionContainer(n);i&&(i.setCollapsed(!i.headingCollapsed),this.previewEl.win.getSelection().removeAllRanges(),this.queueRender(),this.owner.onFoldChange())}}},e.prototype.setListCollapse=function(e,t){if(e.findAll("ul, ol")){LD(e,t);var n=this.getSectionContainer(e);n&&n.resetCompute()}},e.prototype.onListCollapseClick=function(e,t){if(0===e.button&&!e.defaultPrevented){var n=t.parentNode;n&&n.instanceOf(HTMLLIElement)&&this.belongsToMe(n)&&(e.preventDefault(),this.setListCollapse(n,!n.hasClass("is-collapsed")),this.queueRender(),this.owner.onFoldChange())}},e.prototype.queueRender=function(){this.rendered||(this.rendered=[]);var e=this.queued,t=!this.parsing;if(e)t&&!e.high&&(e.cancel(),this.queued=Sc(this.onRender.bind(this),0));else{var n=t?0:200;this.queued=Sc(this.onRender.bind(this),n)}},e.prototype.parseAsync=function(){var e=this;this.parsing||(this.parsing=!0,g(e,void 0,Promise,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),XO?[3,2]:[4,jO(this.workerPath)];case 1:e=a.sent(),XO=new _O(e),a.label=2;case 2:return XO.promise?[4,XO.promise.promise]:[3,4];case 3:return a.sent(),[3,2];case 4:return t=this.text,[4,XO.submit({parseSections:t,options:cS.globalOptions})];case 5:return n=a.sent(),i=this.previewEl,r=i.scrollTop,this.parseFinish(t,n),i.scrollTop=r,this.onRender(),this.parsing=!1,[3,7];case 6:return o=a.sent(),this.parsing=!1,console.error(o),this.parseSync(),this.queueRender(),[3,7];case 7:return[2]}}))})))},e.prototype.parseSync=function(){var e=this.text,t=function(e){var t=pS(e),n={definitions:xS(t)},i=[],r=[],o=[],a=t.children,s=yS(t);t.children=[null];for(var l=function(e){var s=a[e],l=7;"heading"===s.type&&(l=s.depth||1);var c=s.position.start.line-1,u=s.position.end.line-1;jk(s,["checklist","listItem","code"],(function(e){var t=e.position.start.line-1,n=e.data=e.data||{};(n.hProperties=n.hProperties||{})["data-line"]=String(t-c)})),t.children[0]=s;var h=bS(t,n);i.push(h),r.push([c,u]),o.push(l)},c=0;c<a.length;c++)l(c);return{sectionHtml:i,lineNumbers:r,levels:o,frontmatter:s}}(e);this.parseFinish(e,t)},e.prototype.parseFinish=function(e,t){for(var n=t.sectionHtml,i=t.lineNumbers,r=t.levels,o=t.frontmatter,a=this,s=a.recycledSections,l=a.header,c=a.footer,u=this.sections,h=new rc,d=0,p=u;d<p.length;d++){var f=p[d];f!==l&&f!==c&&(f.used=!1,h.add(f.html,f))}for(var m=[],v=0;v<n.length;v++){var g=n[v],y=null,b=h.get(g);if(b&&b.length>0)for(var w=0,k=b;w<k.length;w++){var C=k[w];if(!C.used){C.used=!0,y=C;break}}var M=i[v],E=M[0],S=M[1];y||(y=new KO(g));var x=0===v?0:E,T=v===n.length-1?S+1:i[v+1][0];y.lines=T-x,y.lineStart=E,y.lineEnd=S,y.level=r[v],m.push(y)}var D=JSON.stringify(this.frontmatter)===JSON.stringify(o);if(this.frontmatter=o,D)for(var A=0,L=m;A<L.length;A++){(R=L[A]).usesFrontMatter&&(R.rendered=!1,R.el.empty())}var P=this.cssClasses,I=this.previewEl;P&&(I.removeClasses(P),this.cssClasses=null);var F=SS(o);F&&F.length>0&&(this.cssClasses=F,I.addClasses(F)),l&&m.unshift(l),c&&m.push(c),this.sections=m;var O=this.asyncSections;this.asyncSections=[];for(var B=0,N=O;B<N.length;B++){var R=N[B];m.contains(R)&&this.asyncSections.push(R)}for(var H=0,V=u;H<V.length;H++){(R=V[H]).rendered&&!R.used&&s.push(R)}this.lastText=e,this.lastRender=Date.now()},e.prototype.onRender=function(){var t=this;this.queued=null;var n=this.previewEl;if(!!n.offsetParent&&n.offsetWidth>0){var i=n.scrollTop;this.lastText!==this.text&&(!QO||this.text.length<10240?this.parseSync():this.parseAsync());for(var r=this,o=r.sections,a=r.sizerEl,s=r.pusherEl,l=0,c=performance.now(),u=!1,h=function(n){if(n.rendered)return"continue";l++;var i=n.el;n.render();for(var r=0,o=e.recyclers;r<o.length;r++){(0,o[r])(i,d.recycledSections)}if(YO(i,(function(e){mx(e.createSpan({cls:"heading-collapse-indicator collapse-indicator collapse-icon",prepend:!0}),"right-triangle")})),ZO(i,(function(e){mx(e.createSpan({cls:"list-collapse-indicator collapse-indicator collapse-icon",prepend:!0}),"right-triangle")})),JO)for(var a=0,s=i.findAll("ul > li");a<s.length;a++){var h=s[a];h.parentElement.addClass("has-list-bullet"),h.createSpan({cls:"list-bullet",prepend:!0})}var p=[];if((d.owner.postProcess(n,p,d.frontmatter),p.length>0&&(d.asyncSections.push(n),Promise.all(p).then((function(){t.asyncSections.remove(n),n.resetCompute(),t.queueRender()}))),l%10==0)&&performance.now()-c>5)return u=!0,"break"},d=this,p=0,f=o;p<f.length;p++){if("break"===h(S=f[p]))break}for(var m=[],v=!1,g=[s],y=0,b=0,w=o;b<w.length;b++){var k=(S=w[b]).el,C=k.parentElement===a;if(!S.computed&&S.rendered?(C=!0,m.push(S),v=!0,y++):v&&(C=!0,v=!1),C&&g.push(k),y>100){u=!0;break}}a.setChildrenInPlace(g);for(var M=0,E=m;M<E.length;M++){var S=E[M];this.measureSection(S)}if(this.topSpace=s.offsetTop,this.updateShownSections(),this.updateVirtualDisplay(i),u)this.queueRender();else if(this.lastText===this.text){if(this.recycledSections=[],this.asyncSections.length>0)return;if(this.rendered)for(var x=0,T=this.rendered;x<T.length;x++){(0,T[x])()}this.rendered=null,this.owner.onRenderComplete(),this.cleanupParentComponents()}}},e.prototype.updateShownSections=function(){for(var e=7,t=0,n=this.sections;t<n.length;t++){var i=n[t];i.level>e?i.shown=!1:(i.shown=!0,e=7,i.headingCollapsed&&(e=i.level))}},e.prototype.updateVirtualDisplay=function(e){var t=this,n=t.previewEl,i=t.sizerEl,r=t.pusherEl,o=t.sections,a=n.scrollTop;if("number"==typeof e&&(a=e),!$O){var s=[];s.push(r);for(var l=0,c=o;l<c.length;l++){var u=c[l];s.push(u.el)}return i.setChildrenInPlace(s),i.style.minHeight="",r.style.marginBottom="0",void(n.scrollTop=a)}this.lastScroll=a;for(var h=n.clientHeight,d=a+h,p=Math.min(a,n.scrollHeight-h),f=Math.max(h*this.renderExtra,this.renderExtraMinPx),m=p-f,v=d+f,g=0,y=0,b=0;b<o.length;b++){(F=(u=o[b]).height)>0&&(g+=F,y++)}var w=0;y>0&&(w=g/y);var k=0,C=this.topSpace,M=[];M.push(r);var E=-1,S=-1,x=-1,T=-1,D=null,A=null,L=window.getSelection();if(L.rangeCount>0){var P=L.getRangeAt(0);!P.collapsed&&n.contains(P.startContainer)&&n.contains(P.endContainer)&&(D=P.startContainer,A=P.endContainer,(D===r||D===i&&P.startOffset<=1)&&(x=0),A===i&&P.endOffset>1&&(T=o.length-1))}for(b=0;b<o.length;b++){var I=(u=o[b]).el;if(D&&(I===D||I.contains(D))&&(x=b),A&&(I===A||I.contains(A))&&(T=b),u.shown){var F=u.height;if(u.computed)(N=C+F)>=m&&C<=v&&(-1===E&&(E=b),S=b),C=N;else C+=F,0===F&&(C+=w)}}var O=E,B=S;-1!==x&&-1!==T&&(O=Math.min(O,x),B=Math.max(B,T)),O<0&&(O=0),++B>o.length-1&&(B=o.length-1),C=this.topSpace;for(b=0;b<o.length;b++){I=(u=o[b]).el;u.shown&&O<=b&&b<=B?M.push(I):I.parentNode===i&&I.detach();var N;F=u.height;u.computed||0!==F||(F=w),u.shown||(F=0),b===O&&(k=C),C=N=C+F}k>0&&(k-=this.topSpace)<0&&(k=0),C-=this.topSpace,C=Math.max(0,C),r.style.marginBottom=k+"px",i.style.minHeight=C-1+"px",i.setChildrenInPlace(M),B!==o.length-1&&B--;for(b=O;b<=B;b++){(u=o[b]).shown&&this.measureSection(u)}n.scrollTop!==a&&(n.scrollTop=a),this.renderHighlights(E,S)},e.prototype.renderHighlights=function(e,t){var n=this.sections,i=this.sizerEl,r=i.offsetParent;if(r){var o=r.getBoundingClientRect(),a=1;r.instanceOf(HTMLElement)&&(a=r.offsetWidth/Math.round(o.width));for(var s=[],l=e;l<=t;l++)if(!(l<0||l>=n.length)){var c=n[l];if(c.shown){var u=c.highlightRanges;if(u&&0!==u.length){var h=[];Rw(c.el,h);for(var d=h.map((function(e){return e.textContent})),p=0,f=u;p<f.length;p++){var m=f[p],v=m.rects;if(!v){v=m.rects=[];var g=Vw(h,d,m.start,m.end);if(!g)continue;for(var y=g.getClientRects(),b=0;b<y.length;b++){var w=y[b];v.push({x:(w.x-o.x+r.scrollLeft)*a,y:(w.y-o.y+r.scrollTop)*a,width:w.width*a,height:w.height*a})}}for(var k=0,C=v;k<C.length;k++){var M=C[k],E=createDiv();m.active&&E.addClass("is-active"),E.style.left=M.x+"px",E.style.top=M.y+"px",E.style.width=M.width+"px",E.style.height=M.height+"px",s.push(E)}}}}}if(s.length>0){var S=createDiv("search-highlight");S.setChildrenInPlace(s),i.appendChild(S)}}},e.prototype.measureSection=function(e){if(e.rendered){var t=e.el,n=t.nextSibling,i=t.offsetTop,r=n?n.offsetTop:t.offsetTop+t.offsetHeight;e.height=r-i,e.computed=!0}},e.prototype.onRendered=function(e){this.rendered?this.rendered.push(e):e()},e.prototype.onResize=function(){var e=this,t=e.sections,n=e.previewEl,i=e.sizerEl,r=this.viewportHeight=n.clientHeight,o=n.offsetWidth;if(i.style.paddingBottom=this.addBottomPadding?Math.round(r/2)+"px":"0",o!==this.renderedWidth){this.renderedWidth=o;for(var a=0,s=t;a<s.length;a++){s[a].resetCompute()}this.queueRender()}else this.updateVirtualDisplay()},e.prototype.foldAllHeadings=function(){for(var e=function(e){YO(e.el,(function(){e.setCollapsed(!0)}))},t=0,n=this.sections;t<n.length;t++){e(n[t])}this.updateShownSections(),this.updateVirtualDisplay(),this.owner.onFoldChange()},e.prototype.unfoldAllHeadings=function(){for(var e=0,t=this.sections;e<t.length;e++){var n=t[e];n.setCollapsed(!1),n.shown=!0}this.updateVirtualDisplay(),this.owner.onFoldChange()},e.prototype.foldAllLists=function(){for(var e=this,t=0,n=this.sections;t<n.length;t++){ZO(n[t].el,(function(t){e.setListCollapse(t,!0)}))}this.queueRender(),this.owner.onFoldChange()},e.prototype.unfoldAllLists=function(){for(var e=this,t=0,n=this.sections;t<n.length;t++){ZO(n[t].el,(function(t){e.setListCollapse(t,!1)}))}this.queueRender(),this.owner.onFoldChange()},e.prototype.getFoldInfo=function(){var e=this,t=[];if(this.frontmatter)for(var n=0,i=this.sections;n<i.length;n++){var r=(h=i[n]).el.find(".metadata-container");if(r){r.hasClass("is-collapsed")&&t.push({from:h.lineStart,to:h.lineStart+h.lines});break}}for(var o=function(n){var i=a.sections[n];YO(i.el,(function(){if(i.headingCollapsed){var r=i.lineStart+i.lines;n<e.sections.length-1&&(r=e.sections[n+1].lineStart-1),t.push({from:i.lineStart,to:r})}}))},a=this,s=0;s<this.sections.length;s++)o(s);for(var l=function(e){ZO(e.el,(function(n){if(n.hasClass("is-collapsed")){var i=parseInt(n.getAttribute("data-line"));if(i<0||isNaN(i))return;var r=n.nextElementSibling;if(!r){var o=e.lineStart+e.lines-1;return void t.push({from:e.lineStart+i,to:o})}var a=parseInt(r.getAttribute("data-line"));if(a<i||isNaN(a))return;t.push({from:e.lineStart+i,to:a-1})}}))},c=0,u=this.sections;c<u.length;c++){var h;l(h=u[c])}return t.length>0?{folds:t,lines:this.text.match(/^/gm).length}:null},e.prototype.applyFoldInfo=function(e){var t=this;e&&e.lines!==this.text.match(/^/gm).length||this.onRendered((function(){var n=new Set;if(e)for(var i=0,r=e.folds;i<r.length;i++){var o=r[i];n.add(o.from)}if(t.frontmatter)for(var a=0,s=t.sections;a<s.length;a++){var l=(m=s[a]).el.find(".metadata-container");if(l){LD(l,n.has(m.lineStart));break}}for(var c=function(e){YO(e.el,(function(){e.setCollapsed(n.has(e.lineStart))}))},u=0,h=t.sections;u<h.length;u++){c(m=h[u])}for(var d=function(e){ZO(e.el,(function(t){var i=parseInt(t.getAttribute("data-line"));if(!(i<0||isNaN(i))){var r=e.lineStart+i,o=n.has(r);t.hasClass("is-collapsed")!==o&&(LD(t,o),e.resetCompute())}}))},p=0,f=t.sections;p<f.length;p++){var m;d(m=f[p])}t.queueRender()}))},e.prototype.onScroll=function(){var e=this,t=e.previewEl,n=e.lastScroll,i=e.viewportHeight,r=t.scrollTop;Math.abs(n-r)>Math.max(i*this.renderExtra,this.renderExtraMinPx)/2&&this.updateVirtualDisplay(r),this.scrolling?this.scrolling=!1:this.owner.onScroll()},e.prototype.getScroll=function(){var e=this,t=this.previewEl,n=this.sections;if(0===n.length)return null;for(var i=t.scrollTop,r=0,o=this.topSpace,a=0;a<n.length;a++){var s=n[a];if(!s.computed)return null;if(!(i>o+s.height||0===r&&0===s.lines)){var l=s.height;0===r&&(l+=o,o=0);var c=r,u=i-o,h=0;if(s.lines>0){var d=l/s.lines,p=Math.floor(u/d);c+=p,h=u/d-p}for(var f=function(t){return Ow(t,e.previewEl).top},m=f(s.el),v=void 0,g=0,y=0,b=l/s.lines,w=0,k=s.el.findAll("li");w<k.length;w++){var C=k[w];if(this.belongsToMe(C)){var M=parseInt(C.getAttribute("data-line"));if(!(M<0||isNaN(M))&&C.isShown()){if(!(f(C)-m<u)){if((y=M-g)>0){var E=v?f(v):m;b=(f(C)-E)/y}break}g=M,v=C,b=0}}}if(v)0===b&&(b=(s.el.offsetTop+s.height-f(v))/(s.lines-g)),c=r+g,h=(u-(f(v)-m))/b;return c+h}r+=s.lines,s.shown&&(o+=s.height)}return r},e.prototype.applyScroll=function(e,t){var n=this;if(!Number.isNumber(e)||isNaN(e))return!1;if(this.text!==this.lastText)return!1;var i=Math.floor(e),r=e-i;this.scrolling=!0;for(var o=this.sections,a=t||{},s=a.highlight,l=a.center,c=0,u=this.topSpace,h=0;h<o.length;h++){var d=o[h];if(!d.computed)return!1;if(!(c+d.lines<=i)){if(!d.shown&&s&&(this.showSection(d),d.shown))return this.applyScroll(e,t);var p=d.height;0===c&&(p+=u,u=0);var f=p/d.lines,m=i-c,v=0;l&&(v-=(this.previewEl.clientHeight-f)/2);var g=Math.max(0,u+f*(m+r)+v);this.updateVirtualDisplay(g);for(var y=null,b=function(e){return Ow(e,n.previewEl).top},w=0,k=0,C=d.el.findAll("li");k<C.length;k++){var M=C[k];if(this.belongsToMe(M)){var E=parseInt(M.getAttribute("data-line"));if(!(E<0||isNaN(E))&&M.isShown()){if(!(E<=m)){var S=E-w;if(S>0){var x=y?b(y):d.el.offsetTop;f=(b(M)-x)/S}break}w=E,y=M,f=0}}}if(y){0===f&&(f=(d.el.offsetTop+d.height-b(y))/(d.lines-w));var T=b(y)-d.el.offsetTop;g=Math.max(0,u+T+f*(m-w+r)+v),this.previewEl.scrollTop=g}return s&&this.highlightEl(y||d.el),!0}c+=d.lines,d.shown&&(u+=d.height)}return!0},e.prototype.getSectionTop=function(e){for(var t=this.sections,n=0,i=0;i<t.length;i++){var r=t[i];if(r===e)return n;var o=r.height;!r.computed&&0===o&&i>0&&(o=n/i),r.shown||(o=0),n+=o}return-1},e.prototype.showSection=function(e){if(!e.shown){var t=this.sections,n=t.indexOf(e);if(-1!==n){for(var i=e.level;n>=0;){var r=t[n];r.headingCollapsed&&r.level<i&&(r.setCollapsed(!1),i=r.level),n--}this.updateShownSections(),this.updateVirtualDisplay()}}},e.prototype.applyScrollSection=function(e){var t=this.previewEl,n=this.getSectionTop(e);if(-1!==n)return this.scrolling=!0,t.scrollTop=n,!0},e.prototype.applyScrollDelayed=function(e,t,n){var i=this;this.applyScroll(e,t)?n&&n():this.onRendered((function(){i.applyScroll(e,t),n&&n()}))},e.prototype.highlightEl=function(e){for(var t=0,n=this.sections;t<n.length;t++)for(var i=0,r=n[t].el.findAllSelf(".is-flashing");i<r.length;i++){r[i].removeClass("is-flashing")}e.addClass("is-flashing"),setTimeout((function(){e.removeClass("is-flashing")}),3e3)},e.prototype.getSectionContainer=function(e){for(var t=null,n=0,i=this.sections;n<i.length;n++){var r=i[n];if(r.el.contains(e)){t=r;break}}return t},e.prototype.selectRange=function(e){var t=this.sizerEl,n=this.previewEl,i=e.section,r=e.start,o=e.end;this.showSection(i);var a=this.getSectionTop(i);t.contains(i.el)||(n.scrollTop=a,this.updateVirtualDisplay());var s=Hw(i.el,r,o);if(s){var l=function(e){for(;e;){if(e.instanceOf(HTMLElement))return e;e=e.parentNode}return null}(s.startContainer);if(l){var c=n.scrollTop+40,u=c+n.clientHeight-40;(l.offsetTop<c||l.offsetTop+l.offsetHeight>u)&&l.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})}this.updateVirtualDisplay()}},e.prototype.addHeader=function(){this.header||(this.header=new KO(null),this.header.el.addClass("mod-header","mod-ui"),this.sections.unshift(this.header),this.queueRender())},e.prototype.removeHeader=function(){this.header&&(this.sections.remove(this.header),this.header=null,this.queueRender())},e.prototype.addFooter=function(){this.footer||(this.footer=new KO(null),this.footer.el.addClass("mod-footer","mod-ui"),this.sections.push(this.footer),this.queueRender())},e.prototype.removeFooter=function(){this.footer&&(this.sections.remove(this.footer),this.footer=null,this.queueRender())},e.prototype.updateHeader=function(){var e=this.header;e&&(e.resetCompute(),this.queueRender())},e.prototype.updateFooter=function(){var e=this.footer;e&&(e.resetCompute(),this.queueRender())},e.prototype.cleanupParentComponents=function(){for(var e=[],t=0,n=this.owner._children;t<n.length;t++){(o=n[t])instanceof GO&&(this.belongsToMe(o.containerEl)||e.push(o))}for(var i=0,r=e;i<r.length;i++){var o=r[i];this.owner.removeChild(o)}},e.registerPostProcessor=function(e,t){e.sortOrder=t;var n=this.postProcessors;n.push(e),n.sort((function(e,t){return(e.sortOrder||0)-(t.sortOrder||0)}))},e.unregisterPostProcessor=function(e){this.postProcessors.remove(e)},e.registerRecycler=function(e){this.recyclers.push(e)},e.unregisterRecycler=function(e){this.recyclers.remove(e)},e.registerCodeBlockPostProcessor=function(e,t){var n=this.codeBlockPostProcessors;if(n.hasOwnProperty(e))throw new Error("Code block postprocessor for language ".concat(e," is already registered"));n[e]=t},e.unregisterCodeBlockPostProcessor=function(e){delete this.codeBlockPostProcessors[e]},e.createCodeBlockPostProcessor=function(e,t){return function(n,i){var r=n.findAll("code.language-"+e);if(0!==r.length)for(var o=0,a=r;o<a.length;o++){var s=a[o],l=oB(s),c=s.parentElement,u=createDiv("block-language-"+e);c.replaceWith(u);var h=t(l,u,i);h&&i.promises.push(h)}}},e.registerDomEvents=function(t,n,i){function r(n){var r=n.getAttr("data-href")||n.getAttr("href");return r&&e.belongsToMe(n,t,i)?{href:r,displayText:n.getText().trim()}:null}function o(e,t){if(0===e.button||1===e.button){var i=r(t);i&&n.onInternalLinkClick(e,t,i.href,i.displayText)}}function a(n,r){n.defaultPrevented||e.belongsToMe(r,t,i)&&Zl.isMobile&&(n.preventDefault(),r.instanceOf(HTMLImageElement)&&function(e){var t=e.cloneNode(),n=document.body.createDiv("mobile-image-viewer");n.appendChild(t);var i=t.width,r=t.height,o=t.naturalWidth,a=t.naturalHeight,s=5,l=0,c=0,u=1,h=function(){var e=(u-1)/u/2,n=Math.max(0,i*e),o=Math.max(0,r*e);l=Math.clamp(l,-n,n),c=Math.clamp(c,-o,o),u=Math.clamp(u,1,s),t.style.transform="scale(".concat(u,") translate(").concat(l,"px, ").concat(c,"px)")},d=0,p=0,f=0,m=0,v=function(){cancelAnimationFrame(m);var e=Date.now(),t=e-f;l+=Math.cos(p)*d*t,c+=Math.sin(p)*d*t,h(),(d-=Math.min(.003*t,d))>.01&&(f=e,m=requestAnimationFrame(v))};t.addEventListener("load",(function(){i=t.width,r=t.height,o=t.naturalWidth,a=t.naturalHeight,(s=2*Math.max(o/i,a/r))<1&&(s=1),h()}));var g=null,y=null,b=function(e){cancelAnimationFrame(m);for(var t=Date.now(),n=t-f,i=Array.prototype.slice.call(e.touches),r=null,o=null,a=0,s=i;a<s.length;a++){var b=s[a];g&&b.identifier===g.identifier&&(r=b),y&&b.identifier===y.identifier&&(o=b)}if(o&&!r&&(g=y,r=o,y=null,o=null),r?i.remove(r):i.length>0&&(r=i.first(),i.splice(0,1)),o?i.remove(o):i.length>0&&(o=i.first(),i.splice(0,1)),g&&r&&g.identifier===r.identifier){var w=window.innerWidth/2,k=window.innerHeight/2;if(y&&o&&y.identifier===o.identifier){var C=-l+((g.clientX+y.clientX)/2-w)/u,M=-c+((g.clientY+y.clientY)/2-k)/u,E=(r.clientX+o.clientX)/2,S=(r.clientY+o.clientY)/2,x=g.clientX-y.clientX,T=g.clientY-y.clientY,D=r.clientX-o.clientX,A=r.clientY-o.clientY,L=x*x+T*T,P=D*D+A*A;if(0!==L&&0!==P){var I=Math.sqrt(P/L),F=u*I;l=(E-w)/F-C,c=(S-k)/F-M,u=F,h()}}else{var O=(r.clientX-g.clientX)/u,B=(r.clientY-g.clientY)/u;l+=O,c+=B,d=Math.sqrt(O*O+B*B)/n,p=Math.atan2(B,O),h()}}y=o,(g=r)||y||(m=requestAnimationFrame(v)),f=t};n.addEventListener("touchstart",b),n.addEventListener("touchend",b),n.addEventListener("touchmove",b),n.addEventListener("touchcancel",b),n.addEventListener("click",(function(e){n.remove(),e.preventDefault(),cancelAnimationFrame(m)}))}(r))}t.on("click","a.internal-link",o),t.on("auxclick","a.internal-link",o),t.on("dragstart","a.internal-link",(function(e,t){var i=r(t);i&&n.onInternalLinkDrag(e,t,i.href,i.displayText)})),t.on("contextmenu","a.internal-link",(function(e,t){var i=r(t);i&&n.onInternalLinkRightClick(e,t,i.href,i.displayText)})),t.on("mouseover","a.internal-link",(function(e,t){var i=r(t);i&&n.onInternalLinkMouseover(e,t,i.href,i.displayText)})),t.on("mouseover","a.footnote-link",(function(r,o){var a=o.dataset.footref;a&&e.belongsToMe(o,t,i)&&n.onInternalLinkMouseover(r,o,"#[^".concat(a,"]"))})),t.on("click","a.external-link",(function(r,o){if(0===r.button||1===r.button){var a=o.getAttr("href");a&&e.belongsToMe(o,t,i)&&n.onExternalLinkClick(r,o,a)}})),t.on("contextmenu","a.external-link",(function(r,o){var a=o.getAttr("href");a&&e.belongsToMe(o,t,i)&&n.onExternalLinkRightClick(r,o,a)})),t.on("click","a.tag",(function(r,o){if(0===r.button&&e.belongsToMe(o,t,i)){r.preventDefault();var a=o.getText();n.onTagClick(r,o,a)}})),t.on("click","img,video",a),t.on("contextmenu","img,video",a)},e.belongsToMe=function(e,t,n){for(;e;){if(e===t)return!0;if(e.classList.contains("markdown-preview-view"))return!1;var i=e.parentElement;if(!i)return!!n&&n(e);e=i}return!1},e.postProcessors=[],e.codeBlockPostProcessors={},e.recyclers=[],e}();eB.registerPostProcessor((function(e,t){var n,i=e.find(".frontmatter");null==i||i.hide(),null===(n=null==i?void 0:i.parentElement)||void 0===n||n.addClass("mod-frontmatter","mod-ui")})),eB.registerPostProcessor((function(e,t){for(var n=0,i=e.findAll("[data-footnote-id]");n<i.length;n++){var r=i[n],o=r.getAttr("data-footnote-id");r.setAttr("data-footnote-id",o+"-"+t.docId),r.id=o+"-"+t.docId}for(var a=0,s=e.findAll("a.footnote-link");a<s.length;a++){var l=s[a],c=l.getAttr("href");l.setAttr("href",c+"-"+t.docId)}}));var tB=function(e,t){return g(void 0,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C,M,E,S,x,T,D,A,L,P,I,F;return y(this,(function(y){switch(y.label){case 0:n=oB(t),i=t.parentElement,r=t.doc,0===(o=i.clientWidth)&&(o=e.clientWidth),0===o&&(o=e.win.innerWidth),a="m"+oc(16),s=r.body.createDiv("mermaid"),y.label=1;case 1:return y.trys.push([1,3,,4]),s.style.width=o+"px",s.style.visibility="hidden",s.style.position="absolute",[4,mermaid.render(a,n,s)];case 2:if(l=y.sent().svg,s.detach(),(c=createDiv("mermaid")).innerHTML=l,i.replaceWith(c),rB.set(c,n),(u=c).instanceOf(Element)){for(h=u.findAll('[*|class*="internal-link"] > g.label foreignObject > div'),d=0,p=h;d<p.length;d++)f=p[d],(m=f.textContent)&&(f.empty(),f.createEl("a",{cls:"internal-link",href:m,text:m}));for(v=[u];v.length>0;)g=v.pop(),v.push.apply(v,Array.from(g.childNodes)),g.instanceOf(SVGAElement)&&g.href&&!g.href.baseVal&&(g.href.baseVal=g.getAttr("href"));if(b=u.find("style")){for(w=b.innerHTML,k=w,C=0,M=u.findAll("marker");C<M.length;C++)if(E=M[C],S=E.id){for(x=a+"-"+S,E.id=x,T=0,D=["marker-start","marker-end"];T<D.length;T++)for(A=D[T],L=0,P=u.findAll("[".concat(A,'="url(#').concat(S,')"]'));L<P.length;L++)(F=P[L]).setAttr(A,"url(#".concat(x,")"));w=w.replace(new RegExp("#".concat(nc(S),"(?!\\w|-)"),"g"),"#"+x)}w!==k&&(b.innerHTML=w)}}return[3,4];case 3:return I=y.sent(),(F=r.getElementById("d"+a))&&F.detach(),s.detach(),console.error(I),t.empty(),t.appendText("Error parsing Mermaid diagram!\n\n".concat(I.str||I.message)),[3,4];case 4:return[2]}}))}))};function nB(e,t){var n=this;return kO.then((function(){return g(n,void 0,void 0,(function(){var n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:for(n=[],i=function(t){t.isShown()||e.isShown()?n.push(tB(e,t)):t.onNodeInserted((function(){return tB(e,t)}),!0)},r=0,o=t;r<o.length;r++)a=o[r],i(a);return n.length>0?[4,Promise.all(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))}))}eB.registerPostProcessor((function(e,t){var n=e.findAll("code.language-mermaid");if(0!==n.length)return nB(t.containerEl,n)}));var iB=function(e,t){for(var n=0,i=e;n<i.length;n++)for(var r=0,o=i[n].el.findAll(".mermaid");r<o.length;r++){var a=o[r];if(t===oB(a))return a}return null};eB.registerRecycler((function(e,t){for(var n=0,i=e.findAll("code.language-mermaid");n<i.length;n++){var r=i[n],o=oB(r),a=iB(t,o);a&&(a.detach(),r.parentElement.replaceWith(a))}}));var rB=UO();function oB(e){if(rB.has(e))return rB.get(e);var t=e.getText();return t.endsWith("\n")&&(t=t.substring(0,t.length-1)),rB.set(e,t),t}eB.registerPostProcessor((function(e){for(var t=function(e){var t=e.parentElement;if(!t)return"continue";if(t.findAll(".copy-code-button").length>0)return"continue";var n=oB(e),i=t.createEl("button",{cls:"copy-code-button"});mx(i,"lucide-copy"),i.onClickEvent((function(e){return g(void 0,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return e.preventDefault(),[4,navigator.clipboard.writeText(n)];case 1:return t.sent(),mx(i,"lucide-check"),i.setCssStyles({color:"var(--text-success)",display:"inline-flex"}),window.setTimeout((function(){mx(i,"lucide-copy"),i.setCssStyles({color:"",display:""})}),1e3),[2]}}))}))}))},n=0,i=e.findAll("pre > code");n<i.length;n++){t(i[n])}})),eB.registerPostProcessor((function(e){var t=e.findAll('code[class*="language-"]:not(.is-loaded)');if(0!==t.length)return MO.then((function(){for(var e=0,n=t;e<n.length;e++){var i=n[e];oB(i),Prism.highlightElement(i),i.addClass("is-loaded")}}))}),100);var aB=function(e){return e.className.split(" ").filter((function(e){return e.startsWith("language-")})).first()},sB=function(e,t,n){for(var i=0,r=e;i<r.length;i++)for(var o=0,a=r[i].el.findAll('code[class*="language-"].is-loaded');o<a.length;o++){var s=a[o];if(n===rB.get(s)&&t===aB(s))return s}return null};eB.registerRecycler((function(e,t){for(var n=0,i=e.findAll('code[class*="language-"]:not(.is-loaded)');n<i.length;n++){var r=i[n],o=oB(r),a=aB(r),s=sB(t,a,o);s&&(s.detach(),r.replaceWith(s))}}));var lB=UO();eB.registerPostProcessor((function(e){var t=e.findAll(".math:not(.is-loaded)");if(0!==t.length)return SO.then((function(){for(var e=0,n=t;e<n.length;e++){var i=n[e],r=ec(i.innerHTML);i.empty();try{var o=TO(r,i.classList.contains("math-block"));i.appendChild(o)}catch(e){i.appendText(r)}i.addClass("is-loaded"),lB.set(i,r)}return IO()}))}));var cB=function(e,t,n){for(var i=0,r=e;i<r.length;i++)for(var o=0,a=r[i].el.findAll(".math.is-loaded");o<a.length;o++){var s=a[o];if(t===lB.get(s)&&s.classList.contains("math-block")===n)return s}return null};function uB(e,t,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];if(e.getAttr(o)!==t.getAttr(o))return!1}return!0}eB.registerRecycler((function(e,t){for(var n=0,i=e.findAll(".math:not(.is-loaded)");n<i.length;n++){var r=i[n],o=ec(r.innerHTML),a=cB(t,o,r.classList.contains("math-block"));a&&(a.detach(),r.replaceWith(a))}}));var hB=function(e,t){for(var n=0,i=e;n<i.length;n++)for(var r=0,o=i[n].el.findAll(".internal-embed.is-loaded");r<o.length;r++){var a=o[r];if(uB(t,a,["src","width","height","alt"]))return a}return null};eB.registerRecycler((function(e,t){for(var n=0,i=e.findAll(".internal-embed:not(.is-loaded)");n<i.length;n++){var r=i[n],o=hB(t,r);o&&(o.detach(),r.replaceWith(o))}})),eB.registerPostProcessor((function(e){var t=e.findAll("img");if(0!==t.length){for(var n=[],i=function(e){var t=BO(e.src);if(t){var i=NO(t);return e.replaceWith(i),"continue"}e.referrerPolicy="no-referrer",e.complete||n.push(new Promise((function(t){e.addEventListener("load",t),e.addEventListener("error",t)})))},r=0,o=t;r<o.length;r++){i(o[r])}return Promise.all(n)}}));var dB=function(e,t,n){for(var i=0,r=e;i<r.length;i++)for(var o=0,a=r[i].el.findAll("img");o<a.length;o++){var s=a[o];if(s.instanceOf(HTMLImageElement)&&(s.complete&&t===s.src))return s.setAttr("width",n.getAttr("width")),s.setAttr("height",n.getAttr("height")),s.setAttr("alt",n.getAttr("alt")),s}return null};function pB(e,t){if(t.startsWith("'")&&t.endsWith("'"))t=t.substring(1,t.length-1).replace(/\\'/g,"'");else if(t.startsWith('"'))try{var n=JSON.parse(t);String.isString(n)&&(t=n)}catch(e){}if(t.startsWith("<svg")){var i=qT(t).firstChild;i&&i.instanceOf(SVGSVGElement)&&(i.setAttrs({width:16,height:16,fill:"currentColor",stroke:"currentColor"}),e.empty(),e.appendChild(i))}else mx(e,t)}eB.registerRecycler((function(e,t){for(var n=0,i=e.findAll("img");n<i.length;n++){var r=i[n];if(r.instanceOf(HTMLImageElement)){var o=r.src,a=dB(t,o,r);a&&(a.detach(),r.replaceWith(a))}}})),eB.registerPostProcessor((function(e,t){for(var n=function(e){!function(e){var t=e.getAttr("data-callout-fold");if("+"===t||"-"===t){e.addClass("is-collapsible");var n=e.find(".callout-title"),i=e.find(".callout-content");if(n&&i&&!n.find(".callout-fold")){var r=!1,o=function(){return a(!r,!0)},a=function(t,n){r=t,e.toggleClass("is-collapsed",r),s.toggleClass("is-collapsed",r),Ml(i,r,n)},s=n.createDiv("callout-fold");s.addEventListener("click",(function(e){0===e.button&&(e.preventDefault(),o())})),mx(s,"lucide-chevron-down"),n.addEventListener("click",(function(e){setTimeout((function(){0!==e.button||e.defaultPrevented||(e.preventDefault(),o())}),0)})),"-"===t&&a(!0,!1)}}}(e);var t=e.find(".callout-icon");if(!t||t.firstChild)return"continue";var n=e.getAttr("data-callout-icon");if(n||(n=e.getCssPropertyValue("--callout-icon")),n)return pB(t,n),"continue";var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttrs({width:16,height:16}),t.appendChild(i),e.isShown()||e.onNodeInserted((function(){var n=e.getCssPropertyValue("--callout-icon");n&&pB(t,n)}),!0)},i=0,r=e.findAll(".callout");i<r.length;i++){n(r[i])}})),eB.registerPostProcessor((function(e,t){for(var n=0,i=e.findAll("table");n<i.length;n++){var r=i[n],o=r.parentNode;if(o&&o.instanceOf(HTMLElement)&&r===o.firstChild&&r===o.lastChild){o.style.overflowX="auto";for(var a=r.findAll("th, td"),s=0,l=a.length;s<l;s++){var c=a[s],u=yk(c);c.dir=u,0===s&&(o.dir=u)}}}}));eB.registerPostProcessor((function(e,t){for(var n=0,i=e.findAll("h1, h2, h3, h4, h5, h6, blockquote, .callout-title");n<i.length;n++){(a=i[n]).dir="auto"}for(var r=0,o=e.findAll("li, p");r<o.length;r++){var a;(a=o[r]).parentElement.dir||(a.dir="auto")}}));var fB={},mB=function(){function e(e){this.info=e}return e.prototype.onInternalLinkDrag=function(e,t,n,i){var r=this.info.app;r.dragManager.onDragStart(e,r.dragManager.dragLink(e,n,this.info.path,i))},e.prototype.onInternalLinkClick=function(e,t,n){e.preventDefault(),this.info.app.workspace.openLinkText(n,this.info.path,Ak.isModEvent(e))},e.prototype.onInternalLinkRightClick=function(e,t,n){var i=PA.forEvent(e);i.addSections(["title","open","action","clipboard","view","info","","danger"]),i.addItem((function(e){return e.setSection("clipboard").setTitle(Qf.interface.menu.copy()).setIcon("lucide-copy").onClick((function(){yc(t.getText())}))})),this.info.app.workspace.handleLinkContextMenu(i,n,this.info.path)},e.prototype.onExternalLinkClick=function(e,t,n){if(e.preventDefault(),zc(n)){var i=Ak.isModEvent(e),r="boolean"==typeof i?"":i;window.open(n,r)}else new JA(Qf.interface.msgFailedToOpenHref({href:n}))},e.prototype.onExternalLinkRightClick=function(e,t,n){var i=PA.forEvent(e);i.addSections(["title","open","selection","clipboard","info","action","view","","danger"]),i.addItem((function(e){return e.setSection("clipboard").setTitle(Qf.interface.menu.copy()).setIcon("lucide-copy").onClick((function(){yc(t.getText())}))})),this.info.app.workspace.handleExternalLinkContextMenu(i,n)},e.prototype.onInternalLinkMouseover=function(e,t,n){this.info.app.workspace.trigger("hover-link",{event:e,source:"preview",hoverParent:this.info,targetEl:t,linktext:n,sourcePath:this.info.path})},e.prototype.onTagClick=function(e,t,n){var i=this.info.app.internalPlugins.getEnabledPluginById("global-search");i&&i.openGlobalSearch("tag:"+n)},e}();function vB(e,t){var n=e.getAttr("data-href")||e.getAttr("href");return n&&eB.belongsToMe(e,t)?n:null}function gB(e,t,n,i){void 0===i&&(i=vB);for(var r=0,o=t.findAll("a.internal-link");r<o.length;r++){var a=o[r],s=i(a,t);if(s){var l=_S(s),c=e.metadataCache.getFirstLinkpathDest(l,n);a.toggleClass("is-unresolved",!c)}}}var yB=function(e){function t(t,n,i){void 0===i&&(i=!0);var r=e.call(this,n)||this;r.docId=oc(16),r.hoverPopover=null,r.requestUpdateLinks=mc((function(){for(var e=0,t=r.renderer.sections;e<t.length;e++){var n=t[e];n.rendered&&r.resolveLinks(n.el)}}),500),r.app=t;var o=new mB(r);return r.renderer=new eB(r,o,n,"worker.js",i),r}return f(t,e),t.prototype.onload=function(){var e=this.app;this.registerEvent(e.vault.on("modify",this.onFileChange,this)),this.registerEvent(e.vault.on("delete",this.onFileChange,this)),this.registerEvent(e.metadataCache.on("changed",this.onFileChange,this))},t.prototype.onCheckboxClick=function(e,n,i){e.preventDefault();var r=this.renderer.text,o=t.toggleCheckbox(r,i);if(null!==o){var a=this.renderer.getSectionContainer(n);if(a){var s=" "!==o.char,l=i-a.lineStart;if(l>=0){var c=String(l);a.html=a.html.replace(/<li class="task-list-item( is-checked)?" data-task="(.)" data-line="(\d+)"><input class="task-list-item-checkbox" type="checkbox"( checked)? data-line="(\d+)">/g,(function(e,t,n,i,r,a){return i===c&&a===c?'<li class="task-list-item'.concat(s?" is-checked":"",'" data-task="').concat(o.char,'" data-line="').concat(i,'"><input class="task-list-item-checkbox" type="checkbox"').concat(s?" checked":"",' data-line="').concat(a,'">'):e}))}setTimeout((function(){n.checked=s;var e=n.parentNode;e&&e.instanceOf(HTMLLIElement)&&(e.setAttr("data-task",o.char),e.toggleClass("is-checked",s))}),0)}this.edit(o.text)}},t.toggleCheckbox=function(e,t){var n=function(e,t){for(var n=-1,i=0;i<t;i++)n=e.indexOf("\n",n+1);var r=n+1,o=e.indexOf("\n",r);return{start:r,end:-1!==o?o:e.length}}(e,t);if(!n)return null;var i=e.slice(n.start,n.end).search(/\[.\]/);if(-1===i)return null;var r=n.start+i+1,o=" "===e.charAt(r)?"x":" ";return{text:e.slice(0,r)+o+e.slice(r+1),char:o}},t.prototype.postProcess=function(e,t,n){var i=this,r=kB.postProcess(this.app,{docId:this.docId,sourcePath:this.path,frontmatter:n,promises:t,addChild:function(e){return i.addChild(e)},getSectionInfo:function(e){return i.renderer.getSectionInfo(e)},containerEl:this.renderer.sizerEl,el:e.el});e.usesFrontMatter=!!r.usesFrontMatter,this.resolveLinks(e.el)},t.prototype.onScroll=function(){},t.prototype.onFoldChange=function(){},t.prototype.onRenderComplete=function(){},Object.defineProperty(t.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),t.prototype.onFileChange=function(e){this.requestUpdateLinks()},t.prototype.resolveLinks=function(e){var t=this;gB(this.app,e,this.path,(function(e){return t.renderer.getInternalLinkHref(e)}))},t.postProcess=function(e,t){for(var n=t.sourcePath,i=t.promises,r=t.el,o=t.displayMode,a=0,s=r.findAll("code.language-query");a<s.length;a++){var l=s[a],c=oB(l).trim(),u=l.parentElement;t.addChild(bB(e,c,u,n))}for(var h=0,d=eB.postProcessors;h<d.length;h++){var p=(0,d[h])(r,t);p&&p.then&&i.push(p)}var f=tV(t.containerEl),m=r.findAll(".internal-embed:not(.is-loaded)");if(m.length>0)for(var v=0,g=m;v<g.length;v++){var y=g[v],b=y.getAttribute("src"),w=cV.load({app:e,linktext:b,sourcePath:n,containerEl:y,displayMode:o,showInline:!0,depth:f});w&&(t.addChild(w),i.push(w.loadFile()))}return t},t.renderMarkdown=function(e,n,i,r){return t.render(null,e,n,i,r)},t.render=function(e,t,n,i,r){if(!(r&&r instanceof xA)){var o=(new Error).stack;if("string"==typeof o){var a=o.match(/plugin:([^:]+)/);if(a){var s=a[1];fB.hasOwnProperty(s)||(fB[s]=!0,console.error(new Error('Plugin "'.concat(s,'" is not passing Component in renderMarkdown. This is needed to avoid memory leaks when embedded contents register global event handlers.'))))}}}var l=pS(t),c=yS(l),u=qT(bS(l));n.appendChild(u);for(var h=[],d={docId:oc(16),sourcePath:i,frontmatter:c,promises:h,addChild:function(e){return r&&r.addChild(e)},getSectionInfo:function(){return null},containerEl:n,el:n,displayMode:!0},p=0,f=eB.postProcessors;p<f.length;p++){var m=(0,f[p])(n,d);m&&m.then&&h.push(m)}if(e&&r){var v=tV(n),g=n.findAll(".internal-embed:not(.is-loaded)");if(g.length>0)for(var y=0,b=g;y<b.length;y++){var w=b[y],k=w.getAttribute("src"),C=cV.load({app:e,linktext:k,sourcePath:i,containerEl:w,displayMode:!0,showInline:!0,depth:v});C&&(d.addChild(C),h.push(C.loadFile()))}}return h.length>0?Promise.all(h).then():Promise.resolve()},t}(GO);function bB(e,t,n,i){var r=createDiv("internal-query");n.replaceWith(r),r.createDiv("internal-query-header",(function(e){e.createSpan("internal-query-header-icon",(function(e){return mx(e,"lucide-search")})),e.createSpan({cls:"internal-query-header-title",text:t})}));var o=r.createDiv("search-result-container");return new CB(e,o,t,i)}var wB=function(e){function t(t,n,i){var r=e.call(this)||this;return r.hoverPopover=null,r.app=t.app,r.containerEl=t.containerEl,r.containerEl.addClass("markdown-embed"),r.file=n,r.subpath=i,t.showInline&&(r.containerEl.addClass("inline-embed"),r.headerEl=r.containerEl.createDiv({cls:"markdown-embed-title",prepend:!0})),r}return f(t,e),t.prototype.loadFile=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m=this;return y(this,(function(v){switch(v.label){case 0:return t=(e=this).app,n=e.file,i=e.subpath,r=t.metadataCache.getFileCache(n),o=JS(r,i),[4,t.vault.cachedRead(n)];case 1:return a=v.sent(),o&&(a=ex(a,r,o).content),s=pS(a),l=yS(s),c=bS(s),u=qT(c),i||null===(f=this.headerEl)||void 0===f||f.setText(n.basename),(h=this.containerEl.createDiv("markdown-preview-view markdown-rendered")).toggleClass("rtl",t.vault.getConfig("rightToLeft")),h.toggleClass("show-indentation-guide",t.vault.getConfig("showIndentGuide")),h.appendChild(u),d=new mB(this),eB.registerDomEvents(h,d),p=[],kB.postProcess(this.app,{docId:oc(16),sourcePath:n.path,frontmatter:l,promises:p,addChild:function(e){return m.addChild(e)},getSectionInfo:function(){return null},containerEl:h,el:h,displayMode:!0}),p.length>0?[4,Promise.all(p)]:[3,3];case 2:v.sent(),v.label=3;case 3:return[2]}}))}))},Object.defineProperty(t.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),t}(xA),kB=function(e){function t(t){var n=this,i=t.contentEl.createDiv("markdown-reading-view");i.style.width="100%",i.style.height="100%",(n=e.call(this,t.app,i)||this).search=null,n.type="preview",n.view=t;var r=n.renderer;return r.addBottomPadding=!0,n.updateReadableLineLength(),n.updateFoldHeading(),n.updateFoldIndent(),n.updateIndentGuide(),n.updateRTL(),n.updatePropertiesInDocument(),n.updateStrictLineBreaks(),n.updateOptions(),n.onResize(),n.onFoldChange=mc((function(){return n.view.onMarkdownFold()}),500),r.addHeader(),r.addFooter(),i.addEventListener("contextmenu",(function(e){e.defaultPrevented||Zl.isMobile||r.sizerEl.contains(e.targetNode)||n.app.workspace.trigger("markdown-viewport-menu",PA.forEvent(e).addSections(["view",""]),t,"preview","gutter")})),n}return f(t,e),t.prototype.onload=function(){var e=this;this.registerEvent(this.app.workspace.on("post-processor-change",(function(){return e.rerender(!0)}))),this.registerEvent(this.app.vault.on("config-changed",this.onConfigChanged,this))},Object.defineProperty(t.prototype,"file",{get:function(){return this.view.file},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.renderer.header.el.appendChild(this.view.inlineTitleEl),this.renderer.header.el.appendChild(this.view.metadataEditor.containerEl),this.renderer.footer.el.appendChild(this.view.backlinksEl),this.containerEl.show(),this.search&&(this.view.scope=this.search.scope)},t.prototype.hide=function(){this.containerEl.hide(),this.search&&(this.view.scope=null)},t.prototype.get=function(){return this.renderer.text},t.prototype.set=function(e,t){t&&this.clear(),this.renderer.set(e)},t.prototype.clear=function(){this.renderer.clear()},t.prototype.beforeUnload=function(){},t.prototype.rerender=function(e){this.renderer.rerender(e)},t.prototype.getEphemeralState=function(e){},t.prototype.setEphemeralState=function(e){var t=this;if(e.focusMetadata)this.view.metadataEditor.focusPropertyAtIndex(0);else if(e.focus){var n=this.renderer.previewEl;n.tabIndex=-1,n.focus({preventScroll:!0})}e.hasOwnProperty("scroll")&&this.renderer.applyScrollDelayed(e.scroll);var i=function(){return g(t,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<5?[4,this.view.onMarkdownScroll()]:[3,5];case 2:return t.sent()?[2]:[4,sleep(100*(e+1))];case 3:t.sent(),t.label=4;case 4:return e++,[3,1];case 5:return[2]}}))}))};if(void 0!==e.line&&e.line>=0&&this.renderer.applyScrollDelayed(e.line,{highlight:!0},i),void 0!==e.propertyMatches){var r=e.propertyMatches;r.length>0&&this.view.canShowProperties()&&g(t,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,OF(this.app)];case 1:return(e=t.sent())&&e.focusKey(r[0].key),[2]}}))}))}else if(void 0!==e.match){var o=e.match,a=o.content,s=o.matches;if(s.length>0){var l=ac(a,s[0][0]);this.renderer.applyScrollDelayed(l,{center:!0,highlight:!0},i)}}},t.prototype.getScroll=function(){return this.renderer.getScroll()},t.prototype.applyScroll=function(e){this.renderer.applyScroll(e)},t.prototype.getFoldInfo=function(){return this.renderer.getFoldInfo()},t.prototype.applyFoldInfo=function(e){this.renderer.applyFoldInfo(e)},t.prototype.onResize=function(){this.renderer.onResize(),null!==this.view.scroll&&this.renderer.applyScrollDelayed(this.view.scroll)},t.prototype.showSearch=function(){var e=this;if(!this.search){var t=this.search=new mO(this.app,this.renderer,this.containerEl,(function(){e.search=null,e.view.scope=null}));this.view.scope=t.scope}this.search.searchInputEl.focus(),this.search.searchInputEl.select()},t.prototype.updateReadableLineLength=function(){var e=this.app.vault.getConfig("readableLineLength");this.renderer.previewEl.toggleClass("is-readable-line-width",e)},t.prototype.updateFoldHeading=function(){var e=this.app.vault.getConfig("foldHeading");this.renderer.previewEl.toggleClass("allow-fold-headings",e),e||this.renderer.unfoldAllHeadings()},t.prototype.updateFoldIndent=function(){var e=this.app.vault.getConfig("foldIndent");this.renderer.previewEl.toggleClass("allow-fold-lists",e),e||this.renderer.unfoldAllLists()},t.prototype.updateIndentGuide=function(){var e=this.app.vault.getConfig("showIndentGuide");this.renderer.previewEl.toggleClass("show-indentation-guide",e)},t.prototype.updateRTL=function(){this.renderer.previewEl.toggleClass("rtl",this.app.vault.getConfig("rightToLeft"))},t.prototype.updatePropertiesInDocument=function(){this.renderer.previewEl.toggleClass("show-properties","hidden"!==this.app.vault.getConfig("propertiesInDocument"))},t.prototype.updateStrictLineBreaks=function(){cS.globalOptions.breaks=!this.app.vault.getConfig("strictLineBreaks"),this.rerender()},t.prototype.onConfigChanged=function(e){switch(e){case"readableLineLength":this.updateReadableLineLength();break;case"foldHeading":this.updateFoldHeading();break;case"foldIndent":this.updateFoldIndent();break;case"showIndentGuide":this.updateIndentGuide();break;case"rightToLeft":this.updateRTL();break;case"propertiesInDocument":this.updatePropertiesInDocument();break;case"strictLineBreaks":this.updateStrictLineBreaks()}},t.prototype.updateOptions=function(){},t.prototype.edit=function(e){var t=this;this.renderer.set(e),this.view.onInternalDataChange(),g(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.view.save()];case 1:return e.sent(),[2]}}))}))},t.prototype.onScroll=function(){Date.now()-this.renderer.lastRender<100||this.view.onMarkdownScroll()},t.prototype.onRenderComplete=function(){e.prototype.onRenderComplete.call(this),this.search&&null===this.search.highlightRanges&&this.search.updateQuery()},t.prototype.foldAll=function(){var e=this.app.vault,t=e.getConfig("foldHeading"),n=e.getConfig("foldIndent");t&&this.renderer.foldAllHeadings(),n&&this.renderer.foldAllLists()},t.prototype.unfoldAll=function(){var e=this.app.vault,t=e.getConfig("foldHeading"),n=e.getConfig("foldIndent");t&&this.renderer.unfoldAllHeadings(),n&&this.renderer.unfoldAllLists()},t.prototype.getSelection=function(){return window.getSelection().toString()},t}(yB),CB=function(e){function t(t,n,i,r){var o=e.call(this,n)||this;return o.searchQuery=null,o.app=t,o.query=i,o.sourcePath=r,o.dom=new pO(t,n,Qf.plugins.search.labelNoMatches()),o.queue=new fO(t,o.dom),o.addChild(o.queue),o}return f(t,e),t.prototype.onload=function(){var e=this,t=e.app,n=e.dom,i=e.sourcePath;n.emptyResults();try{var r=new UP(t,this.query.replace(/\r?\n/g," "),!1);if(!r.matcher)return;this.searchQuery=r;var o=this.queue.start();_P(t,r.requiredInputs,o,(function(e,t){e.path===i&&(t=t.replace(/```query([\s\S]*?)(```|$)/g,(function(e){return e.replace(/./g," ")})));var o=r.match(e,t);o?n.addResult(e,o,t).renderContentMatches():n.removeResult(e)}))}catch(e){console.log(e)}},t.prototype.onResize=function(){this.dom.onResize()},t}(GO);function MB(e,t){return e.length===t.length?e.eq(t):e.length<t.length?t.slice(0,e.length).eq(e):e.slice(0,t.length).eq(t)}function EB(e,t,n){var i=e[t];return e.splice(t,1),e.splice(n,0,i),e}var SB=function(){function e(e,t,n,i,r,o){void 0===i&&(i=""),void 0===r&&(r=1),void 0===o&&(o=1),this.start=0,this.padStart=1,this.end=0,this.padEnd=1,this.dirty=!1,this.table=e,this.row=t,this.col=n,this.text=i,this.padStart=r,this.padEnd=o}return e.prototype.setTextDir=function(){var e=this,t=e.el,n=e.row,i=e.col,r=e.table;t.dir=yk(t),0===n&&0===i&&(r.containerEl.dir=t.dir)},e.prototype.init=function(e,t,n){var i=this;this.el=e,this.start=t,this.end=n,this.setTextDir();var r=Array.from(e.childNodes),o=this.contentEl=e.createDiv("table-cell-wrapper");o.append.apply(o,r),0===r.length&&o.createEl("br"),e.addEventListener("click",(function(e){if(4===e.detail){e.preventDefault();var t=i.table,n=t.rows.first().first(),r=t.rows.last().last();i.contentEl.win.setTimeout((function(){t.selectCells(n,r)}))}})),e.addEventListener("contextmenu",(function(e){if(!e.defaultPrevented){var t=i.table,n=t.editor.tableCell,r=t.selectedCells.length>0;if("mouse"===e.pointerType){if(r&&!t.selectedCells.contains(i))return t.deselectCells(),t.setCellFocus(i.row,i.col),void t.editor.tableCell.onContextMenu(e);if(!r&&(null==n?void 0:n.cell)===i){if(n.cm.hasFocus)return;return n.cm.focus(),void n.onContextMenu(e)}t.onContextMenu(i,PA.forEvent(e))}else r&&t.selectedCells.contains(i)&&t.onContextMenu(i,PA.forEvent(e))}})),e.addEventListener("dragenter",(function(){var e,t=i.table;(null===(e=t.editor.tableCell)||void 0===e?void 0:e.cell)!==i&&t.editor.editTableCell(t,i)})),e.addEventListener("dragleave",(function(t){var n,r=i.table.editor;!Fw(t,e)&&(null===(n=r.tableCell)||void 0===n?void 0:n.cell)===i&&r.destroyTableCell()})),e.addEventListener("pointerdown",(function(e){var t=i.table;if(2===e.button&&t.selectedCells.contains(i)&&e.preventDefault(),e.isPrimary&&0===e.button&&!e.defaultPrevented){var n=e.win,r=i,o=i,a=t.isMalformed,s=function(){a&&!t.isMalformed&&(r=t.getCellAt(r.row,r.col),o=t.getCellAt(o.row,o.col),a=!1),t.selectCells(r,o)},l=function(){var n;if(r!==(null===(n=t.editor.tableCell)||void 0===n?void 0:n.cell)){var i=function(e){var t=e.win.getSelection(),n={x:e.clientX,y:e.clientY};if(t.rangeCount<1)return{head:n,anchor:n};var i=t.getRangeAt(0).getClientRects();if(0===i.length)return{head:n,anchor:n};var r="rtl"===Ew(t.toString()),o=i[0],a=i[i.length-1],s={x:r?o.right:o.left,y:o.y+o.height/2},l={x:r?a.left:a.right,y:a.y+a.height/2};return Hl(n,s)>Hl(n,l)?{head:l,anchor:s}:{head:s,anchor:l}}(e);t.setCellFocus(r.row,r.col,(function(e){return s(),Ee.single(e.posAtCoords(i.anchor),e.posAtCoords(i.head))}))}},c=t.editor.tableCell;c&&e.shiftKey&&(r=c.cell,o=i);var u,h="touch"===e.pointerType;if(h){if(c){var d=c.cm,p=d.state.selection.main;if(d.hasFocus&&d.contentDOM.contains(e.targetNode)&&p.empty)return void i.handleMobileCaretDrag(e,r)}}else s();var f=function(e){m(),e.defaultPrevented||(e.preventDefault(),l())};n.addEventListener("click",f);var m=function(){n.removeEventListener("click",f),n.clearTimeout(u)},v=Bl(e),g=vk(e,(function(){return{move:function(e){h?Hl(Bl(e),v)>5&&(m(),g()):(o=t.getClosestCell(e.clientX,e.clientY),s())},end:function(e){"dragstart"!==e.type&&(u=n.setTimeout((function(){l()}),10))},cancel:function(){m()}}}),0)}}))},e.prototype.handleMobileCaretDrag=function(e,t){var n,i=this.table,r=i.containerEl,o=i.editor,a=e.win,s=e.pointerId,l=o.cm.scrollDOM,c=null,u=0,h=function(e){var o=0===u?50:e-u;c=a.requestAnimationFrame(h),u=e;var s=fk(r,n,o,1),d=fk(l,n,o,1);if(s||d){var p=i.getClosestCell(n.x,n.y);i.selectCells(t,p)}};if(Zl.isIosApp){var d=Date.now(),p=function(e){if(e.pointerId===s&&!(Date.now()-d<200)){n=Bl(e),c||(c=a.requestAnimationFrame(h));var r=i.getClosestCell(n.x,n.y);i.selectCells(t,r)}},f=function(e){e.pointerId===s&&(v(),i.selectedCells.length&&i.editor.destroyTableCell())},m=function(e){e.pointerId===s&&v()},v=function(){a.cancelAnimationFrame(c),a.removeEventListener("pointermove",p),a.removeEventListener("pointerup",f),a.removeEventListener("pointercancel",m)};return a.addEventListener("pointermove",p),a.addEventListener("pointerup",f),void a.addEventListener("pointercancel",m)}if(Zl.isAndroidApp){var g=0,y=!1,b=0,w=l.scrollTop,k=r.scrollLeft,C=function(e){1===e.touches.length&&(g=e.touches[0].identifier)},M=function(e){var o=Nc(e,g);if(o)if(y||w===l.scrollTop&&k===r.scrollLeft){n=Bl(o);var s=i.getClosestCell(n.x,n.y);s!==t&&!y&&b>0&&Date.now()-b>50&&(y=!0,c||(c=a.requestAnimationFrame(h))),y&&i.selectCells(t,s)}else T()},E=function(e){Nc(e,g)&&(T(),i.selectedCells.length&&i.editor.destroyTableCell())},S=function(e){Nc(e,g)&&T()},x=function(e){e.pointerId===s&&(b=Date.now())},T=function(){a.cancelAnimationFrame(c),a.removeEventListener("touchstart",C),a.removeEventListener("touchmove",M),a.removeEventListener("touchend",E),a.removeEventListener("touchcancel",S),a.removeEventListener("pointerup",T),a.removeEventListener("pointercancel",x)};a.addEventListener("touchstart",C),a.addEventListener("touchmove",M),a.addEventListener("touchend",E),a.addEventListener("touchcancel",S),a.addEventListener("pointerup",T),a.addEventListener("pointercancel",x)}},e.prototype.updateWidth=function(e){var t=this,n=t.text,i=t.table,r=t.col,o=e-n.length,a=i.alignments[r],s=1,l=1;"right"===a?s=o-1:"center"===a?(s=Math.floor(o/2),l=Math.ceil(o/2)):l=o-1,this.padStart=s,this.padEnd=l},e.prototype.getTextWithPadding=function(){return" ".repeat(this.padStart)+this.text+" ".repeat(this.padEnd)},e.prototype.getLength=function(){return this.padStart+this.padEnd+this.text.length},e.prototype.getAbsoluteOffsets=function(){var e=this.table.start,t=this,n=t.start,i=t.end;return{start:e+n,end:e+i,textStart:e+n+t.padStart,textEnd:e+i-t.padEnd}},e.prototype.lockDimensions=function(){var e=this.el,t=e.getBoundingClientRect(),n=t.width,i=t.height;e.setCssStyles({width:"".concat(n,"px"),height:"".concat(i,"px")}),e.win.setTimeout((function(){return e.removeAttribute("style")}))},e.prototype.scrollIntoView=function(){var e,t,n,i=this.table,r=this.el,o=i.editor,a=i.containerEl,s=o.cm.scrollDOM,l=null;if((null===(e=o.tableCell)||void 0===e?void 0:e.cell)===this&&(l=o.tableCell.cm),a.scrollWidth>a.clientWidth){var c=a.getBoundingClientRect(),u=t=r.getBoundingClientRect();l&&t.width>c.width&&(u=n=l.coordsAtPos(l.state.selection.main.head)),u.left<c.left?a.scrollBy(u.left-c.left,0):u.right>c.right&&a.scrollBy(u.right-c.right,0)}if(s.scrollHeight>s.clientHeight){t||(t=r.getBoundingClientRect());var h=s.getBoundingClientRect(),d=t;l&&t.height>h.height&&(d=n||l.coordsAtPos(l.state.selection.main.head)),d.top<h.top?s.scrollBy(0,d.top-h.top):d.bottom>h.bottom&&s.scrollBy(0,d.bottom-h.bottom)}},e}(),xB=Je.define(),TB=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.rows=[],o.alignments=[],o.colWidths=[],o.isMalformed=!1,o.tableEl=null,o.selectedCells=[],o.selectionAnchor=null,o.selectionHead=null,o.updateCellReadonly=mc((function(){var e=o,t=e.selectionAnchor,n=e.selectionHead,i=e.editor;if(i.tableCell){var r=!(!t||!n);i.tableCell.setReadonly(r)}}),50,!0),o.cellChildMap=new Map,o.doc=i,o.containerEl=createDiv({cls:"cm-embed-block cm-table-widget markdown-rendered",onpointerdown:function(e){e.target===e.currentTarget&&e.preventDefault()}}),o.isDocComplete=r,o}return f(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.doc.toString()},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.rows.length=0,this.alignments.length=0,this.containerEl.empty(),this.cleanupChildren()},t.prototype.getSelectedCell=function(e){if(!e)return null;for(var t=this.rows,n=null,i=0,r=e.ranges;i<r.length;i++){var o=r[i],a=o.from,s=o.to;if(n){var l=n.start,c=n.end;if(a>=l&&a<=c&&s>=l&&s<=c)continue;return null}for(var u=0,h=t;u<h.length;u++){for(var d=0,p=h[u];d<p.length;d++){var f=p[d];l=f.start,c=f.end;if(a>=l&&a<=c&&s>=l&&s<=c){n=f;break}}if(n)break}}return n},t.prototype.containsSelection=function(e){var t=this;return!!e&&e.ranges.every((function(e){var n=e.from,i=e.to;return t.containsRange(n,i)}))},t.prototype.containedBySelection=function(e){if(!e)return!1;var t=this.start,n=this.end;return e.ranges.some((function(e){var i=e.from,r=e.to;return i<=t&&r>=n}))},t.prototype.containsRange=function(e,t){var n=this.start,i=this.end;return e>=n&&e<=i&&t>=n&&t<=i},t.prototype.getTableString=function(e){for(var t=this.validateSelectionBounds(e),n=t.minRow,i=t.maxRow,r=t.minCol,o=t.maxCol,a=this,s=a.rows,l=a.alignments,c=a.colWidths,u="",h=n;h<=i;h++){for(var d=s[h],p=r;p<=o;p++){var f=d[p].text,m=c[p]-f.length,v=l[p],g=1,y=1;"right"===v?g=m-1:"center"===v?(g=Math.floor(m/2),y=Math.ceil(m/2)):y=m-1,u+="|"+" ".repeat(g)+f+" ".repeat(y)}u+="|",h===n&&(u+="\n"+this.makeAlignmentRow(r,o)),h!==i&&(u+="\n")}return u},t.prototype.makeAlignmentRow=function(e,t){for(var n=this.alignments,i=this.colWidths,r="",o=e;o<=t;o++){var a=i[o];switch(n[o]){case"left":r+="| :"+"-".repeat(a-3)+" ";break;case"center":r+="| :"+"-".repeat(a-4)+": ";break;case"right":r+="| "+"-".repeat(a-3)+": ";break;default:r+="| "+"-".repeat(a-2)+" "}}return r+="|"},t.prototype.rebuildTable=function(){var e=this,t=e.editor,n=e.rows,i=e.alignments,r=this.getTableString({minRow:0,maxRow:n.length-1,minCol:0,maxCol:i.length-1}),o=t.cm,a=this.doc=o.state.toText(r);return r&&this.render(),a},t.prototype.dispatchTable=function(e,t,n){var i=this,r=i.start,o=i.end,a=i.editor.cm,s=a.state.selection,l=this.rebuildTable();if(l.length&&void 0!==e&&void 0!==t){var c=this.rows,u=this.alignments;e=Math.clamp(e,0,c.length-1),t=Math.clamp(t,0,u.length-1);var h=this.getCellAt(e,t);if(h){var d=h.getAbsoluteOffsets().textStart,p=d,f=n?function(e){var t=n(e),i=wm(e.state.doc.toString()),r=t.map(i.changes).main;return d+=r.from,p+=r.to,t}:void 0;this.receiveCellFocus(h.row,h.col,f),s=Ee.single(d,p)}}a.dispatch({selection:s,changes:[{from:r,to:o,insert:l}],scrollIntoView:!1})},t.prototype.trimCell=function(e){var t=e.text,n=t.trim();t!==n&&(this.isMalformed=!0,this.updateCell(e,n))},t.prototype.dispatchUpdate=function(e,t){var n,i=this,r=i.doc,o=i.editor,a=i.start,s=e.cell,l=[xB.of(!0)],c=t.annotation(it.userEvent);c&&!/^select/.test(c)&&l.push(it.userEvent.of(c));var u=wm(t.newDoc.toString());if(t.docChanged||u.result!==s.text){var h=this.updateCell(s,u.result);h.length&&(n=h.map((function(e){return{from:e.from+a,to:e.to+a,insert:e.insert}})),this.doc=ve.of(h,r.length).apply(r))}var d=s.getAbsoluteOffsets(),p=d.textStart,f=d.textEnd-p,m=t.newSelection.map(u.changes);m=bm(m,0,f),o.cm.dispatch({annotations:l,changes:n,selection:ym(m,p),scrollIntoView:!1})},t.prototype.reconcileChanges=function(e,t){var n,i=this,r=this,o=r.start,a=r.end,s=r.tableEl,l=r.doc;if(!s)return null;var c=!0,u=new Map,h=[],d=l.line(2),p=null;if(t.changes.iterChanges((function(t,n,r,s,l){if(c)if(t<o&&n>o||t<a&&n>a)c=!1;else if(i.containsRange(t,n)){var f=t-o,m=n-o;if(pm(d,f,m))f!==d.from||m!==d.to?c=!1:(h.push({from:f,to:m,insert:l}),p=l);else if(t===o&&n===a&&e.eq(l))c=!1;else{var v=i.getSelectedCell(Ee.single(f,m));if(v){var g=u.get(v);g||(g=[],u.set(v,g));var y=v.getAbsoluteOffsets().start;g.push({from:t-y,to:n-y,insert:l}),h.push({from:f,to:m,insert:l})}else c=!1}}})),!c)return null;l=ve.of(h,l.length).apply(l);var f=p?p.length-d.length:0;if(u.size)this.applyCellUpdates(t,u,f);else{var m=null===(n=this.rows.first())||void 0===n?void 0:n.last();m&&0!==f&&this.offsetCellsAfter(m,f)}return l},t.prototype.receiveUpdate=function(e,t){var n=this.doc;if(!this.isDocComplete)return this.isDocComplete=!0,!!MB(n,t)&&(this.doc=t,this.render(),!0);var i=t.eq(n);if(!e.docChanged||e.annotation(xB))return i;var r=!1,o=this.editor.tableCell;if(o&&(e.isUserEvent("undo")||e.isUserEvent("redo"))){var a=o.cell.getAbsoluteOffsets(),s=a.start,l=a.end;e.changes.touchesRange(s,l)&&(r=!0)}if(!r&&i)return!0;var c=this.reconcileChanges(t,e);return c&&c.eq(t)?(this.doc=c,!0):(this.doc=t,this.render(),!0)},t.prototype.receiveIncompleteUpdate=function(e,t){if(!e.docChanged||e.annotation(xB))return MB(this.doc,t);var n=this.doc,i=this.reconcileChanges(t,e);return i&&(this.doc=n=i),MB(n,t)},t.prototype.applyCellUpdates=function(e,t,n){var i,r=this,o=r.start,a=r.editor,s=r.colWidths,l=r.rows,c=a.cm,u=c.hasFocus,h=[],d=Array.from(t.entries()),p=new Set;d.sort((function(e,t){return t[0].start-e[0].start}));for(var f=0,m=d;f<m.length;f++){var v=m[f],g=v[0],y=v[1],b=g.getAbsoluteOffsets(),w=b.start,k=b.end,C=c.state.doc.slice(w,k),M=ve.of(y,C.length).apply(C).toString().match(/^(\s*)(.*?)(\s*)$/);if(M){var E=g.start,S=g.end;g.padStart=M[1].length,g.text=M[2],g.padEnd=M[3].length,g.dirty=!0;var x=g.end=E+g.getLength();S!==x&&(this.isMalformed=!0,p.add(g.col)),this.offsetCellsAfter(g,x-S),h.push(g)}}var T=null===(i=this.rows.first())||void 0===i?void 0:i.last();if(T&&0!==n&&this.offsetCellsAfter(T,n),this.isMalformed)for(var D=0,A=Array.from(p);D<A.length;D++){for(var L=A[D],P=5,I=0,F=l;I<F.length;I++){var O=F[I][L].text.length;P=Math.max(P,O+2)}s[L]=P}var B=null,N=null;if(e.selection&&(B=this.getSelectedCell(ym(e.selection,-o)))){var R=B.getAbsoluteOffsets(),H=R.textStart,V=R.textEnd,z=bm(e.selection,H,V);N=ym(z,-H)}var q=a.tableCell;if(q&&q.table===this){g=q.cell;var U=q.cm;if(g.dirty||B===g){var _=km(g.text),W=ve.of(_.changes,g.text.length),j=(y=void 0,void 0);g.dirty&&(y=[{from:0,to:U.state.doc.length,insert:_.result}]),B===g&&(j=null==N?void 0:N.map(W)),(y||j)&&U.dispatch({changes:y,selection:j,annotations:[xB.of(!0)]})}h.remove(g)}for(var G=0,K=h;G<K.length;G++){g=K[G];this.rerenderCell(g)}if(u&&B&&(!q||q.cell!==B)){_=km((g=B).text);var Y=ve.of(_.changes,g.text.length);this.receiveCellFocus(g.row,g.col,(function(){return null==N?void 0:N.map(Y)}))}},t.prototype.receiveSelection=function(e){var t,n,i=this,r=this,o=r.rows,a=r.start,s=r.end,l=r.editor,c=r.tableEl,u=e.isUserEvent("undo")||e.isUserEvent("redo");if(c&&a!==s&&(u||l.cm.hasFocus||(null===(t=l.tableCell)||void 0===t?void 0:t.cm.hasFocus))&&!e.annotation(xB)&&!e.annotation(lm)&&this.containsSelection(e.newSelection)){var h=e.newSelection,d=this.getSelectedCell(ym(h,-a));if(d){var p=l.tableCell,f=(null==p?void 0:p.cell)===d;if(f&&!u)return;var m=d.getAbsoluteOffsets(),v=m.textStart,g=m.textEnd,y=km(d.text),b=ym(h=bm(h,v,g),-v).map(y.changes);if(f){var w=p.editor.cm;l.cm.hasFocus&&w.focus(),w.dispatch({annotations:[xB.of(!0)],selection:b}),this.selectionHead||d.scrollIntoView()}else this.receiveCellFocus(d.row,d.col,(function(){return b}))}else{var k=h.ranges;if(1===k.length){var C=k[0];if(C.from===C.to){var M=null===(n=e.startState.selection)||void 0===n?void 0:n.ranges,E=(null==M?void 0:M.length)?M[0]:null;if(E){var S=this.containerEl.win;if(E.head<=a){var x=o.first().first();x&&S.setTimeout((function(){i.placeCursorInCell(x,"start")}))}else{var T=o.last().first();T&&S.setTimeout((function(){i.placeCursorInCell(T,"last-line")}))}}}}}}},t.prototype.offsetCellsAfter=function(e,t){for(var n=this.rows,i=n[e.row],r=e.col+1,o=i.length;r<o;r++)i[r].start+=t,i[r].end+=t;for(r=e.row+1,o=n.length;r<o;r++)for(var a=0,s=n[r];a<s.length;a++){var l=s[a];l.start+=t,l.end+=t}},t.prototype.updateCell=function(e,t){var n=this,i=n.rows,r=n.colWidths,o=n.alignments,a=e.col,s=5;e.text=t,e.dirty=!0;for(var l=0,c=i;l<c.length;l++){var u=(y=c[l][a]).text.length;s=Math.max(s,u+2)}var h=[],d=r[a]!==s,p=0;r[a]=s;for(var f=0,m=i.length;f<m;f++){for(var v=0,g=i[f];v<g.length;v++){var y,b=(y=g[v]).padStart,w=y.padEnd,k=y.start,C=y.end;if(y.col===a){y.updateWidth(s);var M=y.padStart,E=y.padEnd;if(y!==e)y.start+=p,M!==b&&(p+=M-b,h.push({from:k,to:k+b,insert:" ".repeat(M)})),E!==w&&(p+=E-w,h.push({from:C-w,to:C,insert:" ".repeat(E)})),y.end+=p;else{var S=y.getTextWithPadding();y.start=k+p,y.end=k+p+S.length,p=y.end-C,h.push({from:k,to:C,insert:S})}}else p&&(y.start+=p,y.end+=p)}if(0===f&&d){var x=this.doc.line(2),T=this.makeAlignmentRow(0,o.length-1);p+=T.length-x.length,h.push({from:x.from,to:x.to,insert:T})}}return h},t.prototype.setCellFocus=function(e,t,n){this.isMalformed?this.dispatchTable(e,t,n):this.receiveCellFocus(e,t,n,!0)},t.prototype.receiveCellFocus=function(e,t,n,i){void 0===i&&(i=!1);var r=this,o=r.rows,a=r.alignments,s=r.editor,l=Math.clamp(e,0,o.length-1),c=Math.clamp(t,0,a.length-1),u=o[l][c],h=s.editTableCell(this,u),d=h.editor.cm;return n&&d.dispatch({annotations:i?[]:[xB.of(!0)],selection:n(d)}),this.selectionHead||u.scrollIntoView(),this.updateCellReadonly(),h},t.prototype.setAlignment=function(e,t){for(var n=this.alignments,i=0,r=e;i<r.length;i++){var o=r[i];if(!(o<0||o>=n.length)){var a="rtl"===getComputedStyle(this.tableEl).direction,s=null;"start"===t?s=a?"right":"left":"end"===t?s=a?"left":"right":"center"===t&&(s="center"),n[o]=s;for(var l=0,c=this.rows;l<c.length;l++){c[l][o].el.setAttr("align",s)}}}this.dispatchTable()},t.prototype.insertRow=function(e,t,n){var i=this.rows;e=Math.clamp(e,0,i.length);for(var r=n?i[e]:null,o=[],a=0,s=this.alignments.length;a<s;a++){var l=r?r[a]:null;o.push(new SB(this,e,a,null==l?void 0:l.text,null==l?void 0:l.padStart,null==l?void 0:l.padEnd))}i.splice(e,0,o),this.dispatchTable(n?e+1:e,t)},t.prototype.moveRow=function(e,t,n){var i=this.rows;t>=i.length||t<0||(EB(i,e,t),this.dispatchTable(t,n))},t.prototype.removeRow=function(e,t){var n=this.rows;e<0||e>=n.length||(n.splice(e,1),this.cleanupChildren(),this.dispatchTable(e-1,t))},t.prototype.insertColumn=function(e,t,n,i){var r=this,o=r.rows,a=r.colWidths,s=r.alignments;if(!(t<0||t>s.length)){s.splice(t,0,n),a.splice(t,0,i?a[t]:5);for(var l=0;l<o.length;l++){var c=o[l],u=i?c[t]:null;c.splice(t,0,new SB(this,l,t,null==u?void 0:u.text,null==u?void 0:u.padStart,null==u?void 0:u.padEnd))}this.dispatchTable(e,i?t+1:t)}},t.prototype.moveColumn=function(e,t,n){var i=this,r=i.rows,o=i.alignments,a=i.colWidths;if(!(t>=o.length||t<0)){EB(o,e,t),EB(a,e,t);for(var s=0,l=r;s<l.length;s++){EB(l[s],e,t)}this.dispatchTable(n,t)}},t.prototype.removeColumn=function(e,t){var n=this.alignments,i=this.colWidths;if(!(t<0||t>=n.length)){if(n.splice(t,1),i.splice(t,1),0===n.length){var r=this,o=r.start,a=r.end,s=r.editor.cm;return s.dispatch({changes:[{from:o,to:a,insert:""}],selection:{anchor:o,head:o}}),void s.focus()}for(var l=0,c=this.rows;l<c.length;l++){c[l].splice(t,1)}this.cleanupChildren(),this.dispatchTable(e,t-1)}},t.prototype.sortByColumn=function(e,t,n){var i=this.rows,r=i[0],o=i.slice(1).sort((function(e,i){return n(e[t],i[t])}));this.rows=w([r],o,!0),this.dispatchTable(e,t)},t.prototype.addNewLine=function(e){var t=this.editor.cm;"before"===e?t.dispatch({changes:[{from:this.start,insert:"\n"}],selection:Ee.cursor(this.start),annotations:[xB.of(!0)],scrollIntoView:!0}):t.dispatch({annotations:[xB.of(!0)],changes:[{from:this.end,insert:"\n"}],selection:Ee.cursor(this.end+1),scrollIntoView:!0}),t.focus()},t.prototype.getCellAt=function(e,t){var n=this.rows[e];if(!n)return null;var i=n[t];return i||null},t.prototype.getNextCell=function(e,t){var n=e.row,i=e.col;if("end"===t){var r=this.rows[n];return i===r.length-1?n===this.rows.length-1?null:this.rows[n+1].first():r[i+1]}return 0===i&&0===n?null:0===i?this.rows[n-1].last():this.rows[n][i-1]},t.prototype.getCellAbove=function(e){var t=e.row,n=e.col;return this.getCellAt(t-1,n)},t.prototype.getCellBelow=function(e){var t=e.row,n=e.col;return this.getCellAt(t+1,n)},t.prototype.placeCursorAround=function(e){var t,n=this.editor.cm,i=n.state.doc;"before"===e?t=i.lineAt(this.start).number-1:t=i.lineAt(this.end).number+1;t<1?this.addNewLine("before"):t>i.lines?this.addNewLine("after"):(n.dispatch({selection:Ee.cursor(i.line(t).from)}),n.focus())},t.prototype.placeCursorInCell=function(e,t){this.setCellFocus(e.row,e.col,(function(e){var n=e.state.doc,i=0;if("end"===t)i=n.length;else if("last-line"===t){var r=n.length;i=e.moveToLineBoundary(Ee.range(r,r),!1,!0).from}return Ee.single(i,i)}))},t.prototype.getClosestCell=function(e,t){for(var n=this.rows,i=n[0],r=1/0,o=0,a=n;o<a.length;o++){var s=a[o];if((d=s.first().el.getBoundingClientRect()).top<=t&&t<=d.bottom){r=0,i=s;break}if((p=Math.min(Math.abs(d.bottom-t),Math.abs(d.top-t)))>r)break;i=s,r=p}for(var l=i[0],c=1/0,u=0,h=i;u<h.length;u++){var d,p,f=h[u];if((d=f.el.getBoundingClientRect()).left<=e&&e<=d.right){c=0,l=f;break}if((p=Math.min(Math.abs(d.left-e),Math.abs(d.right-e)))>c)break;l=f,c=p}return l},t.prototype.toDOM=function(){var e=this,t=this,n=t.containerEl,i=t.editor,r=t.isDocComplete;return t.tableEl||(r?this.render():n.onNodeInserted((function(){e.isDocComplete||e.tableEl||(n.addClass("is-loading"),n.style.height="".concat(1.1*i.containerEl.clientHeight,"px"))}),!0)),n},t.prototype.initDOM=function(){return this.containerEl},t.prototype.render=function(){var e=this,t=this,n=t.doc,i=t.containerEl,r=t.rows;this.clear();var o,a=pS(n.toString());if(jk(a,"table",(function(e){return o=e,jk.EXIT})),o){var s=this.alignments=o.align;if(null==s?void 0:s.length){var l=this.colWidths=s.map((function(){return 5})),c=qT(bS(a));if(null==c?void 0:c.firstChild.instanceOf(HTMLTableElement)){var u=c.firstChild;u.addClass("table-editor"),u.tabIndex=-1;var h=[];h.push.apply(h,Array.from(u.tHead.rows));for(var d=0,p=Array.from(u.tBodies);d<p.length;d++){var f=p[d];h.push.apply(h,Array.from(f.rows))}var m=s.length,v=m,g=!1;jk(o,"tableRow",(function(t){var i=[],o=r.length,a=h[o],c=!0;jk(t,"tableCell",(function(t){var r=t.position,u=t.padding,h=r.start,d=r.end,p=i.length,f=a.cells[p],v=n.sliceString(h.offset+u.start,d.offset-u.end);f||(g=!0,f=a.insertCell(p)),!c||v&&/^\s*:?\s*-+\s*:?\s*$/.test(v)||(c=!1);var y=new SB(e,o,p,v,u.start,u.end);if(y.init(f,h.offset,d.offset),i.push(y),e.postProcess(y),0===o&&e.createDragHandle(y,"col"),0===p&&e.createDragHandle(y,"row"),p>=m){g=!0;for(var b=m;b<=p;b++)s[b]=null,l[b]=5;m=s.length}l[p]=Math.max(l[p],v.length+2)})),c?g=!0:r.push(i)}));for(var y=0,b=r.length;y<b;y++){var w=(M=r[y]).length;if(w<m){g=!0,(E=u.rows[y])||(E=u.insertRow(y));for(var k=w;k<m;k++){(S=E.cells[k])||(S=E.insertCell(k)),(L=new SB(this,y,k)).init(S,-1,-1),M[k]=L}}}var C=n.line(n.lines).text;if(/^\|[^\|]*$/.test(C)||v!==m&&/^\|(?:\s*:?\s*-+\s*:?\s*\|)+$/.test(C)){g=!0;var M=[],E=(y=r.length,u.insertRow(y));r.push(M);for(k=0;k<m;k++){var S=E.insertCell();(L=new SB(this,y,k)).init(S,-1,-1),M[k]=L}}if(!g){var x=0;e:for(b=l.length;x<b;x++)for(var T=l[x],D=0,A=r;D<A.length;D++){var L;if((L=(M=A[D])[x]).end-L.start!==T){g=!0;break e}}}i.createDiv("table-wrapper",(function(t){t.append(u),t.createDiv("table-row-btn",(function(t){mx(t,"lucide-plus"),Rx(t,Qf.table.actionRowAfter()),t.addEventListener("pointerdown",(function(e){return e.preventDefault()})),t.addEventListener("click",(function(){return e.insertRow(e.rows.length,0)}))})),t.createDiv("table-col-btn",(function(t){mx(t,"lucide-plus"),Rx(t,Qf.table.actionColumnAfter()),t.addEventListener("pointerdown",(function(e){return e.preventDefault()})),t.addEventListener("click",(function(){return e.insertColumn(0,e.alignments.length,null)}))}))})),i.removeClass("is-loading"),i.removeAttribute("style"),i.addEventListener("click",(function(t){t.target===i&&e.placeCursorAround("after")})),this.isMalformed=g,this.tableEl=u;var P=this.selectionAnchor,I=this.selectionHead;P&&I&&(P=this.getCellAt(P.row,P.col),I=this.getCellAt(I.row,I.col),P&&I?this.selectCells(P,I):this.deselectCells())}}}},t.prototype.createDragHandle=function(e,t){var n=this,i=e.row,r=e.col,o=e.el,a=this.editor,s=this.containerEl,l="col"===t,c=l?s:a.cm.scrollDOM;o.createDiv("table-".concat(t,"-drag-handle"),(function(a){mx(a,"lucide-grip-".concat(l?"horizontal":"vertical")),a.dataset.ignoreSwipe="true",a.addEventListener("contextmenu",(function(t){var i=PA.forEvent(t);l?(n.makeSortMenu(i,e),n.makeColMenu(i,e)):n.makeRowMenu(i,e),i.showAtMouseEvent(t),i.onHide((function(){return n.deselectCells()}))})),a.addEventListener("pointerdown",(function(e){if(e.isPrimary&&0===e.button){var u=n.tableEl;e.preventDefault(),s.addClass("is-dragging"),l?(n.receiveCellFocus(0,r),n.selectCells(n.getCellAt(0,r),n.getCellAt(n.rows.length-1,r),!0)):(n.receiveCellFocus(i,0),n.selectCells(n.getCellAt(i,0),n.getCellAt(i,n.alignments.length-1),!0));var h=a.getBoundingClientRect(),d=u.getBoundingClientRect(),p=u.parentElement,f=parseInt(getComputedStyle(a).getPropertyValue("--table-border-width"));isNaN(f)&&(f=0);var m,v,g=l?u.rows[0].cells:u.rows,y=function(e,t){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i].getBoundingClientRect();n.push({index:i,left:o.left-e.left,top:o.top-e.top,right:o.right-e.left,bottom:o.bottom-e.top})}return n}(d,Array.from(g)),b=function(e){return{min:e[l?"left":"top"],max:e[l?"right":"bottom"]}},w=function(e){return l?e.x:e.y},k=function(){return l?o.scrollLeft:o.scrollTop},C=b(d),M=b(h),E=l?a.offsetLeft:a.offsetTop,S=k(),x=Bl(e),T=x,D=(M.min+M.max)/2-C.min,A=C.min-M.min+f,L=C.max-M.max-f,P=null,I=0,F=e.win,O=function(e){P=F.requestAnimationFrame(O);var n=e-I;0===I&&(n=50),I=e,fk(c,T,n);var o=S-k(),u=w(T)-w(x)-o,h=Math.clamp(D+u,0,C.max-C.min),f="".concat(Math.clamp(E+u,A,L),"px");a.style[l?"left":"top"]=f;for(var g=0,M=y;g<M.length;g++){var B=M[g],N=b(B);if(h>=N.min&&h<=N.max){m=B,v||(v=s.createDiv("table-drag-target mod-"+t));var R=l?{display:B.index===r?"none":"block",left:"".concat((B.index<r?B.left:B.right)+p.offsetLeft,"px"),top:"".concat(p.offsetTop,"px"),height:"".concat(d.height,"px")}:{display:B.index===i?"none":"block",left:"".concat(p.offsetLeft,"px"),top:"".concat((B.index<i?B.top:B.bottom)+p.offsetTop,"px"),width:"".concat(d.width,"px")};return void v.setCssStyles(R)}}};P=F.requestAnimationFrame(O),vk(e,(function(){return{move:function(e){T=Bl(e)},end:function(){if(m)if(l)if(r!==m.index&&n.moveColumn(r,m.index,0),"mouse"===e.pointerType){var t=n.rows.first()[m.index],o=n.rows.last()[m.index];n.selectCells(t,o)}else n.deselectCells();else if(i!==m.index&&n.moveRow(i,m.index,0),"mouse"===e.pointerType){t=n.rows[m.index].first(),o=n.rows[m.index].last();n.selectCells(t,o)}else n.deselectCells()},cleanup:function(){F.cancelAnimationFrame(P),a.style.left="",a.style.top="",null==v||v.detach(),v=null,s.removeClass("is-dragging")}}}),0)}}))}))},t.prototype.setActiveDragHandles=function(e){var t,n;null===(t=this.getCellAt(e.row,0))||void 0===t||t.el.addClass("mod-active-row-handle"),null===(n=this.getCellAt(0,e.col))||void 0===n||n.el.addClass("mod-active-col-handle")},t.prototype.unsetActiveDragHandles=function(e){var t,n;null===(t=this.getCellAt(e.row,0))||void 0===t||t.el.removeClass("mod-active-row-handle"),null===(n=this.getCellAt(0,e.col))||void 0===n||n.el.removeClass("mod-active-col-handle")},t.prototype.getSelectionBounds=function(){var e=this.selectionAnchor,t=this.selectionHead;return e&&t?this.validateSelectionBounds({minRow:Math.min(e.row,t.row),maxRow:Math.max(e.row,t.row),minCol:Math.min(e.col,t.col),maxCol:Math.max(e.col,t.col)}):null},t.prototype.validateSelectionBounds=function(e){var t=this.alignments,n=this.rows,i=e.minCol,r=e.maxCol,o=e.minRow,a=e.maxRow;return i<0&&(i=0),r>=t.length&&(r=t.length-1),o<0&&(o=0),a>=n.length&&(a=n.length-1),{minRow:o,maxRow:a,minCol:i,maxCol:r}},t.prototype.selectTable=function(){this.containerEl.addClass("is-selected")},t.prototype.deselectTable=function(){this.containerEl.removeClass("is-selected")},t.prototype.selectCells=function(e,t,n){if(void 0===n&&(n=!1),(this.selectionAnchor!==e||this.selectionHead!==t||n)&&(this.deselectCells(),e!==t)){this.selectionAnchor=e,this.selectionHead=t;var i=this.getSelectionBounds();if(i){for(var r=i.minRow,o=i.maxRow,a=i.minCol,s=i.maxCol,l=this.rows,c=[],u=r;u<=o;u++)for(var h=l[u],d=a;d<=s;d++){var p=h[d],f=["is-selected"];n&&f.push("mod-dragging"),d===a&&f.push("start"),d===s&&f.push("end"),u===r&&f.push("top"),u===o&&f.push("bottom"),p.el.addClasses(f),c.push(p)}this.selectedCells=c,this.containerEl.addClass("has-selection"),this.updateCellReadonly()}}},t.prototype.deselectCells=function(){var e=this.selectedCells;if(0!==e.length){this.selectionAnchor=null,this.selectionHead=null;for(var t=["mod-dragging","is-selected","start","end","top","bottom"],n=0,i=e;n<i.length;n++){i[n].el.removeClasses(t)}this.selectedCells=[],this.containerEl.removeClass("has-selection"),this.updateCellReadonly()}},t.prototype.deleteSelection=function(e){var t=this.getSelectionBounds();if(t){var n=t.minRow,i=t.maxRow,r=t.minCol,o=t.maxCol,a=this,s=a.alignments,l=a.colWidths,c=a.rows,u=a.selectionHead;if(this.deselectCells(),0===r&&o===s.length-1){var h=this,d=h.start,p=h.end,f=h.editor.cm,m=c.length;if(0===n&&i===m-1)return f.dispatch({changes:[{from:d,to:p,insert:""}],selection:{anchor:d}}),void f.focus();if(c.splice(n,i-n+1),this.cleanupChildren(),n>0&&i<m-1)return void this.dispatchTable(-1===e?n-1:n,u.col);var v=this.rebuildTable();return 0===n?v=ve.of([{from:0,insert:"\n"}],v.length).apply(v):i===m-1&&(v=ve.of([{from:v.length,insert:"\n"}],v.length).apply(v)),f.dispatch({selection:{anchor:0===n?d:d+v.length},changes:[{from:d,to:p,insert:v}],scrollIntoView:!1}),void f.focus()}if(0===n&&i===c.length-1){var g=o-r+1;s.splice(r,g),l.splice(r,g);for(var y=n;y<=i;y++)c[y].splice(r,g);return this.cleanupChildren(),void this.dispatchTable(u.row,-1===e?r-1:r)}for(var b=n;b<=i;b++)for(var w=c[b],k=r;k<=o;k++){var C=w[k];this.updateCell(C,"")}this.dispatchTable(-1===e?n:i,-1===e?r:o)}},t.prototype.copySelection=function(e,t){var n=this.getSelectionBounds();if(!n)return!1;for(var i=this.getTableString(n),r=n.minRow,o=n.maxRow,a=n.minCol,s=n.maxCol,l=this.rows,c=[],u=this.alignments.slice(a,s+1),h=r;h<=o;h++){for(var d=l[h],p=[],f=a;f<=s;f++){var m=d[f];p.push(m.text)}c.push(p)}return e.clipboardData.setData("text/plain",i),e.clipboardData.setData("obsidian/table",JSON.stringify({rows:c,alignment:u})),t&&this.deleteSelection(-1),!0},t.prototype.pasteSelection=function(e){var t,n,i=this.rows,r=this.alignments,o=this.getSelectionBounds();if(!(n=o?this.getCellAt(o.minRow,o.minCol):null===(t=this.editor.tableCell)||void 0===t?void 0:t.cell))return!1;var a,s,l=e.clipboardData.getData("obsidian/table");if(!l)return!1;try{var c=JSON.parse(l);a=c.rows,s=c.alignment}catch(e){return!1}var u=n.col,h=n.row,d=u+s.length-1,p=h+a.length-1;if(0===n.row)for(var f=u;f<=d;f++)r[f]=s[f-u];else{var m=r.length;for(f=m;f<=d;f++)r[f]=s[f-m]}for(var v=Math.max(p+1,i.length),g=r.length,y=0;y<v;y++){if((E=i[y])||(i[y]=E=[]),y<h||y>p)for(var b=0;b<g;b++)E[b]||(E[b]=new SB(this,y,b));else for(b=0;b<g;b++)b>=u&&b<=d?E[b]=new SB(this,y,b,a[y-h][b-u]):E[b]||(E[b]=new SB(this,y,b))}var w=this.colWidths;for(f=u;f<=d;f++){for(var k=5,C=0,M=i;C<M.length;C++){var E=M[C];k=Math.max(k,E[f].text.length+2)}if(k!==w[f]){w[f]=k;for(var S=0,x=i;S<x.length;S++){(E=x[S])[f].updateWidth(k)}}}return this.dispatchTable(p,d),!0},t.prototype.rerenderCell=function(e){var t;if(e.dirty)if(this.removeChildren(e),e.contentEl.empty(),e.text){var n=qT(bS(pS("| ".concat(e.text," |\n| - |")))).find("th"),i=(null==n?void 0:n.childNodes.length)?Array.from(n.childNodes):[createEl("br")];(t=e.contentEl).append.apply(t,i),e.dirty=!1,e.setTextDir(),this.postProcess(e)}else e.contentEl.createEl("br")},t.prototype.removeChildren=function(e){var t=this.cellChildMap;if(t.has(e)){var n=t.get(e);t.delete(e);for(var i=0,r=n;i<r.length;i++){var o=r[i];this.removeChild(o)}}},t.prototype.cleanupChildren=function(){for(var e,t=this,n=t.cellChildMap,i=t.rows,r=t.editor,o=new Set,a=0,s=i;a<s.length;a++)for(var l=0,c=s[a];l<c.length;l++){var u=c[l];o.add(u)}for(var h=0,d=Array.from(n.keys());h<d.length;h++){u=d[h];if(!o.has(u)){var p=n.get(u);n.delete(u);for(var f=0,m=p;f<m.length;f++){var v=m[f];this.removeChild(v)}}}(null===(e=r.tableCell)||void 0===e?void 0:e.table)!==this||o.has(r.tableCell.cell)||r.destroyTableCell()},t.prototype.postProcess=function(e){var t=this,n=this,i=n.app,r=n.cellChildMap,o=n.containerEl,a=n.editor,s=e.contentEl;r.set(e,[]),kB.postProcess(i,{docId:oc(16),sourcePath:a.path,frontmatter:void 0,promises:[],addChild:function(n){r.has(e)&&(r.get(e).push(n),t.addChild(n))},getSectionInfo:function(){return null},containerEl:o,el:s,displayMode:!1}),gB(i,s,a.path)},t.prototype.onContextMenu=function(e,t){var n=this,i=this.editor.editor.cm,r=this.selectedCells;if(r.length>0){if(Zl.isDesktopApp){var o=this.containerEl.win.electron;t.addItem((function(e){return e.setTitle(Qf.interface.menu.cut()).setSection("clipboard").setIcon("lucide-scissors").onClick((function(){o.remote.getCurrentWebContents().cut()}))})),t.addItem((function(e){return e.setTitle(Qf.interface.menu.copy()).setSection("clipboard").setIcon("lucide-copy").onClick((function(){o.remote.getCurrentWebContents().copy()}))})),t.addItem((function(e){return e.setTitle(Qf.interface.menu.paste()).setSection("clipboard").setIcon("lucide-clipboard-check").onClick((function(){o.remote.getCurrentWebContents().paste()}))}))}var a=r.first().getAbsoluteOffsets(),s=a.textStart,l=a.textEnd,c=Ee.range(s,l),u=rf(i.state,c);OA(t,this.editor.editor,u,"selection");var h=this.getSelectionBounds();if(h){for(var d=h.minRow,p=h.maxRow,f=h.minCol,m=h.maxCol,v=[],g=f;g<=m;g++)v.push(g);this.makeAlignmentMenu(t,v),t.addItem((function(e){return e.setSection("table").setIcon("lucide-eraser").setTitle(Qf.table.actionClearSelection()).onClick((function(){for(var e=d;e<=p;e++)for(var t=n.rows[e],i=f;i<=m;i++)t[i].text="";n.dispatchTable(d,f)}))}))}t.addItem((function(e){return e.setSection("table").setIcon("lucide-trash-2").setTitle(Qf.table.actionDeleteSelection()).onClick((function(){n.deleteSelection(-1)}))}))}else t.addItem((function(t){var i=t.setSection("table").setIcon("lucide-table").setTitle(Qf.table.labelRow()).setSubmenu();n.makeRowMenu(i,e)})),t.addItem((function(t){var i=t.setSection("table").setIcon("lucide-table").setTitle(Qf.table.labelColumn()).setSubmenu();n.makeColMenu(i,e)})),this.makeSortMenu(t,e)},t.prototype.makeColMenu=function(e,t){var n=this;e.addItem((function(e){return e.setSection("table-add").setIcon("lucide-arrow-left").setTitle(Qf.table.actionColumnBefore()).onClick((function(){var e=n.alignments[t.col];n.insertColumn(t.row,t.col,e)}))})),e.addItem((function(e){return e.setSection("table-add").setIcon("lucide-arrow-right").setTitle(Qf.table.actionColumnAfter()).onClick((function(){var e=n.alignments[t.col];n.insertColumn(t.row,t.col+1,e)}))})),t.col<this.alignments.length-1&&e.addItem((function(e){return e.setSection("table-move").setIcon("lucide-arrow-right").setTitle(Qf.table.actionColumnRight()).onClick((function(){n.moveColumn(t.col,t.col+1,t.row)}))})),t.col>0&&e.addItem((function(e){return e.setSection("table-move").setIcon("lucide-arrow-left").setTitle(Qf.table.actionColumnLeft()).onClick((function(){n.moveColumn(t.col,t.col-1,t.row)}))})),this.makeAlignmentMenu(e,[t.col]),e.addItem((function(e){return e.setSection("table-modify").setIcon("lucide-copy").setTitle(Qf.table.actionDuplicateColumn()).onClick((function(){var e=n.alignments[t.col];n.insertColumn(t.row,t.col,e,!0)}))})),e.addItem((function(e){return e.setSection("table-modify").setIcon("lucide-trash-2").setTitle(Qf.table.actionDeleteColumn()).onClick((function(){n.removeColumn(t.row,t.col)}))}))},t.prototype.makeAlignmentMenu=function(e,t){var n=this;e.addItem((function(e){return e.setSection("table-align").setIcon("lucide-align-left").setTitle(Qf.table.actionAlignLeft()).onClick((function(){n.setAlignment(t,"start")}))})),e.addItem((function(e){return e.setSection("table-align").setIcon("lucide-align-center").setTitle(Qf.table.actionAlignCenter()).onClick((function(){n.setAlignment(t,"center")}))})),e.addItem((function(e){return e.setSection("table-align").setIcon("lucide-align-right").setTitle(Qf.table.actionAlignRight()).onClick((function(){n.setAlignment(t,"end")}))}))},t.prototype.makeRowMenu=function(e,t){var n=this;e.addItem((function(e){return e.setSection("table-add").setIcon("lucide-arrow-up").setTitle(Qf.table.actionRowBefore()).onClick((function(){n.insertRow(t.row,t.col)}))})),e.addItem((function(e){return e.setSection("table-add").setIcon("lucide-arrow-down").setTitle(Qf.table.actionRowAfter()).onClick((function(){n.insertRow(t.row+1,t.col)}))})),t.row>0&&e.addItem((function(e){return e.setSection("table-move").setIcon("lucide-arrow-up").setTitle(Qf.table.actionRowUp()).onClick((function(){n.moveRow(t.row,t.row-1,t.col)}))})),t.row!==this.rows.length-1&&e.addItem((function(e){return e.setSection("table-move").setIcon("lucide-arrow-down").setTitle(Qf.table.actionRowDown()).onClick((function(){n.moveRow(t.row,t.row+1,t.col)}))})),e.addItem((function(e){return e.setSection("table-modify").setIcon("lucide-copy").setTitle(Qf.table.actionDuplicateRow()).onClick((function(){n.insertRow(t.row,t.col,!0)}))})),e.addItem((function(e){return e.setSection("table-modify").setIcon("lucide-trash-2").setTitle(Qf.table.actionDeleteRow()).onClick((function(){n.removeRow(t.row,t.col)}))}))},t.prototype.makeSortMenu=function(e,t){var n=this;e.addItem((function(e){return e.setSection("table-sort").setIcon("lucide-arrow-down-az").setTitle(Qf.table.actionSortAZ()).onClick((function(){var e=n.rows.map((function(e){return e.map((function(e){return e.contentEl.innerText}))}));n.sortByColumn(t.row,t.col,(function(t,n){return xm(e[t.row][t.col],e[n.row][n.col])}))}))})),e.addItem((function(e){return e.setSection("table-sort").setIcon("lucide-arrow-up-az").setTitle(Qf.table.actionSortZA()).onClick((function(){var e=n.rows.map((function(e){return e.map((function(e){return e.contentEl.innerText}))}));n.sortByColumn(t.row,t.col,(function(t,n){return xm(e[n.row][n.col],e[t.row][t.col])}))}))}))},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){var e=this.containerEl.offsetHeight;return e>0?e:50},enumerable:!1,configurable:!0}),t.cellSanitizerPlugin=function(e){return ft.changeFilter.of((function(t){if(!e.tableCell||!t.docChanged||t.annotation(xB))return!0;if(t.isUserEvent("set"))return e.destroyTableCell(),!0;var n=e.tableCell.cell,i=n.getAbsoluteOffsets(),r=i.textStart,o=i.textEnd,a=!1,s=[];if(t.changes.iterChanges((function(e,t,n,i,l){a||(e<r||t>o?a=!0:s.push({from:e-r,to:t-r,insert:l}))})),a)return!0;var l=n.text,c=ve.of(s,l.length),u=t.startState.toText(l),h=km(l),d=km(c.apply(u).toString()),p=c.map(h.changes),f=ym(t.newSelection,-r).map(d.changes),m=[],v=t.annotation(it.userEvent);v&&m.push(it.userEvent.of(v));var g=e.tableCell.cm;return g.dom.win.setTimeout((function(){g.dispatch({annotations:m,selection:f,changes:p})})),[r-1,o+1]}))},t.detectSurroundingClick=function(e){return Xo.domEventHandlers({pointerdown:function(n,i){if(0===n.button||n.isPrimary){var r=i.posAtCoords({x:n.clientX,y:n.clientY},!1),o=JD(i.state.doc)+1,a=i.state.doc.length;r>o&&r<a||i.state.field(e).between(r,r,(function(e,n,o){if(o.spec.widget instanceof t)return i.dispatch({changes:[{from:r,insert:"\n"}],selection:Ee.cursor(0===r?0:r+1),annotations:[xB.of(!0)]}),i.focus(),!1}))}}})},t}(iA);function DB(e,t){return ft.transactionFilter.of((function(n){if(!n.docChanged||e.tableCell||n.isUserEvent("set")||n.annotation(xB)||e.cm.composing)return n;var i=n.startState.field(t).update({filter:function(e,t,n){return n.spec.widget instanceof TB}});return 0===i.size?n:n.isUserEvent("delete.backward")?function(e,t){var n=[],i=[],r=e.startState,o=r.doc,a=r.selection,s=!1;return e.changes.iterChanges((function(e,r,a,l,c){var u;a===l&&e+1===r&&0===c.length&&t.between(e-1,r+1,(function(t,i){if(i===e){var a=Zl.isAndroidApp&&t>0?t-1:t;return u=Ee.range(r,a),!1}if(t===r+1&&""!==o.lineAt(r-1).text.trim())return u=Ee.cursor(e),n.push({from:e,to:r,insert:"\n"}),!1})),u?(s=!0,i.push(u)):(n.push({from:e,to:r,insert:c}),i.push(Ee.cursor(e)))})),s?{changes:n,selection:Ee.create(i,a.mainIndex),annotations:[it.userEvent.of("delete.backward"),xB.of(!0)]}:e}(n,i):function(e,t){var n=[],i=e.newDoc,r=JD(e.newDoc);return e.changes.iterChanges((function(o,a){t.between(o,a+1,(function(t){if(!(a>t)&&o!==r){var s=e.changes.mapPos(t);return s>0&&""!==i.lineAt(s-1).text.trim()?(n.push({insert:"\n",from:s}),!1):void 0}}))})),n.length?[e,{annotations:[xB.of(!0)],changes:n,sequential:!0}]:e}(n,i)}))}function AB(e){for(var t=0;e.startsWith("\t");)e=e.substring(1),t++;for(;e.startsWith("    ");)e=e.substring(4),t++;return t}var LB=/^\s*(?:> |#{1,6} |([-_*])(\s*\1){2,}\s*$|~~~|```)/;function PB(e){return ft.transactionFilter.of((function(t){if(!t.docChanged||e.tableCell||t.isUserEvent("set")||t.isUserEvent("input.renumber")||t.annotation(xB)||e.cm.composing)return t;var n=t.newDoc,i=t.startState.doc,r=new Map;function o(e){if(r.has(e))return r.get(e);var t=Im.exec(e);return r.set(e,t),t}var a=[],s=[],l=[];t.changes.iterChangedRanges((function(e,t,i,r){l.push({from:i,to:r});for(var o=n.lineAt(i),a=n.lineAt(r),c=o.number;c<=a.number+1;c++)s.push(c)})),s=ic(s).sort(Dm);for(var c=new Set,u=function(e){if(!c.has(e.number)){c.add(e.number);var r=o(e.text);if(r&&r[0]&&r[4]){var s=r[1],u=AB(s),h=r[5],d=function(e,t,n,i){for(var r=null,o=!1,a=t-1;a>=1;a--){var s=e.line(a);if(s.text){var l=i(s.text);if(l&&l[0])if(l[2]){var c=AB(l[1]);if(c===n){l[4]&&(r=parseInt(l[4],10));break}if(c<n)break}else o=!0;else{if(LB.test(s.text))break;o=!0}}else if(o)break}return r}(n,e.number,u,o);if(null===d){d=1;for(var p=!1,f=0,m=l;f<m.length;f++){if(pm(m[f],e.from,e.to))if(!(g=o((v=i.lineAt(t.changes.invertedDesc.mapPos(e.to))).text))||g[2]!==r[2]){p=!0;break}}if(p)d=parseInt(r[4],10);else{var v,g,y=t.changes.invertedDesc.mapPos(e.to);(g=o((v=i.lineAt(y)).text))&&AB(g[1])===u&&(d=function(e,t,n,i){for(var r=1,o=!1,a=t;a>=1;a--){var s=e.line(a);if(s.text){var l=i(s.text);if(l&&l[0])if(l[2]){var c=AB(l[1]);if(c===n&&l[4]&&(r=parseInt(l[4],10)),c<n)break}else o=!0;else{if(LB.test(s.text))break;o=!0}}else if(o)break}return r}(i,v.number,u,o))}}else d++;String(d)!==r[4]&&a.push({insert:d+h,from:e.from+s.length,to:e.from+s.length+r[3].length});for(var b=!1,w=e.number+1;w<=n.lines;w++)if(!c.has(w)){var k=n.line(w);if(k.text){var C=o(k.text);if(C&&C[0]){var M=AB(C[1]);if(!M||C[2]){if(M===u){if(!C[4])break;if(d++,String(d)===C[4]){c.add(w);break}a.push({insert:d+C[5],from:k.from+s.length,to:k.from+s.length+C[3].length}),c.add(w)}if(M<u)break}}else if(b||LB.test(k.text))break}else b=!0}}}},h=0,d=s;h<d.length;h++){var p=d[h];p<=n.lines&&u(n.line(p))}return a.length?[t,{changes:a,sequential:!0,userEvent:"input.renumber"}]:t}))}function IB(e){var t=Im.exec(e);return t&&t[0]?t[0]:null}function FB(e,t,n){var i=!1;return e.iterate({from:t,to:n,enter:function(e){var t=e.type,n=t.prop(_p);n&&n.contains("HyperMD-codeblock")&&(i=!0);var r=t.prop(Up);r&&r.contains("hmd-indented-code")&&(i=!0)}}),i}var OB=function(){function e(e){var t=this;this.decorations=Yn.none,this.indentCache=new Map,this.markCache=new Map,this.requestUpdateDom=gc(this.updateDom.bind(this)),this.view=e,this.observer=new MutationObserver((function(e){return t.checkMutations(e)})),this.observe(),this.buildDeco(e)}return e.prototype.destroy=function(){this.observer.disconnect()},e.prototype.update=function(t){var n=this.indentCache;gm(t.transactions,e.clearCache)&&(n.clear(),this.markCache.clear()),(t.docChanged||t.viewportChanged||t.geometryChanged||t.selectionSet||t.focusChanged||this.tree!==Kh(t.view.state))&&(this.buildDeco(t.view),this.requestUpdateDom())},e.prototype.buildDeco=function(e){var t=this.indentCache,n=e.defaultCharacterWidth,i=new kt,r=this.markCache,o=Kh(e.state);this.tree=o;for(var a=0,s=e.viewportLineBlocks;a<s.length;a++){var l=s[a],c=e.state.doc.lineAt(l.from),u=c.number,h=IB(c.text);if(h&&!FB(o,c.from,c.from+h.length)){var d=this.getCached(u,h);d||(d={text:h,size:Math.floor(It(h,e.state.tabSize)*n),dirty:!1});var p=d.size;if(p>0){var f=r.get(p);f||(f=Yn.line({attributes:{style:"text-indent:".concat(-p,"px;padding-inline-start:").concat(p,"px")}}),r.set(p,f)),i.add(c.from,c.from,f)}}else t.delete(u)}this.decorations=i.finish()},e.prototype.observe=function(){this.observer.observe(this.view.contentDOM,{subtree:!0,childList:!0,characterData:!0})},e.prototype.checkMutations=function(e){for(var t=this.view,n=t.contentDOM,i=new Set,r=0,o=e;r<o.length;r++){for(var a=o[r].target;a.parentNode&&a.parentNode!==n;)a=a.parentNode;a&&n.contains(a)&&i.add(a)}for(var s=!1,l=0,c=Array.from(i);l<c.length;l++){var u=c[l];if(u.instanceOf(HTMLElement)&&u.hasClass("cm-line")){var h=t.posAtDOM(u),d=t.state.doc.lineAt(h),p=this.indentCache.get(d.number);p&&(p.dirty=!0,s=!0)}}s&&this.requestUpdateDom()},e.prototype.getCached=function(e,t){var n=this.indentCache,i=n.get(e);if(i&&i.text===t)return i;var r=n.get(e-1);if(r&&r.text===t)return r;var o=n.get(e+1);return o&&o.text===t?o:i&&i.text.length===t.length?i:null},e.prototype.updateDom=function(){var e=this.requestUpdateDom,t=this.view.scrollDOM;this.view.coordsAtPos(0);var n=t.scrollTop;try{this.requestUpdateDom=function(){},Object.defineProperty(t,"scrollTop",{configurable:!0,get:function(){return n},set:function(){return 0}});var i=this.observer.takeRecords();this.observer.disconnect(),i.length>0&&this.checkMutations(i),this.updateDomInternal()}finally{this.requestUpdateDom=e,this.observe(),delete t.scrollTop}},e.prototype.updateDomInternal=function(){var e=this.view,t=this.indentCache,n=e.contentDOM;if(n.offsetParent){for(var i=this.tree,r=[],o=0,a=Array.from(n.childNodes);o<a.length;o++){if((v=a[o]).instanceOf(HTMLElement)&&v.hasClass("cm-line")&&"false"!==v.contentEditable){var s=e.posAtDOM(v),l=e.state.doc.lineAt(s);if(i.length<l.to)break;if((g=IB(l.text))&&!FB(i,l.from,l.from+g.length))(b=t.get(l.number))&&b.text===g&&!b.dirty||r.push({lineEl:v,pos:l.from,line:l.number,text:g})}}if(0!==r.length){for(var c=0,u=r;c<u.length;c++){(v=u[c].lineEl).style.textIndent="",v.style.paddingInlineStart=""}for(var h=[],d=!1,p=0,f=r;p<f.length;p++){var m=f[p],v=m.lineEl,g=(s=m.pos,l=m.line,m.text),y=e.coordsAtPos(s+g.length,1);if(y){var b,w=e.textDirectionAt(s),k=0,C=v.getBoundingClientRect(),M=getComputedStyle(v),E=0;if(E=w===ai.LTR?C.left+parseFloat(M.borderLeft):C.right-parseFloat(M.borderRight),(k=Math.floor(Math.abs((w===ai.LTR?y.right:y.left)-E)))&&k>v.offsetWidth/2){if(!(y=e.coordsAtPos(s+g.length,-1)))continue;k=Math.floor(Math.abs((w===ai.LTR?y.right:y.left)-E))}if(k)(b=t.get(l))&&b.size===k?(b.text=g,b.dirty=!1):(t.set(l,{text:g,size:k,dirty:!1}),d=!0),h.push({lineEl:v,size:k})}}for(var S=0,x=h;S<x.length;S++){var T=x[S];v=T.lineEl,k=T.size;v.style.textIndent="".concat(-k,"px"),v.style.paddingInlineStart="".concat(k,"px")}d&&this.buildDeco(this.view)}}},e.clearCache=nt.define(),e}(),BB=Xi.define((function(e){return new OB(e)}),{decorations:function(e){return e.decorations}});var NB=function(){function e(e,t,n,i,r,o,a,s,l){this.left=e,this.top=t,this.height=n,this.fontFamily=i,this.fontSize=r,this.fontWeight=o,this.color=a,this.className=s,this.letter=l}return e.prototype.draw=function(){var e=document.createElement("div");return e.className=this.className,this.adjust(e),e},e.prototype.adjust=function(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.fontFamily=this.fontFamily,e.style.fontSize=this.fontSize,e.style.fontWeight=this.fontWeight,e.className=this.className,e.textContent=this.letter},e.prototype.eq=function(e){return this.left==e.left&&this.top==e.top&&this.height==e.height&&this.className==e.className&&this.letter==e.letter},e}(),RB=function(){function e(e,t){this.view=e,this.rangePieces=[],this.cursors=[],this.cm=t,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}return e.prototype.setBlinkRate=function(){var e=Ca(this.cm.cm6.state).cursorBlinkRate;this.cursorLayer.style.animationDuration=e+"ms"},e.prototype.update=function(e){(e.selectionSet||e.geometryChanged||e.viewportChanged||gm(e.transactions,mV))&&(this.scheduleRedraw(),this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),function(e){return Ca(e.startState)!=Ca(e.state)}(e)&&this.setBlinkRate()},e.prototype.scheduleRedraw=function(){this.view.requestMeasure(this.measureReq)},e.prototype.readPos=function(){for(var e=this.view.state,t=[],n=0,i=e.selection.ranges;n<i.length;n++){var r=i[n],o=r==e.selection.main,a=VB(this.cm,this.view,r,o);a&&t.push(a)}return{cursors:t}},e.prototype.drawSel=function(e){var t=this,n=e.cursors;if(n.length!=this.cursors.length||n.some((function(e,n){return!e.eq(t.cursors[n])}))){var i=this.cursorLayer.children;if(i.length!==n.length){this.cursorLayer.textContent="";for(var r=0,o=n;r<o.length;r++){var a=o[r];this.cursorLayer.appendChild(a.draw())}}else n.forEach((function(e,t){return e.adjust(i[t])}));this.cursors=n}},e.prototype.destroy=function(){this.cursorLayer.remove()},e}(),HB=Ve.highest(Xo.theme({".cm-vimMode .cm-line":{caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",border:"none",whiteSpace:"pre"},"&.cm-focused > .cm-scroller > .cm-cursorLayer > .cm-fat-cursor":{background:"var(--interactive-accent)",color:"var(--text-on-accent)"},"&:not(.cm-focused) > .cm-scroller > .cm-cursorLayer > .cm-fat-cursor":{color:"transparent !important"}}));function VB(e,t,n,i){var r,o,a=t.dom.ownerDocument.defaultView.HTMLElement,s=n.head,l=!1,c=e.state.vim;if(c&&(!c.insertMode||e.state.overwrite)){if(l=!0,c.visualBlock&&!i)return null;if(n.anchor<n.head)"\n"!=(m=s<t.state.doc.length&&t.state.sliceDoc(s,s+1))&&s--}if(l){var u=t.coordsAtPos(s,1);if(!u)return null;var h=function(e){var t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==ai.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}(t),d=t.contentDOM,p=t.domAtPos(s);if(p){d=p.node;var f=p.node.childNodes[p.offset];if(f){for(;f instanceof a&&f.firstChild instanceof a;)f=f.firstChild;d=f}}d=d.instanceOf(a)?d:d.parentNode;var m,v=getComputedStyle(d);(m=s<t.state.doc.length&&t.state.sliceDoc(s,s+1))&&/[\uDC00-\uDFFF]/.test(m)&&s>1&&(s--,m=t.state.sliceDoc(s,s+1));var g=u.left,y=null===(o=(r=t).coordsForChar)||void 0===o?void 0:o.call(r,s);if(y&&(g=y.left),m&&"\n"!=m&&"\r"!=m)if("\t"==m){m="Â ";var b=t.coordsAtPos(s+1,-1);b&&(g=b.left-(b.left-u.left)/parseInt(v.tabSize))}else/[\uD800-\uDBFF]/.test(m)&&s<t.state.doc.length-1&&(m+=t.state.sliceDoc(s+1,s+2));else m="Â ";var w=u.bottom-u.top;return new NB(g-h.left,u.top-h.top,w,v.fontFamily,v.fontSize,v.fontWeight,v.color,i?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",m)}return null}var zB=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=t.changeByRange((function(e){var n=e.from,i=e.to,r=t.doc.lineAt(n),o=n==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};var n,i=Kh(e).resolveInner(t),r=i.childBefore(t),o=i.childAfter(t);return r&&o&&r.to<=t&&o.from>=t&&(n=r.type.prop(bu.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(r.to,o.from))?{from:r.to,to:o.from}:null}(t,n);var a=new md(t,{simulateBreak:n,simulateDoubleBreak:!!o}),s=pd(a,n);for(null==s&&(s=It(/^\s*/.exec(t.doc.lineAt(n).text)[0],t.tabSize));i<r.to&&/\s/.test(r.text[i-r.from]);)i++;o?(n=o.from,i=o.to):n>r.from&&n<r.from+100&&!/\S/.test(r.text.slice(0,n))&&(n=r.from);var l=[dd(t,s),""];return o&&l.push(dd(t,a.lineIndent(r.from,-1))),{changes:{from:r.from,to:r.from,insert:J.of(l)},range:Ee.cursor(r.from+l[0].length)}}));return n(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0};function qB(e,t){var n=t.ch,i=t.line+1;if(i<1)return 0;if(i>e.lines)return e.length;var r=e.line(i);return Math.min(r.from+Math.max(0,n),r.to)}function UB(e,t){if(t<0||t>e.length)return null;var n=e.lineAt(t);return{line:n.number-1,ch:t-n.from}}var _B,WB=function(e,t){this.line=e,this.ch=t};function jB(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||[]).concat(n)}}function GB(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else{var i=e._handlers,r=i&&i[t];if(r){var o=r.indexOf(n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function KB(e,t){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=null===(n=e._handlers)||void 0===n?void 0:n[t];if(o)for(var a=0;a<o.length;++a)o[a].apply(o,i)}function YB(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e)for(var i=0;i<e.length;++i)e[i].apply(e,t)}try{_B=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch(e){_B=/[\w]/}function ZB(e,t){var n=e.cm6;if(!n.state.readOnly){var i="input.type.compose";if(e.curOp&&(e.curOp.lastChange||(i="input.type.compose.start")),t.annotations&&Array.isArray(t.annotations))try{t.annotations.some((function(e){"input"==e.value&&(e.value=i)}))}catch(e){console.error(e)}else t.userEvent=i;return n.dispatch(t)}}function XB(e,t){var n;e.curOp&&(e.curOp.$changeStart=void 0),(t?rv:ov)(e.cm6);var i=null===(n=e.curOp)||void 0===n?void 0:n.$changeStart;null!=i&&e.cm6.dispatch({selection:{anchor:i}})}var $B={};"Left|Right|Up|Down|Backspace|Delete".split("|").forEach((function(e){$B[e]=function(t){return sa(t.cm6,{key:e},"editor")}}));var QB=function(){function e(e){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=e,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}return e.prototype.openDialog=function(e,t,n){return iN(this,e,t,n)},e.prototype.openNotification=function(e,t){return function(e,t,n){eN(e,s);var i,r=JB(e,t,n&&n.bottom),o=!1,a=n&&void 0!==n.duration?n.duration:5e3;function s(){o||(o=!0,clearTimeout(i),r.remove(),nN(e,r))}r.onclick=function(e){e.preventDefault(),s()},tN(e,r),a&&(i=window.setTimeout(s,a));return s}(this,e,t)},e.prototype.on=function(e,t){jB(this,e,t)},e.prototype.off=function(e,t){GB(this,e,t)},e.prototype.signal=function(e,t,n){KB(this,e,t,n)},e.prototype.indexFromPos=function(e){return qB(this.cm6.state.doc,e)},e.prototype.posFromIndex=function(e){return UB(this.cm6.state.doc,e)},e.prototype.foldCode=function(e){var t=this.cm6,n=t.state.selection.ranges,i=qB(this.cm6.state.doc,e),r=Ee.create([Ee.range(i,i)],0).ranges;t.state.selection.ranges=r,zd(t),t.state.selection.ranges=n},e.prototype.firstLine=function(){return 0},e.prototype.lastLine=function(){return this.cm6.state.doc.lines-1},e.prototype.lineCount=function(){return this.cm6.state.doc.lines},e.prototype.setCursor=function(e,t){"object"==typeof e&&(t=e.ch,e=e.line);var n=qB(this.cm6.state.doc,{line:e,ch:t||0});this.cm6.dispatch({selection:{anchor:n}},{scrollIntoView:!this.curOp,userEvent:"select"}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()},e.prototype.getCursor=function(e){var t=this.cm6.state.selection.main,n="head"!=e&&e?"anchor"==e?t.anchor:"start"==e?t.from:"end"==e?t.to:null:t.head;if(null==n)throw new Error("Invalid cursor type");return this.posFromIndex(n)},e.prototype.listSelections=function(){var e=this.cm6.state.doc;return this.cm6.state.selection.ranges.map((function(t){return{anchor:UB(e,t.anchor),head:UB(e,t.head)}}))},e.prototype.getMainSelection=function(){var e=this.cm6.state.doc,t=this.cm6.state.selection.main;return{anchor:UB(e,t.anchor),head:UB(e,t.head)}},e.prototype.setSelections=function(e,t){var n=this.cm6.state.doc,i=e.map((function(e){var t=qB(n,e.head),i=qB(n,e.anchor);return t==i?Ee.cursor(t,1):Ee.range(i,t)}));this.cm6.dispatch({selection:Ee.create(i,t)})},e.prototype.setSelection=function(e,t,n){this.setSelections([{anchor:e,head:t}],0),n&&"*mouse"==n.origin&&this.onBeforeEndOperation()},e.prototype.getLine=function(e){var t=this.cm6.state.doc;return e<0||e>=t.lines?"":this.cm6.state.doc.line(e+1).text},e.prototype.getLineHandle=function(e){return this.$lineHandleChanges||(this.$lineHandleChanges=[]),{row:e,index:this.indexFromPos(new WB(e,0))}},e.prototype.getLineNumber=function(e){var t=this.$lineHandleChanges;if(!t)return null;for(var n=e.index,i=0;i<t.length;i++)if(null==(n=t[i].changes.mapPos(n,1,fe.TrackAfter)))return null;var r=this.posFromIndex(n);return 0==r.ch?r.line:null},e.prototype.releaseLineHandles=function(){this.$lineHandleChanges=void 0},e.prototype.getRange=function(e,t){var n=this.cm6.state.doc;return this.cm6.state.sliceDoc(qB(n,e),qB(n,t))},e.prototype.replaceRange=function(e,t,n,i){n||(n=t);var r=this.cm6.state.doc;ZB(this,{changes:{from:qB(r,t),to:qB(r,n),insert:e}})},e.prototype.replaceSelection=function(e){ZB(this,this.cm6.state.replaceSelection(e))},e.prototype.replaceSelections=function(e){var t=this.cm6.state.selection.ranges.map((function(t,n){return{from:t.from,to:t.to,insert:e[n]||""}}));ZB(this,{changes:t})},e.prototype.getSelection=function(){return this.getSelections().join("\n")},e.prototype.getSelections=function(){var e=this.cm6;return e.state.selection.ranges.map((function(t){return e.state.sliceDoc(t.from,t.to)}))},e.prototype.somethingSelected=function(){return this.cm6.state.selection.ranges.some((function(e){return!e.empty}))},e.prototype.getInputField=function(){return this.cm6.contentDOM},e.prototype.clipPos=function(e){var t=this.cm6.state.doc,n=e.ch,i=e.line+1;i<1&&(i=1,n=0),i>t.lines&&(i=t.lines,n=Number.MAX_VALUE);var r=t.line(i);return n=Math.min(Math.max(0,n),r.to-r.from),new WB(i-1,n)},e.prototype.getValue=function(){return this.cm6.state.doc.toString()},e.prototype.setValue=function(e){var t=this.cm6;return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e},selection:Ee.range(0,0)})},e.prototype.focus=function(){return this.cm6.focus()},e.prototype.blur=function(){return this.cm6.contentDOM.blur()},e.prototype.defaultTextHeight=function(){return this.cm6.defaultLineHeight},e.prototype.findMatchingBracket=function(e,t){var n=this.cm6.state,i=qB(n.doc,e),r=xp(n,i+1,-1);return r&&r.end||(r=xp(n,i,1))&&r.end?{to:UB(n.doc,r.end.from)}:{to:void 0}},e.prototype.scanForBracket=function(e,t,n,i){return function(e,t,n,i,r){for(var o=r&&r.maxScanLineLength||1e4,a=r&&r.maxScanLines||1e3,s=[],l=function(e){return e&&e.bracketRegex||/[(){}[\]]/}(r),c=n>0?Math.min(t.line+a,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-a),u=t.line;u!=c;u+=n){var h=e.getLine(u);if(h){var d=n>0?0:h.length-1,p=n>0?h.length:-1;if(!(h.length>o))for(u==t.line&&(d=t.ch-(n<0?1:0));d!=p;d+=n){var f=h.charAt(d);if(l.test(f)){var m=rN[f];if(m&&">"==m.charAt(1)==n>0)s.push(f);else{if(!s.length)return{pos:new WB(u,d),ch:f};s.pop()}}}}}return u-n!=(n>0?e.lastLine():e.firstLine())&&null}(this,e,t,0,i)},e.prototype.indentLine=function(e,t){t?this.indentMore():this.indentLess()},e.prototype.indentMore=function(){Iy(this.cm6)},e.prototype.indentLess=function(){Fy(this.cm6)},e.prototype.execCommand=function(t){if("indentAuto"==t)e.commands.indentAuto(this);else if("goLineLeft"==t)lg(this.cm6);else if("goLineRight"==t){sg(this.cm6);var n=this.cm6.state,i=n.selection.main.head;i<n.doc.length&&"\n"!==n.sliceDoc(i,i+1)&&Iv(this.cm6)}else console.log(t+" is not implemented")},e.prototype.setBookmark=function(e,t){var n=(null==t?void 0:t.insertLeft)?1:-1,i=this.indexFromPos(e);return new lN(this,i,n)},e.prototype.addOverlay=function(e){var t=e.query,n=new fb({regexp:!0,search:t.source,caseSensitive:!/i/.test(t.flags)});if(n.valid){n.forVim=!0,this.cm6Query=n;var i=Cb.of(n);return this.cm6.dispatch({effects:i}),n}},e.prototype.removeOverlay=function(e){if(this.cm6Query){this.cm6Query.forVim=!1;var t=Cb.of(this.cm6Query);this.cm6.dispatch({effects:t})}},e.prototype.getSearchCursor=function(e,t){var n=this,i=null,r=null;null==t.ch&&(t.ch=Number.MAX_VALUE);var o=qB(n.cm6.state.doc,t),a=e.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,(function(e,t){return t||"\\"+e}));function s(t,n,i){return void 0===n&&(n=0),void 0===i&&(i=t.length),new Ky(t,a,{ignoreCase:e.ignoreCase},n,i)}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var t=n.cm6.state.doc;if(e){var a=i?i.from==i.to?i.to-1:i.from:o;i=function(e,t){for(var i=n.cm6.state.doc,r=1;;r++){for(var o=Math.max(e,t-1e4*r),a=s(i,o,t),l=null;!a.next().done;)l=a.value;if(l&&(o==e||l.from>o+10))return l;if(o==e)return null}}(0,a)}else{var l=i?i.from==i.to?i.to+1:i.to:o;i=function(e){var t=n.cm6.state.doc;if(e>t.length)return null;var i=s(t,e).next();return i.done?null:i.value}(l)}return r=i&&{from:UB(t,i.from),to:UB(t,i.to),match:i.match},i&&i.match},from:function(){return null==r?void 0:r.from},to:function(){return null==r?void 0:r.to},replace:function(e){i&&(ZB(n,{changes:{from:i.from,to:i.to,insert:e}}),i.to=i.from+e.length,r&&(r.to=UB(n.cm6.state.doc,i.to)))}}},e.prototype.moveByChar=function(e,t,n){for(var i=this.cm6,r=qB(this.cm6.state.doc,e),o=Ee.cursor(r);n>0;n--){var a=i.getNextTablePos;if(a&&a(i,o,t?"end":"start"))break;o=this.cm6.moveByChar(o,t)}var s=this.posFromIndex(o.head);return s.line!==e.line?e:s},e.prototype.findPosV=function(e,t,n,i){for(var r,o,a=this.cm6,s=a.state.doc,l="page"==n?a.dom.clientHeight:0,c=qB(s,e),u=Ee.cursor(c,1,void 0,i),h=Math.round(Math.abs(t)),d=t>0,p=function(e){if("page"==n)u=a.moveVertically(u,d,l);else if("line"==n){var t=a.moveVertically(u,d),i=a.getNextTablePos;if(i&&i(a,u,d?"down":"up"))return{value:t};var s=a.getNextPosUpDown;if(s){var c=s(a.state,u,d);if(c&&Math.abs(t.head-u.head)>Math.abs(c.head-u.head))t=c;else if(1===h&&!d&&QD(a,u.head)){var p=a.state.field(kR);if(p&&p instanceof LY){var m=p;o="ArrowUp"===(null===(r=f.state.vimPlugin)||void 0===r?void 0:r.lastKeydown)?function(){return m.shiftFocusBefore()}:function(){return m.metadataEditor.focus({bottom:!0})}}}}u=t}},f=this,m=0;m<h;m++){var v=p();if("object"==typeof v)return v.value}var g=UB(s,u.head);return o&&(g.focusBefore=o),(t<0&&0==u.head&&0!=i&&0==e.line&&0!=e.ch||t>0&&u.head==s.length&&g.ch!=i&&e.line==g.line)&&(g.hitSide=!0),g},e.prototype.charCoords=function(e,t){var n,i,r=this.cm6,o=qB(r.state.doc,e),a=r.coordsAtPos(o)||{left:0,top:0,bottom:0},s=a.left,l=a.top,c=a.bottom,u=0,h=0;return"div"===t?(u=(n=r.contentDOM.getBoundingClientRect()).left,h=n.top):(u=(i=r.scrollDOM.getBoundingClientRect()).left,h=i.top,u-=r.scrollDOM.scrollLeft,h-=r.scrollDOM.scrollTop),{left:s-u,top:l-h,bottom:c-h}},e.prototype.coordsChar=function(e,t){var n,i,r=this.cm6,o=0,a=0;"div"===t?(o=(n=r.contentDOM.getBoundingClientRect()).left,a=n.top):(o=(i=r.scrollDOM.getBoundingClientRect()).left,a=i.top,o-=r.scrollDOM.scrollLeft,a-=r.scrollDOM.scrollTop);var s={x:e.left+o,y:e.top+a},l=this.cm6.posAtCoords(s)||0;return UB(this.cm6.state.doc,l)},e.prototype.getScrollInfo=function(){var e=this.cm6.scrollDOM;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight,width:e.scrollWidth,clientHeight:e.clientHeight,clientWidth:e.clientWidth}},e.prototype.scrollTo=function(e,t){null!=e&&(this.cm6.scrollDOM.scrollLeft=e),null!=t&&(this.cm6.scrollDOM.scrollTop=t)},e.prototype.scrollInfo=function(){return 0},e.prototype.scrollIntoView=function(e,t){e?this.cm6.dispatch({effects:Xo.scrollIntoView(this.indexFromPos(e),{yMargin:t})}):this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})},e.prototype.getWrapperElement=function(){return this.cm6.dom},e.prototype.getMode=function(){return{name:this.getOption("mode")}},e.prototype.setSize=function(e,t){this.cm6.dom.style.width=e+4+"px",this.cm6.dom.style.height=t+"px",this.refresh()},e.prototype.refresh=function(){this.cm6.measure()},e.prototype.destroy=function(){this.removeOverlay()},e.prototype.getLastEditEnd=function(){return this.posFromIndex(this.$lastChangeEndOffset)},e.prototype.onChange=function(e){var t=this;for(var n in this.$lineHandleChanges&&this.$lineHandleChanges.push(e),this.marks){this.marks[n].update(e.changes)}this.virtualSelection&&(this.virtualSelection=Ee.create(this.virtualSelection.ranges.map((function(t){return t.map(e.changes)})),this.virtualSelection.mainIndex));var i=this.curOp=this.curOp||{};e.changes.iterChanges((function(e,n,r,o,a){(null==i.$changeStart||i.$changeStart>r)&&(i.$changeStart=r),t.$lastChangeEndOffset=o;var s={text:a.toJSON()};i.lastChange?i.lastChange.next=i.lastChange=s:i.lastChange=i.change=s}),!0),i.changeHandlers||(i.changeHandlers=this._handlers.change&&this._handlers.change.slice())},e.prototype.onSelectionChange=function(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0},e.prototype.operation=function(e,t){var n;this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{n=e()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return n},e.prototype.onBeforeEndOperation=function(){var e=this.curOp,t=!1;if(e){if(e.change&&YB(e.changeHandlers,this,e.change),e&&e.cursorActivity&&(YB(e.cursorActivityHandlers,this,null),e.isVimOp&&(t=!0)),e.isVimOp){for(var n=Rd(this.cm6.state),i=[],r=function(e){n.between(e.from,e.to,(function(t,n){e.to!==t&&e.from!==n&&i.push(Od.of({from:t,to:n}))}))},o=0,a=this.cm6.state.selection.ranges;o<a.length;o++){r(a[o])}i.length>0&&this.cm6.dispatch({effects:i})}this.curOp=null}t&&this.scrollIntoView()},e.prototype.moveH=function(e,t){if("char"==t){var n=this.getCursor();this.setCursor(n.line,n.ch+e)}},e.prototype.setOption=function(e,t){switch(e){case"keyMap":this.state.keyMap=t;break;case"textwidth":this.state.textwidth=t}},e.prototype.getOption=function(e){switch(e){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readOnly":return this.cm6.state.readOnly;case"indentWithTabs":return"\t"==this.cm6.state.facet(ud);case"indentUnit":return this.cm6.state.facet(ud).length||2;case"textwidth":return this.state.textwidth;case"keyMap":return this.state.keyMap||"vim"}},e.prototype.toggleOverwrite=function(e){this.state.overwrite=e},e.prototype.getTokenTypeAt=function(e){var t,n=this.indexFromPos(e),i=Yh(this.cm6.state,n),r=null==i?void 0:i.resolve(n),o=(null===(t=null==r?void 0:r.type)||void 0===t?void 0:t.name)||"";return/comment/i.test(o)?"comment":/string/i.test(o)?"string":""},e.prototype.overWriteSelection=function(e){var t=this.cm6.state.doc,n=this.cm6.state.selection,i=n.ranges.map((function(e){if(e.empty){var n=e.to<t.length?t.sliceString(e.from,e.to+1):"";if(n&&!/\n/.test(n))return Ee.range(e.from,e.to+1)}return e}));this.cm6.dispatch({selection:Ee.create(i,n.mainIndex)}),this.replaceSelection(e)},e.prototype.isInMultiSelectMode=function(){return this.cm6.state.selection.ranges.length>1},e.prototype.virtualSelectionMode=function(){return!!this.virtualSelection},e.prototype.forEachSelection=function(e){var t=this.cm6.state.selection;this.virtualSelection=Ee.create(t.ranges,t.mainIndex);for(var n=0;n<this.virtualSelection.ranges.length;n++){var i=this.virtualSelection.ranges[n];i&&(this.cm6.dispatch({selection:Ee.create([i])}),e(),this.virtualSelection.ranges[n]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null},e.prototype.hardWrap=function(e){return function(e,t){var n,i=t.column||e.getOption("textwidth")||80,r=0!=t.allowMerge,o=Math.min(t.from,t.to),a=Math.max(t.from,t.to);for(;o<=a;){var s=e.getLine(o);if(s.length>i){if(u=f(s,i,5)){var l=null===(n=/^\s*/.exec(s))||void 0===n?void 0:n[0];e.replaceRange("\n"+l,new WB(o,u.start),new WB(o,u.end))}a++}else if(r&&/\S/.test(s)&&o!=a){var c=e.getLine(o+1);if(c&&/\S/.test(c)){var u,h=s.replace(/\s+$/,""),d=c.replace(/^\s+/,""),p=h+" "+d;(u=f(p,i,5))&&u.start>h.length||p.length<i?(e.replaceRange(" ",new WB(o,h.length),new WB(o+1,c.length-d.length)),o--,a--):h.length<s.length&&e.replaceRange("",new WB(o,h.length),new WB(o,s.length))}}o++}return o;function f(e,t,n){if(!(e.length<t)){var i=e.slice(0,t),r=e.slice(t),o=/^(?:(\s+)|(\S+)(\s+))/.exec(r),a=/(?:(\s+)|(\s+)(\S+))$/.exec(i),s=0,l=0;return a&&!a[2]&&(s=t-a[1].length,l=t),o&&!o[2]&&(s||(s=t),l=t+o[1].length),s?{start:s,end:l}:a&&a[2]&&a.index>n?{start:a.index,end:a.index+a[2].length}:o&&o[2]?{start:s=t+o[2].length,end:s+o[3].length}:void 0}}}(this,e)},e.isMac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),e.Pos=WB,e.StringStream=Ap,e.commands={cursorCharLeft:function(e){Av(e.cm6)},redo:function(e){XB(e,!1)},undo:function(e){XB(e,!0)},newlineAndIndent:function(e){Ty({state:e.cm6.state,dispatch:function(t){return ZB(e,t)}})},newlineAndIndentBefore:function(e){zB(e.cm6)},indentAuto:function(e){Py(e.cm6)}},e.isWordChar=function(e){return _B.test(e)},e.keys=$B,e.addClass=function(){},e.rmClass=function(){},e.e_preventDefault=function(e){e.preventDefault()},e.e_stop=function(e){var t,n;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),null===(n=null==e?void 0:e.preventDefault)||void 0===n||n.call(e)},e.lookupKey=function(t,n,i){var r=e.keys[t];r&&i(r)},e.on=jB,e.off=GB,e.signal=KB,e.findMatchingTag=oN,e.findEnclosingTag=aN,e.keyName=void 0,e}();function JB(e,t,n){var i=document.createElement("div");return i.appendChild(t),i}function eN(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}function tN(e,t){var n=e.state.dialog;e.state.dialog=t,t&&n!==t&&(n&&n.contains(document.activeElement)&&e.focus(),n&&n.parentElement?n.parentElement.replaceChild(t,n):n&&n.remove(),QB.signal(e,"dialog"))}function nN(e,t){e.state.dialog==t&&(e.state.dialog=null,QB.signal(e,"dialog"))}function iN(e,t,n,i){i||(i={}),eN(e,void 0);var r=JB(0,t,i.bottom),o=!1;function a(t){if("string"==typeof t)s.value=t;else{if(o)return;o=!0,nN(e,r),e.state.dialog||e.focus(),i.onClose&&i.onClose(r)}}tN(e,r);var s=r.getElementsByTagName("input")[0];return s&&(i.value&&(s.value=i.value,!1!==i.selectValueOnOpen&&s.select()),i.onInput&&QB.on(s,"input",(function(e){i.onInput(e,s.value,a)})),i.onKeyUp&&QB.on(s,"keyup",(function(e){i.onKeyUp(e,s.value,a)})),QB.on(s,"keydown",(function(e){i&&i.onKeyDown&&i.onKeyDown(e,s.value,a)||(13==e.keyCode&&n(s.value),(27==e.keyCode||!1!==i.closeOnEnter&&13==e.keyCode)&&(s.blur(),QB.e_stop(e),a()))})),!1!==i.closeOnBlur&&QB.on(s,"blur",(function(){setTimeout((function(){document.activeElement!==s&&a()}))})),s.focus()),a}var rN={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function oN(e,t){}function aN(e,t){var n,i,r=e.cm6.state,o=e.indexFromPos(t);o<r.doc.length&&("<"==r.sliceDoc(o,o+1)&&o++);for(var a=Yh(r,o),s=(null==a?void 0:a.resolve(o))||null;s;){if("OpenTag"==(null===(n=s.firstChild)||void 0===n?void 0:n.type.name)&&"CloseTag"==(null===(i=s.lastChild)||void 0===i?void 0:i.type.name))return{open:sN(r.doc,s.firstChild),close:sN(r.doc,s.lastChild)};s=s.parent}}function sN(e,t){return{from:UB(e,t.from),to:UB(e,t.to)}}var lN=function(){function e(e,t,n){this.cm=e,this.id=e.$mid++,this.offset=t,this.assoc=n,e.marks[this.id]=this}return e.prototype.clear=function(){delete this.cm.marks[this.id]},e.prototype.find=function(){return null==this.offset?null:this.cm.posFromIndex(this.offset)},e.prototype.update=function(e){null!=this.offset&&(this.offset=e.mapPos(this.offset,this.assoc,fe.TrackDel))},e}();var cN="undefined"!=typeof navigator&&/linux/i.test(navigator.platform)&&/ Gecko\/\d+/.exec(navigator.userAgent),uN=initVimMode(QB);QB.Vim=uN,window.CodeMirrorAdapter=QB;var hN=Xo.theme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em"},".cm-vim-panel input":{background:"transparent",border:"none",outline:"none"}}),dN=Xi.fromClass(function(){function e(e){var t=this;this.status="",this.query=null,this.decorations=Yn.none,this.waitForCopy=!1,this.lastKeydown="",this.useNextTextInput=!1,this.compositionText="",this.view=e;var n=this.cm=new QB(e);uN.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new RB(e,n),this.updateClass(),this.cm.on("vim-command-done",(function(){n.state.vim&&(n.state.vim.status=""),t.blockCursor.scheduleRedraw(),t.updateStatus()})),this.cm.on("vim-mode-change",(function(e){n.state.vim&&(n.state.vim.mode=e.mode,e.subMode&&(n.state.vim.mode+=" block"),n.state.vim.status="",t.blockCursor.scheduleRedraw(),t.updateClass(),t.updateStatus())})),this.cm.on("dialog",(function(){t.cm.state.statusbar?t.updateStatus():e.dispatch({effects:fN.of(!!t.cm.state.dialog)})})),this.dom=document.createElement("span"),this.dom.style.cssText="position: absolute; right: 10px; top: 1px",this.statusButton=document.createElement("span"),this.statusButton.onclick=function(e){uN.handleKey(t.cm,"<Esc>","user"),t.cm.focus()},this.statusButton.style.cssText="cursor: pointer"}return e.prototype.update=function(e){var t;if((e.viewportChanged||e.docChanged)&&this.query&&this.highlight(this.query),e.docChanged&&this.cm.onChange(e),e.selectionSet&&this.cm.onSelectionChange(),e.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),e.transactions)for(var n=0,i=e.transactions;n<i.length;n++)for(var r=0,o=i[n].effects;r<o.length;r++){var a=o[r];if(a.is(Cb))if(null===(t=a.value)||void 0===t?void 0:t.forVim){var s=a.value.create();this.highlight(s)}else this.highlight(null)}this.blockCursor.update(e)},e.prototype.updateClass=function(){var e=this.cm.state;!e.vim||e.vim.insertMode&&!e.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")},e.prototype.updateStatus=function(){var e=this.cm.state.statusbar,t=this.cm.state.vim;if(e&&t){var n=this.cm.state.dialog;if(n)n.parentElement!=e&&(e.textContent="",e.appendChild(n));else{e.textContent="";var i=(t.mode||"normal").toUpperCase();t.insertModeReturn&&(i+="(C-O)"),this.statusButton.textContent="--".concat(i,"--"),e.appendChild(this.statusButton)}this.dom.textContent=t.status,e.appendChild(this.dom)}},e.prototype.destroy=function(){uN.leaveVimMode(this.cm),this.cm.state.vim=null,this.updateClass(),this.blockCursor.destroy(),delete this.view.cm},e.prototype.highlight=function(e){if(this.query=e,!e)return this.decorations=Yn.none;for(var t=this.view,n=new kt,i=0,r=t.visibleRanges,o=r.length;i<o;i++){for(var a=r[i],s=a.from,l=a.to;i<o-1&&l>r[i+1].from-500;)l=r[++i].to;e.highlight(t.state,s,l,(function(e,t){n.add(e,t,pN)}))}return this.decorations=n.finish()},e.prototype.handleKey=function(e,t){var n=this.cm,i=n.state.vim;if(i){var r=uN.vimKeyFromEvent(e,i);if(CodeMirror.signal(this.cm,"inputEvent",{type:"handleKey",key:r}),r){if("<Esc>"==r&&!i.insertMode&&!i.visualMode&&this.query){var o=i.searchState_;o&&(n.removeOverlay(o.getOverlay()),o.setOverlay(null))}var a;if("<C-c>"===r&&!QB.isMac&&n.somethingSelected())return this.waitForCopy=!0,!0;i.status=(i.status||"")+r;try{a=uN.multiSelectHandleKey(n,r,"user")}catch(e){console.error(e),n.state.vim.insertMode||(a=!0)}return i=uN.maybeInitVimState_(n),!a&&i.insertMode&&n.state.overwrite&&(e.key&&1==e.key.length&&e.key&&!/\n/.test(e.key)?(a=!0,n.overWriteSelection(e.key)):"Backspace"==e.key&&(a=!0,QB.commands.cursorCharLeft(n))),a&&(QB.signal(this.cm,"vim-keypress",r),e.preventDefault(),e.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!a}}},e}(),{eventHandlers:{copy:function(e,t){var n=this;this.waitForCopy&&(this.waitForCopy=!1,Promise.resolve().then((function(){var e=n.cm,t=e.state.vim;t&&(t.insertMode?e.setSelection(e.getCursor(),e.getCursor()):e.operation((function(){e.curOp&&(e.curOp.isVimOp=!0),uN.handleKey(e,"<Esc>","user")})))})))},compositionstart:function(e,t){this.useNextTextInput=!0,CodeMirror.signal(this.cm,"inputEvent",e)},compositionupdate:function(e,t){CodeMirror.signal(this.cm,"inputEvent",e)},compositionend:function(e,t){CodeMirror.signal(this.cm,"inputEvent",e)},keypress:function(e,t){"Dead"==this.lastKeydown&&this.handleKey(e,t)},keydown:function(e,t){CodeMirror.signal(this.cm,"inputEvent",e),this.lastKeydown=e.key,"Unidentified"==this.lastKeydown||"Process"==this.lastKeydown||"Dead"==this.lastKeydown?this.useNextTextInput=!0:(this.useNextTextInput=!1,this.handleKey(e,t))}},provide:function(){return[Xo.inputHandler.of((function(e,t,n,i){var r,o,a=e.cm||null;if(!a)return!1;var s=null===(r=a.state)||void 0===r?void 0:r.vim,l=a.state.vimPlugin;if(s&&!s.insertMode&&!(null===(o=a.curOp)||void 0===o?void 0:o.isVimOp)){if("\0\0"===i)return!0;if(CodeMirror.signal(a,"inputEvent",{type:"text",text:i,from:t,to:n}),1==i.length&&l.useNextTextInput){if(s.expectLiteralNext&&e.composing)return l.compositionText=i,!1;if(l.compositionText){var c=l.compositionText;l.compositionText="";var u=e.state.selection.main.head;if(c===e.state.sliceDoc(u-c.length,u)){var h=a.getCursor();a.replaceRange("",a.posFromIndex(u-c.length),h)}}return l.handleKey({key:i,preventDefault:function(){},stopPropagation:function(){}}),function(e){var t=e.scrollDOM.parentElement;if(!t)return;if(cN)return e.contentDOM.textContent="\0\0",void e.contentDOM.dispatchEvent(new CustomEvent("compositionend"));var n=e.scrollDOM.nextSibling,i=window.getSelection(),r=i&&{anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset};e.scrollDOM.remove(),t.insertBefore(e.scrollDOM,n);try{r&&i&&(i.setPosition(r.anchorNode,r.anchorOffset),r.focusNode&&i.extend(r.focusNode,r.focusOffset))}catch(e){console.error(e)}e.focus(),e.contentDOM.dispatchEvent(new CustomEvent("compositionend"))}(e),!0}}return!1}))]},decorations:function(e){return e.decorations}});var pN=Yn.mark({class:"obsidian-search-match-highlight"}),fN=nt.define(),mN=Fe.define({create:function(){return!1},update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];r.is(fN)&&(e=r.value)}return e},provide:function(e){return Is.from(e,(function(e){return e?vN:null}))}});function vN(e){var t=document.createElement("div");t.className="cm-vim-panel";var n=e.cm;return n.state.dialog&&t.appendChild(n.state.dialog),{top:!1,dom:t}}var gN,yN,bN,wN=["=","~","$","%"],kN=Xo.inputHandler.of((function(e,t,n,i){if(e.composing||e.state.readOnly)return!1;var r=e.state.selection.main;if(i.length>2||2==i.length&&1==de(ue(i,0))||t!=r.from||n!=r.to)return!1;for(var o=e.state,a=function(t){if(i!==t)return"continue";var n=null,r=o.changeByRange((function(e){return e.empty?{range:n=e}:{changes:[{insert:i,from:e.from},{insert:i,from:e.to}],range:Ee.range(e.anchor+i.length,e.head+i.length)}}));return n?{value:!1}:(e.dispatch(o.update(r,{scrollIntoView:!0,userEvent:"input.type"})),{value:!0})},s=0,l=wN;s<l.length;s++){var c=a(l[s]);if("object"==typeof c)return c.value}return!1})),CN="obsidian-search-match-highlight",MN=function(){function e(e,t){var n=this;this.containerEl=null,this.searchContainerEl=null,this.searchButtonContainerEl=null,this.searchInputEl=null,this.replaceInputEl=null,this.scope=null,this.app=e,this.containerEl=t,this.searchContainerEl=createDiv("document-search-container");var i=this.searchContainerEl.createDiv("document-search"),r=i.createDiv("search-input-container document-search-input");this.searchInputEl=r.createEl("input",{type:"text",placeholder:Qf.editor.search.placeholderFind()}),this.countEl=r.createDiv("document-search-count"),this.searchInputEl.addEventListener("input",this.onSearchInput.bind(this)),this.searchButtonContainerEl=i.createDiv({cls:"document-search-buttons",type:"text"}),this.searchButtonContainerEl.createEl("button",{cls:"clickable-icon document-search-button"},(function(e){mx(e,"lucide-arrow-up"),Rx(e,Qf.editor.search.labelPrevious()+"\n"+sA(oA(["Shift"],"F3")),{placement:"top"}),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){e.preventDefault(),n.findPrevious()}))})),this.searchButtonContainerEl.createEl("button",{cls:"clickable-icon document-search-button"},(function(e){mx(e,"lucide-arrow-down"),Rx(e,Qf.editor.search.labelNext()+"\n"+sA(oA([],"F3")),{placement:"top"}),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){e.preventDefault(),n.findNext()}))})),i.createDiv("clickable-icon document-search-close-button",(function(e){mx(e,"lucide-x"),Rx(e,Qf.editor.search.labelExitSearch(),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),n.hide()}))}));var o=this.scope=new Tk(e.scope);o.register([],"F3",this.findNext.bind(this)),o.register(["Mod"],"G",this.findNext.bind(this)),o.register(["Shift"],"F3",this.findPrevious.bind(this)),o.register(["Mod","Shift"],"G",this.findPrevious.bind(this)),o.register([],"Enter",this.onEnter.bind(this)),o.register(["Shift"],"Enter",this.onShiftEnter.bind(this)),o.register([],"Escape",this.hide.bind(this)),o.register([],"Tab",this.goToNextInput.bind(this)),o.register(["Shift"],"Tab",this.goToNextInput.bind(this))}return e.prototype.getQuery=function(){return this.searchInputEl.value},e.prototype.goToNextInput=function(e){this.searchInputEl.isActiveElement()?(this.replaceInputEl.focus(),e.preventDefault()):this.replaceInputEl.isActiveElement()&&(this.searchInputEl.focus(),e.preventDefault())},e.prototype.onEnter=function(e){e.isComposing||!this.searchInputEl.isActiveElement()&&!this.replaceInputEl.isActiveElement()||this.findNextOrReplace()},e.prototype.onShiftEnter=function(e){e.isComposing||!this.searchInputEl.isActiveElement()&&!this.replaceInputEl.isActiveElement()||this.findPrevious()},e}(),EN=function(e){function t(t,n,i,r){var o=e.call(this,t,i)||this;o.editor=null,o.cursor=null,o.isActive=!1,o.isReplace=!1,o.requestUpdateCount=mc(o.updateCount.bind(o),20,!0),o.editor=n,o.applyScope=r,o.searchButtonContainerEl.createEl("button",{cls:"clickable-icon document-search-button"},(function(e){mx(e,"lucide-text-select"),Rx(e,Qf.editor.search.labelFindAll()+"\n"+sA(oA(["Alt"],"Enter")),{placement:"top"}),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){e.preventDefault(),o.searchAll()}))}));var a=o.searchContainerEl.createDiv("document-replace");o.replaceInputEl=a.createEl("input",{cls:"document-replace-input",type:"text"}),o.replaceInputEl.setAttribute("placeholder",Qf.editor.search.placeholderReplace());var s=a.createDiv({cls:"document-replace-buttons",type:"text"});return s.createEl("button",{cls:"clickable-icon document-search-button"},(function(e){mx(e,"lucide-replace"),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){e.preventDefault(),o.replaceCurrentMatch()})),Rx(e,Qf.editor.search.labelReplace()+"\n"+sA(oA([],"Enter")),{placement:"top"})})),s.createEl("button",{cls:"clickable-icon document-search-button"},(function(e){mx(e,"lucide-replace-all"),Rx(e,Qf.editor.search.labelReplaceAll()+"\n"+sA(oA(["Mod","Alt"],"Enter")),{placement:"top"}),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){e.preventDefault(),o.replaceAll()}))})),o.scope.register(["Alt"],"Enter",o.onAltEnter.bind(o)),o.scope.register(["Mod","Alt"],"Enter",o.onModAltEnter.bind(o)),o}return f(t,e),t.prototype.show=function(e){void 0===e&&(e=!1),this.isActive=!0,this.isReplace=e;var t=this,n=t.containerEl,i=t.searchContainerEl,r=t.editor,o=t.searchInputEl;i.toggleClass("mod-replace-mode",e),n.prepend(i);var a=r.getSelection();a&&(o.value=a),o.focus(),o.select(),this.applyScope(this.scope),this.onSearchInput()},t.prototype.hide=function(){if(this.isActive){this.isActive=!1;var e=this,t=e.editor,n=e.searchContainerEl,i=e.searchInputEl;if(this.cursor&&(i.isActiveElement()||this.replaceInputEl.isActiveElement())){var r=this.cursor.current();r&&t.setSelection(r.from,r.to)}n.detach(),i.value="",i.removeClass("mod-no-match"),this.cursor=null,t.removeHighlights("obsidian-search-match-highlight"),this.applyScope(null),t.focus()}},t.prototype.updateCount=function(){var e,t=0,n=0,i=this.getQuery();this.cursor&&i&&(t=(e=this.cursor.getIndexAndCount())[0],n=e[1]),this.countEl.toggle(!!i),this.countEl.setText("".concat(t," / ").concat(n))},t.prototype.onSearchInput=function(){var e=this.getQuery();this.cursor=this.editor.searchCursor(e);var t=e?this.cursor.findNext():null;t?this.highlight([t]):this.clear(),this.searchInputEl.toggleClass("mod-no-match",e&&!t),this.requestUpdateCount()},t.prototype.findPrevious=function(){if(this.cursor){var e=this.cursor.findPrevious();e?this.highlight([e]):this.clear(),this.requestUpdateCount()}},t.prototype.findNextOrReplace=function(){if(this.cursor){var e=this.replaceInputEl.value;this.replaceInputEl.isActiveElement()&&""!==e&&this.cursor.replace(e,"searchReplace"),this.findNext()}},t.prototype.replaceCurrentMatch=function(){if(this.cursor){var e=this.replaceInputEl.value;this.cursor.replace(e,"searchReplace"),this.findNext()}},t.prototype.replaceAll=function(){var e=this.replaceInputEl.value;this.cursor.replaceAll(e,"searchReplace")},t.prototype.findNext=function(){if(this.cursor){var e=this.cursor.findNext();e?this.highlight([e]):this.clear(),this.requestUpdateCount()}},t.prototype.searchAll=function(){var e=this.cursor.findAll();this.highlight(e)},t.prototype.highlight=function(e){this.editor.addHighlights(e,CN,!0,!0);var t=e[0];t&&this.editor.scrollIntoView(t,!0)},t.prototype.clear=function(){this.editor.removeHighlights(CN)},t.prototype.onAltEnter=function(e){(this.searchInputEl.isActiveElement()||this.replaceInputEl.isActiveElement())&&this.searchAll()},t.prototype.onModAltEnter=function(e){this.isReplace&&this.replaceInputEl.isActiveElement()&&this.replaceAll()},t}(MN),SN=window.CodeMirror,xN=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,TN=/^(?:(?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?Â«Â»â€œâ€â€˜â€™]))/i,DN=/^(?:(?:[^<>()[\]\\.,;:\s@\"`]+(?:\.[^<>()[\]\\.,;:\s@\"]+)*)|(?:\".+\"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(?:(?:[a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\b/,AN=/^(?:[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s])+/;function LN(e){return/[a-z]/i.test(e)}!function(e){e[e.NONE=0]="NONE",e[e.NORMAL=1]="NORMAL",e[e.WITH_SPACE=2]="WITH_SPACE"}(yN||(yN={})),function(e){e[e.NONE=0]="NONE",e[e.SIMPLE=1]="SIMPLE",e[e.NORMAL=2]="NORMAL"}(bN||(bN={}));var PN,IN,FN=/^\s*[^\|].*?\|.*[^|]\s*$/,ON=/^\s*[^\|].*\|/,BN=/^\|(?:[^|]+\|)+?\s*$/,NN=/^\|/,RN=/^\s*-+\s*:\s*$/,HN=/^\s*:\s*-+\s*$/,VN=/^\s*:\s*-+\s*:\s*$/,zN=/^\s*-+\s*$/;!function(e){e[e.NONE=0]="NONE",e[e.FRONT_MATTER=1]="FRONT_MATTER",e[e.FRONT_MATTER_END=2]="FRONT_MATTER_END"}(PN||(PN={})),function(e){e[e.NONE=0]="NONE",e[e.BARELINK=1]="BARELINK",e[e.FOOTREF=2]="FOOTREF",e[e.NORMAL=3]="NORMAL",e[e.FOOTNOTE=4]="FOOTNOTE",e[e.MAYBE_FOOTNOTE_URL=5]="MAYBE_FOOTNOTE_URL",e[e.MAYBE_FOOTNOTE_URL_TITLE=6]="MAYBE_FOOTNOTE_URL_TITLE",e[e.BARELINK2=7]="BARELINK2",e[e.FOOTREF2=8]="FOOTREF2",e[e.INTERNAL_LINK=9]="INTERNAL_LINK",e[e.EMBED=10]="EMBED"}(IN||(IN={}));var qN=((gN={})[IN.BARELINK]="hmd-barelink",gN[IN.BARELINK2]="hmd-barelink2",gN[IN.FOOTREF]="hmd-barelink footref",gN[IN.FOOTNOTE]="hmd-barelink hmd-footnote line-HyperMD-footnote",gN[IN.FOOTREF2]="hmd-footref2",gN[IN.INTERNAL_LINK]="hmd-internal-link",gN[IN.EMBED]="hmd-internal-link hmd-embed",gN);function UN(e){e.hmdTable=bN.NONE,e.hmdTableRTL=!1,e.hmdTableColumns=[],e.hmdTableID=null,e.hmdTableCol=e.hmdTableRow=0}var _N,WN={hr:"line-HyperMD-hr line-background-HyperMD-hr-bg hr",list1:"list-1",list2:"list-2",list3:"list-3",code:"inline-code",hashtag:"hashtag meta"};function jN(e,t){return e.replace(new RegExp("\\s?[^\\s]*".concat(t,"[^\\s]*"),"g"),"")}window.CodeMirror.defineMode("hypermd",(function(e,t){var n={front_matter:!0,math:!0,table:!0,toc:!0,orgModeMarkup:!0,hashtag:!0,fencedCodeBlockHighlighting:!0,name:"markdown",highlightFormatting:!0,taskLists:!0,strikethrough:!0,emoji:!1,highlight:!0,tokenTypeOverrides:WN,headers:!0,blockquotes:!0,indentedCode:!0,lists:!0,hr:!0,blockId:!0};Object.assign(n,t),n.tokenTypeOverrides!==WN&&(n.tokenTypeOverrides=Object.assign({},WN,n.tokenTypeOverrides)),n.name="markdown";var i={htmlBlock:null,block:null},r=SN.getMode(e,n),o=m({},r);function a(e,t){var n=t.hmdInnerExitChecker(e,t),i=t.hmdInnerStyle,r=(!n||!n.skipInnerMode)&&t.hmdInnerMode.token(e,t.hmdInnerState)||"";return i&&(r+=" "+i),n?(n.style&&(r+=" "+n.style),n.endPos&&(e.pos=n.endPos),t.hmdInnerExitChecker=null,t.hmdInnerMode=null,t.hmdInnerState=null,t.hmdOverride=null):e.start===e.pos&&e.skipToEnd(),r.trim()||null}function s(e){return{token:function(t){var n=t.string.indexOf(e,t.start);return-1===n?t.skipToEnd():0===n?t.pos+=e.length:(t.pos=n,"\\"===t.string.charAt(n-1)&&t.pos++),null}}}function l(t,n,i,r){if("string"==typeof i&&(i=SN.getMode(e,i)),!(i&&"null"!==i.name||(i="endTag"in r?s(r.endTag):"function"==typeof r.fallbackMode&&r.fallbackMode())))throw new Error("no mode");var o,l;n.hmdInnerExitChecker="endTag"in r?(o=r.endTag,l||(l={}),function(e,t){return e.string.substr(e.start,o.length)===o?(l.endPos=e.start+o.length,l):null}):r.exitChecker,n.hmdInnerStyle=r.style,n.hmdInnerMode=i,n.hmdOverride=a,n.hmdInnerState=SN.startState(i);var c=r.style||"";return r.skipFirstToken||(c+=" "+i.token(t,n.hmdInnerState)),c.trim()}return o.startState=function(){var e=r.startState();return UN(e),e.hmdOverride=null,e.hmdInnerExitChecker=null,e.hmdInnerMode=null,e.hmdLinkType=IN.NONE,e.hmdNextMaybe=n.front_matter?PN.FRONT_MATTER:PN.NONE,e.hmdNextState=null,e.hmdNextStyle=null,e.hmdNextPos=null,e.hmdHashtag=!1,i.block=e.block,e},o.copyState=function(e){for(var t=r.copyState(e),n=0,i=["hmdLinkType","hmdNextMaybe","hmdTable","hmdTableID","hmdTableCol","hmdTableRow","hmdOverride","hmdInnerMode","hmdInnerStyle","hmdInnerExitChecker","hmdNextPos","hmdNextState","hmdNextStyle","hmdHashtag","comment","internalLink","internalEmbed","inlineFootnote","hasAlias","isAlias","wasHeading","isHeading","mathed","inFootnote"];n<i.length;n++){var o=i[n];t[o]=e[o]}return t.hmdTableColumns=e.hmdTableColumns.slice(0),e.hmdInnerMode&&(t.hmdInnerState=SN.copyState(e.hmdInnerMode,e.hmdInnerState)),t},o.blankLine=function(e){var t,n=e.hmdInnerMode;return n?n.blankLine&&(t=n.blankLine(e.hmdInnerState)):t=r.blankLine(e),t||(t=""),e.hmdNextMaybe===PN.FRONT_MATTER&&(e.hmdNextMaybe=PN.NONE),e.hmdLinkType&&(e.hmdLinkType=IN.NONE),e.inFootnote&&(t+=" line-HyperMD-footnote"),-1===e.code&&(t+=" line-HyperMD-codeblock line-background-HyperMD-codeblock-bg"),UN(e),t.trim()||null},o.indent=function(e,t){var n=e.hmdInnerMode||r,i=n.indent;return"function"==typeof i?i.apply(n,arguments):SN.Pass},o.innerMode=function(e){return e.hmdInnerMode?{mode:e.hmdInnerMode,state:e.hmdInnerState}:r.innerMode(e)},o.token=function(t,o){if(t.tabSize=4,o.hmdOverride)return o.hmdOverride(t,o);if(o.hmdTable&&" "===t.peek()){if("|"===t.string[t.pos-1]&&"\\"!==t.string[t.pos-2])return t.match(/^ +/),"";if(t.match(/^ +\|/))return t.backUp(1),""}if(o.hmdNextMaybe===PN.FRONT_MATTER){if("---"===t.string)return o.hmdNextMaybe=PN.FRONT_MATTER_END,l(t,o,"yaml",{style:"hmd-frontmatter",fallbackMode:function(){return s("---")},exitChecker:function(e,t){return e.string.startsWith("---")&&""===e.string.substring(3).trim()?(t.hmdNextMaybe=PN.NONE,{endPos:e.string.length}):null}});o.hmdNextMaybe=PN.NONE}var a=o.f===i.htmlBlock,c=-1===o.code,u=o.quote,h=0===t.start;h&&(o.inFootnote&&o.hmdLinkType===IN.MAYBE_FOOTNOTE_URL||(o.hmdLinkType=IN.NONE),o.inlineFootnote=!1,o.wasHeading=o.isHeading,o.isHeading=!1,!o.code||1!==o.code&&2!==o.code||(o.code=0));var d,p,f=o.linkText,m=o.linkHref,v=!(c||a),g=v&&!(o.code||o.indentedCode||o.linkHref),y="",b=!1,w=-1,k=!1;if(v){if(g&&"\\"===t.peek()&&(k=!0),o.list&&!o.header&&"#"===t.peek()&&/^\s*[*\-+]\s$/.test(t.string.substr(0,t.pos))){var C=t.match(/^(#+)(?: |$)/,!0);if(C){var M=C[1].length;return o.header=M,"formatting formatting-header formatting-header-"+M+" header header-"+M}}if(n.math&&g&&"$"===t.peek()&&(o.hmdLinkType===IN.NONE||o.hmdLinkType===IN.MAYBE_FOOTNOTE_URL)&&!o.internalLink&&!o.internalEmbed){var E=t.match(/^(\$)[^\s$]/,!1),S=t.match(/^(\${2})/,!1),x=E?"$":"$$";if(E)(I=t.string.slice(t.pos+1).match(/[^\\]\$(.|$)/))&&I[0].match(/^[^\s\\]\$([^0-9]|$)/)||(E=null);var T=!1;if(E||S){if(0!==t.pos||o.mathed){var D="math";o.quote&&(D+=" line-HyperMD-quote line-HyperMD-quote-"+o.quote+" line-HyperMD-quote-lazy");var A=SN.getMode(e,{name:"stex"}),L="stex"!==A.name;return y+=l(t,o,A,{style:D,skipFirstToken:L,fallbackMode:function(){return s(x)},exitChecker:function(e,t){var n=e.start,i=e.string,r="formatting formatting-math formatting-math-end math-";return t.hmdTable&&"|"===i[n]?{endPos:n,style:r}:i.substr(n,x.length)===x?{endPos:n+x.length,style:r}:null}}),E?(L&&(t.pos+=E[1].length),y+=" formatting formatting-math formatting-math-begin"):(L&&(t.pos+=S[1].length),y+=" formatting formatting-math formatting-math-begin math-block")}T=!0,w=0}o.mathed=T}if(g){o.internalLink?(o.hmdLinkType=IN.INTERNAL_LINK,o.internalLink=!1):o.internalEmbed&&(o.hmdLinkType=IN.EMBED,o.internalEmbed=!1);var P=o.hmdLinkType===IN.INTERNAL_LINK||o.hmdLinkType===IN.EMBED;if(P)if("|"===t.peek())o.isAlias=!0,w=t.pos+1,y+=" link-alias-pipe";else if("]"===t.peek()&&t.match("]]",!1))o.hmdLinkType=IN.NONE,o.linkText=!1,o.isAlias=!1,o.hasAlias=!1,w=t.pos+2,y+=" formatting-link formatting-link-end";else{b=!0,o.isAlias&&(y+=" link-alias"),o.hasAlias&&!o.isAlias&&(y+=" link-has-alias");var I=t.match(/^([^|\]]*?)/,!1);w=t.pos+Math.max(1,I[0].length)}else if(I=("!"===t.peek()||"["===t.peek())&&t.match(/^(!?\[\[)(.*?)]]/,!1))"!"===I[1].charAt(0)?(y+=" formatting-link formatting-link-start formatting-embed",o.internalEmbed=!0):(y+=" formatting-link formatting-link-start",o.internalLink=!0),w=t.pos+I[1].length,o.hasAlias=I[2].contains("|");if(o.hmdLinkType===IN.FOOTREF)if(b=!0,"]"===t.peek())o.hmdLinkType=IN.NONE,w=t.pos+1,y+=" formatting formatting-link formatting-link-end "+qN[IN.FOOTREF];else{var I=t.match(/^([^\]]*?)/,!1);w=t.pos+Math.max(1,I[0].length)}else!(I="["===t.peek()&&t.match(/^\[\^([^\]\s]*?)\](:?)/,!1))||h&&I[2]||(t.match("[^"),y+=" formatting formatting-link formatting-link-start",o.hmdLinkType=IN.FOOTREF,w=t.pos);if(n.blockId&&"^"===t.peek()&&t.match(/^\^([a-zA-Z0-9\-]+)$/))return y+=" blockid";!o.inlineFootnote&&"^"===t.peek()&&t.match("^[",!1)?(o.inlineFootnote=!0,y+=" inline-footnote-start formatting-inline-footnote",w=t.pos+2):o.inlineFootnote&&!P&&o.hmdLinkType===IN.NONE&&!o.image&&t.match("]")&&(o.inlineFootnote=!1,y+=" footref inline-footnote inline-footnote-end formatting-inline-footnote",w=t.pos),"%"===t.peek()&&t.match("%%",!1)?(o.comment?(y+=" comment formatting comment-end",o.comment=!1):(y+=" comment formatting comment-start",o.comment=!0),w=t.pos+2):o.comment&&(y+=" comment")}if(g&&(o.hmdLinkType||o.image||o.linkText||(LN(t.peek())&&t.match(TN)||(p=t.peek(),!/[\s<>()[\]\\.,;:\s@\"`]/.test(p)&&t.match(DN)))&&(y+=" url",w=t.pos)),h&&o.inFootnote){var F=t.match(/^\s*/,!1)[0].replace(/\t/g,"    ").length;F&&F%t.tabSize==0?y+=" line-HyperMD-footnote":o.inFootnote=!1}var O=h&&"["===t.peek()&&t.match(/^\[((?:[^\]\\]|\\.)*)\]:/,!1);if(O){var B=O[1];if("^"!==B[0]||!/\s/.test(B))return t.match(/\[\^?/),o.hmdLinkType=IN.FOOTNOTE,o.formatting="link",o.linkText=!0,y+="formatting formatting-link link "+qN[IN.FOOTNOTE]}else if(o.hmdLinkType===IN.FOOTNOTE){if("]"===t.peek()&&t.match("]:"))return y+=" formatting formatting-link link "+qN[IN.FOOTNOTE],o.linkText=!1,o.inFootnote=!0,o.hmdLinkType=IN.MAYBE_FOOTNOTE_URL,o.f=o.inline=r.startState().inline,y;y+=" link "+qN[IN.FOOTNOTE]}else if(o.hmdLinkType===IN.MAYBE_FOOTNOTE_URL){if(t.eatSpace())return y;if(LN(t.peek())&&t.match(TN))return y+=" url hmd-footnote-url",o.hmdLinkType=IN.MAYBE_FOOTNOTE_URL_TITLE,y;o.hmdLinkType=IN.NONE}else if(o.hmdLinkType===IN.MAYBE_FOOTNOTE_URL_TITLE){if(t.eatSpace())return y;if(o.hmdLinkType=IN.NONE,t.match(/^(["']).*?\1/)||t.match(/^\([^)]*?\)/))return y+=" hmd-footnote-url-title"}}if(o.hmdTable&&"|"===t.peek()&&"\\"!==t.string[t.pos-1]&&function(e){e.code=!1,e.comment=!1,e.em=!1,e.formatting=!1,e.highlight=!1,e.hmdHashtag=!1,e.hmdLinkType=IN.NONE,e.isAlias=!1,e.internalEmbed=!1,e.internalLink=!1,e.linkHref=!1,e.linkText=!1,e.linkTitle=!1,e.strikethrough=!1,e.strong=!1}(o),o.hmdNextState)t.pos=o.hmdNextPos,y+=" "+(o.hmdNextStyle||""),Object.assign(o,o.hmdNextState),o.hmdNextState=null,o.hmdNextStyle=null,o.hmdNextPos=null;else{var N=h&&0!==t.pos;if(b){var R=r.copyState(o),H=t.pos;y+=" "+(r.token(t,R)||""),t.pos=H}else y+=" "+(r.token(t,o)||"");N&&o.f===o.block&&(o.f=o.inline=r.startState().inline),o.inFootnote&&(o.indentationDiff=0)}y=function(e,t,n){return t?(!n.hr&&e.hr&&(t=jN(t,"hr"),e.hr=!1),!n.headers&&e.header&&(t=jN(t,"header"),e.header=0),!n.indentedCode&&e.indentedCode&&(t=jN(t,"inline-code"),e.indentedCode=!1),!n.blockquotes&&e.quote&&(t=jN(t,"quote"),e.quote=0),!n.lists&&e.list&&(t=jN(t,"list"),e.list=!1),t):t}(o,y,n),y.contains("formatting-task")&&(y+=" line-HyperMD-task-line"),-1!==w&&(t.pos=w),o.hmdHashtag&&(y+=" "+n.tokenTypeOverrides.hashtag),o.header&&(o.isHeading=!0),!i.htmlBlock&&o.htmlState&&(i.htmlBlock=o.f);var V=o.f===i.htmlBlock,z=-1===o.code;if(v=v&&!(V||z),g=g&&v&&!(o.code||o.indentedCode||o.linkHref),o.hmdTable&&V){var q=t.current();/(?:^|[^\\])\|/.test(q)&&(""===y.trim()||/string|attribute/.test(y))&&(V=!1,a=!1,o.htmlState=null,o.block=i.block,o.f=o.inline=r.startState().inline,t.pos="|"===q?t.start:t.start+1)}var U=t.current();if(V!==a&&(V?(y+=" hmd-html-begin",i.htmlBlock=o.f):y+=" hmd-html-end"),(c||z)&&(o.localMode&&c||(y=y.replace("inline-code","")),y+=" line-HyperMD-codeblock line-background-HyperMD-codeblock-bg hmd-codeblock",z!==c&&(z?c||(y+=" line-HyperMD-codeblock-begin line-background-HyperMD-codeblock-begin-bg"):y+=" line-HyperMD-codeblock-end line-background-HyperMD-codeblock-end-bg")),v){var _=o.hmdTable;if(h&&_)(_==bN.SIMPLE?ON:NN).test(t.string)?(o.hmdTableCol=0,o.hmdTableRow++):UN(o);if(h&&o.header&&(/^(?:---+|===+)\s*$/.test(t.string)&&o.prevLine&&o.prevLine.header?y+=" line-HyperMD-header-line line-HyperMD-header-line-"+o.header:y+=" line-HyperMD-header line-HyperMD-header-"+o.header),o.indentedCode&&(y+=" hmd-indented-code"),o.quote){if(t.match(/^\s*>/,!1)&&!t.eol()||(y+=" line-HyperMD-quote line-HyperMD-quote-"+o.quote,/^ {0,3}\>/.test(t.string)||(y+=" line-HyperMD-quote-lazy")),h&&(d=U.match(/^\s+/)))return t.pos=d[0].length,(y+=" hmd-indent-in-quote").trim();if(o.quote>u)(I="["===t.peek()&&t.match(/^\[!([^\]]+)\]([+\-]?)(?:\s|$)/))&&(y+=" line-HyperMD-callout hmd-callout line-HyperMD-quote line-HyperMD-quote-"+o.quote)}var W=(o.listStack[o.listStack.length-1]||0)+3,j=h&&/^\s+$/.test(U)&&(!1!==o.list||t.indentation()<=W),G=o.list&&y.contains("formatting-list");if(G||j&&(!1!==o.list||t.match(xN,!1))){var K=o.listStack&&o.listStack.length||0;if(j){if(t.match(xN,!1))!1===o.list&&K++;else{for(;K>0&&t.pos<o.listStack[K-1];)K--;if(!K)return y.trim()||null;y+=" line-HyperMD-list-line-nobullet line-HyperMD-list-line line-HyperMD-list-line-".concat(K)}y+=" hmd-list-indent hmd-list-indent-".concat(K)}else G&&(y+=" line-HyperMD-list-line line-HyperMD-list-line-".concat(K))}if(f!==o.linkText&&(f||o.internalLink||o.internalEmbed?o.hmdLinkType!==IN.FOOTNOTE&&(o.hmdLinkType in qN&&(y+=" "+qN[o.hmdLinkType]),o.hmdLinkType=IN.NONE):(d=t.match(/^([^\]]+)\](\(| ?\[|\:)?/,!1))?d[2]?"["!==d[2]&&" ["!==d[2]||"]"!==t.string.charAt(t.pos+d[0].length)?o.hmdLinkType=IN.NORMAL:o.hmdLinkType=IN.BARELINK2:"^"!==d[1][0]||/\s/.test(d[1])?o.hmdLinkType=IN.BARELINK:o.hmdLinkType=IN.FOOTREF:o.hmdLinkType=IN.BARELINK),m!==o.linkHref&&(m?o.hmdLinkType&&(y+=" "+qN[o.hmdLinkType],o.hmdLinkType=IN.NONE):"["===U&&"]"!==t.peek()&&(o.hmdLinkType=IN.FOOTREF2)),o.hmdLinkType!==IN.NONE&&o.hmdLinkType in qN&&(y+=" "+qN[o.hmdLinkType]),o.inlineFootnote&&(y+=" footref inline-footnote"),k&&U.length>1){var Y=U.length-1,Z=y.replace("formatting-escape","escape")+" hmd-escape-char";return o.hmdOverride=function(e,t){return e.pos+=Y,t.hmdOverride=null,Z.trim()},y+=" hmd-escape-backslash",t.pos-=Y,y}if(!y.trim()&&n.table){var X=!1;if("|"===U.charAt(0)&&(t.pos=t.start+1,U="|",X=!0),!_&&o.prevLine&&o.prevLine.stream&&o.prevLine.stream.string.trim()&&!o.wasHeading&&(X=!1),X){if(!_){FN.test(t.string)?_=bN.SIMPLE:BN.test(t.string)&&(_=bN.NORMAL);var $=void 0;if(_){var Q=t.lookAhead(1);if(_===bN.NORMAL?BN.test(Q)?Q=Q.replace(/^\s*\|/,"").replace(/\|\s*$/,""):_=bN.NONE:_===bN.SIMPLE&&(FN.test(Q)||(_=bN.NONE)),_){$=Q.split("|");for(var J=0;J<$.length;J++){var ee=$[J];if(RN.test(ee))ee="right";else if(HN.test(ee))ee="left";else if(VN.test(ee))ee="center";else{if(!zN.test(ee)){_=bN.NONE;break}ee="default"}$[J]=ee}}}_&&(o.hmdTable=_,o.hmdTableColumns=$,"rtl"===Ew(t.string)&&(o.hmdTableRTL=!0),o.hmdTableRow=o.hmdTableCol=0)}if(_){var te=o.hmdTableColumns.length-1,ne=(ee=o.hmdTableRow,o.hmdTableCol);0==ne&&(y+=" line-HyperMD-table-".concat(_," line-HyperMD-table-row line-HyperMD-table-row-").concat(ee),o.hmdTableRTL&&(y+=" line-HyperMD-table-rtl")),_===bN.NORMAL&&(0===o.hmdTableCol&&/^\s*\|$/.test(t.string.slice(0,t.pos))||t.match(/^\s*$/,!1))?y+=" hmd-table-sep hmd-table-sep-dummy":o.hmdTableCol<te&&(y+=" hmd-table-sep hmd-table-sep-".concat(ne),o.hmdTableCol+=1)}}}if(_&&1===o.hmdTableRow&&y.contains("emoji")&&(y=""),g&&"<"===U){var ie=null;if("!"===t.peek()&&t.match(/^\![A-Z]+/)?ie=">":"!"===t.peek()&&t.match("![CDATA[")?ie="]]>":"?"===t.peek()&&(ie="?>"),null!=ie)return l(t,o,null,{endTag:ie,style:(y+" comment hmd-cdata-html").trim()})}if(n.hashtag&&g)if(o.hmdHashtag){var re=!1;if(!(y=y.replace(/((formatting )?formatting-em|em) /g,"")).contains("formatting")&&!/^\s*$/.test(U)){d=U.match(AN);var oe=U.length-(d?d[0].length:0);oe>0&&(t.backUp(oe),re=!0)}if(re||(re=t.eol()),re||(re=!AN.test(t.peek())),re)y+=" hashtag-end "+(le="tag-"+(le=t.current()).replace(/[^_a-zA-Z0-9\-]/g,"")),o.hmdHashtag=!1}else if("#"===U&&!o.linkText&&!o.image&&(h||/^\s*$/.test(t.string.charAt(t.start-1)))){var ae=t.string.slice(t.pos).replace(/\\./g,""),se=AN.exec(ae);if(se&&/[^0-9]/.test(se[0])){var le="tag-"+se[0].replace(/[^_a-zA-Z0-9\-]/g,"");o.hmdHashtag=!0,y+=" formatting formatting-hashtag hashtag-begin "+n.tokenTypeOverrides.hashtag+" "+le}}}return y.trim()||null},o}),"hypermd"),SN.defineMIME("text/x-hypermd","hypermd"),function(e){e[e.Showing=0]="Showing",e[e.Shown=1]="Shown",e[e.Hiding=2]="Hiding",e[e.Hidden=3]="Hidden"}(_N||(_N={}));var GN=[],KN=[],YN=0,ZN=null,XN=function(e){for(var t=0,n=GN;t<n.length;t++){(s=n[t]).hide()}for(var i=e.targetNode,r=[],o=0,a=KN;o<a.length;o++){var s;(s=a[o]).shouldShowSelf()||s.hoverEl.contains(i)||r.push(s)}e.win.setTimeout((function(){r.forEach((function(e){return e.hide()}))}),5)},$N=function(){for(var e=0,t=GN;e<t.length;e++){t[e].hide()}},QN=function(e){ZN={x:e.clientX,y:e.clientY,doc:e.doc}},JN=function(){if(ZN)if(0===KN.length)window.removeEventListener("click",XN),window.removeEventListener("contextmenu",$N),window.removeEventListener("mousemove",QN),clearInterval(YN),YN=0;else{for(var e=ZN.doc.elementFromPoint(ZN.x,ZN.y),t=0,n=KN;t<n.length;t++){n[t].detect(e)}for(var i=0,r=KN;i<r.length;i++){r[i].transition()}}},eR=function(){YN||(window.addEventListener("click",XN,{capture:!0}),window.addEventListener("contextmenu",XN,{capture:!0}),window.addEventListener("mousemove",QN),YN=window.setInterval(JN,500))},tR=function(e){function t(t,n,i,r){void 0===i&&(i=300),void 0===r&&(r=null);var o=e.call(this)||this;o.onTarget=!0,o.onHover=!1,o.isFocused=!1,o.shownPos=null,o.staticPos=null,o.parent=t,o.targetEl=n,o.waitTime=i,o.state=_N.Showing,o.staticPos=r;var a=o.hoverEl=createDiv("popover hover-popover"),s=o.onMouseIn=o.onMouseIn.bind(o),l=o.onMouseOut=o.onMouseOut.bind(o);return n&&(n.addEventListener("mouseover",s),n.addEventListener("mouseout",l)),a.addEventListener("mouseover",(function(e){xc(e,a)&&(o.onHover=!0,o.transition())})),a.addEventListener("mouseout",(function(e){xc(e,a)&&(o.onHover=!1,o.transition())})),o.timer=activeWindow.setTimeout(o.show.bind(o),i),GN.push(o),eR(),o}return f(t,e),t.prototype.onMouseIn=function(e){this.targetEl&&!xc(e,this.targetEl)||(this.onTarget=!0,this.transition())},t.prototype.onMouseOut=function(e){this.targetEl&&!xc(e,this.targetEl)||(this.onTarget=!1,this.transition())},t.prototype.detect=function(e){var t=this.targetEl,n=this.hoverEl;t&&(this.onTarget=e===t||t.contains(e)),this.onHover=e===n||n.contains(e)},t.prototype.shouldShow=function(){return this.shouldShowSelf()||this.shouldShowChild()},t.prototype.shouldShowSelf=function(){return this.onTarget||this.onHover||this.isFocused},t.prototype.shouldShowChild=function(){var e=this;return KN.some((function(t){return t!==e&&t.targetEl&&e.hoverEl.contains(t.targetEl)&&t.shouldShow()}))},t.prototype.setIsFocused=function(e){this.isFocused=e},t.prototype.transition=function(){var e=this,t=this.shouldShow(),n=this.state;t?n===_N.Hiding&&(this.state=_N.Shown,clearTimeout(this.timer)):n===_N.Showing?this.hide():n===_N.Shown&&(this.state=_N.Hiding,this.timer=activeWindow.setTimeout((function(){e.shouldShow()?e.transition():e.hide()}),this.waitTime))},t.prototype.show=function(){var e=this.targetEl;!e||e.doc.body.contains(e)?(this.state=_N.Shown,this.timer=0,this.shownPos=ZN,this.position(ZN),this.onShow(),GN.remove(this),KN.push(this),eR(),this.load(),wl(this.hoverEl,new ml({fn:"var(--anim-motion-swing)",duration:80}).addProp("opacity","0","1",""))):this.hide()},t.prototype.hide=function(){var e=this,t=e.hoverEl,n=e.targetEl,i=e.timer;this.state=_N.Hidden,GN.remove(this),KN.remove(this),clearTimeout(i),t.detach(),n&&(n.removeEventListener("mouseover",this.onMouseIn),n.removeEventListener("mouseout",this.onMouseOut)),this.onTarget=!1,this.onHover=!1;for(var r=0,o=KN;r<o.length;r++){var a=o[r];!a.shouldShowSelf()&&a.targetEl&&this.hoverEl.contains(a.targetEl)&&a.hide()}this.onHide(),this.unload()},t.prototype.onShow=function(){var e=this.parent;e.hoverPopover&&e.hoverPopover.hide(),e.hoverPopover=this,Bx()},t.prototype.onHide=function(){var e=this.parent;e.hoverPopover===this&&(e.hoverPopover=null)},t.prototype.position=function(e){void 0===e&&(e=this.shownPos);var t,n=this,i=n.hoverEl,r=n.targetEl,o=n.staticPos;if(o&&(e=o),e)t={top:e.y-10,bottom:e.y+10,left:e.x,right:e.x};else if(r){var a=Ow(r,r.doc.body);t={top:a.top,bottom:a.top+r.offsetHeight,left:a.left,right:a.left+r.offsetWidth}}else t={top:0,bottom:0,left:0,right:0};var s=activeDocument,l=!1;if(r){l="rtl"===getComputedStyle(r).direction;var c=sk(t,r.win);t=c.rect,s=c.win.document}i.parentElement!==s.body&&s.body.appendChild(i),Lw(t,i,{gap:10,preventOverlap:!0,horizontalAlignment:l?"right":"left"})},t.prototype.watchResize=function(e){var t=this;if(!this.observer){var n=0;this.observer=new ResizeObserver((function(){var e;if(t.state===_N.Shown){if(++n>=10)return null===(e=t.observer)||void 0===e||e.disconnect(),void(t.observer=null);t.position()}}))}this.observer.observe(e)},t.prototype.onunload=function(){var t;e.prototype.onunload.call(this),null===(t=this.observer)||void 0===t||t.disconnect(),this.observer=null},t}(xA),nR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.create=function(e){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d,p;return y(this,(function(f){switch(f.label){case 0:return n=e.app,i=e.hoverParent,r=e.targetEl,o=e.waitTime,a=e.position,s=e.linktext,l=e.sourcePath,c=e.state,u=new t(i,r,o,a),[4,sleep(Math.max(0,u.waitTime-100))];case 1:return f.sent(),u.state===_N.Hidden?[2,null]:(h=u.hoverEl.createDiv(),(d=u.embed=cV.load({app:n,linktext:s,sourcePath:l,containerEl:h,state:c,depth:0}))?(d instanceof uV&&(d.editable=!0,p=function(e){u.setIsFocused(!0),u.hoverEl.toggleClass("is-editing",!0),d.showEditor(e),d.editMode.register((function(){return u.hide()})),d.editMode.registerDomEvent(d.containerEl.win,"click",(function(e){h.contains(e.targetNode)||u.hide()}))},"edit"===(null==c?void 0:c.mode)?p():lk(d.containerEl,(function(e){d.editorEl.isShown()||p(Bl(e))}))),u.watchResize(h),u.addChild(d),[4,d.loadFile()]):[3,3]);case 2:f.sent(),f.label=3;case 3:return u.state===_N.Shown&&u.position(),[2,u]}}))}))},t}(tR);Xo.EDIT_CONTEXT=!1;var iR=new Set(["Alt-ArrowUp","Shift-Alt-ArrowUp","Alt-ArrowDown","Shift-Alt-ArrowDown","Alt-l","Alt-v","Ctrl-m"]),rR=Vy.filter((function(e){return!iR.has(e.key)})),oR=function(e,t){var n=t.text.search(/\S/);return-1===n?-1:It(t.text.substr(0,n),e.facet(ft.tabSize))},aR=Dd.of((function(e,t,n){try{var i=e.doc.lineAt(t),r=oR(e,i);if(r<0)return;for(var o=null,a=i.number+1,s=e.doc.lines;a<=s;++a){var l=e.doc.line(a),c=oR(e,l);if(-1==c);else{if(!(c>r))break;o=l}}if(o)return{from:n,to:o.to}}catch(e){console.error(e)}return null})),sR=Xi.define((function(){return{lastInsert:""}})),lR=Xo.inputHandler.of((function(e,t,n,i){if(e.compositionStarted||e.state.readOnly)return!1;if(t===n){var r=e.plugin(sR),o="-"===r.lastInsert&&"â€”"===i&&e.state.doc.lineAt(t).from===t;return r.lastInsert=i,!!o&&(e.dispatch({changes:[{insert:"--",from:t}],selection:{anchor:t+2},userEvent:"input.type"}),!0)}})),cR=[sR,lR],uR=Dd.of((function(e,t,n){var i=Kh(e);function r(e){if(i.length<e.to)return!0;var t=i.resolve(e.from,1).type.prop(Up);return t&&/\bheader\b/.test(t)}function o(t){var n=t&&t.text.match(/^\s*(#{1,6})(\s+|$)/);if(n&&r(t))return n[1].length;if(e.doc.lines<=t.number)return 100;var o=e.doc.line(t.number+1);return(n=o.text.match(/^[=\-]+\s*$/))&&i.length>=o.to&&r(o)?"="==o.text[0]?1:2:100}try{var a=e.doc.lines,s=e.doc.lineAt(t);if(s.number===a)return null;var l=o(s);if(100===l)return null;for(var c=e.doc.line(s.number+1),u=s.to;c&&!(o(c)<=l)&&(u=c.to,c.number!==a);)c=e.doc.line(c.number+1);return u===s.to?null:{from:s.to,to:u}}catch(e){console.error(e)}return null})),hR=Dd.of((function(e,t,n){var i=e.doc.lineAt(t);if("---"===i.text){for(var r=i.number-1;r>0;r--)if(e.doc.line(r).text.trim())return;for(var o=e.doc.lines,a=i.number+1;a<=o&&"---"!==e.doc.line(a).text;)a++;if(!(a>o))return{from:t,to:e.doc.line(a).to}}})),dR=function(e){var t=e.state;return(0,e.dispatch)(t.update({selection:{anchor:0},scrollIntoView:!0})),!0},pR=function(e){Xh(e,e.state.doc.length,5e3);for(var t=e.state,n=[],i=1;i<=t.doc.lines;i++){var r=t.doc.line(i),o=Pd(t,r.from,r.to);o&&n.push(Fd.of(o))}for(var a=0;a<t.doc.length;){a=(r=e.lineBlockAt(a)).to+1}return n.length&&e.dispatch({effects:n}),!!n.length};function fR(e,t){var n=-1;return e.changeByRange((function(i){for(var r=[],o=i.from;o<=i.to;){var a=e.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(t(a,r,i),n=a.number),o=a.to+1}var s=e.changes(r);return{changes:r,range:Ee.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}}))}var mR=/^[\s>]+/,vR=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(fR(t,(function(e,n){var i=e.from,r=e.text.match(mR);if(r){var o=r[0].lastIndexOf(">");-1!==o&&(" "===r[0].charAt(o+1)&&o++,i=i+o+1)}n.push({from:i,insert:t.facet(ud)})})),{userEvent:"input.indent"})),!0)},gR=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(fR(t,(function(e,n){var i=e.text.match(mR);if(i){var r=i[0],o=r.indexOf(">");if(o>0)n.push({from:e.from,to:e.from+o,insert:""});else if("> "!==r){var a=r.lastIndexOf(">");-1!==a&&" "===r.charAt(a+1)&&a++;var s=a+1,l=r.substr(s);if(l){for(var c=It(l,t.tabSize),u=0,h=dd(t,Math.max(0,c-hd(t)));u<l.length&&u<h.length&&l.charCodeAt(u)==h.charCodeAt(u);)u++;n.push({from:e.from+s+u,to:e.from+r.length,insert:h.slice(u)})}}}})),{userEvent:"delete.dedent"})),!0)},yR=nt.define(),bR=function(e){var t=Fe.define({create:function(){return e},update:function(e,n){for(var i=0,r=n.effects;i<r.length;i++){var o=r[i];o.is(yR)&&o.value.field===t&&(e=o.value.value)}return e}});return t},wR=bR(null),kR=bR(null),CR=kR,MR=bR(!1),ER=Xo.mouseSelectionStyle.of((function(e,t){if(3!=t.detail||0!=t.button)return null;var n=e.posAtCoords(t);if(null==n)return null;var i=e.state.selection;return{get:function(t,r,o){var a=e.posAtCoords(t);if(null==a)return i;var s=r?i.main.anchor:n,l=e.state.doc.lineAt(s),c=e.state.doc.lineAt(a),u=a>=s?Ee.range(l.from,c.to):Ee.range(l.to,c.from);return o?i.addRange(u):Ee.create([u])},update:function(e){n=e.changes.mapPos(n),i=i.map(e.changes)}}})),SR=new qe;function xR(e,t,n){var i=!1;return e.iterate({from:t,to:n,enter:function(e){var t=e.type.prop(_p);if(t&&t.contains("HyperMD-table"))return i=!0,!1}}),i}var TR=function(e){return function(t){for(var n=t.state,i=n.doc,r=n.selection,o=[],a=Kh(t.state),s=0,l=r.ranges;s<l.length;s++){var c=l[s],u=c.head,h=c.anchor,d=t.lineBlockAt(u),p=!xR(a,c.from,c.to),f=t.moveToLineBoundary(c,!1,p);f.head==u&&f.head!=d.from&&(f=t.moveToLineBoundary(c,!1,!1));var m=i.sliceString(d.from,d.to),v=Im.exec(m);if(v&&v[0]&&f.head<=d.from+v[0].length){var g=v[1],y=void 0===g?"":g,b=v[2],w=void 0===b?"":b,k=d.from+y.length+w.length,C=k<u?k:d.from;f=Ee.cursor(C)}e?o.push(Ee.range(h,f.head,f.goalColumn)):o.push(f)}return t.dispatch({selection:Ee.create(o,r.mainIndex),scrollIntoView:!0}),!0}},DR=function(e){return function(t){for(var n=t.state.selection,i=[],r=Kh(t.state),o=0,a=n.ranges;o<a.length;o++){var s=a[o],l=s.head,c=s.anchor,u=t.lineBlockAt(l),h=!xR(r,s.from,s.to),d=t.moveToLineBoundary(s,!0,h);d.head==l&&d.head!=u.from&&(d=t.moveToLineBoundary(s,!0,!1)),e?i.push(Ee.range(c,d.head,d.goalColumn)):i.push(d)}return t.dispatch({selection:Ee.create(i,n.mainIndex),scrollIntoView:!0}),!0}},AR=Ip.define(CodeMirror.getMode({},{name:"hypermd"})),LR=Ip.define(CodeMirror.getMode({},{name:"hypermd",front_matter:!1,table:!1,fencedCodeBlockHighlighting:!1,taskLists:!1,headers:!1,blockquotes:!1,indentedCode:!1,lists:!1,hr:!1,blockId:!1})),PR=[];PR.push(Xo.exceptionSink.of(console.error)),PR.push(function(e){return void 0===e&&(e={}),[SD.of(e),TD,AD]}()),PR.push(ft.allowMultipleSelections.of(!0)),PR.push(es({eventFilter:function(e){return!(0!==e.button||!e.altKey||!e.shiftKey)||(!Zl.isDesktopApp||!Zl.isLinux)&&1===e.button}})),PR.push(tv()),PR.push(ft.phrases.of({"folded code":""})),PR.push(Xo.lineWrapping),PR.push([cF,Xo.perLineTextDirection.of(!0)]),PR.push(Td()),PR.push(jp),PR.push(Ve.lowest(sm)),PR.push(tD),PR.push(kN),PR.push(ER),PR.push(Xo.clickAddsSelectionRange.of((function(e){return e.altKey&&!e.ctrlKey&&!e.metaKey}))),PR.push(Gp.of("url inline-code property footref hmd-footnote math link-has-alias formatting-link hmd-codeblock blockid hmd-frontmatter hashtag")),PR.push(ra.of(w(w(w([{key:"Home",run:TR(!1),shift:TR(!0),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:TR(!1),shift:TR(!0),preventDefault:!0},{key:"End",run:DR(!1),shift:DR(!0),preventDefault:!0},{mac:"Cmd-ArrowRight",run:DR(!1),shift:DR(!0),preventDefault:!0}],rR,!0),Cv,!0),[{key:"Mod-Shift-z",run:ov,preventDefault:!0}],!1))),PR.push(cd.of((function(e,t){var n=e.state.doc.lineAt(t).text.match(/^\s*/);return n?e.countColumn(n[0]):null}))),PR.push(Xo.domEventHandlers({compositionend:function(e,t){setTimeout((function(){return t.dispatch({})}),100)}}));var IR=SR.of(PR),FR=new qe,OR=function(e){function t(t){var n=e.call(this)||this;return n.init(t),n}return f(t,e),Object.defineProperty(t.prototype,"activeCM",{get:function(){return this.editorComponent.activeCM},enumerable:!1,configurable:!0}),t.prototype.init=function(e){this.editorComponent=e,this.cm=e.cm,this.containerEl=e.cm.dom},t.prototype.refresh=function(){this.cm.requestMeasure()},t.prototype.getValue=function(){return this.cm.state.doc.toString()},t.prototype.setValue=function(e){var t=this.cm;t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},t.prototype.getLine=function(e){var t=this.cm.state.doc;return e>=t.lines?"":t.line(e+1).text},t.prototype.lineCount=function(){return this.cm.state.doc.lines},t.prototype.lastLine=function(){return this.cm.state.doc.lines-1},t.prototype.getSelection=function(){var e=this.cm,t=e.state.selection.main;return e.state.doc.sliceString(t.from,t.to)},t.prototype.getRange=function(e,t){var n=this.cm,i=n.state.doc;return n.state.doc.sliceString(hm(i,e),hm(i,t))},t.prototype.replaceSelection=function(e,t){var n=this.cm,i=n.state.replaceSelection(e);i.userEvent=t,n.dispatch(i)},t.prototype.replaceRange=function(e,t,n,i){var r=this.cm,o=r.state.doc,a=hm(o,t),s=n?hm(o,n):a;r.dispatch({changes:{from:a,to:s,insert:e},scrollIntoView:!0,userEvent:i})},t.prototype.getCursor=function(e){void 0===e&&(e="head");var t=this.cm,n=t.state.selection.main,i=t.state.doc;switch(e){case"from":return dm(i,n.from);case"to":return dm(i,n.to);case"anchor":return dm(i,n.anchor);case"head":return dm(i,n.head)}return null},t.prototype.listSelections=function(){for(var e=this.cm,t=e.state.selection.ranges,n=e.state.doc,i=[],r=0,o=t;r<o.length;r++){var a=o[r];i.push({anchor:dm(n,a.anchor),head:dm(n,a.head)})}return i},t.prototype.setSelection=function(e,t){var n=this.cm,i=n.state.doc,r=hm(i,e),o=t?hm(i,t):r;n.dispatch({selection:{anchor:r,head:o},scrollIntoView:!0})},t.prototype.setSelections=function(e,t){var n=this.cm,i=n.state.doc;n.dispatch({selection:Ee.create(e.map((function(e){var t=hm(i,e.anchor),n=e.head?hm(i,e.head):t;return Ee.range(t,n)}))),scrollIntoView:!0})},t.prototype.exec=function(e){var n=this.editorComponent.activeCM;t.commands[e](n)},t.prototype.focus=function(){this.editorComponent.activeCM.focus()},t.prototype.blur=function(){this.editorComponent.activeCM.contentDOM.blur()},t.prototype.hasFocus=function(){return this.editorComponent.activeCM.hasFocus},t.prototype.getScrollInfo=function(){var e=this.cm.scrollDOM;return{top:e.scrollTop,left:e.scrollLeft,clientHeight:e.clientHeight,clientWidth:e.clientWidth,height:e.offsetHeight,width:e.offsetWidth}},t.prototype.scrollTo=function(e,t){var n=this.cm.scrollDOM;null==e&&(e=n.scrollLeft),null==t&&(t=n.scrollTop),n.scroll(e,t)},t.prototype.scrollIntoView=function(e,t){var n=this.cm,i=hm(n.state.doc,e.from),r=hm(n.state.doc,e.to),o=Ee.range(i,r);n.dispatch({effects:Xo.scrollIntoView(o,{y:t?"center":"nearest"})})},t.prototype.transaction=function(e,t){var n=e.replaceSelection,i=e.changes,r=e.selection,o=e.selections,a=this.cm,s=a.state.doc,l={},c=[];if(l.scrollIntoView=!0,String.isString(n)){var u=a.state.replaceSelection(n);c.push(u.changes),l.selection=u.selection,l.effects=u.effects}if(i)for(var h=0,d=i;h<d.length;h++){u=d[h];var p=hm(s,u.from),f=u.to?hm(s,u.to):p;c.push({from:p,to:f,insert:u.text})}if(c.length>0){var m=ve.of(c,s.length,a.state.facet(ft.lineSeparator));l.changes=[m],(o||r)&&(s=m.apply(s))}else l.changes=c;if(o)l.selection=Ee.create(o.map((function(e){var t=hm(s,e.from),n=e.to?hm(s,e.to):t;return Ee.range(t,n)})));else if(r){p=hm(s,r.from),f=r.to?hm(s,r.to):p;l.selection={anchor:p,head:f}}l.userEvent=t,this.cm.dispatch(l)},t.prototype.wordAt=function(e){var t=this.cm.state.doc,n=this.cm.state.wordAt(hm(t,e));return n?{from:dm(t,n.from),to:dm(t,n.to)}:null},t.prototype.posToOffset=function(e){return hm(this.cm.state.doc,e)},t.prototype.offsetToPos=function(e){return dm(this.cm.state.doc,e)},t.prototype.undo=function(){rv(this.cm)},t.prototype.redo=function(){ov(this.cm)},t.prototype.coordsAtPos=function(e,t){var n=this.cm,i=n.coordsAtPos(hm(n.state.doc,e));if(!i)return null;var r={top:i.top,left:i.left,bottom:i.bottom,right:i.right};if(t){var o=n.scrollDOM.getBoundingClientRect(),a=o.left,s=o.top;a-=n.scrollDOM.scrollLeft,s-=n.scrollDOM.scrollTop,r.top-=s,r.bottom-=s,r.left-=a,r.right-=a}return r},t.prototype.posAtCoords=function(e,t){var n=this.cm,i=n.posAtCoords({x:e,y:t},!1);return null===i?null:dm(n.state.doc,i)},t.prototype.addHighlights=function(e,t,n,i){var r=this.cm,o=[],a=[],s=am.get(t);s||(s=Yn.mark({class:t}),am.set(t,s));for(var l=r.state.doc,c=Rd(r.state),u=function(e){var t=hm(l,e.from),n=hm(l,e.to);if(t>=n)return"continue";a.push(s.range(t,n)),i&&c.between(t,n,(function(e,i){n!==e&&t!==i&&o.push(Od.of({from:e,to:i}))}))},h=0,d=e;h<d.length;h++){u(d[h])}n&&o.push(om.of((function(e,t,n){return n!==s}))),o.push(rm.of(a)),r.dispatch({effects:o})},t.prototype.removeHighlights=function(e){if(this.cm.dom.isShown()&&this.hasHighlight(e))if(e){var t=am.get(e);this.cm.dispatch({effects:om.of((function(e,n,i){return i!==t}))})}else this.cm.dispatch({effects:om.of((function(){return!1}))})},t.prototype.hasHighlight=function(e){var t=this.cm.state.field(sm);if(!e)return t.size>0;for(var n=am.get(e),i=t.iter();i.value;){if(i.value===n)return!0;i.next()}return!1},t.prototype.getAllFoldableLines=function(){for(var e=this.cm.state,t=[],n=1;n<=e.doc.lines;n++){var i=e.doc.line(n),r=Pd(this.cm.state,i.from,i.to);r&&t.push(r)}return t},t.prototype.getFoldOffsets=function(){for(var e=Rd(this.cm.state),t=new Set,n=e.iter();n.value;)t.add(n.from),n.next();return t},t.prototype.foldLess=function(){for(var e=this.cm.state.doc,t=this.getFoldOffsets(),n=this.getAllFoldableLines(),i=[],r=function(r){for(var o=e.lineAt(r.to).to,a={from:r.from,to:o},s=n.filter((function(e){return pm(a,e.from,e.to)})),l=0,c=s;l<c.length;l++){var u=c[l];if(t.has(u.from)){i.push(u);break}}},o=0,a=this.cm.state.selection.ranges;o<a.length;o++){r(a[o])}i.length>0&&this.cm.dispatch({effects:i.map((function(e){return Od.of(e)}))})},t.prototype.foldMore=function(){for(var e=this.cm.state.doc,t=this.getFoldOffsets(),n=this.getAllFoldableLines(),i=[],r=function(r){for(var o=e.lineAt(r.to).to,a={from:r.from,to:o},s=n.filter((function(e){return pm(a,e.from,e.to)})),l=s.length-1;l>=0;l--){var c=s[l];if(!t.has(c.from)){i.push(c);break}}},o=0,a=this.cm.state.selection.ranges;o<a.length;o++){r(a[o])}i.length>0&&this.cm.dispatch({effects:i.map((function(e){return Fd.of(e)}))})},t.prototype.insertHorizontalRule=function(){var e=this.cm.state;this.cm.dispatch(e.changeByRange((function(t){var n=dm(e.doc,t.from).ch>0?2:1,i="\n".repeat(n)+"---\n";return{range:Ee.cursor(t.from+i.length),changes:[{from:t.from,to:t.to,insert:i}]}})))},t.prototype.insertBlock=function(e,t){for(var n=this.cm.state,i=n.doc,r=n.selection,o=Ee.create(r.ranges.map((function(e){var t=i.lineAt(e.from),n=i.lineAt(e.to);return Ee.range(t.from,n.to)}))),a=[],s=0,l=o.ranges;s<l.length;s++){var c=l[s];a.push({insert:e+"\n",from:c.from}),a.push({insert:"\n"+t,from:c.to})}var u=e.length+1;this.cm.dispatch({changes:a,selection:Ee.create(r.ranges.map((function(e){return Ee.range(e.anchor+u,e.head+u)})))})},t.prototype.insertMarkdownLink=function(){var e=this.cm.state,t=e.changeByRange((function(t){var n=e.sliceDoc(t.from,t.to),i="["+n+"]()",r=t.empty?1:1+n.length+2;return{changes:{from:t.from,to:t.to,insert:i},range:Cm(t,t.from+r,t.from+r)}}));t.userEvent="input.autocomplete",this.cm.dispatch(t)},t.prototype.triggerWikilink=function(e){var t=this.cm.state,n=t.changeByRange((function(n){var i=e?"![[":"[[",r=t.sliceDoc(n.from,n.to),o=i+r+"]]",a=n.from+i.length+r.length;return{changes:{from:n.from,to:n.to,insert:o},range:Cm(n,a,a)}}));n.userEvent="input.autocomplete",this.cm.dispatch(n)},t.prototype.clearMarkdownFormatting=function(){for(var e=this.cm,t=[],n=this.getTableSelection(),i=n.length>0?n.map((function(e){var t=e.getAbsoluteOffsets(),n=t.textStart,i=t.textEnd;return Ee.range(n,i)})):e.state.selection.ranges,r=0,o=i;r<o.length;r++){var a=o[r];a.empty||Kh(e.state).iterate({from:a.from,to:a.to,enter:function(e){var n;new Set((null!==(n=e.type.prop(Up))&&void 0!==n?n:"").split(" ")).has("formatting")&&t.push({from:e.from,to:e.to,insert:""})}})}this.cm.dispatch({changes:t})},Object.defineProperty(t.prototype,"inTableCell",{get:function(){var e=this.editorComponent;return e instanceof qR||!!e.tableCell},enumerable:!1,configurable:!0}),t.prototype.getTableSelection=function(){return this.editorComponent.tableCell?this.editorComponent.tableCell.table.selectedCells:[]},t.prototype.toggleMarkdownFormatting=function(e){var t=this.cm,n=Kh(t.state).cursor(Mu.ExcludeBuffers),i=ef[e],r=0,o=[],a=[],s=!0,l=this.getTableSelection(),c=t.state.selection.ranges;l.length>0&&(c=l.map((function(e){var t=e.getAbsoluteOffsets(),n=t.textStart,i=t.textEnd;return Ee.range(n,i)})),s=!1);for(var u=rf(t.state,c[0])[e],h=function(l){var c=tf(t.state,l),h=c.from,d=c.to,p=[],f=function(e,t,n){void 0===n&&(n=0);for(var i=e===t,o=r,a=r,s=0,c=p;s<c.length;s++){var u=c[s],h=u.from-u.to+u.insert.length;u.to<=e&&(o+=h),(h<0&&u.to<=t||u.to<t)&&(a+=h),r+=h}var d=e+o+n,f=i?d:t+a+n;return l.head>=l.anchor?Ee.range(d,f):Ee.range(f,d)};if(nf(n,l.from),u){if(l.empty){var m=lf(t.state,h,i);if(m){var v=m.to-m.from;return o.push(f(h,h,v)),"continue-selectionLoop"}}var g=cf(t.state,n,{from:h,to:d},e),y=sf(t.state,g,e);p.push.apply(p,y),o.push(f(h,Math.min(d,g.to)))}else{if(l.empty){var b=t.state.wordAt(h);b&&(h=b.from,d=b.to)}for(var w=t.state.doc.lineAt(l.from),k=t.state.doc.lineAt(l.to),C=w.number;C<=k.number;C++){var M=h,E=d,S=t.state.doc.line(C);if(!(l.from<S.from||l.to>S.to)||!of(t.state,S)){if(!l.empty){var x=af(t.state,C);M=Math.clamp(x.from,h,d),E=Math.clamp(x.to,h,d)}if(s&&l.empty||M!==E){y=sf(t.state,{from:M,to:E},e);p.push.apply(p,y),p.push({from:M,to:M,insert:i.surroundingChars}),p.push({from:E,to:E,insert:i.surroundingChars})}}}if(l.empty&&s){var T=h===d?-i.surroundingChars.length:0;o.push(f(l.from,l.from,T))}else o.push(f(h,d))}a=a.concat(p)},d=0,p=c;d<p.length;d++)h(p[d]);this.cm.dispatch({changes:a,selection:o.length>0?Ee.create(o):void 0,userEvent:"input.type"})},t.prototype.insertTable=function(){var e=this.cm,t=e.state.selection.main.anchor,n=e.state.doc.lineAt(t),i="\n";n.text.length&&(t=n.to,i="\n\n"),e.dispatch({changes:[{from:t,insert:i+"|     |     |\n| --- | --- |\n|     |     |\n"}]}),e.dispatch({selection:{anchor:t+i.length+1}})},t.prototype.toggleComment=function(){var e=this.cm,t=Kh(e.state).cursor(Mu.ExcludeBuffers),n=e.state.changeByRange((function(n){var i,r,o=rf(e.state,n);if(o.comment){var a=cf(e.state,t,n,"comment");r=sf(e.state,a,"comment")}else n.empty&&(n=null!==(i=e.state.wordAt(n.from))&&void 0!==i?i:n),(r=sf(e.state,n,"comment")).push({from:n.from,to:n.from,insert:"%% "}),r.push({from:n.to,to:n.to,insert:" %%"});return n=n.map(ve.of(r,e.state.doc.length)),!o.comment&&n.empty&&(n=Ee.cursor(n.anchor+3,n.assoc,n.goalColumn,n.bidiLevel)),{range:n,changes:r}}));this.cm.dispatch(n)},t.prototype.searchCursor=function(e){var t=this.cm,n=this,i=function(n,i){return new Wy(t.state.doc,e,n,i,(function(e){return e.toLowerCase()}))},r=t.state.selection.main.from,o=t.state.selection.main.to;function a(t,n){for(var r=n;;){for(var o=Math.max(t,r-1e4-e.length),a=i(o,r),s=null;!a.nextOverlapping().done;)s=a.value;if(s)return s;if(o==t)return null;r-=1e4}}var s=null;return{getIndexAndCount:function(){if(!s)return[0,0];for(var e=0,n=0,r=hm(t.state.doc,s.to),o=i();n<9999&&!o.next().done;)o.value.from<=r&&e++,n++;return[e,n]},current:function(){return s},findPrevious:function(){s=null;var e=a(0,r)||a(r,t.state.doc.length);if(!e)return null;var n=t.state.doc;return r=e.from,o=e.to,s={from:dm(n,e.from),to:dm(n,e.to)}},findNext:function(){var e=i(o).nextOverlapping();if(e.done&&(e=i(0).nextOverlapping()),e.done)return s=null;var n=e.value,a=t.state.doc;return r=n.from,o=n.to,s={from:dm(a,n.from),to:dm(a,n.to)}},replace:function(e,t){var i=this.current();i&&n.replaceRange(e,i.from,i.to,t)},findAll:function(){for(var e=i(),n=[],r=t.state.doc;!e.next().done;){var o=e.value;n.push({from:dm(r,o.from),to:dm(r,o.to)})}return n},replaceAll:function(e,t){var i=this.findAll().map((function(t){return{from:t.from,to:t.to,text:e}}));n.transaction({changes:i},t)}}},t.prototype.getClickableTokenAt=function(e){if(!e)return null;var t=this.cm,n=t.state.doc,i=[],r=n.line(e.line+1),o=Kh(t.state),a=r.from;o.iterate({from:r.from,to:r.to,enter:function(e){var t=e.type,n=e.from,r=e.to,o=t.prop(Up);o&&(a<n&&i.push({type:"",from:a,to:n}),i.push({type:o,from:n,to:r}),a=r)}}),a<r.to&&i.push({type:"",from:a,to:r.to});for(var s=hm(n,e),l=-1,c=0;c<i.length;c++){var u=i[c];if(u.from<=s&&u.to>=s){l=c;break}}if(!(l<0)){var h=function(e){return n.sliceString(e.from,e.to)},d=i[l],p=d.type,f=p.split(" "),m=h(d),v="hmd-internal-link",g=f.contains(v),y=f.contains("formatting-link")&&["[[","![[","]]"].contains(m);if(g||y){for(var b=l-1;b>=0;){var w=i[b].type;if(!w||!w.contains(v))break;b--}for(var k=l+1;k<i.length;){var C=i[k].type;if(!C||!C.contains(v))break;k++}var M="",E=r.to,S=r.from;for(c=b+1;c<k;c++){var x=i[c];x.type.contains(v)&&(M+=h(x),x.from<E&&(E=x.from),x.to>S&&(S=x.to))}var T=function(e){var t=e,n="",i=e.indexOf("|");-1!==i&&(n=e.slice(i+1),"\\"===e.charAt(i-1)&&i--,t=e.slice(0,i));var r=WS(t=t.trim());return{path:r.path,subpath:r.subpath,displayText:n}}(M);return{type:"internal-link",text:T.path+T.subpath,displayText:T.displayText,start:dm(n,E),end:dm(n,S)}}if(f.contains("link")){for(var D=l+1;D<i.length;){var A=i[D];if(!A||!A.type.split(" ").contains("link")){if(A){var L=A.type.split(" ");if(L.contains("string")&&L.contains("url"))break}D=-1;break}D++}D>-1&&D<i.length&&(l=D,f=(p=(d=i[D]).type).split(" "))}if(f.contains("url")){var P=h(d);if("("===P||"["===P?P=h(d=i[l+1]):")"!==P&&"]"!==P||(P=h(d=i[l-1])),!d)return null;var I="external-link";if(f.contains("hmd-footref2"))I="external-ref-link";else if(f.contains("string")){if(Kk(P=Zk(P))){I="internal-link";try{P=decodeURI(P)}catch(e){return null}P=Gc(P).trim()}}else _c(P)?P="mailto:"+P:/^([a-z0-9+.-]+):/.test(P)||(P="https://"+P);return"external-link"===I&&(P=Yk(P)),{type:I,text:P,start:dm(n,d.from),end:dm(n,d.to)}}if(f.contains("hashtag")){var F="";for(E=r.to,S=r.from,c=0;c<i.length;c++){var O=i[c];if(O.type&&O.type.split(" ").contains("hashtag"))F+=h(O),O.from<E&&(E=O.from),O.to>S&&(S=O.to);else{if(!(c<l))break;F="",E=s,S=s}}if(F)return{type:"tag",text:F,start:dm(n,E),end:dm(n,S)}}return f.contains("blockid")?{type:"blockid",text:h(d),start:dm(n,d.from),end:dm(n,d.to)}:f.contains("footref")&&!f.contains("inline-footnote")?(f.contains("formatting-link-start")?d=i[l+1]:f.contains("formatting-link-end")&&(d=i[l-1]),{type:"footref",text:h(d).toLowerCase(),start:dm(n,d.from-2),end:dm(n,d.to+1)}):null}},t.prototype.insertFootnote=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C,M=this;return y(this,(function(y){switch(y.label){case 0:return t=(e=this).cm,n=e.editorComponent,i=n.app,r=n.owner,o=n.file,a=o?i.metadataCache.getFileCache(o):null,s="[^"+nx(a)+"]",l=t.state.selection.main,c=l.from,u=l.to,h=[{from:c,insert:s}],d=t.state.doc,p=d.slice(u).toString().match(/\n*$/),f=p[0].length,m="\n".repeat(2-Math.min(f,2)),h.push({from:d.length,insert:m+s+": \n"}),t.dispatch({changes:h,selection:Ee.cursor(c+s.length)}),r instanceof LY?[4,r.saveImmediately()]:[3,2];case 1:case 3:return y.sent(),[3,5];case 2:return r instanceof uV?[4,r.save(r.text,!0)]:[3,4];case 4:return[2];case 5:return[4,i.metadataCache.computeFileMetadataAsync(o)];case 6:return y.sent(),v=t.domAtPos(c+1).node,g=v.instanceOf(HTMLElement)?v:v.parentElement,b="rtl"===getComputedStyle(g).direction,w=t.coordsAtPos(c),[4,nR.create({app:i,hoverParent:r,targetEl:g,linktext:"#"+s,sourcePath:null==o?void 0:o.path,waitTime:0,state:{mode:"edit"},position:{x:w[b?"right":"left"],y:(w.top+w.bottom)/2}})];case 7:return k=y.sent(),(C=k.embed)instanceof uV&&C.editMode.register((function(){var e=g.win,t=g.doc;e.setTimeout((function(){t.activeElement===t.body&&M.focus()}))})),[2]}}))}))},t.commands={goUp:eg,goDown:tg,goLeft:Av,goRight:Lv,goStart:dR,goEnd:Yg,goWordLeft:Hv,goWordRight:Vv,indentMore:vR,indentLess:gR,newlineAndIndent:Ty,swapLineUp:by,swapLineDown:wy,deleteLine:Ey,toggleFold:function(e){return qd(e)||zd(e)},foldAll:pR,unfoldAll:Wd},t}(Bm),BR=[],NR=function(e){function t(t,n,i){var r=e.call(this)||this;r.cleanupLivePreview=null,r.sourceMode=!0,r.cmInit=!1,r.cursorPopupEl=null,r.tableCell=null,r.app=t,r.owner=i,r.containerEl=n,r.editorSuggest=t.workspace.editorSuggest,r.sourceMode=!r.app.vault.getConfig("livePreview");var o=r.editorEl=n.createDiv("markdown-source-view cm-s-obsidian mod-cm6"),a=r.cm=new Xo({parent:o});return r.editor=new OR(r),r.clipboardManager=new JT(i),eB.registerDomEvents(a.contentDOM,new mB(r.owner)),o.addEventListener("click",r.onEditorClick.bind(r)),o.addEventListener("mousedown",r.onEditorClick.bind(r),{capture:!0}),Zl.isIosApp&&Oc(o,r.onEditorClick.bind(r)),o.addEventListener("contextmenu",r.onContextMenu.bind(r)),o.on("mouseover",".cm-link, .cm-hmd-internal-link, .cm-footref",r.onEditorLinkMouseover.bind(r)),o.addEventListener("dragstart",r.onEditorDragStart.bind(r)),o.onNodeInserted((function(){return r.reinit()})),setTimeout((function(){return r.onResize}),0),r}return f(t,e),t.prototype.onload=function(){this.registerEvent(this.app.vault.on("config-changed",this.onConfigChanged,this))},Object.defineProperty(t.prototype,"file",{get:function(){return this.owner.file},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),t.prototype.get=function(){return this.cm.state.doc.toString()},t.prototype.set=function(e,t){var n=this.cm;if(t||!this.cmInit){this.cleanupLivePreview&&(this.cleanupLivePreview(),this.cleanupLivePreview=null),this.livePreviewPlugin=null,this.editorSuggest.close();var i=[this.getLocalExtensions(),FR.of(this.getDynamicExtensions()),IR];try{var r=this.path;if(r){var o=BR.find((function(e){return e.file===r}));if(o&&o.length===e.length){var a=nv.spec.fromJSON(o.data);i.push(nv.init((function(){return a})))}}}catch(e){console.error(e)}var s=ft.create({doc:e,extensions:i});n.setState(s),n.dispatch({effects:[Xo.scrollIntoView(0),vm.of()]}),n.scrollDOM.scrollTop=0,n.dispatch({effects:[vm.of()]}),this.cmInit=!0}else{for(var l=n.state.doc,c=e.split(/\r?\n/g),u=l.lines,h=0;h<c.length&&h<u&&c[h]===l.line(h+1).text;)h++;if(h===c.length&&h===u)return;for(var d=u-1,p=c.length-1;d>h&&p>h&&l.line(d+1).text===c[p];)d--,p--;var f={line:h,ch:0},m={line:d,ch:l.line(d+1).length},v=c.slice(h,p+1).join("\n");if(h===d&&h===p&&h<u&&h<c.length){for(var g=l.line(h+1).text,y=c[h],b=0;b<g.length&&b<y.length&&g.charAt(b)===y.charAt(b);)b++;for(var w=0;w<g.length-b&&w<y.length-b&&g.charAt(g.length-1-w)===y.charAt(y.length-1-w);)w++;(b>0||w>0)&&(f.ch=b,m.ch-=w,v=v.slice(b,v.length-w))}h===Math.min(u,c.length)&&(f={line:h-1,ch:l.line(h).length},c.length>u&&(v="\n"+v)),n.dispatch({changes:{from:hm(l,f),to:hm(l,m),insert:v},userEvent:"set"})}},t.prototype.saveHistory=function(){var e=this.path;if(e)try{var t=this.cm.state,n=t.field(nv);if(n){var i=nv.spec.toJSON(n,t),r=function(e){if(e&&Array.isArray(e))for(var t=0,n=e;t<n.length;t++){var i=n[t];if(i.changes&&i.changes.length)return!0}return!1};if(!r(i.done)&&!r(i.undone))return;(BR=BR.filter((function(t){return t.file!==e}))).push({ts:Date.now(),file:e,data:i,length:t.doc.length}),BR.length>20&&BR.shift()}}catch(e){console.error(e)}},t.prototype.reinit=function(){this.cm.setRoot(this.editorEl.doc),this.onResize()},t.prototype.reparent=function(e){this.containerEl=e,e.appendChild(this.editorEl),this.reinit()},t.prototype.clear=function(){var e=this;this.cleanupLivePreview&&(this.cleanupLivePreview(),this.cleanupLivePreview=null),this.livePreviewPlugin=null;var t=ft.create({extensions:[this.getLocalExtensions(),FR.of(this.getDynamicExtensions()),IR,MR.init((function(){return!e.sourceMode}))]});this.cm.setState(t),this.cmInit=!0},t.prototype.destroy=function(){this.localExtensions=null,this.cleanupLivePreview&&(this.cleanupLivePreview(),this.cleanupLivePreview=null),this.livePreviewPlugin=null,this.cm.setState(ft.create({})),this.cm.destroy(),this.editorSuggest.close(),this.scope&&this.app.keymap.popScope(this.scope),Zl.isMobile&&this.app.mobileToolbar.update(),this.destroyTableCell()},t.prototype.updateEvent=function(){var e=this,t=!1,n=mc((function(){e.editorSuggest.trigger(e.editor,e.file,t),t=!1}),50),i=mc((function(){e.editor.expandText()}),10),r=mc(this.updateLinkPopup.bind(this),300);return function(o){var a=o.transactions,s=o.docChanged&&a.some(cm);s&&(i(),a.some(um)&&(t=!0)),(o.docChanged||o.selectionSet)&&(n(),r()),e.onUpdate(o,s)}},t.prototype.buildLocalExtensions=function(){var e=this,t=[];t.push(wR.init((function(){return e.cm}))),t.push(kR.init((function(){return e.owner}))),t.push(Xo.updateListener.of(this.updateEvent()));var n=function(){return e.editorSuggest.isShowingSuggestion()};return t.push(ra.of([{key:"ArrowUp",run:n,preventDefault:!0},{key:"ArrowDown",run:n,preventDefault:!0},{key:"Enter",run:n,preventDefault:!0},{key:"Tab",run:n,preventDefault:!0},{key:"Escape",run:function(){return e.editor.removeHighlights(),!1},preventDefault:!0}])),Zl.isMobileApp&&Zl.isIosApp&&t.push(cR),t.push(Xo.domEventHandlers({dragstart:function(e){return e.dataTransfer.clearData("text/html")},dragover:function(t){return e.clipboardManager.handleDragOver(t)},drop:function(t){return e.clipboardManager.handleDrop(t)},copy:function(t){e.editor.getSelection()||e.editor.getLine(e.editor.getCursor().line)||t.preventDefault()},paste:function(t){return e.clipboardManager.handlePaste(t)},focus:function(t){e.app.workspace.activeEditor=e.owner,Zl.isMobile&&e.app.mobileToolbar.update(),e.destroyTableCell()},blur:function(){Zl.isMobile&&e.app.mobileToolbar.update(),e.owner instanceof LY&&e.owner.saveImmediately(),e.editorSuggest.close()}})),t},t.prototype.getLocalExtensions=function(){var e=this.localExtensions;return e||(e=this.localExtensions=this.buildLocalExtensions()),e},t.prototype.getDynamicExtensions=function(){var e=[],t=this.app.vault,n=t.getConfig("useTab"),i=t.getConfig("tabSize");e.push(ft.tabSize.of(i)),e.push(ud.of(n?"\t":"    "));var r=t.getConfig("rightToLeft")||this.editorEl.doc.body.hasClass("mod-rtl");this.editorEl.toggleClass("is-rtl",r),this.editorEl.setAttr("dir",r?"rtl":null),r&&e.push(Xo.theme({"&":{direction:"rtl"}}));var o=t.getConfig("spellcheck");e.push(Xo.contentAttributes.of({spellcheck:String(o),autocorrect:"on",autocapitalize:"on",contenteditable:"true"}));var a=!this.sourceMode;if(this.editorEl.toggleClass("is-live-preview",a),e.push(MR.init((function(){return a}))),a){var s=this.livePreviewPlugin;s||(s=this.livePreviewPlugin=ez(this,this.cm)),e.push(s)}var l=t.getConfig("autoPairBrackets"),c=t.getConfig("autoPairMarkdown");if(l||c){var u=[];l&&u.push("(","[","{","'",'"'),c&&u.push("*","_","`","```");var h={brackets:u};e.push([pD,lD]),e.push(ra.of(fD)),e.push(ft.languageData.of((function(){return[{closeBrackets:h}]}))),e.push(kN)}return this.app.isVimEnabled()&&e.push([hN,Ve.highest(dN),HB,mN]),e.push.apply(e,this.app.workspace.editorExtensions),e},t.prototype.onConfigChanged=function(e){"useTab"!==e&&"tabSize"!==e&&"rightToLeft"!==e&&"spellcheck"!==e&&"autoPairBrackets"!==e&&"autoPairMarkdown"!==e&&"smartIndentList"!==e&&"vimMode"!==e||this.updateOptions()},t.prototype.updateOptions=function(){this.cmInit&&this.cm.dispatch({effects:[FR.reconfigure(this.getDynamicExtensions()),yR.of({field:MR,value:!this.sourceMode})]})},t.prototype.resetSyntaxHighlighting=function(){var e=this.cm;e.state.doc.length>0&&e.dispatch({changes:[{from:0,to:1,insert:e.state.doc.sliceString(0,1)}],userEvent:"set"})},t.prototype.getFoldInfo=function(){for(var e=this.cm,t=e.state.doc,n=[],i=Rd(e.state).iter();i.value;){var r=dm(t,i.from),o=dm(t,i.to);n.push({from:r.line,to:o.line}),i.next()}return n.length>0?{folds:n,lines:t.lines}:null},t.prototype.applyFoldInfo=function(e){var t=this.cm;if(!e||t.state.doc.lines===e.lines){Wd(t);var n=[];if(e)for(var i=t.state.doc,r=0,o=e.folds;r<o.length;r++){var a=o[r],s=i.line(a.from+1),l=i.line(Math.min(a.to+1,i.lines)),c=Pd(t.state,s.from,s.to);c&&n.push(Fd.of({from:c.from,to:Math.max(c.to,l.to)}))}0!==n.length&&t.dispatch({effects:n})}},t.prototype.toggleFoldFrontmatter=function(){if("---"===this.cm.state.doc.lineAt(0).text){var e=Pd(this.cm.state,0,0);if(e){var t=PD(Rd(this.cm.state),0,0)?Od:Fd;this.cm.dispatch({effects:t.of(e)})}}},t.prototype.getClickableTokenHref=function(e){var t;if("external-link"===e.type)return e.text;if("external-ref-link"===e.type){if(!this.file)return null;var n=this.app.metadataCache.getFileCache(this.file),i=null===(t=null==n?void 0:n.referenceLinks)||void 0===t?void 0:t.find((function(t){return t.id===e.text}));return i&&Yk(i.link)?i.link:null}return null},t.prototype.triggerClickableToken=function(e,t){var n=this;if("internal-link"===e.type)setTimeout((function(){n.app.workspace.openLinkText(e.text,n.path,t)}),100);else if("external-link"===e.type||"external-ref-link"===e.type){var i=this.getClickableTokenHref(e);if(!i)return;zc(i)?!0===t?window.open(i,"tab"):!1===t?window.open(i):window.open(i,t):new JA(Qf.interface.msgFailedToOpenHref({href:i}))}else if("tag"===e.type){var r=e.text;r.startsWith("#")||(r="#"+r);var o=this.app.internalPlugins.getEnabledPluginById("global-search");o&&o.openGlobalSearch("tag:"+r)}},t.prototype.updateLinkPopup=function(){var e=this;if(Zl.isMobile&&this.sourceMode){var t=this,n=t.cm,i=t.editor,r=t.cursorPopupEl;r&&(r.detach(),this.cursorPopupEl=null);var o=i.getCursor("from"),a=i.getClickableTokenAt(o);if(a&&"footref"!==a.type){var s=0===a.start.line,l=n.scrollDOM;this.cursorPopupEl=l.createDiv();var c=this.cursorPopupEl.createDiv({cls:"follow-link-popover"});"internal-link"===a.type?c.setText(Qf.editor.linkPopover.tooltipFollowLink()):"external-link"===a.type||"external-ref-link"===a.type?c.setText(Qf.editor.linkPopover.tooltipOpenLink()):"tag"===a.type&&c.setText(Qf.editor.linkPopover.tooltipSearchTag()),c.createDiv("popover-arrow"),c.style.position="absolute",s&&c.addClass("mod-bottom"),c.style.cursor="pointer",c.style.zIndex="var(--layer-popover)",c.style.top="0",c.style.left="0";var u=i.coordsAtPos(a.start,!0),h=i.coordsAtPos(a.end,!0);if(u&&h){var d=c.offsetWidth,p=c.offsetParent?c.offsetParent.clientWidth:l.clientWidth,f=0,m=(u.left+h.left)/2-d/2;f+=s?u.bottom+8:u.top-c.offsetHeight-8,h.top>=u.bottom&&(m=u.left-d/2),c.style.top=f+"px",c.style.left=Math.clamp(m,0,p-d)+"px",c.onClickEvent((function(t){c.detach(),e.triggerClickableToken(a,t.shiftKey||1===t.button),t.preventDefault()})),"internal-link"===a.type&&c.addEventListener("mouseover",(function(t){xc(t,c)&&e.app.workspace.trigger("hover-link",{event:t,source:"editor",hoverParent:e.owner,targetEl:c,linktext:a.text,sourcePath:e.path})}))}else c.detach()}}},t.prototype.toggleSource=function(){this.sourceMode=!this.sourceMode,this.updateOptions(),this.cm.dispatch({effects:[vm.of()]})},t.prototype.onUpdate=function(e,t){},t.prototype.onEditorClick=function(e,t){var n=this;if(Zl.isMobile?Zl.isAndroidApp&&"mousedown"===e.type||"click"===e.type&&!e.isTrusted&&!!t||Zl.isIosApp&&"click"===e.type&&e.isTrusted:"click"===e.type&&0===e.button||"mousedown"===e.type&&1===e.button){var i=Ak.isModifier(e,"Mod")||1===e.button;if((!this.sourceMode||i)&&(this.sourceMode||0!==e.button||i||!e.altKey&&!e.shiftKey)){var r=t||e.target,o=this.cm.contentDOM;if(o.contains(r)&&r!==o&&r.parentNode!==o){for(var a=r;a&&a!==o;){if(a.instanceOf(HTMLElement)&&"false"===a.contentEditable&&!a.hasClass("external-link")&&!a.draggable)return;a=a.parentNode}var s=this.editor.getClickableTokenAt(this.editor.posAtMouse(e));if(s){var l=Ak.isModEvent(e);(function(){if(n.sourceMode)return!0;if(l)return!0;if(!r.instanceOf(HTMLElement))return!1;if("tag"===s.type)return!0;if("internal-link"===s.type){if(!r.matchParent(".cm-underline"))return!1;if(r.matchParent(".cm-hmd-internal-link"))return!0;if(r.matchParent(".cm-link"))return!0}if("external-link"===s.type||"external-ref-link"===s.type){if(r.matchParent(".external-link"))return!0;if(!r.matchParent(".cm-underline"))return!1;if(r.matchParent(".cm-url"))return!0;if(r.matchParent(".cm-link"))return!0}return!1})()&&(this.sourceMode&&"tab"===l&&1!==e.button&&!Ak.isModifier(e,"Shift")&&(l=!1),this.triggerClickableToken(s,l),e.preventDefault())}}}}},t.prototype.onEditorLinkMouseover=function(e,t){if(xc(e,t)){var n=this.editor.getClickableTokenAt(this.editor.posAtMouse(e)),i="footref"===(null==n?void 0:n.type);("internal-link"===(null==n?void 0:n.type)||i)&&this.app.workspace.trigger("hover-link",{event:e,source:"editor",hoverParent:this.owner,targetEl:t,linktext:i?"#[^".concat(n.text,"]"):n.text,sourcePath:this.path})}},t.prototype.onEditorDragStart=function(e){var t=e.targetNode;if(t.instanceOf(HTMLElement)&&t.draggable){var n=this.cm.contentDOM;if(!n.contains(t))return;if(t===n||t.parentNode===n)return;var i=this.editor.getClickableTokenAt(this.editor.posAtMouse(e));if(!i)return;if("internal-link"===i.type)this.app.dragManager.onDragStart(e,this.app.dragManager.dragLink(e,i.text,this.path,i.displayText));else if("external-link"===i.type||"external-ref-link"===i.type){var r=this.getClickableTokenHref(i);r&&Pk(e.dataTransfer,r)}}},t.prototype.onContextMenu=function(e){return g(this,arguments,void 0,(function(e,t){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w,k,C,M,E,S,x,T,D,A=this;return void 0===t&&(t=!1),y(this,(function(L){switch(L.label){case 0:return e.defaultPrevented||Zl.isMobile&&e.instanceOf(PointerEvent)&&"mouse"===e.pointerType&&-1===e.button?[2]:(i=(n=this).app,r=n.editor,(Zl.isMobile||r.hasFocus())&&(o=r.posAtMouse(e))?(a=(new PA).addSections(["title","correction","spellcheck","open","selection-link","selection","insert","clipboard","info","action","view","","danger"]),s=!0,l=!0,c=!0,h=Zl.isDesktopApp&&e.win.electron,d=!1,h&&e.isTrusted?[4,Nf(e)]:[3,2]):[2]);case 1:if(!(p=L.sent())||e.defaultPrevented)return[2];if(u=h.remote.webContents.fromId(p.webContentsId),T=p.editFlags||{},s=T.canCut,l=T.canCopy,c=T.canPaste,u&&p.misspelledWord){if(0===(f=p.dictionarySuggestions||[]).length)a.addItem((function(e){return e.setSection("correction").setDisabled(!0).setTitle(Qf.editor.spellcheck.noSuggestion())}));else for(f.length>6&&(f=f.slice(0,6)),m=function(e){a.addItem((function(t){return t.setSection("correction").setTitle(e).setIcon("lucide-repeat").onClick((function(){a.hide(),u.replaceMisspelling(e)}))}))},v=0,b=f;v<b.length;v++)w=b[v],m(w);a.addItem((function(e){return e.setSection("spellcheck").setTitle(Qf.editor.spellcheck.addToDictionary()).setIcon("lucide-folder-tree").onClick((function(){u.session.addWordToSpellCheckerDictionary(p.misspelledWord),u.replaceMisspelling(p.misspelledWord)}))}))}return[3,3];case 2:d=!0,L.label=3;case 3:if(k=r.getClickableTokenAt(o),!t&&function(e){var t=e.targetNode;return!(!t||!t.instanceOf(Element))&&t.hasClass("cm-line")}(e)&&(d=!0,k=null),Zl.isMobile&&!t&&function(e,t){if(!t)return!1;var n=e.posToOffset(t.start),i=e.posToOffset(t.end);return fm(e.cm.state.selection.ranges,n-1,i+1)}(r,k)&&(d=!0,k=null),k)"internal-link"!==k.type&&"external-link"!==k.type||a.addItem((function(e){return e.setSection("selection").setTitle(Qf.editor.menu.editLink()).setIcon("lucide-text-cursor-input").onClick((function(){r.focus(),r.setSelection(k.start,k.end)}))})),"internal-link"===k.type?i.workspace.handleLinkContextMenu(a,k.text,this.path):"external-link"===k.type||"external-ref-link"===k.type?(C=this.getClickableTokenHref(k))&&i.workspace.handleExternalLinkContextMenu(a,C):"tag"===k.type?a.addItem((function(e){return e.setSection("selection").setTitle(Qf.editor.menu.editTag()).setIcon("lucide-text-cursor-input").onClick((function(){r.focus(),r.setSelection(Lm(k.start,1),k.end)}))})):"footref"===k.type&&this.file&&(M=i.metadataCache.getFileCache(this.file),(E=null===(D=null==M?void 0:M.footnotes)||void 0===D?void 0:D.find((function(e){return e.id===k.text})))&&a.addItem((function(e){return e.setSection("action").setTitle(Qf.editor.menu.labelDeleteFootrefAndNote()).setIcon("lucide-file-signature").onClick((function(){A.cm.dispatch({changes:[{from:r.posToOffset(k.start),to:r.posToOffset(k.end),insert:""},{from:E.position.start.offset-1,to:E.position.end.offset,insert:""}]})}))})));else if(Zl.isMobile&&!t)return[2];return S=r.getSelection().trim(),Zl.isDesktopApp&&Zl.isMacOS&&S.length>0&&a.addItem((function(e){return e.setSection("title").setTitle(Qf.interface.menu.lookupSelection({selection:pc(S,25)})).setIcon("lucide-library").onClick((function(){return g(A,void 0,void 0,(function(){return y(this,(function(e){return h.remote.getCurrentWebContents().showDefinitionForSelection(),[2]}))}))}))})),Zl.isMobile||(a.addItem((function(e){return e.setSection("clipboard").setTitle(Qf.interface.menu.cut()).setIcon("lucide-scissors").setDisabled(!s).onClick((function(){return g(A,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return h&&u?(u.cut(),[3,3]):[3,1];case 1:return e=r.getSelection(),r.replaceSelection(""),[4,navigator.clipboard.writeText(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))}))})),a.addItem((function(e){return e.setSection("clipboard").setTitle(Qf.interface.menu.copy()).setIcon("lucide-copy").setDisabled(!l).onClick((function(){return g(A,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return h&&u?(u.copy(),[3,3]):[3,1];case 1:return e=r.getSelection(),[4,navigator.clipboard.writeText(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))}))})),a.addItem((function(e){return e.setSection("clipboard").setTitle(Qf.interface.menu.paste()).setIcon("lucide-clipboard-check").setDisabled(!c).onClick((function(){return g(A,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return h&&u?(u.paste(),[3,3]):[3,1];case 1:return[4,navigator.clipboard.readText()];case 2:e=t.sent(),r.replaceSelection(e),t.label=3;case 3:return[2]}}))}))}))})),a.addItem((function(e){return e.setSection("clipboard").setTitle(Qf.interface.menu.pasteAsPlainText()).setIcon("lucide-clipboard-type").setDisabled(!c).onClick((function(){return g(A,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return h&&u?(u.pasteAndMatchStyle(),[3,3]):[3,1];case 1:return[4,navigator.clipboard.readText()];case 2:e=t.sent(),r.replaceSelection(e),t.label=3;case 3:return[2]}}))}))}))})),a.addItem((function(e){return e.setSection("clipboard").setTitle(Qf.interface.menu.selectAll()).setIcon("lucide-box-select").onClick((function(){var e=r.lineCount()-1;r.setSelection({line:0,ch:0},{line:e,ch:r.getLine(e).length})}))})),a.addItem((function(e){return e.setSection("selection-link").setTitle(Qf.interface.formatting.insertLink()).setIcon("lucide-link").setDisabled(/\n/.test(S)).onClick((function(){A.editor.triggerWikilink(!1)}))})),a.addItem((function(e){return e.setSection("selection-link").setTitle(Qf.interface.formatting.insertExternalLink()).setIcon("lucide-external-link").setDisabled(/\n/.test(S)).onClick((function(){A.editor.insertMarkdownLink()}))})),x=rf(r.cm.state,r.cm.state.selection.main),k||OA(a,r,x,"selection"),a.addSections(["selection-heading","selection-list","selection-insert-basic","selection-insert-advanced"]),a.addItem((function(e){var t=e.setSection("selection").setTitle(Qf.interface.formatting.labelParagraph()).setDisabled(r.inTableCell).setIcon("lucide-pilcrow").setSubmenu();t.addItem((function(e){return e.setSection("selection-list").setTitle(Qf.interface.formatting.toggleBulletList()).setIcon("lucide-list").onClick((function(){return A.editor.toggleBulletList()}))})).addItem((function(e){return e.setSection("selection-list").setTitle(Qf.interface.formatting.toggleNumberedList()).setIcon("lucide-list-ordered").onClick((function(){return A.editor.toggleNumberList()}))})).addItem((function(e){return e.setSection("selection-list").setTitle(Qf.interface.formatting.toggleChecklist()).setIcon("lucide-check-square").onClick((function(){return A.editor.toggleCheckList()}))}));for(var n=function(e){t.addItem((function(t){return t.setSection("selection-heading").setTitle(Qf.interface.formatting.setHeading({level:e})).setIcon("lucide-heading-"+e).setChecked(x.uniformHeading&&x.headingLevel===e).onClick((function(){return A.editor.setHeading(e)}))}))},i=0,o=[1,2,3,4,5,6];i<o.length;i++){n(o[i])}t.addItem((function(e){return e.setSection("selection-heading").setTitle(Qf.interface.formatting.noHeading()).setIcon("lucide-text").setChecked(x.uniformHeading&&0===x.headingLevel).onClick((function(){return A.editor.setHeading(0)}))})).addItem((function(e){return e.setSection("selection-block").setTitle(Qf.interface.formatting.toggleQuote()).setIcon("lucide-quote").onClick((function(){return A.editor.toggleBlockquote()}))}))})).addItem((function(e){e.setSection("selection").setTitle(Qf.interface.formatting.labelInsert()).setDisabled(r.inTableCell).setIcon("lucide-list-plus").setSubmenu().addItem((function(e){return e.setSection("selection-insert-basic").setTitle(Qf.interface.formatting.insertFootnote()).setIcon("lucide-file-signature").onClick((function(){return A.editor.insertFootnote()}))})).addItem((function(e){return e.setSection("selection-insert-basic").setTitle(Qf.interface.formatting.insertTable()).setIcon("lucide-table").onClick((function(){return A.editor.insertTable()}))})).addItem((function(e){return e.setSection("selection-insert-basic").setTitle(Qf.interface.formatting.insertCallout()).setIcon("lucide-quote").onClick((function(){return A.editor.insertCallout()}))})).addItem((function(e){return e.setSection("selection-insert-basic").setTitle(Qf.interface.formatting.insertHorizontalRule()).setIcon("lucide-minus").onClick((function(){return A.editor.insertHorizontalRule()}))})).addItem((function(e){return e.setSection("selection-insert-advanced").setTitle(Qf.interface.formatting.insertCodeBlock()).setIcon("lucide-code").onClick((function(){return A.editor.insertCodeblock()}))})).addItem((function(e){return e.setSection("selection-insert-advanced").setTitle(Qf.interface.formatting.insertMathBlock()).setIcon("lucide-sigma-square").onClick((function(){return A.editor.insertMathBlock()}))}))}))),i.workspace.trigger("editor-menu",a,r,this.owner),this.onMenu(a),a.showAtMouseEvent(e),d&&e.preventDefault(),[2]}}))}))},t.prototype.onMenu=function(e){},t.prototype.onResize=function(){var e=this.editor;this.containerEl.offsetParent&&(this.editorSuggest.reposition(),Zl.isMobile&&e.hasFocus()&&e.scrollIntoView({from:e.getCursor("anchor"),to:e.getCursor("head")}),e.refresh())},Object.defineProperty(t.prototype,"activeCM",{get:function(){return this.tableCell?this.tableCell.cm:this.cm},enumerable:!1,configurable:!0}),t.prototype.editTableCell=function(e,t){var n=this.tableCell,i=this.cm;if(e===(null==n?void 0:n.table)&&t===(null==n?void 0:n.cell))return n;var r=createDiv("table-cell-wrapper"),o=this.tableCell=this.addChild(new qR(this,r,e,t));return i.observer.ignore((function(){var e;t.lockDimensions(),null===(e=t.contentEl)||void 0===e||e.hide(),t.el.append(r)})),o.cm.focus(),n&&this.destroyTableCell(n),e.setActiveDragHandles(t),e.containerEl.addClass("has-focus"),o},t.prototype.destroyTableCell=function(e){if(!e){if(!this.tableCell)return;e=this.tableCell,this.tableCell=null}var t=this.cm,n=e.cell,i=e.table,r=e.containerEl;i.unsetActiveDragHandles(n),i.containerEl.removeClass("has-focus"),t.observer.ignore((function(){n.lockDimensions(),r.detach(),n.contentEl.show()})),i.rerenderCell(n),this.removeChild(e)},t}(xA),RR=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;r.isScrolling=!1,r.cssClasses=[];var o=r.cm;o.contentDOM.detach();var a=(r.sizerEl=o.scrollDOM.createDiv("cm-sizer")).createDiv("cm-contentContainer"),s=o.scrollDOM.find(".cm-gutters");return s&&a.appendChild(s),a.appendChild(o.contentDOM),o.scrollDOM.addEventListener("scroll",(function(){return r.onScroll()})),r.search=new EN(t,r.editor,r.editorEl,(function(e){e!==r.scope&&(r.scope&&t.keymap.popScope(r.scope),e&&t.keymap.pushScope(e),r.scope=e)})),r.editorEl.addEventListener("click",r.onViewClick.bind(r)),r}return f(t,e),t.prototype.onScroll=function(){this.editorSuggest.reposition(),this.isScrolling?this.isScrolling=!1:this.handleScroll()},t.prototype.handleScroll=function(){this.owner.onMarkdownScroll()},t.prototype.show=function(){this.editorEl.show()},t.prototype.hide=function(){this.editorEl.hide(),this.editorSuggest.close(),this.search.hide()},t.prototype.focus=function(){var e=this.editor,t=e.getScrollInfo();e.focus(),e.scrollTo(t.left,t.top),Zl.isMobileApp&&bA&&bA.show()},t.prototype.getScroll=function(){var e=this.cm,t=e.contentDOM.offsetTop,n=e.scrollDOM.scrollTop,i=e.lineBlockAtHeight(Math.max(n-t,0)),r=e.state.doc.lineAt(i.from).number-1,o=e.state.doc.lineAt(i.to).number-1-r+1,a=n-i.top,s=i.height;return 0===r?s+=t:a-=t,r+o*Math.max(0,a)/Math.max(1,s)},t.prototype.applyScroll=function(e){if(Number.isNumber(e)&&!isNaN(e)){var t=this.cm;e<0&&(e=0),e>=t.state.doc.lines&&(e=t.state.doc.lines-.99);var n=Math.floor(e),i=e-n,r=t.state.doc.line(n+1),o=function(){var e=t.lineBlockAt(r.from),o=t.state.doc.lineAt(e.from).number-1,a=t.state.doc.lineAt(e.to).number-1-o+1,s=n-o,l=e.top,c=e.height,u=t.contentDOM.offsetTop;return 0===o?c+=u:l+=u,l+(s+i)*(c/a)};if(t.visibleRanges.some((function(e){var t=e.from,n=e.to;return t<=r.from&&r.from<=n})))return this.isScrolling=!0,void(t.scrollDOM.scrollTop=o());this.isScrolling=!0,t.dispatch({effects:Xo.scrollIntoView(r.from,{y:"nearest"})}),t.requestMeasure({read:function(){},write:function(){t.requestMeasure({read:function(){return o()},write:function(e){this.isScrolling=!0,t.scrollDOM.scrollTop=e}})}})}},t.prototype.showSearch=function(e){void 0===e&&(e=!1),this.search.show(e)},t.prototype.buildLocalExtensions=function(){var t=this,n=e.prototype.buildLocalExtensions.call(this);return n.push(AR),n.push(BB),n.push(ra.of([{key:"Enter",run:function(){return!!t.app.vault.getConfig("smartIndentList")&&(t.editor.newlineAndIndentContinueMarkdownList(),!0)},shift:function(){return!!t.app.vault.getConfig("smartIndentList")&&(t.editor.newlineAndIndentOnly(),!0)},preventDefault:!0},{key:"Tab",run:function(){return t.editor.indentList(),!0},shift:function(){return t.editor.unindentList(),!0}}])),n},t.prototype.onConfigChanged=function(t){e.prototype.onConfigChanged.call(this,t),"showLineNumber"!==t&&"showIndentGuide"!==t&&"foldHeading"!==t&&"foldIndent"!==t&&"propertiesInDocument"!==t||this.updateOptions()},t.prototype.getDynamicExtensions=function(){var t=e.prototype.getDynamicExtensions.call(this),n=this.app.vault;n.getConfig("showLineNumber")&&(t.push(zs({fixed:!1})),t.push(iD),t.push(el())),n.getConfig("smartIndentList")&&t.push(PB(this)),n.getConfig("showIndentGuide")&&t.push(qD);var i=n.getConfig("foldHeading"),r=n.getConfig("foldIndent"),o=i||r;this.editorEl.toggleClass("is-folding",o),o&&(t.push(Xd()),t.push(RD),i&&t.push(uR),r&&t.push(aR),t.push(hR));var a=n.getConfig("autoPairBrackets"),s=n.getConfig("autoPairMarkdown");return(a||s)&&t.push([ED]),this.editorEl.toggleClass("show-properties","visible"===n.getConfig("propertiesInDocument")),t},t.prototype.setCssClass=function(e){var t=this.editorEl;if(t.removeClasses(this.cssClasses),e&&e.length>0){var n=t.classList;e=e.filter((function(e){return!n.contains(e)})),t.addClasses(e)}else e=[];this.cssClasses=e},t.prototype.onCssChange=function(){this.cm.dispatch({effects:OB.clearCache.of()}),this.editor.refresh()},t.prototype.onViewClick=function(e){var t=this;e.defaultPrevented||(this.editorSuggest.close(),setTimeout((function(){return t.editor.removeHighlights()}),0))},t.prototype.onUpdate=function(t,n){e.prototype.onUpdate.call(this,t,n),t.docChanged&&this.app.workspace.trigger("editor-change",this.editor,this.owner),(t.selectionSet||n||t.focusChanged)&&this.app.workspace.trigger("editor-selection-change",this.editor,this.owner)},t}(NR);function HR(e,t,n){t!==n&&(t.contains("insert")?uN.enterInsertMode(e):uN.exitInsertMode(e,!0))}function VR(e){var t,n;return null!==(n=null===(t=e.state.vim)||void 0===t?void 0:t.mode)&&void 0!==n?n:""}var zR=new qe,qR=function(e){function t(t,n,i,r){var o=e.call(this,t.app,n,t.owner)||this;o.editorEl.removeClass("markdown-source-view"),o.sourceMode=!1,o.table=i,o.cell=r,o.set(km(r.text).result);var a=t.cm.plugin(dN),s=o.cm.plugin(dN);return a&&s&&o.containerEl.win.setTimeout((function(){HR(s.cm,VR(a.cm),VR(s.cm)),s.cm.on("vim-mode-change",(function(){HR(a.cm,VR(s.cm),VR(a.cm))}))}),0),Zl.isIosApp&&n.createSpan({attr:{contenteditable:"true"}}),n.dataset.ignoreSwipe="true",o}return f(t,e),t.prototype.onunload=function(){e.prototype.onunload.call(this),this.destroy()},t.prototype.onUpdate=function(t,n){e.prototype.onUpdate.call(this,t,n);for(var i=t.transactions,r=this.table,o=0,a=i;o<a.length;o++){var s=a[o];!s.docChanged&&!s.selection||s.annotation(xB)||s.isUserEvent("set")||r.dispatchUpdate(this,s)}},t.prototype.buildLocalExtensions=function(){var t=this,n=e.prototype.buildLocalExtensions.call(this);n.push(LR);var i=function(e,n,i){var a=e.state,c=a.doc.lineAt(n.head);if("up"===i||"down"===i){var u=c.number+("down"===i?1:-1);if(u>1&&u<a.doc.lines)return!1}else{var h=n.head+("end"===i?1:-1);if(h>=0&&h<c.length)return!1}return t.table.trimCell(t.cell),t.containerEl.win.setTimeout((function(){"up"===i?r():"down"===i?o():"start"===i?s(e):"end"===i&&l(e)}),10),!0},r=function(){var e=t,n=e.table,i=e.cell,r=n.getCellAbove(i);r?n.placeCursorInCell(r,"last-line"):n.placeCursorAround("before")},o=function(){var e=t,n=e.table,i=e.cell,r=n.getCellBelow(i);r?n.placeCursorInCell(r,"start"):n.placeCursorAround("after")},a=function(e,t,n){return e.textDirection===ai.RTL==("rtl"===Ew(t.text))?n:"end"===n?"start":"end"},s=function(e){var n=t,i=n.table,r=n.cell,o=i.getNextCell(r,"start");o?i.placeCursorInCell(o,a(e,o,"end")):i.placeCursorAround("before")},l=function(e){var n=t,i=n.table,r=n.cell,o=i.getNextCell(r,"end");o?i.placeCursorInCell(o,a(e,o,"start")):i.placeCursorAround("after")},c=function(e,n){var i=e.state,a=i.selection,c=i.doc;if(a.ranges.length>1)return!1;var u=t,h=u.table,d=u.cell;if(h.selectionHead){var p=h.getSelectionBounds(),f=p.minRow,m=p.minCol,v=p.maxRow,g=p.maxCol;switch(h.deselectCells(),h.trimCell(d),n){case"up":case"start":return h.placeCursorInCell(h.getCellAt(f,m),"start"),!0;case"down":case"end":return h.placeCursorInCell(h.getCellAt(v,g),"end"),!0}}var y=a.main;if(y.from!==y.to)return!1;var b=e.textDirection!==e.textDirectionAt(y.head);switch(h.trimCell(d),n){case"up":var w=e.moveVertically(y,!1);return!(e.coordsAtPos(y.from).top!==e.coordsAtPos(w.from).top)&&(r(),!0);case"down":w=e.moveVertically(y,!0);return!(e.coordsAtPos(y.from).top!==e.coordsAtPos(w.from).top)&&(o(),!0);case"start":return 0===y.from&&(b?l(e):s(e),!0);case"end":return y.to===c.length&&(b?s(e):l(e),!0)}},u=function(e,n){var i=e.state,r=i.selection,o=i.doc;if(r.ranges.length>1)return!1;var a,s=t,l=s.table,c=s.cell,u=l.selectionHead,h=l.selectionAnchor,d=u||c,p=d.row,f=d.col,m=r.main;switch(n){case"up":if(!u)if(0!==e.moveToLineBoundary(m,!1,!0).from)return!1;a=l.getCellAt(p-1,f);break;case"down":if(!u)if(e.moveToLineBoundary(m,!0,!0).from!==o.length)return!1;a=l.getCellAt(p+1,f);break;case"start":if(!u&&0!==m.head)return!1;a=l.getCellAt(p,f-1);break;case"end":if(!u&&m.head!==o.length)return!1;a=l.getCellAt(p,f+1)}return a&&(l.selectCells(h||c,a),a.scrollIntoView()),!0},h=function(){return ov(t.table.editor.cm),!0},d=function(e){var n=t.table;return!!n.selectionHead&&(n.deleteSelection(e),!0)};this.app.isVimEnabled()&&n.push(Ve.low(Xi.define((function(e){return e.getNextTablePos=i,{destroy:function(){delete e.getNextTablePos}}}))));var p=function(e){return function(){var n=t.table.editor.cm;return n.focus(),e(n)}},f=function(e,t){return e.textDirectionAt(e.state.selection.main.head)===ai.RTL?"left"===t?"end":"start":"left"===t?"start":"end"};n.push(Ve.high(ra.of([{key:"ArrowUp",run:function(e){return c(e,"up")},shift:function(e){return u(e,"up")}},{key:"ArrowDown",run:function(e){return c(e,"down")},shift:function(e){return u(e,"down")}},{key:"ArrowRight",run:function(e){return c(e,f(e,"right"))},shift:function(e){return u(e,f(e,"right"))}},{key:"Mod-ArrowRight",run:function(e){return c(e,f(e,"right"))}},{key:"ArrowLeft",run:function(e){return c(e,f(e,"left"))},shift:function(e){return u(e,f(e,"left"))}},{key:"Mod-ArrowLeft",run:function(e){return c(e,f(e,"left"))}},{key:"Mod-z",run:function(){return rv(t.table.editor.cm),!0},preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:h,preventDefault:!0},{linux:"Ctrl-Shift-z",run:h,preventDefault:!0},{key:"Mod-Shift-z",run:h,preventDefault:!0},{key:"Delete",run:function(){return d(1)}},{key:"Backspace",run:function(){return d(-1)}},{mac:"Cmd-ArrowUp",run:p(dR),shift:p(Zg)},{mac:"Ctrl-ArrowUp",run:p(rg),shift:p(Vg)},{mac:"Cmd-ArrowDown",run:p(Yg),shift:p(Xg)},{mac:"Ctrl-ArrowDown",run:p(og),shift:p(zg)},{key:"PageUp",run:p(rg),shift:p(Vg)},{key:"PageDown",run:p(og),shift:p(zg)},{key:"Mod-Home",run:p(dR),shift:p(Zg)},{key:"Mod-End",run:p(Yg),shift:p(Xg)}])));var m=function(e){t.table.setCellFocus(e.row,e.col,(function(e){return Ee.create([Ee.range(0,e.state.doc.length)])}))};return n.push(ra.of([{key:"Tab",run:function(){var e=t,n=e.table,i=e.cell,r=n.getNextCell(i,"end");return n.trimCell(i),r?m(r):n.insertRow(n.rows.length,0),!0},shift:function(){var e=t,n=e.table,i=e.cell,r=n.getNextCell(i,"start");return n.trimCell(i),r?m(r):n.insertRow(0,n.alignments.length-1),!0}},{key:"Enter",run:function(){var e=t,n=e.table,i=e.cell;if(n.trimCell(i),i.row===n.rows.length-1)n.insertRow(i.row+1,i.col);else{var r=n.getCellBelow(i);r&&m(r)}return!0}}])),n.push(Ve.high(Xo.domEventHandlers({copy:function(e){return t.table.copySelection(e)},cut:function(e){return t.table.copySelection(e,!0)},paste:function(e){return t.table.pasteSelection(e)},blur:function(e){var n=t,i=n.app,r=n.containerEl,o=n.editorSuggest,a=n.table,s=n.cell,l=a.editor;return a.trimCell(s),Zl.isMobile&&i.mobileToolbar.update(),o.close(),r.win.setTimeout((function(){l.activeCM.hasFocus||l.cm.contentDOM.dispatchEvent(e)})),!0}}))),n.push(zR.of(ft.readOnly.of(!1))),n},t.prototype.setReadonly=function(e){this.cm.dispatch({effects:zR.reconfigure(ft.readOnly.of(e))})},t.prototype.onContextMenu=function(t,n){var i=this.cell;this.table.selectedCells.contains(i)||e.prototype.onContextMenu.call(this,t,n)},t.prototype.onMenu=function(t){e.prototype.onMenu.call(this,t),this.table.onContextMenu(this.cell,t)},t}(NR),UR=["--font-interface-override","--font-text-override","--font-monospace-override","--font-text-size","--accent-h","--accent-s","--accent-l"],_R=["is-frameless","is-focused","is-fullscreen"],WR=["fullscreenchange","click","contextmenu","auxclick","keydown","keyup","mousedown","mouseup","mousemove","copy","paste","cut","drag","dragstart","dragover","dragend","dragenter","dragleave","drop","open-url"];function jR(e){var t=new e.constructor(e.type,e),n=t.preventDefault;t.preventDefault=function(){n.call(t),e.preventDefault()};var i=t.stopPropagation;t.stopPropagation=function(){i.call(t),e.stopPropagation()};var r=t.stopImmediatePropagation;return t.stopImmediatePropagation=function(){r.call(t),e.stopImmediatePropagation()},Object.defineProperty(t,"target",{get:function(){return e.target}}),Object.defineProperty(t,"currentTarget",{get:function(){return e.currentTarget}}),t}function GR(e){for(var t=0,n=WR;t<n.length;t++){var i=n[t];e.addEventListener(i,(function(e){return window.dispatchEvent(jR(e))}),{capture:!0})}}function KR(e,t){void 0===t&&(t=[]);var n=new WeakMap,i=[],r=function(e){var t=n.get(e);if(!t&&(t=e.cloneNode(!0),n.set(e,t),e instanceof HTMLStyleElement&&"MJX-CHTML-styles"===e.id)){for(var i=[],r=e.sheet.cssRules,o=0;o<r.length;o++)i.push(r[o].cssText);t.textContent=i.join("\n")}return t},o=function(){for(var n=w([],t,!0),o=0,a=Array.from(document.head.childNodes);o<a.length;o++){if((c=a[o])instanceof HTMLStyleElement||c instanceof HTMLLinkElement&&"text/css"===c.type){if(c instanceof HTMLStyleElement&&c.textContent.contains("Í¼1"))continue;n.push(r(c))}}for(var s=0,l=i;s<l.length;s++){var c=l[s];n.contains(c)||c.detach()}for(var u=e.document.head,h=u.lastChild,d=n.length-1;d>=0;d--){h!==(c=n[d])?u.insertBefore(c,h?h.nextSibling:null):h=h.previousSibling}i=n},a=function(){for(var t=document.body.className.split(" "),n=new Set(e.document.body.className.split(" ")),i=0,r=_R;i<r.length;i++){var o=r[i];n.has(o)?t.push(o):t.remove(o)}var a=e.parent;a===e?t.push("is-popout-window"):a&&(a.document.body.classList.contains("is-focused")?t.push("is-focused"):t.remove("is-focused")),e.document.body.className=t.join(" ");for(var s=0,l=UR;s<l.length;s++){var c=l[s],u=document.body.style.getPropertyValue(c);e.document.body.style.setProperty(c,u)}e.document.documentElement.style.setProperty("font-size",getComputedStyle(document.body).fontSize)},s=new MutationObserver((function(e){for(var t=!1,i=!1,r=function(e){(e instanceof HTMLStyleElement||e instanceof HTMLLinkElement)&&(n.delete(e),t=!0)},s=0,l=e;s<l.length;s++){var c=l[s];if(c.target!==document.body){r(c.target);for(var u=0,h=Array.from(c.addedNodes);u<h.length;u++){r(h[u])}}else i=!0}t&&o(),i&&a()}));return s.observe(document.head,{attributes:!0,attributeFilter:["data-change"],subtree:!0,childList:!0,characterData:!0}),s.observe(document.body,{attributes:!0,attributeFilter:["class","style"]}),e.parent!==e&&e.parent.addEventListener("focuschange",a),o(),a(),function(){s.disconnect(),e.parent&&e.parent.removeEventListener("focuschange",a)}}function YR(e){var t=e.document,n=function(){return t.body.toggleClass("is-focused",t.hasFocus())};Zl.isDesktopApp&&e.electronWindow?(n=function(){return t.body.toggleClass("is-focused",e.electronWindow.isFocused())},e.addEventListener("focuschange",n)):(e.addEventListener("focus",n),e.addEventListener("blur",n)),n()}function ZR(e){var t=window.globalEnhance.toString();e.eval.call(e,"(".concat(t,")()\n//# sourceURL=enhance.js"))}var XR='<svg aria-hidden="false" width="12" height="12" viewBox="0 0 12 12"><rect width="9" height="9" x="1.5" y="1.5" fill="none" stroke="currentColor"></rect></svg>',$R=function(){function e(e,t){this.eWin=e,this.win=t;var n=this.isMac="darwin"===window.process.platform,i=t.document,r=i.body;r.addClass("is-frameless");var o=this.titleBarEl=i.createElement("div");o.className="titlebar",r.insertBefore(o,r.firstChild);var a=this.titleBarInnerEl=o.createDiv("titlebar-inner");this.titleBarTextEl=a.createDiv({cls:"titlebar-text",text:"Obsidian"}),t.addEventListener("resize",this.updateStatus.bind(this)),new MutationObserver(this.updateTitle.bind(this)).observe(document.head.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),this.leftButtonContainerEl=a.createDiv("titlebar-button-container mod-left");var s=a.createDiv("titlebar-button-container mod-right");if(this.updateStatus(),this.updateTitle(),!n){if(e.minimizable){var l=s.createDiv({cls:"titlebar-button mod-minimize",onclick:function(){return e.minimize()}});l.innerHTML='<svg aria-hidden="false" width="12" height="12" viewBox="0 0 12 12"><rect fill="currentColor" width="10" height="1" x="1" y="6"></rect></svg>',Zf.then((function(){Rx(l,Qf.interface.window.minimize())}))}if(e.maximizable){var c=s.createDiv({cls:"titlebar-button mod-maximize",onclick:function(){e.isMaximized()?e.unmaximize():e.maximize(),u()}});c.innerHTML=XR;var u=function(){t.closed||(e.isMaximized()?(c.innerHTML='<svg aria-hidden="false" width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M1.5 3.5H8.5V10.5H1.5V3.5Z" stroke="currentColor"/> <path d="M4 2H10V8H9V9H11V1H3V3H4V2Z" fill="currentColor"/></svg>',Rx(c,Qf.interface.window.restoreDown())):(c.innerHTML=XR,Rx(c,Qf.interface.window.maximize())))};Zf.then((function(){u()})),t.addEventListener("resize",u)}if(e.closable){var h=s.createDiv({cls:"titlebar-button mod-close",onclick:function(){return e.close()}});h.innerHTML='<svg aria-hidden="false" width="12" height="12" viewBox="0 0 12 12"> <path fill="currentColor" fill-rule="evenodd" d="M10.052 10.968 1.03 1.93l.849-.848 9.023 9.037-.849.848Z"/><path fill="currentColor" fill-rule="evenodd" d="M1.023 10.112 10.06 1.09l.848.85-9.037 9.023-.848-.85Z"/></svg>',Zf.then((function(){Rx(h,Qf.interface.window.closeWindow())}))}}QR(a)}return e.prototype.updateTitle=function(){this.titleBarTextEl.setText(this.win.document.title)},e.prototype.updateStatus=function(){var e=this.win,t=this.eWin;if(!e.closed){var n=t.webContents.getZoomFactor(),i=e.document.body;if(i.toggleClass("is-fullscreen",t.isFullScreen()),i.toggleClass("is-maximized",t.isMaximized()),i.style.setProperty("--zoom-factor",String(n)),this.isMac&&"hidden"===e.titlebarStyle){var r=40,o=getComputedStyle(i).getPropertyValue("--header-height");o&&(r=parseFloat(o)),(isNaN(r)||0===r)&&(r=40);var a=Math.floor(r*n/2-8);a<-5&&(a=0),(t.setWindowButtonPosition||t.setTrafficLightPosition)({x:a+2,y:a})}}},e}();function QR(e){Zl.isMacOS&&Zl.isDesktopApp&&e.addEventListener("dblclick",(function(t){if(0===t.button){var n=t.target;if(!n.instanceOf(HTMLElement)||!(n.closest(".clickable-icon")||n.closest(".workspace-tab-header-inner-close-button")||n.closest(".workspace-tab-header")&&n.closest(".workspace-split.mod-sidedock"))){var i=e.win.electronWindow;i.isMaximizable&&Ef((function(e){var t=e.remote.systemPreferences.getUserDefault("AppleActionOnDoubleClick","string");"Minimize"===t?i.minimize():"Maximize"!==t&&""!==t||(i.isMaximized()?i.unmaximize():i.maximize())}))}}}))}function JR(e){for(var t=e;t!==t.parent&&null!==t.parent;)t=t.parent;var n=t.require;if(n){var i=n("electron");if(i){if(e.electron=i,!i.remote)try{i.remote=n("@electron/remote")}catch(e){console.error(e)}e.electronWindow=i.remote.getCurrentWindow();var r=e.open;e.open=function(e,t,n){return"string"==typeof e&&0===e.indexOf("file:")?(i.ipcRenderer.send("open-url",e),null):r.apply(this,arguments)},e.parent===e&&function(e){var t=e.electron.ipcRenderer.sendSync("frame")||"hidden";e.titlebarStyle=t,"native"!==t&&(e.frameDom=new $R(e.electronWindow,e),"hidden"===t&&e.document.body.addClass("is-hidden-frameless"))}(e)}}}var eH=function(e){function t(t){var n=e.call(this,t.app,t.editorEl,t)||this;if(n.iframeEl=null,n.cleanup=null,n.requestSaveFolds=mc((function(){return n.owner.onMarkdownFold()}),500),n.owner=t,t.useIframe){n.editorEl.detach(),n.editorEl.addClass("mod-inside-iframe");var i=n.iframeEl=n.owner.editorEl.createEl("iframe","embed-iframe is-controlled");i.setAttr("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals"),i.contentDocument&&n.onIframeLoad(),i.onload=n.onIframeLoad.bind(n)}return t instanceof uV&&n.sizerEl.prepend(t.inlineTitleEl),n}return f(t,e),t.prototype.cleanupIframe=function(){this.cleanup&&(this.cleanup(),this.cleanup=null)},t.prototype.onunload=function(){e.prototype.onunload.call(this),this.cleanupIframe()},t.prototype.onIframeLoad=function(){var e=this;this.cleanupIframe();var t=this.iframeEl,n=t.contentDocument,i=t.contentWindow,r=createEl("base",{href:location.href});n.head.appendChild(r),GR(i),i.addEventListener("focus",(function(e){t.win.dispatchEvent(jR(e)),t.dispatchEvent(new FocusEvent("focusin",{bubbles:!0}))}),{capture:!0}),i.addEventListener("blur",(function(e){return t.win.dispatchEvent(jR(e))}),{capture:!0}),this.cleanup=KR(i,[r]),i.app=this.app,ZR(i),Zl.isDesktopApp&&JR(i),Sx(n),n.body.setCssProps({"--safe-area-inset-top":"0","--safe-area-inset-bottom":"0","--safe-area-inset-left":"0","--safe-area-inset-right":"0"}),activeWindow.setTimeout((function(){return e.reparent(n.body)}))},t.prototype.onUpdate=function(t,n){if(e.prototype.onUpdate.call(this,t,n),n){var i=t.state.doc;this.owner.save(i.toString()),this.requestSaveFolds()}var r=t.transactions;(gm(r,Fd)||gm(r,Od))&&this.requestSaveFolds()},t.prototype.getDynamicExtensions=function(){var t=this,n=e.prototype.getDynamicExtensions.call(this);if(!this.sourceMode){var i=this.propertiesExtension;i||(i=this.propertiesExtension=eA(this)),n.push(i)}return n.push(ra.of([{key:"Escape",run:function(e){var n,i=null===(n=e.cm)||void 0===n?void 0:n.vim;return(!i||!i.insertMode)&&(t.owner.showPreview(!0),!0)}}])),n},t}(RR),tH=function(e){function t(t,n){void 0===n&&(n=!0);var i=e.call(this,t.app,t.previewEl,n)||this;return i.search=null,i.owner=t,i.onFoldChange=mc((function(){return i.owner.onMarkdownFold()}),500),i}return f(t,e),Object.defineProperty(t.prototype,"file",{get:function(){return this.owner.file},enumerable:!1,configurable:!0}),t.prototype.set=function(e){var t=this.app,n=this.renderer;n.set(e),n.previewEl.toggleClass("rtl",t.vault.getConfig("rightToLeft")),n.previewEl.toggleClass("show-indentation-guide",t.vault.getConfig("showIndentGuide")),n.applyFoldInfo(this.owner.getFoldInfo());var i=t.vault.getConfig("foldHeading"),r=t.vault.getConfig("foldIndent");n.previewEl.toggleClass("allow-fold-headings",i),n.previewEl.toggleClass("allow-fold-lists",r),i||n.unfoldAllHeadings(),r||n.unfoldAllLists()},t.prototype.edit=function(e){this.renderer.set(e),this.owner.save(e,!0)},t.prototype.onunload=function(){e.prototype.onunload.call(this),this.search&&this.owner.applyScope(null)},t.prototype.showSearch=function(){var e=this;if(!this.search){var t=this.search=new mO(this.app,this.renderer,this.containerEl,(function(){e.search=null,e.owner.applyScope(null)}));this.owner.applyScope(t.scope)}},t.prototype.onScroll=function(){this.owner.onMarkdownScroll()},t}(yB),nH=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.file=null,o.hoverPopover=null,o.editable=!1,o.text="",o.dirty=!1,o.useIframe=!1,o.requestSaveFolds=mc((function(){return o.onMarkdownFold()}),500),o.requestSave=mc((function(){return o.save(o.text,!0)}),2e3),o.app=t,o.containerEl=n,o.file=i,o.state=r,o.previewEl=o.containerEl.createDiv("markdown-embed-content"),o.editorEl=o.containerEl.createDiv("markdown-embed-content"),rk(o.previewEl),rk(o.editorEl),o.previewMode=o.addChild(new tH(o)),o}return f(t,e),t.prototype.onload=function(){var t;e.prototype.onload.call(this),"edit"===(null===(t=this.state)||void 0===t?void 0:t.mode)?this.showEditor():this.showPreview()},t.prototype.save=function(e,t){void 0===t&&(t=!1),this.text=e,this.dirty=!t,t||this.requestSave(),this.set(e)},t.prototype.set=function(e,t){this.text=e,this.previewMode.set(e),this.editMode&&this.editMode.set(e,t)},t.prototype.showSearch=function(e){this.editMode?this.editMode.showSearch(e):this.previewMode.showSearch()},t.prototype.destroyEditor=function(e){void 0===e&&(e=!1);var t=this.editMode;t&&(e&&(this.requestSave.cancel(),this.save(t.cm.state.doc.toString(),!0)),t.destroy(),this.removeChild(t),this.editMode=null),this.editorEl.empty(),this.applyScope(null),this.app.workspace.unsetActiveEditor(this)},t.prototype.onunload=function(){this.destroyEditor(),this.containerEl.empty(),this.app.workspace.unsetActiveEditor(this)},t.prototype.showPreview=function(e){void 0===e&&(e=!1);var t=null;this.editMode&&(t=this.editMode.getScroll()),this.editorEl.hide(),this.previewEl.show(),this.destroyEditor(e);var n=this.getFoldInfo();null!==t&&(this.previewMode.renderer.applyScrollDelayed(t),this.previewMode.renderer.applyFoldInfo(n))},t.prototype.showEditor=function(e){if(this.editable){var t=this.previewMode.renderer.getScroll();this.previewEl.hide(),this.editorEl.show();var n=this.editMode;n||(n=this.editMode=this.addChild(new eH(this))),n.set(this.text,!0);var i,r,o=this.getFoldInfo();i=n.editorEl,r=function(){if(n.applyFoldInfo(o),n.applyScroll(t),n.focus(),e){if(n.iframeEl){var i=ak(n.iframeEl.contentWindow),r=i.x,a=i.y,s=i.scale;e.x=(e.x-r)/s,e.y=(e.y-a)/s}n.editorEl.win.setTimeout((function(){n.cm.dispatch({userEvent:"select.pointer",selection:Ee.single(n.cm.posAtCoords(e,!1))})}))}},i.isShown()?r():i.onNodeInserted(r,!0)}},Object.defineProperty(t.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){var e;return null===(e=this.editMode)||void 0===e?void 0:e.editor},enumerable:!1,configurable:!0}),t.prototype.getMode=function(){return this.editMode?"source":"preview"},t.prototype.toggleMode=function(){"preview"===this.getMode()?this.showEditor():this.showPreview()},t.prototype.onMarkdownScroll=function(){this.app.workspace.trigger("markdown-scroll",this)},Object.defineProperty(t.prototype,"scroll",{get:function(){return"preview"===this.getMode()?this.previewMode.renderer.getScroll():this.editMode.getScroll()},enumerable:!1,configurable:!0}),t}(xA);function iH(e,t,n,i){return dw.test(n)?Qf.plugins.fileExplorer.msgInvalidCharacters()+uw:i&&""===n?Qf.plugins.fileExplorer.msgEmptyFileName():n.startsWith(".")?Qf.plugins.fileExplorer.msgBadDotfile():e.vault.checkForDuplicate(t,n)?Qf.plugins.fileExplorer.msgFileAlreadyExists():pw.test(n)?Qf.plugins.fileExplorer.msgUnsafeCharacters()+hw:dw.test(n)?Qf.plugins.fileExplorer.msgInvalidCharacters()+uw:""}function rH(e,t){Ox(e,t,{classes:["mod-wide","mod-error"]})}var oH=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fileBeingRenamed=null,t}return f(t,e),t.prototype.setEphemeralState=function(t){e.prototype.setEphemeralState.call(this,t);var n=t.rename;if(n){var i=void 0;"start"===n?i=!0:"end"===n&&(i=!1),this.titleEl.isShown()?(Zl.isMobileApp&&(this.titleEl.contentEditable="true"),Sw(this.titleEl,i)):this.app.fileManager.promptForFileRename(this.file)}},t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){var e,t=this;return y(this,(function(n){return(e=this.titleEl).tabIndex=-1,Zl.isMobileApp?e.addEventListener("touchstart",(function(){e.contentEditable="true"})):e.contentEditable="true",e.addEventListener("focus",this.onTitleFocus.bind(this)),e.addEventListener("blur",this.onTitleBlur.bind(this)),e.addEventListener("input",(function(){return t.onTitleChange(e)})),e.addEventListener("paste",(function(n){return t.onTitlePaste(e,n)})),e.addEventListener("keydown",this.onTitleKeydown.bind(this)),[2]}))}))},t.prototype.onTitleFocus=function(){var e=this;this.fileBeingRenamed=this.file,this.titleEl.spellcheck=this.app.vault.getConfig("spellcheck"),wl(this.titleParentEl,new ml({duration:150}).addProp("opacity","1","0","0").addProp("width",this.titleParentEl.clientWidth+"px","0",""),(function(){return e.titleParentEl.detach()}))},t.prototype.onTitleBlur=function(){return g(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:return e=this.titleEl,(t=e.doc.getSelection()).rangeCount>0&&(n=t.getRangeAt(0),i=n.commonAncestorContainer,(e===i||e.contains(i))&&t.removeRange(n)),[4,this.saveTitle(this.titleEl)];case 1:return r.sent()||e.setText(this.file.basename),Bx(),this.fileBeingRenamed=null,this.titleEl.spellcheck=!1,Zl.isMobileApp&&(e.contentEditable="false"),this.titleContainerEl.prepend(this.titleParentEl),wl(this.titleParentEl,new ml({duration:150}).addProp("opacity","0","1","").addProp("width","0",this.titleParentEl.clientWidth+"px","")),this.titleEl.scrollTo({left:0}),[2]}}))}))},t.prototype.onTitlePaste=function(e,t){hk(e,t)},t.prototype.onTitleChange=function(e){var t=this.file;uk(e);var n=e.getText().trim(),i=iH(this.app,t,n,!1);i?rH(e,i):Bx()},t.prototype.onTitleKeydown=function(e){var t=this;if(!e.isComposing){var n=function(){i.blur(),t.setEphemeralState({focus:!0,focusOnMobile:i!==t.titleEl})},i=e.targetNode;if("Escape"===e.key&&(e.preventDefault(),this.fileBeingRenamed=null,i.setText(this.file.basename),n()),"Enter"===e.key||"Tab"===e.key)e.preventDefault(),g(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.saveTitle(i)];case 1:return e.sent()&&n(),[2]}}))}));else if("ArrowDown"===e.key){var r=i.win.getSelection();if(r&&r.rangeCount>=1&&i.instanceOf(HTMLElement)){var o=r.getRangeAt(0);if(i===o.startContainer||i.contains(o.startContainer)){var a=o.getBoundingClientRect();a.bottom+a.height/2>=i.getBoundingClientRect().bottom&&(e.preventDefault(),i.blur(),i.win.getSelection().empty(),this.setEphemeralState({focus:!0,focusMetadata:!e.altKey}))}}}}},t.prototype.saveTitle=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:if(n=(t=this).file,i=t.fileBeingRenamed,n!==i||n.deleted)return[2,!0];if(r=e.getText().trim(),o=iH(this.app,n,r,!0))return rH(e,o),[2,!1];if(a=n.getNewPathAfterRename(r),n.path===a)return[2,!0];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.app.fileManager.renameFile(n,a)];case 2:return c.sent(),[3,4];case 3:return(s=c.sent())&&(console.error(s),l=s.message||s.code||s.toString(),rH(e,l)),[2,!1];case 4:return[2,!0]}}))}))},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n);var r=this.file;r&&(t.addItem((function(e){return e.setSection("action").setTitle(Qf.plugins.fileExplorer.menuOptRename()).setIcon("lucide-edit-3").onClick((function(){return i.app.fileManager.promptForFileRename(r)}))})),t.addItem((function(e){return e.setSection("danger").setTitle(Qf.interface.menu.deleteFile()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){return i.app.fileManager.promptForFileDeletion(r)}))})),this.app.workspace.trigger("file-menu",t,r,n,this.leaf))},t}(YP),aH="audio",sH=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon="lucide-file-audio",t}return f(t,e),t.prototype.getViewType=function(){return aH},t.prototype.canAcceptExtension=function(e){return _T.contains(e)},t.prototype.onLoadFile=function(e){return g(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=(n=this).app,Vc(r=n.contentEl),r.empty(),o=r.createDiv("audio-container"),[4,t.displayInEl(e,i,o)];case 1:return a.sent(),[2]}}))}))},t.displayInEl=function(e,t,n){return g(this,void 0,Promise,(function(){var i;return y(this,(function(r){return i=t.vault.getResourcePath(e),[2,Mc(n,i)]}))}))},t.VIEW_TYPE=aH,t}(oH),lH="image",cH=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon="lucide-image",t}return f(t,e),t.prototype.getViewType=function(){return lH},t.prototype.canAcceptExtension=function(e){return UT.contains(e)},t.prototype.onLoadFile=function(e){return g(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=(n=this).app,(r=n.contentEl).empty(),o=r.createDiv("image-container"),[4,t.displayInEl(e,i,o)];case 1:return a.sent(),[2]}}))}))},t.displayInEl=function(e,t,n){return g(this,void 0,Promise,(function(){var i;return y(this,(function(r){return i=t.vault.getResourcePath(e),[2,kc(n,i)]}))}))},t.VIEW_TYPE=lH,t}(oH),uH={enableScripting:!1,externalLinkTarget:2,imageResourcesPath:"/lib/pdfjs/images/",maxCanvasPixels:16777216,pdfBugEnabled:!1,sidebarViewOnLoad:0,viewerCssTheme:0,disablePreferences:!1,disableHistory:!0,verbosity:0,defaultZoomValue:"page-width",cMapPacked:!0,cMapUrl:"/lib/pdfjs/cmaps/",standardFontDataUrl:"/lib/pdfjs/standard_fonts/",workerSrc:"/lib/pdfjs/pdf.worker.min.js",defaultUrl:"",disableTelemetry:!0,isEvalSupported:!1},hH=Qf.pdf,dH=Qf.plugins.search,pH="pdfjs-search-settings",fH=function(){function e(e,t,n,i){var r=this;this.opened=!1,this.searchSettings={highlightAll:!1,caseSensitive:!1,matchDiacritics:!1,entireWord:!1},this.clickOutsideHandler=function(e){var t=r,n=t.settingsToggleEl,i=t.settingsEl;e.target===i||e.target===n||i.contains(e.target)||(r.toggleSettings(!1),i.win.removeEventListener("click",r.clickOutsideHandler))},this.keyHandlers=null,this.app=e,this.containerEl=t,this.eventBus=n,this.scope=i;var o=e.loadLocalStorage(pH);if(o)try{this.searchSettings=JSON.parse(o)}catch(e){}var a=this.barEl=t.createDiv("pdf-findbar pdf-toolbar mod-hidden"),s=this.searchSettings;a.createDiv("pdf-search-wrapper",(function(e){e.createDiv({cls:"pdf-findbar-message",attr:{"aria-live":"polite"}},(function(e){r.findResultsCountEl=e.createSpan("pdf-toolbar-label pdf-find-results-count")})),new WI(e).setPlaceholder(dH.promptStartSearch()).setClass("global-search-input-container").addRightDecorator((function(e){Rx(e,dH.labelMatchCase()),mx(e,"uppercase-lowercase-a"),e.addClass("clickable-icon"),e.addEventListener("click",(function(){s.caseSensitive=!s.caseSensitive,r.saveSettings(),r.dispatchEvent("casesensitivitychange"),e.toggleClass("is-active",s.caseSensitive)})),e.toggleClass("is-active",s.caseSensitive)})).onChange(mc((function(){return r.dispatchEvent("")}),250,!0)).then((function(e){Rx(e.clearButtonEl,dH.tooltipClearSearch()),r.searchComponent=e,e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"===e.key&&(Zl.isMobile&&xw(),r.dispatchEvent("again",e.shiftKey))}))})),r.findPreviousButtonEl=e.createEl("button",{cls:"pdf-toolbar-button clickable-icon"},(function(e){mx(e,"lucide-arrow-up"),Rx(e,sA(Zl.isMacOS?oA(["Mod","Shift"],"G"):oA(["Shift"],"F3")),{placement:"top"}),e.addEventListener("click",(function(){r.dispatchEvent("again",!0)}))})),r.findNextButtonEl=e.createEl("button",{cls:"pdf-toolbar-button clickable-icon"},(function(e){mx(e,"lucide-arrow-down"),Rx(e,sA(Zl.isMacOS?oA(["Mod"],"G"):oA([],"F3")),{placement:"top"}),e.addEventListener("click",(function(){r.dispatchEvent("again",!1)}))})),e.createDiv("clickable-icon pdf-findbar-settings-btn",(function(e){Rx(e,dH.labelToggleSearchSettings()),mx(e,"lucide-sliders-horizontal"),r.settingsToggleEl=e,e.addEventListener("click",(function(){r.toggleSettings()}))})),e.createDiv("pdf-toolbar-divider"),e.createDiv("clickable-icon",(function(e){Rx(e,Qf.interface.emptyState.close()),mx(e,"lucide-x"),e.addEventListener("click",(function(){r.close()}))}))})),this.settingsEl=createDiv("pdf-findbar-settings",(function(e){new NI(e).setName(hH.actionHighlightAll()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(s.highlightAll).onChange((function(e){s.highlightAll=e,r.saveSettings(),r.dispatchEvent("highlightallchange")}))})),new NI(e).setName(hH.actionMatchDiacritics()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(s.matchDiacritics).onChange((function(e){s.matchDiacritics=e,r.saveSettings(),r.dispatchEvent("diacriticmatchingchange")}))})),new NI(e).setName(hH.actionWholeWords()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(s.entireWord).onChange((function(e){s.entireWord=e,r.saveSettings(),r.dispatchEvent("entirewordchange")}))}))}))}return e.prototype.toggleSettings=function(e){var t=this,n=this.settingsToggleEl,i=this.settingsEl;if(!1===e||i.isShown())return n.removeClass("is-active"),i.win.removeEventListener("click",this.clickOutsideHandler),void i.detach();var r=n.offsetLeft,o=n.offsetTop,a=n.clientHeight,s=n.clientWidth;n.addClass("is-active"),i.setCssProps({top:"".concat(o+a+6,"px"),left:"".concat(r+s,"px")}),this.containerEl.append(i),setTimeout((function(){i.win.addEventListener("click",t.clickOutsideHandler)}))},e.prototype.saveSettings=function(){try{this.app.saveLocalStorage(pH,JSON.stringify(this.searchSettings))}catch(e){console.error("Error saving PDF search settings",e)}},e.prototype.reset=function(){this.updateUIState()},e.prototype.dispatchEvent=function(e,t){void 0===t&&(t=!1);var n=this.searchComponent,i=this.searchSettings;this.eventBus.dispatch("find",m({source:this,type:e,query:n.inputEl.value,findPrevious:t},i))},e.prototype.updateUIState=function(e,t,n){var i=this.searchComponent,r=i.inputEl,o=i.containerEl,a="";switch(o.removeClasses(["mod-pending","mod-not-found"]),e){case pdfjsViewer.FindState.PENDING:a="mod-pending";break;case pdfjsViewer.FindState.NOT_FOUND:a="mod-not-found"}a&&o.addClass(a),r.setAttribute("aria-invalid",String(e===pdfjsViewer.FindState.NOT_FOUND)),this.updateResultsCount(n)},e.prototype.updateResultsCount=function(e){var t=e||{current:0,total:0},n=t.current,i=t.total,r="";i>0&&(r=i>1e3?hH.msgMaxSearchResults({current:n,limit:1e3}):i>1?hH.msgSearchCount_plural({current:n,total:i}):hH.msgSearchCount({current:n,total:i})),this.findResultsCountEl.textContent=r},e.prototype.showSearch=function(){var e=this.searchComponent.inputEl;this.opened&&e.doc.activeElement!==e?(e.focus(),e.select()):this.toggle()},e.prototype.open=function(){var e=this,t=this,n=t.barEl,i=t.searchComponent,r=t.eventBus,o=t.scope;this.opened||(this.opened=!0,n.removeClass("mod-hidden"),n.parentElement.addClass("findbarOpen"),n.parentElement.setCssProps({"--findbar-height":"".concat(n.clientHeight,"px")})),i.inputEl.select(),i.inputEl.focus(),r.dispatch("findbaropen",{source:this}),this.keyHandlers=[o.register([],"F3",(function(){return e.dispatchEvent("again",!1)})),o.register(["Mod"],"G",(function(){return e.dispatchEvent("again",!1)})),o.register(["Shift"],"F3",(function(){return e.dispatchEvent("again",!0)})),o.register(["Mod","Shift"],"G",(function(){return e.dispatchEvent("again",!0)}))]},e.prototype.close=function(){var e=this,t=e.barEl,n=e.eventBus,i=e.scope,r=e.keyHandlers;if(this.opened){this.opened=!1,t.addClass("mod-hidden"),t.parentElement.removeClass("findbarOpen"),t.parentElement.setCssProps({"--findbar-height":""}),n.dispatch("findbarclose",{source:this});for(var o=0,a=r;o<a.length;o++){var s=a[o];i.unregister(s)}this.keyHandlers=null,this.toggleSettings(!1)}},e.prototype.toggle=function(){return this.opened?(this.close(),!1):(this.open(),!0)},e}(),mH=Qf.pdf;var vH=function(){function e(){}return e.prototype.getLanguage=function(){return tm()},e.prototype.getDirection=function(){return"ltr"},e.prototype.get=function(e){return g(this,arguments,Promise,(function(e,t,n){return void 0===t&&(t=null),y(this,(function(i){return[2,mH[e](t)||n]}))}))},e.prototype.translate=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){for(t=function(e){return e?Array.from(e.querySelectorAll("*[data-l10n-id]")):[]}(e),n=0,i=t;n<i.length;n++)r=i[n],o=r.dataset,a=o.l10nId,s=o.l10nArgs?JSON.parse(o.l10nArgs):null,a&&s&&(s.attr?r.setAttr(s.attr,mH[a](s)):r.setText(mH[a](s)));return[2]}))}))},e.prototype.pause=function(){},e.prototype.resume=function(){},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}f(t,e),t.prototype.render=function(){}}($P);var gH,yH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}((gH=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=null,t}return f(t,e),t.prototype.render=function(){var e=this.childrenEl,t=this.children;if(null!==t){e.setChildrenInPlace(t.map((function(e){return e.el})));for(var n=0,i=t;n<i.length;n++)i[n].render()}else e.empty()},t}(QP($P)),gH)),bH=function(){function e(e){this.children=[],this.childrenEl=e}return e.prototype.render=function(){var e=this.childrenEl,t=this.children;e.setChildrenInPlace(t.map((function(e){return e.el})));for(var n=0,i=t;n<i.length;n++){i[n].render()}},e.prototype.addRoot=function(e){this.children.push(e)},e.prototype.clear=function(){this.children=[],this.render()},e}(),wH=function(e){function t(t,n,i){var r=e.call(this)||this;return r.owner=t,r.item=n,r.parent=i,r.innerEl.setText(n.title),r.renderLabels(),r.selfEl.addEventListener("contextmenu",(function(e){e.defaultPrevented||r.owner.onItemContextMenu(r,e)})),r}return f(t,e),t.prototype.getExplicitDestination=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return void 0!==this.explicitDest?[2,this.explicitDest]:(e=this,[4,this.fetchExplicitDestination(this.owner.pdfDocument)]);case 1:return[2,e.explicitDest=t.sent()]}}))}))},t.prototype.getPageNumber=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return void 0!==this.pageNumber?[2,this.pageNumber]:(e=this,[4,this.fetchPageNumber(this.owner.pdfDocument)]);case 1:return[2,e.pageNumber=t.sent()]}}))}))},t.prototype.fetchExplicitDestination=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(n=(t=this).owner,i=t.item,"string"!=typeof(r=i.dest))return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.pdfDocument.getDestination(r)];case 2:return o=l.sent(),e!==n.pdfDocument?[2,null]:o&&Array.isArray(o)&&"number"==typeof(null===(s=o[0])||void 0===s?void 0:s.num)?[2,o]:[3,4];case 3:return a=l.sent(),console.error(a),[2,null];case 4:return[3,6];case 5:if(Array.isArray(r))return[2,r];l.label=6;case 6:return[2,null]}}))}))},t.prototype.fetchPageNumber=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=this.owner,[4,this.getExplicitDestination()];case 1:if(!(n=o.sent()))return[2,null];if(i=null,"object"!=typeof(r=n[0])||null===r)return[3,6];if(null!==(i=e.cachedPageNumber(r)))return[3,5];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,t.pdfDocument.getPageIndex(r)];case 3:return i=o.sent()+1,e!==t.pdfDocument?[2,null]:[3,5];case 4:return o.sent(),[3,5];case 5:return[3,7];case 6:if(!Number.isInteger(r))return[2,null];i=r+1,o.label=7;case 7:return[2,i]}}))}))},t.prototype.getMarkdownLink=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,this.getExplicitDestination()];case 1:return e=a.sent(),[4,this.getPageNumber()];case 2:return t=a.sent(),e&&null!==t?(n="page=".concat(t),e[1]&&"XYZ"===e[1].name&&5===e.length&&null!==e[2]&&(i=[e[2]],null!==e[3]&&(i.push(e[3]),null!==e[4]&&i.push(e[4])),n+="&offset=".concat(i.join(","))),(r=this.item.title)&&(r=r.replace(/[\s\n\r]+/g," ")),[2,(o=this.owner.viewer).getMarkdownLink("#".concat(n),"".concat(o.file.basename,", ").concat(r))]):[2,null]}}))}))},t.prototype.renderLabels=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return e=this.owner,[4,this.getPageNumber()];case 1:return t=a.sent(),e.outline&&null!==t?(n=null!==(r=e.pageLabels)&&void 0!==r?r:[],i=String(null!==(o=n[t-1])&&void 0!==o?o:t),this.selfEl.createDiv("tree-item-flair-outer").createSpan({cls:"tree-item-flair",text:i}),[2]):[2]}}))}))},t.prototype.onSelfClick=function(e){e.defaultPrevented||this.owner.onItemClick(this)},t.prototype.render=function(){e.prototype.render.call(this);var t=this.children;this.setCollapsible(t&&t.length>0),this.setClickable(!0);var n=this.item,i=n.bold,r=n.italic;i&&(this.innerEl.style.fontWeight="bold"),r&&(this.innerEl.style.fontStyle="italic")},t.prototype.setActive=function(e){this.selfEl.toggleClass("mod-active",e)},t.prototype.reveal=function(){for(var e=this.parent;null!==e;)e.setCollapsed(!1,!1),e=e.parent;this.selfEl.scrollIntoView({block:"start"})},t}(yH),kH=function(e){function t(t,n,i,r){var o=e.call(this,n)||this;return o.allItems=[],o.highlighted=null,o.pageLabels=null,o.viewer=t,o.eventBus=i,o.linkService=r,i._on("toggleoutlinetree",o.toggleAllTreeItems.bind(o)),i._on("currentoutlineitem",o.findCurrentOutlineItem.bind(o)),i._on("pagechanging",(function(e){o.currentPageNumber=e.pageNumber})),i._on("pagesloaded",(function(e){var t;o.isPagesLoaded=!!e.pagesCount,null===(t=o.currentOutlineItemCapability)||void 0===t||t.resolve(o.isPagesLoaded)})),i._on("sidebarviewchanged",(function(e){o.sidebarView=e.view})),o.reset(),o}return f(t,e),t.prototype.reset=function(){var e;this.outline=null,this.pageNumberToDestHashCapability=null,this.currentPageNumber=1,this.isPagesLoaded=null,this.highlighted=null,this.allItems=[],null===(e=this.currentOutlineItemCapability)||void 0===e||e.resolve(!1),this.currentOutlineItemCapability=null,this.clear()},t.prototype.recurseTree=function(e,t,n){if(void 0===n&&(n=null),!e.length)return[];for(var i=[],r=0,o=e;r<o.length;r++){var a=o[r],s=new wH(this,a,n);a.items.length&&s.setCollapsed(!0,!1),s.children=this.recurseTree(a.items,t,s),i.push(s),t.push(s)}return i},t.prototype.setPageNumber=function(e){this.currentPageNumber=e},t.prototype.renderTree=function(e){var t=e.outline,n=e.pdfDocument;if(this.outline&&(this.outline!==t?this.reset():this.clear()),this.outline=t||null,this.pdfDocument=n||null,t){for(var i=this.allItems=[],r=0,o=this.recurseTree(t,i);r<o.length;r++){var a=o[r];this.addRoot(a)}this.highlighted=null,this.render(),this.dispatchEvent(i.length)}else this.dispatchEvent(0)},t.prototype.dispatchEvent=function(e){var t=this.currentOutlineItemCapability=pdfjsViewer.createPromiseWithResolvers(),n=this,i=n.pdfDocument,r=n.isPagesLoaded,o=n.eventBus;0===e||(null==i?void 0:i.loadingParams.disableAutoFetch)?t.resolve(!1):null!==r&&t.resolve(r),o.dispatch("outlineloaded",{source:this,outlineCount:e,currentOutlineItemPromise:t.promise})},t.prototype.onItemClick=function(e){var t=this.highlighted,n=this.linkService,i=e.item,r=i.url,o=i.action,a=i.dest,s=i.setOCGState;e.item.dest?(t!==e&&(null==t||t.setActive(!1),e.setActive(!0),this.highlighted=e),r?activeWindow.open(pdfjsViewer.removeNullCharacters(r),"_blank"):o?n.executeNamedAction(o):s?n.executeSetOCGState(s):n.goToDestination(a)):e.children.length&&e.toggleCollapsed(!0)},t.prototype.onItemContextMenu=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return(null===(o=this.viewer.opts)||void 0===o?void 0:o.isEmbed)&&t.preventDefault(),[4,e.getMarkdownLink()];case 1:return(n=a.sent())?((i=e.item.title)&&(i=i.replace(/[\s\n\r]+/g," ")),r=i?Qf.pdf.actionCopySectionLinkTitle({title:pc(i,40)}):Qf.pdf.actionCopySectionLink(),(new PA).addItem((function(e){return e.setTitle(r).setIcon("lucide-copy").onClick((function(){t.view.navigator.clipboard.writeText(n)}))})).showAtMouseEvent(t),[2]):[2]}}))}))},t.prototype.toggleAllTreeItems=function(){var e,t=this.allItems;if(null===(e=this.allItems)||void 0===e?void 0:e.length)for(var n=t[0].collapsed,i=0,r=t;i<r.length;i++){r[i].setCollapsed(!n,!1)}},t.prototype.findCurrentOutlineItem=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(!this.isPagesLoaded)throw new Error("findCurrentOutlineItem: All pages have not been loaded.");return this.outline&&this.pdfDocument?[4,this.getPageNumberToDestHash(this.pdfDocument)]:[2];case 1:if(!(e=l.sent()))return[2];if(null===(s=this.highlighted)||void 0===s||s.setActive(!1),this.highlighted=null,2!==this.sidebarView)return[2];for(t=this.currentPageNumber;t>0;t--)if(n=e.get(t))for(i=0,r=this.allItems;i<r.length;i++)if(o=r[i],(a=o.item.dest)&&a===n)return o.setActive(!0),o.reveal(),this.highlighted=o,[2];return[2]}}))}))},t.prototype.getPageNumberToDestHash=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(this.pageNumberToDestHashCapability)return[2,this.pageNumberToDestHashCapability.promise];t=this.pageNumberToDestHashCapability=pdfjsViewer.createPromiseWithResolvers(),n=new Map,i=0,r=this.allItems,l.label=1;case 1:return i<r.length?(o=r[i],a=o.item.dest,[4,o.getPageNumber()]):[3,4];case 2:if(s=l.sent(),e!==this.pdfDocument)return[2,null];n.set(s,a),l.label=3;case 3:return i++,[3,1];case 4:return t.resolve(n.size>0?n:null),[2,t.promise]}}))}))},t.prototype.setPageLabels=function(e){this.pageLabels=e||null,this.pdfDocument&&this.renderTree({outline:this.outline,pdfDocument:this.pdfDocument})},t}(bH),CH=Qf.pdf,MH=function(){function e(e,t){this.updateCallback=null,this.reason=null,this.containerEl=e,this.eventBus=t}return e.prototype.buildUI=function(){var e=this,t=this.reason===pdfjsLib.PasswordResponses.INCORRECT_PASSWORD;this.dialogEl=this.containerEl.createDiv("pdf-password-dialog",(function(n){mx(n.createDiv("pdf-lock-icon"),"lucide-lock"),n.createDiv({text:CH.msgPasswordProtected()}),n.createDiv({text:t?CH.msgInvalidPassword():CH.msgEnterPassword(),cls:t?"mod-warning mod-small":"mod-small"}),n.createEl("input",{type:"password",placeholder:Qf.setting.account.labelPassword()},(function(t){t.addEventListener("keydown",(function(n){"Enter"===n.code&&e.verify(t.value)})),setTimeout((function(){t.focus()}))}))}))},e.prototype.open=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){return this.buildUI(),this.eventBus.dispatch("passwordpromptopen",{source:this}),[2]}))}))},e.prototype.close=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){return null===(e=this.dialogEl)||void 0===e||e.detach(),this.dialogEl=null,[2]}))}))},e.prototype.verify=function(e){(null==e?void 0:e.length)>0&&this.invokeCallback(e)},e.prototype.invokeCallback=function(e){this.updateCallback&&(this.close(),this.updateCallback(e),this.updateCallback=null)},e.prototype.setUpdateCallback=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){return this.updateCallback=e,this.reason=t,[2]}))}))},e.prototype.reset=function(){this.close(),this.updateCallback=null,this.reason=null},e}(),EH=Qf.pdf,SH=function(){function e(e,t,n){var i=this,r=n.pdfViewer,o=r.eventBus;this.pdfViewer=r,this.eventBus=o,this.toolbarEl=t.createDiv({cls:"pdf-toolbar",prepend:!0},(function(t){t.createDiv("pdf-toolbar-left",(function(t){i.toolbarLeftEl=t,i.sidebarToggleEl=t.createDiv("clickable-icon",(function(e){Rx(e,EH.actionToggleSidebar()),mx(e,"lucide-layout-list"),e.addEventListener("click",(function(){o.dispatch("togglesidebar",{source:i})}))})),i.sidebarOptionsEl=t.createDiv("clickable-icon",(function(e){mx(e,"lucide-chevron-down"),Rx(e,EH.tooltipSidebarOptions());var t=!1;e.addEventListener("click",(function(){if(!t){var n=r.pdfSidebar,a=r.pdfOutlineViewer.outline,s=n.isOpen&&1===n.active,l=n.isOpen&&2===n.active,c=(new PA).addSections(["view","action"]).addItem((function(e){return e.setSection("view").setIcon("lucide-layout-grid").setTitle(EH.actionShowThumbnails()).setChecked(s).onClick((function(){return n.switchView(s?0:1,!0)}))})).addItem((function(e){return e.setSection("view").setIcon("lucide-list").setTitle(EH.actionShowOutline()).setChecked(l).setDisabled(!a).onClick((function(){return n.switchView(l?0:2,!0)}))})).addItem((function(e){return e.setSection("action").setIcon("lucide-list-start").setTitle(EH.actionRevealInOutline()).setDisabled(!a).onClick((function(){l||n.switchView(2,!0),o.dispatch("currentoutlineitem",{source:i})}))}));c.onHide((function(){t=!1}));var u=e.getBoundingClientRect();c.setParentElement(e).showAtPosition({x:u.x,y:u.bottom,width:u.width,overlap:!0,left:!1}),t=!0}}))})),t.createDiv("pdf-toolbar-spacer"),i.zoomOutEl=t.createDiv("clickable-icon",(function(e){Rx(e,Qf.commands.zoomOut()),mx(e,"lucide-zoom-out"),e.addEventListener("click",(function(){o.dispatch("zoomout",{source:i})}))})),t.createDiv("pdf-toolbar-divider"),i.zoomInEl=t.createDiv("clickable-icon",(function(e){Rx(e,Qf.commands.zoomIn()),mx(e,"lucide-zoom-in"),e.addEventListener("click",(function(){o.dispatch("zoomin",{source:i})}))})),t.createDiv("clickable-icon",(function(t){mx(t,"lucide-chevron-down"),Rx(t,EH.tooltipDisplayOptions());var a=!1;t.addEventListener("click",(function(){if(!a){var s=r.pdfViewer.currentScaleValue,l="page-width"===s,c="page-height"===s,u=r.pdfViewer.spreadMode,h=0===u,d=1===u,p=2===u,f=e.loadLocalStorage(TH),m=(new PA).addSections(["zoom","spread","appearance"]).addItem((function(e){return e.setSection("zoom").setIcon("lucide-move-horizontal").setTitle(EH.actionFitWidth()).setChecked(l).onClick((function(){return o.dispatch("scalechanged",{source:i,value:"page-width"})}))})).addItem((function(e){return e.setSection("zoom").setIcon("lucide-move-vertical").setTitle(EH.actionFitHeight()).setChecked(c).onClick((function(){return o.dispatch("scalechanged",{source:i,value:"page-height"})}))})).addItem((function(e){return e.setSection("spread").setIcon("lucide-rectangle-vertical").setTitle(EH.labelSpreadSingle()).setChecked(h).onClick((function(){return o.dispatch("switchspreadmode",{source:i,mode:0})}))})).addItem((function(e){return e.setSection("spread").setIcon("rectangle-vertical-double").setTitle(EH.labelSpreadOdd()).setChecked(d).onClick((function(){return o.dispatch("switchspreadmode",{source:i,mode:1})}))})).addItem((function(e){return e.setSection("spread").setIcon("rectangle-vertical-double").setTitle(EH.labelSpreadEven()).setChecked(p).onClick((function(){return o.dispatch("switchspreadmode",{source:i,mode:2})}))})).addItem((function(t){return t.setSection("appearance").setIcon("lucide-palette").setTitle(EH.labelAdaptToTheme()).setChecked(!!f).onClick((function(){e.saveLocalStorage(TH,f?null:"true"),n.onCSSChange()}))}));m.onHide((function(){a=!1}));var v=t.getBoundingClientRect();m.setParentElement(t).showAtPosition({x:v.x,y:v.bottom,width:v.width,overlap:!0,left:!1}),a=!0}}))})),t.createDiv("pdf-toolbar-spacer"),i.pageInputEl=t.createEl("input",{cls:"pdf-page-input"},(function(e){e.addEventListener("click",(function(){return e.select()})),e.addEventListener("change",(function(){o.dispatch("pagenumberchanged",{source:i,value:e.value})}))})),i.pageNumberEl=t.createSpan("pdf-page-numbers")})),t.createDiv("pdf-toolbar-right",(function(e){i.toolbarRightEl=e}))})),o._on("sidebarviewchanged",(function(e){var t=e.view;i.sidebarToggleEl.toggleClass("is-active",t>0)})),this.eventBus=o,this.reset()}return e.prototype.setPageNumber=function(e,t){this.pageNumber=e,this.pageLabel=t,this.updateUIState(!1)},e.prototype.setPagesCount=function(e,t){this.pagesCount=e,this.hasPageLabels=t,this.updateUIState(!0)},e.prototype.setPageScale=function(e,t){this.pageScaleValue=(e||t).toString(),this.pageScale=t,this.updateUIState(!1)},e.prototype.reset=function(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=pdfjsViewer.DEFAULT_SCALE_VALUE,this.pageScale=pdfjsViewer.DEFAULT_SCALE,this.updateUIState(!0),this.updateLoadingIndicatorState(),this.eventBus.dispatch("toolbarreset",{source:this})},e.prototype.updateUIState=function(e){var t,n;void 0===e&&(e=!1);var i=this,r=i.pagesCount,o=i.pageNumber,a=i.pageScale,s=i.pageInputEl,l=i.pageNumberEl;e&&(this.hasPageLabels?s.type="text":(s.type="number",l.textContent=EH.labelOfPages({count:r})),s.max=r.toString()),this.hasPageLabels?(s.value=this.pageLabel,l.textContent=EH.labelPageOfPages({current:o,count:r})):s.value=o.toString(),null===(t=this.prevPageEl)||void 0===t||t.toggleClass("mod-disabled",o<=1),null===(n=this.nextPageEl)||void 0===n||n.toggleClass("mod-disabled",o>=r),this.zoomOutEl.toggleClass("mod-disabled",a<=pdfjsViewer.MIN_SCALE),this.zoomInEl.toggleClass("mod-disabled",a>=pdfjsViewer.MAX_SCALE)},e.prototype.updateLoadingIndicatorState=function(e){void 0===e&&(e=!1),this.pageInputEl.toggleClass("mod-page-loading",e)},e}(),xH=Qf.pdf,TH="pdfjs-is-themed",DH=function(e,t){var n=t.view.document,i=t.targetNode;if(i.instanceOf(HTMLElement)&&i.hasClass("textLayerNode")){var r=n.caretRangeFromPoint(t.clientX,t.clientY);if(r&&i.contains(r.startContainer))return{el:r.startContainer,offset:r.startOffset}}var o=t.clientX,a=t.clientY;if(!e)return null;var s=e.container.findAll(".page"),l=new Set(e._getVisiblePages().views.map((function(e){return e.view.div})));s=s.filter((function(e){return l.has(e)}));for(var c=null,u=s.length-1;u>=0;u--){var h=s[u],d=h.getBoundingClientRect();if(d.top<=a&&d.left<=o){c=h;break}}if(!c){if(0===s.length)return null;c=s[0]}var p=c.findAll(".textLayerNode"),f=null,m=1/0;for(u=p.length-1;u>=0;u--){var v=p[u],g=v.getBoundingClientRect();if(g.top<=a&&g.left<=o){var y=Math.hypot(Math.max(0,o-g.right),Math.max(0,a-g.bottom));(!f||y<m)&&(f=v,m=y)}}if(!f)return p.length?{el:p[0],offset:0}:null;var b=f.getBoundingClientRect(),w=Math.clamp(o,b.left+1,b.right-1),k=Math.clamp(a,b.top+1,b.bottom-1),C=n.caretRangeFromPoint(w,k);if(C&&f.contains(C.startContainer))return{el:C.startContainer,offset:C.startOffset};C=n.createRange();var M=function(e){if(e.nodeType===Node.TEXT_NODE){var t=e.textContent.length;C.setEnd(e,t);for(var n=0,i=t;n<i;){var r=(n+i)/2|0;C.setStart(e,r);var o=C.getClientRects();if(1===o.length){var a=o[0];a.bottom<k||a.top<=k&&a.left<w?n=r+1:i=r}else n=r+1}return{el:e,offset:n}}for(var s=0;s<e.childNodes.length;s++){C.setStart(e,s),C.setEnd(e,s+1);var l=C.getBoundingClientRect();if(l.left<=w&&l.right>=w&&l.top<=k&&l.bottom>=k)return M(e.childNodes[s])}var c=e.parentNode,u=c.indexOf(e);C.setStart(c,u),C.setEnd(c,u+1);var h=C.getBoundingClientRect();return Math.abs(h.right-w)<Math.abs(w-h.left)?{el:c,offset:u+1}:{el:e,offset:0}};return M(f)};function AH(e,t,n){if(!e.contains(t))return null;for(var i,r=e.doc.createNodeIterator(e,NodeFilter.SHOW_TEXT),o=n;(i=r.nextNode())&&t!==i;)o+=i.textContent.length;return o}function LH(e,t){if(!e.contains(t))return null;if(t.instanceOf(HTMLElement)&&t.hasClass("textLayerNode"))return t;for(var n=t;n=n.parentNode;){if(n===e)return null;if(n.instanceOf(HTMLElement)&&n.hasClass("textLayerNode"))return n}return null}function PH(e){if(!e)return null;var t=parseInt(e);return Number.isNaN(t)?null:t}var IH,FH=function(){function e(e,t,n,i){var r=this;this.subpathHighlight=null,this.unloaded=!1,this.annotationHighlight=null,this.highlightedText=[],this.app=e,this.scope=t,this.containerEl=n,this.opts=i,this.resizeObserver=new ResizeObserver(mc((function(){return r.onResize()}),200,!0))}return e.prototype.load=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w,k,C=this;return y(this,(function(M){switch(M.label){case 0:return(null===(w=this.opts)||void 0===w?void 0:w.initDelay)?[4,sleep(this.opts.initDelay)]:[3,2];case 1:if(M.sent(),this.unloaded)return[2];M.label=2;case 2:return[4,bO()];case 3:return M.sent(),Zl.isMobile&&(uH.maxCanvasPixels=5242880),this.unloaded?[2]:(t=(e=this).app,n=e.opts,i=new pdfjsViewer.EventBus,(r=this.loadingEl=this.containerEl.doc.body.createDiv()).setCssStyles({position:"fixed",opacity:"0",zIndex:"-9999"}),o=r.createDiv("pdf-container"),a=t.loadLocalStorage(TH),s=null,l=!1,a&&(o.addClass("mod-themed"),s=o.getCssPropertyValue("--pdf-page-background"),l=document.body.hasClass("theme-dark")),c=o.createDiv("pdf-content-container"),u=c.createDiv("pdf-viewer-container",(function(e){e.style.position="absolute",e.addEventListener("transitionend",(function(t){t.target===e&&i.dispatch("resize",{source:e})}),!0),e.addEventListener("contextmenu",C.onContextMenu.bind(C)),e.addEventListener("pointerdown",(function(e){C.onAnnotationPointerDown(e),C.onTextSelectionPointerDown(e)}))})),h=u.createDiv("pdfViewer"),d=c.createDiv("pdf-sidebar-container",(function(e){e.addEventListener("contextmenu",C.onThumbnailContextMenu.bind(C))})),p=d.createDiv("pdf-sidebar-content-wrapper").createDiv("pdf-sidebar-content"),f=p.createDiv("pdf-thumbnail-view"),m=p.createDiv("pdf-outline-view hidden"),v={containerEl:r,contentEl:c,outlineViewEl:m,pdfContainerEl:o,sidebarContainerEl:d,thumbnailViewEl:f,viewerContainerEl:u,viewerEl:h},(b=this.pdfViewer=pdfjsViewer.createObsidianPDFViewer({baseConfig:uH,dom:v,eventBus:i,height:null==n?void 0:n.height,isEmbed:null==n?void 0:n.isEmbed,l10n:new vH,removePageBorders:null==n?void 0:n.removePageBorders,pageBackground:s,pageInvert:l})).toolbar=this.toolbar=new SH(t,r,this),b.findBar=this.findBar=new fH(t,c,i,this.scope),b.passwordPrompt=new MH(u,i),b.pdfOutlineViewer=new kH(this,m,i),c.onWindowMigrated((function(){return g(C,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return this.file?(e=b.subpath,[4,b.close()]):[2];case 1:return n.sent(),[4,this.loadFile(this.file)];case 2:return n.sent(),e?[4,null===(t=b.pdfLoadingTask)||void 0===t?void 0:t.promise]:[3,4];case 3:n.sent(),b.applySubpath(e),n.label=4;case 4:return[2]}}))}))})),i._on("sidebarviewchanged",(function(e){d.setAttr("data-view",e.view)})),this.scope.register([],"Escape",(function(){C.clearEphemeralUI(),C.findBar.close()})),i._on("find",(function(){return C.clearEphemeralUI()})),this.resizeObserver.observe(o),[4,b.initialize()]);case 4:return M.sent(),this.unloaded?(this.unload(),[2]):(null===(k=this.loadingEl)||void 0===k||k.detach(),this.loadingEl=null,v.containerEl=this.containerEl,this.containerEl.appendChild(this.toolbar.toolbarEl),this.containerEl.appendChild(o),(null==n?void 0:n.isEmbed)&&(null==n?void 0:n.height)&&b.setHeight(n.height),i._on("textlayerrendered",(function(e){var t,n=e.source;if(n){var i=n.textLayer,r=n.id;if(Zl.isMobile&&(null===(t=i.div)||void 0===t||t.addEventListener("copy",(function(e){C.onMobileCopy(e,n)}))),C.subpathHighlight&&"text"===C.subpathHighlight.type){var o=C.subpathHighlight,a=o.page,s=o.range;r===a&&C.highlightText(a,s)}}})),(null==n?void 0:n.isEmbed)&&i.on("pagerendered",(function(){var e=o.querySelector(".hiddenCopyElement");e&&e.detach()}),{once:!0}),i._on("annotationlayerrendered",(function(e){var t=e.source;if(C.subpathHighlight&&"annotation"===C.subpathHighlight.type){var n=C.subpathHighlight,i=n.page,r=n.id;(null==t?void 0:t.id)===i&&C.highlightAnnotation(i,r)}})),[2])}}))}))},e.prototype.unload=function(){var e,t,n;this.unloaded=!0,this.resizeObserver.disconnect(),null===(e=this.pdfViewer)||void 0===e||e.close(),this.pdfViewer=null,this.toolbar=null,null===(t=this.findBar)||void 0===t||t.close(),this.findBar=null,null===(n=this.loadingEl)||void 0===n||n.detach(),this.loadingEl=null,this.containerEl.empty(),this.destroyAnnotationPopup()},e.prototype.getPage=function(e){return this.pdfViewer.pdfViewer.getPageView(e-1)},e.prototype.renderAnnotationPopup=function(e){var t=this,n=e.layer,i=e.data,r=e.parent,o=r.page,a=o.pageNumber,s=o.view,l=this.getPage(a),c=i.id,u=i.rect,h=i.contentsObj,d=h.dir,p=h.str,f=createDiv("popup");if(f.createDiv({cls:"popupContent",attr:{dir:d}},(function(e){for(var t=p.split(/(?:\r\n?|\n)/),n=0,i=t.length;n<i;n++)e.appendText(t[n]),n<i-1&&e.createEl("br")})),f.createDiv("popupMeta",(function(e){i.titleObj&&e.createDiv({cls:"popupTitle",text:i.titleObj.str,attr:{dir:i.titleObj.dir}});var n=pdfjsLib.PDFDateString.toDateObject(i.modificationDate);n&&e.createSpan({cls:"popupDate",text:"".concat(n.toLocaleDateString(),", ").concat(n.toLocaleTimeString())}),l&&e.createDiv("clickable-icon",(function(e){mx(e,"lucide-copy"),Rx(e,Qf.interface.menu.copy()),e.addEventListener("click",(function(){return g(t,void 0,void 0,(function(){var t,n,r;return y(this,(function(o){switch(o.label){case 0:return t=[],[4,this.getAnnotatedText(l,c)];case 1:return(n=o.sent())&&t.push("> ".concat(n)),t.push("".concat(this.getMarkdownLink("#page=".concat(a,"&annotation=").concat(c)))),(null===(r=i.contentsObj)||void 0===r?void 0:r.str)&&t.push("".concat(i.contentsObj.str)),[4,navigator.clipboard.writeText(t.join("\n\n"))];case 2:return o.sent(),mx(e,"lucide-check"),[2]}}))}))}))}))})),Zl.isPhone){var m=new ZA(this.app).setBackgroundOpacity("0.4");return m.containerEl.addClass("pdf-annotation-modal"),m.contentEl.append(f),void activeWindow.setTimeout((function(){m.open()}),20)}var v=r.viewport.rawDims,b=v.pageWidth,w=v.pageHeight,k=v.pageX,C=v.pageY,M=pdfjsLib.Util.normalizeRect([u[0],s[3]-u[1]+s[1],u[2],s[3]-u[3]+s[1]]),E=createDiv({cls:"popupWrapper",attr:{"data-annotation-id":i.id}});if(E.append(f),E.setCssStyles({left:"".concat(100*((M[0]+M[2])/2-k)/b,"%"),top:"".concat(100*(M[3]-C)/w,"%")}),i.color){var S=i.color,x=S[0],T=S[1],D=S[2];E.style.setProperty("--annotation-color","".concat(x,", ").concat(T,", ").concat(D))}n.append(E),wl(E,new ml({duration:200,fn:"cubic-bezier(0.34, 1.56, 0.64, 1)"}).addProp("transform","translate(-50%, -1px) scale(0.97)","translate(-50%, 0) scale(1)",""));var A=this.pdfViewer.dom.viewerContainerEl.getBoundingClientRect(),L=E.getBoundingClientRect();L.top>A.top&&L.bottom<A.bottom||E.scrollIntoView({behavior:"smooth",block:"end"}),this.activeAnnotationPopupEl=E},e.prototype.destroyAnnotationPopup=function(){if(this.activeAnnotationPopupEl){var e=this.activeAnnotationPopupEl;this.activeAnnotationPopupEl=null,wl(e,new ml({duration:200,fn:"cubic-bezier(0.34, 1.56, 0.64, 1)"}).addProp("transform","translate(-50%, 0) scale(1)","translate(-50%, -1px) scale(0.9)").addProp("opacity","1","0"),(function(){e.detach()}))}},e.prototype.clearEphemeralUI=function(){this.destroyAnnotationPopup(),this.clearAnnotationHighlight(),this.clearTextHighlight(),this.subpathHighlight=null},e.prototype.getAnnotationFromEvt=function(e,t){var n,i=t.targetNode,r=e.annotationLayer;if(!(null==r?void 0:r.div.contains(i)))return null;if(!i.instanceOf(HTMLElement)&&!i.instanceOf(SVGElement))return null;var o=i.dataset.annotationId;return o||(o=null===(n=i.closest("section"))||void 0===n?void 0:n.dataset.annotationId)?r.annotationLayer.getAnnotation(o):null},e.prototype.onAnnotationPointerDown=function(e){var t,n=this;if(0===e.button&&!Yl(e)&&!(null===(t=this.activeAnnotationPopupEl)||void 0===t?void 0:t.contains(e.targetNode))){var i=e.target.closest(".page");if(!i||!i.dataset.pageNumber)return this.clearEphemeralUI();var r=i.dataset.pageNumber,o=this.getPage(parseInt(r)),a=e.view,s=e.clientX,l=e.clientY,c=e.pointerId,u=!1,h=function(e){e.pointerId===c&&(Math.hypot(s-e.clientX,l-e.clientY)>5&&(u=!0))},d=function(t){var i;if(t.pointerId===c){p();var r=null===(i=n.activeAnnotationPopupEl)||void 0===i?void 0:i.dataset.annotationId;if(n.clearEphemeralUI(),!u){var a=n.getAnnotationFromEvt(o,e);a&&"Widget"!==a.data.subtype&&"Link"!==a.data.subtype&&a.data.id!==r&&n.renderAnnotationPopup(a)}}},p=function(){a.removeEventListener("pointermove",h),a.removeEventListener("pointerup",d),a.removeEventListener("pointercancel",d)};a.addEventListener("pointermove",h),a.addEventListener("pointerup",d),a.removeEventListener("pointercancel",d)}},e.prototype.onTextSelectionPointerDown=function(e){var t,n=this;if("mouse"===e.pointerType&&0===e.button&&!Yl(e)&&!(null===(t=this.activeAnnotationPopupEl)||void 0===t?void 0:t.contains(e.targetNode))){var i=e.view,r=this.pdfViewer.pdfViewer,o=e.pointerId,a=null,s=0,l=Bl(e),c=DH(r,e);if(c){this.clearTextHighlight(),e.preventDefault(),i.getSelection().removeAllRanges();var u=function(e){if(e.pointerId===o){l=Bl(e),e.preventDefault(),e.stopPropagation();var t=DH(r,e);t&&i.getSelection().setBaseAndExtent(c.el,c.offset,t.el,t.offset)}},h=function(e){e.pointerId===o&&(i.removeEventListener("pointermove",u),i.removeEventListener("pointerup",h),i.removeEventListener("pointercancel",h),i.cancelAnimationFrame(a))},d=function(e){a=i.requestAnimationFrame(d);var t=e-s;0===s&&(t=50),s=e,i.getSelection().isCollapsed||fk(n.pdfViewer.dom.viewerContainerEl,l,t)};i.addEventListener("pointermove",u),i.addEventListener("pointerup",h),i.addEventListener("pointercancel",h),a=i.requestAnimationFrame(d)}}},e.prototype.getPageLinkAlias=function(e){return"".concat(this.file.basename,", ").concat(xH.labelPage({page:e}))},e.prototype.getTextSelectionRangeStr=function(e){var t=e.win.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;if(n&&!n.collapsed){var i=LH(e,n.startContainer),r=LH(e,n.endContainer);if(i&&r){var o=i.dataset.idx,a=r.dataset.idx,s=AH(i,n.startContainer,n.startOffset),l=AH(r,n.endContainer,n.endOffset);if(null!==s&&null!==l)return"".concat(o,",").concat(s,",").concat(a,",").concat(l)}}return null},e.prototype.onContextMenu=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w;return y(this,(function(y){switch(y.label){case 0:return Zl.isDesktopApp?(t=e.target,(n=t.closest(".page"))&&n.instanceOf(HTMLElement)?(i=parseInt(n.dataset.pageNumber),Number.isNaN(i)?[2]:(r=!0,a=!1,(s=Zl.isDesktopApp&&e.win.electron)&&e.isTrusted?[4,Nf(e)]:[3,2])):[2]):[2];case 1:return!(l=y.sent())||e.defaultPrevented?[2]:(o=s.remote.webContents.fromId(l.webContentsId),r=(l.editFlags||{}).canCopy,[3,3]);case 2:a=!0,y.label=3;case 3:return c=this.getPage(i),u=e.view.getSelection(),h=u.toString(),d=(new PA).addSections(["action","selection","annotation"]),h&&(h=pdfjsViewer.removeNullCharacters(pdfjsLib.normalizeUnicode(h.replace(/[\n\r]+/g," ")))),Zl.isMacOS&&s&&h&&d.addItem((function(e){return e.setSection("action").setTitle(Qf.interface.menu.lookupSelection({selection:pc(h,25)})).setIcon("lucide-library").onClick((function(){s.remote.getCurrentWebContents().showDefinitionForSelection()}))})),p=this.getAnnotationFromEvt(c,e),f=null,m=null,p&&"Widget"!==p.data.subtype?(f=p.data.id,[4,this.getAnnotatedText(c,f)]):[3,5];case 4:m=y.sent(),y.label=5;case 5:return h&&d.addItem((function(e){return e.setSection("selection").setTitle(Qf.interface.menu.copy()).setIcon("lucide-copy").setDisabled(!r).onClick((function(){s&&o?o.copy():navigator.clipboard.writeText(h)}))})),(v=this.getTextSelectionRangeStr(n))&&(g=this.getMarkdownLink("#page=".concat(i,"&selection=").concat(v),this.getPageLinkAlias(i)),d.addItem((function(e){return e.setSection("selection").setTitle(xH.actionCopyQuote()).setIcon("lucide-copy").onClick((function(){navigator.clipboard.writeText("> ".concat(h.replace(/[\r\n]+/g," "),"\n\n").concat(g))}))})),d.addItem((function(e){return e.setSection("selection").setTitle(xH.actionCopySelectionLink()).setIcon("lucide-copy").onClick((function(){navigator.clipboard.writeText(g)}))}))),f&&(b=this.getMarkdownLink("#page=".concat(i,"&annotation=").concat(f),this.getPageLinkAlias(i)),m&&d.addItem((function(e){return e.setSection("annotation").setTitle(xH.actionCopyAnnotation()).setIcon("lucide-copy").onClick((function(){navigator.clipboard.writeText("> ".concat(m,"\n\n").concat(b))}))})),d.addItem((function(e){return e.setSection("annotation").setTitle(xH.actionCopyAnnotLink()).setIcon("lucide-copy").onClick((function(){navigator.clipboard.writeText(b)}))}))),this.clearEphemeralUI(),d.showAtMouseEvent(e),((null===(w=this.opts)||void 0===w?void 0:w.isEmbed)||a)&&e.preventDefault(),[2]}}))}))},e.prototype.onMobileCopy=function(e,t){var n=t.div,i=t.id,r=e.clipboardData.getData("text/plain");if(r){var o=this.getTextSelectionRangeStr(n);if(o){var a=this.getMarkdownLink("#page=".concat(i,"&selection=").concat(o),this.getPageLinkAlias(i));e.clipboardData.setData("text/plain","> ".concat(r,"\n\n").concat(a))}}},e.prototype.onThumbnailContextMenu=function(e){var t=e.targetNode;if(t.instanceOf(HTMLElement)&&t.hasClass("thumbnail")){var n=parseInt(t.dataset.pageNumber);if(Number.isNaN(n))return;var i=this.getMarkdownLink("#page=".concat(n),this.getPageLinkAlias(n));(new PA).addItem((function(t){return t.setTitle(xH.actionCopyPageLink({page:n})).setIcon("lucide-copy").onClick((function(){e.view.navigator.clipboard.writeText(i)}))})).showAtMouseEvent(e)}},e.prototype.getAnnotatedText=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C,M;return y(this,(function(y){switch(y.label){case 0:return n=e.annotationLayer.annotationLayer.getAnnotation(t),(null==(i=null===(M=n.data)||void 0===M?void 0:M.quadPoints)?void 0:i.length)?(r=e.textLayer).renderingDone?[3,2]:[4,r.textLayer.renderingTask.promise]:[2,null];case 1:y.sent(),y.label=2;case 2:for(o="",a=0,s=i.length;a<s;a+=8)l=i.slice(a,a+8),c=l[0],u=l[1],h=l[2],d=l[3],p=l[4],f=l[5],m=l[6],v=l[7],g=Math.min(c,h,p,m),b=Math.max(c,h,p,m),w=Math.min(u,d,f,v),k=Math.max(u,d,f,v),(C=this.getTextByRect(e,[g,w,b,k]))&&""!==o&&(o+=" "),o+=C;return[2,o.trim()||null]}}))}))},e.prototype.getTextByRect=function(e,t){for(var n,i=t[0],r=t[1],o=t[2],a=t[3],s="",l=0,c=e.textLayer.textLayer.textContentItems;l<c.length;l++){var u=c[l];if(null===(n=u.chars)||void 0===n?void 0:n.length)for(var h=0,d=u.chars;h<d.length;h++){var p=d[h],f=(p.r[0]+p.r[2])/2,m=(p.r[1]+p.r[3])/2;f>=i&&f<=o&&m>=r&&m<=a&&(s+=p.u)}}return s},e.prototype.clearAnnotationHighlight=function(){this.annotationHighlight&&(this.annotationHighlight.detach(),this.annotationHighlight=null)},e.prototype.highlightAnnotation=function(e,t){var n=this;if(this.clearAnnotationHighlight(),!(e<1||e>this.pdfViewer.pagesCount)){var i=this.getPage(e);if(null==i?void 0:i.div.dataset.loaded){var r=i.annotationLayer.annotationLayer.getAnnotation(t);if(r)i.annotationLayer.div.createDiv("boundingRect mod-focused",(function(e){var t=r.data.rect,i=r.parent.page.view,o=r.parent.viewport.rawDims,a=o.pageWidth,s=o.pageHeight,l=o.pageX,c=o.pageY,u=pdfjsLib.Util.normalizeRect([t[0],i[3]-t[1]+i[1],t[2],i[3]-t[3]+i[1]]);e.setCssStyles({left:"".concat(100*(u[0]-l)/a,"%"),top:"".concat(100*(u[1]-c)/s,"%"),width:"".concat(100*(u[2]-u[0])/a,"%"),height:"".concat(100*(u[3]-u[1])/s,"%")}),n.annotationHighlight=e,activeWindow.setTimeout((function(){pdfjsViewer.scrollIntoView(e,{top:-50})}))}))}}},e.prototype.clearTextHighlight=function(){if(this.highlightedText.length){for(var e=0,t=this.highlightedText;e<t.length;e++){var n=t[e],i=n[0],r=n[1],o=this.getPage(i).textLayer.textLayer,a=o.textDivs,s=o.textContentItems,l=a[r];l.textContent=s[r].str,l.className=l.hasClass("textLayerNode")?"textLayerNode":""}this.highlightedText=[]}},e.prototype.highlightText=function(e,t){if(this.clearTextHighlight(),!(e<1||e>this.pdfViewer.pagesCount)){var n=this.getPage(e);if(null==n?void 0:n.div.dataset.loaded){var i=n.textLayer.textLayer,r=i.textDivs,o=i.textContentItems,a=[],s=function(t,n,i){return a.push([e,t]),1===a.length&&pdfjsViewer.scrollIntoView(r[t],{top:-50},!0),r[t].textContent="",l(t,0,n,i)},l=function(t,n,i,s){a.push([e,t]);var l=r[t];if(l.nodeType===Node.TEXT_NODE){var c=createSpan();l.before(c),c.append(l),r[t]=c,l=c}var u=o[t].str.substring(n,i),h=document.createTextNode(u);s?(c=l.createSpan("".concat(s," appended"))).append(h):l.append(h)},c=t[0],u=c[0],h=c[1],d=t[1],p=d[0],f=d[1],m="selected";if(s(u,h),u===p)l(u,h,f,"mod-focused "+m);else{l(u,h,void 0,"mod-focused begin "+m);for(var v=u+1,g=p;v<g;v++)a.push([e,v]),r[v].classList.add("mod-focused","middle",m);s(p,f,"mod-focused end"+m)}l(p,f,void 0),this.highlightedText=a}}},e.prototype.loadFile=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return n=this.pdfViewer,this.unloaded||!n?[2]:(n.subpath=null,this.file=null,i=function(){return g(r,void 0,void 0,(function(){var i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:(i=null===(l=this.opts)||void 0===l?void 0:l.displayMode)&&(n.pdfViewer._scrollMode=3,n.pdfViewer._spreadMode=0),c.label=1;case 1:return c.trys.push([1,5,,6]),r=this.containerEl,t&&this.applySubpath(t),[4,n.open({url:this.app.vault.getResourcePath(e),ownerDocument:r.doc})];case 2:return c.sent(),this.file=e,i?[4,(o=n.pdfViewer)._pagesCapability.promise]:[3,4];case 3:c.sent(),(a=o.getPageView(o._currentPageNumber-1)).canvas.setCssStyles({maxWidth:"".concat(a.width,"px"),zoom:""}),r.createDiv("canvasWrapper").append(a.canvas),"auto"!==n.height&&"page"!==n.height||r.setCssStyles({height:"auto"}),c.label=4;case 4:return[3,6];case 5:return s=c.sent(),console.error(s),[3,6];case 6:return[2]}}))}))},this.containerEl.offsetParent?[4,new Promise((function(e){n.eventBus.on("passwordpromptopen",e,{once:!0}),i().finally(e)}))]:(this.containerEl.onNodeInserted(i,!0),[2]));case 1:return o.sent(),[2]}}))}))},e.prototype.applySubpath=function(e){if(e){var t=this.pdfViewer,n=t.pdfLoadingTask,i=function(e){var t;"#"===e[0]&&(e=e.substring(1));var n=new URLSearchParams(e);if(!n.has("page"))return{dest:e,highlight:null};var i=null!==(t=PH(n.get("page")))&&void 0!==t?t:1,r=n.has("offset")?n.get("offset").split(","):[],o=PH(r[0]),a=PH(r[1]),s=PH(r[2]),l=null===s?[i-1,{name:"FitBH"},a]:[i-1,{name:"XYZ"},o,a,s],c=null;if(n.has("annotation"))c={type:"annotation",page:i,id:n.get("annotation")};else if(n.has("selection")){var u=n.get("selection").split(","),h=PH(u[0]),d=PH(u[1]),p=PH(u[2]),f=PH(u[3]);null!==h&&null!==d&&null!==p&&null!==f&&(c={type:"text",page:i,range:[[h,d],[p,f]]})}var m=n.has("height")?PH(n.get("height")):null;return{dest:JSON.stringify(l),highlight:c,height:m}}(e),r=i.dest,o=i.highlight;n?n.promise.then((function(){t.applySubpath(r)})):t.subpath=r,this.subpathHighlight=o||null}},e.prototype.onResize=function(){this.containerEl.isShown()&&this.pdfViewer&&this.pdfViewer.eventBus.dispatch("resize",{source:this})},e.prototype.on=function(e,t){this.pdfViewer.eventBus._on(e,t)},e.prototype.off=function(e,t){this.pdfViewer.eventBus._off(e,t)},e.prototype.onCSSChange=function(){var e=this.pdfViewer,t=this.app,n=e.dom.pdfContainerEl,i=t.loadLocalStorage(TH),r=i?n.getCssPropertyValue("--pdf-page-background"):null,o=!!i&&document.body.hasClass("theme-dark");r!==e.pageBackground&&(n.toggleClass("mod-themed",!!r),e.setBackground(r,o))},e.prototype.getMarkdownLink=function(e,t,n){var i=this.app.fileManager.generateMarkdownLink(this.file,"",e,t);return n?i:i.substring(1)},e}(),OH=function(e){function t(t,n,i){var r=e.call(this)||this;return r.child=null,r.next=[],r.app=t,r.containerEl=n,r.opts=i,r.scope=new Tk(t.scope),r}return f(t,e),t.prototype.onload=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return this.registerEvent(this.app.workspace.on("css-change",(function(){r.then((function(e){return e.onCSSChange()}))}))),this.child?[2]:[4,(e=this.child=new FH(this.app,this.scope,this.containerEl,this.opts)).load()];case 1:if(o.sent(),this.child===e)for(t=this.next,this.next=null,n=0,i=t;n<i.length;n++)(0,i[n])(e);return[2]}}))}))},t.prototype.onunload=function(){this.child&&(this.child.unload(),this.child=null,this.next=[])},t.prototype.then=function(e){this.next?this.next.push(e):this.child&&e(this.child)},t.prototype.loadFile=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){return[2,new Promise((function(i){n._loaded||i(),n.then((function(n){n.loadFile(e,t).then(i)}))}))]}))}))},t}(xA),BH=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-file-text";var i=n.viewer=n.addChild(new OH(n.app,n.contentEl,{removePageBorders:Zl.isMobile})),r=n.scope=n.viewer.scope,o=function(e){return function(t){var n,r;if(!dk(t.targetNode)){var o=null===(r=null===(n=i.child)||void 0===n?void 0:n.pdfViewer)||void 0===r?void 0:r.pdfViewer;if(o){var a=o.currentScaleValue;["page-width","page-height"].includes(a)&&(t.preventDefault(),e(o))}}}};return r.register([],"ArrowLeft",o((function(e){return e.previousPage()}))),r.register([],"ArrowRight",o((function(e){return e.nextPage()}))),n}return f(t,e),t.prototype.onload=function(){e.prototype.onload.call(this);var t=this.app.vault;this.registerEvent(t.on("modify",this.onModify,this))},t.prototype.getViewType=function(){return"pdf"},t.prototype.onModify=function(e){e===this.file&&this.onLoadFile(e)},t.prototype.onLoadFile=function(e){return this.viewer.loadFile(e)},t.prototype.setEphemeralState=function(t){e.prototype.setEphemeralState.call(this,t),this.viewer.then((function(e){return e.applySubpath(t.subpath)}))},t.prototype.onUnloadFile=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(e){return this.viewer.then((function(e){return e.pdfViewer.close()})),[2]}))}))},t.prototype.showSearch=function(){this.viewer.then((function(e){return e.findBar.showSearch()}))},t.VIEW_TYPE="pdf",t}(oH),NH=function(e){function t(t,n,i){var r=e.call(this)||this;r.app=t.app,r.containerEl=t.containerEl,r.file=n,r.subpath=i;var o="page";if(i){var a=new URLSearchParams(i.substring(1));if(a.has("height")){var s=PH(a.get("height"));s&&s>0&&(o=s)}}return r.containerEl.addClass("pdf-embed"),r.viewer=r.addChild(new OH(r.app,r.containerEl,{removePageBorders:!0,isEmbed:!0,height:o,initDelay:300,displayMode:t.displayMode})),r.viewer.then((function(e){var n=e.toolbar.toolbarRightEl;n.createDiv("pdf-toolbar-spacer"),n.createDiv("clickable-icon",(function(e){mx(e,"lucide-more-vertical"),Rx(e,Qf.setting.about.buttonOpen()),e.addEventListener("click",(function(){var n=(new PA).setParentElement(e);if(t.app.workspace.handleLinkContextMenu(n,t.linktext,t.sourcePath)){var i=e.getBoundingClientRect();n.showAtPosition({x:i.x,y:i.bottom,width:i.width,overlap:!0,left:!0})}}))})),rk(e.pdfViewer.dom.viewerContainerEl)})),r}return f(t,e),t.prototype.onload=function(){var t=this;e.prototype.onload.call(this);var n=this.app;this.registerEvent(n.vault.on("modify",(function(e){e===t.file&&t.loadFile()})))},t.prototype.loadFile=function(){return this.viewer.loadFile(this.file,this.subpath)},t}(xA),RH="video",HH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.getViewType=function(){return RH},t.prototype.canAcceptExtension=function(e){return WT.contains(e)},t.prototype.onLoadFile=function(e){return g(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=(n=this).app,Vc(r=n.contentEl),r.empty(),o=r.createDiv("video-container"),[4,t.displayInEl(e,i,o)];case 1:return a.sent(),[2]}}))}))},t.displayInEl=function(e,t,n){return g(this,void 0,Promise,(function(){var i;return y(this,(function(r){return i=t.vault.getResourcePath(e),[2,Ec(n,i)]}))}))},t.VIEW_TYPE=RH,t}(oH),VH=/[^a-zA-Z0-9]/,zH=/\s/,qH=/[\r\n]/,UH=/\n\r?\n$/,_H=/^\r?\n\r?\n/;function WH(e,t){return e<t?e:t}function jH(e,t){return e>t?e:t}!function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"}(IH||(IH={}));var GH=/\W/;function KH(e,t){for(var n=e.length,i=t;i<n;i+=1)if(GH.test(e[i]))return i;return-1}var YH=function(){function e(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return e.prototype.diff_main=function(e,t,n,i){void 0===i&&(i=this.diffTimeout<=0?Number.MAX_VALUE:Date.now()+1e3*this.diffTimeout);var r=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e===t)return e?[[IH.DIFF_EQUAL,e]]:[];void 0===n&&(n=!0);var o=n,a=this.diff_commonPrefix(e,t),s=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var l=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var c=this.diff_compute_(e,t,o,r);return s&&c.unshift([IH.DIFF_EQUAL,s]),l&&c.push([IH.DIFF_EQUAL,l]),this.diff_cleanupMerge(c),c},e.prototype.diff_lineMode=function(e,t){var n=this.diff_linesToChars_(e,t),i=n.chars1,r=n.chars2,o=n.lineArray,a=this.diff_main(i,r,!1);return this.diff_charsToLines_(a,o),a},e.prototype.diff_wordMode=function(e,t){var n=this.diff_wordsToChars_(e,t),i=n.chars1,r=n.chars2,o=n.lineArray,a=this.diff_main(i,r,!1);return this.diff_charsToLines_(a,o),a},e.prototype.diff_wordsToChars_=function(e,t){var n=[],i={};n[0]="";var r=function(e){var t="",r=n.length;return function(e,t){for(var n=0,i=-1;i<e.length-1;){if(-1===(i=KH(e,n))){t(e.substring(n,e.length)),i=e.length;break}n!==i&&t(e.substring(n,i)),t(e[i]),n=i+1}}(e,(function(e){(i.hasOwnProperty?i.hasOwnProperty(e):void 0!==i[e])?t+=String.fromCharCode(i[e]):(t+=String.fromCharCode(r),i[e]=r,n[r++]=e)})),t};return{chars1:r(e),chars2:r(t),lineArray:n}},e.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var n=0,i=WH(e.length,t.length),r=i,o=0;n<r;)e.substring(o,r)===t.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},e.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;for(var n=0,i=WH(e.length,t.length),r=i,o=0;n<r;)e.substring(e.length-r,e.length-o)===t.substring(t.length-r,t.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},e.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],i=0,r=null,o=0,a=0,s=0,l=0,c=0;o<e.length;)e[o][0]===IH.DIFF_EQUAL?(n[i++]=o,a=l,s=c,l=0,c=0,r=e[o][1]):(e[o][0]===IH.DIFF_INSERT?l+=e[o][1].length:c+=e[o][1].length,r&&r.length<=jH(a,s)&&r.length<=jH(l,c)&&(e.splice(n[i-1],0,[IH.DIFF_DELETE,r]),e[n[i-1]+1][0]=IH.DIFF_INSERT,i--,o=--i>0?n[i-1]:-1,a=0,s=0,l=0,c=0,r=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(e[o-1][0]===IH.DIFF_DELETE&&e[o][0]===IH.DIFF_INSERT){var u=e[o-1][1],h=e[o][1],d=this.diff_commonOverlap_(u,h),p=this.diff_commonOverlap_(h,u);d>=p?(d>=u.length/2||d>=h.length/2)&&(e.splice(o,0,[IH.DIFF_EQUAL,h.substring(0,d)]),e[o-1][1]=u.substring(0,u.length-d),e[o+1][1]=h.substring(d),o++):(p>=u.length/2||p>=h.length/2)&&(e.splice(o,0,[IH.DIFF_EQUAL,u.substring(0,p)]),e[o-1][0]=IH.DIFF_INSERT,e[o-1][1]=h.substring(0,h.length-p),e[o+1][0]=IH.DIFF_DELETE,e[o+1][1]=u.substring(p),o++),o++}o++}},e.prototype.diff_cleanupSemanticLossless=function(e){for(var t=1;t<e.length-1;){if(e[t-1][0]===IH.DIFF_EQUAL&&e[t+1][0]===IH.DIFF_EQUAL){var n=e[t-1][1],i=e[t][1],r=e[t+1][1],o=this.diff_commonSuffix(n,i);if(o){var a=i.substring(i.length-o);n=n.substring(0,n.length-o),i=a+i.substring(0,i.length-o),r=a+r}for(var s=n,l=i,c=r,u=this.diff_cleanupSemanticScore_(n,i)+this.diff_cleanupSemanticScore_(i,r);i.charAt(0)===r.charAt(0);){n+=i.charAt(0),i=i.substring(1)+r.charAt(0),r=r.substring(1);var h=this.diff_cleanupSemanticScore_(n,i)+this.diff_cleanupSemanticScore_(i,r);h>=u&&(u=h,s=n,l=i,c=r)}e[t-1][1]!==s&&(s?e[t-1][1]=s:(e.splice(t-1,1),t--),e[t][1]=l,c?e[t+1][1]=c:(e.splice(t+1,1),t--))}t++}},e.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],i=0,r=null,o=0,a=!1,s=!1,l=!1,c=!1;o<e.length;)e[o][0]===IH.DIFF_EQUAL?(e[o][1].length<this.diffEditCost&&(l||c)?(n[i++]=o,a=l,s=c,r=e[o][1]):(i=0,r=null),l=c=!1):(e[o][0]===IH.DIFF_DELETE?c=!0:l=!0,r&&(a&&s&&l&&c||r.length<this.diffEditCost/2&&Number(a)+Number(s)+Number(l)+Number(c)===3)&&(e.splice(n[i-1],0,[IH.DIFF_DELETE,r]),e[n[i-1]+1][0]=IH.DIFF_INSERT,i--,r=null,a&&s?(l=c=!0,i=0):(o=--i>0?n[i-1]:-1,l=c=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},e.prototype.diff_cleanupMerge=function(e){e.push([IH.DIFF_EQUAL,""]);for(var t,n=0,i=0,r=0,o="",a="";n<e.length;)switch(e[n][0]){case IH.DIFF_INSERT:r++,a+=e[n][1],n++;break;case IH.DIFF_DELETE:i++,o+=e[n][1],n++;break;case IH.DIFF_EQUAL:i+r>1?(0!==i&&0!==r&&(0!==(t=this.diff_commonPrefix(a,o))&&(n-i-r>0&&e[n-i-r-1][0]===IH.DIFF_EQUAL?e[n-i-r-1][1]+=a.substring(0,t):(e.splice(0,0,[IH.DIFF_EQUAL,a.substring(0,t)]),n++),a=a.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(a,o))&&(e[n][1]=a.substring(a.length-t)+e[n][1],a=a.substring(0,a.length-t),o=o.substring(0,o.length-t))),n-=i+r,e.splice(n,i+r),o.length&&(e.splice(n,0,[IH.DIFF_DELETE,o]),n++),a.length&&(e.splice(n,0,[IH.DIFF_INSERT,a]),n++),n++):0!==n&&e[n-1][0]===IH.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,r=0,i=0,o="",a=""}""===e[e.length-1][1]&&e.pop();var s=!1;for(n=1;n<e.length-1;)e[n-1][0]===IH.DIFF_EQUAL&&e[n+1][0]===IH.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),s=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(e)},e.prototype.diff_xIndex=function(e,t){var n,i=0,r=0,o=0,a=0;for(n=0;n<e.length&&(e[n][0]!==IH.DIFF_INSERT&&(i+=e[n][1].length),e[n][0]!==IH.DIFF_DELETE&&(r+=e[n][1].length),!(i>t));n++)o=i,a=r;return e.length!==n&&e[n][0]===IH.DIFF_DELETE?a:a+(t-o)},e.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,a=0;a<e.length;a++){var s=e[a][0],l=e[a][1].replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(s){case IH.DIFF_INSERT:t[a]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case IH.DIFF_DELETE:t[a]='<del style="background:#ffe6e6;">'+l+"</del>";break;case IH.DIFF_EQUAL:t[a]="<span>"+l+"</span>"}}return t.join("")},e.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==IH.DIFF_INSERT&&(t[n]=e[n][1]);return t.join("")},e.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==IH.DIFF_DELETE&&(t[n]=e[n][1]);return t.join("")},e.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var o=e[r][0],a=e[r][1];switch(o){case IH.DIFF_INSERT:n+=a.length;break;case IH.DIFF_DELETE:i+=a.length;break;case IH.DIFF_EQUAL:t+=jH(n,i),n=0,i=0}}return t+=jH(n,i)},e.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case IH.DIFF_INSERT:t[n]="+"+encodeURI(e[n][1]);break;case IH.DIFF_DELETE:t[n]="-"+e[n][1].length;break;case IH.DIFF_EQUAL:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(e,t){for(var n=[],i=0,r=0,o=t.split(/\t/g),a=0;a<o.length;a++){var s=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[i++]=[IH.DIFF_INSERT,decodeURI(s)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var l=parseInt(s,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+s);var c=e.substring(r,r+=l);"="===o[a].charAt(0)?n[i++]=[IH.DIFF_EQUAL,c]:n[i++]=[IH.DIFF_DELETE,c];break;default:if(o[a])throw new Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(r!==e.length)throw new Error("Delta length ("+r+") does not equal source text length ("+e.length+")");return n},e.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=jH(0,WH(n,e.length)),e===t?0:e.length?e.substring(n,n+t.length)===t?n:this.match_bitap_(e,t,n):-1},e.prototype.patch_make=function(e,t,n){var i,r;if("string"==typeof e&&"string"==typeof t&&void 0===n)i=e,(r=this.diff_main(i,t,!0)).length>2&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(e&&"object"==typeof e&&void 0===t&&void 0===n)r=e,i=this.diff_text1(r);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===n)i=e,r=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make");i=e,r=n}if(0===r.length)return[];for(var o=[],a=new ZH,s=0,l=0,c=0,u=i,h=i,d=0;d<r.length;d++){var p=r[d][0],f=r[d][1];switch(s||p===IH.DIFF_EQUAL||(a.start1=l,a.start2=c),p){case IH.DIFF_INSERT:a.diffs[s++]=r[d],a.length2+=f.length,h=h.substring(0,c)+f+h.substring(c);break;case IH.DIFF_DELETE:a.length1+=f.length,a.diffs[s++]=r[d],h=h.substring(0,c)+h.substring(c+f.length);break;case IH.DIFF_EQUAL:f.length<=2*this.patchMargin&&s&&r.length!==d+1?(a.diffs[s++]=r[d],a.length1+=f.length,a.length2+=f.length):f.length>=2*this.patchMargin&&s&&(this.patch_addContext_(a,u),o.push(a),a=new ZH,s=0,u=h,l=c)}p!==IH.DIFF_INSERT&&(l+=f.length),p!==IH.DIFF_DELETE&&(c+=f.length)}return s&&(this.patch_addContext_(a,u),o.push(a)),o},e.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e[n],r=new ZH,o=0;o<i.diffs.length;o++)r.diffs[o]=[i.diffs[o][0],i.diffs[o][1]];r.start1=i.start1,r.start2=i.start2,r.length1=i.length1,r.length2=i.length2,t[n]=r}return t},e.prototype.patch_apply=function(e,t){if(0===e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,r=[],o=0;o<e.length;o++){var a=e[o].start2+i,s=this.diff_text1(e[o].diffs),l=void 0,c=-1;if(s.length>this.matchMaxBits?-1!==(l=this.match_main(t,s.substring(0,this.matchMaxBits),a))&&(-1===(c=this.match_main(t,s.substring(s.length-this.matchMaxBits),a+s.length-this.matchMaxBits))||l>=c)&&(l=-1):l=this.match_main(t,s,a),-1===l)r[o]=!1,i-=e[o].length2-e[o].length1;else{r[o]=!0,i=l-a;var u=void 0;if(s===(u=-1===c?t.substring(l,l+s.length):t.substring(l,c+this.matchMaxBits)))t=t.substring(0,l)+this.diff_text2(e[o].diffs)+t.substring(l+s.length);else{var h=this.diff_main(s,u,!1);if(s.length>this.matchMaxBits&&this.diff_levenshtein(h)/s.length>this.patchDeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(h);for(var d=0,p=0,f=0;f<e[o].diffs.length;f++){var m=e[o].diffs[f];m[0]!==IH.DIFF_EQUAL&&(p=this.diff_xIndex(h,d)),m[0]===IH.DIFF_INSERT?t=t.substring(0,l+p)+m[1]+t.substring(l+p):m[0]===IH.DIFF_DELETE&&(t=t.substring(0,l+p)+t.substring(l+this.diff_xIndex(h,d+m[1].length))),m[0]!==IH.DIFF_DELETE&&(d+=m[1].length)}}}}}return[t=t.substring(n.length,t.length-n.length),r]},e.prototype.patch_addPadding=function(e){for(var t=this.patchMargin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var r=e[0],o=r.diffs;if(0===o.length||o[0][0]!==IH.DIFF_EQUAL)o.unshift([IH.DIFF_EQUAL,n]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>o[0][1].length){var a=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],r.start1-=a,r.start2-=a,r.length1+=a,r.length2+=a}if(0===(o=(r=e[e.length-1]).diffs).length||o[o.length-1][0]!==IH.DIFF_EQUAL)o.push([IH.DIFF_EQUAL,n]),r.length1+=t,r.length2+=t;else if(t>o[o.length-1][1].length){a=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,a),r.length1+=a,r.length2+=a}return n},e.prototype.patch_splitMax=function(e){for(var t=this.matchMaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var i=e[n];e.splice(n--,1);for(var r=i.start1,o=i.start2,a="";0!==i.diffs.length;){var s=new ZH,l=!0;for(s.start1=r-a.length,s.start2=o-a.length,""!==a&&(s.length1=s.length2=a.length,s.diffs.push([IH.DIFF_EQUAL,a]));0!==i.diffs.length&&s.length1<t-this.patchMargin;){var c=i.diffs[0][0],u=i.diffs[0][1];c===IH.DIFF_INSERT?(s.length2+=u.length,o+=u.length,s.diffs.push(i.diffs.shift()),l=!1):c===IH.DIFF_DELETE&&1===s.diffs.length&&s.diffs[0][0]===IH.DIFF_EQUAL&&u.length>2*t?(s.length1+=u.length,r+=u.length,l=!1,s.diffs.push([c,u]),i.diffs.shift()):(u=u.substring(0,t-s.length1-this.patchMargin),s.length1+=u.length,r+=u.length,c===IH.DIFF_EQUAL?(s.length2+=u.length,o+=u.length):l=!1,s.diffs.push([c,u]),u===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(u.length))}a=(a=this.diff_text2(s.diffs)).substring(a.length-this.patchMargin);var h=this.diff_text1(i.diffs).substring(0,this.patchMargin);""!==h&&(s.length1+=h.length,s.length2+=h.length,0!==s.diffs.length&&s.diffs[s.diffs.length-1][0]===IH.DIFF_EQUAL?s.diffs[s.diffs.length-1][1]+=h:s.diffs.push([IH.DIFF_EQUAL,h])),l||e.splice(++n,0,s)}}},e.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},e.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split("\n"),i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var o=n[i].match(r);if(!o)throw new Error("Invalid patch string: "+n[i]);var a=new ZH;t.push(a),a.start1=parseInt(o[1],10),""===o[2]?(a.start1--,a.length1=1):"0"===o[2]?a.length1=0:(a.start1--,a.length1=parseInt(o[2],10)),a.start2=parseInt(o[3],10),""===o[4]?(a.start2--,a.length2=1):"0"===o[4]?a.length2=0:(a.start2--,a.length2=parseInt(o[4],10)),i++;for(var s=void 0,l=void 0,c=void 0;i<n.length;){s=n[i].charAt(0),c=n[i].substring(1);try{l=decodeURI(c)}catch(e){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"===s)a.diffs.push([IH.DIFF_DELETE,l]);else if("+"===s)a.diffs.push([IH.DIFF_INSERT,l]);else if(" "===s)a.diffs.push([IH.DIFF_EQUAL,l]);else{if("@"===s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+l)}i++}}return t},e.prototype.diff_compute_=function(e,t,n,i){var r;if(!e)return[[IH.DIFF_INSERT,t]];if(!t)return[[IH.DIFF_DELETE,e]];var o=e.length>t.length?e:t,a=e.length>t.length?t:e,s=o.indexOf(a);if(-1!==s)return r=[[IH.DIFF_INSERT,o.substring(0,s)],[IH.DIFF_EQUAL,a],[IH.DIFF_INSERT,o.substring(s+a.length)]],e.length>t.length&&(r[0][0]=IH.DIFF_DELETE,r[2][0]=IH.DIFF_DELETE),r;if(1===a.length)return[[IH.DIFF_DELETE,e],[IH.DIFF_INSERT,t]];var l=this.diff_halfMatch_(e,t);if(l){var c=l[0],u=l[1],h=l[2],d=l[3],p=l[4],f=this.diff_main(c,h,n,i),m=this.diff_main(u,d,n,i);return f.concat([[IH.DIFF_EQUAL,p]],m)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},e.prototype.diff_lineMode_=function(e,t,n){var i=this.diff_linesToChars_(e,t);e=i.chars1,t=i.chars2;var r=i.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push([IH.DIFF_EQUAL,""]);for(var a=0,s=0,l=0,c="",u="";a<o.length;){switch(o[a][0]){case IH.DIFF_INSERT:l++,u+=o[a][1];break;case IH.DIFF_DELETE:s++,c+=o[a][1];break;case IH.DIFF_EQUAL:if(s>=1&&l>=1){o.splice(a-s-l,s+l),a=a-s-l;for(var h=this.diff_main(c,u,!1,n),d=h.length-1;d>=0;d--)o.splice(a,0,h[d]);a+=h.length}l=0,s=0,c="",u=""}a++}return o.pop(),o},e.prototype.diff_bisect_=function(e,t,n){for(var i=e.length,r=t.length,o=Math.ceil((i+r)/2),a=o,s=2*o,l=new Array(s),c=new Array(s),u=0;u<s;u++)l[u]=-1,c[u]=-1;l[a+1]=0,c[a+1]=0;for(var h=i-r,d=h%2!=0,p=0,f=0,m=0,v=0,g=0;g<o&&!(Date.now()>n);g++){for(var y=-g+p;y<=g-f;y+=2){for(var b=a+y,w=void 0,k=(w=y===-g||y!==g&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1)-y;w<i&&k<r&&e.charAt(w)===t.charAt(k);)w++,k++;if(l[b]=w,w>i)f+=2;else if(k>r)p+=2;else if(d){if((M=a+h-y)>=0&&M<s&&-1!==c[M])if(w>=(E=i-c[M]))return this.diff_bisectSplit_(e,t,w,k,n)}}for(var C=-g+m;C<=g-v;C+=2){for(var M=a+C,E=void 0,S=(E=C===-g||C!==g&&c[M-1]<c[M+1]?c[M+1]:c[M-1]+1)-C;E<i&&S<r&&e.charAt(i-E-1)===t.charAt(r-S-1);)E++,S++;if(c[M]=E,E>i)v+=2;else if(S>r)m+=2;else if(!d){if((b=a+h-C)>=0&&b<s&&-1!==l[b]){k=a+(w=l[b])-b;if(w>=(E=i-E))return this.diff_bisectSplit_(e,t,w,k,n)}}}}return[[IH.DIFF_DELETE,e],[IH.DIFF_INSERT,t]]},e.prototype.diff_bisectSplit_=function(e,t,n,i,r){var o=e.substring(0,n),a=t.substring(0,i),s=e.substring(n),l=t.substring(i),c=this.diff_main(o,a,!1,r),u=this.diff_main(s,l,!1,r);return c.concat(u)},e.prototype.diff_linesToChars_=function(e,t){var n=[],i={};return n[0]="",{chars1:this.diff_linesToCharsMunge_(e,n,i,4e4),chars2:this.diff_linesToCharsMunge_(t,n,i,65535),lineArray:n}},e.prototype.diff_linesToCharsMunge_=function(e,t,n,i){for(var r="",o=0,a=-1,s=t.length;a<e.length-1;){-1===(a=e.indexOf("\n",o))&&(a=e.length-1);var l=e.substring(o,a+1);(n.hasOwnProperty?n.hasOwnProperty(l):void 0!==n[l])?r+=String.fromCharCode(n[l]):(s===i&&(l=e.substring(o),a=e.length),r+=String.fromCharCode(s),n[l]=s,t[s++]=l),o=a+1}return r},e.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},e.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0===n||0===i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var r=WH(n,i);if(e===t)return r;for(var o=0,a=1;;){var s=e.substring(r-a),l=t.indexOf(s);if(-1===l)return o;a+=l,0!==l&&e.substring(r-a)!==t.substring(0,a)||(o=a,a++)}},e.prototype.diff_halfMatch_=function(e,t){if(this.diffTimeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var r,o,a,s,l,c=this.diff_halfMatchI_(n,i,Math.ceil(n.length/4)),u=this.diff_halfMatchI_(n,i,Math.ceil(n.length/2));if(!c&&!u)return null;var h=(r=u?c&&c[4].length>u[4].length?c:u:c)[4];return e.length>t.length?(o=r[0],a=r[1],s=r[2],l=r[3]):(s=r[0],l=r[1],o=r[2],a=r[3]),[o,a,s,l,h]},e.prototype.diff_halfMatchI_=function(e,t,n){for(var i,r,o,a,s=e.substring(n,n+Math.floor(e.length/4)),l="",c=t.indexOf(s,0);-1!==c;){var u=this.diff_commonPrefix(e.substring(n),t.substring(c)),h=this.diff_commonSuffix(e.substring(0,n),t.substring(0,c));l.length<h+u&&(l=t.substring(c-h,c)+t.substring(c,c+u),i=e.substring(0,n-h),r=e.substring(n+u),o=t.substring(0,c-h),a=t.substring(c+u)),c=t.indexOf(s,c+1)}return 2*l.length>=e.length?[i,r,o,a,l]:null},e.prototype.diff_cleanupSemanticScore_=function(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),i=t.charAt(0),r=n.match(VH),o=i.match(VH),a=r&&n.match(zH),s=o&&i.match(zH),l=a&&n.match(qH),c=s&&i.match(qH),u=l&&e.match(UH),h=c&&t.match(_H);return u||h?5:l||c?4:r&&!a&&s?3:a||s?2:r||o?1:0},e.prototype.match_bitap_=function(e,t,n){if(t.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(t),r=this.matchThreshold,o=e.indexOf(t,n);-1!==o&&(r=WH(this.match_bitapScore_(0,o,t,n),r),-1!==(o=e.lastIndexOf(t,n+t.length))&&(r=WH(this.match_bitapScore_(0,o,t,n),r)));var a,s,l=1<<t.length-1;o=-1;for(var c,u=t.length+e.length,h=0;h<t.length;h++){for(a=0,s=u;a<s;)this.match_bitapScore_(h,n+s,t,n)<=r?a=s:u=s,s=Math.floor((u-a)/2+a);u=s;var d=jH(1,n-s+1),p=WH(n+s,e.length)+t.length,f=Array(p+2);f[p+1]=(1<<h)-1;for(var m=p;m>=d;m--){var v=i[e.charAt(m-1)];if(f[m]=0===h?(f[m+1]<<1|1)&v:(f[m+1]<<1|1)&v|(c[m+1]|c[m])<<1|1|c[m+1],f[m]&l){var g=this.match_bitapScore_(h,m-1,t,n);if(g<=r){if(r=g,!((o=m-1)>n))break;d=jH(1,2*n-o)}}}if(this.match_bitapScore_(h+1,n,t,n)>r)break;c=f}return o},e.prototype.match_bitapScore_=function(e,t,n,i){var r=e/n.length,o=Math.abs(i-t);return this.matchDistance?r+o/this.matchDistance:o?1:r},e.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},e.prototype.patch_addContext_=function(e,t){if(0!==t.length){if(null==e.start2)throw Error("patch not initialized");for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!==t.lastIndexOf(n)&&n.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var r=t.substring(e.start2-i,e.start2);r&&e.diffs.unshift([IH.DIFF_EQUAL,r]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+i);o&&e.diffs.push([IH.DIFF_EQUAL,o]),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+o.length,e.length2+=r.length+o.length}},e}(),ZH=function(){function e(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return e.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1===this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1===this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case IH.DIFF_INSERT:e="+";break;case IH.DIFF_DELETE:e="-";break;case IH.DIFF_EQUAL:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e}();function XH(e,t,n){var i=new YH,r=i.diff_main(e,t,!0,0);r.length>2&&(i.diff_cleanupSemantic(r),i.diff_cleanupEfficiency(r));var o=i.patch_make(e,r);return i.patch_apply(o,n)[0]}function $H(e){var t=e.split("\n");return t.length>1&&""===t.last()&&t.pop(),t}function QH(e,t){e.endsWith("\n")||(e+="\n"),t.endsWith("\n")||(t+="\n");var n=new YH,i=n.diff_lineMode(e,t);n.diff_cleanupSemantic(i);for(var r=createDiv("diff-view"),o=function(e,t){var n=createEl("div","diff-line");return t&&n.addClass("mod-"+t),null!=e&&n.setText(e),n.createEl("br"),n},a=[],s=function(e){if(0!==a.length){var t=0===r.childNodes.length,n=t||e?5:10;if(a.length>n){var i=[],o=createDiv("diff-collapsed");o.addEventListener("click",(function(){var e=o.parentNode;if(e){for(var t=0,n=i;t<n.length;t++){var r=n[t];e.insertBefore(r,o)}o.detach()}}));var s=0;if(t){for(var l=0;l<a.length-3;l++)i.push(a[l]),s++;r.appendChild(o);for(l=a.length-3;l<a.length;l++)r.appendChild(a[l])}else if(e){for(l=0;l<3;l++)r.appendChild(a[l]);r.appendChild(o);for(l=3;l<a.length;l++)i.push(a[l]),s++}else{for(l=0;l<3;l++)r.appendChild(a[l]);for(l=3;l<a.length-3;l++)i.push(a[l]),s++;r.appendChild(o);for(l=a.length-3;l<a.length;l++)r.appendChild(a[l])}o.setText("".concat(s," lines folded"))}else for(var c=0,u=a;c<u.length;c++){var h=u[c];r.appendChild(h)}a=[]}},l=[],c=[],u=function(){if(0!==l.length||0!==c.length){for(var e=0,t=l;e<t.length;e++){var n=t[e];r.appendChild(n)}for(var i=0,o=c;i<o.length;i++){n=o[i];r.appendChild(n)}l=[],c=[]}},h=function(e,t){var i=e!==t;if(e&&t&&i){var r=n.diff_wordMode(e,t);if(n.diff_levenshtein(r)<Math.max(e.length,t.length)/2){var h=createFragment(),d=createFragment();return function(e,t){for(var n=0;n<e.length;n++){var i=e[n];t(i[0],i[1])}}(r,(function(e,t){switch(e){case IH.DIFF_INSERT:d.createSpan({cls:"diff-changed",text:t});break;case IH.DIFF_DELETE:h.createSpan({cls:"diff-changed",text:t});break;case IH.DIFF_EQUAL:h.createSpan({text:t}),d.createSpan({text:t})}})),s(),l.push(o(h,"left")),void c.push(o(d,"right"))}}i?(s(),l.push(o(e,"left")),c.push(o(t,"right"))):(u(),a.push(o(e,null)))},d=0;d<i.length;d++){var p=i[d][0],f=$H(i[d][1]),m=d+1;if(p===IH.DIFF_DELETE&&m<i.length&&i[m][0]===IH.DIFF_INSERT){for(var v=$H(i[m][1]),g=Math.max(f.length,v.length),y=0;y<g;y++){h(f[y],v[y])}d++}else for(var b=0,w=f;b<w.length;b++){var k=w[b];switch(p){case IH.DIFF_INSERT:h(null,k);break;case IH.DIFF_DELETE:h(k,null);break;case IH.DIFF_EQUAL:h(k,k)}}}return u(),s(!0),r}function JH(e,t,n){Ox(e,t,{classes:["mod-wide","mod-error"]}),n&&setTimeout((function(){return Bx()}),2e3)}var eV=new WeakMap;function tV(e){for(;e;){if(eV.has(e))return eV.get(e);e=e.parentElement}return 0}var nV=function(e){function t(t,n){var i=e.call(this)||this;return i.app=t.app,i.containerEl=t.containerEl,i.file=n,i.containerEl.addClass("media-embed"),i}return f(t,e),t.prototype.onunload=function(){Vc(this.containerEl),e.prototype.onunload.call(this)},t}(xA),iV=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.containerEl.addClass("image-embed"),i}return f(t,e),t.prototype.loadFile=function(){return cH.displayInEl(this.file,this.app,this.containerEl)},t}(nV),rV=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.containerEl.addClass("audio-embed"),i}return f(t,e),t.prototype.loadFile=function(){return sH.displayInEl(this.file,this.app,this.containerEl)},t}(nV),oV=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.containerEl.addClass("video-embed"),i}return f(t,e),t.prototype.loadFile=function(){return HH.displayInEl(this.file,this.app,this.containerEl)},t}(nV),aV=function(e){function t(t,n,i){var r=e.call(this)||this;return r.app=t.app,r.ctx=t,r.containerEl=t.containerEl,r.containerEl.addClass("file-embed","mod-generic"),r.file=n,r.subpath=i,r.headerEl=r.containerEl.createDiv({cls:"file-embed-title"},(function(e){e.createSpan({cls:"file-embed-icon"},(function(e){mx(e,"lucide-file")})),e.appendText(" "+r.file.name)})),r}return f(t,e),t.prototype.loadFile=function(){return g(this,void 0,Promise,(function(){var e,t,n,i;return y(this,(function(r){return t=(e=this).containerEl,n=e.ctx,i=e.app,t.addEventListener("click",(function(e){i.workspace.getLeaf(Ak.isModEvent(e)).openLinkText(n.linktext,n.sourcePath)})),[2]}))}))},t}(xA),sV=function(e){function t(t){var n=e.call(this)||this;return n.file=null,n.onClick=function(e){var t=n.ctx,i=t.app,r=t.linktext,o=t.sourcePath;i.workspace.openLinkText(r,o,Ak.isModEvent(e))},n.ctx=t,n.containerEl=t.containerEl,n}return f(t,e),t.prototype.loadFile=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r;return y(this,(function(o){return t=(e=this).containerEl,n=e.ctx,i=n.app,r=n.linktext,t.addClass("file-embed"),i.fileManager.canCreateFileWithExt(Qc(r))?(t.addClass("mod-empty"),t.appendText(Qf.plugins.pagePreview.labelEmptyNote({linktext:r})),t.addEventListener("click",this.onClick)):(t.addClass("mod-empty-attachment"),t.appendText(Qf.plugins.pagePreview.labelEmptyAttachment({linktext:r}))),[2]}))}))},t.prototype.onload=function(){var t=this;e.prototype.onload.call(this);var n=this.ctx.app,i=mc((function(){if(t._loaded&&!(t._children.length>0)){var e=t.ctx,n=e.app,i=e.linktext,r=e.sourcePath,o=WS(i).path;if(n.metadataCache.getFirstLinkpathDest(o,r)){t.containerEl.removeClass("file-embed","mod-empty"),t.containerEl.removeEventListener("click",t.onClick),t.containerEl.empty();var a=cV.load(t.ctx);a&&(t.addChild(a),a.loadFile())}}}),500,!0);this.registerEvent(n.vault.on("create",i)),this.registerEvent(n.vault.on("rename",i))},t}(xA),lV=function(e){function t(){var t=e.call(this)||this;return t.embedByExtension={},t.registerExtensions(GT,(function(e,t,n){return e.displayMode?new wB(e,t,n):new uV(e,t,n)})),t.registerExtensions(UT,(function(e,t){return new iV(e,t)})),t.registerExtensions(_T,(function(e,t){return new rV(e,t)})),t.registerExtensions(WT,(function(e,t){return new oV(e,t)})),t.registerExtensions(jT,(function(e,t,n){return new NH(e,t,n)})),t}return f(t,e),t.prototype.unregisterExtensions=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];this.unregisterExtension(i)}},t.prototype.unregisterExtension=function(e){delete this.embedByExtension[e]},t.prototype.registerExtension=function(e,t){var n=this.embedByExtension;if(this.isExtensionRegistered(e))throw new Error('Attempting to register an embed for an already registered extension "'.concat(e,'"'));n[e]=t},t.prototype.registerExtensions=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];this.registerExtension(r,t)}},t.prototype.isExtensionRegistered=function(e){return this.embedByExtension.hasOwnProperty(e)},t.prototype.getEmbedCreator=function(e){return this.isExtensionRegistered(e.extension)?this.embedByExtension[e.extension]:null},t}(sw),cV=function(){function e(){}return e.load=function(e){var t=e.app,n=e.containerEl,i=e.linktext,r=e.sourcePath;e.depth=e.depth+1,n.empty();var o=null,a=WS(i),s=a.subpath,l=a.path,c=t.metadataCache.getFirstLinkpathDest(l,r);if(c){var u=t.embedRegistry.getEmbedCreator(c);u&&e.depth<=5&&(o=u(e,c,s)),o||(o=new aV(e,c,s))}return o||(o=new sV(e)),n.addClass("is-loaded"),eV.set(n,e.depth),o},e}(),uV=function(e){function t(t,n,i){var r=e.call(this,t.app,t.containerEl,n,t.state)||this;r.subpath="",r.data="",r.subpathNotFound=!1,r.before="",r.after="",r.heading="",r.indent="",r.lastSavedData=null,r.saving=!1,r.saveAgain=!1,r.fileBeingRenamed=null,r.subpath=i,r.containerEl.addClass("markdown-embed"),t.showInline&&(r.containerEl.addClass("inline-embed"),r.headerEl=r.containerEl.createDiv({cls:"embed-title markdown-embed-title",prepend:!0}),r.containerEl.createDiv("markdown-embed-link",(function(e){mx(e,"lucide-link"),Rx(e,"Open link"),Tc(e),e.onClickEvent((function(e){0!==e.button&&1!==e.button||(e.preventDefault(),r.app.workspace.openLinkText(t.linktext,t.sourcePath,Ak.isModEvent(e)))}))})));var o=r.inlineTitleEl=createDiv("inline-title");return o.contentEditable=r.subpath?"false":"true",o.spellcheck=r.app.vault.getConfig("spellcheck"),o.autocapitalize="on",o.tabIndex=-1,o.enterKeyHint=Zl.isAndroidApp?"enter":"done",o.addEventListeners({focus:function(){return r.fileBeingRenamed=r.file},blur:function(){return r.saveTitle(o)},input:function(){return r.onTitleChange(o)},paste:function(e){return r.onTitlePaste(o,e)},keydown:function(e){return r.onTitleKeydown(e)}}),r}return f(t,e),t.prototype.showPreview=function(t){e.prototype.showPreview.call(this,t);var n=this.previewMode.renderer;n.header||n.addHeader(),n.header.el.prepend(this.inlineTitleEl)},t.prototype.applyIndent=function(e){var t=this.indent,n="footnote"===tx(this.subpath)?/\n/g:/(^|\n)/g;return e.replace(n,"$&"+t)},t.prototype.save=function(t){return g(this,arguments,void 0,(function(t,n){var i,r,o,a,s,l,c,u,h,d,p;return void 0===n&&(n=!1),y(this,(function(f){switch(f.label){case 0:if(e.prototype.save.call(this,t,n),this.subpathNotFound)return[2];if(i=t,o=(r=this).before,a=r.after,s=r.heading,i&&s&&!s.endsWith("\n")&&(s+="\n"),i=this.data=o+s+this.applyIndent(i)+a,this.app.workspace.onQuickPreview(this.file,i),!n)return[3,6];if(this.dirty=!1,c=(l=this).file,u=l.app,h=u.vault,!c||c.deleted)return[2];if(this.saving)return this.saveAgain=!0,[2];if(this.lastSavedData===i||null===this.lastSavedData)return[3,6];d=this.lastSavedData,this.lastSavedData=i,this.saving=!0,f.label=1;case 1:return f.trys.push([1,4,5,6]),[4,gL(h.adapter.promise)];case 2:return f.sent(),[4,h.modify(c,i)];case 3:return f.sent(),[3,6];case 4:throw p=f.sent(),this.lastSavedData=d,console.error(p),new JA(Qf.interface.msgFailToSaveFile({filepath:c.path,message:p.message}),0),this.app.fileManager.storeTextFileBackup(c.path,i),p;case 5:return this.saving=!1,this.saveAgain&&this.save(this.text),[7];case 6:return[2]}}))}))},t.prototype.onTitlePaste=function(e,t){hk(e,t)},t.prototype.onTitleChange=function(e){Bx();var t=this.file;uk(e);var n=e.getText().trim(),i=iH(this.app,t,n,!1);i&&JH(e,i,!0)},t.prototype.onTitleKeydown=function(e){if(!e.isComposing)if("Escape"===e.key&&(e.preventDefault(),this.inlineTitleEl.setText(this.file.basename),this.inlineTitleEl.blur()),"Enter"===e.key||"Tab"===e.key)e.preventDefault(),this.inlineTitleEl.blur(),Zl.isMobile&&this.editMode.editor.focus();else if("ArrowDown"===e.key){var t=e.targetNode,n=t.win.getSelection();if(n&&n.rangeCount>=1&&t.instanceOf(HTMLElement)){var i=n.getRangeAt(0);if(t===i.startContainer||t.contains(i.startContainer)){var r=i.getBoundingClientRect();r.bottom+r.height/2>=t.getBoundingClientRect().bottom&&(e.preventDefault(),this.editMode?(this.editMode.editor.focus(),this.editMode.editor.setSelection(Am(0,0))):this.inlineTitleEl.blur())}}}},t.prototype.saveTitle=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:if(Bx(),n=(t=this).file,i=t.subpath,r=t.fileBeingRenamed,n!==r)return[2];if(o=e.getText().trim(),i)return[3,5];if(a=iH(this.app,n,o,!0))return e.setText(n.basename),JH(e,a,!0),[2];if(s=n.getNewPathAfterRename(o),n.path===s)return[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.app.fileManager.renameFile(n,s)];case 2:return u.sent(),[3,4];case 3:return(l=u.sent())&&(c=l.message||l.code||l.toString(),JH(e,c,!0)),[3,4];case 4:e.setText(n.basename),this.fileBeingRenamed=null,u.label=5;case 5:return[2]}}))}))},t.prototype.onload=function(){e.prototype.onload.call(this),this.registerEvent(this.app.metadataCache.on("changed",this.onFileChanged,this)),this.registerEvent(this.app.vault.on("rename",this.onFileRename,this))},t.prototype.onunload=function(){e.prototype.onunload.call(this),this.applyScope(null)},t.prototype.onFileChanged=function(e,t,n){e!==this.file||t===this.data||this.dirty||this.loadFileInternal(t,n)},t.prototype.onFileRename=function(e,t){e instanceof ww&&e===this.file&&!this.subpath&&this.inlineTitleEl.setText(e.basename)},t.prototype.loadFile=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c=this;return y(this,(function(u){switch(u.label){case 0:return t=(e=this).app,n=e.file,i=e.headerEl,r=e.previewMode,o=e.subpath,a=e.state,o||(null==i||i.setText(n.basename),this.inlineTitleEl.setText(n.basename),r.registerEvent(t.workspace.on("quick-preview",(function(e,t){e===c.file&&t!==c.data&&c.loadContents(t)})))),l=this,[4,t.vault.cachedRead(n)];case 1:return s=l.data=u.sent(),this.loadFileInternal(s),a&&Number.isNumber(a.scroll)&&this.previewMode.renderer.applyScrollDelayed(a.scroll,{highlight:!0,center:!0}),this.previewMode.renderer.applyFoldInfo(this.getFoldInfo()),[2]}}))}))},t.prototype.getFoldInfo=function(){return this.app.foldManager.load(this.file)},t.prototype.loadFileInternal=function(e,t){var n=this.file,i=this.lastSavedData;if(this.lastSavedData=e,i){if(i===e)return;if(this.dirty){var r=this.data;if(r===e)return;r!==i&&(e=XH(i,r,e),new JA(Qf.interface.msgFileChanged({file:n.path})))}}this.loadContents(e,t)},t.prototype.loadContents=function(e,t){var n=this,i=this,r=i.app,o=i.file,a=i.subpath;if(t||(t=r.metadataCache.getFileCache(o)),a&&!t&&(this.subpathNotFound=!1),a&&t){var s=JS(t,a);this.subpathNotFound=!s;var l="",c="",u="",h="";if(s){var d=ex(e,t,s,this.editable);if(l=d.before,c=d.after,u=d.heading,h=d.indent,e=d.content,this.containerEl.dataset.type=s.type,"heading"===s.type){var p=this.inlineTitleEl,f=qT(bS(pS(u))).firstChild;f&&f.instanceOf(HTMLHeadingElement)?(p.addClass("markdown-rendered"),p.replaceChildren(f),gB(r,p,o.path),kB.postProcess(r,{docId:oc(16),sourcePath:this.path,frontmatter:t.frontmatter,promises:[],addChild:function(e){return n.addChild(e)},getSectionInfo:function(){return null},containerEl:p,el:f,displayMode:!1})):p.setText(s.current.heading),p.setAttr("data-level",String(s.current.level))}else if("footnote"===s.type){h=r.vault.getConfig("useTab")?"\t":"    "}}this.heading=u,this.before=l,this.after=c,this.indent=h}if(this.subpathNotFound){var m=a.slice(1).replace(/(\[|\])/g,"\\$1");if("footnote"===tx(a)){e=Qf.plugins.pagePreview.labelMissingFootote({id:m}),this.containerEl.dataset.type="footnote",this.containerEl.addClass("mod-empty");var v=function(){n.app.vault.process(o,(function(e){var t=e.match(/\n*$/)[0].length;return e+"\n".repeat(2-Math.min(t,2))+a.slice(1)+": \n"})),n.containerEl.removeClass("mod-empty"),n.containerEl.removeEventListener("click",v)};this.containerEl.addEventListener("click",v)}else e="##### "+Qf.interface.labelUnableToFindSection({subpath:m,file:o.basename})}this.set(e)},t.prototype.applyScope=function(e){e!==this.scope&&(this.scope&&this.app.keymap.popScope(this.scope),e&&this.app.keymap.pushScope(e),this.scope=e)},t.prototype.onMarkdownFold=function(){var e=this.file,t="preview"===this.getMode()?this.previewMode.renderer.getFoldInfo():this.editMode.getFoldInfo();return this.app.foldManager.save(e,t)},t}(nH),hV=function(e){function t(t){var n=e.call(this,t)||this;n.limit=100,n.emptyStateText=Qf.setting.thirdPartyPlugin.labelNoResultsFound(),n.isOpen=!1,n.inputEl=null,n.clearButtonEl=null,n.ctaEl=null,n.resultContainerEl=null,n.instructionsEl=createDiv("prompt-instructions");var i=n.modalEl;return i.removeClass("modal"),i.addClass("prompt"),i.empty(),i.createDiv("prompt-input-container",(function(e){var t=n.inputEl=e.createEl("input",{cls:"prompt-input",type:"text",attr:{autocapitalize:"off",spellcheck:"false",enterkeyhint:Zl.isAndroidApp?"enter":"done"}});n.ctaEl=e.createDiv("prompt-input-cta"),n.clearButtonEl=e.createDiv("search-input-clear-button",(function(e){e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(){""!==t.value?(t.value="",t.trigger("input")):n.close()}))}))})),n.resultContainerEl=i.createDiv("prompt-results"),n.resultContainerEl.on("mousedown",".suggestion-item",(function(e){return e.preventDefault()})),n.chooser=new uF(n,n.resultContainerEl,n.scope),n.inputEl.addEventListener("input",n.onInput.bind(n)),n}return f(t,e),t.prototype.setPlaceholder=function(e){this.inputEl.placeholder=e},t.prototype.setInstructions=function(e){e.length>0?(dF(this.instructionsEl,e),this.modalEl.appendChild(this.instructionsEl)):this.instructionsEl.detach()},t.prototype.onOpen=function(){var e=this.inputEl;this.isOpen=!0,e.value="",e.focus(),this.updateSuggestions()},t.prototype.onInput=function(){this.updateSuggestions()},t.prototype.updateSuggestions=function(){var e=this,t=this.inputEl.value,n=this.getSuggestions(t),i=function(t){if(t&&0!==t.length){var n=e.limit;n&&n>0&&(t=t.slice(0,n)),e.chooser.setSuggestions(t)}else e.onNoSuggestion()};Array.isArray(n)?i(n):g(e,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=i,[4,n];case 1:return e.apply(void 0,[t.sent()]),[2]}}))}))},t.prototype.onNoSuggestion=function(){this.chooser.setSuggestions(null),this.chooser.addMessage(this.emptyStateText)},t.prototype.selectSuggestion=function(e,t){this.app.keymap.updateModifiers(t),this.close(),this.isOpen=!1,this.onChooseSuggestion(e,t)},t.prototype.selectActiveSuggestion=function(e){this.chooser.useSelectedItem(e)},t}(ZA),dV=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.getSuggestions=function(e){e=e.trim();for(var t=this.getItems(),n=BL(e),i=[],r=0,o=t;r<o.length;r++){var a=o[r],s=VL(n,this.getItemText(a));s&&i.push({match:s,item:a})}return zL(i),i},t.prototype.renderSuggestion=function(e,t){WL(t,this.getItemText(e.item),e.match)},t.prototype.onChooseSuggestion=function(e,t){this.onChooseItem(e.item,t)},t}(hV),pV={info:Qf.callout.type.info,important:Qf.callout.type.important,tip:Qf.callout.type.tip,success:Qf.callout.type.success,question:Qf.callout.type.question,warning:Qf.callout.type.warning,example:Qf.callout.type.example,quote:Qf.callout.type.quote},fV=w(w([],Object.keys(pV),!0),["abstract","summary","tldr","todo","hint","check","done","question","faq","help","caution","attention","failure","fail","missing","danger","error","bug","example","cite"],!1),mV=nt.define(),vV=Xi.define((function(){return{mousedown:!1}})),gV=new Set(["em","strong","inline-code","strikethrough","highlight","link","image","hmd-internal-link","hmd-embed","formatting-link","footref"]),yV=/^\s*(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,bV=Yn.replace({}),wV=Yn.replace({}),kV=Yn.replace({}),CV=Yn.mark({tagName:"a",class:"cm-underline",attributes:{tabIndex:"-1",href:"#"}}),MV=Yn.mark({class:"cm-transparent"}),EV=Yn.mark({class:"is-unresolved"}),SV=Yn.mark({class:"mod-no-select"}),xV=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.toDOM=function(){return createSpan({cls:"cm-blockquote-border cm-transparent",text:">"})},t}(Gn),TV=Yn.replace({widget:new xV}),DV=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.eq=function(){return!0},t.prototype.toDOM=function(e){var t=createDiv("hr cm-line");return t.createEl("br"),t.addEventListener("click",(function(){var n=e.posAtDOM(t),i=e.state.doc.lineAt(n);e.dispatch({selection:{head:i.from,anchor:i.to}})})),t.createEl("hr"),t},t.prototype.destroy=function(e){e.detach()},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 20},enumerable:!1,configurable:!0}),t}(Gn),AV=new DV,LV=Yn.mark({class:"list-bullet"}),PV=Yn.mark({class:"list-number"}),IV=function(e){function t(t){var n=e.call(this)||this;return n.content=t,n}return f(t,e),t.prototype.eq=function(e){return e.content===this.content},t.prototype.updateDOM=function(e){if(e.instanceOf(HTMLLabelElement)&&e.firstChild&&e.firstChild.instanceOf(HTMLInputElement)){var t=e.firstChild;return t.setAttribute("data-task",this.content),t.checked=" "!==this.content,!0}return!1},t.prototype.toDOM=function(e){var t=createEl("label","task-list-label"),n=t.createEl("input",{cls:"task-list-item-checkbox",type:"checkbox"});return n.setAttribute("data-task",this.content),n.checked=" "!==this.content,t.addEventListener("mousedown",(function(e){e.preventDefault()})),n.addEventListener("input",(function(){var t=e.posAtDOM(n),i=e.state.doc.lineAt(t),r=i.text.search(/\[.]/);if(-1!==r){var o=i.text.charAt(r+1),a=i.from+r+1;e.dispatch({changes:[{from:a,to:a+1,insert:" "===o?"x":" "}]})}})),t},t}(Gn),FV=function(e){function t(t){var n=e.call(this)||this;return n.styles=t,n}return f(t,e),t.prototype.eq=function(e){return this.styles===e.styles},t.prototype.toDOM=function(){return createSpan(this.styles)},t.prototype.ignoreEvent=function(e){return!1},t}(Gn),OV=function(e){function t(t,n){var i=e.call(this)||this;return i.lang=t,i.code=n,i}return f(t,e),t.prototype.eq=function(e){return e.lang===this.lang&&e.code===this.code},t.prototype.toDOM=function(){var e=this,t=createSpan({cls:"code-block-flair",text:this.lang});return this.lang||mx(t,"lucide-copy"),Rx(t,Qf.interface.menu.copy()),t.addEventListener("click",(function(){return g(e,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.code).endsWith("\n")&&(e=e.substr(0,e.length-1)),[4,navigator.clipboard.writeText(e)];case 1:return t.sent(),new JA(Qf.interface.copied({context:"generic"})),[2]}}))}))})),t},t}(Gn),BV=function(e){function t(t,n){var i=e.call(this)||this;return i.url=t,i.title=n,i}return f(t,e),t.prototype.eq=function(e){return this.url===e.url&&this.title===e.title},t.prototype.patchDOM=function(e){return!(BO(this.url)||!e.instanceOf(HTMLImageElement))&&(e.src!==this.url&&(e.src=this.url),this.applyTitle(e,this.title),!0)},t.prototype.initDOM=function(e){var t,n=BO(this.url);if(n)t=NO(n);else{var i=t=createEl("img");i.src=this.url,this.applyTitle(i,this.title)}return this.hookClickHandler(e,t),this.resizeWidget(e,t),t},t.prototype.applyTitle=function(e,t){var n=0,i=0;if(t){var r=function(e){var t=aS(e);return!!t&&(n=t.x,i=t.y,!0)},o=t.lastIndexOf("|");-1!==o?r(t.substr(o+1))&&(t=t.substr(0,o)):r(t)&&(t="")}t||(t=Kc(this.url)),n>0&&(e.width=n),i>0&&(e.height=i),e.setAttr("alt",t)},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 30},enumerable:!1,configurable:!0}),t}(rA),NV=function(e){function t(t,n,i,r,o,a){var s=e.call(this,t,n)||this;return s.sourcePath=i,s.href=r,s.title=o,s.depth=a,s}return f(t,e),t.prototype.initDOM=function(e){var t=this,n=t.app,i=t.sourcePath,r=t.href,o=t.title,a=t.depth,s=this.containerEl=createDiv("internal-embed");s.tabIndex=-1,s.setAttr("src",r),this.applyTitle(s,o);var l=cV.load({app:n,linktext:r,sourcePath:i,containerEl:s,displayMode:!1,showInline:!0,depth:a});return l&&(this.addChild(l),l.loadFile()),l instanceof NH?this.addEditButton(e,s):this.hookClickHandler(e,s),this.resizeWidget(e,s),s},t.prototype.applyTitle=function(e,t){this.title=t;var n=0,i=0;if(t){var r=function(e){var t=aS(e);return!!t&&(n=t.x,i=t.y,!0)},o=t.lastIndexOf("|");-1!==o?r(t.substr(o+1))&&(t=t.substr(0,o)):r(t)&&(t="")}e.setAttr("alt",t||null),e.setAttr("width",0===n?null:String(n)),e.setAttr("height",0===i?null:String(i));var a=e.firstChild;a&&a.instanceOf(HTMLImageElement)&&(a.setAttr("alt",t||null),a.setAttr("width",0===n?null:String(n)),a.setAttr("height",0===i?null:String(i)))},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 100},enumerable:!1,configurable:!0}),t}(iA),RV=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.installed=!1,o.rendered=!1,o.lang=i,o.code=r,o}return f(t,e),t.prototype.initDOM=function(e){var t=this,n=this,i=n.app,r=n.editor,o=n.code,a=n.lang,s=this.containerEl=createDiv("cm-preview-code-block cm-embed-block markdown-rendered");s.tabIndex=-1;var l=s.createEl("pre"),c=l.createEl("code","language-"+a);if(rB.set(c,o),"mermaid"===a)nB(e.contentDOM,[c]);else if("query"===a)this.addChild(bB(i,o,l,r.path));else if(eB.codeBlockPostProcessors.hasOwnProperty(a)){s.empty();var u=s.createDiv("block-language-"+a);(0,eB.codeBlockPostProcessors[a])(o,u,{docId:oc(16),sourcePath:r.path,frontmatter:{},promises:[],addChild:function(e){return t.addChild(e)},getSectionInfo:function(n){return s.contains(n)?{lineStart:t.lineStart,lineEnd:t.lineEnd,text:e.state.doc.toString()}:null},containerEl:e.scrollDOM,el:u});var h=tV(e.scrollDOM),d=s.findAll(".internal-embed:not(.is-loaded)");if(d.length>0)for(var p=0,f=d;p<f.length;p++){var m=f[p],v=m.getAttribute("src"),g=cV.load({app:i,linktext:v,sourcePath:r.path,containerEl:m,displayMode:!0,showInline:!0,depth:h});g&&(this.addChild(g),g.loadFile())}}else c.setText(o);return this.addEditButton(e,s),this.resizeWidget(e,s),s},t.canRenderLang=function(e){return"mermaid"===e||"query"===e||eB.codeBlockPostProcessors.hasOwnProperty(e)},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 50},enumerable:!1,configurable:!0}),t}(iA),HV=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.text=i,o.clazz=r,o}return f(t,e),t.prototype.initDOM=function(e){var t=this,n=this,i=n.app,r=n.editor,o=n.text,a=n.clazz,s=this.containerEl=createDiv("cm-embed-block "+a);s.tabIndex=-1;var l=s.createDiv("markdown-rendered"),c=pS(o),u=yS(c);jk(c,"checklist",(function(e){var t=e.position.start.line-1;e.data.hProperties["data-line"]=String(t)}));var h=qT(bS(c));l.toggleClass("rtl",i.vault.getConfig("rightToLeft")),l.toggleClass("show-indentation-guide",i.vault.getConfig("showIndentGuide")),l.appendChild(h);return kB.postProcess(this.app,{docId:oc(16),sourcePath:r.path,frontmatter:u,promises:[],addChild:function(e){return t.addChild(e)},getSectionInfo:function(){return null},containerEl:s,el:l,displayMode:!1}),this.resolveLinks(),this.hookClickHandler(e,s),this.addEditButton(e,s),this.resizeWidget(e,s),s},t.prototype.resolveLinks=function(){gB(this.app,this.containerEl,this.editor.path)},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 50},enumerable:!1,configurable:!0}),t}(iA),VV=function(e){function t(t,n,i,r){return e.call(this,t,n,r,"cm-callout")||this}return f(t,e),t.prototype.getTypePos=function(){var e=this.start,t=this.editor.cm.state.doc.lineAt(e),n=t.text.indexOf("[!")+2;return[n,t.text.indexOf("]",n)]},t.prototype.getType=function(){var e=this.start,t=this.editor.cm.state.doc.lineAt(e),n=this.getTypePos(),i=n[0],r=n[1];return t.text.slice(i,r)},t.prototype.updateType=function(e){var t=this.start,n=this.editor.cm,i=this.getTypePos(),r=i[0],o=i[1];n.dispatch({changes:[{from:t+r,to:t+o,insert:e}]})},t.prototype.remove=function(){for(var e=this,t=e.start,n=e.end,i=e.editor.cm,r=i.state.doc.lineAt(t),o=i.state.doc.lineAt(n),a=[{from:r.from,to:r.to+1,insert:""}],s=r.number+1;s<=o.number;s++){var l=i.state.doc.line(s),c=Em(l.text);a.push({from:l.from,to:l.from+c,insert:""})}i.dispatch({changes:a})},t.prototype.initDOM=function(t){var n=this,i=e.prototype.initDOM.call(this,t);return i.on("click",".task-list-item-checkbox",(function(e,r){if(function(e){for(;e;){if(e===i)return!0;if(e.classList.contains("markdown-preview-view"))return!1;var t=e.parentElement;if(!t)return!1;e=t}}(r)){var o=parseInt(r.getAttribute("data-line"));if(!(o<0||isNaN(o))&&r.instanceOf(HTMLInputElement)){e.preventDefault();var a=yB.toggleCheckbox(n.text,o);null!==a&&(n.text=a.text,t.dom.win.setTimeout((function(){var e=" "!==a.char;r.checked=e;var t=r.parentNode;t&&t.instanceOf(HTMLLIElement)&&(t.setAttr("data-task",a.char),t.toggleClass("is-checked",e))}),0),t.dispatch({changes:[{from:n.start,to:n.end,insert:a.text}]}))}}})),i.addEventListener("contextmenu",(function(e){e.preventDefault();var i=n.getType(),r=PA.forEvent(e).setNoIcon().addSections(["edit","clipboard","type","","danger"]);r.addItem((function(e){return e.setTitle(Qf.interface.menu.edit()).setSection("edit").onClick((function(){return nA.selectElement(t,n.containerEl)}))})),r.setSectionSubmenu("type",{title:Qf.callout.optionType()});for(var o=function(e){var t=pV[e];r.addItem((function(r){return r.setTitle(t()).setSection("type").setChecked(e===i).onClick((function(){return n.updateType(e)}))}))},a=0,s=Object.keys(pV);a<s.length;a++){o(s[a])}r.addItem((function(e){return e.setTitle(Qf.callout.optionOther()).setSection("type").onClick((function(){new tz(n.app,(function(e){return n.updateType(e)})).open()}))})).addItem((function(e){return e.setTitle(Qf.callout.type.none()).setSection("type").onClick((function(){return n.remove()}))}))})),i},t}(HV),zV=function(e){function t(t,n){var i=e.call(this)||this;return i.math=t,i.block=n,i}return f(t,e),t.prototype.eq=function(e){return this.math===e.math&&this.block===e.block},t.prototype.patchDOM=function(e){var t=this.block;return(t&&e.instanceOf(HTMLDivElement)||!(t||!e.instanceOf(HTMLSpanElement)))&&(this.render(e),!0)},t.prototype.initDOM=function(e){var t=this.containerEl=createEl(this.block?"div":"span","math");return this.block&&(t.createEl("br"),t.createEl("br"),this.addEditButton(e,t)),this.hookClickHandler(e,t),this.resizeWidget(e,t),this.render(t),t},t.prototype.render=function(e){var t=this;SO.then((function(){var n=t,i=n.math,r=n.block;e.toggleClass("math-block",r),e.toggleClass("cm-embed-block",r);var o=e.find(".edit-block-button");e.empty();try{var a=TO(i,r);e.appendChild(a)}catch(t){e.appendText(i)}o&&e.appendChild(o),IO()}))},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 50},enumerable:!1,configurable:!0}),t}(rA),qV=["script","style","link","meta","object","embed","webview"],UV=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.app=t,o.editor=n,o.html=i,o.block=r,o}return f(t,e),t.prototype.eq=function(e){return this.html===e.html&&this.block===e.block},t.prototype.patchDOM=function(e,t){return!1},t.prototype.initDOM=function(e){var t=this.block,n=this.html,i=this.containerEl=createEl(t?"div":"span","cm-html-embed"+(t?" cm-embed-block":""));return i.tabIndex=-1,i.appendChild(qT(n)),t&&this.addEditButton(e,i),this.app.fixFileLinks(i,this.editor.path),this.hookClickHandler(e,i),this.resizeWidget(e,i),i},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 40},enumerable:!1,configurable:!0}),t}(rA),_V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.toDOM=function(){return createSpan()},t.prototype.ignoreEvent=function(){return!0},t.prototype.eq=function(){return!0},t}(Gn),WV=Yn.widget({widget:new _V,side:-1}),jV=function(){function e(e){this.tree=Kh(e.state),this.decorations=this.buildDeco(e)}return e.prototype.update=function(e){var t,n=Kh(e.state);n.length<e.view.viewport.to||e.view.composing||(null===(t=e.view.plugin(vV))||void 0===t?void 0:t.mousedown)?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||e.selectionSet||gm(e.transactions,mV)||gm(e.transactions,rm)||gm(e.transactions,om))&&(this.tree=n,this.decorations=this.buildDeco(e.view))},e}(),GV=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.update=function(t){var n,i=t.state,r=t.view;if(!t.docChanged&&t.selectionSet&&!(null===(n=t.view.plugin(vV))||void 0===n?void 0:n.mousedown)){var o=i.selection,a=this.decorations,s=!1,l=function(e,t,n,i,r){return t<=e&&e<=n&&(i===bV?e=Math.min(t,e):i===kV?e=Math.max(n,e):i===wV&&r&&(e=Math.min(t,e))),e},c=o.ranges.map((function(e){for(var t=e.anchor,n=e.head,r=t,o=n,c=i.doc.lineAt(r).number!==i.doc.lineAt(o).number,u=!1,h=function(e,t,n){var i=l(r,e,t,n,c),a=l(o,e,t,n,c);i===r&&a===o||(r=i,o=a,u=!0)},d=0;d<10&&(u=!1,a.between(r,r,h),r!==o&&a.between(o,o,h),u);d++);return r!==t||o!==n?(s=!0,Ee.range(r,o)):e}));s&&t.view.dom.win.setTimeout((function(){o===i.selection&&r.dispatch({selection:Ee.create(c,o.mainIndex)})}))}e.prototype.update.call(this,t)},t.prototype.buildDeco=function(e){if(!this.tree.length)return Yn.none;for(var t=e.state,n=e.hasFocus?t.selection.ranges:[],i=t.field(sm),r=am.get("obsidian-search-match-highlight"),o=function(e,t){return fm(n,e,t)||mm(i,r,e,t)},a=function(e){var n=t.doc.lineAt(e);return o(n.from,n.to)},s=new kt,l=0,c=function(e,n){var i=e,r=e,c=null,h=function(e){c||(c=[]),c.push(e)},d=function(e){if(c){if(o(i,r))for(var t=0,n=c;t<n.length;t++){(h=n[t]).always&&s.add(h.from,h.to,h.deco)}else{if(c.length>1){var a=c.last();a.deco===bV&&(a.deco=kV)}for(var l=0,u=c;l<u.length;l++){var h=u[l];s.add(h.from,h.to,h.deco)}}c=null}i=e,r=e},p="",f=!1;u.tree.iterate({from:e,to:n,enter:function(e){var n=e.type,i=e.from,s=e.to,c=n.prop(Up),u=function(){return t.doc.sliceString(i,s)};if(i===r&&c||d(i),c){if(i<l)return;l=s;var m=c.split(" "),v=new Set(m);if(v.has("hmd-codeblock"))return;if(v.has("formatting-header")){var g=t.doc.lineAt(i);return void(o(g.from,g.to)||g.text.trim()===u().trim()||h({from:i,to:s,deco:wV}))}if(v.has("formatting-quote"))return void(a(i)||(v.has("quote-1")?h({from:i,to:i+1,deco:MV}):h({from:i,to:i+1,deco:TV})));v.has("hmd-escape-backslash")&&(a(i)||h({from:i,to:s,deco:bV}));var y=m.some((function(e){return gV.has(e)})),b=v.has("formatting"),w=v.has("string")&&v.has("url"),k=v.has("link")&&!v.has("url")&&!b,C=v.has("hmd-internal-link")&&!v.has("link-has-alias")&&!v.has("link-alias-pipe")&&!v.has("hmd-embed"),M=k||C,E=v.has("image"),S=v.has("formatting-link")||v.has("link-has-alias")||v.has("link-alias-pipe"),x=v.has("formatting-task"),T=v.has("formatting-link-end")||w,D=v.has("formatting-list-ul"),A=v.has("url")&&!v.has("string");if(E?f=!0:f&&!v.has("url")&&(f=!1),v.has("formatting-link-start")&&t.doc.length>=s+2&&"]]"===t.doc.sliceString(s,s+2))return;if(v.has("formatting-link-end")&&i>=2&&"[["===t.doc.sliceString(i-2,i))return;var L=S||w||M||x||D||A;if(v.has("hmd-barelink")&&!v.has("hmd-footnote")&&(b=L=!1),S&&v.has("link")&&v.has("url"))return o(i,s)||h({from:i,to:s,deco:CV}),s+1<t.doc.length&&">"===t.doc.sliceString(s,s+1)&&h({from:s,to:s+1,deco:kV}),void(r=s+1);if((S&&v.has("link")&&"]"===u()||b&&w&&"("===u())&&(T=!0),(y||L)&&(r=s,b||L)){var P={from:i,to:s,deco:T?kV:bV};if(x){var I=t.doc.sliceString(i+1,i+2);P.deco=Yn.widget({widget:new IV(I)})}else if(D){var F=(g=t.doc.lineAt(i)).text.match(Im);F&&F[6]||(P.deco=LV,P.to=r=i+1)}else if(M){var O=u();C&&O.length>1&&O.startsWith("#")&&(h({from:i,to:i+1,deco:bV}),P.from++),P.deco=CV}else A&&(P.deco=CV);h(P)}if(v.has("formatting-list-ol")&&(r=s,h({from:i,to:s,deco:PV})),v.has("url")&&!b)p=u();else if(v.has("url")&&b&&p&&")"===u()&&!f){if(!Kk(p)){var B=Array.from(v).map((function(e){return"cm-"+e})).join(" ")+" external-link";h({from:s,to:s,always:!0,deco:Yn.widget({widget:new FV(B)})})}p=""}else p=""}}}),d(0)},u=this,h=0,d=e.visibleRanges;h<d.length;h++){var p=d[h];c(p.from,p.to)}return s.finish()},t}(jV),KV=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.buildDeco=function(e){if(!this.tree.length)return Yn.none;for(var t=e.state,n=new kt,i=0,r=e.visibleRanges;i<r.length;i++){var o=r[i],a=o.from,s=o.to;this.tree.iterate({from:a,to:s,enter:function(e){var i=e.type,r=e.from,o=i.prop(_p);if(o&&o.contains("HyperMD-task-line")){var a=t.doc.lineAt(r).text.match(Im);a&&a[6]&&n.add(r,r,Yn.line({attributes:{"data-task":a[6]}}))}}})}return n.finish()},t}(jV);function YV(e,t){var n=e.app,i=tV(e.cm.scrollDOM),r=[],o=[],a=[],s=[],l=!1,c=function(t){for(var n=0,i=t;n<i.length;n++)for(var r=0,o=i[n].children;r<o.length;r++){var a=o[r];e.removeChild(a)}};e.cleanupLivePreview=function(){c(r),r=[],c(o),o=[],c(s),s=[],c(a),a=[]};var u=function(l){var u=l.state,h=Kh(u),d=u.doc,p=t.hasFocus?u.selection.ranges:[],f=u.field(sm),m=am.get("obsidian-search-match-highlight"),v=function(e,t){return fm(p,e,t)||mm(f,m,e,t)},g=function(e,t,n){return e.block&&n===d.length&&(e.inclusiveEnd=!1),Yn.replace(e).range(t,n)},y=e.path,b=[],w=r.slice();r=[];var k=o.slice();o=[];var C=s.slice();s=[];var M=a.slice();a=[];var E=!1,S=-1,x=-1,T=-1,D="",A=!1,L="",P="",I=-1,F=-1,O=-1,B=-1,N=-1,R=!1,H=-1,V="",z=-1,q="",U=-1,_=-1,W=-1,j=-1,G=function(t,o,a){for(var s=nC(t),l=s.href,c=s.title,u=null,h=0,d=w;h<d.length;h++){var p=d[h];if(p.sourcePath===y&&p.href===l){u=p,w.remove(p);break}}return u?u.title!==c&&u.applyTitle(u.containerEl,c):u=new NV(n,e,y,l,c,i),u.setPos(o,a),r.push(u),u},K=function(e,t,n){var i=d.lineAt(t),r=i.from,o=i.to,a=i.text,s=t===r&&""===a.substr(n-r).trim();s?v(r,o)?b.push(Yn.widget({widget:e,block:s,side:1}).range(o)):b.push(g({widget:e,block:s,side:1},r,o)):v(t,n)?b.push(Yn.widget({widget:e,side:1}).range(n)):b.push(Yn.replace({widget:e,side:1}).range(t,n))},Y=function(i){if(-1!==U&&_<i){for(var r=d.sliceString(U,_),o=null,a=0,l=C;a<l.length;a++){var c=l[a];if(c instanceof VV&&c.text===r){o=c,C.remove(c);break}}v(U,_)||(o||(o=new VV(n,e,t,r)),b.push(g({widget:o,side:1,block:!0},U,_))),o&&(o.setPos(U,_),s.push(o)),U=-1,_=-1}},Z=function(t){if(-1!==W&&j<t){for(var i=l.changes,r=l.docChanged,o=d.slice(W,j),s=j!==h.length-1||h.length===d.length,c=i.invertedDesc.mapPos(W),u=null,p=0,v=M;p<v.length;p++){var y=v[p],w=y.start;if(c===w||W===w||i.length>=w&&W===i.mapPos(w)){if(s?y.receiveUpdate(l,o):!r||y.receiveIncompleteUpdate(l,o)){u=y,M.remove(y);break}}}if(!mm(f,m,W,j)){u||(u=new TB(n,e,o,s));var k=W>0&&W>JD(l.newDoc)+1;b.push(g({widget:u,side:1,block:!0,inclusiveStart:k},W,j)),Zl.isAndroidApp&&j!==d.length&&b.push(WV.range(j+1))}u&&(u.setPos(W,j),u.receiveSelection(l),a.push(u)),W=-1,j=-1}};return h.iterate({enter:function(t){var i=t.type,r=t.from,a=t.to,s=i.prop(Up);if(s&&(Y(r),Z(r)),s&&!(-1!==U||-1!==W))if((J=new Set(s.split(" "))).has("hmd-codeblock"));else if(J.has("formatting-math-begin"))B=r,N=a,R=J.has("math-block");else if(-1!==B){if(J.has("formatting-math-end")){var l=r,c=a,u=R,h=d.sliceString(N,l);(p=new zV(h,u)).setPos(u&&h.startsWith("\n")?N+1:N,u&&h.endsWith("\n")?l-1:l),u=u&&function(e,t){var n=d.lineAt(e),i=n.from,r=n.text,o=d.lineAt(t),a=o.from,s=o.text;return""===r.substr(0,e-i).trim()&&""===s.substr(t-a).trim()}(B,c),v(B,c)?R&&b.push(Yn.widget({widget:p,block:u,side:1}).range(c)):b.push(g({widget:p,block:u,side:1},B,c)),B=-1,N=-1}}else if(J.has("formatting-link-start"))E=J.has("formatting-embed"),S=r,x=a;else if(S>-1)if(J.has("hmd-internal-link"))D+=d.sliceString(r,a),T=a;else{if(J.has("formatting-link-end")&&D)if(E){var p=G(D,x,T);K(p,S,a)}else{Zl.isIosApp&&!v(S,a)&&b.push(SV.range(x,T));var f=WS(w=nC(D).href).path;n.metadataCache.getFirstLinkpathDest(f,y)||b.push(EV.range(x,T))}D="",S=-1}else if(J.has("image-marker"))A=!0,I=r;else if(J.has("image-alt-text")&&!J.has("formatting"))L=d.sliceString(r,a);else if(A&&J.has("url")&&!J.has("formatting"))P=d.sliceString(r,a),F=r,O=a;else if(A&&P&&J.has("formatting")){p=void 0;if(Kk(P=Zk(P))){var m=void 0;try{m=decodeURI(P)}catch(e){return}var w=Gc(m).trim();p=G(w+"|"+L,I,a)}else P=Yk(P),Zl.isDesktopApp&&P.startsWith("file:///")&&(P=Zl.resourcePathPrefix+P.substr(8)),(p=new BV(P,L)).setPos(F,O);K(p,I,a),A=!1,P="",L="",I=-1,F=-1,O=-1}else if(J.has("hmd-html-begin"))z=r;else if(z>-1&&!q&&J.has("tag"))q=d.sliceString(r,a);else if(J.has("hmd-html-end")&&q&&!qV.contains(q)){var C=a,M=d.sliceString(z,C),X=d.lineAt(z),$=d.lineAt(C);u=!Xw(q);if(d.sliceString(X.from,z).trim()||d.sliceString(C,$.to).trim()||(z=X.from,C=$.to),!v(z,C))(p=new UV(n,e,M,u)).setPos(z,C),b.push(g({widget:p,block:u,side:1},z,C));z=-1,q=""}else J.has("hr")&&(v(r,a)||b.push(g({widget:AV,block:!0},r,a)));var Q=i.prop(_p);if(Q){var J,ee=Q.split(" ");if((J=new Set(ee)).has("HyperMD-callout")&&J.has("HyperMD-quote-1")&&(Y(r),U=r,_=a),J.has("HyperMD-quote")&&-1!==U&&(r-_>1?Y(r):_=a),J.has("HyperMD-table-row")&&(Y(r),r-j>1&&Z(r),-1===W&&(W=r),j=a),J.has("HyperMD-codeblock-begin")&&-1===H){var te=d.lineAt(r).text.match(yV);V="",te&&(V=te[2]),H=r}if(J.has("HyperMD-codeblock-end")&&-1!==H){var ne=H;if(H=-1,v(ne,a))return;if(($=d.lineAt(r)).number<=1)return;if((X=d.lineAt(ne)).number>=d.lines)return;var ie=d.line(X.number+1).from,re=d.line($.number-1).to,oe=d.sliceString(ie,re);if(RV.canRenderLang(V)){for(var ae=null,se=0,le=k;se<le.length;se++){var ce=le[se];if(ce.lang===V&&ce.code===oe){ae=ce,k.remove(ae);break}}ae||(ae=new RV(n,e,V,oe)),ae.setPos(ie,re),ae.lineStart=X.number-1,ae.lineEnd=$.number-1,o.push(ae),b.push(g({widget:ae,block:!0},ne,a))}else{var ue=V;try{var he=CodeMirror.findModeByName(ue);he&&"null"!==he.name&&(ue=he.name)}catch(e){}b.push(bV.range(X.from,X.to)),b.push(Yn.widget({widget:new OV(ue,oe)}).range(X.to)),b.push(kV.range($.from,$.to))}}}Y(r),Z(r)}}),Y(h.length+1),Z(h.length+1),e.tableCell&&e.tableCell.cm.hasFocus&&l.docChanged&&(l.isUserEvent("undo")||l.isUserEvent("redo"))&&!e.tableCell.table.containsSelection(u.selection)&&t.focus(),c(w),c(k),c(C),c(M),Yn.set(b,!0)};return Fe.define({create:function(){return Yn.none},update:function(e,n){var i,r=!0;if(Yh(n.state,t.viewport.to+2e3,20)||(r=!1),(gm([n],mV)||gm([n],rm)||gm([n],om))&&(r=!0),(t.composing||l||(null===(i=t.plugin(vV))||void 0===i?void 0:i.mousedown))&&(r=!1),r){l=!0;try{e=u(n)}finally{l=!1}}else e=e.map(n.changes),function(e){if(e.docChanged&&a.length)for(var t=e.changes,n=0,i=a;n<i.length;n++){var r=i[n],o=r.start,s=r.end,l=t.touchesRange(o,s);t.length<o||t.length<s||(o=t.mapPos(o),s=t.mapPos(s),r.setPos(o,s),l&&r.receiveUpdate(e,e.newDoc.slice(o,s))&&r.receiveSelection(e))}}(n);return function(e){if(e.selection&&a.length)for(var t=0,n=a;t<n.length;t++){var i=n[t];i.containedBySelection(e.selection)?i.selectTable():(i.deselectTable(),i.containsSelection(e.selection)||i.deselectCells())}}(n),e},provide:function(e){return Xo.decorations.from(e)}})}var ZV=function(e){e.dom.win.setTimeout((function(){return e.dispatch({effects:mV.of()})}),10)},XV=[Xi.define((function(e){var t={capture:!0},n=function(n){if(0===n.button){if(e.scrollDOM.scrollHeight>e.scrollDOM.clientHeight)if(n.clientX>e.scrollDOM.getBoundingClientRect().x+e.scrollDOM.clientWidth)return;var i=e.state.selection,r=e.scrollDOM.scrollTop,o=e.plugin(vV);if(o){o.mousedown=!0;var a=e.scrollDOM.doc,s=function(n){0===n.button&&(a.removeEventListener("mouseup",s,t),o.mousedown=!1,e.state.selection.eq(i)&&e.scrollDOM.scrollTop===r||e.dom.win.setTimeout((function(){e.dispatch({annotations:[lm.of(!0)],selection:e.state.selection})}),50))};a.addEventListener("mouseup",s,t)}}};return e.scrollDOM.addEventListener("mousedown",n,t),{destroy:function(){e.scrollDOM.removeEventListener("mousedown",n,t)}}})),Xo.domEventHandlers({focus:function(e,t){return ZV(t)},blur:function(e,t){return ZV(t)},mousedown:function(e){if(0===e.button&&(Ak.isModifier(e,"Mod")||!e.shiftKey&&!e.altKey)){var t=e.targetNode;if(t.instanceOf(Element)){var n=t.matchParent('[draggable="true"]');if(n){n.setAttr("contenteditable",!1);var i=e.preventDefault;return e.preventDefault=function(){e.preventDefault=i},!0}}}}})],$V=function(e){return Xi.define((function(t){var n=e.app.workspace.on("post-processor-change",(function(){return ZV(t)}));return{destroy:function(){n.e.offref(n)}}}))},QV=Xi.define((function(e){return new GV(e)}),{decorations:function(e){return e.decorations}}),JV=Xi.define((function(e){return new KV(e)}),{decorations:function(e){return e.decorations}});function ez(e,t){var n=YV(e,t);function i(e,t,i){var r=e.doc.lineAt(t.head),o=r.number+(i?1:-1);if(o<1||o>e.doc.lines)return null;var a=e.doc.line(o),s=!0,l=null;if(e.field(n).between(a.from,a.to,(function(e,t,n){if(n.spec.block)return l||e>a.from||t<a.to?(s=!1,!1):void(l||(l=n))})),!s||!l)return null;if(!l.spec.block)return null;var c=t.head-r.from;return Ee.cursor(a.from+Math.min(a.length,c),t.assoc)}function r(e,n,r){var o=e.state,a=o.selection,s=Ee.create(a.ranges.map((function(a){var s=function(a){if(!n&&!a.empty)return Ee.cursor(r?a.to:a.from);var s=e.moveVertically(a,r),l=s.head!=a.head?s:e.moveToLineBoundary(a,r);if(!r&&!n&&QD(e,a.head)){var c=t.state.field(kR);if(c&&c instanceof LY)return c.shiftFocusBefore(),l}var u=i(o,a,r);return u&&Math.abs(s.head-a.head)>Math.abs(u.head-a.head)?u:l}(a);return n&&(s=Ee.range(a.anchor,s.head,s.goalColumn)),s})),a.mainIndex);return s.eq(o.selection)||e.dispatch(o.update({selection:s,scrollIntoView:!0,userEvent:"select"})),!0}var o=Ve.high(ra.of([{key:"ArrowUp",run:function(e){return r(e,!1,!1)},shift:function(e){return r(e,!0,!1)}},{key:"ArrowDown",run:function(e){return r(e,!1,!0)},shift:function(e){return r(e,!0,!0)}}])),a=Ve.low(Xi.define((function(e){return e.getNextPosUpDown=i,{destroy:function(){delete e.getNextPosUpDown}}}))),s=[];if(Zl.isMobile){var l=mc((function(){var e=t.plugin(vV);e&&(e.mousedown=!1,t.dom.removeClass("dragging-mobile-cursor"),t.dispatch({effects:mV.of()}))}),700,!0);s.push(Xo.updateListener.of((function(e){e.docChanged?l.run():e.transactions.some((function(e){return e.isUserEvent("select")}))&&(t.plugin(vV).mousedown=!0,t.dom.addClass("dragging-mobile-cursor"),l())})))}return w(w([vV],s,!0),[QV,JV,n,o,XV,$V(e),a,DB(e,n),TB.cellSanitizerPlugin(e),TB.detectSurroundingClick(n)],!1)}var tz=function(e){function t(t,n){var i=e.call(this,t)||this;return i.onSubmit=n,i.setPlaceholder(Qf.callout.optionOtherPlaceholder()),i.setInstructions([{command:"â†‘â†“",purpose:Qf.plugins.commandPalette.instructionNavigate()},{command:"â†µ",purpose:Qf.plugins.commandPalette.instructionUse()},{command:"esc",purpose:Qf.plugins.commandPalette.instructionDismiss()}]),i.scope.register(null,"Tab",(function(){return!1})),i.scope.register(null,"Enter",(function(e){if(!e.isComposing)return i.selectActiveSuggestion(e),!1})),i}return f(t,e),t.prototype.getItemText=function(e){return e},t.prototype.getItems=function(){return fV},t.prototype.getSuggestions=function(t){var n=e.prototype.getSuggestions.call(this,t);return 0===n.length?[{item:t,match:{score:0,matches:[]}}]:n},t.prototype.onChooseItem=function(e,t){this.onSubmit(e)},t}(dV),nz=function(){function e(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}return e.prototype.tokenBefore=function(e){for(var t=Kh(this.state).resolveInner(this.pos,-1);t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null},e.prototype.matchBefore=function(e){var t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search(cz(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}},Object.defineProperty(e.prototype,"aborted",{get:function(){return null==this.abortListeners},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))},e}();function iz(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function rz(e){var t=e.map((function(e){return"string"==typeof e?{label:e}:e})),n=t.every((function(e){return/^\w+$/.test(e.label)}))?[/\w*$/,/\w+$/]:function(e){for(var t=Object.create(null),n=Object.create(null),i=0,r=e;i<r.length;i++){var o=r[i].label;t[o[0]]=!0;for(var a=1;a<o.length;a++)n[o[a]]=!0}var s=iz(t)+iz(n)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(t),i=n[0],r=n[1];return function(e){var n=e.matchBefore(r);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:i}:null}}function oz(e,t){return function(n){for(var i=Kh(n.state).resolveInner(n.pos,-1);i;i=i.parent){if(e.indexOf(i.name)>-1)return t(n);if(i.type.isTop)break}return null}}function az(e,t){return function(n){for(var i=Kh(n.state).resolveInner(n.pos,-1);i;i=i.parent){if(e.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return t(n)}}var sz=function(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i};function lz(e){return e.selection.main.from}function cz(e,t){var n,i=e.source,r=t&&"^"!=i[0],o="$"!=i[i.length-1];return r||o?new RegExp("".concat(r?"^":"","(?:").concat(i,")").concat(o?"$":""),null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}var uz=Je.define();function hz(e,t,n,i){var r=e.selection.main,o=n-r.from,a=i-r.from;return Object.assign(Object.assign({},e.changeByRange((function(s){if(s!=r&&n!=i&&e.sliceDoc(s.from+o,s.from+a)!=e.sliceDoc(n,i))return{range:s};var l=e.toText(t);return{changes:{from:s.from+o,to:i==r.from?s.to:s.from+a,insert:l},range:Ee.cursor(s.from+o+l.length)}}))),{scrollIntoView:!0,userEvent:"input.complete"})}var dz=new WeakMap;function pz(e){if(!Array.isArray(e))return e;var t=dz.get(e);return t||dz.set(e,t=rz(e)),t}var fz=nt.define(),mz=nt.define(),vz=function(){function e(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(var t=0;t<e.length;){var n=ue(e,t),i=de(n);this.chars.push(n);var r=e.slice(t,t+i),o=r.toUpperCase();this.folded.push(ue(o==r?r.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}return e.prototype.ret=function(e,t){return this.score=e,this.matched=t,this},e.prototype.match=function(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;var t=this,n=t.chars,i=t.folded,r=t.any,o=t.precise,a=t.byWord;if(1==n.length){var s=ue(e,0),l=de(s),c=l==e.length?0:-100;if(s==n[0]);else{if(s!=i[0])return null;c+=-200}return this.ret(c,[0,l])}var u=e.indexOf(this.pattern);if(0==u)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);var h=n.length,d=0;if(u<0){for(var p=0,f=Math.min(e.length,200);p<f&&d<h;){(E=ue(e,p))!=n[d]&&E!=i[d]||(r[d++]=p),p+=de(E)}if(d<h)return null}for(var m=0,v=0,g=!1,y=0,b=-1,w=-1,k=/[a-z]/.test(e),C=!0,M=(p=0,f=Math.min(e.length,200),0);p<f&&v<h;){var E=ue(e,p);u<0&&(m<h&&E==n[m]&&(o[m++]=p),y<h&&(E==n[y]||E==i[y]?(0==y&&(b=p),w=p+1,y++):y=0));var S=void 0,x=E<255?E>=48&&E<=57||E>=97&&E<=122?2:E>=65&&E<=90?1:0:(S=he(E))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!p||1==x&&k||0==M&&0!=x)&&(n[v]==E||i[v]==E&&(g=!0)?a[v++]=p:a.length&&(C=!1)),M=x,p+=de(E)}return v==h&&0==a[0]&&C?this.result((g?-200:0)-100,a,e):y==h&&0==b?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):u>-1?this.ret(-700-e.length,[u,u+this.pattern.length]):y==h?this.ret(-900-e.length,[b,w]):v==h?this.result((g?-200:0)-100-700+(C?0:-1100),a,e):2==n.length?null:this.result((r[0]?-700:0)-200-1100,r,e)},e.prototype.result=function(e,t,n){for(var i=[],r=0,o=0,a=t;o<a.length;o++){var s=a[o],l=s+(this.astral?de(ue(n,s)):1);r&&i[r-1]==s?i[r-1]=l:(i[r++]=s,i[r++]=l)}return this.ret(e-n.length,i)},e}(),gz=function(){function e(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}return e.prototype.match=function(e){if(e.length<this.pattern.length)return null;var t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)},e}(),yz=Te.define({combine:function(e){return mt(e,{activateOnTyping:!0,activateOnCompletion:function(){return!1},activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:function(){return""},optionClass:function(){return""},aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:wz,filterStrict:!1,compareCompletions:function(e,t){return e.label.localeCompare(t.label)},interactionDelay:75,updateSyncTime:100},{defaultKeymap:function(e,t){return e&&t},closeOnBlur:function(e,t){return e&&t},icons:function(e,t){return e&&t},tooltipClass:function(e,t){return function(n){return bz(e(n),t(n))}},optionClass:function(e,t){return function(n){return bz(e(n),t(n))}},addToOptions:function(e,t){return e.concat(t)},filterStrict:function(e,t){return e||t}})}});function bz(e,t){return e?t?e+" "+t:e:t}function wz(e,t,n,i,r,o){var a,s,l=e.textDirection==ai.RTL,c=l,u=!1,h="top",d=t.left-r.left,p=r.right-t.right,f=i.right-i.left,m=i.bottom-i.top;if(c&&d<Math.min(f,p)?c=!1:!c&&p<Math.min(f,d)&&(c=!0),f<=(c?d:p))a=Math.max(r.top,Math.min(n.top,r.bottom-m))-t.top,s=Math.min(400,c?d:p);else{u=!0,s=Math.min(400,(l?t.right:r.right-t.left)-30);var v=r.bottom-t.bottom;v>=m||v>t.top?a=n.bottom-t.top:(h="bottom",a=t.bottom-n.top)}var g=(t.bottom-t.top)/o.offsetHeight,y=(t.right-t.left)/o.offsetWidth;return{style:"".concat(h,": ").concat(a/g,"px; max-width: ").concat(s/y,"px"),class:"cm-completionInfo-"+(u?l?"left-narrow":"right-narrow":c?"left":"right")}}function kz(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){var i=Math.floor(t/n);return{from:i*n,to:(i+1)*n}}var r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}var Cz=function(){function e(e,t,n){var i=this;this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:function(){return i.measureInfo()},write:function(e){return i.placeInfo(e)},key:this},this.space=null,this.currentClass="";var r=e.state.field(t),o=r.open,a=o.options,s=o.selected,l=e.state.facet(yz);this.optionContent=function(e){var t=e.addToOptions.slice();return e.icons&&t.push({render:function(e){var t,n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&(t=n.classList).add.apply(t,e.type.split(/\s+/g).map((function(e){return"cm-completionIcon-"+e}))),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render:function(e,t,n,i){var r=document.createElement("span");r.className="cm-completionLabel";for(var o=e.displayLabel||e.label,a=0,s=0;s<i.length;){var l=i[s++],c=i[s++];l>a&&r.appendChild(document.createTextNode(o.slice(a,l)));var u=r.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(o.slice(l,c))),u.className="cm-completionMatchedText",a=c}return a<o.length&&r.appendChild(document.createTextNode(o.slice(a))),r},position:50},{render:function(e){if(!e.detail)return null;var t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((function(e,t){return e.position-t.position})).map((function(e){return e.render}))}(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=kz(a.length,s,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(function(n){for(var r=e.state.field(t).open.options,o=n.target,a=void 0;o&&o!=i.dom;o=o.parentNode)if("LI"==o.nodeName&&(a=/-(\d+)$/.exec(o.id))&&+a[1]<r.length)return i.applyCompletion(e,r[+a[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(function(t){var n=e.state.field(i.stateField,!1);n&&n.tooltip&&e.state.facet(yz).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:mz.of(null)})})),this.showOptions(a,r.id)}return e.prototype.mount=function(){this.updateSel()},e.prototype.showOptions=function(e,t){var n=this;this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",(function(){n.info&&n.view.requestMeasure(n.placeInfoReq)}))},e.prototype.update=function(e){var t,n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){var r=n.open,o=r.options,a=r.selected,s=r.disabled;i.open&&i.open.options==o||(this.range=kz(o.length,a,e.state.facet(yz).maxRenderedOptions),this.showOptions(o,n.id)),this.updateSel(),s!=(null===(t=i.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}},e.prototype.updateTooltipClass=function(e){var t=this.tooltipClass(e);if(t!=this.currentClass){for(var n=0,i=this.currentClass.split(" ");n<i.length;n++){(a=i[n])&&this.dom.classList.remove(a)}for(var r=0,o=t.split(" ");r<o.length;r++){var a;(a=o[r])&&this.dom.classList.add(a)}this.currentClass=t}},e.prototype.positioned=function(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)},e.prototype.updateSel=function(){var e=this,t=this.view.state.field(this.stateField),n=t.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=kz(n.options.length,n.selected,this.view.state.facet(yz).maxRenderedOptions),this.showOptions(n.options,t.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();var i=n.options[n.selected].completion,r=i.info;if(!r)return;var o="string"==typeof r?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then((function(n){n&&e.view.state.field(e.stateField,!1)==t&&e.addInfoPane(n,i)})).catch((function(t){return Gi(e.view.state,t,"completion info")})):this.addInfoPane(o,i)}},e.prototype.addInfoPane=function(e,t){this.destroyInfo();var n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{var i=e.dom,r=e.destroy;n.appendChild(i),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)},e.prototype.updateSelectedOption=function(e){for(var t=null,n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)"LI"==n.nodeName&&n.id?i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):i--;return t&&function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=n.height/e.offsetHeight;i.top<n.top?e.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(e.scrollTop+=(i.bottom-n.bottom)/r)}(this.list,t),t},e.prototype.measureInfo=function(){var e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;var t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){var o=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(yz).positionInfo(this.view,t,i,n,r,this.dom)},e.prototype.placeInfo=function(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")},e.prototype.createListBox=function(e,t,n){var i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(var r=null,o=n.from;o<n.to;o++){var a=e[o],s=a.completion,l=a.match,c=s.section;if(c){var u="string"==typeof c?c:c.name;if(u!=r&&(o>n.from||0==n.from))if(r=u,"string"!=typeof c&&c.header)i.appendChild(c.header(c));else i.appendChild(document.createElement("completion-section")).textContent=u}var h=i.appendChild(document.createElement("li"));h.id=t+"-"+o,h.setAttribute("role","option");var d=this.optionClass(s);d&&(h.className=d);for(var p=0,f=this.optionContent;p<f.length;p++){var m=(0,f[p])(s,this.view.state,this.view,l);m&&h.appendChild(m)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i},e.prototype.destroyInfo=function(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)},e.prototype.destroy=function(){this.destroyInfo()},e}();function Mz(e,t){return function(n){return new Cz(n,e,t)}}function Ez(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}var Sz=function(){function e(e,t,n,i,r,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=o}return e.prototype.setSelected=function(t,n){return t==this.selected||t>=this.options.length?this:new e(this.options,Az(n,t),this.tooltip,this.timestamp,t,this.disabled)},e.build=function(t,n,i,r,o,a){if(r&&!a&&t.some((function(e){return e.isPending})))return r.setDisabled();var s=function(e,t){for(var n=[],i=null,r=function(e){n.push(e);var t=e.completion.section;if(t){i||(i=[]);var r="string"==typeof t?t:t.name;i.some((function(e){return e.name==r}))||i.push("string"==typeof t?{name:r}:t)}},o=t.facet(yz),a=0,s=e;a<s.length;a++){var l=s[a];if(l.hasResult()){var c=l.result.getMatch;if(!1===l.result.filter)for(var u=0,h=l.result.options;u<h.length;u++){var d=h[u];r(new sz(d,l.source,c?c(d):[],1e9-n.length))}else for(var p=t.sliceDoc(l.from,l.to),f=void 0,m=o.filterStrict?new gz(p):new vz(p),v=0,g=l.result.options;v<g.length;v++)if(d=g[v],f=m.match(d.label)){var y=d.displayLabel?c?c(d,f.matched):[]:f.matched;r(new sz(d,l.source,y,f.score+(d.boost||0)))}}}if(i){for(var b=Object.create(null),w=0,k=0,C=i.sort((function(e,t){var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(i=t.rank)&&void 0!==i?i:1e9)||(e.name<t.name?-1:1)}));k<C.length;k++)w-=1e5,b[C[k].name]=w;for(var M=0,E=n;M<E.length;M++){var S=(d=E[M]).completion.section;S&&(d.score+=b["string"==typeof S?S:S.name])}}for(var x=[],T=null,D=o.compareCompletions,A=0,L=n.sort((function(e,t){return t.score-e.score||D(e.completion,t.completion)}));A<L.length;A++){var P=L[A],I=P.completion;!T||T.label!=I.label||T.detail!=I.detail||null!=T.type&&null!=I.type&&T.type!=I.type||T.apply!=I.apply||T.boost!=I.boost?x.push(P):Ez(P.completion)>Ez(T)&&(x[x.length-1]=P),T=P.completion}return x}(t,n);if(!s.length)return r&&t.some((function(e){return e.isPending}))?r.setDisabled():null;var l=n.facet(yz).selectOnOpen?0:-1;if(r&&r.selected!=l&&-1!=r.selected)for(var c=r.options[r.selected].completion,u=0;u<s.length;u++)if(s[u].completion==c){l=u;break}return new e(s,Az(i,l),{pos:t.reduce((function(e,t){return t.hasResult()?Math.min(e,t.from):e}),1e8),create:Hz,above:o.aboveCursor},r?r.timestamp:Date.now(),l,!1)},e.prototype.map=function(t){return new e(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)},e.prototype.setDisabled=function(){return new e(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)},e}(),xz=function(){function e(e,t,n){this.active=e,this.id=t,this.open=n}return e.start=function(){return new e(Lz,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)},e.prototype.update=function(t){var n=this,i=t.state,r=i.facet(yz),o=(r.override||i.languageDataAt("autocomplete",lz(i)).map(pz)).map((function(e){return(n.active.find((function(t){return t.source==e}))||new Iz(e,n.active.some((function(e){return 0!=e.state}))?1:0)).update(t,r)}));o.length==this.active.length&&o.every((function(e,t){return e==n.active[t]}))&&(o=this.active);var a=this.open,s=t.effects.some((function(e){return e.is(Oz)}));a&&t.docChanged&&(a=a.map(t.changes)),t.selection||o.some((function(e){return e.hasResult()&&t.changes.touchesRange(e.from,e.to)}))||!function(e,t){if(e==t)return!0;for(var n=0,i=0;;){for(;n<e.length&&!e[n].hasResult();)n++;for(;i<t.length&&!t[i].hasResult();)i++;var r=n==e.length,o=i==t.length;if(r||o)return r==o;if(e[n++].result!=t[i++].result)return!1}}(o,this.active)||s?a=Sz.build(o,i,this.id,a,r,s):a&&a.disabled&&!o.some((function(e){return e.isPending}))&&(a=null),!a&&o.every((function(e){return!e.isPending}))&&o.some((function(e){return e.hasResult()}))&&(o=o.map((function(e){return e.hasResult()?new Iz(e.source,0):e})));for(var l=0,c=t.effects;l<c.length;l++){var u=c[l];u.is(Bz)&&(a=a&&a.setSelected(u.value,this.id))}return o==this.active&&a==this.open?this:new e(o,this.id,a)},Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.open?this.open.tooltip:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attrs",{get:function(){return this.open?this.open.attrs:this.active.length?Tz:Dz},enumerable:!1,configurable:!0}),e}();var Tz={"aria-autocomplete":"list"},Dz={};function Az(e,t){var n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}var Lz=[];function Pz(e,t){if(e.isUserEvent("input.complete")){var n=e.annotation(uz);if(n&&t.activateOnCompletion(n))return 12}var i=e.isUserEvent("input.type");return i&&t.activateOnTyping?5:i?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}var Iz=function(){function e(e,t,n){void 0===n&&(n=!1),this.source=e,this.state=t,this.explicit=n}return e.prototype.hasResult=function(){return!1},Object.defineProperty(e.prototype,"isPending",{get:function(){return 1==this.state},enumerable:!1,configurable:!0}),e.prototype.update=function(t,n){var i=Pz(t,n),r=this;(8&i||16&i&&this.touches(t))&&(r=new e(r.source,0)),4&i&&0==r.state&&(r=new e(this.source,1)),r=r.updateFor(t,i);for(var o=0,a=t.effects;o<a.length;o++){var s=a[o];if(s.is(fz))r=new e(r.source,1,s.value);else if(s.is(mz))r=new e(r.source,0);else if(s.is(Oz))for(var l=0,c=s.value;l<c.length;l++){var u=c[l];u.source==r.source&&(r=u)}}return r},e.prototype.updateFor=function(e,t){return this.map(e.changes)},e.prototype.map=function(e){return this},e.prototype.touches=function(e){return e.changes.touchesRange(lz(e.state))},e}(),Fz=function(e){function t(t,n,i,r,o,a){var s=e.call(this,t,3,n)||this;return s.limit=i,s.result=r,s.from=o,s.to=a,s}return f(t,e),t.prototype.hasResult=function(){return!0},t.prototype.updateFor=function(e,n){var i;if(!(3&n))return this.map(e.changes);var r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));var o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=lz(e.state);if(s>a||!r||2&n&&(lz(e.startState)==this.from||s<this.limit))return new Iz(this.source,4&n?1:0);var l=e.changes.mapPos(this.limit);return function(e,t,n,i){if(!e)return!1;var r=t.sliceDoc(n,i);return"function"==typeof e?e(r,n,i,t):cz(e,!0).test(r)}(r.validFor,e.state,o,a)?new t(this.source,this.explicit,l,r,o,a):r.update&&(r=r.update(r,o,a,new nz(e.state,s,!1)))?new t(this.source,this.explicit,l,r,r.from,null!==(i=r.to)&&void 0!==i?i:lz(e.state)):new Iz(this.source,1,this.explicit)},t.prototype.map=function(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new t(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Iz(this.source,0)},t.prototype.touches=function(e){return e.changes.touchesRange(this.from,this.to)},t}(Iz);var Oz=nt.define({map:function(e,t){return e.map((function(e){return e.map(t)}))}}),Bz=nt.define(),Nz=Fe.define({create:function(){return xz.start()},update:function(e,t){return e.update(t)},provide:function(e){return[fs.from(e,(function(e){return e.tooltip})),Xo.contentAttributes.from(e,(function(e){return e.attrs}))]}});function Rz(e,t){var n=t.completion.apply||t.completion.label,i=e.state.field(Nz).active.find((function(e){return e.source==t.source}));return i instanceof Fz&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},hz(e.state,n,i.from,i.to)),{annotations:uz.of(t.completion)})):n(e,t.completion,i.from,i.to),!0)}var Hz=Mz(Nz,Rz);function Vz(e,t){return void 0===t&&(t="option"),function(n){var i=n.state.field(Nz,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(yz).interactionDelay)return!1;var r,o=1;"page"==t&&(r=ks(n,i.open.tooltip))&&(o=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));var a=i.open.options.length,s=i.open.selected>-1?i.open.selected+o*(e?1:-1):e?0:a-1;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:Bz.of(s)}),!0}}var zz=function(e){var t=e.state.field(Nz,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(yz).interactionDelay)&&Rz(e,t.open.options[t.open.selected])},qz=function(e){return!!e.state.field(Nz,!1)&&(e.dispatch({effects:fz.of(!0)}),!0)},Uz=function(e){var t=e.state.field(Nz,!1);return!(!t||!t.active.some((function(e){return 0!=e.state})))&&(e.dispatch({effects:mz.of(null)}),!0)},_z=function(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0},Wz=Xi.fromClass(function(){function e(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(var t=0,n=e.state.field(Nz).active;t<n.length;t++){var i=n[t];i.isPending&&this.startQuery(i)}}return e.prototype.update=function(e){var t,n=this,i=e.state.field(Nz),r=e.state.facet(yz);if(e.selectionSet||e.docChanged||e.startState.field(Nz)!=i){for(var o=e.transactions.some((function(e){var t=Pz(e,r);return 8&t||(e.selection||e.docChanged)&&!(3&t)})),a=0;a<this.running.length;a++){var s=this.running[a];if(o||s.context.abortOnDocChange&&e.docChanged||s.updates.length+e.transactions.length>50&&Date.now()-s.time>1e3){for(var l=0,c=s.context.abortListeners;l<c.length;l++){var u=c[l];try{u()}catch(e){Gi(this.view.state,e)}}s.context.abortListeners=null,this.running.splice(a--,1)}else(t=s.updates).push.apply(t,e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some((function(e){return e.effects.some((function(e){return e.is(fz)}))}))&&(this.pendingStart=!0);var h=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=i.active.some((function(e){return e.isPending&&!n.running.some((function(t){return t.active.source==e.source}))}))?setTimeout((function(){return n.startUpdate()}),h):-1,0!=this.composing)for(var d=0,p=e.transactions;d<p.length;d++){var f=p[d];f.isUserEvent("input.type")?this.composing=2:2==this.composing&&f.selection&&(this.composing=3)}}},e.prototype.startUpdate=function(){var e=this;this.debounceUpdate=-1,this.pendingStart=!1;for(var t=this.view.state.field(Nz),n=function(e){e.isPending&&!i.running.some((function(t){return t.active.source==e.source}))&&i.startQuery(e)},i=this,r=0,o=t.active;r<o.length;r++){n(o[r])}this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout((function(){return e.accept()}),this.view.state.facet(yz).updateSyncTime))},e.prototype.startQuery=function(e){var t=this,n=this.view.state,i=lz(n),r=new nz(n,i,e.explicit,this.view),o=new _z(e,r);this.running.push(o),Promise.resolve(e.source(r)).then((function(e){o.context.aborted||(o.done=e||null,t.scheduleAccept())}),(function(e){t.view.dispatch({effects:mz.of(null)}),Gi(t.view.state,e)}))},e.prototype.scheduleAccept=function(){var e=this;this.running.every((function(e){return void 0!==e.done}))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((function(){return e.accept()}),this.view.state.facet(yz).updateSyncTime))},e.prototype.accept=function(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;for(var t,n=[],i=this.view.state.facet(yz),r=this.view.state.field(Nz),o=function(o){var s=a.running[o];if(void 0===s.done)return t=o,"continue";if(a.running.splice(o--,1),s.done){for(var l=lz(s.updates.length?s.updates[0].startState:a.view.state),c=Math.min(l,s.done.from+(s.active.explicit?0:1)),u=new Fz(s.active.source,s.active.explicit,c,s.done,s.done.from,null!==(e=s.done.to)&&void 0!==e?e:l),h=0,d=s.updates;h<d.length;h++){var p=d[h];u=u.update(p,i)}if(u.hasResult())return n.push(u),t=o,"continue"}var f=r.active.find((function(e){return e.source==s.active.source}));if(f&&f.isPending)if(null==s.done){u=new Iz(s.active.source,0);for(var m=0,v=s.updates;m<v.length;m++){p=v[m];u=u.update(p,i)}u.isPending||n.push(u)}else a.startQuery(f);t=o},a=this,s=0;s<this.running.length;s++)o(s),s=t;(n.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:Oz.of(n)})},e}(),{eventHandlers:{blur:function(e){var t=this,n=this.view.state.field(Nz,!1);if(n&&n.tooltip&&this.view.state.facet(yz).closeOnBlur){var i=n.open&&ks(this.view,n.open.tooltip);i&&i.dom.contains(e.relatedTarget)||setTimeout((function(){return t.view.dispatch({effects:mz.of(null)})}),10)}},compositionstart:function(){this.composing=1},compositionend:function(){var e=this;3==this.composing&&setTimeout((function(){return e.view.dispatch({effects:fz.of(!1)})}),20),this.composing=0}}}),jz="object"==typeof navigator&&/Win/.test(navigator.platform),Gz=Ve.highest(Xo.domEventHandlers({keydown:function(e,t){var n=t.state.field(Nz,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&(!jz||!e.altKey)||e.metaKey)return!1;var i=n.open.options[n.open.selected],r=n.active.find((function(e){return e.source==i.source})),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&Rz(t,i),!1}})),Kz=Xo.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ’'"}},".cm-completionIcon-class":{"&:after":{content:"'â—‹'"}},".cm-completionIcon-interface":{"&:after":{content:"'â—Œ'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð‘¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð‘¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âˆª'"}},".cm-completionIcon-property":{"&:after":{content:"'â–¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðŸ”‘ï¸Ž'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â–¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Yz=function(e,t,n,i){this.field=e,this.line=t,this.from=n,this.to=i},Zz=function(){function e(e,t,n){this.field=e,this.from=t,this.to=n}return e.prototype.map=function(t){var n=t.mapPos(this.from,-1,fe.TrackDel),i=t.mapPos(this.to,1,fe.TrackDel);return null==n||null==i?null:new e(this.field,n,i)},e}(),Xz=function(){function e(e,t){this.lines=e,this.fieldPositions=t}return e.prototype.instantiate=function(e,t){for(var n=[],i=[t],r=e.doc.lineAt(t),o=/^\s*/.exec(r.text)[0],a=0,s=this.lines;a<s.length;a++){var l=s[a];if(n.length){for(var c=o,u=/^\t*/.exec(l)[0].length,h=0;h<u;h++)c+=e.facet(ud);i.push(t+c.length-u),l=c+l.slice(u)}n.push(l),t+=l.length+1}var d=this.fieldPositions.map((function(e){return new Zz(e.field,i[e.line]+e.from,i[e.line]+e.to)}));return{text:n,ranges:d}},e.parse=function(t){for(var n,i=[],r=[],o=[],a=0,s=t.split(/\r\n?|\n/);a<s.length;a++){for(var l=s[a];n=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(l);){for(var c=n[1]?+n[1]:null,u=n[2]||n[3]||"",h=-1,d=u.replace(/\\[{}]/g,(function(e){return e[1]})),p=0;p<i.length;p++)(null!=c?i[p].seq==c:d&&i[p].name==d)&&(h=p);if(h<0){for(p=0;p<i.length&&(null==c||null!=i[p].seq&&i[p].seq<c);)p++;i.splice(p,0,{seq:c,name:d}),h=p;for(var f=0,m=o;f<m.length;f++){var v=m[f];v.field>=h&&v.field++}}o.push(new Yz(h,r.length,n.index,n.index+d.length)),l=l.slice(0,n.index)+u+l.slice(n.index+n[0].length)}l=l.replace(/\\([{}])/g,(function(e,t,n){for(var i=0,a=o;i<a.length;i++){var s=a[i];s.line==r.length&&s.from>n&&(s.from--,s.to--)}return t})),r.push(l)}return new e(r,o)},e}(),$z=Yn.widget({widget:new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},t.prototype.ignoreEvent=function(){return!1},t}(Gn))}),Qz=Yn.mark({class:"cm-snippetField"}),Jz=function(){function e(e,t){this.ranges=e,this.active=t,this.deco=Yn.set(e.map((function(e){return(e.from==e.to?$z:Qz).range(e.from,e.to)})))}return e.prototype.map=function(t){for(var n=[],i=0,r=this.ranges;i<r.length;i++){var o=r[i].map(t);if(!o)return null;n.push(o)}return new e(n,this.active)},e.prototype.selectionInsideField=function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field==t.active&&n.from<=e.from&&n.to>=e.to}))}))},e}(),eq=nt.define({map:function(e,t){return e&&e.map(t)}}),tq=nt.define(),nq=Fe.define({create:function(){return null},update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];if(r.is(eq))return r.value;if(r.is(tq)&&e)return new Jz(e.ranges,r.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:function(e){return Xo.decorations.from(e,(function(e){return e?e.deco:Yn.none}))}});function iq(e,t){return Ee.create(e.filter((function(e){return e.field==t})).map((function(e){return Ee.range(e.from,e.to)})))}function rq(e){var t=Xz.parse(e);return function(e,n,i,r){var o=t.instantiate(e.state,i),a=o.text,s=o.ranges,l=e.state.selection.main,c={changes:{from:i,to:r==l.from?l.to:r,insert:J.of(a)},scrollIntoView:!0,annotations:n?[uz.of(n),it.userEvent.of("input.complete")]:void 0};if(s.length&&(c.selection=iq(s,0)),s.some((function(e){return e.field>0}))){var u=new Jz(s,0),h=c.effects=[eq.of(u)];void 0===e.state.field(nq,!1)&&h.push(nt.appendConfig.of([nq,pq,mq,Kz]))}e.dispatch(e.state.update(c))}}function oq(e){return function(t){var n=t.state,i=t.dispatch,r=n.field(nq,!1);if(!r||e<0&&0==r.active)return!1;var o=r.active+e,a=e>0&&!r.ranges.some((function(t){return t.field==o+e}));return i(n.update({selection:iq(r.ranges,o),effects:eq.of(a?null:new Jz(r.ranges,o)),scrollIntoView:!0})),!0}}var aq=function(e){var t=e.state,n=e.dispatch;return!!t.field(nq,!1)&&(n(t.update({effects:eq.of(null)})),!0)},sq=oq(1),lq=oq(-1);function cq(e){var t=e.field(nq,!1);return!(!t||!t.ranges.some((function(e){return e.field==t.active+1})))}function uq(e){var t=e.field(nq,!1);return!!(t&&t.active>0)}var hq=[{key:"Tab",run:sq,shift:lq},{key:"Escape",run:aq}],dq=Te.define({combine:function(e){return e.length?e[0]:hq}}),pq=Ve.highest(ra.compute([dq],(function(e){return e.facet(dq)})));function fq(e,t){return Object.assign(Object.assign({},t),{apply:rq(e)})}var mq=Xo.domEventHandlers({mousedown:function(e,t){var n,i=t.state.field(nq,!1);if(!i||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var r=i.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!r||r.field==i.active)&&(t.dispatch({selection:iq(i.ranges,r.field),effects:eq.of(i.ranges.some((function(e){return e.field>r.field}))?new Jz(i.ranges,r.field):null),scrollIntoView:!0}),!0)}});function vq(e,t){return new RegExp(t(e.source),e.unicode?"u":"")}var gq=Object.create(null);function yq(e,t,n,i,r){for(var o=e.iterLines(),a=0;!o.next().done;){var s=o.value,l=void 0;for(t.lastIndex=0;l=t.exec(s);)if(!i[l[0]]&&a+l.index!=r&&(n.push({type:"text",label:l[0]}),i[l[0]]=!0,n.length>=2e3))return;a+=s.length+1}}function bq(e,t,n,i,r){var o=e.length>=1e3,a=o&&t.get(e);if(a)return a;var s=[],l=Object.create(null);if(e.children)for(var c=0,u=0,h=e.children;u<h.length;u++){var d=h[u];if(d.length>=1e3)for(var p=0,f=bq(d,t,n,i-c,r-c);p<f.length;p++){var m=f[p];l[m.label]||(l[m.label]=!0,s.push(m))}else yq(d,n,s,l,r-c);c+=d.length+1}else yq(e,n,s,l,r);return o&&s.length<2e3&&t.set(e,s),s}var wq=function(e){var t=e.state.languageDataAt("wordChars",e.pos).join(""),n=function(e){var t=e.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp("[\\p{Alphabetic}\\p{Number}_".concat(t,"]+"),"ug")}catch(e){return new RegExp("[w".concat(t,"]"),"g")}}(t),i=e.matchBefore(vq(n,(function(e){return e+"$"})));if(!i&&!e.explicit)return null;var r=i?i.from:e.pos,o=bq(e.state.doc,function(e){return gq[e]||(gq[e]=new WeakMap)}(t),n,5e4,r);return{from:r,options:o,validFor:vq(n,(function(e){return"^"+e}))}},kq={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Cq=nt.define({map:function(e,t){var n=t.mapPos(e,-1,fe.TrackAfter);return null==n?void 0:n}}),Mq=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(vt));Mq.startSide=1,Mq.endSide=-1;var Eq=Fe.define({create:function(){return wt.empty},update:function(e,t){if(e=e.map(t.changes),t.selection){var n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:function(e){return e>=n.from&&e<=n.to}})}for(var i=0,r=t.effects;i<r.length;i++){var o=r[i];o.is(Cq)&&(e=e.update({add:[Mq.range(o.value,o.value+1)]}))}return e}});function Sq(){return[Lq,Eq]}var xq="()[]{}<>";function Tq(e){for(var t=0;t<xq.length;t+=2)if(xq.charCodeAt(t)==e)return xq.charAt(t+1);return he(e<128?e:e+1)}function Dq(e,t){return e.languageDataAt("closeBrackets",t)[0]||kq}var Aq="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Lq=Xo.inputHandler.of((function(e,t,n,i){if((Aq?e.composing:e.compositionStarted)||e.state.readOnly)return!1;var r=e.state.selection.main;if(i.length>2||2==i.length&&1==de(ue(i,0))||t!=r.from||n!=r.to)return!1;var o=Fq(e.state,i);return!!o&&(e.dispatch(o),!0)})),Pq=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=Dq(t,t.selection.main.head).brackets||kq.brackets,r=null,o=t.changeByRange((function(e){if(e.empty)for(var n=function(e,t){var n=e.sliceString(t-2,t);return de(ue(n,0))==n.length?n:n.slice(1)}(t.doc,e.head),o=0,a=i;o<a.length;o++){var s=a[o];if(s==n&&Bq(t.doc,e.head)==Tq(ue(s,0)))return{changes:{from:e.head-s.length,to:e.head+s.length},range:Ee.cursor(e.head-s.length)}}return{range:r=e}}));return r||n(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},Iq=[{key:"Backspace",run:Pq}];function Fq(e,t){for(var n=Dq(e,e.selection.main.head),i=n.brackets||kq.brackets,r=0,o=i;r<o.length;r++){var a=o[r],s=Tq(ue(a,0));if(t==a)return s==a?Hq(e,a,i.indexOf(a+a+a)>-1,n):Nq(e,a,s,n.before||kq.before);if(t==s&&Oq(e,e.selection.main.from))return Rq(e,a,s)}return null}function Oq(e,t){var n=!1;return e.field(Eq).between(0,e.doc.length,(function(e){e==t&&(n=!0)})),n}function Bq(e,t){var n=e.sliceString(t,t+2);return n.slice(0,de(ue(n,0)))}function Nq(e,t,n,i){var r=null,o=e.changeByRange((function(o){if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:Cq.of(o.to+t.length),range:Ee.range(o.anchor+t.length,o.head+t.length)};var a=Bq(e.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:t+n,from:o.head},effects:Cq.of(o.head+t.length),range:Ee.cursor(o.head+t.length)}:{range:r=o}}));return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Rq(e,t,n){var i=null,r=e.changeByRange((function(t){return t.empty&&Bq(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:Ee.cursor(t.head+n.length)}:i={range:t}}));return i?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Hq(e,t,n,i){var r=i.stringPrefixes||kq.stringPrefixes,o=null,a=e.changeByRange((function(i){if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:Cq.of(i.to+t.length),range:Ee.range(i.anchor+t.length,i.head+t.length)};var a,s=i.head,l=Bq(e.doc,s);if(l==t){if(Vq(e,s))return{changes:{insert:t+t,from:s},effects:Cq.of(s+t.length),range:Ee.cursor(s+t.length)};if(Oq(e,s)){var c=n&&e.sliceDoc(s,s+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:s,to:s+c.length,insert:c},range:Ee.cursor(s+c.length)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&(a=zq(e,s-2*t.length,r))>-1&&Vq(e,a))return{changes:{insert:t+t+t+t,from:s},effects:Cq.of(s+t.length),range:Ee.cursor(s+t.length)};if(e.charCategorizer(s)(l)!=ht.Word&&zq(e,s,r)>-1&&!function(e,t,n,i){for(var r=Kh(e).resolveInner(t,-1),o=i.reduce((function(e,t){return Math.max(e,t.length)}),0),a=0;a<5;a++){var s=e.sliceDoc(r.from,Math.min(r.to,r.from+n.length+o)),l=s.indexOf(n);if(!l||l>-1&&i.indexOf(s.slice(0,l))>-1){for(var c=r.firstChild;c&&c.from==r.from&&c.to-c.from>n.length+l;){if(e.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}var u=r.to==t&&r.parent;if(!u)break;r=u}return!1}(e,s,t,r))return{changes:{insert:t+t,from:s},effects:Cq.of(s+t.length),range:Ee.cursor(s+t.length)}}return{range:o=i}}));return o?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Vq(e,t){var n=Kh(e).resolveInner(t+1);return n.parent&&n.from==t}function zq(e,t,n){var i=e.charCategorizer(t);if(i(e.sliceDoc(t-1,t))!=ht.Word)return t;for(var r=0,o=n;r<o.length;r++){var a=o[r],s=t-a.length;if(e.sliceDoc(s,t)==a&&i(e.sliceDoc(s-1,s))!=ht.Word)return s}return-1}function qq(e){return void 0===e&&(e={}),[Gz,Nz,yz.of(e),Wz,_q,Kz]}var Uq=[{key:"Ctrl-Space",run:qz},{mac:"Alt-`",run:qz},{key:"Escape",run:Uz},{key:"ArrowDown",run:Vz(!0)},{key:"ArrowUp",run:Vz(!1)},{key:"PageDown",run:Vz(!0,"page")},{key:"PageUp",run:Vz(!1,"page")},{key:"Enter",run:zz}],_q=Ve.highest(ra.computeN([yz],(function(e){return e.facet(yz).defaultKeymap?[Uq]:[]})));function Wq(e){var t=e.field(Nz,!1);return t&&t.active.some((function(e){return e.isPending}))?"pending":t&&t.active.some((function(e){return 0!=e.state}))?"active":null}var jq=new WeakMap;function Gq(e){var t,n=null===(t=e.field(Nz,!1))||void 0===t?void 0:t.open;if(!n||n.disabled)return[];var i=jq.get(n.options);return i||jq.set(n.options,i=n.options.map((function(e){return e.completion}))),i}function Kq(e){var t,n=null===(t=e.field(Nz,!1))||void 0===t?void 0:t.open;return n&&!n.disabled&&n.selected>=0?n.options[n.selected].completion:null}function Yq(e){var t,n=null===(t=e.field(Nz,!1))||void 0===t?void 0:t.open;return n&&!n.disabled&&n.selected>=0?n.selected:null}function Zq(e){return Bz.of(e)}var Xq=function(e,t,n,i){this.origin=e,this.changes=t,this.effects=n,this.clientID=i},$q=function(e,t){this.version=e,this.unconfirmed=t},Qq=Te.define({combine:function(e){var t=mt(e,{startVersion:0,clientID:null,sharedEffects:function(){return[]}},{generatedID:function(e){return e}});return null==t.clientID&&(t.clientID=e.length&&e[0].generatedID||""),t}}),Jq=Je.define(),eU=Fe.define({create:function(e){return new $q(e.facet(Qq).startVersion,[])},update:function(e,t){var n=t.annotation(Jq);if(n)return n;var i=t.startState.facet(Qq),r=i.sharedEffects,o=i.clientID,a=r(t);return a.length||!t.changes.empty?new $q(e.version,e.unconfirmed.concat(new Xq(t,t.changes,a,o))):e}});function tU(e){return void 0===e&&(e={}),[eU,Qq.of(Object.assign({generatedID:Math.floor(1e9*Math.random()).toString(36)},e))]}function nU(e,t){var n=e.field(eU),i=n.version,r=n.unconfirmed,o=e.facet(Qq).clientID;i+=t.length;for(var a=[],s=null,l=0,c=0,u=t;c<u.length;c++){var h=u[c],d=l<r.length?r[l]:null;d&&d.clientID==h.clientID?(s&&(s=s.map(d.changes,!0)),a=nt.mapEffects(a,h.changes),l++):(a=nt.mapEffects(a,h.changes),h.effects&&(a=a.concat(h.effects)),s=s?s.compose(h.changes):h.changes)}if(l&&(r=r.slice(l)),r.length&&(s&&(r=r.map((function(e){var t=e.changes.map(s);return s=s.map(e.changes,!0),new Xq(e.origin,t,nt.mapEffects(e.effects,s),o)}))),a.length)){var p=r.reduce((function(e,t){return e.compose(t.changes)}),ve.empty(r[0].changes.length));a=nt.mapEffects(a,p)}return s?e.update({changes:s,effects:a,annotations:[it.addToHistory.of(!1),it.remote.of(!0),Jq.of(new $q(i,r))],filter:!1}):e.update({annotations:[Jq.of(new $q(i,r))]})}function iU(e){return e.field(eU).unconfirmed}function rU(e){return e.field(eU).version}function oU(e){return e.facet(Qq).clientID}function aU(e,t){if(!t.length||!e.length)return e;for(var n=null,i=0,r=0,o=t;r<o.length;r++){var a=o[r],s=i<e.length?e[i]:null;s&&s.clientID==a.clientID?(n&&(n=n.mapDesc(s.changes,!0)),i++):n=n?n.composeDesc(a.changes):a.changes}return i&&(e=e.slice(i)),n?e.map((function(e){var t=e.changes.map(n);return n=n.mapDesc(e.changes,!0),{changes:t,effects:e.effects&&nt.mapEffects(e.effects,n),clientID:e.clientID}})):e}var sU=function(e,t,n){this.from=e,this.to=t,this.diagnostic=n},lU=function(){function e(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}return e.init=function(t,n,i){var r=t,o=i.facet(TU).markerFilter;o&&(r=o(r,i));for(var a,s=t.slice().sort((function(e,t){return e.from-t.from||e.to-t.to})),l=new kt,c=[],u=0,h=function(e){var t=e==s.length?null:s[e];if(!t&&!c.length)return a=e,"break";var n,r=void 0;for(c.length?(r=u,n=c.reduce((function(e,t){return Math.min(e,t.to)}),t&&t.from>r?t.from:1e8)):(r=t.from,n=t.to,c.push(t),e++);e<s.length;){var o=s[e];if(o.from!=r||!(o.to>o.from||o.to==r)){n=Math.min(o.from,n);break}c.push(o),e++,n=Math.min(o.to,n)}var h=VU(c);if(c.some((function(e){return e.from==e.to||e.from==e.to-1&&i.doc.lineAt(e.from).to==e.from})))l.add(r,r,Yn.widget({widget:new IU(h),diagnostics:c.slice()}));else{var d=c.reduce((function(e,t){return t.markClass?e+" "+t.markClass:e}),"");l.add(r,n,Yn.mark({class:"cm-lintRange cm-lintRange-"+h+d,diagnostics:c.slice(),inclusiveEnd:c.some((function(e){return e.to>n}))}))}u=n;for(var p=0;p<c.length;p++)c[p].to<=u&&c.splice(p--,1);a=e},d=0;;){var p=h(d);if(d=a,"break"===p)break}var f=l.finish();return new e(f,n,cU(f))},e}();function cU(e,t,n){void 0===t&&(t=null),void 0===n&&(n=0);var i=null;return e.between(n,1e9,(function(e,n,r){var o=r.spec;if(!(t&&o.diagnostics.indexOf(t)<0))if(i){if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new sU(i.from,n,i.diagnostic)}else i=new sU(e,n,t||o.diagnostics[0])})),i}function uU(e,t){var n=t.pos,i=t.end||n,r=e.state.facet(TU).hideOn(e,n,i);if(null!=r)return r;var o=e.startState.doc.lineAt(t.pos);return!(!e.effects.some((function(e){return e.is(pU)}))&&!e.changes.touchesRange(o.from,Math.max(o.to,i)))}function hU(e,t){return e.field(vU,!1)?t:t.concat(nt.appendConfig.of(KU))}function dU(e,t){return{effects:hU(e,[pU.of(t)])}}var pU=nt.define(),fU=nt.define(),mU=nt.define(),vU=Fe.define({create:function(){return new lU(Yn.none,null,null)},update:function(e,t){if(t.docChanged&&e.diagnostics.size){var n=e.diagnostics.map(t.changes),i=null,r=e.panel;if(e.selected){var o=t.changes.mapPos(e.selected.from,1);i=cU(n,e.selected.diagnostic,o)||cU(n,null,o)}!n.size&&r&&t.state.facet(TU).autoPanel&&(r=null),e=new lU(n,r,i)}for(var a=0,s=t.effects;a<s.length;a++){var l=s[a];if(l.is(pU)){r=t.state.facet(TU).autoPanel?l.value.length?OU.open:null:e.panel;e=lU.init(l.value,r,t.state)}else l.is(fU)?e=new lU(e.diagnostics,l.value?OU.open:null,e.selected):l.is(mU)&&(e=new lU(e.diagnostics,e.panel,l.value))}return e},provide:function(e){return[Is.from(e,(function(e){return e.panel})),Xo.decorations.from(e,(function(e){return e.diagnostics}))]}});function gU(e){var t=e.field(vU,!1);return t?t.diagnostics.size:0}var yU=Yn.mark({class:"cm-lintRange cm-lintRange-active"});function bU(e,t,n){var i,r=e.state.field(vU).diagnostics,o=-1,a=-1;r.between(t-(n<0?1:0),t+(n>0?1:0),(function(e,r,s){var l=s.spec;if(t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0)))return i=l.diagnostics,o=e,a=r,!1}));var s=e.state.facet(TU).tooltipFilter;return i&&s&&(i=s(i,e.state)),i?{pos:o,end:a,above:e.state.doc.lineAt(o).to<a,create:function(){return{dom:wU(e,i)}}}:null}function wU(e,t){return qy("ul",{class:"cm-tooltip-lint"},t.map((function(t){return PU(e,t,!1)})))}var kU=function(e){var t=e.state.field(vU,!1);t&&t.panel||e.dispatch({effects:hU(e.state,[fU.of(!0)])});var n=Ds(e,OU.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},CU=function(e){var t=e.state.field(vU,!1);return!(!t||!t.panel)&&(e.dispatch({effects:fU.of(!1)}),!0)},MU=function(e){var t=e.state.field(vU,!1);if(!t)return!1;var n=e.state.selection.main,i=t.diagnostics.iter(n.to+1);return!(!i.value&&(!(i=t.diagnostics.iter(0)).value||i.from==n.from&&i.to==n.to))&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},EU=function(e){var t=e.state,n=t.field(vU,!1);if(!n)return!1;var i,r,o,a,s=t.selection.main;return n.diagnostics.between(0,t.doc.length,(function(e,t){t<s.to&&(null==i||i<e)&&(i=e,r=t),(null==o||e>o)&&(o=e,a=t)})),null!=o&&(null!=i||o!=s.from)&&(e.dispatch({selection:{anchor:null!=i?i:o,head:null!=r?r:a},scrollIntoView:!0}),!0)},SU=[{key:"Mod-Shift-m",run:kU,preventDefault:!0},{key:"F8",run:MU}],xU=Xi.fromClass(function(){function e(e){this.view=e,this.timeout=-1,this.set=!0;var t=e.state.facet(TU).delay;this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}return e.prototype.run=function(){var e=this;clearTimeout(this.timeout);var t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;var n=this.view.state,i=n.facet(TU).sources;i.length&&function(e,t,n){for(var i=[],r=-1,o=0,a=e;o<a.length;o++){a[o].then((function(n){i.push(n),clearTimeout(r),i.length==e.length?t(i):r=setTimeout((function(){return t(i)}),200)}),n)}}(i.map((function(t){return Promise.resolve(t(e.view))})),(function(t){e.view.state.doc==n.doc&&e.view.dispatch(dU(e.view.state,t.reduce((function(e,t){return e.concat(t)}))))}),(function(t){Gi(e.view.state,t)}))}},e.prototype.update=function(e){var t=e.state.facet(TU);(e.docChanged||t!=e.startState.facet(TU)||t.needsRefresh&&t.needsRefresh(e))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))},e.prototype.force=function(){this.set&&(this.lintTime=Date.now(),this.run())},e.prototype.destroy=function(){clearTimeout(this.timeout)},e}());var TU=Te.define({combine:function(e){return Object.assign({sources:e.map((function(e){return e.source})).filter((function(e){return null!=e}))},mt(e.map((function(e){return e.config})),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:function(){return null}},{needsRefresh:function(e,t){return e?t?function(n){return e(n)||t(n)}:e:t}}))}});function DU(e,t){return void 0===t&&(t={}),[TU.of({source:e,config:t}),xU,KU]}function AU(e){var t=e.plugin(xU);t&&t.force()}function LU(e){var t=[];if(e)e:for(var n=0,i=e;n<i.length;n++){for(var r=i[n].name,o=function(e){var n=r[e];if(/[a-zA-Z]/.test(n)&&!t.some((function(e){return e.toLowerCase()==n.toLowerCase()})))return t.push(n),"continue-actions"},a=0;a<r.length;a++){if("continue-actions"===o(a))continue e}t.push("")}return t}function PU(e,t,n){var i,r=n?LU(t.actions):[];return qy("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},qy("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(i=t.actions)||void 0===i?void 0:i.map((function(n,i){var o=!1,a=function(i){if(i.preventDefault(),!o){o=!0;var r=cU(e.state.field(vU).diagnostics,t);r&&n.apply(e,r.from,r.to)}},s=n.name,l=r[i]?s.indexOf(r[i]):-1,c=l<0?s:[s.slice(0,l),qy("u",s.slice(l,l+1)),s.slice(l+1)];return qy("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":" Action: ".concat(s).concat(l<0?"":' (access key "'.concat(r[i],')"'),".")},c)})),t.source&&qy("div",{class:"cm-diagnosticSource"},t.source))}var IU=function(e){function t(t){var n=e.call(this)||this;return n.sev=t,n}return f(t,e),t.prototype.eq=function(e){return e.sev==this.sev},t.prototype.toDOM=function(){return qy("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})},t}(Gn),FU=function(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=PU(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")},OU=function(){function e(e){var t=this;this.view=e,this.items=[];this.list=qy("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:function(n){if(27==n.keyCode)CU(t.view),t.view.focus();else if(38==n.keyCode||33==n.keyCode)t.moveSelection((t.selectedIndex-1+t.items.length)%t.items.length);else if(40==n.keyCode||34==n.keyCode)t.moveSelection((t.selectedIndex+1)%t.items.length);else if(36==n.keyCode)t.moveSelection(0);else if(35==n.keyCode)t.moveSelection(t.items.length-1);else if(13==n.keyCode)t.view.focus();else{if(!(n.keyCode>=65&&n.keyCode<=90&&t.selectedIndex>=0))return;for(var i=t.items[t.selectedIndex].diagnostic,r=LU(i.actions),o=0;o<r.length;o++)if(r[o].toUpperCase().charCodeAt(0)==n.keyCode){var a=cU(t.view.state.field(vU).diagnostics,i);a&&i.actions[o].apply(e,a.from,a.to)}}n.preventDefault()},onclick:function(e){for(var n=0;n<t.items.length;n++)t.items[n].dom.contains(e.target)&&t.moveSelection(n)}}),this.dom=qy("div",{class:"cm-panel-lint"},this.list,qy("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:function(){return CU(t.view)}},"Ã—")),this.update()}return Object.defineProperty(e.prototype,"selectedIndex",{get:function(){var e=this.view.state.field(vU).selected;if(!e)return-1;for(var t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1},enumerable:!1,configurable:!0}),e.prototype.update=function(){var e=this,t=this.view.state.field(vU),n=t.diagnostics,i=t.selected,r=0,o=!1,a=null,s=new Set;for(n.between(0,this.view.state.doc.length,(function(t,n,l){for(var c=0,u=l.spec.diagnostics;c<u.length;c++){var h=u[c];if(!s.has(h)){s.add(h);for(var d=-1,p=void 0,f=r;f<e.items.length;f++)if(e.items[f].diagnostic==h){d=f;break}d<0?(p=new FU(e.view,h),e.items.splice(r,0,p),o=!0):(p=e.items[d],d>r&&(e.items.splice(r,d-r),o=!0)),i&&p.diagnostic==i.diagnostic?p.dom.hasAttribute("aria-selected")||(p.dom.setAttribute("aria-selected","true"),a=p):p.dom.hasAttribute("aria-selected")&&p.dom.removeAttribute("aria-selected"),r++}}}));r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new FU(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:function(){return{sel:a.dom.getBoundingClientRect(),panel:e.list.getBoundingClientRect()}},write:function(t){var n=t.sel,i=t.panel,r=i.height/e.list.offsetHeight;n.top<i.top?e.list.scrollTop-=(i.top-n.top)/r:n.bottom>i.bottom&&(e.list.scrollTop+=(n.bottom-i.bottom)/r)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()},e.prototype.sync=function(){var e=this.list.firstChild;function t(){var t=e;e=t.nextSibling,t.remove()}for(var n=0,i=this.items;n<i.length;n++){var r=i[n];if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e)}for(;e;)t()},e.prototype.moveSelection=function(e){if(!(this.selectedIndex<0)){var t=cU(this.view.state.field(vU).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:mU.of(t)})}},e.open=function(t){return new e(t)},e}();function BU(e,t){return void 0===t&&(t='viewBox="0 0 40 40"'),'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(t,">").concat(encodeURIComponent(e),"</svg>')")}function NU(e){return BU('<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="'.concat(e,'" fill="none" stroke-width=".7"/>'),'width="6" height="3"')}var RU=Xo.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:NU("#d11")},".cm-lintRange-warning":{backgroundImage:NU("orange")},".cm-lintRange-info":{backgroundImage:NU("#999")},".cm-lintRange-hint":{backgroundImage:NU("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function HU(e){return"error"==e?4:"warning"==e?3:"info"==e?2:1}function VU(e){for(var t="hint",n=1,i=0,r=e;i<r.length;i++){var o=r[i],a=HU(o.severity);a>n&&(n=a,t=o.severity)}return t}var zU=function(e){function t(t){var n=e.call(this)||this;return n.diagnostics=t,n.severity=VU(t),n}return f(t,e),t.prototype.toDOM=function(e){var t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;var n=this.diagnostics,i=e.state.facet(YU).tooltipFilter;return i&&(n=i(n,e.state)),n.length&&(t.onmouseover=function(){return function(e,t,n){function i(){var i=e.elementAtHeight(t.getBoundingClientRect().top+5-e.documentTop);e.coordsAtPos(i.from)&&e.dispatch({effects:WU.of({pos:i.from,above:!1,clip:!1,create:function(){return{dom:wU(e,n),getCoords:function(){return t.getBoundingClientRect()}}}})}),t.onmouseout=t.onmousemove=null,function(e,t){var n=function(i){var r=t.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(var o=i.target;o;o=o.parentNode)if(1==o.nodeType&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),e.state.field(jU)&&e.dispatch({effects:WU.of(null)})}};window.addEventListener("mousemove",n)}(e,t)}var r=e.state.facet(YU).hoverTime,o=setTimeout(i,r);t.onmouseout=function(){clearTimeout(o),t.onmouseout=t.onmousemove=null},t.onmousemove=function(){clearTimeout(o),o=setTimeout(i,r)}}(e,t,n)}),t},t}(Fs);function qU(e,t){for(var n=Object.create(null),i=0,r=t;i<r.length;i++){var o=r[i];(n[(s=e.lineAt(o.from)).from]||(n[s.from]=[])).push(o)}var a=[];for(var s in n)a.push(new zU(n[s]).range(+s));return wt.of(a,!0)}var UU=Hs({class:"cm-gutter-lint",markers:function(e){return e.state.field(_U)},widgetMarker:function(e,t,n){var i=[];return e.state.field(_U).between(n.from,n.to,(function(e,t,r){e>n.from&&e<n.to&&i.push.apply(i,r.diagnostics)})),i.length?new zU(i):null}}),_U=Fe.define({create:function(){return wt.empty},update:function(e,t){e=e.map(t.changes);for(var n=t.state.facet(YU).markerFilter,i=0,r=t.effects;i<r.length;i++){var o=r[i];if(o.is(pU)){var a=o.value;n&&(a=n(a||[],t.state)),e=qU(t.state.doc,a.slice(0))}}return e}}),WU=nt.define(),jU=Fe.define({create:function(){return null},update:function(e,t){return e&&t.docChanged&&(e=uU(t,e)?null:Object.assign(Object.assign({},e),{pos:t.changes.mapPos(e.pos)})),t.effects.reduce((function(e,t){return t.is(WU)?t.value:e}),e)},provide:function(e){return fs.from(e)}}),GU=Xo.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:BU('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:BU('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:BU('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),KU=[vU,Xo.decorations.compute([vU],(function(e){var t=e.field(vU),n=t.selected,i=t.panel;return n&&i&&n.from!=n.to?Yn.set([yU.range(n.from,n.to)]):Yn.none})),ws(bU,{hideOn:uU}),RU],YU=Te.define({combine:function(e){return mt(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function ZU(e){return void 0===e&&(e={}),[YU.of(e),_U,UU,GU,jU]}function XU(e,t){var n=e.field(vU,!1);if(n&&n.diagnostics.size)for(var i=[],r=[],o=-1,a=wt.iter([n.diagnostics]);;a.next()){for(var s=0;s<i.length;s++)(!a.value||a.value.spec.diagnostics.indexOf(i[s])<0)&&(t(i[s],r[s],o),i.splice(s,1),r.splice(s--,1));if(!a.value)break;for(var l=0,c=a.value.spec.diagnostics;l<c.length;l++){var u=c[l];i.indexOf(u)<0&&(i.push(u),r.push(a.from))}o=a.to}}var $U=function(){function e(e,t,n,i,r,o,a,s,l,c,u){void 0===c&&(c=0),this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=r,this.score=o,this.buffer=a,this.bufferBase=s,this.curContext=l,this.lookAhead=c,this.parent=u}return e.prototype.toString=function(){return"[".concat(this.stack.filter((function(e,t){return t%3==0})).concat(this.state),"]@").concat(this.pos).concat(this.score?"!"+this.score:"")},e.start=function(t,n,i){void 0===i&&(i=0);var r=t.parser.context;return new e(t,[],n,i,i,0,[],0,r?new QU(r,r.start):null,0,null)},Object.defineProperty(e.prototype,"context",{get:function(){return this.curContext?this.curContext.context:null},enumerable:!1,configurable:!0}),e.prototype.pushState=function(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e},e.prototype.reduce=function(e){var t,n=e>>19,i=65535&e,r=this.p.parser,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);var a=r.dynamicPrecedence(i);if(a&&(this.score+=a),0==n)return this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),void this.reduceContext(i,this.reducePos);var s=this.stack.length-3*(n-1)-(262144&e?6:0),l=s?this.stack[s-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(null===(t=this.p.parser.nodeSet.types[i])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));var u=s?this.stack[s-1]:0,h=this.bufferBase+this.buffer.length-u;if(i<r.minRepeatTerm||131072&e){var d=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,d,h+4,!0)}if(262144&e)this.state=this.stack[s];else{var p=this.stack[s-3];this.state=r.getGoto(p,i,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(i,l)},e.prototype.storeNode=function(e,t,n,i,r){if(void 0===i&&(i=4),void 0===r&&(r=!1),0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){var o=this,a=this.buffer.length;if(0==a&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&0==o.buffer[a-4]&&o.buffer[a-1]>-1){if(t==n)return;if(o.buffer[a-2]>=t)return void(o.buffer[a-2]=n)}}if(r&&this.pos!=n){var s=this.buffer.length;if(s>0&&0!=this.buffer[s-4]){for(var l=!1,c=s;c>0&&this.buffer[c-2]>n;c-=4)if(this.buffer[c-1]>=0){l=!0;break}if(l)for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=n,this.buffer[s+3]=i}else this.buffer.push(e,t,n,i)},e.prototype.shift=function(e,t,n,i){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4);else{var r=e,o=this.p.parser;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,i,4)}},e.prototype.apply=function(e,t,n,i){65536&e?this.reduce(e):this.shift(e,t,n,i)},e.prototype.useNode=function(e,t){var n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);var i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))},e.prototype.split=function(){for(var t=this,n=t.buffer.length;n>0&&t.buffer[n-2]>t.reducePos;)n-=4;for(var i=t.buffer.slice(n),r=t.bufferBase+n;t&&r==t.bufferBase;)t=t.parent;return new e(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,t)},e.prototype.recoverByDelete=function(e,t){var n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190},e.prototype.canShift=function(e){for(var t=new JU(this);;){var n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(!(65536&n))return!0;t.reduce(n)}},e.prototype.recoverByInsert=function(e){if(this.stack.length>=300)return[];var t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){for(var n=[],i=0,r=void 0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120){var o=function(e){var i=t[e+1];n.some((function(e,t){return 1&t&&e==i}))||n.push(t[e],i)};for(i=0;n.length<8&&i<t.length;i+=2)o(i)}t=n}var a=[];for(i=0;i<t.length&&a.length<4;i+=2){if((r=t[i+1])!=this.state){var s=this.split();s.pushState(r,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[i],this.pos),s.reducePos=this.pos,s.score-=200,a.push(s)}}return a},e.prototype.forceReduce=function(){var e=this.p.parser,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){var n=t>>19,i=65535&t,r=this.stack.length-3*n;if(r<0||e.getGoto(this.stack[r],i,!1)<0){var o=this.findForcedReduction();if(null==o)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0},e.prototype.findForcedReduction=function(){var e=this,t=this.p.parser,n=[],i=function(r,o){if(!n.includes(r))return n.push(r),t.allActions(r,(function(n){if(393216&n);else if(65536&n){var r=(n>>19)-o;if(r>1){var a=65535&n,s=e.stack.length-3*r;if(s>=0&&t.getGoto(e.stack[s],a,!1)>=0)return r<<19|65536|a}}else{var l=i(n,o+1);if(null!=l)return l}}))};return i(this.state,0)},e.prototype.forceAll=function(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this},Object.defineProperty(e.prototype,"deadEnd",{get:function(){if(3!=this.stack.length)return!1;var e=this.p.parser;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)},enumerable:!1,configurable:!0}),e.prototype.restart=function(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0},e.prototype.sameState=function(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(var t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0},Object.defineProperty(e.prototype,"parser",{get:function(){return this.p.parser},enumerable:!1,configurable:!0}),e.prototype.dialectEnabled=function(e){return this.p.parser.dialect.flags[e]},e.prototype.shiftContext=function(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))},e.prototype.reduceContext=function(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))},e.prototype.emitContext=function(){var e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)},e.prototype.emitLookAhead=function(){var e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)},e.prototype.updateContext=function(e){if(e!=this.curContext.context){var t=new QU(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}},e.prototype.setLookAhead=function(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)},e.prototype.close=function(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()},e}(),QU=function(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0},JU=function(){function e(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}return e.prototype.reduce=function(e){var t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);var i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i},e}(),e_=function(){function e(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}return e.create=function(t,n){return void 0===n&&(n=t.bufferBase+t.buffer.length),new e(t,n,n-t.bufferBase)},e.prototype.maybeNext=function(){var e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)},Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!1,configurable:!0}),e.prototype.next=function(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()},e.prototype.fork=function(){return new e(this.stack,this.pos,this.index)},e}();function t_(e,t){if(void 0===t&&(t=Uint16Array),"string"!=typeof e)return e;for(var n=null,i=0,r=0;i<e.length;){for(var o=0;;){var a=e.charCodeAt(i++),s=!1;if(126==a){o=65535;break}a>=92&&a--,a>=34&&a--;var l=a-32;if(l>=46&&(l-=46,s=!0),o+=l,s)break;o*=46}n?n[r++]=o:n=new t(o)}return n}var n_=function(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0},i_=new n_,r_=function(){function e(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=i_,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}return e.prototype.resolveOffset=function(e,t){for(var n=this.range,i=this.rangeIndex,r=this.pos+e;r<n.from;){if(!i)return null;var o=this.ranges[--i];r-=n.from-o.to,n=o}for(;t<0?r>n.to:r>=n.to;){if(i==this.ranges.length-1)return null;r+=(o=this.ranges[++i]).from-n.to,n=o}return r},e.prototype.clipPos=function(e){if(e>=this.range.from&&e<this.range.to)return e;for(var t=0,n=this.ranges;t<n.length;t++){var i=n[t];if(i.to>e)return Math.max(e,i.from)}return this.end},e.prototype.peek=function(e){var t,n,i=this.chunkOff+e;if(i>=0&&i<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(i);else{var r=this.resolveOffset(e,1);if(null==r)return-1;if((t=r)>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{for(var o=this.rangeIndex,a=this.range;a.to<=t;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n},e.prototype.acceptToken=function(e,t){void 0===t&&(t=0);var n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n},e.prototype.acceptTokenTo=function(e,t){this.token.value=e,this.token.end=t},e.prototype.getChunk=function(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){var e=this.chunk,t=this.chunkPos;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;var n=this.input.chunk(this.pos),i=this.pos+n.length;this.chunk=i>this.range.to?n.slice(0,this.range.to-this.pos):n,this.chunkPos=this.pos,this.chunkOff=0}},e.prototype.readNext=function(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)},e.prototype.advance=function(e){for(void 0===e&&(e=1),this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()},e.prototype.setDone=function(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1},e.prototype.reset=function(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=i_,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this},e.prototype.read=function(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);for(var n="",i=0,r=this.ranges;i<r.length;i++){var o=r[i];if(o.from>=t)break;o.to>e&&(n+=this.input.read(Math.max(o.from,e),Math.min(o.to,t)))}return n},e}(),o_=function(){function e(e,t){this.data=e,this.id=t}return e.prototype.token=function(e,t){var n=t.p.parser;l_(this.data,e,t,this.id,n.data,n.tokenPrecTable)},e}();o_.prototype.contextual=o_.prototype.fallback=o_.prototype.extend=!1;var a_=function(){function e(e,t,n){this.precTable=t,this.elseToken=n,this.data="string"==typeof e?t_(e):e}return e.prototype.token=function(e,t){for(var n=e.pos,i=0;;){var r=e.next<0,o=e.resolveOffset(1,1);if(l_(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(r||i++,null==o)break;e.reset(o,e.token)}i&&(e.reset(n,e.token),e.acceptToken(this.elseToken,i))},e}();a_.prototype.contextual=o_.prototype.fallback=o_.prototype.extend=!1;var s_=function(e,t){void 0===t&&(t={}),this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend};function l_(e,t,n,i,r,o){var a,s,l,c,u,h=0,d=1<<i,p=n.p.parser.dialect;e:for(;d&e[h];){for(var f=e[h+1],m=h+3;m<f;m+=2)if((e[m+1]&d)>0){var v=e[m];if(p.allows(v)&&(-1==t.token.value||t.token.value==v||(a=v,s=t.token.value,u=void 0,(u=c_(l=r,c=o,s))<0||c_(l,c,a)<u))){t.acceptToken(v);break}}var g=t.next,y=0,b=e[h+2];if(!(t.next<0&&b>y&&65535==e[f+3*b-3])){for(;y<b;){var w=y+b>>1,k=f+w+(w<<1),C=e[k],M=e[k+1]||65536;if(g<C)b=w;else{if(!(g>=M)){h=e[k+2],t.advance();continue e}y=w+1}}break}h=e[f+3*b-1]}}function c_(e,t,n){for(var i=t,r=void 0;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}var u_="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG),h_=null;function d_(e,t,n){var i=e.cursor(Mu.IncludeAnonymous);for(i.moveTo(t);;)if(!(n<0?i.childBefore(t):i.childAfter(t)))for(;;){if((n<0?i.to<t:i.from>t)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:e.length}}var p_=function(){function e(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}return e.prototype.nextFragment=function(){var e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?d_(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?d_(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9},e.prototype.nodeAt=function(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){var t=this.trees.length-1;if(t<0)return this.nextFragment(),null;var n=this.trees[t],i=this.index[t];if(i!=n.children.length){var r=n.children[i],o=this.start[t]+n.positions[i];if(o>e)return this.nextStart=o,null;if(r instanceof Tu){if(o==e){if(o<this.safeFrom)return null;var a=o+r.length;if(a<=this.safeTo){var s=r.prop(bu.lookAhead);if(!s||a+s<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}else this.trees.pop(),this.start.pop(),this.index.pop()}},e}(),f_=function(){function e(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((function(e){return new n_}))}return e.prototype.getActions=function(e){for(var t=0,n=null,i=e.p.parser,r=i.tokenizers,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,s=0,l=0;l<r.length;l++)if(1<<l&o){var c=r[l],u=this.tokens[l];if((!n||c.fallback)&&((c.contextual||u.start!=e.pos||u.mask!=o||u.context!=a)&&(this.updateCachedToken(u,c,e),u.mask=o,u.context=a),u.lookAhead>u.end+25&&(s=Math.max(u.lookAhead,s)),0!=u.value)){var h=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!c.extend&&(n=u,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return s&&e.setLookAhead(s),n||e.pos!=this.stream.end||((n=new n_).value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions},e.prototype.getMainToken=function(e){if(this.mainToken)return this.mainToken;var t=new n_,n=e.pos,i=e.p;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t},e.prototype.updateCachedToken=function(e,t,n){var i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){for(var r=n.p.parser,o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){var a=r.specializers[o](this.stream.read(e.start,e.end),n);if(a>=0&&n.p.parser.dialect.allows(a>>1)){1&a?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)},e.prototype.putAction=function(e,t,n,i){for(var r=0;r<i;r+=3)if(this.actions[r]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i},e.prototype.addActions=function(e,t,n,i){for(var r=e.state,o=e.p.parser,a=o.data,s=0;s<2;s++)for(var l=o.stateSlot(r,s?2:1);;l+=3){if(65535==a[l]){if(1!=a[l+1]){0==i&&2==a[l+1]&&(i=this.putAction(k_(a,l+2),t,n,i));break}l=k_(a,l+2)}a[l]==t&&(i=this.putAction(k_(a,l+1),t,n,i))}return i},e}(),m_=function(){function e(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new r_(t,i),this.tokens=new f_(e,this.stream),this.topTerm=e.top[1];var r=i[0].from;this.stacks=[$U.start(this,e.top[0],r)],this.fragments=n.length&&this.stream.end-r>4*e.bufferLength?new p_(n,e.nodeSet):null}return Object.defineProperty(e.prototype,"parsedPos",{get:function(){return this.minStackPos},enumerable:!1,configurable:!0}),e.prototype.advance=function(){var e,t,n=this.stacks,i=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){for(var o=n[0];o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(var a=0;a<n.length;a++)for(var s=n[a];;){if(this.tokens.mainToken=null,s.pos>i)r.push(s);else{if(this.advanceStack(s,r,n))continue;e||(e=[],t=[]),e.push(s);var l=this.tokens.getMainToken(s);t.push(l.value,l.end)}break}if(!r.length){var c=e&&function(e){for(var t=null,n=0,i=e;n<i.length;n++){var r=i[n],o=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=o&&r.pos>o)&&r.p.parser.stateFlag(r.state,2)&&(!t||t.score<r.score)&&(t=r)}return t}(e);if(c)return u_&&console.log("Finish with "+this.stackID(c)),this.stackToTree(c);if(this.parser.strict)throw u_&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e&&(c=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,r)))return u_&&console.log("Force-finish "+this.stackID(c)),this.stackToTree(c.forceAll());if(this.recovering){var u=1==this.recovering?1:3*this.recovering;if(r.length>u)for(r.sort((function(e,t){return t.score-e.score}));r.length>u;)r.pop();r.some((function(e){return e.reducePos>i}))&&this.recovering--}else if(r.length>1){e:for(a=0;a<r.length-1;a++){s=r[a];for(var h=a+1;h<r.length;h++){var d=r[h];if(s.sameState(d)||s.buffer.length>500&&d.buffer.length>500){if(!((s.score-d.score||s.buffer.length-d.buffer.length)>0)){r.splice(a--,1);continue e}r.splice(h--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null},e.prototype.stopAt=function(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e},e.prototype.advanceStack=function(e,t,n){var i=e.pos,r=this.parser,o=u_?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments)for(var a=e.curContext&&e.curContext.tracker.strict,s=a?e.curContext.hash:0,l=this.fragments.nodeAt(i);l;){var c=this.parser.nodeSet.types[l.type.id]==l.type?r.getGoto(e.state,l.type.id):-1;if(c>-1&&l.length&&(!a||(l.prop(bu.contextHash)||0)==s))return e.useNode(l,c),u_&&console.log(o+this.stackID(e)+" (via reuse of ".concat(r.getName(l.type.id),")")),!0;if(!(l instanceof Tu)||0==l.children.length||l.positions[0]>0)break;var u=l.children[0];if(!(u instanceof Tu&&0==l.positions[0]))break;l=u}var h=r.stateSlot(e.state,4);if(h>0)return e.reduce(h),u_&&console.log(o+this.stackID(e)+" (via always-reduce ".concat(r.getName(65535&h),")")),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););for(var d=this.tokens.getActions(e),p=0;p<d.length;){var f=d[p++],m=d[p++],v=d[p++],g=p==d.length||!n,y=g?e:e.split(),b=this.tokens.mainToken;if(y.apply(f,m,b?b.start:y.pos,v),u_&&console.log(o+this.stackID(y)+" (via ".concat(65536&f?"reduce of ".concat(r.getName(65535&f)):"shift"," for ").concat(r.getName(m)," @ ").concat(i).concat(y==e?"":", split",")")),g)return!0;y.pos>i?t.push(y):n.push(y)}return!1},e.prototype.advanceFully=function(e,t){for(var n=e.pos;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return v_(e,t),!0}},e.prototype.runRecovery=function(e,t,n){for(var i=null,r=!1,o=0;o<e.length;o++){var a=e[o],s=t[o<<1],l=t[1+(o<<1)],c=u_?this.stackID(a)+" -> ":"";if(a.deadEnd){if(r)continue;if(r=!0,a.restart(),u_&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,n))continue}for(var u=a.split(),h=c,d=0;u.forceReduce()&&d<10;d++){if(u_&&console.log(h+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;u_&&(h=this.stackID(u)+" -> ")}for(var p=0,f=a.recoverByInsert(s);p<f.length;p++){var m=f[p];u_&&console.log(c+this.stackID(m)+" (via recover-insert)"),this.advanceFully(m,n)}this.stream.end>a.pos?(l==a.pos&&(l++,s=0),a.recoverByDelete(s,l),u_&&console.log(c+this.stackID(a)+" (via recover-delete ".concat(this.parser.getName(s),")")),v_(a,n)):(!i||i.score<a.score)&&(i=a)}return i},e.prototype.stackToTree=function(e){return e.close(),Tu.build({buffer:e_.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})},e.prototype.stackID=function(e){var t=(h_||(h_=new WeakMap)).get(e);return t||h_.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e},e}();function v_(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.pos==e.pos&&i.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}var g_=function(){function e(e,t,n){this.source=e,this.flags=t,this.disabled=n}return e.prototype.allows=function(e){return!this.disabled||0==this.disabled[e]},e}(),y_=function(e){return e},b_=function(e){this.start=e.start,this.shift=e.shift||y_,this.reduce=e.reduce||y_,this.reuse=e.reuse||y_,this.hash=e.hash||function(){return 0},this.strict=!1!==e.strict},w_=function(e){function t(t){var n,i=e.call(this)||this;if(i.wrappers=[],14!=t.version)throw new RangeError("Parser version (".concat(t.version,") doesn't match runtime version (").concat(14,")"));var r=t.nodeNames.split(" ");i.minRepeatTerm=r.length;for(var o=0;o<t.repeatNodeCount;o++)r.push("");var a=Object.keys(t.topRules).map((function(e){return t.topRules[e][1]})),s=[];for(o=0;o<r.length;o++)s.push([]);function l(e,t,n){s[e].push([t,t.deserialize(String(n))])}if(t.nodeProps)for(var c=0,u=t.nodeProps;c<u.length;c++){var h=u[c],d=h[0];"string"==typeof d&&(d=bu[d]);for(o=1;o<h.length;){var p=h[o++];if(p>=0)l(p,d,h[o++]);else{for(var f=h[o+-p],m=-p;m>0;m--)l(h[o++],d,f);o++}}}i.nodeSet=new Eu(r.map((function(e,n){return Cu.define({name:n>=i.minRepeatTerm?void 0:e,id:n,props:s[n],top:a.indexOf(n)>-1,error:0==n,skipped:t.skippedNodes&&t.skippedNodes.indexOf(n)>-1})}))),t.propSources&&(i.nodeSet=(n=i.nodeSet).extend.apply(n,t.propSources)),i.strict=!1,i.bufferLength=vu;var v=t_(t.tokenData);i.context=t.context,i.specializerSpecs=t.specialized||[],i.specialized=new Uint16Array(i.specializerSpecs.length);for(o=0;o<i.specializerSpecs.length;o++)i.specialized[o]=i.specializerSpecs[o].term;return i.specializers=i.specializerSpecs.map(C_),i.states=t_(t.states,Uint32Array),i.data=t_(t.stateData),i.goto=t_(t.goto),i.maxTerm=t.maxTerm,i.tokenizers=t.tokenizers.map((function(e){return"number"==typeof e?new o_(v,e):e})),i.topRules=t.topRules,i.dialects=t.dialects||{},i.dynamicPrecedences=t.dynamicPrecedences||null,i.tokenPrecTable=t.tokenPrec,i.termNames=t.termNames||null,i.maxNode=i.nodeSet.types.length-1,i.dialect=i.parseDialect(),i.top=i.topRules[Object.keys(i.topRules)[0]],i}return f(t,e),t.prototype.createParse=function(e,t,n){for(var i=new m_(this,e,t,n),r=0,o=this.wrappers;r<o.length;r++){i=(0,o[r])(i,e,t,n)}return i},t.prototype.getGoto=function(e,t,n){void 0===n&&(n=!1);var i=this.goto;if(t>=i[0])return-1;for(var r=i[t+1];;){var o=i[r++],a=1&o,s=i[r++];if(a&&n)return s;for(var l=r+(o>>1);r<l;r++)if(i[r]==e)return s;if(a)return-1}},t.prototype.hasAction=function(e,t){for(var n=this.data,i=0;i<2;i++)for(var r=this.stateSlot(e,i?2:1),o=void 0;;r+=3){if(65535==(o=n[r])){if(1!=n[r+1]){if(2==n[r+1])return k_(n,r+2);break}o=n[r=k_(n,r+2)]}if(o==t||0==o)return k_(n,r+1)}return 0},t.prototype.stateSlot=function(e,t){return this.states[6*e+t]},t.prototype.stateFlag=function(e,t){return(this.stateSlot(e,0)&t)>0},t.prototype.validAction=function(e,t){return!!this.allActions(e,(function(e){return e==t||null}))},t.prototype.allActions=function(e,t){for(var n=this.stateSlot(e,4),i=n?t(n):void 0,r=this.stateSlot(e,1);null==i;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=k_(this.data,r+2)}i=t(k_(this.data,r+1))}return i},t.prototype.nextStates=function(e){for(var t,n=[],i=function(e){if(65535==r.data[e]){if(1!=r.data[e+1])return t=e,"break";e=k_(r.data,e+2)}if(!(1&r.data[e+2])){var i=r.data[e+1];n.some((function(e,t){return 1&t&&e==i}))||n.push(r.data[e],i)}t=e},r=this,o=this.stateSlot(e,1);;o+=3){var a=i(o);if(o=t,"break"===a)break}return n},t.prototype.configure=function(e){var n,i=Object.assign(Object.create(t.prototype),this);if(e.props&&(i.nodeSet=(n=this.nodeSet).extend.apply(n,e.props)),e.top){var r=this.topRules[e.top];if(!r)throw new RangeError("Invalid top rule name ".concat(e.top));i.top=r}return e.tokenizers&&(i.tokenizers=this.tokenizers.map((function(t){var n=e.tokenizers.find((function(e){return e.from==t}));return n?n.to:t}))),e.specializers&&(i.specializers=this.specializers.slice(),i.specializerSpecs=this.specializerSpecs.map((function(t,n){var r=e.specializers.find((function(e){return e.from==t.external}));if(!r)return t;var o=Object.assign(Object.assign({},t),{external:r.to});return i.specializers[n]=C_(o),o}))),e.contextTracker&&(i.context=e.contextTracker),e.dialect&&(i.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(i.strict=e.strict),e.wrap&&(i.wrappers=i.wrappers.concat(e.wrap)),null!=e.bufferLength&&(i.bufferLength=e.bufferLength),i},t.prototype.hasWrappers=function(){return this.wrappers.length>0},t.prototype.getName=function(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)},Object.defineProperty(t.prototype,"eofTerm",{get:function(){return this.maxNode+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topNode",{get:function(){return this.nodeSet.types[this.top[1]]},enumerable:!1,configurable:!0}),t.prototype.dynamicPrecedence=function(e){var t=this.dynamicPrecedences;return null==t?0:t[e]||0},t.prototype.parseDialect=function(e){var t=Object.keys(this.dialects),n=t.map((function(){return!1}));if(e)for(var i=0,r=e.split(" ");i<r.length;i++){var o=r[i],a=t.indexOf(o);a>=0&&(n[a]=!0)}for(var s=null,l=0;l<t.length;l++)if(!n[l])for(var c,u=this.dialects[t[l]];65535!=(c=this.data[u++]);)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new g_(e,n,s)},t.deserialize=function(e){return new t(e)},t}(Yu);function k_(e,t){return e[t]|e[t+1]<<16}function C_(e){if(e.external){var t=e.extend?1:0;return function(n,i){return e.external(n,i)<<1|t}}return e.get}let M_,E_;const S_=new WeakMap,x_=new WeakMap,T_=new WeakMap,D_=new WeakMap,A_=new WeakMap;let L_={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return x_.get(e);if("objectStoreNames"===t)return e.objectStoreNames||T_.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return F_(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function P_(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(E_||(E_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(O_(this),t),F_(S_.get(this))}:function(...t){return F_(e.apply(O_(this),t))}:function(t,...n){const i=e.call(O_(this),t,...n);return T_.set(i,t.sort?t.sort():[t]),F_(i)}}function I_(e){return"function"==typeof e?P_(e):(e instanceof IDBTransaction&&function(e){if(x_.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));x_.set(e,t)}(e),t=e,(M_||(M_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,L_):e);var t}function F_(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(F_(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&S_.set(t,e)})).catch((()=>{})),A_.set(t,e),t}(e);if(D_.has(e))return D_.get(e);const t=I_(e);return t!==e&&(D_.set(e,t),A_.set(t,e)),t}const O_=e=>A_.get(e);function B_(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(e,t),s=F_(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(F_(a.result),e.oldVersion,e.newVersion,F_(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}const N_=["get","getKey","getAll","getAllKeys","count"],R_=["put","add","delete","clear"],H_=new Map;function V_(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(H_.get(t))return H_.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=R_.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!N_.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let a=o.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&o.done]))[0]};return H_.set(t,o),o}function z_(e){return"md"===Qc(Kc(e))&&(e=e.substring(0,e.length-3)),e}L_=(e=>({...e,get:(t,n,i)=>V_(t,n)||e.get(t,n,i),has:(t,n)=>!!V_(t,n)||e.has(t,n)}))(L_);var q_=function(e,t){return e.path.length-t.path.length},U_=function(e,t){if(!t)return!1;for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];if(e.contains(Kc(r).toLowerCase()))return!0}return!1};function __(e){return 0!==e.trim().length&&(!e.contains("\n")&&!(e.length>100&&e.contains(" ")))}var W_=function(){function e(e){this.cache={},this.app=e}return e.prototype.clear=function(){this.cache={}},e.prototype.getForFile=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b;return y(this,(function(y){switch(y.label){case 0:return"md"!==t.extension?[2,null]:(n=t.stat.mtime,(i=this.cache).hasOwnProperty(t.path)&&(r=i[t.path]).file===t&&r.mtime===n?[2,r]:[4,this.app.vault.cachedRead(t)]);case 1:if(o=y.sent(),e.isCancelled())return[2,null];a=pS(o),s=[],y.label=2;case 2:y.trys.push([2,7,8,13]),l=!0,c=M(mL(fL(a.children),{maxDelay:0})),y.label=3;case 3:return[4,c.next()];case 4:if(u=y.sent(),m=u.done)return[3,6];if(b=u.value,l=!1,h=b,e.isCancelled())return[3,6];if("yaml"===h.type)return[3,5];if("list"===h.type)return jk(h,"listItem",(function(e){var t=DS(e).trim();t&&s.push({display:t,node:e})})),[3,5];if(""===(d=DS(h).trim()))return[3,5];"heading"===h.type&&(d=Array(h.depth||1).fill("#").join("")+" "+d),s.push({display:d,node:h}),y.label=5;case 5:return l=!0,[3,3];case 6:return[3,13];case 7:return p=y.sent(),v={error:p},[3,13];case 8:return y.trys.push([8,,11,12]),l||m||!(g=c.return)?[3,10]:[4,g.call(c)];case 9:y.sent(),y.label=10;case 10:return[3,12];case 11:if(v)throw v.error;return[7];case 12:return[7];case 13:return f={file:t,content:o,mtime:n,blocks:s},i[t.path]=f,[2,f]}}))}))},e.prototype.getAll=function(e){return C(this,arguments,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:t=this.app.vault,n=t.getMarkdownFiles(),i=0,r=n,a.label=1;case 1:return i<r.length?(o=r[i],[4,k(this.getForFile(e,o))]):[3,5];case 2:return[4,a.sent()];case 3:a.sent(),a.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))},e}();var j_=function(e){function t(t,n){var i=e.call(this)||this;return i.worker=null,i.inProgressTaskCount=0,i.db=null,i.fileCache={},i.metadataCache={},i.workQueue=new cL,i.uniqueFileLookup=new rc,i.didFinish=mc((function(){return i.trigger("finished")}),10,!0),i.initialized=!1,i.resolvedLinks={},i.unresolvedLinks={},i.linkResolverQueue=null,i.onCleanCacheCallbacks=[],i.workerResolve=null,i.userIgnoreFilters=null,i.userIgnoreFiltersString="",i.userIgnoreFilterCache={},i.app=t,i.vault=n,i.worker=new Worker("worker.js",{name:"Metadata Cache Worker"}),i.worker.onmessage=i.onReceiveMessageFromWorker.bind(i),i.blockCache=new W_(t),i.linkResolver(),i.on("finished",i.checkCleanCache,i),i.on("resolved",i.checkCleanCache,i),i}return f(t,e),t.prototype.getLinkSuggestions=function(){for(var e=[],t={},n=this.unresolvedLinks,i=0,r=this.vault.getFiles();i<r.length;i++){var o=r[i];if(this.isSupportedFile(o)){var a=o.path;"md"===o.extension&&(a=$c(a)),t[a]=!0,e.push({file:o,path:a});var s=this.getFileCache(o);if(s){var l=MS(s.frontmatter);if(l)for(var c=0,u=l;c<u.length;c++){var h=u[c];e.push({file:o,path:a,alias:h})}}}}for(var d in n)if(n.hasOwnProperty(d)){var p=n[d];for(var f in p)p.hasOwnProperty(f)&&(f.length>500&&(f=f.substring(0,500)),t[f]||(t[f]=!0,e.push({file:null,path:f})))}return e},t.prototype.getTags=function(){var e=this.fileCache,t=this.metadataCache,n={},i=function(e){if(e.endsWith("/")&&(e=e.slice(0,-1)),ZD(e)){var t=e.split("/").last();n[e]=(n[e]||0)+1,t!==e&&i(e.substr(0,e.length-t.length-1))}};for(var r in e)if(e.hasOwnProperty(r)&&!this.isUserIgnored(r)){var o=t[e[r].hash];if(o){var a=YS(o);if(a)for(var s=0,l=a;s<l.length;s++){var c=l[s];i(c)}}}var u={};for(var c in n)if(n.hasOwnProperty(c)){var h=c.toLowerCase(),d=n[c];if(u.hasOwnProperty(h)){var p=u[h];p.count+=d,d>p.max&&(p.max=d,p.tag=c)}else u[h]={tag:c,count:d,max:d}}for(var c in n={},u)if(u.hasOwnProperty(c)){var f=u[c];n[f.tag]=f.count}return n},t.prototype.getFirstLinkpathDest=function(e,t){var n=this.getLinkpathDest(e,t);return n.length>0?n[0]:null},t.prototype.getLinkpathDest=function(e,t){if(""===e&&t&&(f=this.vault.getAbstractFileByPath(t))instanceof ww)return[f];var n=e.toLowerCase(),i=Kc(n),r=null;if(i.contains(".")&&(r=this.uniqueFileLookup.get(i)),r||(i=Kc(n=(e+".md").toLowerCase()),r=this.uniqueFileLookup.get(i)),!r)return[];if(i===n&&1===r.length)return r.slice();var o=Yc(t).toLowerCase();if(n.startsWith("./")||n.startsWith("../")){if(n.startsWith("./../")&&(n=n.substr(2)),n.startsWith("./"))""!==o&&(o+="/"),n=o+n.substring(2);else{for(;n.startsWith("../");)n=n.substr(3),o=Yc(o);""!==o&&(o+="/"),n=o+n}for(var a=0,s=r;a<s.length;a++){if((m=(f=s[a]).path.toLowerCase())===n)return[f]}}n.startsWith("/")&&(n=n.substr(1));for(var l=0,c=r;l<c.length;l++){if((m=(f=c[l]).path.toLowerCase())===n)return[f]}if(e.startsWith("/"))return[];for(var u=[],h=[],d=0,p=r;d<p.length;d++){var f,m;(m=(f=p[d]).path.toLowerCase()).endsWith(n)&&(m.startsWith(o)?u.push(f):h.push(f))}return u.sort(q_),h.sort(q_),u.concat(h)},t.prototype.getLinks=function(){var e={};for(var t in this.fileCache)if(this.fileCache.hasOwnProperty(t)){var n=[],i=this.fileCache[t].hash,r=this.metadataCache[i];r&&(r.links&&(n=n.concat(r.links)),r.embeds&&(n=n.concat(r.embeds))),e[t]=n}return e},t.prototype.getFileCache=function(e){return this.getCache(e.path)},t.prototype.getCache=function(e){if(!this.fileCache.hasOwnProperty(e))return null;if("md"!==Qc(Kc(e)))return{};var t=this.fileCache[e].hash;return this.metadataCache[t]||null},t.prototype.getFileInfo=function(e){return this.fileCache[e]},t.prototype.getCachedFiles=function(){return Object.keys(this.fileCache)},t.prototype.iterateReferences=function(e){var t=function(t){if(!n.fileCache.hasOwnProperty(t))return"continue";var i=n.fileCache[t].hash;GS(n.metadataCache[i],(function(n){return e(t,n)}))},n=this;for(var i in this.fileCache)t(i)},t.prototype.getBacklinksForFile=function(e){var t=this,n=new rc;return this.iterateReferences((function(i,r){var o=_S(r.link),a=t.getFirstLinkpathDest(o,i);a&&a===e&&n.add(i,r)})),n},t.prototype.fileToLinktext=function(e,t,n){void 0===n&&(n=!0);var i=this.vault.getConfig("newLinkFormat"),r="md"===e.extension&&n?$c(e.path):e.path;if("absolute"===i)return r;if("relative"===i){for(var o="",a=Yc(t);""!==a&&"/"!==a&&0!==r.indexOf(a+"/");)o="../"+o,a=Yc(a);return 0===r.indexOf(a+"/")?o+r.substr(a.length+1):o+r}var s="md"===e.extension&&n?e.basename:e.name,l=_S(s),c=this.getLinkpathDest(l,t);return c&&1===c.length&&c[0]===e?s:"md"===e.extension&&n?$c(e.path):e.path},t.prototype.watchVaultChanges=function(){var e=this.vault;e.on("create",this.onCreate.bind(this)),e.on("modify",this.computeFileMetadataAsync.bind(this)),e.on("delete",this.onDelete.bind(this)),e.on("rename",this.onRename.bind(this)),e.on("config-changed",this.onConfigChanged.bind(this))},t.prototype.preload=function(){if(!this.initialized)return this.preloadPromise||(this.preloadPromise=this._preload()),this.preloadPromise},t.prototype._preload=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:t=(e=this).fileCache,n=e.metadataCache,i=null,p.label=1;case 1:return p.trys.push([1,3,,4]),r=this,[4,B_(this.app.appId+"-cache",19,{upgrade:function(e,t,n,i){e.objectStoreNames.contains("file")&&e.deleteObjectStore("file"),e.objectStoreNames.contains("metadata")&&e.deleteObjectStore("metadata"),e.createObjectStore("file"),e.createObjectStore("metadata")}})];case 2:return i=r.db=p.sent(),this.transactionSave=function(e,t){var n=null;return function(i,r,o){if(n)try{var a=n.objectStore(i);return o?a.put(o,r):a.delete(r)}catch(e){}var s=n=e.transaction(t,"readwrite",{durability:"relaxed"});vc((function(){n===s&&(n=null)}));var l=n.objectStore(i);return o?l.put(o,r):l.delete(r)}}(i,["file","metadata"]),[3,4];case 3:return o=p.sent(),console.error("Failed to load cache, unable to open IndexedDB",o),[2];case 4:return p.trys.push([4,8,,9]),[4,(a=i.transaction(["file","metadata"],"readonly")).objectStore("file").getAllKeys()];case 5:return s=p.sent(),[4,a.objectStore("file").getAll()];case 6:for(l=p.sent(),c=0;c<s.length;c++)u=s[c],h=l[c],u&&h&&(t[u]=h);return[4,G_(a.objectStore("metadata"),300,(function(e,t){for(var r=0;r<e.length;r++){var o=e[r],a=t[r];o&&a&&(qS(a)&&i.transaction("metadata","readwrite",{durability:"relaxed"}).store.put(fc(a),o),n[o]=zS(a))}}))];case 7:return p.sent(),[3,9];case 8:return d=p.sent(),console.error("Failed to load cache",d),[3,9];case 9:return[2]}}))}))},t.prototype.initialize=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u=this;return y(this,(function(h){switch(h.label){case 0:return[4,this.preload()];case 1:for(h.sent(),this.preloadPromise=null,t=(e=this).fileCache,n=e.metadataCache,setInterval(this.cleanupDeletedCache.bind(this),6e5),i={},r=this.vault.getAllLoadedFiles(),o=0,a=r;o<a.length;o++)(s=a[o])instanceof ww&&(this.uniqueFileLookup.add(s.name.toLowerCase(),s),i[s.path]=s);for(c in t)t.hasOwnProperty(c)&&(s=i[c],l=t[c],s?n.hasOwnProperty(l.hash)?s.stat.mtime!==l.mtime||s.stat.size!==l.size?this.computeFileMetadataAsync(s):this.linkResolverQueue.add(s):this.computeFileMetadataAsync(s):this.deletePath(c));for(c in i)i.hasOwnProperty(c)&&(t.hasOwnProperty(c)||this.computeFileMetadataAsync(i[c]));return this.initialized=!0,this.watchVaultChanges(),this.updateUserIgnoreFilters(),this.trigger("finished"),window.setTimeout((function(){return u.cleanupDeletedCache()}),6e4),[2]}}))}))},t.prototype.clear=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.db)?[4,e.clear("metadata")]:[3,3];case 1:return t.sent(),[4,e.clear("file")];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.showIndexingNotice=function(){var e,t,n=this,i=createEl("progress"),r=createFragment((function(e){e.createSpan({text:Qf.interface.msgIndexing()}),e.createEl("br"),e.createSpan({cls:"u-small",text:Qf.interface.msgIndexingDesc()}),e.append(i)})),o=Object.keys(this.metadataCache).length,a=o+this.inProgressTaskCount;i.max=a,i.value=o;var s=window.setTimeout((function(){n.inProgressTaskCount<=0||(e=new JA(r,0),t=window.setInterval((function(){e.containerEl.offsetParent?i.value=Math.max(0,a-n.inProgressTaskCount):clearInterval(t)}),300))}),1e3);this.onCleanCache((function(){clearTimeout(s),clearInterval(t),e&&(e.setMessage(Qf.interface.msgIndexingComplete()),e.containerEl.addClass("mod-success"),setTimeout((function(){return e.hide()}),3e3))}))},t.prototype.linkResolver=function(){var e=this,t=mL((this.linkResolverQueue=new pL({onStop:function(){return e.trigger("resolved")},onCancel:function(){e.linkResolverQueue=null}})).generator());g(e,void 0,void 0,(function(){var e,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=!0,n=M(t),u.label=1;case 1:return[4,n.next()];case 2:if(i=u.sent(),a=i.done)return[3,4];if(c=i.value,e=!1,!(r=c)||"md"!==r.extension)return[3,3];this.resolveLinks(r.path),this.trigger("resolve",r),u.label=3;case 3:return e=!0,[3,1];case 4:return[3,11];case 5:return o=u.sent(),s={error:o},[3,11];case 6:return u.trys.push([6,,9,10]),e||a||!(l=n.return)?[3,8]:[4,l.call(n)];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return[2]}}))}))},t.prototype.resolveLinks=function(e){var t=this,n=this.getCache(e);if(n){var i={},r={};GS(n,(function(n){var o=_S(n.link),a=t.getFirstLinkpathDest(o,e);if(a)i[a.path]=(i[a.path]||0)+1;else{var s=z_(o);r[s]=(r[s]||0)+1}})),this.resolvedLinks[e]=i,this.unresolvedLinks[e]=r}},t.prototype.onCleanCache=function(e){this.isCacheClean()?e():this.onCleanCacheCallbacks.push(e)},t.prototype.checkCleanCache=function(){for(;this.onCleanCacheCallbacks.length>0&&this.isCacheClean();){var e=this.onCleanCacheCallbacks.shift();try{e()}catch(e){console.error(e)}}},t.prototype.isCacheClean=function(){return 0===this.inProgressTaskCount&&0===this.linkResolverQueue.items.length&&!this.linkResolverQueue.runnable.isRunning()},t.prototype.updateRelatedLinks=function(e){for(var t=[],n=0,i=e=e.map((function(e){return e.toLowerCase()}));n<i.length;n++){var r=i[n];r.endsWith(".md")&&t.push(r.substring(0,r.length-3)),t.push(r)}for(var o=this.resolvedLinks,a=this.unresolvedLinks,s=0,l=this.getCachedFiles();s<l.length;s++){var c=l[s];if(U_(e,o[c])||U_(t,a[c])){var u=this.vault.getAbstractFileByPath(c);u&&u instanceof ww&&this.linkResolverQueue.add(u)}}},t.prototype.onCreate=function(e){this.computeFileMetadataAsync(e),e&&e instanceof ww&&this.updateRelatedLinks([e.name])},t.prototype.computeFileMetadataAsync=function(e){var t=this;if(e&&e instanceof ww){this.uniqueFileLookup.add(e.name.toLowerCase(),e);var n=e.stat,i=e.path,r=null;if("md"===e.extension){this.fileCache.hasOwnProperty(i)&&(r=this.fileCache[i]);var o=!1;if(r){var a=r.mtime===n.mtime&&r.size===n.size,s=r.hash&&this.metadataCache.hasOwnProperty(r.hash);o=a&&s}else r={mtime:0,size:0,hash:""},this.saveFileCache(i,r);if(!o){return this.inProgressTaskCount++,this.workQueue.queue((function(){return g(t,void 0,void 0,(function(){var o;return y(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,g(t,void 0,void 0,(function(){var t,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return[4,this.vault.readBinary(e)];case 1:return t=c.sent(),o=df(t),[4,vf(t)];case 2:if(a=c.sent(),r.mtime=n.mtime,r.size=n.size,r.hash=a,this.saveFileCache(i,r),s=this.metadataCache[a])return this.linkResolverQueue.add(e),this.trigger("changed",e,o,s),[2];l=setTimeout((function(){new JA("Indexing taking a long time for "+e.path)}),1e4),c.label=3;case 3:return c.trys.push([3,,5,6]),[4,this.work(t)];case 4:return s=c.sent(),[3,6];case 5:return clearTimeout(l),[7];case 6:return s?(this.saveMetaCache(a,s),this.linkResolverQueue.add(e),this.trigger("changed",e,o,s),[2]):(console.log("Metadata failed to parse",e),[2])}}))}))];case 1:return a.sent(),[3,3];case 2:return o=a.sent(),console.error(o),[3,3];case 3:return this.inProgressTaskCount--,0===this.inProgressTaskCount&&this.didFinish(),[2]}}))}))}))}this.linkResolverQueue.add(e)}else this.saveFileCache(i,{mtime:n.mtime,size:n.size,hash:""})}},t.prototype.onDelete=function(e){e&&e instanceof ww&&(this.uniqueFileLookup.remove(e.name.toLowerCase(),e),this.trigger("deleted",e,this.getFileCache(e)),this.deletePath(e.path))},t.prototype.deletePath=function(e){delete this.resolvedLinks[e],delete this.unresolvedLinks[e],this.saveFileCache(e,null),this.updateRelatedLinks([Kc(e)]),this.linkResolverQueue.add(null),0===this.inProgressTaskCount&&this.didFinish()},t.prototype.onRename=function(e,t){if(e&&e instanceof ww){var n=e.path,i=this,r=i.uniqueFileLookup,o=i.resolvedLinks,a=i.unresolvedLinks,s=i.fileCache;r.remove(Kc(t).toLowerCase(),e),r.add(e.name.toLowerCase(),e),o.hasOwnProperty(t)&&(o[n]=o[t],delete o[t]),a.hasOwnProperty(t)&&(a[n]=a[t],delete a[t]),s.hasOwnProperty(t)&&(this.saveFileCache(n,s[t]),this.saveFileCache(t,null));var l=Kc(t),c=Kc(n);c!==l?this.updateRelatedLinks([l,c]):this.updateRelatedLinks([l]),this.linkResolverQueue.add(null)}},t.prototype.saveFileCache=function(e,t){if(t?this.fileCache[e]=t:delete this.fileCache[e],this.transactionSave)return this.transactionSave("file",e,t)},t.prototype.saveMetaCache=function(e,t){if(t){if(this.metadataCache[e]=t,!this.transactionSave)return;var n=fc(t);return(i=n).frontmatterPosition&&(i.frontmatterPos=NS(i.frontmatterPosition),delete i.frontmatterPosition),BS(i,RS),this.transactionSave("metadata",e,n)}var i;if(delete this.metadataCache[e],this.transactionSave)return this.transactionSave("metadata",e,null)},t.prototype.work=function(e){var t=this;if(this.workerResolve)throw new Error("Work queue must be sequential!");return new Promise((function(n){t.workerResolve=n,t.worker.postMessage({metadataCache:e},[e])}))},t.prototype.computeMetadataAsync=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.workQueue.queue((function(){return g(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.work(e)];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[2]}}))}))}))]}))}))},t.prototype.onReceiveMessageFromWorker=function(e){this.workerResolve&&(this.workerResolve(e.data),this.workerResolve=null)},t.prototype.cleanupDeletedCache=function(){var e=this.fileCache,t=this.metadataCache,n={};for(var i in e){if(e.hasOwnProperty(i))n[e[i].hash]=!0}for(var r in t)t.hasOwnProperty(r)&&(n[r]||this.saveMetaCache(r,null))},t.prototype.onConfigChanged=function(e){"userIgnoreFilters"===e&&this.updateUserIgnoreFilters()},t.prototype.updateUserIgnoreFilters=function(){var e=this.app.vault.getConfig("userIgnoreFilters"),t=JSON.stringify(e);if(this.userIgnoreFiltersString!==t)if(this.userIgnoreFiltersString=t,this.userIgnoreFilterCache={},e){var n=[];this.userIgnoreFilters=n;for(var i=0,r=e;i<r.length;i++){var o=r[i];try{o.length>2&&o.startsWith("/")&&o.endsWith("/")?n.push(new RegExp(o.substring(1,o.length-1),"i")):n.push(new RegExp("^"+nc(o),"i"))}catch(e){console.error("Bad regex for user ignore filter",e)}}}else this.userIgnoreFilters=null},t.prototype.isSupportedFile=function(e){var t=this.app;return!!t.vault.getConfig("showUnsupportedFiles")||t.viewRegistry.isExtensionRegistered(e.extension)},t.prototype.isUserIgnored=function(e){var t=this.userIgnoreFilters,n=this.userIgnoreFilterCache;if(!t)return!1;if(n.hasOwnProperty(e))return n[e];for(var i=!1,r=0,o=t;r<o.length;r++){if(o[r].test(e)){i=!0;break}}return n[e]=i,i},t.prototype.getAllPropertyInfos=function(){var e=this.fileCache,t=this.metadataCache,n={};for(var i in e)if(e.hasOwnProperty(i)&&!this.isUserIgnored(i)){var r=t[e[i].hash];if(r){var o=r.frontmatter;if(o)for(var a in o)if(o.hasOwnProperty(a)){var s=a.toLowerCase(),l=o[a];n.hasOwnProperty(s)?(n[s].count++,n[s].type||(n[s].type=VF(l))):n[s]={name:a,count:1,type:null!==l?VF(l):void 0}}}}for(var c=0,u=Object.keys(n);c<u.length;c++){a=u[c];if(n.hasOwnProperty(a)){var h=this.app.metadataTypeManager.getAssignedType(a);h&&(n[a].type=h)}}var d=this.app.metadataTypeManager.types;for(var a in d)if(d.hasOwnProperty(a)){s=a.toLowerCase();if(!n.hasOwnProperty(s)){var p=d[a],f=p.name,m=p.type;n[s]={name:f,type:m,count:0}}}return n},t.prototype.getFrontmatterPropertyValuesForKey=function(e){var t=this.fileCache,n=this.metadataCache,i=new Set;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r].hash;if(n[o]){var a=n[o].frontmatter;if(a&&a[e]){var s=a[e];if(dc(s))for(var l=0,c=s;l<c.length;l++){var u=c[l];__(u)&&i.add(u)}else"string"==typeof s&&__(s)&&i.add(s)}}}return Array.from(i).sort(xm)},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(sw);function G_(e,t,n){return g(this,void 0,void 0,(function(){var i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return[4,e.getAllKeys()];case 1:i=l.sent(),r=0,l.label=2;case 2:return r<i.length?(o=i[r],[4,e.getAll(IDBKeyRange.lowerBound(o),t)]):[3,4];case 3:return a=l.sent(),0===(s=a.length)?[3,4]:(n(i.slice(r,r+s),a),r+=s,[3,2]);case 4:return[2]}}))}))}var K_,Y_,Z_=function(e){function t(t){var n=e.call(this,t)||this;n.lastSavedData=null,n.saving=!1,n.saveAgain=!1,n.isPlaintext=!0,n.data=null,n.dirty=!1;var i=mc(n.save.bind(n),2e3);return n.requestSave=function(){n.dirty=!0,i()},n}return f(t,e),t.prototype.onload=function(){e.prototype.onload.call(this);var t=this.app.vault;this.registerEvent(t.on("modify",this.onModify,this))},t.prototype.onUnloadFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.save(!0)];case 1:return e.sent(),[2]}}))}))},t.prototype.onLoadFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.loadFileInternal(e,!0)];case 1:return t.sent(),[2]}}))}))},t.prototype.saveImmediately=function(){if(this.dirty)return this.save(!1)},t.prototype.save=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(this.dirty=!1,n=(t=this).file,i=t.app,r=i.vault,!n||n.deleted)return[2];if(this.saving)return e||(this.saveAgain=!0),[2];if(this.saveAgain=!1,o=this.getViewData(),this.lastSavedData===o||null===this.lastSavedData)return[3,6];a=this.lastSavedData,e?(this.data=null,this.lastSavedData=null,this.clear()):(this.data=o,this.lastSavedData=o),this.saving=!0,l.label=1;case 1:return l.trys.push([1,4,5,6]),[4,gL(r.adapter.promise)];case 2:return l.sent(),[4,r.modify(n,o)];case 3:return l.sent(),[3,6];case 4:throw s=l.sent(),this.lastSavedData=a,console.error(s),new JA(Qf.interface.msgFailToSaveFile({filepath:n.path,message:s.message}),0),this.app.fileManager.storeTextFileBackup(n.path,o),s;case 5:return this.saving=!1,this.saveAgain&&!e&&this.save(),[7];case 6:return[2]}}))}))},t.prototype.onModify=function(e){this.saving||e===this.file&&this.loadFileInternal(e,!1)},t.prototype.loadFileInternal=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return e.saving?[4,this.app.vault.cachedRead(e)]:[3,2];case 1:return n=o.sent(),[3,4];case 2:return[4,this.app.vault.read(e)];case 3:n=o.sent(),o.label=4;case 4:if(i=this.lastSavedData,this.lastSavedData=n,!t&&i){if(i===n)return[2];if(this.dirty){if((r=this.getViewData())===n)return[2];r!==i&&this.isPlaintext&&(n=XH(i,r,n),new JA(Qf.interface.msgFileChanged({file:e.path})))}}return this.setData(n,t),[2]}}))}))},t.prototype.setData=function(e,t){(this.data!==e||t)&&(this.data=e,this.setViewData(e,t))},t}(oH);!function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Library="LIBRARY",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE"}(K_||(K_={})),function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"}(Y_||(Y_={}));function X_(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return[2,i.sent()];case 2:throw t=i.sent(),(n=t.message)&&(n.contains("does not exist")||n.contains("there is no such file"))&&(t.code="ENOENT"),t;case 3:return[2]}}))}))}var $_=5242880,Q_=function(){function e(e){this.uri="",this.dir=e}return e.prototype.init=function(){return g(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,fA.getUri({directory:this.dir,path:""})];case 1:return e.uri=t.sent().uri,[2]}}))}))},e.prototype.watch=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,fA.startWatch({directory:this.dir,path:e})];case 1:return t.sent(),[2]}}))}))},e.prototype.verifyIcloud=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,fA.verifyIcloud({path:e})];case 1:return t.sent(),[2]}}))}))},e.prototype.read=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.readFile({directory:this.dir,path:e,encoding:Y_.UTF8}))];case 1:return[2,t.sent().data]}}))}))},e.prototype.readBinary=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(this.stat(e))];case 1:return t.sent().size<$_?[4,X_(fA.readFile({directory:this.dir,path:e}))]:[3,3];case 2:return[2,pf(t.sent().data)];case 3:return[4,fetch(this.getUri(e))];case 4:return[2,t.sent().arrayBuffer()]}}))}))},e.prototype.write=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,X_(fA.writeFile({directory:this.dir,path:e,data:t,encoding:Y_.UTF8}))];case 1:return n.sent(),[2]}}))}))},e.prototype.writeBinary=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,X_(this.writeBinaryInternal(e,t))];case 1:return n.sent(),[2]}}))}))},e.prototype.writeBinaryInternal=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t.byteLength<$_?[4,fA.writeFile({directory:this.dir,path:e,data:ff(t)})]:[3,2];case 1:return s.sent(),[2];case 2:return[4,fA.writeFile({directory:this.dir,path:e,data:""})];case 3:s.sent(),s.label=4;case 4:s.trys.push([4,8,,10]),n=0,s.label=5;case 5:return n<t.byteLength?(i=Math.min(1048576,t.byteLength-n),r=new Uint8Array(t,n,i),o=mf(r),[4,fA.appendFile({directory:this.dir,path:e,data:o})]):[3,7];case 6:return s.sent(),n+=i,[3,5];case 7:return[3,10];case 8:return a=s.sent(),[4,fA.deleteFile({directory:this.dir,path:e})];case 9:throw s.sent(),a;case 10:return[2]}}))}))},e.prototype.append=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,X_(fA.appendFile({directory:this.dir,path:e,data:t,encoding:Y_.UTF8}))];case 1:return n.sent(),[2]}}))}))},e.prototype.mkdir=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.mkdir({directory:this.dir,path:e,recursive:!0}))];case 1:return t.sent(),[2]}}))}))},e.prototype.readdir=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.readdir({directory:this.dir,path:e}))];case 1:return[2,t.sent().files]}}))}))},e.prototype.stat=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.stat({directory:this.dir,path:e}))];case 1:return[2,t.sent()]}}))}))},e.prototype.watchAndStatAll=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.watchAndStatAll({directory:this.dir,path:e}))];case 1:return[2,t.sent()]}}))}))},e.prototype.exists=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.stat(e)];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}}))}))},e.prototype.setTimes=function(e,t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,X_(fA.setTimes({directory:this.dir,path:e,ctime:t,mtime:n}))];case 1:return i.sent(),[2]}}))}))},e.prototype.rmdir=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.rmdir({directory:this.dir,path:e,recursive:!0}))];case 1:return t.sent(),[2]}}))}))},e.prototype.delete=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.deleteFile({directory:this.dir,path:e}))];case 1:return t.sent(),[2]}}))}))},e.prototype.rename=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,X_(fA.rename({directory:this.dir,from:e,to:t}))];case 1:return n.sent(),[2]}}))}))},e.prototype.copy=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,X_(fA.copy({directory:this.dir,from:e,to:t}))];case 1:return n.sent(),[2]}}))}))},e.prototype.open=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.open({directory:this.dir,path:e}))];case 1:return t.sent(),[2]}}))}))},e.prototype.trash=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,X_(fA.trash({directory:this.dir,path:e}))];case 1:return t.sent(),[2]}}))}))},e.prototype.getNativeUri=function(e){e=nu(e);var t=this.uri;return"/"===e?t:(t.endsWith("/")||(t+="/"),t+e.split("/").map((function(e){return encodeURIComponent(e)})).join("/"))},e.prototype.getUri=function(e){var t=this.getNativeUri(e);return t.startsWith("file://")&&(t=A.convertFileSrc(t)),t},e}();function J_(e){return{ctime:Math.round(e.ctime),mtime:Math.round(e.mtime),size:e.size}}window.FS=Q_;var eW=function(){function e(e,t){var n=this;this.fs=t,this.basePath=e,this.files={},this.promise=Promise.resolve(),this.handler=null,this.insensitive=!1,g(n,void 0,void 0,(function(){return y(this,(function(e){try{this.testInsensitive()}catch(e){console.error(e)}return[2]}))}))}return e.prototype.testInsensitive=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},e.prototype.getName=function(){return Kc(this.basePath)},e.prototype.watchAndList=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:this.files["/"]={type:"folder",realpath:"/"},o.label=1;case 1:return o.trys.push([1,3,,6]),[4,this.fs.watchAndStatAll(this.basePath)];case 2:if((e=o.sent()).children)for(t=0,n=e.children;t<n.length;t++)i=n[t],this.quickList("",i);return[3,6];case 3:return r=o.sent(),console.error("Failed to run quick list",r),[4,this.fs.watch(this.basePath)];case 4:return o.sent(),[4,this.listRecursive("")];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.quickList=function(e,t){var n=t.name,i=nu(""===e?n:e+"/"+n),r=tu(i);this.trigger("raw",r),Zc(r)||("file"===t.type?this.reconcileFileChanged(i,r,t):"directory"===t.type&&(this.files.hasOwnProperty(r)?this.files[r].realpath=i:(this.files[r]={type:"folder",realpath:i},this.trigger("folder-created",r))))},e.prototype.listRecursive=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=this.getFullRealPath(e),[4,this.fs.readdir(t)];case 1:for(n=s.sent(),i=[],r=0,o=n;r<o.length;r++)a=o[r],i.push(this.listRecursiveChild(e,a));return[4,Promise.all(i)];case 2:return s.sent(),[2]}}))}))},e.prototype.listRecursiveChild=function(e,t){return g(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=nu(""===e?t.name:e+"/"+t.name),i=tu(n),this.trigger("raw",i),Zc(i)?[4,this.reconcileDeletion(n,i)]:[3,2];case 1:return[2,r.sent()];case 2:return"file"!==t.type?[3,3]:(this.reconcileFileChanged(n,i,t),[3,5]);case 3:return"directory"!==t.type?[3,5]:[4,this.reconcileFolderCreation(n,i)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},e.prototype.mkdir=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:t=this.getFullPath(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fs.mkdir(t)];case 2:return i.sent(),[3,4];case 3:if("Directory exists"!==(n=i.sent()).message)throw n;return[3,4];case 4:return[4,this.reconcileInternalFile(e)];case 5:return i.sent(),[2]}}))}))}))},e.prototype.trashSystem=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:t=this.getFullPath(e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fs.trash(t)];case 2:return n.sent(),[3,4];case 3:return n.sent(),[2,!1];case 4:return[4,this.reconcileInternalFile(e)];case 5:return n.sent(),[2,!0]}}))}))}))},e.prototype.trashLocal=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:t=this.getFullPath(e),n=this.getFullPath(".trash"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.fs.mkdir(n)];case 2:return c.sent(),[3,4];case 3:if("Directory exists"!==(i=c.sent()).message)throw i;return[3,4];case 4:r=Kc(t),o=$c(r),a=Qc(r),s=n+"/"+o,a&&(s=s+"."+a),l=1,c.label=5;case 5:return[4,this._exists(s)];case 6:return c.sent()?(l++,s=n+"/"+o+" "+l,a&&(s=s+"."+a),[3,5]):[3,7];case 7:return[4,this.fs.rename(t,s)];case 8:return c.sent(),[4,this.reconcileInternalFile(e)];case 9:return c.sent(),[2]}}))}))}))},e.prototype.rmdir=function(e,t){var n=this;return this.queue((function(){return g(n,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),[4,this.fs.rmdir(t)];case 1:return n.sent(),[4,this.reconcileInternalFile(e)];case 2:return n.sent(),[2]}}))}))}))},e.prototype.read=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){t=this.getFullPath(e);try{return[2,this.fs.read(t)]}catch(t){throw this.queue((function(){return n.reconcileInternalFile(e)})),t}return[2]}))}))}))},e.prototype.readBinary=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){t=this.getFullPath(e);try{return[2,this.fs.readBinary(t)]}catch(t){throw this.queue((function(){return n.reconcileInternalFile(e)})),t}return[2]}))}))}))},e.prototype.write=function(e,t,n){var i=this;return this.queue((function(){return g(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,6,8]),[4,this.fs.write(i,t)];case 2:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,4]:[3,5];case 3:r.sent(),r.label=4;case 4:n.immediate&&n.immediate(),r.label=5;case 5:return[3,8];case 6:return[4,this.reconcileInternalFile(e)];case 7:return r.sent(),[7];case 8:return[2]}}))}))}))},e.prototype.writeBinary=function(e,t,n){var i=this;return this.queue((function(){return g(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,6,8]),[4,this.fs.writeBinary(i,t)];case 2:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,4]:[3,5];case 3:r.sent(),r.label=4;case 4:n.immediate&&n.immediate(),r.label=5;case 5:return[3,8];case 6:return[4,this.reconcileInternalFile(e)];case 7:return r.sent(),[7];case 8:return[2]}}))}))}))},e.prototype.append=function(e,t,n){var i=this;return this.queue((function(){return g(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,6,8]),[4,this.fs.append(i,t)];case 2:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,4]:[3,5];case 3:r.sent(),r.label=4;case 4:n.immediate&&n.immediate(),r.label=5;case 5:return[3,8];case 6:return[4,this.reconcileInternalFile(e)];case 7:return r.sent(),[7];case 8:return[2]}}))}))}))},e.prototype.process=function(e,t,n){return g(this,void 0,Promise,(function(){var i=this;return y(this,(function(r){return[2,this.queue((function(){return g(i,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=this.getFullPath(e),[4,this.fs.read(i)];case 1:if(r=a.sent(),(o=t(r))===r)return[2,r];a.label=2;case 2:return a.trys.push([2,,7,9]),[4,this.fs.write(i,o)];case 3:return a.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,5]:[3,6];case 4:a.sent(),a.label=5;case 5:n.immediate&&n.immediate(),a.label=6;case 6:return[3,9];case 7:return[4,this.reconcileInternalFile(e)];case 8:return a.sent(),[7];case 9:return[2,o]}}))}))}))]}))}))},e.prototype.getResourcePath=function(e){var t=this.getFullPath(e);return this.fs.getUri(t)},e.prototype.getNativePath=function(e){var t=this.getFullPath(e);return this.fs.getNativeUri(t)},e.prototype.open=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){return t=this.getFullPath(e),[2,this.fs.open(t)]}))}))},e.prototype.remove=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),[4,this.fs.delete(t)];case 1:return n.sent(),[4,this.reconcileInternalFile(e)];case 2:return n.sent(),[2]}}))}))}))},e.prototype.update=function(e){var t=this;return this.queue((function(){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.reconcileInternalFile(e)];case 1:return t.sent(),[2]}}))}))}))},e.prototype.rename=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return e===t?[2]:[4,this.queue((function(){return g(n,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return n=this.getFullPath(e),i=this.getFullPath(t),[4,this._exists(i,!1)];case 1:if(d.sent()&&(!this.insensitive||e.toLowerCase()!==t.toLowerCase()))throw new Error("Destination file already exists!");return r=this.files[e],o=r?r.realpath:null,[4,this.fs.rename(n,i)];case 2:if(d.sent(),!r)return[2];if(delete this.files[e],a=this.getRealPath(t),r.realpath=a,this.files[t]=r,this.trigger("renamed",t,e),"folder"===r.type)for(s in this.files)this.files.hasOwnProperty(s)&&s.startsWith(e+"/")&&(l=s.slice(e.length),c=t+l,u=this.files[s],delete this.files[s],h=u.realpath.slice(o.length),u.realpath=a+h,this.files[c]=u,this.trigger("renamed",c,s));return[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},e.prototype.copy=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return[4,this.queue((function(){return g(n,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=this.getFullPath(e),i=this.getFullPath(t),[4,this.fs.copy(n,i)];case 1:return r.sent(),[4,this.reconcileInternalFile(t)];case 2:return r.sent(),[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},e.prototype.exists=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){return[2,this.queue((function(){var i=n.getFullPath(e);return n._exists(i,t)}))]}))}))},e.prototype._exists=function(e,t){return g(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.fs.stat(e)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[2,!1];case 3:return t&&this.insensitive?(n=Yc(e),i=Kc(e),[4,this.fs.readdir(n)]):[3,5];case 4:if(-1===r.sent().map((function(e){return e.name})).indexOf(i))return[2,!1];r.label=5;case 5:return[2,!0]}}))}))},e.prototype.stat=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:t=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fs.stat(t)];case 2:return"file"===(n=r.sent()).type?[2,m({type:"file"},J_(n))]:"directory"===n.type?[2,m({type:"folder"},J_(n))]:[3,4];case 3:if("ENOENT"!==(i=r.sent()).code)throw i;return[3,4];case 4:return[2,null]}}))}))}))]}))}))},e.prototype.list=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return t=this.getFullPath(e),[4,this.fs.readdir(t)];case 1:for(n=c.sent(),i={folders:[],files:[]},r=0,o=n;r<o.length;r++)a=o[r],s=nu(""===e?a.name:e+"/"+a.name),l=tu(s),"file"===a.type&&i.files.push(l),"directory"===a.type&&i.folders.push(l);return[2,i]}}))}))}))]}))}))},e.prototype.watch=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){switch(n.label){case 0:return[4,this.stopWatch()];case 1:return n.sent(),this.handler=e,[4,fA.addListener("change",(function(e){var n=nu(e.path),i=nu(n.substr(t.basePath.length));t.onFileChange(i)}))];case 2:return n.sent(),[2,this.queue((function(){return t.watchAndList()}))]}}))}))},e.prototype.stopWatch=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,fA.stopWatch()];case 1:return e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return this.handler=null,[2]}}))}))},e.prototype.onFileChange=function(e){var t=this;e&&(e=nu(e),setTimeout((function(){var n=tu(e);t.queue((function(){return t.reconcileFile(e,n,!1)}))}),0))},e.prototype.reconcileInternalFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.reconcileFile(this.getRealPath(e),e)]}))}))},e.prototype.reconcileFile=function(e,t){return g(this,arguments,Promise,(function(e,t,n){var i,r,o,a,s,l,c;return void 0===n&&(n=!0),y(this,(function(u){switch(u.label){case 0:return this.trigger("raw",t),Zc(t)?[4,this.reconcileDeletion(e,t,n)]:[3,2];case 1:return[2,u.sent()];case 2:return(i=Yc(t))&&"/"!==i?this.files[t]?[3,4]:[4,this.reconcileFile(Yc(e),i,n)]:[3,4];case 3:u.sent(),u.label=4;case 4:return u.trys.push([4,12,,16]),r=this.getFullRealPath(e),this.insensitive?(o=Yc(r),a=Kc(t),[4,this.fs.readdir(o)]):[3,7];case 5:return s=u.sent(),-1!==s.map((function(e){return Gc(e.name).normalize("NFC")})).indexOf(a)?[3,7]:[4,this.reconcileDeletion(e,t,n)];case 6:return[2,u.sent()];case 7:return[4,this.fs.stat(r)];case 8:return"file"!==(l=u.sent()).type?[3,9]:(this.reconcileFileChanged(e,t,l),[3,11]);case 9:return"directory"!==l.type?[3,11]:[4,this.reconcileFolderCreation(e,t)];case 10:u.sent(),u.label=11;case 11:return[3,16];case 12:return"ENOENT"!==(c=u.sent()).code?[3,14]:[4,this.reconcileDeletion(e,t,n)];case 13:return u.sent(),[3,15];case 14:console.error(c),u.label=15;case 15:return[3,16];case 16:return[2]}}))}))},e.prototype.reconcileFileChanged=function(e,t,n){var i=this.files[t];if(i){if(i.realpath=e,"file"===i.type&&(i.mtime!==Math.round(n.mtime)||i.size!==n.size)){i.mtime=Math.round(n.mtime),i.size=n.size;var r=J_(n);this.trigger("modified",t,t,r)}}else this.reconcileFileCreation(e,t,n)},e.prototype.reconcileFileCreation=function(e,t,n){var i=J_(n);this.files[t]||(this.files[t]=function(e,t){return"file"===t.type?{type:"file",realpath:e,ctime:Math.round(t.ctime),mtime:Math.round(t.mtime),size:t.size}:"directory"===t.type?{type:"folder",realpath:e}:void 0}(e,n),this.trigger("file-created",t,t,i))},e.prototype.reconcileFolderCreation=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return this.files.hasOwnProperty(t)?[3,2]:(this.files[t]={type:"folder",realpath:e},this.trigger("folder-created",t),[4,this.listRecursive(e)]);case 1:return n.sent(),[3,3];case 2:this.files[t].realpath=e,n.label=3;case 3:return[2]}}))}))},e.prototype.reconcileDeletion=function(e,t){return g(this,arguments,Promise,(function(e,t,n){var i,r,o=this;return void 0===n&&(n=!0),y(this,(function(a){if("/"===t)return this.trigger("closed",t),[2];if(!(i=this.files[t]))return[2];if(!n)return setTimeout((function(){o.queue((function(){return o.reconcileFile(e,t)}))}),100),[2];if("folder"===i.type)for(r in this.files)this.files.hasOwnProperty(r)&&r.startsWith(t+"/")&&this.removeFile(r);return this.removeFile(t),[2]}))}))},e.prototype.trigger=function(e,t,n,i){this.handler&&this.handler(e,t,n,i)},e.prototype.getRealPath=function(e){for(var t=e;t;){if(this.files.hasOwnProperty(t)){var n=e.substr(t.length);return this.files[t].realpath+n}t=Yc(t)}return e},e.prototype.getFullPath=function(e){var t=this.getRealPath(e);return this.getFullRealPath(t)},e.prototype.getFullRealPath=function(e){return this.basePath+"/"+e},e.prototype.queue=function(e){var t=this.promise.then(e,e);return this.promise=t,t},e.prototype.removeFile=function(e){var t=this.files[e];delete this.files[e],t&&("file"===t.type?this.trigger("file-removed",e):"folder"===t.type&&this.trigger("folder-removed",e))},e}(),tW="https://github.com/";function nW(e,t,n){return"https://raw.githubusercontent.com/"+e+"/"+(n||"HEAD")+"/"+t}function iW(e){return tW+e}function rW(e,t,n){return tW+e+"/releases/download/"+t+"/"+n}function oW(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:if(n=t.version||null,i=t.minAppVersion,!c2||!i||!sL(c2,i))return[2,n];a.label=1;case 1:return a.trys.push([1,3,,4]),n=null,[4,WA(nW(e,"versions.json")).json];case 2:if(r=a.sent()){for(o in r)r.hasOwnProperty(o)&&(sL(c2,r[o])||n&&!sL(n,o)||(n=o));return[2,n]}return[3,4];case 3:return a.sent(),[3,4];case 4:return[2,null]}}))}))}var aW=/^https:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([^\/]+)\/(.*)$/;function sW(e,t){e.on("click","a",(function(t,n){if(0===t.button&&n.instanceOf(HTMLAnchorElement)&&n.getAttr("href").startsWith("#"))for(var i=n.getAttr("href").substring(1).toLowerCase(),r=0,o=e.findAll("h1,h2,h3,h4,h5,h6");r<o.length;r++){var a=o[r],s=a.getAttr("data-heading");if(s)if(s.toLowerCase().replace(IL,"").replace(/ /g,"-")===i)return void a.scrollIntoView({behavior:"smooth",block:"start"})}}));for(var n=0,i=Array.from(e.findAll(".internal-embed"));n<i.length;n++){if(c=(l=i[n]).getAttr("src")){var r=Qc(c),o=nW(t,c);WT.contains(r)?Ec(l,o):kc(l,o)}}for(var a=0,s=Array.from(e.findAll("img, video"));a<s.length;a++){var l;if((l=s[a]).instanceOf(HTMLImageElement)||l.instanceOf(HTMLMediaElement)){var c;if(!(c=l.getAttr("src")))continue;if(!c.contains(":")){l.src=nW(t,c);continue}var u=c.match(aW);if(u){var h=u[1],d=u[2],p=u[3],f=u[4];l.src=nW(h+"/"+d,f,p);continue}}}}var lW="release-notes",cW="obsidianmd/obsidian-docs",uW=function(e){function t(t){var n=e.call(this,t)||this;return n.canDropAnywhere=!0,n.navigation=!0,n.version="",n.contentEl.addClass("release-notes-view"),n}return f(t,e),t.prototype.getDisplayText=function(){return"Release Notes ".concat(this.version)},t.prototype.getViewType=function(){return lW},t.prototype.getIcon=function(){return"lucide-book-up"},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.currentVersion=this.version,t},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=this.version,[4,e.prototype.setState.call(this,t,n)];case 1:return o.sent(),(r=t.currentVersion)&&/^(\d+)\.(\d+)(\.\d+)?$/.test(r)&&(this.version=r),this.version||(this.version=electron.ipcRenderer.sendSync("version")),i!==this.version&&this.render(),[2]}}))}))},t.prototype.fetchReleaseNotes=function(e){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:t=nW(cW,"Release%20notes/v".concat(e,".md")),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,WA({url:t,throw:!0}).text];case 2:return n=r.sent(),[3,4];case 3:return i=r.sent(),n=404===i.status?"No release notes available for ".concat(e,"."):"Could not load release notes for ".concat(e,"."),[3,4];case 4:return[2,n]}}))}))},t.prototype.showPatchNotes=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return e.hasChildNodes()?[3,2]:[4,zw(e,(function(){return r.fetchReleaseNotes(t)}))];case 1:n=o.sent(),i=bS(gS(pS(n))),e.appendChild(qT(i)),o.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u=this;return y(this,(function(h){switch(h.label){case 0:return(e=this.contentEl).empty(),t=e.createDiv("cm-scroller"),n=this.app.vault.getConfig("readableLineLength"),t.toggleClass("is-readable-line-width",n),i=t.createDiv("markdown-preview-view markdown-rendered"),r=aL(this.version),0!==(o=r).last()&&(o=w(w([],o.slice(0,-1),!0),[0],!1)),a=function(e,t){return createDiv("callout is-collapsed is-collapsible",(function(n){var i;n.setAttribute("data-callout",e.type),n.createDiv({cls:"callout-title"},(function(t){t.createDiv({cls:"callout-title-inner",text:e.title});var r=t.createDiv("callout-fold",(function(e){return mx(e,"lucide-chevron-down")}));t.addEventListener("click",(function(){var t,o=n.hasClass("is-collapsed");Ml(i,!o,!0),n.toggleClass("is-collapsed",!o),r.toggleClass("is-collapsed",!o),null===(t=e.onClick)||void 0===t||t.call(e,i)})),r.addClass("is-collapsed")})),i=n.createDiv("callout-content"),null==t||t(i),i.hide(),n.addClass("is-collapsed")}))},r.last()>0&&(i.appendChild(a({title:"What's new in v".concat(this.version),type:"attention",onClick:function(e){return u.showPatchNotes(e,u.version)}})),r.last()>1&&i.appendChild(a({title:"Other versions",type:""},(function(e){for(var t=function(t){var n=w(w([],o.slice(0,-1),!0),[t],!1).join(".");e.appendChild(a({title:"What's new in v".concat(n),type:"info",onClick:function(e){return u.showPatchNotes(e,n)}}))},n=r.last()-1;n>=0;n--)t(n)}))),i.createEl("hr")),s=r.slice(0,-1),[4,this.fetchReleaseNotes(s.join("."))];case 1:return l=h.sent(),c=bS(gS(pS(l))),i.createEl("h1",{text:"What's new in v".concat(s.join("."))}),i.appendChild(qT(c)),sW(i,cW),i.createEl("section",{cls:"footnotes"},(function(e){e.createEl("hr"),e.createEl("p",{cls:"footnote",text:"A complete list of previous changes can be found on "},(function(e){e.createEl("a",{href:"https://obsidian.md/changelog",text:"our changelog",cls:"external-link"}),e.appendText(".")}))})),[2]}}))}))},t}(GP);const hW=uW;var dW=function(e){function t(){var t=e.call(this)||this;return t.viewByType={},t.typeByExtension={},t.registerViewWithExtensions(GT,LY.VIEW_TYPE,(function(e){return new LY(e)})),t.registerViewWithExtensions(UT,cH.VIEW_TYPE,(function(e){return new cH(e)})),t.registerViewWithExtensions(_T,sH.VIEW_TYPE,(function(e){return new sH(e)})),t.registerViewWithExtensions(WT,HH.VIEW_TYPE,(function(e){return new HH(e)})),t.registerViewWithExtensions(jT,BH.VIEW_TYPE,(function(e){return new BH(e)})),t.registerView(lW,(function(e){return new hW(e)})),t}return f(t,e),t.prototype.registerView=function(e,t){var n=this.viewByType;if(n.hasOwnProperty(e))throw new Error('Attempting to register an existing view type "'.concat(e,'"'));n[e]=t,this.trigger("view-registered",e)},t.prototype.unregisterView=function(e){var t=this.viewByType;t.hasOwnProperty(e)&&(delete t[e],this.trigger("view-unregistered",e))},t.prototype.registerExtensions=function(e,t){for(var n=this.typeByExtension,i=0,r=e;i<r.length;i++){var o=r[i];if(n.hasOwnProperty(o))throw new Error('Attempting to register an existing file extension "'.concat(o,'"'))}for(var a=0,s=e;a<s.length;a++){o=s[a];this.typeByExtension[o]=t}this.trigger("extensions-updated")},t.prototype.unregisterExtensions=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];delete this.typeByExtension[i]}this.trigger("extensions-updated")},t.prototype.registerViewWithExtensions=function(e,t,n){this.registerView(t,n),this.registerExtensions(e,t)},t.prototype.getViewCreatorByType=function(e){return this.viewByType[e]},t.prototype.getTypeByExtension=function(e){return this.typeByExtension[e]},t.prototype.isExtensionRegistered=function(e){return this.typeByExtension.hasOwnProperty(e)},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(sw);function pW(e){e.checkCallback?e.checkCallback(!1):e.callback?e.callback():console.error("Command ".concat(e," did not provide a callback"))}var fW=function(){function e(e){this.commands={},this.editorCommands={},this.app=e}return e.prototype.addCommand=function(e){var t=this;e.mobileOnly&&!Zl.isMobile||((e.editorCallback||e.editorCheckCallback)&&(e.checkCallback=function(n){var i=t.app.workspace.activeEditor;if(!i)return null;if(e.allowPreview||"preview"!==i.getMode()){var r=i.editor,o=i;if(i instanceof LY){if(i.inlineTitleEl.isActiveElement())return;if(i.titleEl.isActiveElement())return;if(!e.allowProperties&&activeDocument.activeElement.closest(".metadata-container"))return}return e.editorCheckCallback?e.editorCheckCallback(n,r,o):e.editorCallback?(n||e.editorCallback(r,o),!0):void 0}},this.editorCommands[e.id]=e),e.showOnMobileToolbar&&(this.editorCommands[e.id]=e),this.commands[e.id]=e,e.hotkeys&&this.app.hotkeyManager.addDefaultHotkeys(e.id,e.hotkeys))},e.prototype.removeCommand=function(e){this.commands.hasOwnProperty(e)&&this.app.hotkeyManager.removeDefaultHotkeys(e),delete this.commands[e],delete this.editorCommands[e]},e.prototype.findCommand=function(e){return this.commands[e]},e.prototype.listCommands=function(){return Object.values(this.commands).filter((function(e){if(!e.checkCallback)return!0;try{return e.checkCallback(!0)}catch(t){return console.log("Command failed to execute: ",e.id),console.error(t),!1}}))},e.prototype.executeCommandById=function(e,t){var n=this.findCommand(e);return!!n&&this.executeCommand(n,t)},e.prototype.executeCommand=function(e,t){this.app.lastEvent=t||null;try{pW(e)}catch(t){return console.log("Command failed to execute: ",e.id),console.error(t),!1}return!0},e}(),mW="AES-GCM";function vW(e){return crypto.subtle.importKey("raw",e,mW,!1,["encrypt","decrypt"])}function gW(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return n||(n=crypto.getRandomValues(new Uint8Array(12))),[4,crypto.subtle.encrypt({name:mW,iv:n},t,e)];case 1:return i=a.sent(),r=new ArrayBuffer(n.byteLength+i.byteLength),(o=new Uint8Array(r)).set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),[2,r]}}))}))}function yW(e,t){return g(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:if(e.byteLength<12)throw new Error("Encrypted data is bad");return 12===e.byteLength?[2,new ArrayBuffer(0)]:(n=new Uint8Array(e,0,12),i=new Uint8Array(e,12),[4,crypto.subtle.decrypt({name:mW,iv:n},t,i)]);case 1:return[2,r.sent()]}}))}))}var bW=function(e){function t(n){var i=e.call(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return f(t,e),t}(Error);function wW(e){for(var t=0;t<e.length;t++)e[t]=0;return e}function kW(e,t){for(var n=0;n<t.length;n++)e[n]^=t[n]}var CW=function(){function e(){this.data=new Uint8Array(e.SIZE)}return e.prototype.clear=function(){wW(this.data)},e.prototype.clone=function(){var t=new e;return t.copy(this),t},e.prototype.copy=function(e){this.data.set(e.data)},e.prototype.dbl=function(){for(var t,n,i=0,r=e.SIZE-1;r>=0;r--){var o=this.data[r]>>>7&255;this.data[r]=this.data[r]<<1|i,i=o}this.data[e.SIZE-1]^=(t=i,n=e.R,~(t-1)&n|t-1&0),i=0},e.SIZE=16,e.R=135,e}();const MW=CW;var EW=function(){function e(e){this.key=e}return e.importKey=function(t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,window.crypto.subtle.deriveKey({name:"HKDF",salt:n,info:(new TextEncoder).encode("ObsidianAesSivEnc"),hash:"SHA-256"},t,{name:"AES-CTR",length:256},!1,["encrypt"])];case 1:return[2,new e(i.sent())]}}))}))},e.prototype.encryptCtr=function(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,window.crypto.subtle.encrypt({name:"AES-CTR",counter:e,length:16},this.key,t)];case 1:return n=i.sent(),[2,new Uint8Array(n)]}}))}))},e}();const SW=EW;var xW=function(){function e(e){this._key=e,this._iv=new MW,this._emptyPromise=Promise.resolve(this)}return e.importKey=function(t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,window.crypto.subtle.deriveKey({name:"HKDF",salt:n,info:(new TextEncoder).encode("ObsidianAesSivMac"),hash:"SHA-256"},t,{name:"AES-CBC",length:256},!1,["encrypt"])];case 1:return[2,new e(i.sent())]}}))}))},e.prototype.clear=function(){return this},e.prototype.encryptBlock=function(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t={name:"AES-CBC",iv:this._iv.data},[4,window.crypto.subtle.encrypt(t,this._key,e.data)];case 1:return n=i.sent(),e.data.set(new Uint8Array(n,0,MW.SIZE)),[2,this._emptyPromise]}}))}))},e}();const TW=xW;var DW=function(){function e(e,t,n){this._cipher=e,this._subkey1=t,this._subkey2=n,this._bufferPos=0,this._finished=!1,this._buffer=new MW}return e.importKey=function(t,n){return g(this,void 0,Promise,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,TW.importKey(t,n)];case 1:return i=a.sent(),r=new MW,[4,i.encryptBlock(r)];case 2:return a.sent(),r.dbl(),(o=r.clone()).dbl(),[2,function(){return new e(i,r,o)}]}}))}))},e.prototype.update=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:if(this._finished)throw new Error("Cannot update finished CMAC");if(t=MW.SIZE-this._bufferPos,n=0,!((i=e.length)>t))return[3,2];for(r=0;r<t;r++)this._buffer.data[this._bufferPos+r]^=e[r];return i-=t,n+=t,[4,this._cipher.encryptBlock(this._buffer)];case 1:o.sent(),this._bufferPos=0,o.label=2;case 2:if(!(i>MW.SIZE))return[3,4];for(r=0;r<MW.SIZE;r++)this._buffer.data[r]^=e[n+r];return i-=MW.SIZE,n+=MW.SIZE,[4,this._cipher.encryptBlock(this._buffer)];case 3:return o.sent(),[3,2];case 4:for(r=0;r<i;r++)this._buffer.data[this._bufferPos++]^=e[n+r];return[2,this]}}))}))},e.prototype.finish=function(){return g(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this._finished?[3,2]:(e=this._bufferPos<MW.SIZE?this._subkey2:this._subkey1,kW(this._buffer.data,e.data),this._bufferPos<MW.SIZE&&(this._buffer.data[this._bufferPos]^=128),[4,this._cipher.encryptBlock(this._buffer)]);case 1:t.sent(),this._finished=!0,t.label=2;case 2:return[2,this._buffer.data]}}))}))},e}(),AW=function(){function e(e,t){this.cmacFactory=e,this._ctr=t}return e.importKey=function(t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return[4,DW.importKey(t,n)];case 1:return i=o.sent(),[4,SW.importKey(t,n)];case 2:return r=o.sent(),[2,new e(i,r)]}}))}))},e.prototype.seal=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t=MW.SIZE+e.length,n=new Uint8Array(t),[4,this._s2v(e)];case 1:return i=a.sent(),n.set(i),LW(i),o=(r=n).set,[4,this._ctr.encryptCtr(i,e)];case 2:return o.apply(r,[a.sent(),i.length]),[2,n]}}))}))},e.prototype.open=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:if(e.length<MW.SIZE)throw new bW("AES-SIV: ciphertext is truncated");return t=e.subarray(0,MW.SIZE),(n=new Uint8Array(MW.SIZE)).set(t),LW(n),[4,this._ctr.encryptCtr(n,e.subarray(MW.SIZE))];case 1:return i=o.sent(),[4,this._s2v(i)];case 2:if(r=o.sent(),s=t,0===(a=r).length||0===s.length||0===function(e,t){if(e.length!==t.length)return 0;for(var n=0,i=0;i<e.length;i++)n|=e[i]^t[i];return 1&n-1>>>8}(a,s))throw wW(i),new bW("AES-SIV: ciphertext verification failure!");return[2,i]}var a,s}))}))},e.prototype._s2v=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=this.cmacFactory(),n=new MW,i=new MW,[4,t.update(n.data)];case 1:return s.sent(),o=(r=i.data).set,[4,t.finish()];case 2:return o.apply(r,[s.sent()]),t=this.cmacFactory(),n.clear(),e.length>=MW.SIZE?(a=e.length-MW.SIZE,n.data.set(e.subarray(a)),[4,t.update(e.subarray(0,a))]):[3,4];case 3:return s.sent(),[3,5];case 4:n.data.set(e),n.data[e.length]=128,i.dbl(),s.label=5;case 5:return kW(n.data,i.data),[4,t.update(n.data)];case 6:return s.sent(),[2,t.finish()]}}))}))},e}();function LW(e){e[e.length-8]&=127,e[e.length-4]&=127}var PW=0;localStorage.getItem("sync-use-encryption-v3")&&(console.debug("Sync encryption version overridden. Using version 3."),PW=3);var IW=32768,FW={N:IW,r:8,p:1,maxmem:67108864};function OW(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return e=e.normalize("NFKC"),t=t.normalize("NFKC"),(n=window.require&&window.require("crypto"))?[4,new Promise((function(i,r){n.scrypt(Buffer.from(e,"utf8"),Buffer.from(t,"utf8"),32,FW,(function(e,t){e?r(e):i(t)}))}))]:[3,2];case 1:return[2,su(i.sent())];case 2:return[4,window.scrypt.scrypt(new Uint8Array(hf(e)),new Uint8Array(hf(t)),IW,8,1,32)];case 3:return[2,uf(i.sent())]}}))}))}function BW(e,t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(e){case 0:return[2,RW.init(t)];case 2:case 3:return[2,HW.init(t,n,e)];default:throw new Error("Encryption version not supported")}return[2]}))}))}function NW(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:switch(n){case 0:return[3,1];case 2:case 3:return[3,3]}return[3,7];case 1:return i=bf,[4,gf(e)];case 2:return[2,i.apply(void 0,[s.sent()])];case 3:return[4,crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveKey"])];case 4:return r=s.sent(),[4,crypto.subtle.deriveKey({name:"HKDF",salt:hf(t),info:hf("ObsidianKeyHash"),hash:"SHA-256"},r,{name:"AES-CBC",length:256},!0,["encrypt"])];case 5:return o=s.sent(),a=bf,[4,crypto.subtle.exportKey("raw",o)];case 6:return[2,a.apply(void 0,[s.sent()])];case 7:throw new Error("Encryption version not supported")}}))}))}var RW=function(){function e(e,t){this.encryptionVersion=0,this.keyHash=e,this.cryptoKey=t}return e.init=function(t){return g(this,void 0,Promise,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:if(32!==t.byteLength)throw new Error("Invalid encryption key");return i=bf,[4,gf(t)];case 1:return n=i.apply(void 0,[o.sent()]),[4,vW(t)];case 2:return r=o.sent(),[2,new e(n,r)]}}))}))},e.prototype.deterministicEncodeStr=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return[4,gf(t=hf(e))];case 1:return n=o.sent(),i=new Uint8Array(n,0,12),r=bf,[4,gW(t,this.cryptoKey,i)];case 2:return[2,r.apply(void 0,[o.sent()])]}}))}))},e.prototype.deterministicDecodeStr=function(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=yf(e),n=df,[4,yW(t,this.cryptoKey)];case 1:return[2,n.apply(void 0,[i.sent()])]}}))}))},e.prototype.encrypt=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,gW(e,this.cryptoKey)]}))}))},e.prototype.decrypt=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,yW(e,this.cryptoKey)]}))}))},e}(),HW=function(){function e(e,t,n,i){if(this.keyHash=e,this.cryptoKey=t,this.siv=n,2!==i&&3!==i)throw new Error("Invalid encryption version");this.encryptionVersion=i}return e.init=function(t,n,i){return g(this,void 0,Promise,(function(){var r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:if(32!==t.byteLength)throw new Error("Invalid encryption key");return[4,crypto.subtle.importKey("raw",t,"HKDF",!1,["deriveKey"])];case 1:return r=h.sent(),o=hf(n),[4,crypto.subtle.deriveKey({name:"HKDF",salt:o,info:hf("ObsidianKeyHash"),hash:"SHA-256"},r,{name:"AES-CBC",length:256},!0,["encrypt"])];case 2:return a=h.sent(),l=bf,[4,crypto.subtle.exportKey("raw",a)];case 3:return s=l.apply(void 0,[h.sent()]),[4,AW.importKey(r,o)];case 4:return c=h.sent(),[4,crypto.subtle.deriveKey({name:"HKDF",salt:new Uint8Array,info:hf("ObsidianAesGcm"),hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])];case 5:return u=h.sent(),[2,new e(s,u,c,i)]}}))}))},e.prototype.deterministicEncodeStr=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=hf(e),[4,this.siv.seal(new Uint8Array(t))];case 1:return[2,bf(uf(n.sent()))]}}))}))},e.prototype.deterministicDecodeStr=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=yf(e),[4,this.siv.open(new Uint8Array(t))];case 1:return[2,df(uf(n.sent()))]}}))}))},e.prototype.encrypt=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,gW(e,this.cryptoKey)]}))}))},e.prototype.decrypt=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,yW(e,this.cryptoKey)]}))}))},e}(),VW="https://"+[String.fromCharCode(97,112,105),"obsidian","md"].join(".");Lf&&(VW="http://127.0.0.1:3000");var zW="obsidian-account",qW=window.fetch,UW=function(e){function t(n){var i=e.call(this,n.error)||this;return i.response=n,i.error=n.error,Object.setPrototypeOf(i,t.prototype),i}return f(t,e),t}(Error);function _W(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,qW(VW+e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})];case 1:return[4,i.sent().json()];case 2:if("error"in(n=i.sent()))throw new UW(n);return[2,n]}}))}))}function WW(e,t,n,i){return g(this,void 0,Promise,(function(){return y(this,(function(r){return[2,_W("/user/signup",{email:e,password:t,name:n,next:i})]}))}))}function jW(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){return[2,_W("/user/resendconfirmation",{email:e,next:t})]}))}))}function GW(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,_W("/user/authtoken",{token:t})];case 1:return(n=i.sent()).token&&(e.token=n.token,e.email=n.email,e.name=n.name,e.license=n.license,e.save()),[2,n]}}))}))}function KW(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,_W("/subscription/sync/signup-mobile",{token:e})]}))}))}function YW(e,t,n,i){return g(this,void 0,Promise,(function(){var r;return y(this,(function(o){switch(o.label){case 0:return[4,_W("/user/signin",{email:t,password:n,mfa:i})];case 1:return(r=o.sent()).token&&(e.token=r.token,e.email=r.email,e.name=r.name,e.license=r.license,e.save()),[2,r]}}))}))}function ZW(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,_W("/user/signout",{token:e.token})];case 1:return n.sent(),[3,3];case 2:if("Not logged in"!==(t=n.sent()).message)throw t;return[3,3];case 3:return e.token="",e.email="",e.name="",e.license="",e.save(),[2]}}))}))}function XW(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:if(!e.token)return[2,null];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,_W("/user/info",{token:e.token})];case 2:return t=i.sent(),e.email=t.email,e.name=t.name,e.license=t.license,e.save(),[2,t];case 3:throw"Not logged in"===(n=i.sent()).message&&(e.email=null,e.name=null,e.token=null,e.license=null,e.save()),n;case 4:return[2]}}))}))}function $W(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:if(!e.key)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,_W("/subscription/business",{key:e.key})];case 2:return t=i.sent(),e.keyValidation="valid",e.company=t.company,e.expiry=t.expiry,e.seats=t.seats,e.save(),[3,4];case 3:return(n=i.sent())instanceof UW&&(e.key=null,e.keyValidation=n.error,e.save()),[3,4];case 4:return[2]}}))}))}function QW(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,_W("/vault/regions",{token:e,host:t})];case 1:return[2,n.sent().regions]}}))}))}function JW(e){void 0===e.encryption_version&&(e.encryption_version=0)}function ej(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,_W("/vault/list",{token:e,supported_encryption_version:3})];case 1:return(t=n.sent()).vaults.forEach(JW),t.shared.forEach(JW),[2,t]}}))}))}function tj(e,t,n,i,r,o){return g(this,void 0,Promise,(function(){var a;return y(this,(function(s){switch(s.label){case 0:return[4,_W("/vault/create",{token:e,name:t,keyhash:n,salt:i,region:r,encryption_version:o})];case 1:return JW(a=s.sent()),[2,a]}}))}))}function nj(e,t,n,i,r,o){return _W("/vault/migrate",{token:e,vault_uid:t,keyhash:n,salt:i,region:r,encryption_version:o})}function ij(e,t,n){return _W("/vault/rename",{token:e,vault_uid:t,name:n})}function rj(e,t,n){return _W("/vault/share/remove",{token:e,vault_uid:t,share_uid:n})}function oj(e,t,n,i,r){return _W("/vault/access",{token:e,vault_uid:t,keyhash:n,host:i,encryption_version:r})}function aj(e,t){return _W("/publish/delete",{token:e,site_uid:t})}function sj(e,t,n){return _W("/publish/share/invite",{token:e,site_uid:t,email:n})}function lj(e,t,n){return _W("/publish/share/remove",{token:e,site_uid:t,share_uid:n})}function cj(e){return _W("/subscription/list",{token:e})}var uj,hj,dj=new(function(){function e(){this.keyValidation="",this.company="",this.expiry=0,this.seats=0;try{var e=JSON.parse(localStorage.getItem(zW));this.email=e.email,this.name=e.name,this.token=e.token,this.license=e.license,this.key=e.key}catch(e){}}return e.prototype.save=function(){var e={email:this.email,name:this.name,token:this.token,license:this.license,key:this.key};localStorage.setItem(zW,JSON.stringify(e))},e.prototype.setKey=function(e){this.key=e,this.save()},e}());!function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"}(uj||(uj={})),function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"}(hj||(hj={}));var pj=["image","audio","pdf","video"],fj=["app","appearance","appearance-data","hotkey","core-plugin","core-plugin-data"],mj="";function vj(){return function(e){for(var t=[],n=0;n<e;n++)t.push(kf.charAt(Math.floor(73*Math.random())));return t.join("")}(20)}function gj(e,t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,OW(e,t)];case 1:return[4,NW(i.sent(),t,n)];case 2:return[2,i.sent()]}}))}))}function yj(e,t,n,i,r){return g(this,void 0,void 0,(function(){var o;return y(this,(function(a){switch(a.label){case 0:return[4,gj(t,n,r)];case 1:return o=a.sent(),[4,oj(dj.token,e,o,i,r)];case 2:return a.sent(),[2]}}))}))}uA&&g(void 0,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,gA.getInfo()];case 1:return e=t.sent(),mj=e.name,[2]}}))}));var bj="obsidian://";function wj(e){if(!e.startsWith(bj))return null;console.log("Received callback URL",e);var t={};if((e=e.substr(11)).startsWith("vault/")){var n=(e=e.substr(6)).split("/").map((function(e){return decodeURIComponent(e)}));t.action="open",t.vault=n[0],t.file=n.slice(1).join("/")}else{var i="",r="",o=e.indexOf("?"),a=e.indexOf("#",Math.max(0,o));a>=0&&(r=e.substr(a+1),e=e.substr(0,a),t.hash=r),o>=0&&(i=e.substr(o+1),e=e.substr(0,o));for(var s=0,l=i.split("&");s<l.length;s++){var c="true";(n=l[s].split("=")).length>1&&(c=decodeURIComponent(n[1])),t[decodeURIComponent(n[0])]=c}t.action=e.replace(/\/+$/g,"")}return t}function kj(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttrs({viewBox:"0 0 512 512",width:String(e),height:String(e),fill:"none"}),t.innerHTML='<path d="M355.662 428.646C353.2 446.929 335.311 461.212 317.533 456.281C292.203 449.301 262.874 438.415 236.484 436.387C233.004 436.119 196.037 433.316 196.037 433.316C189.498 432.85 183.36 429.993 178.793 425.29L109.1 353.516C101.484 345.673 99.4221 333.977 103.898 324.002C103.898 324.002 146.992 229.286 148.593 224.361C150.193 219.435 156.067 176.476 159.548 153.397C160.47 147.281 163.49 141.675 168.088 137.538L250.533 63.3697C262.003 53.0514 279.807 54.5804 289.349 66.7034L358.607 154.688C362.526 159.668 364.534 165.856 364.563 172.192C364.642 188.861 366.018 223.085 375.233 245.128C384.199 266.569 400.652 289.725 409.251 301.119C412.551 305.492 413.056 311.406 410.269 316.122C404.2 326.398 392.209 346.128 375.233 371.443C363.53 388.897 358.107 410.473 355.662 428.646Z" fill="currentColor"/><path d="M186.206 430.921C251.142 299.269 182.648 242.339 144.398 218.766" stroke="#000" stroke-width="12"/><path d="M374.343 386.444C332.98 289.929 272.491 288.595 210.224 303.717" stroke="#000" stroke-width="12"/><path d="M274.27 297.045C212.447 142.266 322.305 143.6 283.61 52.8673" stroke="#000" stroke-width="12"/>',t}var Cj=Qf.interface.startScreen.mobile;function Mj(e,t){for(var n=/(\*\*(.*?)\*\*)/g,i=0,r=t.split("\n");i<r.length;i++){for(var o=r[i],a=0,s=null,l=e.createEl("p");null!==(s=n.exec(o));)a<s.index&&l.appendText(o.slice(a,s.index)),l.createEl("strong",{text:s[2]}),a=n.lastIndex;a<o.length&&l.appendText(o.slice(a))}}var Ej=function(){var e=this;this.requiresAuth=!1,this.title="";var t=this.contentEl=createDiv("mobile-onboarding-screen");this.titleEl=t.createEl("h1",{text:this.getTitle()}),this.formEl=t.createEl("form",{attr:{id:"form"}}),this.footerEl=this.contentEl.createEl("footer","",(function(e){e.createDiv({cls:"mod-version",text:c2})})),this.formEl.addEventListener("submit",(function(t){t.preventDefault();var n=e.contentEl.find("button.mod-cta");n&&n.click()}))},Sj=function(){function e(e){this.helpEl=null,this.containerEl=e.createEl("p","form-field"),this.labelEl=this.containerEl.createEl("label")}return e.prototype.setName=function(e){return this.labelEl.setText(e),this},e.prototype.setHelp=function(e){return this.helpEl?this.helpEl.setText(e):this.helpEl=this.containerEl.createDiv({cls:"form-field-help",text:e}),this},e.prototype.addText=function(e){return e(new _I(this.containerEl)),this},e.prototype.addDropdown=function(e){return e(new KI(this.containerEl)),this},e.prototype.addToggle=function(e){return e(new qI(this.containerEl)),this},e.prototype.addButton=function(e){return e(new VI(this.containerEl)),this},e}(),xj=function(){function e(e){this.options={},this.containerEl=e.createDiv("mobile-onboarding-radio-group")}return e.prototype.addOption=function(e,t){var n=this,i=new Tj(this.containerEl);return t(i.contentEl),this.options[e]=i,i.containerEl.addEventListener("click",(function(t){t.preventDefault(),n.setValue(e)})),this},e.prototype.onChange=function(e){return this.onChangeCb=e,this},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){var t,n,i;return null===(t=this.options[this.value])||void 0===t||t.setSelected(!1),null===(n=this.options[e])||void 0===n||n.setSelected(!0),this.value=e,null===(i=this.onChangeCb)||void 0===i||i.call(this,e),this},e}(),Tj=function(){function e(e){var t=this.containerEl=e.createDiv({cls:"mobile-onboarding-radio-option",attr:{tabIndex:0}});t.createDiv({cls:"mobile-onboarding-radio-button"}),this.contentEl=t.createDiv({cls:"mobile-onboarding-radio-content"})}return e.prototype.setSelected=function(e){this.containerEl.toggleClass("is-selected",e)},e}(),Dj=function(e){function t(){var t=e.call(this)||this,n=kj(64);return n.addClass("logo"),t.contentEl.prepend(n),Mj(t.formEl,Cj.labelStartScreenDesc()),t.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Cj.optionCreate()).onClick((function(){return t.controller.goTo(new Aj)})),new VI(e).setButtonText(Cj.optionUseExisting()).onClick((function(){return t.controller.goTo(new Vj)}))})),t}return f(t,e),t.prototype.getTitle=function(){return Cj.labelStartScreen()},t}(Ej),Aj=function(e){function t(){var t=e.call(this)||this,n=kj(64);return n.addClass("logo"),t.contentEl.prepend(n),Mj(t.formEl,Cj.labelSyncIntroDesc()),t.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Cj.optionSetupSync()).onClick((function(){return t.controller.goTo(new Hj)})),new VI(e).setButtonText(Cj.optionSkip()).onClick((function(){return t.controller.goTo(new Lj("none"))}))})),t}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSyncIntro()},t}(Ej),Lj=function(e){function t(t,n){var i=e.call(this)||this,r=kj(64);r.addClass("logo"),i.contentEl.prepend(r),Mj(i.formEl,Cj.labelVaultCreateDesc());var o=n?n.name:"",a="";if(new _I(i.formEl).setPlaceholder(Cj.placeholderVaultName()).setValue(o).onChange((function(e){return o=e})),dA)var s=new Sj(i.formEl).setName(Cj.labelVaultLocation()).setHelp(Cj.labelVaultLocationHelp()).addButton((function(e){return e.setButtonText(Qf.dialogue.buttonChoose()).onClick((function(e){return g(i,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:e.preventDefault(),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,fA.choose()];case 2:return(t=i.sent())&&t.path?[4,this.controller.isDirectory(t.path)]:[3,4];case 3:i.sent()?(a=t.path,s.setHelp(Cj.labelVaultLocationDesc({vaultLocation:a}))):new JA(Cj.msgInvalidVault()),i.label=4;case 4:return[3,6];case 5:return(n=i.sent())&&n.message&&n.message.contains("canceled")||new JA(n.toString()),[3,6];case 6:return[2]}}))}))}))}));return i.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Cj.optionCreate()).onClick((function(){""!==o.trim()?"obsidian-sync"===t?n?i.controller.goTo(new Fj(o,a,n)):i.controller.goTo(new Pj(o,a)):i.controller.createVault(o,a,"icloud"===t):new JA(Cj.msgNameRequired())}))})),i}return f(t,e),t.prototype.getTitle=function(){return Cj.labelVaultCreate()},t}(Ej),Pj=function(e){function t(t,n){var i,r=e.call(this)||this;r.requiresAuth=!0,Mj(r.formEl,Cj.labelSyncSetupDesc());var o="";return new Sj(r.formEl).setName(Cj.labelVaultName()).addText((function(e){return e.setPlaceholder(Cj.placeholderVaultName()).setValue(t).onChange((function(e){return t=e}))})),new Sj(r.formEl).setName(Cj.labelRegionSelection()).addDropdown((function(e){return i=e.addOption("",Cj.optRegionSelectionAutomatic()).setValue("").onChange((function(e){return o=e}))})).setHelp(Cj.labelRegionSelectionHelp()),r.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Qf.dialogue.buttonContinue()).onClick((function(e){""!==t?r.controller.goTo(new Ij(t,n,o)):new JA(Qf.plugins.sync.msgVaultNameCannotBeEmpty())}))})),r.populateRegions(i),r}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSyncSetup()},t.prototype.populateRegions=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,QW(dj.token)];case 1:for(t=o.sent(),n=0,i=t;n<i.length;n++)r=i[n],e.addOption(r.value,r.name);return[3,3];case 2:return o.sent(),[3,3];case 3:return[2]}}))}))},t}(Ej),Ij=function(e){function t(t,n,i){var r,o=e.call(this)||this,a=o.formEl,s=!0,l="";return new xj(a).addOption("custom",(function(e){e.createDiv({cls:"mobile-onboarding-radio-option-title",text:Cj.optionEncryptionCustom()},(function(e){e.createSpan({cls:"flair",text:Cj.labelRecommended()})})),e.createEl("ul",{cls:"mobile-onboarding-radio-option-desc",text:Cj.optionEncryptionCustomDesc()})})).addOption("managed",(function(e){e.createDiv({cls:"mobile-onboarding-radio-option-title",text:Cj.optionEncryptionManaged()}),e.createEl("ul",{cls:"mobile-onboarding-radio-option-desc",text:Cj.optionEncryptionManagedDesc()})})).setValue("custom").onChange((function(e){s="custom"===e,r.containerEl.toggle(s)})),r=new Sj(a).setName(Cj.labelEncryptionKey()).addText((function(e){return e.setValue(l).onChange((function(e){return l=e})).then((function(e){e.inputEl.type="password",e.inputEl.autocomplete="new-password"}))})).setHelp(Cj.labelEncryptionKeyHelp()),o.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Cj.buttonCreate()).onClick((function(e){return g(o,void 0,void 0,(function(){var r,o,a,c,u;return y(this,(function(h){switch(h.label){case 0:return s&&""===l?(new JA(Qf.plugins.sync.msgPleaseEnterPassword()),[2]):""===t?(new JA(Qf.plugins.sync.msgVaultNameCannotBeEmpty()),[2]):((r=e.target).addClass("mod-loading"),a=null,s?(o=vj(),[4,gj(l,o,PW)]):[3,2]);case 1:a=h.sent(),h.label=2;case 2:return h.trys.push([2,4,5,6]),[4,tj(dj.token,t,a,o,i,PW)];case 3:return c=h.sent(),s&&(c.password=l),this.controller.goTo(new Fj(t,n,c)),[3,6];case 4:return u=h.sent(),new JA(u.message),[3,6];case 5:return r.removeClass("mod-loading"),[7];case 6:return[2]}}))}))}))})),o}return f(t,e),t.prototype.getTitle=function(){return Cj.labelRemoteVaultCreate()},t.prototype.populateRegions=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,QW(dj.token)];case 1:for(t=o.sent(),n=0,i=t;n<i.length;n++)r=i[n],e.addOption(r.value,r.name);return[3,3];case 2:return o.sent(),[3,3];case 3:return[2]}}))}))},t}(Ej),Fj=function(e){function t(t,n,i){var r=e.call(this)||this;r.requiresAuth=!0,Mj(r.formEl,Cj.labelSyncSettingsDesc());var o=[{name:"Main settings",type:"app"},{name:"Appearance settings",type:"appearance"},{name:"Themes and snippets",type:"appearance-data"},{name:"Hotkeys",type:"hotkey"},{name:"Active core plugins",type:"core-plugin"},{name:"Core plugin settings",type:"core-plugin-data"},{name:"Active community plugins",type:"community-plugin"},{name:"Installed community plugins",type:"community-plugin-data"}];r.contentEl.createDiv("mobile-onboarding-feature-table",(function(e){for(var t=function(t){e.createDiv("feature-row",(function(e){e.createDiv("feature-cell",(function(e){return e.setText(t.name)}));var n=e.createDiv("feature-cell mod-value");fj.contains(t.type)?(n.addClass("is-enabled"),n.createSpan({text:Cj.labelSynced()}),mx(n.createSpan(),"lucide-check")):n.setText(Cj.labelNotSynced())}))},n=0,i=o;n<i.length;n++){t(i[n])}}));var a=[{name:"Images",type:"image"},{name:"Audio",type:"audio"},{name:"Videos",type:"video"},{name:"PDFs",type:"pdf"},{name:"All other file types",type:"unsupported"}];return r.formEl.createDiv("mobile-onboarding-feature-table",(function(e){e.createDiv("feature-row",(function(e){e.createDiv({cls:"feature-cell",text:Qf.plugins.sync.optionExcludedFolders()}),e.createDiv({cls:"feature-cell mod-value",text:Cj.labelNone()})}));for(var t=function(t){e.createDiv("feature-row",(function(e){e.createDiv("feature-cell",(function(e){return e.setText(t.name)}));var n=e.createDiv("feature-cell mod-value");pj.contains(t.type)?(n.addClass("is-enabled"),n.createSpan({text:Cj.labelSynced()}),mx(n.createSpan(),"lucide-check")):n.setText(Cj.labelNotSynced())}))},n=0,i=a;n<i.length;n++){t(i[n])}})),r.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Cj.buttonStart()).onClick((function(){return r.controller.createVault(t,n,!1,i)}))})),r}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSyncSettings()},t}(Ej),Oj=function(e){function t(){var t=e.call(this)||this;return t.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Cj.optionSignUp()).onClick((function(e){return t.controller.goTo(new qj)})),new VI(e).setButtonText(Cj.optionSignIn()).onClick((function(){return t.controller.goTo(new Rj)}))})),t}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSignInOrSignUp()},t}(Ej),Bj=function(e){function t(t){var n=e.call(this)||this;return n.requiresAuth=!0,Mj(n.formEl,Cj.labelRemoteVaultOptionsDesc()),n.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Cj.optionRemoteCreate()).onClick((function(e){return n.controller.goTo(new Lj("obsidian-sync"))})),new VI(e).setButtonText(Cj.optionRemoteChoose()).onClick((function(){return n.controller.goTo(new Nj(t))}))})),n.footerEl.createDiv("button-container",(function(e){var t=new VI(e).setButtonText(Cj.buttonLogout()).onClick((function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:t.buttonEl.addClass("mod-loading"),e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,ZW(dj)];case 2:return e.sent(),this.controller.backToLogin(),[3,5];case 3:return e.sent(),[3,5];case 4:return t.buttonEl.removeClass("mod-loading"),[7];case 5:return[2]}}))}))}))})),n}return f(t,e),t.prototype.getTitle=function(){return Cj.labelRemoteVaultOptions()},t}(Ej),Nj=function(e){function t(t){var n=e.call(this)||this;n.requiresAuth=!0;var i=n.formEl;return Mj(n.formEl,Cj.labelRemoteVaultSelectionDesc({email:dj.email})),i.createDiv("list-container has-row-lines",(function(e){for(var i=t.vaults,r=function(t){var r=i[t];e.createDiv("list-item mod-selectable tappable",(function(e){e.createDiv("list-item-part mod-extended",(function(e){e.createDiv({cls:"list-item-title",text:r.name}),e.createDiv("list-item-desc",(function(e){r.hasOwnProperty("region")&&""!==r.region&&e.createDiv({cls:"list-item-part",text:r.region}),e.createDiv({cls:"list-item-part",text:wf(r.size)}),e.createDiv({cls:"list-item-part mod-extended",text:Qf.plugins.sync.labelVaultCreatedTime({time:window.moment(r.created).fromNow()})})}))})),e.addEventListener("click",(function(e){n.controller.goTo(new Lj("obsidian-sync",r))}))})),t<i.length-1&&e.createDiv("list-item-separator")},o=0;o<i.length;o++)r(o)})),new VI(n.footerEl).setButtonText(Cj.optionRemoteCreate()).onClick((function(){return n.controller.goTo(new Lj("obsidian-sync"))})),n}return f(t,e),t.prototype.getTitle=function(){return Cj.labelRemoteVaultSelection()},t}(Ej),Rj=function(e){function t(t){void 0===t&&(t="");var n,i,r=e.call(this)||this,o=r.formEl,a="",s="",l=new Sj(o).setName(Qf.setting.account.labelEmail()).addText((function(e){return e.setValue(t).setPlaceholder(Qf.setting.account.placeholderEmail()).onChange((function(e){return t=e})).then((function(e){return e.inputEl.type="email"}))})),c=new Sj(o).setName(Qf.interface.startScreen.optionUserPassword()).addText((function(e){return n=e.onChange((function(e){return a=e})).then((function(e){e.inputEl.type="password"}))})),u=new Sj(o).setName(Qf.setting.account.labelMfaCode()).addText((function(e){return i=e.onChange((function(e){return s=e})).then((function(e){var t=e.inputEl;t.inputMode="numeric",t.pattern="[0-9]*",t.setAttribute("maxlength","6"),t.setAttr("autocomplete","one-time-code")}))}));u.containerEl.hide();var h=r.contentEl.createDiv("button-container"),d=new VI(h).setCta().setButtonText(Cj.optionSignIn()).onClick((function(e){return g(r,void 0,void 0,(function(){var r,o,h,p;return y(this,(function(f){switch(f.label){case 0:if(e.preventDefault(),""===t)return this.controller.showError(Qf.setting.account.messageEmptyEmail()),[2];if(-1===t.indexOf("@"))return this.controller.showError(Qf.setting.account.messageInvalidEmail()),[2];if(""===a)return this.controller.showError(Qf.setting.account.messageEmptyPassword()),[2];if(""!==s&&!/^\d{6}$/.test(s))return this.controller.showError(Qf.setting.account.mfaWrongFormat()),[2];(r=d.buttonEl).addClass("mod-loading"),f.label=1;case 1:return f.trys.push([1,7,8,9]),[4,YW(dj,t,a,s)];case 2:return[4,ej(f.sent().token)];case 3:return 0!==(o=f.sent()).limit?[3,5]:[4,KW(dj.token)];case 4:return f.sent(),this.controller.goTo(new _j(t)),[3,6];case 5:o.vaults.length>0?this.controller.goTo(new Bj(o)):this.controller.goTo(new Lj("obsidian-sync")),f.label=6;case 6:return i.setValue(""),n.setValue(""),[3,9];case 7:return(h=f.sent())instanceof UW?(p=h.error).contains("2FA code is incorrect")?this.controller.showError(Qf.setting.account.mfaVerificationFailed()):p.contains("2FA code")?(l.containerEl.hide(),c.containerEl.hide(),u.containerEl.show()):this.controller.showError(p):this.controller.showError(Qf.setting.account.messageLoginFailed()),[3,9];case 8:return r.removeClass("mod-loading"),[7];case 9:return[2]}}))}))}));return new VI(r.footerEl).setButtonText(Cj.buttonForgotPassword()).onClick((function(){return r.controller.goTo(new _j(t))})),r}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSignIn()},t}(Ej),Hj=function(e){function t(){var t=e.call(this)||this;t.requiresAuth=!1;var n,i={"obsidian-sync":Cj.optUseObsidianSync(),icloud:Cj.optUseIcloud(),other:Cj.optUseOther()};Mj(t.formEl,Cj.labelSyncMethodSelectionDesc());var r=new xj(t.contentEl).addOption("obsidian-sync",(function(e){e.createDiv({cls:"mobile-onboarding-radio-option-title",text:Cj.labelObsidianSync()},(function(e){e.createSpan({cls:"flair",text:Cj.labelRecommended()})})),e.createEl("ul",{cls:"mobile-onboarding-radio-option-desc"},(function(e){e.createEl("li",{text:Cj.labelSyncPro1()}),e.createEl("li",{text:Cj.labelSyncPro2()}),e.createEl("li",{text:Cj.labelSyncPro3()})}))})).addOption("icloud",(function(e){e.createDiv({cls:"mobile-onboarding-radio-option-title",text:Cj.labelIcloud()}),e.createEl("ul",{cls:"mobile-onboarding-radio-option-desc"},(function(e){e.createEl("li",{text:Cj.labelIcloudCon1()}),e.createEl("li",{text:Cj.labelIcloudCon2()})}))})).setValue("obsidian-sync").onChange((function(e){return n.setButtonText(i[e])}));return t.contentEl.createDiv("button-container",(function(e){n=new VI(e).setCta().setButtonText(Cj.optUseObsidianSync()).onClick((function(){return g(t,void 0,void 0,(function(){var e,t;return y(this,(function(i){switch(i.label){case 0:if("obsidian-sync"!==(e=r.getValue()))return[3,10];if(!dj.token)return[3,8];t=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,qw(n.buttonEl,(function(){return ej(dj.token)}))];case 2:return t=i.sent(),[3,4];case 3:return i.sent(),new JA(Qf.plugins.sync.msgErrorFailedToFetch()),[2];case 4:return 0!==t.limit?[3,6]:[4,KW(dj.token)];case 5:return i.sent(),this.controller.goTo(new _j(dj.email)),[3,7];case 6:t.vaults.length>0?this.controller.goTo(new Bj(t)):this.controller.goTo(new Lj("obsidian-sync")),i.label=7;case 7:return[3,9];case 8:this.controller.goTo(new Oj),i.label=9;case 9:return[3,11];case 10:"icloud"===e?Zl.isIosApp?this.controller.goTo(new Lj("icloud")):this.controller.goTo(new jj):this.controller.goTo(new zj),i.label=11;case 11:return[2]}}))}))})),new VI(e).setButtonText(Cj.optLearnOtherSync()).onClick((function(){return t.controller.goTo(new zj)}))})),t}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSyncMethodSelection()},t}(Ej),Vj=function(e){function t(){var t,n=e.call(this)||this,i=n.formEl,r={local:Cj.optionConnectLocalFolder(),"obsidian-sync":Cj.optionConnectSync(),icloud:Cj.optionConnectIcloud(),other:Cj.optionConnectOther()},o=new xj(i);return o.addOption("obsidian-sync",(function(e){e.createDiv({cls:"mobile-onboarding-radio-option-title",text:Cj.labelObsidianSync()})})),dA&&o.addOption("local",(function(e){e.createDiv({cls:"mobile-onboarding-radio-option-title",text:Cj.labelLocalFolder()})})),o.addOption("icloud",(function(e){e.createDiv({cls:"mobile-onboarding-radio-option-title",text:Cj.labelIcloud()})})).addOption("other",(function(e){e.createDiv({cls:"mobile-onboarding-radio-option-title",text:Cj.labelOther()})})).setValue("obsidian-sync").onChange((function(e){return t.setButtonText(r[e])})),n.contentEl.createDiv("button-container",(function(e){t=new VI(e).setCta().setButtonText(r[o.getValue()]).onClick((function(){return g(n,void 0,void 0,(function(){var e,n,i,r;return y(this,(function(a){switch(a.label){case 0:return"local"!==(e=o.getValue())?[3,4]:[4,fA.choose()];case 1:return(n=a.sent())&&n.path?n.isRoot?(new JA("Please choose a different folder than the root folder of your device."),[2]):(i=n.path,[4,this.controller.isDirectory(i)]):[3,3];case 2:a.sent()?this.controller.openVault(i,!0):new JA("Failed to load external vault."),a.label=3;case 3:return[3,9];case 4:return"obsidian-sync"!==e?[3,8]:dj.token?[4,qw(t.buttonEl,(function(){return ej(dj.token)}))]:[3,6];case 5:return(r=a.sent()).vaults?this.controller.goTo(new Bj(r)):this.controller.goTo(new Lj("obsidian-sync")),[3,7];case 6:this.controller.goTo(new Rj),a.label=7;case 7:return[3,9];case 8:"icloud"===e?Zl.isIosApp?this.controller.goTo(new Wj):this.controller.goTo(new jj):this.controller.goTo(new zj),a.label=9;case 9:return[2]}}))}))}))})),n}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSyncRestore()},t}(Ej),zj=function(e){function t(){var t=e.call(this)||this;return Mj(t.formEl,Cj.labelSyncOtherDesc()),t.contentEl.createDiv("button-container",(function(e){new VI(e).setButtonText(Cj.buttonCreate()).onClick((function(e){e.preventDefault(),t.controller.goTo(new Lj("none"))})),new VI(e).setButtonText(Cj.optUseSupported()).onClick((function(e){e.preventDefault(),t.controller.back()}))})),t}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSyncOther()},t}(Ej),qj=function(e){function t(){var t=e.call(this)||this;t.notice=null;var n=t.formEl;Mj(t.formEl,Cj.labelEmailEntryDesc());var i="";return new Sj(n).setName(Qf.setting.account.labelEmail()).addText((function(e){return e.setValue(i).setPlaceholder(Qf.setting.account.placeholderEmail()).onChange((function(e){return i=e})).then((function(e){return e.inputEl.type="email"}))})),t.contentEl.createDiv("button-container",(function(e){new VI(e).setCta().setButtonText(Qf.setting.account.labelSignUp()).onClick((function(){return t.signup(i)}))})),t}return f(t,e),t.prototype.getTitle=function(){return Cj.labelEmailEntry()},t.prototype.signup=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return""===e?(this.controller.showError(Qf.setting.account.messageEmptyEmail()),[2]):(this.controller.goTo(new Uj(e)),[2])}))}))},t}(Ej),Uj=function(e){function t(t){var n=e.call(this)||this,i=n.formEl,r="",o="";return new Sj(i).setName(Qf.setting.account.labelEmail()).addText((function(e){return e.setValue(t).setPlaceholder(Qf.setting.account.placeholderEmail()).onChange((function(e){return t=e})).then((function(e){return e.inputEl.type="email"}))})),new Sj(i).setName(Qf.setting.account.labelName()).addText((function(e){return e.setValue(r).onChange((function(e){return r=e}))})),new Sj(i).setName(Qf.interface.startScreen.optionUserPassword()).addText((function(e){return e.setValue(r).onChange((function(e){return o=e})).then((function(e){e.inputEl.type="password"}))})),n.contentEl.createDiv("button-container",(function(e){var i=new VI(e).setCta().setButtonText(Qf.setting.account.labelSignUp()).onClick((function(){return g(n,void 0,void 0,(function(){var e,n;return y(this,(function(a){switch(a.label){case 0:if(""===t)return this.controller.showError(Qf.setting.account.messageEmptyEmail()),[2];(e=i.buttonEl).addClass("mod-loading"),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,WW(t,o,r,"buy_sync")];case 2:return a.sent(),this.controller.goTo(new _j(t)),[3,5];case 3:return n=a.sent(),console.error(n),n instanceof UW?this.controller.showError(n.error):this.controller.showError(Qf.setting.account.messageSignupFailed()),[3,5];case 4:return e.removeClass("mod-loading"),[7];case 5:return[2]}}))}))}))})),n}return f(t,e),t.prototype.getTitle=function(){return Cj.labelSignup()},t}(Ej),_j=function(e){function t(t){var n=e.call(this)||this;return Mj(n.formEl,Cj.emailVerificationDesc({email:t})),n.footerEl.createDiv("button-container",(function(e){var i=new VI(e).setButtonText(Cj.buttonResendEmail()).onClick((function(){return g(n,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:i.setLoading(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,jW(t,"buy_sync")];case 2:return n.sent(),new JA(Cj.msgNewEmailSuccess()),[3,5];case 3:return e=n.sent(),console.error(e),new JA(Cj.msgNewEmailFailure()),[3,5];case 4:return i.setLoading(!1),[7];case 5:return[2]}}))}))})),r=new VI(e).setButtonText(Cj.buttonLogout()).onClick((function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:r.buttonEl.addClass("mod-loading"),e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,ZW(dj)];case 2:return e.sent(),this.controller.backToLogin(),[3,5];case 3:return e.sent(),[3,5];case 4:return r.buttonEl.removeClass("mod-loading"),[7];case 5:return[2]}}))}))}))})),n}return f(t,e),t.prototype.getTitle=function(){return Cj.emailVerification()},t}(Ej),Wj=function(e){function t(){var t=e.call(this)||this,n=t.formEl;return n.createEl("p",{text:Cj.icloudMissingDesc()}),n.createEl("ol",{},(function(e){e.createEl("li",{text:Cj.icloudMissingReason1()}),e.createEl("li",{text:Cj.icloudMissingReason2()})})),t}return f(t,e),t.prototype.getTitle=function(){return Cj.icloudMissing()},t}(Ej),jj=function(e){function t(){var t=e.call(this)||this;return t.formEl.createEl("p",{text:Cj.iCloudUnsupportedDesc()}),t}return f(t,e),t.prototype.getTitle=function(){return Cj.iCloudUnsupported()},t}(Ej),Gj=(function(){function e(e,t,n){var i=this;this.previousScreens=[],this.errorNotice=null,this._createVault=e,this._openVault=t,this._fs=n;var r=this.containerEl=document.body.createDiv("mobile-onboarding"),o=r.createDiv("mobile-onboarding-navbar");this.backButtonEl=o.createDiv({cls:"back-button u-pop tappable",text:Qf.interface.startScreen.buttonBack()},(function(e){e.toggleVisibility(!1),e.addEventListener("click",(function(){return i.back()}))}));var a=this.currentScreen=new Dj;a.controller=this,r.append(a.contentEl),pA&&g(i,void 0,void 0,(function(){var e,t,n=this;return y(this,(function(i){switch(i.label){case 0:return e=this,[4,pA.addListener("appUrlOpen",(function(e){return g(n,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:if(!(t=wj(e.url))||!t.hasOwnProperty("sync-setup"))return[3,4];if(!(n=t.token))return[2];(i=new JA(Cj.msgLoginPending())).containerEl.addClass("is-loading"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,GW(dj,n)];case 2:return r.sent(),this.goTo(new Lj("obsidian-sync")),[3,4];case 3:return r.sent(),i.containerEl.removeClass("is-loading"),i.setMessage("Failed went wrong."),i.containerEl.addClass("mod-error"),[3,4];case 4:return[2]}}))}))}))];case 1:return e.appUrlOpenListener=i.sent(),t=this,[4,pA.addListener("backButton",(function(e){n.back()}))];case 2:return t.androidBackButtonListener=i.sent(),[2]}}))}))}e.prototype.showError=function(e){this.errorNotice&&this.errorNotice.hide(),this.errorNotice=new JA(e,3e3)},e.prototype.back=function(){var e=this.currentScreen,t=this.previousScreens.pop();dj.token&&t instanceof Rj?this.back():(t&&(this.currentScreen=t,e.contentEl.detach(),this.containerEl.appendChild(t.contentEl)),this.backButtonEl.toggleVisibility(this.previousScreens.length>0))},e.prototype.unload=function(){var e,t;null===(e=this.appUrlOpenListener)||void 0===e||e.remove(),null===(t=this.androidBackButtonListener)||void 0===t||t.remove(),this.containerEl.detach()},e.prototype.createVault=function(e,t,n,i){return g(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return[4,this._createVault(e,t,n,i)];case 1:return!1!==r.sent()&&this.unload(),[2]}}))}))},e.prototype.openVault=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,this._openVault(e,t)];case 1:return!1!==n.sent()&&this.unload(),[2]}}))}))},e.prototype.isDirectory=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return this._fs?[4,this._fs.stat(e)]:[2,!1];case 1:return[2,"directory"===t.sent().type]}}))}))},e.prototype.backToLogin=function(){for(;this.currentScreen.requiresAuth;)this.back();this.currentScreen instanceof Rj||this.goTo(new Rj)},e.prototype.goTo=function(e){if(!e.requiresAuth||dj.token){e.controller=this;var t=this.currentScreen;this.previousScreens.push(t),this.currentScreen=e,this.backButtonEl.toggleVisibility(this.previousScreens.length>0),t.contentEl.detach(),this.containerEl.appendChild(e.contentEl)}else this.backToLogin()}}(),function(e){function t(t){var n=e.call(this,t)||this;return n.setTitle("iCloud files"),n.modalEl.addClass("mod-lg","mod-scrollable-content","mod-plugin-debug"),n.contentEl.createEl("p",{text:"iCloud automatically optimizes the storage space on your device. iCloud may remove the local version of your files and they will need to be re-downloaded."}),n.contentEl.createEl("p",{text:"Obsidian is checking if any configuration files are missing from your device and will request them from iCloud."}),n.contentEl.createEl("p",{text:createFragment((function(e){e.appendText("To avoid this happening to your Obsidian files, you will need to open the "),e.createEl("strong",{text:"Files"}),e.appendText("app. Press and hold on the Obsidian folder and choose "),e.createEl("strong",{text:"Keep Downloaded"}),e.appendText(".")}))}),n.addButton("mod-cancel",Qf.dialogue.buttonDone(),(function(){})),n}f(t,e)}(XA),function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.navigation=!1,o.viewType=n,o.icon=i,o.title=r||"",o.containerEl.onNodeInserted((function(){return o.rerender()})),o.containerEl.addEventListener("click",(function(){return o.rerender()})),o}return f(t,e),t.prototype.getDisplayText=function(){return this.title},t.prototype.getViewType=function(){return this.viewType},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(t){return this.state=e,[2]}))}))},t.prototype.setEphemeralState=function(e){this.estate=e},t.prototype.rerender=function(){return g(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return t=(e=this).app.workspace,(n=e.leaf).view!==this||n.working?[2]:[4,n.setViewState({type:this.viewType,state:this.state},this.estate)];case 1:return i.sent(),n.view!==this&&t.requestLayoutChangeEvents(),[2]}}))}))},t}(jP)),Kj=function(e){function t(t,n){var i=e.call(this,t)||this;i.canDropAnywhere=!0,i.viewType=n;var r=i.emptyTitleEl;r.setText(Qf.interface.emptyState.unknownPaneTitle()),r.createSpan("empty-state-close-button",(function(e){mx(e,"lucide-x"),e.addEventListener("click",(function(){i.leaf.detach()}))}));var o=createDiv({text:Qf.interface.emptyState.unknownPaneDesc({type:n})});return Rx(o,"This pane doesn't look like anything to me."),i.clickableAreaEl.insertAfter(o,r),i}return f(t,e),t.prototype.getDisplayText=function(){return Qf.interface.emptyState.unknownPaneTitle()},t.prototype.getViewType=function(){return this.viewType},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(t){return this.state=e,[2]}))}))},t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){return this.actionListEl.createDiv({cls:"empty-state-action tappable mod-close",text:Qf.interface.emptyState.close()},(function(t){t.addEventListener("click",(function(){e.leaf.detach()}))})),[2]}))}))},t}(KP),Yj=!1;function Zj(e){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return e="SYSTEM INFO:\n",Zl.isDesktopApp&&(Ef((function(t){var n=t.ipcRenderer.sendSync("version"),i=t.remote.app.getVersion();e+="\tObsidian version: v".concat(n,"\n"),e+="\tInstaller version: v".concat(i,"\n")})),(t=Mf("os"))&&(e+="\tOperating system: ".concat(t.version()," ").concat(t.release,"\n"))),Zl.isMobileApp?[4,gA.getInfo()]:[3,3];case 1:return n=l.sent(),[4,pA.getInfo()];case 2:i=l.sent(),e+="\tOperating system: ".concat(n.platform," ").concat(n.osVersion," (").concat(n.manufacturer," ").concat(n.model,")\n"),e+="\tObsidian version: ".concat(i.version," (").concat(i.build,")\n"),e+="\tAPI version: v".concat(c2,"\n"),l.label=3;case 3:return r=dj.token?"logged in":"not logged in",e+="\tLogin status: ".concat(r,"\n"),o=tm(),e+="\tLanguage: ".concat(o,"\n"),dj.token&&(a=dj.license||"none",e+="\tCatalyst license: ".concat(a,"\n")),Zl.isDesktopApp&&(s="",Ef((function(t){s=t.ipcRenderer.sendSync("insider-build",null)?"on":"off",e+="\tInsider build toggle: ".concat(s,"\n")}))),[2,e]}}))}))}var Xj=[],$j={views:0,deferredViews:0},Qj={key:"",children:{},duration:0};function Jj(e){Xj.push({key:e,ts:performance.now()})}function eG(e){var t=Qj;if(e)for(var n=0,i=e.split(".");n<i.length;n++){var r=i[n];if(!t.children.hasOwnProperty(r))return null;t=t.children[r]}return t}function tG(e){var t,n;return null!==(n=null===(t=eG(e))||void 0===t?void 0:t.duration)&&void 0!==n?n:0}function nG(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w;return y(this,(function(y){switch(y.label){case 0:return t=im({maximumFractionDigits:0}),n=function(e){return t.format(e)+"ms"},(i=["Obsidian start-up time breakdown"]).push(""),Zl.isDesktopApp&&(Ef((function(e){var t=e.ipcRenderer.sendSync("version"),n=e.remote.app.getVersion();i.push("Obsidian version: v".concat(t)),i.push("Installer version: v".concat(n))})),(r=Mf("os"))&&i.push("Operating system: ".concat(r.version()," ").concat(r.release))),Zl.isMobileApp?[4,gA.getInfo()]:[3,3];case 1:return o=y.sent(),[4,pA.getInfo()];case 2:a=y.sent(),i.push("Operating system: ".concat(o.platform," ").concat(o.osVersion," (").concat(o.manufacturer," ").concat(o.model,")")),i.push("Obsidian version: ".concat(a.version," (").concat(a.build,")")),i.push("API version: v".concat(c2)),y.label=3;case 3:if(i.push(""),s=e.vault.getRoot().getFileCount(),l=Object.keys(e.plugins.plugins).length,i.push("- Total startup time: ".concat(n(tG()))),i.push("- Initialization: ".concat(n(tG("initialization")))),tG("icloud")&&i.push("- iCloud: ".concat(n(tG("icloud")))),i.push("- Vault (".concat(t.format(s)," files): ").concat(n(tG("vault")))),i.push("- Workspace (".concat($j.views," tabs, ").concat($j.deferredViews," deferred): ").concat(n(tG("workspace")))),i.push("- Core plugins: ".concat(n(tG("corePlugins")))),c=eG("communityPlugins")){for(i.push("- Community plugins (".concat(t.format(l)," active): ").concat(n(tG("communityPlugins")))),u=[],h=0,d=Object.values(c.children);h<d.length;h++)p=d[h],u.push({id:p.key,time:p.duration});for(u.sort((function(e,t){return t.time-e.time})),f=0,m=u;f<m.length;f++)v=m[f],g=v.id,b=v.time,w=e.plugins.manifests[g],i.push("  - ".concat(w.name," (v").concat(w.version,"): ").concat(n(b)))}return[2,i.join("\n")]}}))}))}var iG=function(){function e(e){void 0===e&&(e=activeDocument);var t=this;this.showTimeout=0,this.doc=e;var n=this.containerEl=createDiv("progress-bar-container"),i=this.el=n.createDiv({cls:"progress-bar"});this.messageEl=i.createDiv({cls:"progress-bar-message u-center-text"}),i.createDiv("progress-bar-indicator",(function(e){e.createDiv("progress-bar-line"),t.lineEl=e.createDiv("progress-bar-subline"),t.line1El=e.createDiv("progress-bar-subline mod-increase"),t.line2El=e.createDiv("progress-bar-subline mod-decrease")})),this.contextEl=i.createDiv("progress-bar-context"),n.addEventListener("click",(function(e){e.preventDefault()})),this.setUnknownProgress()}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e.prototype.delayedShow=function(e){var t=this;if(!this.containerEl.isShown()&&!this.showTimeout)return this.showTimeout=this.doc.win.setTimeout((function(){return t.show()}),e),this},e.prototype.show=function(){return this.doc.win.clearTimeout(this.showTimeout),this.showTimeout=0,this.doc.body.prepend(this.containerEl),this.doc.body.addClass("in-progress"),this.containerEl.style.opacity="",this},e.prototype.hide=function(){return this.doc.win.clearTimeout(this.showTimeout),this.showTimeout=0,this.containerEl.remove(),this.doc.body.removeClass("in-progress"),this},e.prototype.setMessage=function(e){return this.messageEl.setText(e),this},e.prototype.setUnknownProgress=function(){return this.lineEl.hide(),this.line1El.show(),this.line2El.show(),this},e.prototype.setProgress=function(e,t){this.lineEl.show(),this.line1El.hide(),this.line2El.hide();var n=(e/t*100).toFixed(4);return this.lineEl.style.width="".concat(n,"%"),this},e.prototype.clearContext=function(){return this.contextEl.empty(),this},e.prototype.setContext=function(e){return this.contextEl.empty(),e(this.contextEl),this},e}();function rG(e){for(var t=createDiv("loader-cube"),n=1;n<=9;n++)t.createDiv({cls:"sk-cube sk-cube".concat(n)});return e&&e.appendChild(t),t}function oG(e){var t=createDiv("loader-spinner");return mx(t,"loader-2"),e&&e.appendChild(t),t}function aG(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:n=oG(e),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,t()];case 2:return[2,i.sent()];case 3:return n.detach(),[7];case 4:return[2]}}))}))}var sG,lG=[],cG=null,uG=null,hG="Documents",dG="Obsidian";function pG(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(d){switch(d.label){case 0:return e=[],t=function(t,n,i,r,o){return g(h,void 0,void 0,(function(){var a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,t.readdir(n)];case 1:return a=d.sent(),[3,3];case 2:return s=d.sent(),console.error(s),[2];case 3:for(l=0,c=a;l<c.length;l++)u=c[l],(h=u.name).startsWith(".")||o&&o.contains(h)||"directory"===u.type&&e.push({name:h,location:i+h,storageType:r?"iCloud":"local"});return[2]}}))}))},hA?cG?[4,t(cG,hG,"icloud/",!0)]:[3,2]:[3,4];case 1:d.sent(),d.label=2;case 2:return[4,t(sG,"","documents/")];case 3:return d.sent(),[3,12];case 4:if(!dA)return[3,12];n=sG.getUri("")+"/",i=[],r=0,o=lG,d.label=5;case 5:if(!(r<o.length))return[3,10];a=o[r],d.label=6;case 6:return d.trys.push([6,8,,9]),(s=uG.getUri(a)).startsWith(n)&&(l=s.substr(n.length)).toLowerCase().startsWith("obsidian/")&&((c=l.substr(9)).contains("/")||i.push(decodeURIComponent(c))),[4,uG.stat(a)];case 7:return"directory"===d.sent().type&&e.push({location:a,name:Kc(a),storageType:"local"}),[3,9];case 8:return u=d.sent(),console.error(u),[3,9];case 9:return r++,[3,5];case 10:return[4,t(sG,dG,"",!1,i)];case 11:d.sent(),d.label=12;case 12:return[2,e]}}))}))}!function(){function e(e){var t=this.el=e.createDiv("mobile-vault-chooser-action tappable");this.iconEl=t.createDiv({cls:"mobile-vault-chooser-action-icon"}),this.titleEl=t.createDiv({cls:"mobile-vault-chooser-action-name"})}e.prototype.setIcon=function(e){return mx(this.iconEl,e),this},e.prototype.setTitle=function(e){return this.titleEl.setText(e),this},e.prototype.onClick=function(e){return this.el.addEventListener("click",(function(t){0!==t.button||t.defaultPrevented||e(t)})),this},e.prototype.addButton=function(e,t){var n=this.el.createDiv({cls:"mobile-vault-chooser-action-icon"});return mx(n,e),t&&n.onClickEvent((function(e){e.preventDefault(),t(e)})),this}}();var fG=function(e,t){var n=this;if(this.app=e,Zl.isDesktopApp){var i=e.vault.getName(),r="";e.vault.adapter instanceof mu&&(r=e.vault.adapter.getBasePath());var o=window.require("path");this.containerEl=t.createDiv("workspace-sidedock-vault-profile",(function(e){e.createDiv("workspace-drawer-vault-switcher",(function(e){e.createDiv("workspace-drawer-vault-switcher-icon",(function(e){return mx(e,"lucide-chevrons-up-down")}));var t=e.createDiv({cls:"workspace-drawer-vault-name",text:i});e.addEventListener("mouseover",(function(i){var o=n.app.vault,a=Qf.nouns.fileWithCount({count:o.getRoot().getFileCount()}),s=Qf.nouns.folderWithCount({count:o.getRoot().getFolderCount()}),l=Qf.plugins.fileExplorer.tooltipFoldersFilesCount({fileCount:a,folderCount:s});Ox(t,r+"\n\n"+l,{placement:"top",gap:24,horizontalParent:e,delay:kx})})),e.addEventListener("mouseleave",Bx),e.addEventListener("click",(function(t){if(!e.hasClass("has-active-menu")){var i=electron.ipcRenderer.sendSync("vault").path,r=electron.ipcRenderer.sendSync("vault-list"),a=PA.forEvent(t),s=function(e){if(!r.hasOwnProperty(e))return"continue";var t=r[e],n=o.basename(t.path),s=i===t.path;a.addItem((function(e){return e.setTitle(n).setChecked(s).onClick((function(e){s||!0!==window.electron.ipcRenderer.sendSync("vault-open",t.path,!1)&&new JA(Qf.interface.startScreen.msgErrorFailedToOpenVault())}))}))};for(var l in r)s(l);a.addSeparator().addItem((function(e){return e.setTitle(Qf.interface.manageVaults()).setIcon("open-vault").onClick((function(){return n.app.openVaultChooser()}))})).setParentElement(e)}})),e.addEventListener("contextmenu",(function(t){var i=PA.forEvent(t);i.addSections(["title","open","action","","danger"]),i.setParentElement(e).addItem((function(e){return e.setTitle(Zl.isMacOS?Qf.plugins.openWithDefaultApp.actionShowInFolderMac():Qf.plugins.openWithDefaultApp.actionShowInFolder()).setIcon("lucide-arrow-up-right").onClick((function(){return n.app.showInFolder("")}))}))}))})),e.createDiv({cls:"workspace-drawer-vault-actions"},(function(e){e.createSpan("clickable-icon",(function(e){mx(e,"help"),e.addEventListener("click",(function(){return n.app.openHelp()}))})),e.createSpan("clickable-icon",(function(e){mx(e,"lucide-settings"),e.addEventListener("click",(function(){return n.app.setting.open()}))}))}))}))}},mG=200,vG={duration:140,fn:"var(--anim-motion-swing)"},gG=function(e){function t(t,n){var i=e.call(this)||this;i.containerEl=null,i.dimension=null,i.component=new xA,i.app=t.app,i.workspace=t,i.id=n||oc(16);var r=i.containerEl=createDiv(),o=i.resizeHandleEl=r.createEl("hr","workspace-leaf-resize-handle");return i.component.load(),o.addEventListener("mousedown",i.onResizeStart.bind(i)),i}return f(t,e),Object.defineProperty(t.prototype,"parentSplit",{get:function(){return this.parent},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){var e={id:this.id,type:this.type};return this.dimension&&(e.dimension=this.dimension),e},t.prototype.onResizeStart=function(e){if(0===e.button){e.preventDefault();var t=this.parent;t instanceof bG&&t.onChildResizeStart(this,e)}},t.prototype.setParent=function(e){this.parent=e},t.prototype.getRoot=function(){for(var e=this;e.parent;)e=e.parent;return e},t.prototype.getContainer=function(){for(var e=this;e.parent;){if(e instanceof kG)return e;e=e.parent}return e instanceof kG?e:this.workspace.rootSplit},t.prototype.setDimension=function(e){null!==e&&(e<=0||e>=100)&&(e=null),this.dimension=e;var t=this.containerEl,n="";e&&(n=String(e)),t.style.flexGrow=n},t.prototype.detach=function(){this.parent&&this.parent.removeChild(this)},t.prototype.getIcon=function(){return"lucide-file"},t}(sw),yG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allowSingleChild=!1,t.autoManageDOM=!0,t}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.children=this.children.map((function(e){return e.serialize()})),t},t.prototype.replaceChild=function(e,t){var n=this,i=n.workspace,r=n.autoManageDOM,o=n.containerEl,a=n.children;e<0&&(e=0),e>=a.length&&(e=a.length);var s=a[e],l=s.containerEl.nextSibling;if(r&&s.containerEl.detach(),s.setParent(null),a[e]=t,r){var c=t.containerEl;o.insertBefore(c,l)}t.setParent(this),i.onLayoutChange(this)},t.prototype.insertChild=function(e,t){var n=this,i=n.workspace,r=n.autoManageDOM,o=n.containerEl,a=n.children;(e<0||e>=a.length)&&(e=a.length);var s=a[e],l=s?s.containerEl:null;if(a.splice(e,0,t),r){var c=t.containerEl;o.insertBefore(c,l)}t.setParent(this),i.onLayoutChange(this)},t.prototype.removeChild=function(e){var t=this,n=t.workspace,i=t.autoManageDOM,r=t.parent,o=t.children;if(o.remove(e),e.setParent(null),i&&e.containerEl.detach(),r)if(1!==o.length||this.allowSingleChild){if(0===o.length)return void r.removeChild(this)}else{var a=o[0];o.remove(a),i&&a.containerEl.detach(),a.setParent(null);var s=r.children.indexOf(this);i&&r.replaceChild(s,a),a.setDimension(this.dimension)}n.onLayoutChange(this)},t.prototype.recomputeChildrenDimensions=function(){},t}(gG),bG=function(e){function t(t,n,i){var r=e.call(this,t,i)||this;return r.parent=null,r.children=[],r.type="split",r.direction=null,r.resizeStartPos=null,r.originalSizes=null,r.isResizing=!1,r.workspace=t,r.containerEl.addClass("workspace-split"),r.setDirection(n),r}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.direction=this.direction,t},t.prototype.setDirection=function(e){this.containerEl.removeClass("mod-"+this.direction),this.direction=e,this.containerEl.addClass("mod-"+e)},t.prototype.recomputeChildrenDimensions=function(){for(var e=this.children,t=0,n=0,i=e;n<i.length;n++){if(null==(a=i[n]).dimension){t=null;break}t+=a.dimension}for(var r=0,o=e;r<o.length;r++){var a=o[r];null==t||isNaN(t)?a.setDimension(null):a.setDimension(100*a.dimension/t)}this.workspace.requestResize()},t.prototype.onChildResizeStart=function(e,t){var n=this;if(0===t.button){var i=t.win;this.resizeStartPos={x:t.clientX,y:t.clientY};var r=function(t){if(0===t.button){var i=t.clientX,r=t.clientY,o=0;"vertical"===n.direction?o=i-n.resizeStartPos.x:"horizontal"===n.direction&&(o=r-n.resizeStartPos.y);var a=n.children.indexOf(e);if(n.isResizing||(n.originalSizes=n.children.map((function(e){return n.getElSize(e.containerEl)})),n.isResizing=!0),n.isResizing){var s=n.children.slice(0,a+1),l=n.children.slice(a+1);if(s.reverse(),o>0){var c=n.resizeItemsByDiff(l,o,1);Math.abs(o)>c&&(o=c),n.resizeItemsByDiff(s,o,-1)}else{c=n.resizeItemsByDiff(s,o,-1);Math.abs(o)>c&&(o=-c),n.resizeItemsByDiff(l,o,1)}t.preventDefault()}}},o=function(){i.removeEventListener("mousemove",r),i.removeEventListener("mouseup",o),document.body.removeClass("is-grabbing");try{n.finishResize()}catch(e){console.error(e)}};i.addEventListener("mousemove",r),i.addEventListener("mouseup",o),document.body.addClass("is-grabbing")}},t.prototype.resizeItemsByDiff=function(e,t,n){for(var i=0,r=0,o=e;r<o.length;r++){var a=o[r],s=this.children.indexOf(a),l=this.originalSizes[s],c=l-t*n,u=l-(c=Math.max(200,c));t-=u*n,i+=Math.abs(u),this.setElSize(this.children[s].containerEl,c)}return i},t.prototype.finishResize=function(){this.isResizing=!1,this.resizeStartPos=null;for(var e=this.children,t=[],n=0,i=0,r=e;i<r.length;i++){var o=r[i],a=this.getElSize(o.containerEl);t.push(a),n+=a}for(var s=0;s<e.length;s++){o=e[s],a=t[s];this.unsetElSize(o.containerEl);var l=a/n*100;o.setDimension(l)}this.workspace.requestSaveLayout(),this.workspace.requestResize()},t.prototype.getElSize=function(e){return"vertical"===this.direction?e.offsetWidth:"horizontal"===this.direction?e.offsetHeight:void 0},t.prototype.setElSize=function(e,t){return e.style.flex="0 0 auto","vertical"===this.direction?e.style.width="".concat(t,"px"):"horizontal"===this.direction?e.style.height="".concat(t,"px"):void 0},t.prototype.unsetElSize=function(e){e.style.flex="",e.style.width="",e.style.height=""},t}(yG),wG=function(e){function t(t,n,i,r){var o=e.call(this,t,n,r)||this;return o.size=300,o.collapsed=!1,o.emptyStateEl=null,o.side=i,o.containerEl.addClass("mod-sidedock"),o.containerEl.addClass("mod-".concat(i,"-split")),o.workspace.containerEl.addClass("is-".concat(i,"-sidedock-open")),"left"===i&&new fG(t.app,o.containerEl),o.resizeHandleEl.addEventListener("mousedown",o.onSidedockResizeStart.bind(o)),o.emptyStateEl=o.containerEl.createDiv("workspace-sidedock-empty-state",(function(e){e.createEl("p",{cls:"u-muted",text:Qf.interface.emptySidebar()})})),o.setSize(o.size),o}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.width=this.size,this.collapsed&&(t.collapsed=!0),t},t.prototype.setSize=function(e){this.size=e,this.containerEl.style.width="".concat(e,"px")},t.prototype.toggle=function(){this.collapsed?this.expand():this.collapse()},t.prototype.collapse=function(){if(!this.collapsed){this.collapsed=!0;var e=this,t=e.workspace,n=e.side,i=e.containerEl,r=e.resizeHandleEl,o=e.children;if(t.containerEl.removeClass("is-".concat(n,"-sidedock-open")),i.addClass("is-sidedock-collapsed"),"left"===n?t.leftRibbon.setCollapsedState(!0):"right"===n&&t.rightRibbon.setCollapsedState(!0),this.workspace.layoutReady){for(var a="".concat(this.size,"px"),s=o.map((function(e){return e.containerEl})),l=0,c=s;l<c.length;l++){c[l].style.minWidth=a}yl(i,!0),i.style.overflow="hidden",wl(i,new ml(vG).addProp("width",a,"0"),(function(){i.hide(),i.style.overflow="";for(var e=0,n=s;e<n.length;e++){n[e].style.minWidth=""}t.requestResize()}))}else i.hide(),i.style.width="0";var u=t.activeLeaf,h=t.rootSplit;u&&u.getRoot()===this&&t.setActiveLeaf(t.getMostRecentLeaf(h),{focus:!0}),t.requestSaveLayout(),t.updateFrameless(),r.style.opacity="0"}},t.prototype.expand=function(){if(this.collapsed){this.collapsed=!1;var e=this,t=e.workspace,n=e.side,i=e.containerEl,r=e.resizeHandleEl,o=e.children;t.containerEl.addClass("is-".concat(n,"-sidedock-open")),i.removeClass("is-sidedock-collapsed"),"left"===n?t.leftRibbon.setCollapsedState(!1):"right"===n&&t.rightRibbon.setCollapsedState(!1);for(var a="".concat(this.size,"px"),s=o.map((function(e){return e.containerEl})),l=0,c=s;l<c.length;l++){c[l].style.minWidth=a}i.show(),yl(i,!0),i.style.overflow="hidden",wl(i,new ml(vG).addProp("width","0",a),(function(){i.style.overflow="";for(var e=0,n=s;e<n.length;e++){n[e].style.minWidth=""}t.requestResize()})),t.requestSaveLayout(),t.updateFrameless(),r.style.opacity="1"}},t.prototype.onSidedockResizeStart=function(e){var t=this;if(0===e.button){var n=e.win;this.app.disableCssTransition();var i=function(e){var n=e.clientX,i=mG,r=t.containerEl.getBoundingClientRect();if("left"===t.side?(i=n-r.x,i+=t.resizeHandleEl.offsetWidth/2):"right"===t.side&&(i=t.workspace.containerEl.clientWidth-n,i+=t.resizeHandleEl.offsetWidth/2),!t.collapsed&&i<50)t.collapse();else if(t.collapsed&&i>=mG)t.expand();else if(!t.collapsed){var o=t.workspace.containerEl.clientWidth,a=Math.clamp(i,mG,Math.max(mG,.8*o));t.setSize(a)}e.preventDefault()},r=function(e){0===e.button&&(n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",r),document.body.removeClass("is-grabbing"),t.app.enableCssTransition(),t.workspace.requestSaveLayout(),t.workspace.requestResize())};n.addEventListener("mousemove",i),n.addEventListener("mouseup",r),document.body.addClass("is-grabbing")}},t.prototype.recomputeChildrenDimensions=function(){e.prototype.recomputeChildrenDimensions.call(this),0===this.children.length?(this.collapse(),this.emptyStateEl.show(),"right"===this.side&&this.workspace.rightRibbon.hide()):(this.emptyStateEl.hide(),"right"===this.side&&this.workspace.rightRibbon.show())},t}(bG),kG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allowSingleChild=!0,t}return f(t,e),t.prototype.onFocus=function(){var e=this;setTimeout((function(){if(e.doc.hasFocus()){var t=!!e.doc.querySelector(".modal-container"),n=e.workspace,i=n.activeLeaf;if(!i||i.getContainer()!==e){var r=n.getMostRecentLeaf(e);r&&n.setActiveLeaf(r,{focus:!Zl.isMobile&&!t})}}}),100)},t.prototype.focus=function(){if(Zl.isDesktopApp&&!this.doc.hasFocus()){var e=this.win.electronWindow;e.isMinimized()&&e.restore(),e.focus()}},t}(bG),CG=function(e){function t(n,i,r){var o=e.call(this,n,r)||this;o.type="mobile-drawer",o.children=[],o.allowSingleChild=!0,o.autoManageDOM=!1,o.currentTab=0,o.collapsed=!1,o.isPinned=!1,o.containerEl=null,o.backdropEl=null,o.innerEl=null,o.headerEl=null,o.tabContainerEl=null,o.activeTabContentEl=null,o.pinIconEl=null,o.side=i,o.collapsed=!0;var a=o.containerEl=createDiv("workspace-drawer");a.hide();var s=o.innerEl=a.createDiv("workspace-drawer-inner");o.backdropEl=createDiv("workspace-drawer-backdrop",(function(e){e.addEventListener("click",o.collapse.bind(o)),e.style.opacity="0"})),o.headerEl=s.createDiv("workspace-drawer-header");var l=o.tabContainerEl=s.createDiv("workspace-drawer-tab-container"),c=o.activeTabEl=l.createDiv("workspace-drawer-active-tab-container"),u=o.activeTabHeaderEl=c.createEl("label","workspace-drawer-active-tab-header tappable"),h=o.activeTabSelectEl=u.createEl("select");h.addEventListener("change",(function(e){o.selectTabIndex(Number(h.value)),u.removeClass("is-open")})),o.activeTabIconEl=u.createSpan("workspace-drawer-active-tab-icon"),o.activeTabTitleEl=u.createSpan("workspace-drawer-active-tab-title"),u.addEventListener("contextmenu",(function(e){o.children[o.currentTab].onOpenTabHeaderMenu(e,u)})),u.createDiv("clickable-icon workspace-drawer-active-tab-chevron",(function(e){mx(e,"lucide-chevrons-up-down")})),o.activeTabContentEl=c.createDiv("workspace-drawer-active-tab-content"),o.component.registerEvent(n.on("active-leaf-change",o.onLeafChange,o));var d="left"===i?1:-1;return o.component.registerEvent(n.on("swipe",(function(e){if(!o.isPinned&&!(e.points>1||"x"!==e.direction)){var n=o,r=n.containerEl,a=n.backdropEl;yl(r),yl(a);var s=o.workspace.leftSplit,l=o.workspace.rightSplit,c=s.collapsed||s instanceof t&&s.isPinned,u=l.collapsed||l instanceof t&&l.isPinned,h=c&&u&&("left"===i&&e.x>e.startX||"right"===i&&e.x<e.startX);if(o.collapsed){if(h){o.collapsed=!1,xw(),r.show(),o.fixIosEvent(),o.workspace.containerEl.appendChild(a);var p=r.offsetWidth;e.registerCallback({move:function(t){var n=Math.clamp((t-e.startX)*d/p,0,1);n=Math.clamp(n,0,1),r.style.transform="translateX(".concat(-(1-n)*p*d,"px)"),a.style.opacity=String(n)},cancel:function(){r.style.transform="",r.hide(),a.detach(),o.collapsed=!0},finish:function(t,n,i){var s,l=Math.clamp((t-e.startX)*d/p,0,1);i*d>p/2?(wl(r,new ml({duration:150*(s=1-l),fn:"ease-out"}).addProp("transform",null,"translateX(0)","")),wl(a,new ml({duration:150*s,fn:"linear"}).addProp("opacity",null,"1","")),o.onExpand()):(o.collapsed=!0,o.onCollapse(),wl(r,new ml({duration:150*(s=l)}).addProp("transform",null,"translateX(".concat(-p*d,"px)"),""),(function(){r.hide()})),wl(a,new ml({duration:150*s,fn:"linear"}).addProp("opacity",null,"0"),(function(){a.detach()})))}})}}else{var f=r.offsetWidth;e.registerCallback({move:function(t){var n=Math.clamp(-(t-e.startX)*d/f,0,1);r.style.transform="translateX(".concat(-n*f*d,"px)"),a.style.opacity=String(1-n)},cancel:function(){r.style.transform="",a.style.opacity=""},finish:function(t,n,i){var s,l=Math.clamp(-(t-e.startX)*d/f,0,1);-i*d<f/2?(wl(r,new ml({duration:150*(s=l)}).addProp("transform",null,"translateX(0)","")),wl(a,new ml({duration:150*s,fn:"linear"}).addProp("opacity",null,"1",""))):(o.collapsed=!0,o.onCollapse(),wl(r,new ml({duration:150*(s=1-l),fn:"ease-out"}).addProp("transform",null,"translateX(".concat(-f*d,"px)"),""),(function(){r.hide()})),wl(a,new ml({duration:150*s,fn:"linear"}).addProp("opacity",null,"0"),(function(){a.detach()})))}})}}}))),n.on("resize",(function(){Zl.isPhone&&o.isPinned&&o.setPinned(!1)})),o}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.currentTab=this.currentTab,this.isPinned&&(t.pinned=!0),t},t.prototype.onLeafChange=function(e){this.collapsed||e&&e.getRoot()===this||this.collapse()},t.prototype.expand=function(){if(this.collapsed){this.collapsed=!1,this.onExpand();var e=this.containerEl,t=this.backdropEl;e.show(),this.fixIosEvent(),this.workspace.containerEl.appendChild(t),xw();var n=e.offsetWidth*("left"===this.side?-1:1);wl(t,new ml({duration:150,fn:"linear"}).addProp("opacity","0","1")),wl(e,new ml({duration:150}).addProp("transform","translateX(".concat(n,"px)"),"translateX(0)",""))}},t.prototype.fixIosEvent=function(){if(Zl.isIosApp){var e=this.containerEl;e.show(),e.offsetHeight,e.hide(),e.offsetHeight,e.show()}},t.prototype.onExpand=function(){},t.prototype.collapse=function(){if(!this.isPinned&&!this.collapsed){this.collapsed=!0,this.onCollapse();var e=this,t=e.containerEl,n=e.backdropEl;e.workspace;xw();var i=t.offsetWidth*("left"===this.side?-1:1);wl(n,new ml({duration:150,fn:"linear"}).addProp("opacity","1","0"),(function(){n.detach()})),wl(t,new ml({duration:150}).addProp("transform","translateX(0)","translateX(".concat(i,"px)"),""),(function(){t.hide()}))}},t.prototype.onCollapse=function(){var e=this.workspace,t=e.activeLeaf,n=e.rootSplit;t&&t.getRoot()===this&&e.setActiveLeaf(e.getMostRecentLeaf(n))},t.prototype.toggle=function(){this.collapsed?this.expand():this.collapse()},t.prototype.selectTabIndex=function(e){this.currentTab=e,this.recomputeChildrenDimensions(),this.workspace.requestSaveLayout(),this.workspace.requestResize()},t.prototype.selectTab=function(e){var t=this.children.indexOf(e);-1!==t&&this.selectTabIndex(t)},t.prototype.recomputeChildrenDimensions=function(){var e=this,t=this,n=t.innerEl,i=t.children,r=t.headerEl,o=t.currentTab,a=void 0===o?0:o,s=t.tabContainerEl,l=t.activeTabIconEl,c=t.activeTabSelectEl,u=t.activeTabTitleEl,h=t.activeTabContentEl,d=i[a=Math.clamp(a,0,i.length-1)];if(d&&(mx(l,d.getIcon()),u.setText(d.getDisplayText()),h.setChildrenInPlace([d.containerEl])),c.setChildrenInPlace(i.map((function(t,n){var i=createEl("option",{text:t.getDisplayText(),value:String(n)});return n===e.currentTab&&(i.selected=!0),i}))),"left"===this.side){var p=this.workspace.leftRibbon.containerEl;p.removeClass("workspace-ribbon"),p.addClass("workspace-drawer-ribbon"),n.setChildrenInPlace([p,r,s])}else"right"===this.side&&n.setChildrenInPlace([r,s])},t.prototype.openLeaf=function(e){var t=this.children.indexOf(e);-1!==t&&this.selectTabIndex(t)},t.prototype.addHeaderButton=function(e,t){return this.headerEl.createDiv("clickable-icon workspace-drawer-header-icon",(function(n){mx(n,e),n.addEventListener("click",t)}))},t.prototype.setPinned=function(e){Zl.canPinSidebar||(e=!1),this.isPinned!==e&&(this.isPinned=e,this.containerEl.toggleClass("is-pinned",e),this.backdropEl.toggle(!e),e?this.expand():this.collapse(),this.workspace.requestUpdateLayout())},t.prototype.togglePinned=function(){this.setPinned(!this.isPinned)},t}(yG),MG=function(e){function t(t,n){var i=e.call(this,t,"left",n)||this;i.fileCountEl=null;var r=i.app.vault;return i.headerEl.createDiv("workspace-drawer-header-left",(function(e){e.createDiv({cls:"workspace-drawer-header-name"},(function(e){e.createEl("label","workspace-drawer-header-switcher",(function(e){e.createSpan({cls:"workspace-drawer-header-name-text",text:r.getName()}),e.createSpan("workspace-drawer-header-name-chevron",(function(e){return mx(e,"lucide-chevron-down")}));var t=e.createEl("select","",(function(e){return g(i,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return t=e.createEl("option",{text:Qf.interface.manageVaults(),value:"manage-vaults"}),n=localStorage.getItem("mobile-selected-vault"),i=0,[4,pG()];case 1:r=l.sent(),l.label=2;case 2:if(!(i<r.length))return[3,4];o=r[i],a=o.name,"iCloud"===o.storageType&&(a+=" (iCloud)"),s=e.createEl("option",{text:a,value:o.location}),n===o.location&&(s.selected=!0),l.label=3;case 3:return i++,[3,2];case 4:return e.appendChild(t),[2]}}))}))}));t.addEventListener("change",(function(e){var n=t.value;"manage-vaults"===n?i.app.openVaultChooser():(window.localStorage.setItem("mobile-selected-vault",n),location.reload())}))}))})),e.createDiv("workspace-drawer-header-info",(function(e){i.fileCountEl=e.createDiv(),i.updateInfo()}))})),i.addHeaderButton("lucide-settings",(function(e){i.app.setting.open()})).addClass("mod-settings"),i.pinIconEl=i.addHeaderButton("pin",(function(e){i.togglePinned()})),i.pinIconEl.addClass("mod-pin"),i.containerEl.addClass("mod-left"),i.component.registerEvent(r.on("create",i.updateInfo.bind(i))),i.component.registerEvent(r.on("delete",i.updateInfo.bind(i))),i}return f(t,e),t.prototype.updateInfo=function(){var e=this.app.vault,t=Qf.nouns.fileWithCount({count:e.getRoot().getFileCount()}),n=Qf.nouns.folderWithCount({count:e.getRoot().getFolderCount()}),i=Qf.plugins.fileExplorer.tooltipFoldersFilesCount({fileCount:t,folderCount:n});this.fileCountEl.setText(i)},t}(CG),EG=function(e){function t(t,n){var i=e.call(this,t,"right",n)||this;i.fileNameEl=null,i.fileInfoElToRenderer=[];var r=i.headerEl,o=t.mobileFileInfos;return r.createDiv("workspace-drawer-header-left",(function(e){e.createDiv({cls:"workspace-drawer-header-name"},(function(e){i.fileNameEl=e.createDiv({cls:"workspace-drawer-header-name-text",text:Qf.interface.noFile()})})),e.createDiv("workspace-drawer-header-info",(function(e){for(var t=0,n=o;t<n.length;t++){var r=n[t],a=e.createDiv("workspace-drawer-header-info-item");i.fileInfoElToRenderer.push({el:a,renderer:r.renderCallback})}}))})),i.containerEl.addClass("mod-right"),i.component.registerEvent(i.app.vault.on("rename",i.updateName.bind(i))),i.component.registerEvent(t.on("quick-preview",i.onQuickPreview,i)),i.component.registerEvent(t.on("file-open",i.onFileOpen,i)),i.pinIconEl=i.addHeaderButton("pin",(function(e){i.togglePinned()})),i.pinIconEl.addClass("mod-pin"),i}return f(t,e),t.prototype.onFileOpen=function(e){this.updateName(e),this.updateInfo()},t.prototype.onQuickPreview=function(e){this.app.workspace.getActiveFile()===e&&this.updateInfo()},t.prototype.updateName=function(e){var t=e?e.getShortName():Qf.interface.noFile();this.fileNameEl.setText(t)},t.prototype.updateInfo=function(){for(var e=0,t=this.fileInfoElToRenderer;e<t.length;e++){var n=t[e];n.renderer(n.el)}},t}(CG),SG=.2,xG=function(e,t,n){return void 0===n&&(n=.9),e*n+t*(1-n)},TG=function(e,t){return(xG(e>>16&255,t>>16&255)<<16)+(xG(e>>8&255,t>>8&255)<<8)+(0|xG(255&e,255&t))},DG=function(e,t){return t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom},AG=function(e,t,n){return{left:e-n,right:e+n,top:t-n,bottom:t+n}},LG=function(e){e.style.margin="0",e.style.padding="0",e.style.border="0",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden"},PG={showAttachments:!1,hideUnresolved:!1,showOrphans:!0,showTags:!1,localFile:null,localJumps:1,localInterlinks:!1,localForelinks:!0,localBacklinks:!0};function IG(e){return void 0===e&&(e=""),{type:e,links:{}}}function FG(e){if(!e)return IG();var t=IG(e.type);return e.color&&(t.color=e.color),t}var OG={tag:!0},BG={fill:"color-fill",fillFocused:"color-fill-focused",fillTag:"color-fill-tag",fillUnresolved:"color-fill-unresolved",fillAttachment:"color-fill-attachment",arrow:"color-arrow",circle:"color-circle",line:"color-line",text:"color-text",fillHighlight:"color-fill-highlight",lineHighlight:"color-line-highlight"},NG=100,RG=function(){function e(e,t,n){var i=this;this.x=null,this.y=null,this.fx=null,this.fy=null,this.forward={},this.reverse={},this.weight=0,this.color=null,this.rendered=!1,this.fadeAlpha=0,this.moveText=0,this.fontDirty=!1,this.onClick=function(e){var t=e.nativeEvent;if(2===e.button||t.instanceOf(MouseEvent)&&Yl(t)){var n=i.renderer;n.onNodeRightClick&&n.onNodeRightClick(e.nativeEvent,i.id,i.type)}},this.renderer=e,this.id=t,this.type=n}return e.prototype.initGraphics=function(){var e=this;if(this.rendered)return!1;this.rendered=!0;var t,n=this.renderer;(t=this.circle=new PIXI.Graphics).eventMode="static",t.beginFill(16777215),t.drawCircle(NG,NG,NG),t.endFill(),Zl.isMobile&&(t.beginFill(16777215,1e-4),t.drawCircle(NG,NG,500),t.endFill()),t.pivot.x=NG,t.pivot.y=NG,t.cursor="pointer",t.zIndex=1,t.on("pointerdown",(function(t){return n.onPointerDown(e,t)})).on("pointerover",(function(t){return n.onPointerOver(e,t)})).on("pointerout",(function(){return n.onPointerOut()})).on("click",this.onClick).on("rightclick",this.onClick);var i=this.getFillColor();t.alpha=i.a,t.tint=i.rgb,n.hanger.addChild(t);var r=new PIXI.TextStyle(this.getTextStyle()),o=this.text=new PIXI.Text(this.getDisplayText(),r);return o.eventMode="none",o.resolution=2,o.anchor.set(.5,0),o.zIndex=2,n.hanger.addChild(o),this.fadeAlpha=0,!0},e.prototype.clearGraphics=function(){if(this.rendered){this.rendered=!1;var e=this,t=e.circle,n=e.highlight,i=e.text;t&&(this.circle=null,t.parent&&t.parent.removeChild(t),t.destroy()),n&&(this.highlight=null,n.parent&&n.parent.removeChild(n),n.destroy()),i&&(this.text=null,i.parent&&i.parent.removeChild(i),i.destroy())}},e.prototype.getTextStyle=function(){var e=this.renderer,t=this.getSize();return new PIXI.TextStyle({fontSize:14+t/4,fill:e.colors.text.rgb,fontFamily:'ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Microsoft YaHei Light", sans-serif',wordWrap:!0,wordWrapWidth:300,align:"center"})},e.prototype.render=function(){if(this.rendered){var e=this,t=e.renderer,n=e.x,i=e.y,r=e.circle,o=e.highlight,a=e.text,s=e.fadeAlpha,l=e.moveText,c=this.getSize(),u=this.getFillColor(),h=t.colors.text,d=t.getHighlightNode(),p=d===this,f=t.nodeScale,m=a.visible,v=SG;(!d||p||this.forward.hasOwnProperty(d.id)||this.reverse.hasOwnProperty(d.id))&&(v=1);var g=(s=this.fadeAlpha=xG(s,v))*u.a,y=t.textAlpha;y*=s,p&&(y=1),y*=h.a;var b=p?15:0;l=this.moveText=m?xG(l,b):b;var w=y>.001,k=t.viewport,C=p||!DG(k,AG(n,i,c*f+1));if(w&&(w=p||!DG(k,{left:n-300,right:n+300,top:i,bottom:i+200})),r.tint=TG(r.tint,u.rgb),r.visible=C,C&&(r.x=n,r.y=i,r.scale.x=r.scale.y=c/100*f,r.alpha=g),a.visible=w,w&&(a.x=n,a.y=i+(c+5)*f+l/t.scale,a.scale.x=a.scale.y=f,p&&t.scale<1&&(a.scale.x=a.scale.y=1/t.scale),a.alpha=y),p){o||((o=this.highlight=new PIXI.Graphics).eventMode="none",o.zIndex=1,t.hanger.addChild(o)),o.x=n,o.y=i,o.scale.x=o.scale.y=f,o.clear();var M=Math.max(1,1/t.scale/f),E=t.colors.circle;o.alpha=E.a,o.lineStyle(M,E.rgb,1),o.drawCircle(0,0,c+M/2)}else o&&(o.parent.removeChild(o),o.destroy(),this.highlight=null);this.fontDirty&&(this.fontDirty=!1,a.style=this.getTextStyle())}},e.prototype.getFillColor=function(){var e=this,t=e.renderer,n=e.type,i=e.color;if(t.getHighlightNode()===this)return t.colors.fillHighlight;if("focused"===n){var r=t.colors.fillFocused;if(r.a>0)return r}else{if(i)return i;if("tag"===n)return t.colors.fillTag;if("unresolved"===n)return t.colors.fillUnresolved;if("attachment"===n)return t.colors.fillAttachment}return t.colors.fill},e.prototype.getSize=function(){return this.renderer.fNodeSizeMult*Math.max(8,Math.min(3*Math.sqrt(this.weight+1),30))},e.prototype.getDisplayText=function(){var e=this.id;return eu(e,"md")&&(e=Xc(e)),e},e.prototype.getRelated=function(){return Object.keys(this.forward).concat(Object.keys(this.reverse))},e}(),HG=function(){function e(e,t,n){this.rendered=!1,this.renderer=e,this.source=t,this.target=n}return e.prototype.initGraphics=function(){if(!this.rendered&&this.source.rendered&&this.target.rendered){this.rendered=!0;var e=this.renderer,t=this.px=new PIXI.Container;e.hanger.addChild(t);var n=this.line=new PIXI.Sprite(PIXI.Texture.WHITE);n.eventMode="none";var i=e.colors.line;n.alpha=SG*i.a,n.tint=i.rgb,t.addChild(n);var r=this.arrow=new PIXI.Graphics;r.eventMode="none";var o=e.colors.text;r.alpha=SG*o.a,r.tint=o.rgb,r.beginFill(16777215),r.moveTo(0,0),r.lineTo(-4,-2),r.lineTo(-3,0),r.lineTo(-4,2),r.lineTo(0,0),r.endFill(),r.zIndex=1,e.hanger.addChild(r)}},e.prototype.clearGraphics=function(){if(this.rendered){this.rendered=!1;var e=this,t=e.px,n=e.line,i=e.arrow;t&&(this.px=null,t.parent&&t.parent.removeChild(t),t.destroy(),t.visible=!1),n&&(this.line=null,n.destroy(),n.visible=!1),i&&(this.arrow=null,i.parent&&i.parent.removeChild(i),i.destroy(),i.visible=!1)}},e.prototype.render=function(){if(this.rendered){var e=this,t=e.px,n=e.line,i=e.arrow,r=e.renderer,o=e.source,a=e.target,s=r.getHighlightNode(),l=o===s||a===s,c=SG;s&&!l||(c=1);var u=c*Math.clamp(2*(r.scale-.3),0,1),h=r.colors.line;l&&(h=r.colors.lineHighlight);var d,p,f=r.colors.arrow,m=!(o.reverse.hasOwnProperty(a.id)&&o.id.localeCompare(a.id)<0),v=r.fShowArrow,g=r.fLineSizeMult/r.scale,y=r.viewport,b=AG(o.x,o.y,g),w=AG(a.x,a.y,g),k=!DG(y,(d=b,p=w,{left:Math.min(d.left,p.left),right:Math.max(d.right,p.right),top:Math.min(d.top,p.top),bottom:Math.max(d.bottom,p.bottom)}));if(c*=h.a,u*=f.a,n.alpha=xG(n.alpha,c),i.alpha=xG(i.alpha,u),m=m&&k,v=v&&k&&i.alpha>.001,n.visible=m,i.visible=v,m||v){var C=a.x-o.x,M=a.y-o.y,E=Math.sqrt(C*C+M*M),S=o.getSize()*r.nodeScale,x=a.getSize()*r.nodeScale;i.visible=v=v&&E>g,m&&(t.x=o.x+C*S/E,t.y=o.y+M*S/E,t.pivot.set(0,0),t.rotation=Math.atan2(M,C),n.x=0,n.y=-g/2,n.width=Math.max(0,E-S-x),n.height=g,n.tint=TG(n.tint,h.rgb)),i.visible=v,v&&(x+=1,i.x=a.x-C*x/E,i.y=a.y-M*x/E,i.pivot.set(0,0),i.rotation=Math.atan2(M,C),i.scale.x=i.scale.y=2*Math.sqrt(r.fLineSizeMult)/r.scale,i.tint=f.rgb)}}},e}(),VG=function(){function e(e){this.rendered=!1,this.renderer=e}return e.prototype.initGraphics=function(){var e=this.renderer;if(!this.text){var t=this.text=new PIXI.Text("Powered by Obsidian",this.getTextStyle());t.eventMode="none",t.anchor.set(1,1),t.zIndex=3,t.alpha=.5,e.px.stage.addChild(t)}},e.prototype.clearGraphics=function(){var e=this.text;e&&e.parent&&(this.text=null,e.parent.removeChild(e),e.destroy()),this.rendered=!1},e.prototype.render=function(){var e=this.renderer,t=this.text;if(t){t.visible=!e.hidePowerTag,t.alpha=e.colors.text.a;var n=e.px.renderer;t.x=n.width/n.resolution,t.y=n.height/n.resolution,this.rendered||(this.rendered=!0,this.text.style=this.getTextStyle())}},e.prototype.getTextStyle=function(){return new PIXI.TextStyle({fontSize:12,fill:this.renderer.colors.text.rgb,fontFamily:'ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Microsoft YaHei Light", sans-serif',wordWrap:!1,align:"right"})},e}(),zG=function(){function e(e,t,n,i){var r=this;this.interactiveEl=null,this.onNodeClick=null,this.onNodeRightClick=null,this.onNodeHover=null,this.onNodeUnhover=null,this.workerResults=null,this.nodeLookup={},this.nodes=[],this.links=[],this.dragNode=null,this.highlightNode=null,this.px=null,this.hanger=null,this.powerTag=null,this.scale=1,this.nodeScale=1,this.textAlpha=1,this.targetScale=1,this.panX=0,this.panY=0,this.panvX=0,this.panvY=0,this.keyboardActions={},this.panning=!1,this.width=0,this.height=0,this.viewport=null,this.zoomCenterX=0,this.zoomCenterY=0,this.hidePowerTag=!1,this.fNodeSizeMult=1,this.fLineSizeMult=1,this.fTextShowMult=1,this.fShowArrow=!1,this.mouseX=null,this.mouseY=null,this.colors={},this.renderTimer=null,this.hidePowerTag=n,this.containerEl=e,this.testCSS();var o=this.interactiveEl=e.createEl("canvas");if(e.style.padding="0",e.style.overflow="hidden",e.style.position="relative",o.style.position="absolute",o.style.left="0",o.style.top="0",LG(o),o.addEventListener("mousedown",(function(e){return e.preventDefault()})),o.addEventListener("wheel",this.onWheel.bind(this),{passive:!1}),o.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),o.addEventListener("mouseout",this.onMouseMove.bind(this)),i||(i=new Worker("/sim.js",{name:"Graph Worker"})),this.worker=i,i.onmessage=function(e){e.data.ignore||(r.workerResults=e.data,r.changed())},t){var a=this.iframeEl=e.createEl("iframe");LG(a),a.onload=this.onIframeLoad.bind(this),a.contentDocument&&this.onIframeLoad()}else{var s=e.createEl("canvas");LG(s),setTimeout((function(){try{r.initGraphics(s)}catch(e){setTimeout((function(){r.initGraphics(s)}),300)}}),50)}}return e.prototype.destroy=function(){this.worker.terminate(),this.workerResults=null,this.destroyGraphics()},e.prototype.onIframeLoad=function(){var e=this.iframeEl;e.contentWindow.onbeforeunload=this.onIframeUnload.bind(this);var t=e.contentDocument.body;LG(t),t.innerHTML="<canvas>";var n=t.firstChild;LG(n),this.destroyGraphics(),this.initGraphics(n)},e.prototype.onIframeUnload=function(){this.destroyGraphics()},e.prototype.onWheel=function(e){if(e.preventDefault(),this.px){var t=e.deltaY;1===e.deltaMode?t*=40:2===e.deltaMode&&(t*=800);var n=this.targetScale;if(n*=Math.pow(1.5,-t/120),this.targetScale=n,n<this.scale)this.zoomCenterX=0,this.zoomCenterY=0;else{var i=window.devicePixelRatio;this.zoomCenterX=e.offsetX*i,this.zoomCenterY=e.offsetY*i}this.changed()}},e.prototype.onMouseMove=function(e){"mouseout"===e.type?this.mouseX=this.mouseY=null:(this.mouseX=e.offsetX,this.mouseY=e.offsetY)},e.prototype.initGraphics=function(e){var t,n=this,i=this,r=i.iframeEl,o=i.interactiveEl,a=i.worker;PIXI.settings.RENDER_OPTIONS.hello=!1;var s=window.WebGL2RenderingContext;try{r&&r.contentWindow.WebGL2RenderingContext&&(window.WebGL2RenderingContext=r.contentWindow.WebGL2RenderingContext),t=this.px=new PIXI.Application({view:e,antialias:!0,backgroundAlpha:0,autoStart:!1})}finally{window.WebGL2RenderingContext=s}t.renderer.events.setTargetElement(o);var l=null;this.onPointerDown=function(e,i){i.nativeEvent.target===o&&(g||(n.dragNode=e,l=i.getLocalPosition(t.stage)))};var c=function(e){e.nativeEvent.instanceOf(TouchEvent)&&k(e.nativeEvent);var t=n.dragNode;if(t){var i=e.nativeEvent;l&&n.onNodeClick&&(i.instanceOf(MouseEvent)&&(0===i.button||1===i.button)&&!Yl(i)||i.instanceOf(TouchEvent))&&n.onNodeClick(i,t.id,t.type),t.fx=null,t.fy=null,a.postMessage({alphaTarget:0,forceNode:{id:t.id,x:null,y:null}}),l=null,n.dragNode=null,n.changed()}};t.stage.on("pointermove",(function(e){var i=n.dragNode;if(i){if(y)return l=null,void(n.dragNode=null);if(l){var r=e.getLocalPosition(t.stage),o=r.x-l.x,s=r.y-l.y;o*o+s*s>25&&(l=null)}var c=e.getLocalPosition(n.hanger);i.fx=c.x,i.fy=c.y,a.postMessage({alpha:.3,alphaTarget:.3,run:!0,forceNode:{id:i.id,x:c.x,y:c.y}}),n.changed()}})).on("pointerup",c).on("pointerupoutside",c).eventMode="static",this.onPointerOver=function(e,t){if("touch"!==t.pointerType){n.highlightNode=e,n.changed();var i=t.nativeEvent;i.instanceOf(MouseEvent)&&(n.mouseX=i.offsetX,n.mouseY=i.offsetY),n.onNodeHover&&n.onNodeHover(i,e.id,e.type)}},this.onPointerOut=function(){n.highlightNode=null,n.changed(),n.onNodeUnhover&&n.onNodeUnhover()};var u=this.hanger=new PIXI.Container;u.eventMode="static";var h=this.powerTag=new VG(this);this.onResize(),this.resetPan();var d=new PIXI.Graphics;d.eventMode="static",d.beginFill(0),d.drawRect(0,0,1e4,1e4),d.endFill(),d.alpha=0;var p=null,f=null,m=performance.now(),v=0,g=null,y=null,b=0,w=0,k=function(e){for(var t=performance.now(),i=t-m,r=Array.prototype.slice.call(e.touches),o=null,a=null,s=0,c=r;s<c.length;s++){var u=c[s];g&&u.identifier===g.identifier&&(o=u),y&&u.identifier===y.identifier&&(a=u)}if(a&&!o&&(g=y,o=a,y=null,a=null),o?r.remove(o):r.length>0&&(o=r.first(),r.splice(0,1)),a?r.remove(a):r.length>0&&(a=r.first(),r.splice(0,1)),!l&&!n.dragNode&&g&&o&&g.identifier===o.identifier){var h=window.devicePixelRatio;if(y&&a&&y.identifier===a.identifier){var d=n.interactiveEl.getBoundingClientRect(),p=((g.clientX+y.clientX)/2-d.x)*h,f=((g.clientY+y.clientY)/2-d.y)*h,k=((o.clientX+a.clientX)/2-d.x)*h,C=((o.clientY+a.clientY)/2-d.y)*h,M=g.clientX-y.clientX,E=g.clientY-y.clientY,S=o.clientX-a.clientX,x=o.clientY-a.clientY,T=M*M+E*E,D=S*S+x*x;if(0!==T&&0!==D){var A=Math.sqrt(D/T),L=n.targetScale*A,P=n.panX+(k-p),I=n.panY+(C-f);n.zoomCenterX=k,n.zoomCenterY=C,n.setPan(P,I),n.targetScale=L,n.changed()}b=0,w=0}else{var F=(o.clientX-g.clientX)*h,O=(o.clientY-g.clientY)*h;v=xG(v,i,.8),m=t,b=xG(b,F,.8),w=xG(w,O,.8),n.setPan(n.panX+F,n.panY+O),n.changed()}}else v=xG(v,i,.8),i<100&&(n.panvX=b/v,n.panvY=w/v),b=b=0;g=o,y=a},C=function(e){if(e.nativeEvent.instanceOf(TouchEvent))k(e.nativeEvent);else{p=null,document.body.removeClass("is-grabbing"),n.panning=!1;var t=performance.now()-m;v=xG(v,t,.8),t>100?n.panvX=n.panvY=0:(n.panvX/=v,n.panvY/=v)}};d.on("pointerdown",(function(e){e.nativeEvent.instanceOf(TouchEvent)?k(e.nativeEvent):(p=e.getLocalPosition(t.stage),f={x:u.x,y:u.y},document.body.addClass("is-grabbing"),n.panning=!0)})),t.stage.on("pointermove",(function(e){if(e.nativeEvent.instanceOf(TouchEvent))k(e.nativeEvent);else if(p){var i=e.getLocalPosition(t.stage),r=f.x+i.x-p.x,o=f.y+i.y-p.y,a=performance.now();v=xG(v,a-m,.8),m=a,n.panvX=xG(n.panvX,r-n.panX,.8),n.panvY=xG(n.panvY,o-n.panY,.8),n.setPan(r,o),n.changed()}})).on("pointerup",C).on("pointerupoutside",C).eventMode="static",t.stage.addChild(d),t.stage.addChild(u),h.initGraphics(),this.updateZoom(),this.renderCallback=function(){if(n.renderTimer=null,n.px&&!(n.idleFrames>60)){var e=n,i=e.nodes,r=e.links,o=n.workerResults;if(o){var a=o.id,s=o.buffer,l=!0;if(s instanceof ArrayBuffer)n.workerResults=null;else{var c=new Uint32Array(s,s.byteLength-4,1);c[0]===o.v?l=!1:o.v=c[0]}if(l)for(var d=new Float32Array(s),p=0;p<a.length;p++){(W=n.nodeLookup[a[p]])&&(W.x=d[2*p],W.y=d[2*p+1],W.fx&&(W.x=W.fx),W.fy&&(W.y=W.fy))}}var f=n,m=f.panning,v=f.panvX,g=f.panvY,y=f.keyboardActions,b=y.shift;if(!m){n.panX+=1e3*v/60,n.panY+=1e3*g/60;var w=0,k=0;y.up&&(k+=1),y.down&&(k-=1),y.left&&(w+=1),y.right&&(w-=1),0===w&&0===k||(n.idleFrames=0);var C=b?3:1;n.panvX=xG(v,w*C,.9),n.panvY=xG(g,k*C,.9)}var M=1+(b?.1:.03),E=!1;if(y.zoomin&&(n.targetScale*=M,E=!0),y.zoomout&&(n.targetScale/=M,E=!0),E){n.idleFrames=0;var S=window.devicePixelRatio;n.zoomCenterX=n.width/2*S,n.zoomCenterY=n.height/2*S}n.updateZoom();var x=n.scale,T=-n.panX/x,D=-n.panY/x,A=T+n.width/x*window.devicePixelRatio,L=D+n.height/x*window.devicePixelRatio;n.viewport={left:T,right:A,top:D,bottom:L};for(var P=(T+A)/2,I=(D+L)/2,F=[],O=function(e,t){return e.dist-t.dist},B=0,N=i;B<N.length;B++){if(!(W=N[B]).rendered){var R=(J=W.x-P)*J+(ee=W.y-I)*ee;(F.length<50||R<F.last().dist)&&(F.push({node:W,dist:J*J+ee*ee}),F.sort(O),F.length>50&&F.pop())}}if(F.length>0){for(var H=0,V=F;H<V.length;H++){V[H].node.initGraphics()}n.idleFrames=0}for(var z=0,q=r;z<q.length;z++){q[z].initGraphics()}for(var U=0,_=i;U<_.length;U++){var W;(W=_[U]).render()}for(var j=0,G=r;j<G.length;j++){G[j].render()}h.render(),u.sortChildren(),t.render(),n.idleFrames++,n.queueRender();var K=n,Y=K.mouseX,Z=K.mouseY,X=K.highlightNode;if(null!==Y&&null!==Z&&X){var $=(Y*window.devicePixelRatio-n.panX)/x,Q=(Z*window.devicePixelRatio-n.panY)/x,J=X.x-$,ee=X.y-Q,te=X.getSize()*n.nodeScale+2;J*J+ee*ee>te*te&&(n.highlightNode=null,n.idleFrames=0,n.onNodeUnhover&&n.onNodeUnhover())}}},this.queueRender()},e.prototype.destroyGraphics=function(){var e=this,t=e.iframeEl,n=e.px,i=e.links,r=e.nodes,o=e.powerTag;this.hanger=null;for(var a=0,s=i;a<s.length;a++){s[a].clearGraphics()}for(var l=0,c=r;l<c.length;l++){c[l].clearGraphics()}o&&(this.powerTag=null,o.clearGraphics()),n&&(n.renderer.events.setTargetElement(null),t&&document.body.contains(t)&&t.contentDocument&&n.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),this.px=null),this.containerEl.win.cancelAnimationFrame(this.renderTimer),this.renderTimer=null,this.renderCallback=null,document.body.removeClass("is-grabbing")},e.prototype.zoomTo=function(e,t){this.targetScale=e,t?(this.zoomCenterX=t.x,this.zoomCenterY=t.y):this.zoomCenterX=this.zoomCenterY=0},e.prototype.onResize=function(){var e=this,t=e.px,n=e.hanger,i=e.containerEl,r=e.interactiveEl,o=window.devicePixelRatio,a=i.clientWidth,s=i.clientHeight;if(this.width=a,this.height=s,t){var l=Math.round(a*o),c=Math.round(s*o),u=t.renderer,h=u.width,d=u.height;u.view.style.width=a+"px",u.view.style.height=s+"px",u.resize(l,c),r.width=a,r.height=s,t.renderer.events.resolutionChange(1/o),n&&this.setPan(this.panX+(l-h)/2,this.panY+(c-d)/2)}this.changed()},e.prototype.resetPan=function(){var e=window.devicePixelRatio;this.setPan(this.width/2*e,this.height/2*e)},e.prototype.setData=function(e){for(var t=this,n=t.nodes,i=t.nodeLookup,r=t.links,o=e.nodes,a={},s=[],l=[],c=!1,u=!1,h=0,d=0,p=n;d<p.length;d++){var f=p[d];o.hasOwnProperty(f.id)?(h=Math.max(h,f.x*f.x+f.y*f.y),a[f.id]=!1):(s.push(f),c=!0)}var m=Math.sqrt(h),v=[];for(var g in o)if(o.hasOwnProperty(g)){var y=o[g];if(i.hasOwnProperty(g)){var b=y.color||null;(f=i[g]).color!==b&&(f.color=b,u=!0),f.type!==y.type&&(f.type=y.type,u=!0)}else{(f=new RG(this,g,y.type)).color=y.color||null,n.push(f),i[g]=f,c=!0,v.push(f)}}for(var g in o)if(o.hasOwnProperty(g)&&i.hasOwnProperty(g)){f=i[g];var w=o[g].links;for(var k in f.forward)f.forward.hasOwnProperty(k)&&(w.hasOwnProperty(k)||(l.push(f.forward[k]),c=!0));for(var k in w)if(w.hasOwnProperty(k)&&!f.forward.hasOwnProperty(k)&&i.hasOwnProperty(k)){var C=i[k],M=new HG(this,f,C);r.push(M),f.forward[C.id]=M,C.reverse[f.id]=M,c=!0}}for(var E=function(e){e.clearGraphics(),r.remove(e),delete e.source.forward[e.target.id],delete e.target.reverse[e.source.id]},S=0,x=l;S<x.length;S++){E(M=x[S])}for(var T=0,D=s;T<D.length;T++){(f=D[T]).clearGraphics(),n.remove(f),delete i[f.id];var A=f.forward,L=f.reverse;for(var k in A)A.hasOwnProperty(k)&&E(A[k]);for(var k in L)L.hasOwnProperty(k)&&E(L[k])}var P=v.length;if(P>0)for(var I=60*P*60,F=Math.sqrt(I/Math.PI+m*m)-m,O=Math.sqrt(I),B=0,N=v;B<N.length;B++){for(var R=0,H=0,V=0,z=0,q=(f=N[B]).getRelated();z<q.length;z++){var U=q[z];if(i.hasOwnProperty(U)){var _=i[U];null!==_.x&&null!==_.y&&(R+=_.x,H+=_.y,V++)}}if(V>0)f.x=R/V+(Math.random()-.5)*O,f.y=H/V+(Math.random()-.5)*O;else{var W=2*Math.random()*Math.PI,j=m+Math.sqrt(Math.random())*F;f.x=j*Math.cos(W),f.y=j*Math.sin(W)}a[f.id]=[f.x,f.y]}var G=e.weights;for(var g in i)if(i.hasOwnProperty(g)){var K=(f=i[g]).weight;K=G?G.hasOwnProperty(g)?G[g]:0:f.getRelated().length,f.weight!==K&&(f.weight=K,c=!0)}if(c){for(var Y=[],Z=0,X=r;Z<X.length;Z++){M=X[Z];Y.push([M.source.id,M.target.id])}this.worker.postMessage({nodes:a,links:Y,alpha:.3,run:!0}),this.changed()}else u&&this.changed()},e.prototype.setRenderOptions=function(e){var t=e.nodeSizeMultiplier,n=e.lineSizeMultiplier,i=e.showArrow,r=e.textFadeMultiplier;Number.isNumber(t)&&(this.fNodeSizeMult=t),Number.isNumber(n)&&(this.fLineSizeMult=n),Number.isNumber(r)&&(this.fTextShowMult=r),isBoolean(i)&&(this.fShowArrow=i),this.changed()},e.prototype.setForces=function(e){this.worker.postMessage({forces:e,alpha:.3,run:!0})},e.prototype.getHighlightNode=function(){return this.dragNode||this.highlightNode},e.prototype.updateZoom=function(){var e=this,t=e.scale,n=e.targetScale,i=e.panX,r=e.panY;if((t>(n=this.targetScale=Math.min(8,Math.max(1/128,n)))?t/n:n/t)-1>=.01){var o=this.zoomCenterX,a=this.zoomCenterY;if(0===o&&0===a){var s=window.devicePixelRatio;o=this.width/2*s,a=this.height/2*s}var l={x:(o-i)/t,y:(a-r)/t};t=xG(t,n,.85),i-=l.x*t+i-o,r-=l.y*t+r-a,this.changed()}this.setPan(i,r),this.setScale(t)},e.prototype.setPan=function(e,t){var n=this.hanger;this.panX=e,this.panY=t,n&&(n.x=e,n.y=t)},e.prototype.setScale=function(e){var t=this.hanger;this.scale=e,this.nodeScale=Math.sqrt(1/e);var n=Math.log(e)/Math.log(2);this.textAlpha=Math.clamp(n+1-this.fTextShowMult,0,1),t&&(t.scale.x=t.scale.y=e)},e.prototype.changed=function(){this.idleFrames=0,this.queueRender()},e.prototype.queueRender=function(){!this.renderTimer&&this.renderCallback&&(this.renderTimer=this.containerEl.win.requestAnimationFrame(this.renderCallback))},e.prototype.testCSS=function(){var e=function(e){var t=document.body.createDiv({cls:"graph-view "+e}),n=getComputedStyle(t),i=n.color,r=n.opacity;t.detach();var o=SI(i),a=parseFloat(r);return isNaN(a)&&(a=1),o?{a:a*o.a,rgb:o.r<<16|o.g<<8|o.b}:{a,rgb:8947848}};for(var t in BG)BG.hasOwnProperty(t)&&(this.colors[t]=e(BG[t]));for(var n=0,i=this.nodes;n<i.length;n++){i[n].fontDirty=!0}var r=this.powerTag;r&&(r.rendered=!1),this.changed()},e.prototype.getTransparentScreenshot=function(){var e=this.px;return e.render(),e.view},e.prototype.getBackgroundScreenshot=function(){var e=this.getTransparentScreenshot(),t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.fillStyle="#FFFFFF",n.fillRect(0,0,e.width,e.height),n.drawImage(e,0,0),t},e.copyToClipboard=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,Wc(e,t)];case 1:return[4,bc(n.sent())];case 2:return n.sent(),[2]}}))}))},e}();var qG=Qf.plugins.search,UG=[{type:"operator",name:"path:",token:"path:",infoTextI18n:Qf.plugins.search.labelPathOptionDescription},{type:"operator",name:"file:",token:"file:",infoTextI18n:Qf.plugins.search.labelFileNameOptionDescription},{type:"operator",name:"tag:",token:"tag:",infoTextI18n:Qf.plugins.search.labelTagOptionDescription},{type:"operator",name:"line:",token:"line:()",infoTextI18n:Qf.plugins.search.labelLineOptionDescription},{type:"operator",name:"section:",token:"section:()",infoTextI18n:Qf.plugins.search.labelSectionOptionDescription},{type:"operator",name:"[property]",token:"[]",infoTextI18n:Qf.plugins.search.labelPropertyOptionDescription}],_G=function(e){function t(t,n,i,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.inputEl=null,o.showHistory=!0,o.tokens=[],o.inputEl=n,o.showHistory=i,r||(n.addEventListener("input",o.onInputChange.bind(o)),n.addEventListener("focus",o.onInputChange.bind(o))),n.addEventListener("blur",o.close.bind(o)),o.suggestEl.on("mousedown",".suggestion-item",(function(e){e.preventDefault()})),o.suggestEl.addClass("mod-search-suggestion"),o.scope.register(["Shift"],"Enter",(function(e){return o.suggestions.useSelectedItem(e),!1})),o}return f(t,e),t.prototype.renderSuggestion=function(e,t){var n=this;t.addClass("mod-complex","search-suggest-item");var i=t.createDiv("suggestion-content"),r=t.createDiv("suggestion-aux"),o=i.createDiv("suggestion-title");o.createSpan({text:e.name}),"operator"===e.type?o.createSpan({cls:"search-suggest-info-text",text:e.infoTextI18n()}):"group"===e.type&&(t.addClass("mod-group"),o.addClass("list-item-part","mod-extended"),r.createDiv("list-item-part search-suggest-icon clickable-icon",(function(t){mx(t,e.icon),Rx(t,e.iconTooltip),t.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.callback(),n.onInputChange()}))})))},t.prototype.getSuggestions=function(e){var t=this,n=this.inputEl;if(n.selectionStart!==n.selectionEnd)return[];var i=n.selectionStart;if(n.selectionStart<e.length-1&&" "!==e.charAt(i))return[];var r,o=this.tokens=TP(e.slice(0,i));try{r=kP(o,qP)}catch(e){return[]}var a=null==r?void 0:r.getContext(i),s="";if(a){var l=a.token;["quote","text","regex"].contains(l.type)&&(s=l.content);var c=a.matcherStack[0];if((c instanceof pP||c instanceof fP)&&(a.matcherStack.shift(),c=a.matcherStack[0]),c instanceof dP){if(c.value||"colon"===l.type||"]"===l.content)return[];for(var u=[],h=NL(s),d=0,p=Object.keys(this.app.metadataTypeManager.getAllProperties());d<p.length;d++){var f=p[d];(E=h(f))&&u.push({type:"property-key",name:f,score:E.score})}return u.length>0?(u.sort((function(e,t){return t.score-e.score})),w([{type:"group",name:qG.labelPropertiesGroup(),icon:"lucide-info",iconTooltip:qG.tooltipReadMore(),callback:function(){window.open("https://help.obsidian.md/Plugins/Search","_blank")}}],u,!0)):[]}if(c instanceof zP){h=NL(s);var m=[],v=Object.keys(this.app.metadataCache.getTags());v.sort(xm);for(var g=0,y=v;g<y.length;g++){var b=y[g];(E=h(b.slice(1)))&&m.push({type:"string",name:b,score:E.score})}return m.length>0?(m.sort((function(e,t){return t.score-e.score})),w([{type:"group",name:qG.labelTagsGroup(),icon:"lucide-info",iconTooltip:qG.tooltipReadMore(),callback:function(){window.open("https://help.obsidian.md/Plugins/Search","_blank")}}],m,!0)):[]}if(c instanceof LP){h=NL(s);for(var k=[],C=0,M=this.app.vault.getAllLoadedFiles();C<M.length;C++){var E,S=M[C];if(S instanceof kw)if(!S.isRoot())(E=h(S.path))&&k.push({type:"string",name:S.path,score:E.score})}return k.sort((function(e,t){return t.score-e.score})),k}if("quote"===l.type)return[];if(a.matcherStack.length>0)return[]}var x=[],T=UG.filter((function(e){return e.name.startsWith(s.toLowerCase())}));if(T.length>0&&(x.push({type:"group",name:qG.labelSearchOptions(),icon:"lucide-info",iconTooltip:qG.tooltipReadMore(),callback:function(){window.open("https://help.obsidian.md/Plugins/Search","_blank")}}),x.push.apply(x,T)),this.showHistory&&!e){var D=this.app.loadLocalStorage("recent-searches");if(D&&Array.isArray(D)&&D.length>0){x.push({type:"group",name:qG.labelHistory(),icon:"lucide-x",iconTooltip:qG.tooltipClearHistory(),callback:function(){t.app.saveLocalStorage("recent-searches",null)}});for(var A=0,L=D;A<L.length;A++){var P=L[A];x.push({type:"history",name:P})}}}return x},t.prototype.selectSuggestion=function(e,t){if("group"!==e.type){for(var n=this.inputEl,i=n.selectionStart,r=n.value,o=this.tokens.findLastIndex((function(e){return e.pos<=i})),a=this.tokens[o];a&&!["text","regex","quote"].contains(a.type);)o++,a=this.tokens[o];a&&i>SP(a)&&(a=null);var s=i,l=r.length;a&&(s=a.pos,l=SP(a));var c=e.name;"string"===e.type&&/[\[\]\(\)\s:]/.test(c)&&(c='"'.concat(c,'"')),"property-key"===e.type&&(c=Ak.isModifier(t,"Shift")?'"'.concat(c,'"] '):'"'.concat(c,'":')),"string"===e.type?c+=" ":"operator"===e.type&&(c=e.token);var u=r.slice(0,s)+c+r.slice(l).trimStart();"string"===e.type&&(u+=" "),n.value=u,n.trigger("input");var h=s+c.length;"operator"===e.type&&e.token.match(/[\)\]]$/)&&(h-=1),n.setSelectionRange(h,h),n.trigger("input"),Zl.isMobile&&this.close()}else t.preventDefault()},t.prototype.onInputChange=function(){var e=this.inputEl,t=e.value,n=this.getSuggestions(t);n&&n.length>0?(this.suggestions.setSuggestions(n),"group"===this.suggestions.values[0].type&&this.suggestions.forceSetSelectedItem(1),this.open(),this.suggestEl.style.width=Math.max(this.inputEl.offsetWidth,300)+"px",this.setAutoDestroy(e),this.reposition(Bw(e))):this.close()},t.attach=function(e,n,i){void 0===i&&(i=!0),new t(e,n,i)},t.showOnce=function(e,n,i){void 0===i&&(i=!0),new t(e,n,i,!0).onInputChange(),n.focus()},t}(hF),WG=Qf.plugins.graphView,jG=function(){function e(){this.id="graph",this.name=WG.name(),this.description=WG.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerRibbonItem(WG.actionOpen(),"lucide-git-fork",(function(e){n.openGraphView(Ak.isModEvent(e))})),t.registerGlobalCommand({id:"graph:open",name:WG.actionOpen(),icon:"lucide-git-fork",callback:this.openGraphView.bind(this),hotkeys:[oA(["Mod"],"G")]}),t.registerGlobalCommand({id:"graph:open-local",name:WG.actionOpenLocal(),icon:"lucide-git-fork",checkCallback:this.openLocalGraph.bind(this)}),t.registerGlobalCommand({id:"graph:animate",name:WG.actionTimelapse(),icon:"lucide-wand",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(KG);if(t)return e||t.dataEngine.renderProgression(),!0}}),t.registerViewType(GG,(function(e){return new KG(e)})),t.registerViewType(YG,(function(e){return new ZG(e)}))},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{},e.workspace.registerHoverLinkSource("graph",{display:this.name,defaultMod:!0}),[2]}}))}))},e.prototype.onDisable=function(e){e.workspace.unregisterHoverLinkSource("graph")},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.onFileMenu=function(e,t,n,i){var r=this;t instanceof ww&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(WG.actionOpenLocal()).setIcon("lucide-git-fork").onClick((function(){return g(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"vertical").setViewState({type:YG,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))}))},e.prototype.openGraphView=function(e){this.app.workspace.getLeaf(e).setViewState({type:GG,active:!0,state:{}})},e.prototype.openLocalGraph=function(e){var t=this.app.workspace,n=t.getActiveFile();if(n){if(!e)t.splitActiveLeaf("vertical").setViewState({type:YG,active:!0,group:t.activeLeaf,state:{file:n.path}});return!0}},e.prototype.saveOptions=function(){this.plugin.saveData(this.options)},e}(),GG="graph",KG=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-git-fork",n.navigation=!0;var i=n.renderer=new zG(n.contentEl,!Zl.isIosApp,!0);return n.dataEngine=new QG(t.app,n,i),n}return f(t,e),t.prototype.getDisplayText=function(){return WG.name()},t.prototype.onload=function(){this.registerEvent(this.app.metadataCache.on("resolved",this.update,this)),this.dataEngine.load(),this.update();var e=this.app.internalPlugins.getPluginById("graph").instance;this.dataEngine.setOptions(e.options)},t.prototype.getViewType=function(){return GG},t.prototype.onClose=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return this.renderer.destroy(),[2]}))}))},t.prototype.onResize=function(){this.renderer.onResize()},t.prototype.showSearch=function(){var e=this.dataEngine.filterOptions,t=e.search.inputEl;this.dataEngine.controlsEl.removeClass("is-close"),e.setCollapsed(!1,!0),t.select(),t.focus()},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n),t.addItem((function(e){return e.setSection("action").setTitle(WG.actionCopyScreenshot()).setIcon("lucide-image").onClick((function(){return g(i,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:e=this.renderer.getTransparentScreenshot(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,zG.copyToClipboard(e,"image/png")];case 2:return n.sent(),new JA(WG.msgScreenshotCopied()),[3,4];case 3:return t=n.sent(),new JA(t.toString()),[3,4];case 4:return[2]}}))}))}))}))},t.prototype.update=function(){this.dataEngine.render()},t.prototype.onOptionsChange=function(){if(this._loaded){var e=this.app.internalPlugins.getPluginById("graph").instance;e.options=this.dataEngine.getOptions(),e.saveOptions()}},t}(GP),YG="localgraph",ZG=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-git-fork",n.renderedFile=null;var i=n.renderer=new zG(n.contentEl,!Zl.isIosApp,!0);return n.engine=new QG(t.app,n,i),n}return f(t,e),t.prototype.getDisplayText=function(){return!this.file||Zl.isMobile?WG.name():WG.tabTitle({displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return YG},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.options=this.engine.getOptions(),t},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return t.options&&this.engine.setOptions(t.options),[4,e.prototype.setState.call(this,t,n)];case 1:return i.sent(),[2]}}))}))},t.prototype.load=function(){e.prototype.load.call(this),this.registerEvent(this.app.metadataCache.on("resolved",this.update,this)),this.engine.load()},t.prototype.onClose=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return this.renderer.destroy(),[2]}))}))},t.prototype.onFileChanged=function(e){e===this.file&&this.requestUpdate()},t.prototype.onResize=function(){this.renderer.onResize()},t.prototype.update=function(){var e=this,t=e.file,n=e.renderer,i=e.engine;e.renderedFile!==t&&(n.resetPan(),this.renderedFile=t);var r=i.options;n.highlightNode=null,r.localFile=t?t.path:null,i.render()},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n),t.addItem((function(e){return e.setSection("action").setTitle(WG.actionCopyScreenshot()).setIcon("lucide-image").onClick((function(){return g(i,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:e=this.renderer.getTransparentScreenshot(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,zG.copyToClipboard(e,"image/png")];case 2:return n.sent(),new JA(WG.msgScreenshotCopied()),[3,4];case 3:return t=n.sent(),new JA(t.toString()),[3,4];case 4:return[2]}}))}))}))}))},t.prototype.onOptionsChange=function(){this.app.workspace.requestSaveLayout()},t}(ZP);function XG(e,t){return(Math.pow(t,1-e)-t)/(1-t)}function $G(e,t){return 1-Math.log(e*(1-t)+t)/Math.log(t)}var QG=function(){function e(e,t,n){var i=this;this.options=Object.assign({},PG),this.searchQueries=null,this.fileFilter={},this.hasFilter=!1,this.queue=null,this.onOptionsChange=mc((function(){return i.view.onOptionsChange()}),100,!0),this.lastHoverLink=null,this.hoverPopover=null,this.requestUpdateSearch=mc(this.updateSearch.bind(this),250,!0),this.progression=0,this.progressionSpeed=20,this.currentFocusFile="",this.app=e,this.view=t,this.renderer=n,n.onNodeClick=this.onNodeClick.bind(this),n.onNodeRightClick=this.onNodeRightClick.bind(this),n.onNodeHover=this.onNodeHover.bind(this),n.onNodeUnhover=this.onNodeUnhover.bind(this);var r=this.controlsEl=n.containerEl.createDiv("graph-controls");r.createDiv("clickable-icon graph-controls-button mod-close",(function(e){mx(e,"lucide-x"),Rx(e,Qf.interface.menu.close()),e.addEventListener("click",(function(){r.addClass("is-close"),i.onOptionsChange()}))})),r.createDiv("clickable-icon graph-controls-button mod-open",(function(e){mx(e,"lucide-settings"),Rx(e,WG.tooltipOpenGraphSettings()),e.addEventListener("click",(function(){r.removeClass("is-close"),i.onOptionsChange()}))})),t instanceof ZG||r.createDiv("clickable-icon graph-controls-button mod-animate",(function(e){mx(e,"lucide-wand-2"),Rx(e,WG.tooltipStartTimelapseAnimation()),e.addEventListener("click",(function(){i.renderProgression()}))})),r.createDiv({cls:"clickable-icon graph-controls-button mod-reset"},(function(e){mx(e,"lucide-rotate-ccw"),Rx(e,Qf.interface.tooltipRestoreDefaultSettings()),e.addEventListener("click",(function(){i.filterOptions.setDefaultOptions(),i.colorGroupOptions.setColorQueries([]),i.displayOptions.setDefaultOptions(),i.forceOptions.setDefaultOptions()}))})),this.filterOptions=new eK(this,t instanceof ZG),this.colorGroupOptions=new tK(this),this.displayOptions=new iK(this),this.forceOptions=new oK(this),this.filterOptions.setDefaultOptions(),this.colorGroupOptions.setColorQueries([]),this.displayOptions.setDefaultOptions(),this.forceOptions.setDefaultOptions()}return e.prototype.load=function(){var e=this,t=this.app,n=this.view,i=t.vault,r=t.workspace,o=t.metadataCache;n.registerEvent(i.on("create",this.onFileChanged,this)),n.registerEvent(i.on("modify",this.onFileChanged,this)),n.registerEvent(i.on("rename",this.recomputeFile,this)),n.registerEvent(o.on("resolve",this.recomputeFile,this)),n.registerEvent(r.on("css-change",this.onCssChange,this)),n.registerEvent(r.on("file-open",this.onFileOpen,this));var a=0;n.registerInterval(window.setInterval((function(){e.renderer.targetScale!==a&&(a=e.renderer.targetScale,e.onOptionsChange())}),2e3));var s={38:"up",40:"down",37:"left",39:"right",187:"zoomin",189:"zoomout"},l=function(t){var i=e.renderer;i.keyboardActions.shift=Ak.isModifier(t,"Shift");var o="keydown"===t.type;if(o){var a=e.view.containerEl.doc;if(t.repeat||t.defaultPrevented||r.activeLeaf!==n.leaf||a.activeElement!==a.body)return}if(s.hasOwnProperty(t.which)){var l=s[t.which];i.keyboardActions[l]=o,i.changed()}};n.registerDomEvent(window,"keydown",l),n.registerDomEvent(window,"keyup",l)},e.prototype.onCssChange=function(){this.renderer.testCSS()},e.prototype.updateSearch=function(){var e=[],t=this.filterOptions.search.getValue();t&&e.push({query:t,color:null}),e=e.concat(this.colorGroupOptions.getColoredQueries()),this.setQuery(e),this.onOptionsChange()},e.prototype.setQuery=function(e){var t=this;this.queue&&(this.queue.cancel(),this.queue=null),this.hasFilter=!1;for(var n=[],i={},r=0,o=e;r<o.length;r++){var a=o[r],s=new UP(this.app,a.query,!1);s.matcher||(s=null),s&&(n.push({query:s,color:a.color}),s.requiredInputs&&Object.assign(i,s.requiredInputs),a.color||(this.hasFilter=!0))}if(0===n.length&&(n=null),this.searchQueries=n,!n)return this.fileFilter={},void this.render();var l=this.fileFilter={},c=this.queue=new pL({onStart:function(){t.filterOptions.startSearch()},onStop:function(){t.render(),t.filterOptions.stopSearch()},onCancel:function(){t.queue=null,t.filterOptions.stopSearch()}}),u=this.app;c.addList(u.vault.getFiles());var h=performance.now(),d=!0;_P(u,i,c,(function(e,t){for(var i=!0,r=null,o=0,a=n;o<a.length;o++){var s=a[o],c=s.query.match(e,t);if(!c&&!s.color){i=!1;break}if(c&&s.color){r=s.color;break}}l[e.path]=!!i&&(r||!0),d=d||i}),{beforePause:function(e){e<h+333||(h=e,d&&t.render(),d=!1)}})},e.prototype.render=function(){var e=this,t=this,n=t.app,i=t.view,r=t.renderer,o=t.searchQueries,a=t.fileFilter,s=t.options,l=i instanceof ZG;if(!l||s.localFile){l&&(this.progression=0);var c=function(e,t,n,i){var r=e.resolvedLinks,o=e.unresolvedLinks,a=e.vault,s=t.showAttachments,l=t.hideUnresolved,c=t.showTags,u={};if(t.showTags){var h=e.getTags();for(var d in h)h.hasOwnProperty(d)&&(u[d.toLowerCase()]=d)}var p={},f=0,m=e.getCachedFiles();if(i){for(var v={},g=0,y=m;g<y.length;g++){var b=y[g],w=a.getAbstractFileByPath(b);v[b]=w instanceof ww?Math.min(w.stat.ctime,w.stat.mtime):1/0}m.sort((function(e,t){return v[e]-v[t]}))}for(var k="",C=0,M=m;C<M.length;C++){var E=M[C],S=$T(E);if(s||!S){var x=S?"attachment":"",T=n(E,x);if(T&&!e.isUserIgnored(E)){var D=p[E]=IG(x),A=D.links;if(t.showOrphans&&(f===i&&(k=E),f++),isBoolean(T)||(D.color=T),r.hasOwnProperty(E)){var L=r[E];for(var P in L)if(L.hasOwnProperty(P)){var I=$T(P);if(s||!I)n(P,I?"attachment":"")&&(!i||f<i?A[P]=!0:f===i&&(k=E),f++)}}if(!l&&o.hasOwnProperty(E)){L=o[E];for(var P in L)L.hasOwnProperty(P)&&n(P,"unresolved")&&(!i||f<i?(A[P]=!0,p.hasOwnProperty(P)||(p[P]=IG("unresolved"))):f===i&&(k=E),f++)}if(c)if((h=YS(e.getCache(E)))&&h.length>0)for(var F=0,O=h;F<O.length;F++){if(n(d=O[F],"tag")){var B=u[d.toLowerCase()]||d;!i||f<i?A[B]=!0:f===i&&(k=E),f++,p.hasOwnProperty(B)||(p[B]=IG("tag"))}}}}}if(i&&k){var N=m.indexOf(k);if(-1!==N)for(var R=N+1;R<m.length;R++)delete p[m[R]]}return{nodes:p,numLinks:f}}(n.metadataCache,s,(function(t,n){return!o||(""===n?t===s.localFile||(a.hasOwnProperty(t)?a[t]:!e.hasFilter):"tag"===n?o.every((function(e){return!!e.color||!!e.query.matchTag(t)})):"attachment"!==n||o.every((function(e){return!!e.color||!!e.query.matchFilepath(t)})))}),this.progression),u=c.numLinks;if(s.localFile&&(c=function(e,t){var n=e.nodes,i={},r={},o=t.localFile,a=t.localJumps,s=t.localInterlinks,l=t.localForelinks,c=t.localBacklinks;if(r[o]=30,!n.hasOwnProperty(o))return i[o]=IG(),{nodes:i,weights:r};i[o]=IG(n[o].type);for(var u=function(e){var t={};for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];if("tag"!==a.type){var s=a.links;for(var u in s)if(s.hasOwnProperty(u)){var h=i[o];l&&i.hasOwnProperty(o)&&!i.hasOwnProperty(u)&&!OG.hasOwnProperty(h.type)?(t[u]=t[u]||FG(n[u]),h.links[u]=!0):c&&i.hasOwnProperty(u)&&!i.hasOwnProperty(o)&&!OG.hasOwnProperty(i[u].type)&&(t[o]=t[o]||FG(n[o]),t[o].links[u]=!0)}}}for(var d in t)t.hasOwnProperty(d)&&(i[d]=t[d],r[d]=e)},h=30/a,d=0;d<a;d++)u(30-h*(d+1));if(s)for(var p in i)i.hasOwnProperty(p)&&n.hasOwnProperty(p)&&(i[p]=n[p]);return{nodes:i,weights:r}}(c,s)),s.showOrphans||function(e){var t=e.nodes,n={};for(var i in t)if(t.hasOwnProperty(i)){var r=t[i].links;for(var o in r)r.hasOwnProperty(o)&&i!==o&&(n[o]=!0)}for(var i in t)if(t.hasOwnProperty(i)){r=t[i].links;var a=!1;for(var o in r)if(r.hasOwnProperty(o)&&t.hasOwnProperty(o)&&i!==o){a=!0;break}a||n[i]||delete t[i]}}(c),this.currentFocusFile){var h=c.nodes[this.currentFocusFile];h&&(h.type="focused")}return r.setData(c),u}r.setData({nodes:{}})},e.prototype.renderProgression=function(){return g(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:this.progression=1,e=this.render(),this.progressionSpeed=Math.clamp(.5*Math.sqrt(e),5,100),t=Date.now(),i.label=1;case 1:return this.progression>0?(n=this.progression,[4,new Promise((function(e){return Sc(e,0)}))]):[3,3];case 2:return i.sent(),n!==this.progression?[3,3]:(n=1+Math.floor(this.progressionSpeed*(Date.now()-t)/1e3))===this.progression||(this.progression=n,this.render())?[3,1]:[3,3];case 3:return[2]}}))}))},e.prototype.onFileChanged=function(e){"md"!==e.extension&&this.recomputeFile(e)},e.prototype.recomputeFile=function(e){var t=this.queue;t&&t.add(e)},e.prototype.onFileOpen=function(e){var t=e?e.path:"";t!==this.currentFocusFile&&(this.currentFocusFile=t,this.render())},e.prototype.onNodeClick=function(e,t,n){var i=this.app;if("tag"!==n)i.workspace.openLinkText(t,"",Ak.isModEvent(e));else{var r=i.internalPlugins.getEnabledPluginById("global-search");r&&r.openGlobalSearch("tag:"+t)}},e.prototype.onNodeRightClick=function(e,t,n){var i=this,r=this.app;if("tag"!==n){var o=r.metadataCache.getFirstLinkpathDest(t,"");if(o&&e.instanceOf(MouseEvent)){var a=(new PA).addSections(["title","open","action","view","info","","danger"]);a.addItem((function(e){return e.setSection("title").setTitle(o.getShortName()).setIsLabel(!0)})),a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(e){return g(i,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,this.app.workspace.getLeaf(Ak.isModEvent(e)||!0).openLinkText(t,"")];case 1:return n.sent(),[2]}}))}))}))})),this.app.workspace.trigger("file-menu",a,o,"graph-context-menu",this.view.leaf),a.showAtMouseEvent(e)}}else{var s=r.internalPlugins.getEnabledPluginById("global-search");s&&s.openGlobalSearch("tag:"+t)}},e.prototype.onNodeHover=function(e,t,n){if(this.onNodeUnhover(),e.instanceOf(MouseEvent)){var i=this,r=i.app,o=i.hoverPopover,a=i.lastHoverLink;if(""===n||"focused"===n||"attachment"===n){if(o&&o.state!==_N.Hidden&&a===t)return o.onTarget=!0,void o.transition();this.lastHoverLink=t,r.workspace.trigger("hover-link",{event:e,source:"graph",hoverParent:this,targetEl:null,linktext:t})}}},e.prototype.onNodeUnhover=function(){var e=this.hoverPopover;e&&(e.onTarget=!1,e.transition())},e.prototype.getOptions=function(){var e={};return this.filterOptions.getOptions(e),this.colorGroupOptions.getOptions(e),this.displayOptions.getOptions(e),this.forceOptions.getOptions(e),e.scale=this.renderer.targetScale,e.close=this.controlsEl.hasClass("is-close"),e},e.prototype.setOptions=function(e){e&&(this.filterOptions.setOptions(e),this.colorGroupOptions.setOptions(e),this.displayOptions.setOptions(e),this.forceOptions.setOptions(e),e.scale&&this.renderer.zoomTo(e.scale),e.close&&this.controlsEl.toggleClass("is-close",e.close),this.render())},e}(),JG=function(e){function t(t,n,i){var r=e.call(this)||this;return r.engine=null,r.optionListeners={},r.engine=t,r.el.addClass("graph-control-section","mod-".concat(n)),r.setCollapsible(!0),r.setCollapsed(!0,!1),r.innerEl.createEl("header",{cls:"graph-control-section-header",text:i}),r.optionListeners["collapse-"+n]=function(e){return void 0!==e&&isBoolean(e)&&r.setCollapsed(e,!1),r.collapsed},r}return f(t,e),t.prototype.onSelfClick=function(e){return this.toggleCollapsed(!0)},t.prototype.updateCollapsed=function(t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,e.prototype.updateCollapsed.call(this,t)];case 1:return n.sent(),this.engine.onOptionsChange(),[2]}}))}))},t.prototype.setOptions=function(e){var t=this.optionListeners;for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&t[n](e[n])},t.prototype.getOptions=function(e){var t=this.optionListeners;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n]();void 0!==i&&(e[n]=i)}},t}(JP),eK=function(e){function t(t,n){var i=e.call(this,t,"filter",WG.labelFilters())||this;i.searchSetting=null,t.controlsEl.appendChild(i.el);var r=i.childrenEl,o=i.searchSetting=new NI(r).addSearch((function(e){return e.setPlaceholder(WG.promptFilterNodes()).setValue("").onChange((function(){i.engine.requestUpdateSearch()})).then((function(e){i.search=e,Rx(e.clearButtonEl,Qf.plugins.search.tooltipClearSearch()),i.optionListeners.search=function(t){return void 0!==t&&(e.setValue(t),i.engine.requestUpdateSearch()),e.getValue()},e.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||i.engine.updateSearch()})),_G.attach(t.app,e.inputEl,!1)}))}));return o.settingEl.addClass("mod-search-setting"),n&&(new NI(r).setName(WG.optionDepth()).setTooltip(WG.optionDepthDescription()).setClass("mod-local-jumps").setClass("mod-slider").addSlider((function(e){return e.setLimits(1,5,1).setValue(t.options.localJumps).setDynamicTooltip().setInstant(!0).registerOptionListener(i.optionListeners,"localJumps").onChange((function(e){t.options.localJumps=e,t.render(),t.onOptionsChange()}))})),new NI(r).setName(WG.optionBacklinks()).setTooltip(WG.optionBacklinksDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.localBacklinks).registerOptionListener(i.optionListeners,"localBacklinks").onChange((function(e){t.options.localBacklinks=e,t.render(),t.onOptionsChange()}))})),new NI(r).setName(WG.optionForelinks()).setTooltip(WG.optionForelinksDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.localForelinks).registerOptionListener(i.optionListeners,"localForelinks").onChange((function(e){t.options.localForelinks=e,t.render(),t.onOptionsChange()}))})),new NI(r).setName(WG.optionNeighborLinks()).setTooltip(WG.optionNeighborLinksDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.localInterlinks).registerOptionListener(i.optionListeners,"localInterlinks").onChange((function(e){t.options.localInterlinks=e,t.render(),t.onOptionsChange()}))}))),new NI(r).setName(WG.optionShowTags()).setTooltip(WG.optionShowTagsDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.showTags).registerOptionListener(i.optionListeners,"showTags").onChange((function(e){t.options.showTags=e,t.render(),t.onOptionsChange()}))})),new NI(r).setName(WG.optionShowAttachments()).setTooltip(WG.optionShowAttachmentsDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.showAttachments).registerOptionListener(i.optionListeners,"showAttachments").onChange((function(e){t.options.showAttachments=e,t.render(),t.onOptionsChange()}))})),new NI(r).setName(WG.optionShowExistingFilesOnly()).setTooltip(WG.optionShowExistingFilesOnlyDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.hideUnresolved).registerOptionListener(i.optionListeners,"hideUnresolved").onChange((function(e){t.options.hideUnresolved=e,t.render(),t.onOptionsChange()}))})),n||new NI(r).setName(WG.optionShowOrphans()).setTooltip(WG.optionShowOrphansDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.showOrphans).registerOptionListener(i.optionListeners,"showOrphans").onChange((function(e){t.options.showOrphans=e,t.render(),t.onOptionsChange()}))})),i}return f(t,e),t.prototype.startSearch=function(){this.searchSetting.settingEl.addClass("is-loading")},t.prototype.stopSearch=function(){this.searchSetting.settingEl.removeClass("is-loading")},t.prototype.setDefaultOptions=function(){this.setOptions(PG)},t}(JG),tK=function(e){function t(t){var n=e.call(this,t,"color-groups",WG.labelGroups())||this;return t.controlsEl.appendChild(n.el),n.optionListeners.colorGroups=function(e){return Array.isArray(e)&&(n.setColorQueries(e),n.engine.requestUpdateSearch()),n.getColoredQueries()},n.setColorQueries([]),n}return f(t,e),t.prototype.getColoredQueries=function(){for(var e=[],t=0,n=this.groups;t<n.length;t++){var i=n[t];e.push({query:i.query.getValue(),color:{a:1,rgb:i.color.getValueInt()}})}return e},t.prototype.setColorQueries=function(e){var t=this,n=this.childrenEl;n.empty();for(var i=[],r=n.createDiv({cls:"graph-color-groups-container"}),o=function(e){var n=r.createDiv("graph-color-group"),o=new _I(n).setPlaceholder(WG.placeholderEnterQuery()).setValue(e.query).onChange((function(){return t.engine.requestUpdateSearch()})).then((function(e){return _G.attach(t.engine.app,e.inputEl,!1)})),a=new XI(n).setValueInt(e.color?e.color.rgb:0).onChange((function(){return t.engine.updateSearch()})),s=a.colorPickerEl;Rx(s,WG.tooltipClickToChangeDragToReorder());var l={el:n,query:o,color:a};s.addEventListener("mousedown",(function(e){t.onDragOption(e,l)})),n.createDiv("clickable-icon",(function(e){mx(e,"lucide-x"),Rx(e,WG.tooltipDeleteGraph()),e.addEventListener("click",(function(){i.remove(l),n.detach(),t.engine.updateSearch()}))})),i.push(l)},a=0,s=e;a<s.length;a++){var l=s[a];o(l)}this.groups=i,n.createDiv("graph-color-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:WG.buttonNewGroup()},(function(e){e.addEventListener("click",(function(){var e=TI({h:40*t.groups.length,s:t.engine.app.customCss.isDarkMode()?70:60,l:60});o({query:"",color:{a:1,rgb:II(e)}}),t.engine.updateSearch()}))}))}))},t.prototype.onDragOption=function(e,t){var n=this;if(0===e.button){var i=e.clientX,r=e.clientY,o=t.el,a=o.getBoundingClientRect(),s=e.clientX-a.x,l=e.clientY-a.y,c=null,u=function(e){e.preventDefault();var a=e.clientX,u=e.clientY,h=n.el.doc;if(null===c){var d=a-i,p=u-r;if(d*d+p*p<25)return;var f=o.offsetWidth;n.groups.remove(t),(c=o.cloneNode(!0)).addClass("drag-ghost"),c.style.width=f+"px",h.body.appendChild(c),document.body.addClass("is-grabbing"),n.childrenEl.addClass("is-grabbing")}var m=n.getDropIndex(e);o.detach(),Bx(),c&&(c.style.left=a-s+"px",c.style.top=u-l+"px");for(var v=0;v<n.groups.length;v++){var g=n.groups[v];g.el.style.top=v<m?"0":"".concat(g.el.offsetHeight,"px")}},h=function(e){if(window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",h),c){c.detach(),document.body.removeClass("is-grabbing"),n.childrenEl.removeClass("is-grabbing");var i=n.getDropIndex(e);n.groups.splice(i,0,t),n.setColorQueries(n.getColoredQueries()),n.engine.updateSearch()}};window.addEventListener("mousemove",u),window.addEventListener("mouseup",h)}},t.prototype.getDropIndex=function(e){var t,n=e.clientY;for(t=0;t<this.groups.length;t++){var i=this.groups[t].el.getBoundingClientRect();if(n<i.top+i.height/2)return t}return t},t}(JG),nK={showArrow:!1,textFadeMultiplier:0,nodeSizeMultiplier:1,lineSizeMultiplier:1},iK=function(e){function t(t){var n=e.call(this,t,"display",WG.labelDisplay())||this;t.controlsEl.appendChild(n.el);var i=n.childrenEl;return new NI(i).setName(WG.optionShowArrows()).setTooltip(WG.optionShowArrowsDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().registerOptionListener(n.optionListeners,"showArrow").onChange((function(e){t.renderer.setRenderOptions({showArrow:e}),t.onOptionsChange()}))})),new NI(i).setName(WG.optionTextFade()).setClass("mod-slider").addSlider((function(e){return e.setLimits(-3,3,.1).setDynamicTooltip().setInstant(!0).registerOptionListener(n.optionListeners,"textFadeMultiplier").onChange((function(e){t.renderer.setRenderOptions({textFadeMultiplier:e}),t.onOptionsChange()}))})),new NI(i).setName(WG.optionNodeSize()).setClass("mod-slider").addSlider((function(e){return e.setLimits(.1,5,"any").setDynamicTooltip().setInstant(!0).registerOptionListener(n.optionListeners,"nodeSizeMultiplier").onChange((function(e){t.renderer.setRenderOptions({nodeSizeMultiplier:e}),t.onOptionsChange()}))})),new NI(i).setName(WG.optionLinkThickness()).setClass("mod-slider").addSlider((function(e){return e.setLimits(.1,5,"any").setDynamicTooltip().setInstant(!0).registerOptionListener(n.optionListeners,"lineSizeMultiplier").onChange((function(e){t.renderer.setRenderOptions({lineSizeMultiplier:e}),t.onOptionsChange()}))})),t.view instanceof ZG||new NI(i).addButton((function(e){return e.setButtonText(WG.buttonAnimateTimelapse()).setCta().onClick((function(){t.renderProgression()}))})),n}return f(t,e),t.prototype.setDefaultOptions=function(){this.setOptions(nK)},t}(JG),rK={centerStrength:$G(.1,.01),repelStrength:10,linkStrength:$G(1,.01),linkDistance:250},oK=function(e){function t(t){var n=e.call(this,t,"forces",WG.labelForces())||this;t.controlsEl.appendChild(n.el);var i=n.childrenEl;return new NI(i).setName(WG.optionCenterForce()).setClass("mod-slider").addSlider((function(e){return e.setLimits(0,1,"any").setDynamicTooltip().setInstant(!0).registerOptionListener(n.optionListeners,"centerStrength").onChange((function(e){t.renderer.setForces({centerStrength:XG(e,.01)}),t.onOptionsChange()}))})),new NI(i).setName(WG.optionRepelForce()).setClass("mod-slider").addSlider((function(e){return e.setLimits(0,20,"any").setDynamicTooltip().setInstant(!0).registerOptionListener(n.optionListeners,"repelStrength").onChange((function(e){t.renderer.setForces({repelStrength:e*e*e}),t.onOptionsChange()}))})),new NI(i).setName(WG.optionLinkForce()).setClass("mod-slider").addSlider((function(e){return e.setLimits(0,1,"any").setDynamicTooltip().setInstant(!0).registerOptionListener(n.optionListeners,"linkStrength").onChange((function(e){t.renderer.setForces({linkStrength:XG(e,.01)}),t.onOptionsChange()}))})),new NI(i).setName(WG.optionLinkDistance()).setClass("mod-slider").addSlider((function(e){return e.setLimits(30,500,1).setDynamicTooltip().setInstant(!0).registerOptionListener(n.optionListeners,"linkDistance").onChange((function(e){t.renderer.setForces({linkDistance:e}),t.onOptionsChange()}))})),n}return f(t,e),t.prototype.setDefaultOptions=function(){this.setOptions(rK)},t}(JG);var aK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.onTrigger=function(e,t){var n=e.line,i=t.getLine(n),r=i.slice(0,e.ch),o=i.slice(e.ch),a=r.match(/(?:^|[^\[])(\[\^)([^\]]*)$/);if(a){var s=r.length,l=a[2],c={line:n,ch:s-(a[1].length+l.length)},u={line:n,ch:e.ch},h=o.match(/[\]\s]/);return h&&"]"===h[0]&&(u.ch=s+h.index+1,":"===i[u.ch])?null:{start:c,end:u,query:l}}return null},t.prototype.renderSuggestion=function(e,t){WL(t,e.footnote,e)},t.prototype.selectSuggestion=function(e){var t=this.context;if(this.close(),t){var n=t.editor,i=t.start,r=t.end;if("create"===e.type)return n.replaceRange("",i,r),void n.insertFootnote();var o="[^"+e.id+"]";n.transaction({changes:[{from:i,to:r,text:o}],selection:{from:{line:i.line,ch:i.ch+o.length}}}),activeWindow.setTimeout((function(){return n.focus()}))}},t.prototype.getSuggestions=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v;return y(this,(function(g){switch(g.label){case 0:return(t=this.runnable)&&t.cancel(),n=this.app,i=n.vault,r=n.metadataCache,(o=this.context.file)?(t=this.runnable=new dL,[4,i.cachedRead(o)]):[2,null];case 1:if(a=g.sent(),t.isCancelled())return[2,null];if(s=e.query,l=BL(s),c=[],u=r.getFileCache(o),a&&u.footnotes)for(h=0,d=u.footnotes;h<d.length;h++)(p=d[h]).id.startsWith(rS)||(f=a.slice(p.position.start.offset,p.position.end.offset),(m=VL(l,f))&&c.push({id:p.id,footnote:f,score:m.score,matches:m.matches,type:"match"}));return s||(v=nx(u),c.push({id:String(v),footnote:"[^".concat(v,"]: ").concat(Qf.editor.linkSuggestion.labelNewFootnote()),score:1,matches:[],type:"create"})),c.sort((function(e,t){return t.score-e.score})),[2,c]}}))}))},t}(pF),sK=function(){function e(e){this.suggests=[],this.currentSuggest=null,this.addSuggest(new MF(e)),this.addSuggest(new xF(e)),this.addSuggest(new aK(e))}return e.prototype.addSuggest=function(e){this.suggests.push(e)},e.prototype.removeSuggest=function(e){this.currentSuggest===e&&this.close(),this.suggests.remove(e)},e.prototype.trigger=function(e,t,n){if(e.cm.hasFocus){for(var i=0,r=this.suggests;i<r.length;i++){var o=r[i];if(o.trigger(e,t,n))return void(n&&this.setCurrentSuggest(o))}this.close()}},e.prototype.setCurrentSuggest=function(e){var t=this.currentSuggest;t!==e&&(t&&t.close(),this.currentSuggest=e)},e.prototype.isShowingSuggestion=function(){var e=this.currentSuggest;return e&&e.isOpen},e.prototype.reposition=function(){var e=this.currentSuggest;e&&e.isOpen&&e.updatePosition()},e.prototype.close=function(){this.setCurrentSuggest(null)},e}(),lK=function(e){function t(t){var n=e.call(this,t)||this;n.modalEl.addClass("mod-lg"),n.titleEl.setText(Qf.interface.labelDebugInfo());var i=n.contentEl,r=n.infoTextEl=i.createEl("textarea",{cls:"debug-textarea"});return r.spellcheck=!1,r.value="Loading...",n.setInfoText.bind(n)(),n.addButton("mod-secondary",Qf.interface.labelCopy(),(function(){yc(r.value),new JA(Qf.interface.copied({item:Qf.interface.labelDebugInfo()}))})),Zl.isDesktop&&Zl.isDesktopApp&&n.addButton("",Qf.interface.helpScreen.labelSandboxVault(),(function(){Ef((function(e){e.ipcRenderer.sendSync("sandbox")}))})),n.addButton("mod-cancel",Qf.dialogue.buttonDone(),(function(){})),n}return f(t,e),t.prototype.setInfoText=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g;return y(this,(function(y){switch(y.label){case 0:return t=(e=this).app,n=e.infoTextEl,[4,Zj()];case 1:if(i=y.sent(),r=t.vault.getConfig("livePreview"),i+="\tLive preview: ".concat(r?"on":"off","\n"),document.body.hasClass("emulate-mobile")&&(i+="\tEmulate mobile: on\n"),o=t.vault.getConfig("theme"),i+="\tBase theme: ".concat("system"===o?"adapt to system":"obsidian"===o?"dark":"light","\n"),a=t.customCss.theme||"none",i+="\tCommunity theme: ".concat(a),(s=null===(g=t.customCss.themes[a])||void 0===g?void 0:g.version)&&(i+=" v"+s),i+="\n",l=t.customCss.snippets.filter((function(e){return t.customCss.enabledSnippets.has(e)})).length,i+="\tSnippets enabled: ".concat(l,"\n"),c=t.plugins.isEnabled()?"off":"on",i+="\tRestricted mode: ".concat(c,"\n"),u=0,t.plugins.isEnabled())for(m in h=t.plugins.manifests,d=Object.keys(h),p=t.plugins.plugins,i+="\tPlugins installed: ".concat(d.length,"\n"),u=Object.keys(p).length,i+="\tPlugins enabled: ".concat(u,"\n"),f=1,p)p.hasOwnProperty(m)&&(i+="\t\t".concat(f,": ").concat(p[m].manifest.name," v").concat(p[m].manifest.version,"\n"),f++);return i+="\nRECOMMENDATIONS:\n",v="",Zl.isDesktopApp&&sL(Pf,u2)&&(v+="\tUpdate installer: installer version too low, please download from ".concat(jA()," and reinstall.\n")),("none"!==a||l>0)&&(v+="\tCustom theme and snippets: for cosmetic issues, please first try updating your theme and disabling your snippets. If still not fixed, please try to make the issue happen in the Sandbox Vault or disable community theme and snippets.\n"),"off"===c&&u>0&&(v+="\tCommunity plugins: for bugs, please first try updating all your plugins to latest. If still not fixed, please try to make the issue happen in the Sandbox Vault or disable community plugins.\n"),""===v&&(v="\tnone\n"),i+=v,n.value=i,[2]}}))}))},t}(XA);function cK(e,t,n){return g(this,void 0,void 0,(function(){var i=this;return y(this,(function(r){switch(r.label){case 0:return[4,e.fileManager.runAsyncLinkUpdate((function(){return g(i,void 0,void 0,(function(){var i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:i=e.vault,r=0,o=t,u.label=1;case 1:return r<o.length?(a=o[r]).parent===n?[3,3]:(s=a.name,"/"!==n.path&&(s=n.path+"/"+s),a instanceof ww?(l=$c(s),c=Qc(Kc(s)),s=i.getAvailablePath(l,c)):a instanceof kw&&(s=i.getAvailablePath(s)),[4,i.rename(a,s)]):[3,4];case 2:u.sent(),u.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))}))];case 1:return r.sent(),[2]}}))}))}function uK(e,t){return e!==t&&(!(e instanceof kw&&e.isRoot())&&!(e instanceof kw&&t.path.startsWith(e.path+"/")))}function hK(e){for(var t=[],n=0,i=e;n<i.length;n++){for(var r=i[n],o=!0,a=0,s=e;a<s.length;a++){var l=s[a];if(l!==r&&l instanceof kw&&r.path.startsWith(l.path)){o=!1;break}}o&&t.push(r)}return t}function dK(e,t){for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i];uK(o,t)&&n.push(o)}return hK(n)}var pK=Qf.plugins.fileExplorer,fK=function(e){function t(t,n){var i=e.call(this,t)||this;return i.limit=20,i.emptyStateText=pK.labelNoFolders(),i.emptyMatch=Object.freeze({match:{score:0,matches:[]},item:null}),i.files=n,i.setInstructions([{command:"â†‘â†“",purpose:pK.instructionNavigate()},{command:"â†µ",purpose:pK.instructionMove()},{command:"shift â†µ",purpose:pK.instructionCreate()},{command:"esc",purpose:pK.instructionDismiss()}]),i.inputEl.setAttribute("placeholder",pK.promptTypeFolder()),i.scope.register(["Shift"],"Enter",(function(e){return i.selectSuggestion(i.emptyMatch,e),!1})),i.scope.register([],"Tab",(function(e){var t;if(!e.isComposing){var n=i.chooser,r=n.values,o=n.selectedItem,a=i.inputEl.value,s=r[o];if(s){var l=KL(s.item.path,null===(t=s.match)||void 0===t?void 0:t.matches);if("/"===l)return;l===a&&(l+="/"),i.inputEl.value=l,i.inputEl.trigger("input")}return!1}})),i}return f(t,e),t.prototype.onNoSuggestion=function(){this.chooser.setSuggestions([this.emptyMatch]),this.chooser.addMessage(this.emptyStateText)},t.prototype.renderSuggestion=function(t,n){if(!t.item){n.addClass("mod-complex");var i=n.createDiv("suggestion-content"),r=n.createDiv("suggestion-aux");return i.createDiv({cls:"suggestion-title",text:this.inputEl.value}),void r.createSpan({cls:"suggestion-hotkey",text:Qf.interface.labelEnterToCreate()})}return e.prototype.renderSuggestion.call(this,t,n)},t.prototype.getItems=function(){for(var e=[],t=0,n=this.app.vault.getAllLoadedFiles();t<n.length;t++){var i=n[t];i instanceof kw&&e.push(i)}return e},t.prototype.getItemText=function(e){return e.isRoot()?"/":e.path},t.prototype.onChooseItem=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return n=(t=this).app,(i=t.files)&&0!==i.length?e?[3,2]:(r=this.inputEl.value,[4,n.vault.createFolder(r)]):[2];case 1:s.sent(),(o=n.vault.getAbstractFileByPathInsensitive(r))instanceof kw&&(e=o),s.label=2;case 2:return(a=dK(i,e)).length>0?[4,cK(n,a,e)]:[3,4];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))},t}(dV),mK=function(e){function t(t,n){var i=e.call(this,t)||this;i.sortOrder="download",i.items={},i.itemsVisible=[],i.selectedItemId=null,i.selectedItemCloseable=null,i.dimBackground=!1,i.onCloseCallback=n,i.returnToGridView=i.returnToGridView.bind(i);var r=i,o=r.contentEl;r.modalEl.addClass("mod-community-modal","mod-sidebar-layout");var a=i.sidebarEl=o.createDiv("modal-sidebar");i.detailsEl=createDiv("community-modal-details"),a.createDiv("community-modal-controls",(function(e){new NI(e).addSearch((function(e){return i.search=e.onChange(mc(i.update.bind(i),300)).then((function(){e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||Zl.isMobile&&xw()}))}))})).addButton((function(e){return e.onClick((function(e){return i.showSortMenu(e)})).then((function(e){if(Zl.isPhone)e.setButtonText(Qf.plugins.fileExplorer.actionChangeSort());else{var t=e.buttonEl;mx(t,"lucide-sort-asc"),Rx(t,Qf.plugins.fileExplorer.actionChangeSort()),t.addClass("clickable-icon")}}))})),i.installedOnlyToggleSetting=new NI(e).setName(Qf.setting.thirdPartyPlugin.showInstalledOnly()).addToggle((function(e){return i.installedOnlyToggle=e.setSmall().setValue(!1).onChange((function(){return i.update()}))})),i.addCustomControls(e),i.searchSummaryEl=e.createDiv("community-modal-search-summary u-muted")}));var s=a.createDiv("community-modal-search-results-wrapper");i.emptyStateEl=s.createDiv("community-modal-empty-state"),i.listEl=s.createDiv("community-modal-search-results"),Zl.isMobile&&CA(i.contentEl,(function(e){if(1===e.points&&"x"===e.direction&&!(null===i.selectedItemId||e.touch.clientX>40)){var t=i,n=t.detailsEl,r=t.sidebarEl;i.contentEl.prepend(r),ik(r),e.registerCallback({move:function(t,i){var r=n.offsetWidth,o=Math.clamp((t-e.startX)/r,0,1);n.style.transform="translateX(".concat(o*r,"px)")},cancel:function(){n.style.transform="",r.detach()},finish:function(t,o,a){var s=n.offsetWidth,l=Math.clamp((t-e.startX)/s,0,1);.5*a<s/2?wl(n,new ml({duration:200*l}).addProp("transform",null,"translateX(0)",""),(function(){r.detach()})):wl(n,new ml({duration:100*(1-l),fn:"ease-out"}).addProp("transform",null,"translateX(".concat(s,"px)"),""),(function(){n.detach(),i.returnToGridView()}))}})}}));var l=i.renderQueue=new pL,c=null,u=function(){s.scrollTop+s.clientHeight<s.scrollHeight-s.clientHeight/2?c||(c=uL()):c&&(c.resolve(),c=null)},h=mL(l.generator(),{batchSize:10,beforePause:u});return g(i,void 0,void 0,(function(){var e,t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:l.trys.push([0,6,7,12]),e=!0,t=M(h),l.label=1;case 1:return[4,t.next()];case 2:return n=l.sent(),(r=n.done)?[3,5]:(s=n.value,e=!1,s(),c?[4,c.promise]:[3,4]);case 3:l.sent(),l.label=4;case 4:return e=!0,[3,1];case 5:return[3,12];case 6:return i=l.sent(),o={error:i},[3,12];case 7:return l.trys.push([7,,10,11]),e||r||!(a=t.return)?[3,9]:[4,a.call(t)];case 8:l.sent(),l.label=9;case 9:return[3,11];case 10:if(o)throw o.error;return[7];case 11:return[7];case 12:return[2]}}))})),s.addEventListener("scroll",u,Aw),i}return f(t,e),t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r=this;return y(this,(function(o){switch(o.label){case 0:this.listEl.hide(),this.emptyStateEl.show(),o.label=1;case 1:return o.trys.push([1,3,,4]),e=this,[4,zw(this.emptyStateEl,(function(){return r.loadItems()}))];case 2:return e.items=o.sent(),this.listEl.show(),this.emptyStateEl.hide(),this.emptyStateEl.empty(),this.update(),this.selectedItemId&&this.selectItem(this.selectedItemId),[3,4];case 3:return t=o.sent(),this.listEl.hide(),n=createDiv("button-container"),(i=n.createEl("button",{cls:"mod-cta",text:Qf.dialogue.buttonRetry()})).addEventListener("click",(function(){return qw(i,(function(){return r.onOpen()}))})),this.emptyStateEl.setChildrenInPlace([createDiv({text:t.message}),n]),this.emptyStateEl.show(),[3,4];case 4:return[2]}}))}))},t.prototype.onClose=function(){SA(this.selectedItemCloseable),this.onCloseCallback&&this.onCloseCallback()},t.prototype.onEscapeKey=function(){this.selectedItemId?this.returnToGridView():this.close()},t.prototype.update=function(){var e=this.itemsVisible=this.updateItems(),t=this.listEl;0===e.length?t.setChildrenInPlace([createDiv({cls:"community-item",text:Qf.setting.thirdPartyPlugin.labelNoResultsFound()})]):t.setChildrenInPlace(e.map((function(e){return e.el})))},t.prototype.returnToGridView=function(){var e=this,t=function(){e.selectItem(null)};Zl.isPhone&&this.detailsEl.isShown()?(Ll(this.contentEl,this.sidebarEl,"left",t),ik(this.sidebarEl)):t()},t.prototype.selectItem=function(e){var t,n=this,i=this.detailsEl;if(!i.hasClass("is-loading")){var r=this.items,o=this.selectedItemId;if(r.hasOwnProperty(o)&&r[o].el.removeClass("is-selected"),i.empty(),null===(t=this.backButtonEl)||void 0===t||t.detach(),this.backButtonEl=null,SA(this.selectedItemCloseable),this.selectedItemCloseable=null,null===e||i.parentElement||this.contentEl.append(i),null===e||!r.hasOwnProperty(e))return this.selectedItemId="",void i.detach();this.selectedItemId=e,this.selectedItemCloseable={close:this.returnToGridView.bind(this)},EA(this.selectedItemCloseable);var a=r[e];return a.el.addClass("is-selected"),zw(i,(function(){return g(n,void 0,void 0,(function(){var e=this;return y(this,(function(t){switch(t.label){case 0:return Zl.isPhone?(this.backButtonEl=this.titleEl.createDiv("modal-setting-back-button",(function(t){t.addEventListener("click",e.returnToGridView),t.createSpan("modal-setting-back-button-icon",(function(e){mx(e,"lucide-arrow-left")}))})),tk(this.sidebarEl),Ll(this.contentEl,i,"right")):i.createDiv("modal-setting-nav-bar",(function(t){t.createDiv("clickable-icon",(function(t){Rx(t,Qf.interface.startScreen.buttonBack()),mx(t,"lucide-chevron-left"),t.addEventListener("click",e.returnToGridView)}))})),[4,this.showItem(a)];case 1:return t.sent(),[2]}}))}))}))}},t.prototype.showSortMenu=function(e){var t=this;e.preventDefault();var n=e.currentTarget;if(!n.hasClass("has-active-menu")){for(var i=new PA,r=this.sortOrder,o=function(e){var n=yY[e]();i.addItem((function(i){return i.setTitle(n).setChecked(e===r).onClick((function(){t.sortOrder=e,t.update()}))}))},a=0,s=this.sortOrderOptions;a<s.length;a++){o(s[a])}i.setParentElement(n).showAtMouseEvent(e)}},t.prototype.sortItems=function(e){var t=this.sortOrder;if("release"!==t){var n=null;n="update"===t?function(e,t){return new Date(t.updated).getTime()-new Date(e.updated).getTime()}:"alphabetical"===t?function(e,t){return xm(e.name,t.name)}:function(e,t){return t.downloads-e.downloads},e.sort(n)}else e.reverse()},t.prototype.scrollIntoView=function(e){var t=this.items[e];t&&!Zl.isPhone&&t.el.scrollIntoView({behavior:"smooth",block:"nearest"})},t.prototype.addCustomControls=function(e){},t}(ZA),vK=function(){function e(e,t){this.app=null,this.setting=null,this.containerEl=null,this.navEl=null,this.app=e,this.setting=t,this.containerEl=createDiv("vertical-tab-content")}return e.prototype.hide=function(){},e}(),gK=Qf.setting.hotkeys,yK=function(){function e(e){var t=this;this.value=null,this.el=createDiv({cls:"hotkey-filter"},(function(e){t.innerEl=e.createDiv({cls:"hotkey-filter-inner",text:gK.labelShowAll()}),t.removeEl=e.createDiv("hotkey-filter-remove-button",(function(e){mx(e,"lucide-x"),Rx(e,Qf.interface.menu.close())}))})),e&&e.appendChild(this.el)}return e.prototype.setValue=function(e){return this.value=e,this},e.prototype.setTitle=function(e){return this.innerEl.setText(e),this},e.prototype.onRemove=function(e){return this.handleRemove=e,this.removeEl.addEventListener("click",this.remove.bind(this)),this},e.prototype.remove=function(){var e;this.value=null,this.el.isShown()&&(this.el.detach(),null===(e=this.handleRemove)||void 0===e||e.call(this))},e}(),bK={"show-all":gK.labelShowAll,"show-assigned":gK.labelShowAssigned,"show-user-assigned":gK.labelShowUserAssigned,"show-unassigned":gK.labelShowUnassigned};var wK=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.name=gK.name(),i.id="hotkeys",i.setHotkeyScope=null,i.commandBeingCustomized=null,i.filterHotkeyScope=null,i.filterHotkeyEl=null,i.filterHotkeyActiveEl=null,i.hotkeyListContainerEl=null,i.hotkeyFilter=null,i.setHotkeyScope=new Tk,i.setHotkeyScope.register(null,null,(function(e,n){var r=i.commandBeingCustomized,o=t.hotkeyManager;if(r){var a=function(e){var t=Ak.decompileModifiers(e.modifiers),n=e.vkey;return 0!==t.length||/^F[0-9]+$/i.test(n)?1===t.length&&/^[a-zA-Z]$/i.test(n)&&"Shift"===t[0]?null:oA(t,n):null}(n);if(a){var s=o.getHotkeys(r.id)||o.getDefaultHotkeys(r.id)||[];(s=s.slice()).filter((function(e){return sA(e)===sA(a)})).length>0||(s.push(a),o.setHotkeys(r.id,s),g(i,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,o.save()];case 1:return e.sent(),[2]}}))}))),i.finishCustomizingHotkey()}e.preventDefault(),e.stopPropagation()}})),i.setHotkeyScope.register([],"Escape",(function(){if(i.commandBeingCustomized)return i.finishCustomizingHotkey(),!1})),i.filterHotkeyScope=new Tk,i.filterHotkeyScope.register([],"Escape",(function(e,t){var n;return null===(n=i.hotkeyFilter)||void 0===n||n.remove(),i.finishFilteringByHotkey(),i.updateHotkeyVisibility(),!1})),i.filterHotkeyScope.register(null,null,(function(e,t){var n=oA(Ak.decompileModifiers(t.modifiers),t.vkey);i.setHotkeyFilter(n),e.preventDefault(),e.stopPropagation()})),i.filterHotkeyScope.register([],"Escape",(function(){i.finishFilteringByHotkey(),i.updateHotkeyVisibility()})),i}return f(t,e),t.prototype.display=function(){var e,t=this,n=this.containerEl;n.empty(),null===(e=this.hotkeyFilter)||void 0===e||e.remove(),this.headerComponent=new NI(n).setName(gK.optionSearch()).addButton((function(e){mx(e.buttonEl,"lucide-filter"),e.buttonEl.addClass("clickable-icon"),e.onClick(t.showFilterMenu.bind(t))})).addSearch((function(e){t.searchComponent=e,e.setPlaceholder(gK.promptFilter()).onChange(t.updateHotkeyVisibility.bind(t));var n=e.containerEl;n.addClass("mod-hotkey");var i=t.filterHotkeyEl=n.createDiv("input-right-decorator clickable-icon");mx(i,"lucide-keyboard"),t.filterHotkeyActiveEl=createSpan({cls:"setting-hotkey mod-active input-right-decorator",text:gK.labelWaitingForHotkeyPress()}),i.addEventListener("click",(function(){if(t.filterHotkeyActiveEl.isShown())return t.filterHotkeyActiveEl.detach(),void t.finishFilteringByHotkey();n.appendChild(t.filterHotkeyActiveEl),t.app.keymap.pushScope(t.filterHotkeyScope)}))})),this.filterContainerEl=n.createDiv("setting-filter-container"),this.statusFilter=(new yK).onRemove((function(){return t.setStatusFilter("show-all")})).setTitle(gK.labelShowAll()),this.hotkeyListContainerEl=n.createDiv("hotkey-list-container"),this.updateHotkeyVisibility(),Zl.isMobile||this.searchComponent.inputEl.focus()},t.prototype.setHotkeyFilter=function(e){var t,n=this;this.statusFilter.remove(),null===(t=this.hotkeyFilter)||void 0===t||t.remove(),this.hotkeyFilter=new yK(this.filterContainerEl).setValue(e).setTitle(sA(e)).onRemove((function(){return n.updateHotkeyVisibility()})),this.finishFilteringByHotkey(),this.updateHotkeyVisibility()},t.prototype.setStatusFilter=function(e){var t;null===(t=this.hotkeyFilter)||void 0===t||t.remove(),this.statusFilter.setValue(e),"show-all"===e?this.statusFilter.remove():(this.statusFilter.el.isShown()||this.filterContainerEl.appendChild(this.statusFilter.el),this.statusFilter.setTitle(bK[e]())),this.updateHotkeyVisibility()},t.prototype.setDescription=function(e,t){this.headerComponent.setDesc(createFragment((function(n){n.createSpan({text:gK.optionSearchDesc({count:e})}),t&&n.createSpan({cls:"mod-warning",text:gK.optionSearchConflict({count:t})})})))},t.prototype.showFilterMenu=function(e){var t,n,i=this;e.preventDefault();var r=e.currentTarget;if(!r.hasClass("has-active-menu")){for(var o=new PA,a=null!==(n=null===(t=this.statusFilter)||void 0===t?void 0:t.value)&&void 0!==n?n:"show-all",s=function(e){var t=bK[e];o.addItem((function(n){return n.setTitle(t()).setChecked(a===e).onClick((function(){return i.setStatusFilter(e)}))}))},l=0,c=Object.keys(bK);l<c.length;l++){s(c[l])}o.setParentElement(r).showAtMouseEvent(e)}},t.prototype.hide=function(){this.finishCustomizingHotkey()},t.prototype.setQuery=function(e){var t=this.searchComponent.inputEl;t.value=e,t.focus(),this.updateHotkeyVisibility()},t.prototype.updateHotkeyVisibility=function(){var e,t,n,i=this,r=this.app.commands,o=this.app.hotkeyManager;this.hotkeyListContainerEl.empty();var a=new rc;for(var s in r.commands)if(r.commands.hasOwnProperty(s)){var l=r.commands[s],c=o.getHotkeys(s),u=o.getDefaultHotkeys(s),h=void 0!==c,d=void 0!==u&&u.length>0;if(h)for(var p=0,f=c;p<f.length;p++){var m=f[p];a.add(sA(m),l.name)}else if(d)for(var v=0,b=u;v<b.length;v++){var w=b[v];a.add(sA(w),l.name)}}var k=Object.values(r.commands);k.sort((function(e,t){return xm(e.name,t.name)}));for(var C=0,M=new Set,E=null!==(t=null===(e=this.statusFilter)||void 0===e?void 0:e.value)&&void 0!==t?t:"show-all",S=null===(n=this.hotkeyFilter)||void 0===n?void 0:n.value,x=this.searchComponent.inputEl.value.toLowerCase(),T=function(e){var t=e.id,n=e.name;if(""!==x&&!n.toLowerCase().contains(x)&&!t.startsWith(x))return"continue";var r=o.getHotkeys(t),s=o.getDefaultHotkeys(t),l=r||s,c=void 0!==r,u=void 0!==s;if(c)for(var h=0,d=r;h<d.length;h++)for(var p=sA(d[h]),f=0,m=a.get(p).filter((function(e){return e!==n}));f<m.length;f++){var v=m[f];M.add(v)}if(S&&!(null==l?void 0:l.find((function(e){return sA(e)===sA(S)}))))return"continue";if("show-assigned"===E&&!u&&!c)return"continue";if("show-user-assigned"===E&&!c)return"continue";if("show-unassigned"===E&&(c||u))return"continue";C++;var b=new NI(D.hotkeyListContainerEl).setName(n).controlEl,w=b.createDiv("setting-command-hotkeys"),k=function(e,t,r){var o=sA(t);if(a.get(o)){var s=a.get(o).filter((function(e){return e!==n}));if(s.length>0)if(e.addClass("has-conflict"),e.addEventListener("click",(function(e){e.defaultPrevented||(i.setQuery(""),i.setHotkeyFilter(t))})),1===s.length){var l=s[0];Rx(e,gK.tooltipHotkeySingleConflict({command:l}))}else{var c=s.length;Rx(e,gK.tooltipHotkeyMultipleConflicts({count:c}))}}e.appendText(" "+o+" "),e.createSpan("setting-hotkey-icon setting-delete-hotkey",(function(e){mx(e,"lucide-x"),Rx(e,gK.tooltipDeleteHotkey()),e.addEventListener("click",(function(e){e.preventDefault(),r()}))}))};if(c)for(var T=function(e){w.createSpan("setting-hotkey",(function(n){k(n,e,(function(){return g(i,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return 0!==(n=r.filter((function(t){return sA(t)!==sA(e)}))).length||u?o.setHotkeys(t,n):o.removeHotkeys(t),[4,o.save()];case 1:return i.sent(),this.updateHotkeyVisibility(),[2]}}))}))}))}))},A=0,L=r;A<L.length;A++){T(L[A])}else if(u)for(var P=function(e){w.createSpan("setting-hotkey",(function(n){k(n,e,(function(){return g(i,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=s.filter((function(t){return sA(t)!==sA(e)})),o.setHotkeys(t,n),[4,o.save()];case 1:return i.sent(),this.updateHotkeyVisibility(),[2]}}))}))}))}))},I=0,F=s;I<F.length;I++){P(F[I])}D.commandBeingCustomized&&t===D.commandBeingCustomized.id?w.createSpan({cls:"setting-hotkey mod-active",text:gK.labelWaitingForHotkeyPress()}):(c&&0===r.length||!c&&!u)&&w.createSpan({cls:"setting-hotkey mod-empty",text:gK.labelBlankHotkey()}),c&&b.createSpan("clickable-icon setting-restore-hotkey-button",(function(e){mx(e,"lucide-rotate-ccw"),Rx(e,gK.tooltipRestoreDefault()),e.addEventListener("click",(function(){return g(i,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return o.removeHotkeys(t),[4,o.save()];case 1:return e.sent(),this.finishCustomizingHotkey(),[2]}}))}))}))})),b.createSpan("clickable-icon setting-add-hotkey-button",(function(t){mx(t,"lucide-plus-circle"),Rx(t,gK.tooltipCustomizeCommand()),t.addEventListener("click",(function(){i.commandBeingCustomized=e,i.app.keymap.pushScope(i.setHotkeyScope),i.updateHotkeyVisibility()})),t.toggleClass("mod-active",e===i.commandBeingCustomized)}))},D=this,A=0,L=k;A<L.length;A++){T(l=L[A])}this.setDescription(C,M.size)},t.prototype.finishFilteringByHotkey=function(){this.filterHotkeyActiveEl.detach(),this.app.keymap.popScope(this.filterHotkeyScope)},t.prototype.finishCustomizingHotkey=function(){this.app.keymap.popScope(this.setHotkeyScope),this.commandBeingCustomized=null,this.updateHotkeyVisibility()},t}(vK),kK=Qf.setting.thirdPartyPlugin,CK=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.sortOrderOptions=["download","update","release","alphabetical"],i.setTitle(kK.name()),i.modalEl.addClass("mod-community-plugin"),i.search.setPlaceholder(kK.placeholderCommunityPlugins()),i.sortOrder=localStorage.getItem("communityPluginSortOrder")||"download",i}return f(t,e),t.prototype.onClose=function(){e.prototype.onClose.call(this),localStorage.setItem("communityPluginSortOrder",this.sortOrder)},t.prototype.setAutoOpen=function(e){return this.selectedItemId=e,this},t.prototype.loadItems=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,pY()];case 1:return e=d.sent(),[3,3];case 2:return t=d.sent(),console.error(t),[3,3];case 3:if(!e)throw new Error(kK.msgFailedLoadPlugins());n={},d.label=4;case 4:return d.trys.push([4,6,,7]),[4,mY()];case 5:return n=d.sent(),[3,7];case 6:return d.sent(),[3,7];case 7:for(i={},r=function(e){var t=e.id,r=0,o=0;if(n.hasOwnProperty(t)){var a=n[t];r=null!==(c=a.downloads)&&void 0!==c?c:0,o=null!==(u=a.updated)&&void 0!==u?u:0}var s=createDiv("community-item");s.addEventListener("click",(function(){return h.selectItem(t)})),i[t]=m(m({},e),{downloads:r,updated:o,el:s,nameEl:null,authorEl:null,descEl:null,init:!1})},o=0,a=e;o<a.length;o++)s=a[o],r(s);return(l=this.selectedItemId)&&!i.hasOwnProperty(l)&&this.search.setValue(l.split("-").join(" ")),[2,i]}}))}))},t.prototype.updateItems=function(){var e=this.items,t=this.search.getValue().trim().toLowerCase(),n=this.installedOnlyToggle.getValue(),i=this.app.plugins.manifests,r=t.split(" "),o=[];for(var a in e){if(e.hasOwnProperty(a))if((v=e[a]).id&&v.name&&v.repo&&(v.matches=null,v.score=0,!n||i.hasOwnProperty(v.id)))if(""===t)o.push(v);else{var s=v.name,l=v.author,c=v.description;if(!s)continue;l=l||"",c=c||"";var u=s.toLowerCase()+l.toLowerCase()+c.toLowerCase();v.matches=UL(r,u),v.matches&&(o.push(v),v.score=RL(v.matches,u.length,t.length,0))}}this.sortItems(o),this.renderQueue.clear();for(var h=0,d=function(e){var t=function(){var t=e.el,n=e.nameEl,r=e.authorEl,o=e.descEl,a=e.id,s=e.name,l=e.author,c=e.description,u=e.matches;if(l=l||"",c=c||"",!e.init){var h=e.downloads,d=e.updated;if(n=e.nameEl=t.createDiv("community-item-name"),r=e.authorEl=t.createDiv("community-item-author"),h){var p=t.createDiv("community-item-downloads");p.createSpan({},(function(e){mx(e,"lucide-download-cloud")})),p.createSpan({cls:"community-item-downloads-text",text:h.toLocaleString()})}0!==d&&t.createDiv({cls:"community-item-updated",text:kK.labelLastUpdated({time:window.moment(d).fromNow()})}),o=e.descEl=t.createDiv({cls:"community-item-desc"}),e.init=!0}n.empty(),r.empty(),o.empty(),jL(n,s,u),i.hasOwnProperty(a)&&n.createSpan({cls:"flair mod-pop",text:kK.labelInstalled()}),l&&(r.setText(kK.labelByAuthor()),jL(r,l,u,-s.length)),c&&jL(o,pc(c,200),u,-(s.length+l.length)),t.show()};e.el.hide(),h<20?t():p.renderQueue.add(t),h++},p=this,f=0,m=o;f<m.length;f++){var v;d(v=m[f])}var g=Qf.nouns.pluginWithCount({count:o.length});return this.searchSummaryEl.setText(kK.labelSearchSummary({pluginCount:g})),o},t.prototype.showItem=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w,k,C,M,E,S,x,T,D,A,L,P=this;return y(this,(function(I){switch(I.label){case 0:n=(t=this).app,i=t.detailsEl,r=e.id,o=e.name,a=e.description,s=e.repo,l=nW(s,ZK),c=nW(s,"README.md"),u=null,I.label=1;case 1:return I.trys.push([1,3,,4]),[4,WA(l).json];case 2:return(u=I.sent()).id&&u.id===r?[3,4]:(new JA("Plugin ID mismatch."),[2]);case 3:return h=I.sent(),console.error(h),new JA(kK.msgFailedToLoadManifest()),[2];case 4:return[4,oW(s,u)];case 5:d=I.sent()||u.version,p=i.createDiv("community-modal-info"),f=p.createDiv({cls:"community-modal-info-name",text:o}),(m=n.plugins.manifests[r])&&f.createSpan({cls:"flair mod-pop",text:kK.labelInstalled()}),e.downloads&&p.createDiv("community-modal-info-downloads",(function(t){t.createSpan({},(function(e){mx(e,"lucide-download-cloud")})),t.createSpan({cls:"community-modal-info-downloads-text",text:e.downloads.toLocaleString()})})),d&&(v=p.createDiv({cls:"community-modal-info-version",text:kK.labelVersion({version:d})}),m&&m.version&&v.appendText(kK.labelCurrentlyInstalledVersion({version:m.version}))),(b=e.author||u.author)&&(w=p.createDiv({cls:"community-modal-info-author",text:kK.labelByAuthor()}),u.authorUrl?w.createEl("a",{href:u.authorUrl,text:b,attr:{target:"_blank",rel:"noopener"}}):w.appendText(b)),k=p.createDiv({cls:"community-modal-info-repo",text:kK.labelRepository()}),C=iW(s),k.createEl("a",{href:C,text:C,attr:{target:"_blank",rel:"noopener"}}),0!==e.updated&&p.createDiv({cls:"community-modal-info-repo",text:kK.labelLastUpdate()},(function(t){t.createEl("a",{href:C+"/releases/latest",text:window.moment(e.updated).fromNow(),attr:{target:"_blank",rel:"noopener"}},(function(e){return Rx(e,kK.tooltipViewLastUpdate())}))})),a&&p.createDiv({cls:"community-modal-info-desc",text:a}),(M=!Zl.isDesktopApp&&u.isDesktopOnly)&&p.createDiv({cls:"mod-warning",text:kK.labelUnsupported()}),E=p.createDiv("community-modal-button-container"),(S=E.createEl("button",{cls:"mod-cta",text:kK.buttonInstall()})).addEventListener("click",(function(){return g(P,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){switch(i.label){case 0:return M?(new JA(kK.labelUnsupported()),[2]):[4,oW(s,u)];case 1:return(t=i.sent())?[4,qw(S,(function(){return n.app.plugins.installPlugin(s,t,u)}))]:(new JA("No appropriate version found."),[2]);case 2:return i.sent(),this.update(),[4,this.selectItem(e.id)];case 3:return i.sent(),[2]}}))}))})),m&&(sL(m.version,d)?S.setText(kK.buttonUpdate()):S.detach(),(x=n.plugins.getPlugin(r))&&(T=this.app.setting,n.setting.pluginTabs.some((function(e){return e.id===r}))&&E.createEl("button",{text:Qf.setting.options()}).addEventListener("click",(function(){P.close(),T.open(),T.openTabById(u.id)})),Object.keys(n.commands.commands).some((function(e){return e.startsWith(r+":")}))&&E.createEl("button",{text:Qf.setting.hotkeys.name()}).addEventListener("click",(function(){P.close(),T.open();var e=T.openTabById("hotkeys");e instanceof wK&&e.setQuery(u.id)}))),E.createEl("button",{cls:x?"mod-destructive":"mod-cta",text:kK(x?"button-disable":"button-enable")}).addEventListener("click",(function(){return g(P,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return x?[4,n.plugins.disablePluginAndSave(r)]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.plugins.enablePluginAndSave(r)];case 3:t.sent(),t.label=4;case 4:return[4,this.selectItem(e.id)];case 5:return t.sent(),[2]}}))}))})),E.createEl("button",{cls:"mod-destructive",text:kK.labelUninstall()}).addEventListener("click",(function(){return g(P,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,n.plugins.uninstallPlugin(r)];case 1:return t.sent(),this.update(),[4,this.selectItem(e.id)];case 2:return t.sent(),[2]}}))}))}))),E.createEl("button",{text:kK.buttonCopyShareLink()}).addEventListener("click",(function(){return g(P,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,navigator.clipboard.writeText("obsidian://show-plugin?id="+encodeURIComponent(r))];case 1:return e.sent(),new JA(Qf.interface.copied()),[2]}}))}))})),u.fundingUrl&&E.createEl("button",{text:kK.buttonDonate()}).addEventListener("click",(function(){new MK(n,e.name,u.fundingUrl).open()})),I.label=6;case 6:return I.trys.push([6,8,,9]),[4,WA(c).text];case 7:return D=I.sent(),[3,9];case 8:return I.sent(),D=kK.labelNoReadme(),[3,9];case 9:return p.createEl("hr"),A=p.createDiv("community-modal-readme markdown-rendered"),L=bS(pS(D)),A.appendChild(qT(L)),sW(A,s),this.scrollIntoView(r),[2]}}))}))},t}(mK),MK=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.setTitle(kK.labelDonateModalTitle({name:n}));var o=document.createDocumentFragment();if(o.createEl("p",{text:kK.labelDonateModalText1()}),o.createEl("p",{text:kK.labelDonateModalText2()}),o.createEl("p",{text:kK.labelDonateModalText3()}),o.createEl("hr"),"string"==typeof i)o.createEl("p",{text:kK.labelSupportThisPlugin()+" "},(function(e){e.createEl("a",{text:i,href:i,cls:"external-link",attr:{target:"_blank"}})}));else if("object"==typeof i){var a=function(e){if(!i.hasOwnProperty(e))return"continue";var t=i[e];o.createEl("p",{text:e+": "},(function(e){e.createEl("a",{text:t,href:t,cls:"external-link",attr:{target:"_blank"}})}))};for(var s in i)a(s)}return r.setContent(o),r.addButton("mod-cta",Qf.dialogue.buttonDone(),(function(){return r.close()})),r}return f(t,e),t}(XA),EK="theme.css",SK="manifest.json",xK=Qf.plugins.customCss;var TK=nW("obsidianmd/obsidian-releases","community-css-themes.json"),DK=hL((function(){return g(void 0,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,WA(TK).json];case 1:if(e=t.sent(),!Array.isArray(e))throw new Error("Failed to parse community themes.");return[2,e]}}))}))}),3e5,6e4),AK=hL((function(){return WA("https://releases.obsidian.md/stats/theme").json}),3e5,6e4),LK=function(e){function t(t){var n=e.call(this)||this;return n.app=null,n.styleEl=null,n.extraStyleEls=[],n.boundRaw=n.onRaw.bind(n),n.oldThemes=[],n.themes={},n.updates={},n.snippets=[],n.enabledSnippets=new Set,n.csscache=new Map,n.theme="",n.requestLoadTheme=mc(n.loadTheme.bind(n),100),n.requestLoadSnippets=mc(n.loadSnippets.bind(n),100),n.requestReadThemes=mc(n.readThemes.bind(n),2e3),n.queue=new cL,n.app=t,n}return f(t,e),t.prototype.onload=function(){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e.prototype.onload.call(this),t=this.app,this.loadData(),[4,this.readThemes()];case 1:return n.sent(),[4,this.readSnippets()];case 2:return n.sent(),this.styleEl=document.head.createEl("style",{type:"text/css"}),this.registerEvent(t.vault.on("raw",this.boundRaw)),[4,this.loadTheme()];case 3:return n.sent(),[4,this.loadSnippets()];case 4:return n.sent(),[2]}}))}))},t.prototype.loadData=function(){var e=this.app.vault,t=e.getConfig("enabledCssSnippets");t&&(this.enabledSnippets=new Set(t));var n=e.getConfig("cssTheme");n&&(this.theme=n),e.getConfig("translucency")&&this.enableTranslucency()},t.prototype.readThemes=function(e){var t=this;return this.queue.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w;return y(this,(function(y){switch(y.label){case 0:return t=this.app,n=this.app.vault.adapter,i=[],r={},o=this.getThemeFolder(),[4,t.vault.exists(o)];case 1:return y.sent()?[4,n.list(o)]:[3,10];case 2:a=y.sent(),s=0,l=a.folders,y.label=3;case 3:if(!(s<l.length))return[3,9];c=l[s],u=Kc(c),h=tu(c+"/"+SK),d=tu(c+"/"+EK),y.label=4;case 4:return y.trys.push([4,7,,8]),[4,n.exists(d)];case 5:return y.sent()?[4,n.read(h)]:[3,8];case 6:return p=y.sent(),(f=JSON.parse(p)).name&&f.name===u?(f.dir=c,r[u]=f,[3,8]):[3,8];case 7:return m=y.sent(),console.error(m),[3,8];case 8:return s++,[3,3];case 9:for(v=0,g=a.files;v<g.length;v++)b=g[v],(w=Kc(b)).startsWith(".")||"css"!==Qc(w)||i.push(Xc(w));y.label=10;case 10:return this.oldThemes=i,this.themes=r,e&&this.requestLoadTheme(),[2]}}))}))}))},t.prototype.readSnippets=function(e){var t=this;return this.queue.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return t=this.app.vault,n=t.adapter,i=[],r=this.getSnippetsFolder(),[4,n.exists(r)];case 1:return u.sent()?[4,n.list(r)]:[3,3];case 2:for(o=u.sent(),a=0,s=o.files;a<s.length;a++)l=s[a],(c=Kc(l)).startsWith(".")||"css"!==Qc(c)||i.push(Xc(c));u.label=3;case 3:return i.sort(xm),this.snippets=i,e&&this.requestLoadSnippets(),[2]}}))}))}))},t.prototype.onRaw=function(e){this.csscache.has(e)&&this.csscache.delete(e);var t=Kc(e),n=Qc(t);e===this.getThemePath(this.theme)&&this.requestLoadTheme(),!e.startsWith(this.getThemeFolder())||t!==SK&&t!==EK&&"css"!==n||this.requestReadThemes(),e.startsWith(this.getSnippetsFolder())&&"css"===n&&this.readSnippets(!0)},t.prototype.loadTheme=function(e){var t=this;return this.queue.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=(t=this).styleEl,i=t.theme,r="",e?(r=e,[3,3]):[3,1];case 1:return i?[4,this.loadCss(this.getThemePath(i))]:[3,3];case 2:r=o.sent(),o.label=3;case 3:return n.textContent!==r&&(n.textContent=r,this.app.workspace.trigger("css-change"),this.app.workspace.trigger("resize")),[2]}}))}))}))},t.prototype.loadSnippets=function(){var e=this;return this.queue.queue((function(){return g(e,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v;return y(this,(function(g){switch(g.label){case 0:t=(e=this).styleEl,n=e.extraStyleEls,i=e.enabledSnippets,r=e.snippets,o=[],a=0,s=r,g.label=1;case 1:return a<s.length?(l=s[a],i.has(l)?(u=(c=o).push,[4,this.loadCss(this.getSnippetPath(l))]):[3,3]):[3,4];case 2:u.apply(c,[g.sent()]),g.label=3;case 3:return a++,[3,1];case 4:for(h=!1,d=0,p=t;d<o.length;d++)(f=n[d])||(f=createEl("style",{type:"text/css"}),n.push(f),p.parentNode.insertAfter(f,p),h=!0),f.textContent!==o[d]&&(f.textContent=o[d],h=!0),p=f;for(m=n.length-o.length,v=0;v<m;v++)n.pop().detach(),h=!0;return h&&(this.app.workspace.trigger("css-change"),this.app.workspace.trigger("resize")),[2]}}))}))}))},t.prototype.loadCss=function(e){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return(t=this.csscache).has(e)?[2,t.get(e)]:[4,(n=this.app.vault.adapter).exists(e)];case 1:return r.sent()?[4,n.read(e)]:[3,3];case 2:return i=r.sent(),t.set(e,i),[2,i];case 3:return[2,null]}}))}))},t.prototype.setCssEnabledStatus=function(e,t){var n=this.enabledSnippets;t?n.add(e):n.delete(e),this.app.vault.setConfig("enabledCssSnippets",Array.from(n)),this.requestLoadSnippets()},t.prototype.setTheme=function(e){this.theme=e,this.app.vault.setConfig("cssTheme",e),this.requestLoadTheme()},t.prototype.setTranslucency=function(e){this.app.vault.setConfig("translucency",e),e?this.enableTranslucency():this.disableTranslucency()},t.prototype.enableTranslucency=function(){if(Zl.isDesktopApp&&Ff())try{Of(electronWindow,!0),document.body.addClass("is-translucent")}catch(e){new JA(Qf.interface.msgUpgradeInstaller())}},t.prototype.disableTranslucency=function(){if(Zl.isDesktopApp&&Ff()){document.body.removeClass("is-translucent");try{Of(electronWindow,!1)}catch(e){}}},t.prototype.isDarkMode=function(){return document.body.hasClass("theme-dark")},t.prototype.getThemeFolder=function(){return"".concat(this.app.vault.configDir,"/themes")},t.prototype.getSnippetsFolder=function(){return"".concat(this.app.vault.configDir,"/snippets")},t.prototype.getThemePath=function(e){return!this.themes.hasOwnProperty(e)&&this.oldThemes.contains(e)?"".concat(this.getThemeFolder(),"/").concat(e,".css"):"".concat(this.getThemeFolder(),"/").concat(e,"/").concat(EK)},t.prototype.getSnippetPath=function(e){return"".concat(this.getSnippetsFolder(),"/").concat(e,".css")},t.prototype.removeTheme=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t=this.app.vault.adapter,n=this.getThemeFolder(),i="".concat(n,"/").concat(e),[4,t.exists(i)];case 1:return a.sent()?[4,t.rmdir(i,!0)]:[3,3];case 2:a.sent(),a.label=3;case 3:return r="".concat(n,"/").concat(e,".css"),(o=this.oldThemes.contains(e))?[4,t.exists(r)]:[3,5];case 4:o=a.sent(),a.label=5;case 5:return o?[4,t.remove(r)]:[3,7];case 6:a.sent(),a.label=7;case 7:return[4,this.readThemes()];case 8:return a.sent(),this.theme===e&&this.setTheme(""),[2]}}))}))},t.prototype.downloadLegacyTheme=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,WA(nW(e.repo,"obsidian.css")).text];case 1:return[2,t.sent()]}}))}))},t.prototype.isThemeInstalled=function(e){return this.themes.hasOwnProperty(e)||this.oldThemes.contains(e)},t.prototype.hasUpdates=function(){return this.updates&&Object.keys(this.updates).length>0},t.prototype.checkForUpdate=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f;return y(this,(function(m){switch(m.label){case 0:if(t=this.getThemeFolder(),n=this.updates||{},i=e.name,r=e.repo,!this.isThemeInstalled(i))return[2];o=null===(p=this.themes[i])||void 0===p?void 0:p.version,a=nW(r,SK),s=null,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,WA(a).json];case 2:return(s=m.sent())&&s.name&&s.name===i?[3,4]:[2];case 3:return m.sent(),[3,4];case 4:return s?[3,10]:[4,this.downloadLegacyTheme(e)];case 5:l=m.sent(),c=!!(null===(f=this.themes[e.name])||void 0===f?void 0:f.dir),u=c?"".concat(t,"/").concat(i,"/").concat(EK):"".concat(t,"/").concat(i,".css"),h="",m.label=6;case 6:return m.trys.push([6,8,,9]),[4,this.app.vault.adapter.read(u)];case 7:return h=m.sent(),[3,9];case 8:return m.sent(),[2,!1];case 9:return l!==h?(n[i]={themeInfo:e},[2,!0]):[2,!1];case 10:return[4,oW(r,s)];case 11:return d=m.sent(),!o||d&&sL(o,d)?(n[i]={themeInfo:e,version:d},[2,!0]):[2,!1]}}))}))},t.prototype.checkForUpdates=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:this.updates={},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,DK()];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),console.error(t),new JA(xK.msgFailedToInstallTheme()),[2];case 4:n=0,i=e,a.label=5;case 5:return n<i.length?(r=i[n],[4,this.checkForUpdate(r)]):[3,8];case 6:a.sent(),a.label=7;case 7:return n++,[3,5];case 8:return o=Object.keys(this.updates).length,new JA(0===o?xK.msgNoUpdatesFound():xK.msgUpdatesFound({count:o})),[2]}}))}))},t.prototype.installLegacyTheme=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return t=this.app.vault,n=e.name,[4,this.downloadLegacyTheme(e)];case 1:return i=l.sent(),r=this.getThemeFolder(),[4,t.exists(r)];case 2:return l.sent()?[3,4]:[4,t.createFolder(r)];case 3:l.sent(),l.label=4;case 4:return o="".concat(r,"/").concat(n),[4,t.exists(o)];case 5:return l.sent()?[3,7]:[4,t.createFolder(o)];case 6:l.sent(),l.label=7;case 7:return a={name:(c=e).name,version:"0.0.0",minAppVersion:"0.16.0",author:c.author},[4,t.adapter.write(o+"/"+EK,i)];case 8:return l.sent(),[4,t.adapter.write(o+"/"+SK,JSON.stringify(a,null,4))];case 9:return l.sent(),s="".concat(r,"/").concat(n,".css"),[4,t.adapter.exists(s)];case 10:return l.sent()?[4,t.adapter.remove(s)]:[3,12];case 11:l.sent(),l.label=12;case 12:return[4,this.readThemes()];case 13:return l.sent(),[2]}var c}))}))},t.prototype.installTheme=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f;return y(this,(function(m){switch(m.label){case 0:n=e.name,i=e.repo,(r=new JA(xK.msgInstallingTheme({name:n}),0)).containerEl.addClass("is-loading");try{o=[],(a=localStorage.getItem("local-themes"))&&(o=JSON.parse(a),Array.isArray(o)||(o=[])),o.contains(n)||(o.push(n),localStorage.setItem("local-themes",JSON.stringify(o)),ajax({method:"POST",url:"https://releases.obsidian.md/stats/theme/".concat(encodeURIComponent(n),"/download")}))}catch(e){console.error(e)}return t?[3,2]:[4,this.installLegacyTheme(e)];case 1:return m.sent(),delete this.updates[n],r.hide(),[2];case 2:return m.trys.push([2,5,,13]),[4,WA(rW(i,t,SK)).text];case 3:return s=m.sent(),[4,WA(rW(i,t,EK)).text];case 4:return l=m.sent(),[3,13];case 5:if(c=m.sent(),s||!(c instanceof HA)||404!==c.status)return[3,11];m.label=6;case 6:return m.trys.push([6,9,,10]),[4,WA(nW(i,SK)).text];case 7:return s=m.sent(),[4,WA(nW(i,EK)).text];case 8:return l=m.sent(),[3,10];case 9:return u=m.sent(),console.error(u),r.containerEl.removeClass("is-loading"),r.containerEl.addClass("mod-error"),r.setMessage(xK.msgFailedToInstallTheme({name:n})),setTimeout((function(){return r.hide()}),3e3),[2];case 10:return[3,12];case 11:return console.error(c),r.containerEl.removeClass("is-loading"),r.containerEl.addClass("mod-error"),r.setMessage(xK.msgFailedToInstallTheme({name:n})),setTimeout((function(){return r.hide()}),3e3),[2];case 12:return[3,13];case 13:return JSON.parse(s).name!==n?(r.containerEl.removeClass("is-loading"),r.setMessage(xK.msgFailedToInstallTheme({name:n})+" Theme name mismatch."),setTimeout((function(){return r.hide()}),3e3),[2]):(h=this.app.vault.adapter,d=this.getThemeFolder(),[4,h.exists(d)]);case 14:return m.sent()?[3,16]:[4,h.mkdir(d)];case 15:m.sent(),m.label=16;case 16:return p=d+"/"+n,[4,h.exists(p)];case 17:return m.sent()?[3,19]:[4,h.mkdir(p)];case 18:m.sent(),m.label=19;case 19:return[4,h.write(p+"/"+SK,s)];case 20:return m.sent(),[4,h.write(p+"/"+EK,l)];case 21:return m.sent(),f="".concat(d,"/").concat(n,".css"),[4,h.exists(f)];case 22:return m.sent()?[4,h.remove(f)]:[3,24];case 23:m.sent(),m.label=24;case 24:return r.setMessage(xK.msgSuccessfullyInstalledTheme({name:n})),r.containerEl.removeClass("is-loading"),r.containerEl.addClass("mod-success"),setTimeout((function(){return r.hide()}),3e3),delete this.updates[n],[4,this.readThemes()];case 25:return m.sent(),[2]}}))}))},t.prototype.getManifest=function(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:t=nW(e,SK),n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,WA(t).json];case 2:return n=i.sent(),[3,4];case 3:return i.sent(),[3,4];case 4:return[2,n]}}))}))},t}(xA),PK=function(e){function t(t){var n=e.call(this,t)||this;return n.requestThemePreview=mc(n.previewTheme,100,!0),n.initialTheme=t.customCss.theme,n.setInstructions([{command:"â†‘â†“",purpose:Qf.plugins.commandPalette.instructionNavigate()},{command:"â†µ",purpose:Qf.plugins.commandPalette.instructionUse()},{command:"esc",purpose:Qf.plugins.commandPalette.instructionDismiss()}]),n.scope.register(null,"Tab",(function(){return!1})),n.scope.register(null,"Enter",(function(e){if(!e.isComposing)return n.selectActiveSuggestion(e),!1})),n}return f(t,e),t.prototype.getItems=function(){var e=this.app.customCss,t=[];for(var n in t.push({name:"",display:Qf.setting.appearance.labelDefaultTheme()}),e.themes)t.push({name:n,display:n});for(var i=0,r=e.oldThemes;i<r.length;i++){n=r[i];e.themes.hasOwnProperty(n)||t.push({name:n,display:n+" (Legacy)"})}return t},t.prototype.renderSuggestion=function(t,n){e.prototype.renderSuggestion.call(this,t,n),t.item.name===this.initialTheme&&n.createSpan({cls:"flair mod-pop",text:Qf.setting.appearance.labelCurrentlyActive()})},t.prototype.getItemText=function(e){return e.display},t.prototype.onChooseItem=function(e,t){this.app.customCss.setTheme(e.name)},t.prototype.onSelectedChange=function(e,t){t&&t.instanceOf(KeyboardEvent)&&this.requestThemePreview(e.item.name)},t.prototype.previewTheme=function(e){this.isOpen&&this.app.customCss.setTheme(e)},t.prototype.onEscapeKey=function(t){e.prototype.onEscapeKey.call(this,t),this.app.customCss.setTheme(this.initialTheme)},t}(dV),IK=Qf.plugins.customCss,FK=Qf.setting.thirdPartyPlugin,OK=function(e){function t(t,n,i){var r=e.call(this,t,i)||this;r.sortOrderOptions=["download","release","alphabetical"],r.setTitle(IK.settingCommunityThemes()),r.modalEl.addClass("mod-community-theme"),r.search.setPlaceholder(IK.promptFilter()),r.sortOrder=localStorage.getItem("communityThemeSortOrder")||"download",r.onlyShowUpdates=n;var o=mL((r.imageResizeQueue=new pL).generator(),{batchSize:1,maxDelay:100});return g(r,void 0,void 0,(function(){var e,t,n,i,r,a,s,l,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:p.trys.push([0,5,6,11]),e=!0,t=M(o),p.label=1;case 1:return[4,t.next()];case 2:if(n=p.sent(),c=n.done)return[3,4];if(d=n.value,e=!1,!(i=d).isShown())return[3,3];if(i.naturalWidth>640||i.naturalHeight>320)try{r=activeDocument.createElement("canvas"),(a=r.getContext("2d")).imageSmoothingQuality="high",s=Math.min(512/i.naturalWidth,288/i.naturalHeight),r.width=Math.floor(i.naturalWidth*s),r.height=Math.floor(i.naturalHeight*s),a.drawImage(i,0,0,r.width,r.height),i.src=r.toDataURL()}catch(e){console.log("Unable to downsize theme image",e)}p.label=3;case 3:return e=!0,[3,1];case 4:return[3,11];case 5:return l=p.sent(),u={error:l},[3,11];case 6:return p.trys.push([6,,9,10]),e||c||!(h=t.return)?[3,8]:[4,h.call(t)];case 7:p.sent(),p.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return[2]}}))})),r}return f(t,e),t.prototype.onClose=function(){e.prototype.onClose.call(this),localStorage.setItem("communityThemeSortOrder",this.sortOrder)},t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){return y(this,(function(t){return this.onlyShowUpdates?(this.currentModeToggleSetting.settingEl.detach(),this.installedOnlyToggleSetting.settingEl.detach()):"system"===this.app.vault.getConfig("theme")&&(this.currentModeToggleSetting.settingEl.detach(),this.currentModeToggle.setValue(!1)),e.prototype.onOpen.call(this),[2]}))}))},t.prototype.addCustomControls=function(e){var t=this;this.currentModeToggleSetting=new NI(e).setName("obsidian"===this.app.vault.getConfig("theme")?IK.labelDarkThemeOnly():IK.labelLightThemeOnly()).addToggle((function(e){return t.currentModeToggle=e.setSmall().setValue(!0).onChange((function(){return t.update()}))}))},t.prototype.setAutoOpen=function(e){return this.selectedItemId=e,this},t.prototype.loadItems=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,v,g,b,w,k,C,M,E,S;return y(this,(function(y){switch(y.label){case 0:e=this.app.customCss,t={},n={},i=DK(),r=AK(),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,i];case 2:for(o=y.sent(),a=0,s=o;a<s.length;a++)l=s[a],t[l.name]=l;return[3,4];case 3:return c=y.sent(),console.error(c),[3,4];case 4:if(0===Object.keys(t).length)throw new Error(IK.msgLoadError());y.label=5;case 5:return y.trys.push([5,7,,8]),[4,r];case 6:return n=y.sent(),[3,8];case 7:return u=y.sent(),console.error(u),[3,8];case 8:for(b in h=function(e){return n[e]?n[e].download:0},(d={})[""]=this.addThemeCard({name:"",author:"Obsidian",modes:["dark","light"],screenshot:e.isDarkMode()?"dark.png":"light.png",repo:"obsidianmd/obsidian-releases",downloads:0}),e.themes)p=e.themes[b],g=t[b]||{},d[b]=this.addThemeCard(m(m(m({name:b,author:"",modes:["dark","light"],screenshot:"",repo:""},g),p),{downloads:h(b)}));for(f=0,v=e.oldThemes;f<v.length;f++)b=v[f],e.themes.hasOwnProperty(b)||(g=t[b]||{},d[b]=this.addThemeCard(m(m({name:b,author:"",modes:["dark","light"],screenshot:"",repo:""},g),{downloads:h(b)})));for(b in t)d.hasOwnProperty(b)||(w=t[b],k=w.name,C=w.author,M=w.repo,E=w.modes,S=w.screenshot,w.legacy||(d[b]=this.addThemeCard({name:k,author:C,repo:M,modes:E,screenshot:S,downloads:h(b)})));return[2,d]}}))}))},t.prototype.addThemeCard=function(e){var t=this,n=e.name,i=e.author,r=e.repo,o=e.modes,a=e.screenshot,s=e.downloads,l=createDiv("community-item");return l.addEventListener("click",(function(){return t.selectItem(n)})),{name:n,author:i,repo:r,modes:o,screenshot:a,downloads:s,el:l,nameEl:null,authorEl:null,updateIconEl:null,updated:0,init:!1}},t.prototype.updateItems=function(){var e=this,t=this.items,n=this.app.customCss,i=this.search.getValue().trim().toLowerCase(),r=this.installedOnlyToggle.getValue(),o=this.onlyShowUpdates,a=!o&&this.currentModeToggle.getValue(),s=new Set(n.oldThemes.concat(Object.keys(n.themes)).concat("")),l=n.isDarkMode()?"dark":"light",c=i.split(" "),u=[],h=null;for(var d in t){if(t.hasOwnProperty(d))if(""===(k=t[d]).name&&(h=k),(!r||s.has(k.name))&&(!a||k.modes.contains(l))&&(!o||n.updates.hasOwnProperty(k.name)))if(k.matches=null,k.score=0,""===i)u.push(k);else{var p=k.name,f=k.author;if(!p)continue;f=f||"";var m=p.toLowerCase()+f.toLowerCase();k.matches=UL(c,m),k.matches&&(u.push(k),k.score=RL(k.matches,m.length,i.length,0))}}this.sortItems(u),h&&u.contains(h)&&(u.remove(h),u.unshift(h)),this.renderQueue.clear();for(var v=0,g=function(t){var i=function(){var i=t.el,r=t.nameEl,o=t.authorEl,a=t.updateIconEl,l=t.name,c=t.author,u=t.matches,h=""===l;if(!t.init){var d=t.downloads,p=t.repo,f=t.screenshot;if(r=t.nameEl=i.createDiv("community-item-name"),o=t.authorEl=i.createDiv("community-item-author"),a=t.updateIconEl=i.createDiv("community-item-badge mod-update"),!h&&d){var m=i.createDiv("community-item-downloads");m.createSpan({},(function(e){mx(e,"lucide-download-cloud")})),m.createSpan({cls:"community-item-downloads-text",text:d.toLocaleString()})}if(p&&f){var v=i.createEl("img",{cls:"community-item-screenshot",attr:{alt:l,loading:"lazy"}});v.crossOrigin="anonymous",v.style.opacity="0",v.src=nW(p,f),v.addEventListener("load",(function(){v.style.opacity="",(v.naturalWidth>640||v.naturalHeight>320)&&e.imageResizeQueue.add(v)}))}else i.createDiv("community-item-screenshot mod-unavailable",(function(e){mx(e.createDiv("placeholder-icon"),"lucide-camera-off")}));t.init=!0}var g=s.has(l),y=n.theme===l&&(g||h);i.toggleClass("mod-active",y),r.empty(),h&&(l=Qf.setting.appearance.labelDefaultTheme()),jL(r,l,u),y?r.createSpan({cls:"flair mod-pop",text:Qf.setting.appearance.labelCurrentlyActive()}):n.oldThemes.contains(l)&&!n.themes.hasOwnProperty(l)?r.createSpan({cls:"flair",text:IK.labelLegacy()}):(g||h)&&r.createSpan({cls:"flair",text:IK.labelInstalled()}),o.empty(),c&&(o.setText(FK.labelByAuthor()),jL(o,c,u,-l.length)),n.updates.hasOwnProperty(t.name)?(a.firstChild||(mx(a,"lucide-alert-triangle"),Rx(a,IK.labelUpdateAvailable())),a.show()):a.hide(),i.show()};t.el.hide(),v<20?i():y.renderQueue.add(i),v++},y=this,b=0,w=u;b<w.length;b++){var k;g(k=w[b])}var C=Qf.nouns.themeWithCount({count:u.length});return this.searchSummaryEl.setText(IK.labelSearchSummary({themeCount:C})),u},t.prototype.showItem=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w,k,C,M,E,S,x,T,D,A,L=this;return y(this,(function(P){switch(P.label){case 0:return n=(t=this).app,i=t.detailsEl,r=n.customCss,o=e.name,a=e.repo,s=""===o,l=r.isThemeInstalled(o),c=r.theme===o&&(s||l),u=r.oldThemes.contains(o)&&!r.themes.hasOwnProperty(o),s&&(o=Qf.setting.appearance.labelDefaultTheme()),h="",r.themes.hasOwnProperty(e.name)&&(h=r.themes[e.name].version||""),[4,r.getManifest(e.repo)];case 1:return d=P.sent(),p="",d?[4,oW(a,d)]:[3,3];case 2:p=P.sent()||d.version,P.label=3;case 3:return f=i.createDiv("community-modal-info"),m=f.createDiv({cls:"community-modal-info-name",text:o}),l&&m.createSpan({cls:"flair mod-pop",text:u?IK.labelLegacy():FK.labelInstalled()}),e.downloads&&f.createDiv("community-modal-info-downloads",(function(t){t.createSpan({},(function(e){mx(e,"lucide-download-cloud")})),t.createSpan({cls:"community-modal-info-downloads-text",text:e.downloads.toLocaleString()})})),p&&(v=f.createDiv({cls:"community-modal-info-version",text:FK.labelVersion({version:p})}),l&&h&&v.appendText(FK.labelCurrentlyInstalledVersion({version:h}))),(b=e.author||d&&d.author)&&(w=f.createDiv({cls:"community-modal-info-author",text:FK.labelByAuthor()}),d&&d.authorUrl?w.createEl("a",{href:d.authorUrl,text:b,attr:{target:"_blank",rel:"noopener"}}):w.appendText(b)),a&&!s&&(k=f.createDiv({cls:"community-modal-info-repo",text:FK.labelRepository()}),C=iW(a),k.createEl("a",{href:C,text:C,attr:{target:"_blank",rel:"noopener"}})),M=function(t){return g(L,void 0,void 0,(function(){var n,i=this;return y(this,(function(s){switch(s.label){case 0:return n=null,d?[4,oW(a,d)]:[3,2];case 1:if(!(n=s.sent()))return new JA("No appropriate version found."),[2];s.label=2;case 2:return[4,zw(t,(function(){return g(i,void 0,void 0,(function(){return y(this,(function(t){return[2,r.installTheme(e,n)]}))}))}))];case 3:return s.sent(),this.update(),[4,this.selectItem(o)];case 4:return s.sent(),[2]}}))}))},E=f.createDiv("community-modal-button-container"),c?s?E.createEl("button",{text:Qf.setting.appearance.labelCurrentlyActive(),attr:{disabled:!0}}):E.createEl("button",{text:IK.labelStopUse()}).addEventListener("click",(function(){return g(L,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return r.setTheme(""),this.update(),[4,this.selectItem(o)];case 1:return e.sent(),[2]}}))}))})):(S=E.createEl("button",{cls:"mod-cta",text:s||l?IK.labelUse():IK.labelInstallAndUse()})).addEventListener("click",(function(){return g(L,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return s||l?[3,2]:[4,M(S)];case 1:t.sent(),t.label=2;case 2:return r.setTheme(e.name),this.update(),[4,this.selectItem(o)];case 3:return t.sent(),[2]}}))}))})),!s&&l&&(r.updates.hasOwnProperty(e.name)||sL(h,p)?(x=E.createEl("button",{cls:"mod-cta",text:IK.labelUpdate()})).addEventListener("click",(function(){return g(L,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,M(x)];case 1:return e.sent(),this.update(),[4,this.selectItem(o)];case 2:return e.sent(),[2]}}))}))})):d||E.createEl("button",{text:Qf.setting.appearance.buttonCheckForUpdates()}).addEventListener("click",(function(){return g(L,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,r.checkForUpdate(e)];case 1:return t.sent()?[3,2]:(new JA(IK.msgNoUpdatesFound()),[3,4]);case 2:return[4,this.selectItem(o)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}))),r.isThemeInstalled(o)&&E.createEl("button",{text:FK.labelUninstall()}).addEventListener("click",(function(){return g(L,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,r.removeTheme(o)];case 1:return e.sent(),this.update(),[4,this.selectItem(o)];case 2:return e.sent(),new JA(IK.msgDeletedTheme({title:o})),[2]}}))}))})),s?(T="\nA minimalistic theme handcrafted by Stephan Ango. The theme is designed to feel native across all platforms, while prioritizing **accessibility** and a _clear_ visual language.\n\nThe theme is highly customizable and provides a new level of cohesiveness to the app.\n",[3,7]):[3,4];case 4:return P.trys.push([4,6,,7]),[4,WA(nW(a,"README.md")).text];case 5:return T=P.sent(),[3,7];case 6:return P.sent(),T=IK.labelNoReadme(),[3,7];case 7:return f.createEl("hr"),D=f.createDiv("community-modal-readme markdown-rendered"),A=bS(pS(T)),D.appendChild(qT(A)),sW(D,a),e.el&&!Zl.isPhone&&e.el.scrollIntoView({behavior:"smooth",block:"nearest"}),[2]}}))}))},t}(mK);const BK=OK;function NK(e){if(e.deltaY){var t=e.currentTarget;Math.abs(e.deltaX)>Math.abs(e.deltaY)?t.scrollLeft+=e.deltaX:t.scrollLeft+=e.deltaY,e.preventDefault()}}var RK=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.type="tabs",i.children=[],i.parent=null,i.allowSingleChild=!0,i.autoManageDOM=!1,i.tabHeaderEls=[],i.currentTab=0,i.hasLockedTabWidths=!1,i.isStacked=!1,i.containerEl.addClass("workspace-tabs");var r=i.tabHeaderContainerEl=i.containerEl.createDiv("workspace-tab-header-container"),o=i.tabsInnerEl=r.createDiv("workspace-tab-header-container-inner"),a=i.tabsContainerEl=i.containerEl.createDiv("workspace-tab-container");return i.containerEl.on("click",".workspace-tab-header",(function(e,t){var n=i.tabHeaderEls.indexOf(t);if(-1!==n){i.selectTabIndex(n);var r=i.children[n];r instanceof VK&&i.workspace.setActiveLeaf(r,{focus:!0})}})),o.addEventListener("wheel",NK,{passive:!1}),window.frameDom&&QR(r),r.addEventListener("mouseleave",(function(){i.unlockTabWidths()})),a.addEventListener("scroll",(function(){return i.onContainerScroll()}),Aw),r.createDiv("workspace-tab-header-new-tab",(function(e){e.createSpan("clickable-icon",(function(e){Rx(e,Qf.interface.labelNewTab()),mx(e,"lucide-plus"),e.addEventListener("click",(function(){var e=new VK(i.app);i.insertChild(i.children.length,e),i.selectTabIndex(i.children.length),i.workspace.setActiveLeaf(e,{focus:!0})}))}))})),r.createDiv("workspace-tab-header-spacer"),r.createDiv("workspace-tab-header-tab-list",(function(e){e.createSpan("clickable-icon",(function(e){mx(e,"lucide-chevron-down");var t=function(t){if(!e.classList.contains("has-active-menu")){var n=(new PA).addSections(["action","close","","tablist"]);n.dom.addClass("mod-tab-list"),n.addItem((function(e){return e.setSection("action").setTitle(i.isStacked?Qf.interface.menu.unstackTabs():Qf.interface.menu.stackTabs()).setIcon("lucide-layers").onClick((function(){i.setStacked(!i.isStacked)}))})).addItem((function(e){return e.setSection("close").setTitle(Qf.interface.menu.closeAll()).setIcon("lucide-x").onClick((function(){for(var e=0,t=i.children.slice();e<t.length;e++){var n=t[e];n.pinned||n.detach()}}))})),i.workspace.trigger("tab-group-menu",n,i);for(var r=function(e){if(!(e instanceof VK))return"continue";var t=e,r=e.view;if(!r)return"continue";n.addItem((function(e){return e.setSection("tablist").setTitle(r.getDisplayText()).setIcon(r.getIcon()).onClick((function(){i.workspace.setActiveLeaf(t)}))}))},o=0,a=i.children;o<a.length;o++){r(a[o])}var s=e.getBoundingClientRect();n.setParentElement(e).showAtPosition({x:s.x,y:s.bottom,width:s.width,overlap:!0,left:!0})}};e.addEventListener("click",t),e.addEventListener("contextmenu",t)}))})),i.app.dragManager.handleDrop(r,(function(e,t,n){if("file"===t.type||"files"===t.type||"link"===t.type||"bookmarks"===t.type){var r=i.getTabInsertLocation(e.clientX),o=r.rect,a=r.index,s=r.droppedIndex;if("link"===t.type){if(null!==s)if((l=i.children[s]).canNavigate())return n||(i.workspace.setActiveLeaf(l),l.openLinkText(t.linktext,t.sourcePath,{active:!0})),{hoverEl:l.tabHeaderEl,hoverClass:"is-highlighted",action:Qf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"};if(!n){var l=new VK(i.app);i.insertChild(a,l),l.openLinkText(t.linktext,t.sourcePath,{active:!0})}}else if("bookmarks"===t.type){var c=i.app.internalPlugins.getEnabledPluginById("bookmarks"),u=t.items.map((function(e){return e.item})).filter((function(e){return"file"===e.type||"graph"===e.type}));if(c){if(null!==s){if(1!==u.length)return;if((l=i.children[s]).canNavigate())return n||(i.workspace.setActiveLeaf(l),c.openBookmarkInLeaf(u[0],l,{active:!0})),{hoverEl:l.tabHeaderEl,hoverClass:"is-highlighted",action:Qf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"}}else if(0===u.length)return;if(!n){for(var h=[],d=0;d<u.length;d++){var p=new VK(i.app);i.insertChild(a,p),a++,h.push(p)}g(i,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:e=0,n.label=1;case 1:return e<u.length?(t=h[e],[4,c.openBookmarkInLeaf(u[e],t,{active:!0})]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return this.workspace.setActiveLeaf(h.last(),{focus:!0}),[2]}}))}))}}}else{var f=("files"===t.type?t.files:[t.file]).filter((function(e){return e instanceof ww}));if(0===f.length)return;if(1===f.length&&null!==s)if((l=i.children[s]).canNavigate())return n||(i.workspace.setActiveLeaf(l),l.openFile(f[0],{active:!0})),{hoverEl:l.tabHeaderEl,hoverClass:"is-highlighted",action:Qf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"};if(!n){var m=[];for(d=0;d<f.length;d++){p=new VK(i.app);i.insertChild(a,p),a++,m.push(p)}g(i,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<f.length?[4,m[e].openFile(f[e],{active:!1})]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return this.workspace.setActiveLeaf(m.last(),{focus:!0}),[2]}}))}))}}return i.app.dragManager.showOverlay(e.doc,o),{action:Qf.interface.dragAndDrop.openAsTab(),dropEffect:"copy"}}})),new ResizeObserver(i.updateSlidingTabs.bind(i)).observe(i.tabsContainerEl),i}return f(t,e),t.createFrom=function(e,n){var i=new t(e);return i.insertChild(0,n),i},t.prototype.setStacked=function(e){Zl.canStackTabs||(e=!1),this.isStacked!==e&&(this.isStacked=e,this.containerEl.toggleClass("mod-stacked",e),this.children.length>0&&(this.updateTabDisplay(),this.scrollIntoView(this.currentTab),this.workspace.requestUpdateLayout()))},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return this.currentTab>0&&(t.currentTab=this.currentTab),this.isStacked&&(t.stacked=!0),t},t.prototype.selectTabIndex=function(e){var t;e=Math.clamp(e,0,this.children.length-1),this.currentTab!==e&&(this.currentTab=e,this.updateTabDisplay(),this.isStacked&&(null===(t=this.children[this.currentTab])||void 0===t||t.containerEl.removeClass("is-hidden"),this.scrollIntoView(this.currentTab)),this.workspace.requestSaveLayout(),this.workspace.requestResize())},t.prototype.selectTab=function(e){var t=this.children.indexOf(e);-1!==t&&this.selectTabIndex(t)},t.prototype.updateTabDisplay=function(){var e=this,t=e.isStacked,n=e.currentTab,i=e.tabsInnerEl,r=e.tabsContainerEl,o=e.children;if(0!==o.length){(n=Math.clamp(n,0,o.length-1))!==this.currentTab&&(this.currentTab=n,this.workspace.requestSaveLayout(),this.workspace.requestResize());for(var a=[],s=[],l=0,c=o;l<c.length;l++){var u=(I=c[l]).tabHeaderEl;a.push(u),t&&(s.push(u),I.loadIfDeferred()),s.push(I.containerEl)}this.tabHeaderEls=a;for(var h=new Set(s),d=0,p=Array.from(r.children);d<p.length;d++){var f=p[d];h.has(f)||tk(f)}for(var m=0,v=o;m<v.length;m++){(f=(I=v[m]).containerEl).parentNode!==r&&tk(f)}if(t)for(var g=r.firstChild,y=new Set,b=0;b<s.length;b++){if((f=s[b]).parentNode===r){for(;g&&(!h.has(g)||y.has(g));)g=g.nextSibling;g!==f?(tk(f),y.add(f)):g=g.nextSibling}}var w=null;for(b=0;b<o.length;b++){var k=b===n;(u=(I=o[b]).tabHeaderEl).toggleClass("is-active",k),I.containerEl.toggle(t||k),b===n&&(w=I),t&&yl(u)}if(t)r.setChildrenInPlace(s);else{for(var C=0,M=Array.from(r.children);C<M.length;C++){f=M[C];h.has(f)||f.detach()}for(var E=0,S=o;E<S.length;E++){(f=(I=S[E]).containerEl).parentNode!==r&&r.appendChild(f)}}if(ik(r),this.updateSlidingTabs(),!t){if(i.isShown()){for(var x=[],T=[],D=i.firstChild,A=new Set(a),L=0,P=a;L<P.length;L++){for(var I=P[L];D&&!A.has(D);){f=D;D=D.nextSibling,x.push(f)}I!==D?(I.parentNode!==i&&T.push(I),i.insertBefore(I,D)):D=D.nextSibling}for(;D;){f=D;D=D.nextSibling,x.push(f)}for(var F=0,O=T;F<O.length;F++){(V=O[F]).style.flex="",V.style.width=""}for(var B=[],N=[],R=0,H=T;R<H.length;R++){var V=H[R];B.push(V.clientWidth)}for(var z=0,q=x;z<q.length;z++){V=q[z];N.push(V.clientWidth)}var U=function(e){var t=T[e],n=B[e];yl(t,!0),t.style.flex="0 0 auto",wl(t,new ml({duration:200}).addProp("width","0",n+"px","").addProp("opacity","0","1",""),(function(){t.style.flex=""}))};for(b=0;b<T.length;b++)U(b);var _=function(e){var t=x[e],n=N[e],i=t.cloneNode(!0);t.replaceWith(i),i.style.flex="0 0 auto",wl(i,new ml({duration:200}).addProp("width",n+"px","0","").addProp("opacity","1","0",""),(function(){i.detach()}))};for(b=0;b<x.length;b++)_(b)}else i.setChildrenInPlace(a);w&&(i.style.setProperty("--animation-dur","0s"),this.getRoot()instanceof wG&&(i.scrollLeft=w.tabHeaderEl.clientWidth*n),this.containerEl.isShown()&&w.loadIfDeferred(),i.style.setProperty("--animation-dur","250ms"))}}else r.empty()},t.prototype.recomputeChildrenDimensions=function(){this.updateTabDisplay()},t.prototype.getTabInsertLocation=function(e){for(var t=this.tabHeaderEls,n=this.children,i=this.tabHeaderContainerEl.getBoundingClientRect(),r=t.length,o=null,a=0;a<n.length;a++){var s=n[a].tabHeaderEl.getBoundingClientRect(),l=s.x,c=s.right;if(a===n.length-1||e<=c){i={x:l,y:s.y,width:10,height:s.height},r=a;var u=(l+c)/2;Math.abs(e-u)/(c-l)<.25&&(o=a),e>u&&(r++,i.x=c);break}}return i.x-=5,{rect:i,index:r,droppedIndex:o}},t.prototype.insertChild=function(t,n){e.prototype.insertChild.call(this,t,n),n instanceof VK&&(n.updateHeader(),yl(n.tabHeaderEl)),this.unlockTabWidths()},t.prototype.removeChild=function(t){var n=this.children.indexOf(t),i=this.currentTab,r=this.children[i];t.tabHeaderEl.removeClass("is-active"),1===this.children.length&&(this.workspace.lastTabGroupStacked=this.isStacked),e.prototype.removeChild.call(this,t),this.children.length>0&&n===i?(this.currentTab=Math.max(0,n-1),this.workspace.onLayoutChange(this)):this.currentTab=this.children.indexOf(r)},t.prototype.lockTabWidths=function(){if(this.tabHeaderContainerEl.isShown()&&!this.isStacked){this.hasLockedTabWidths=!0;for(var e=[],t=0,n=this.children;t<n.length;t++){var i=n[t];e.push(i.tabHeaderEl.clientWidth)}for(var r=0;r<this.children.length;r++)this.children[r].tabHeaderEl.style.width=e[r]+"px"}},t.prototype.unlockTabWidths=function(){if(this.hasLockedTabWidths)if(this.hasLockedTabWidths=!1,this.tabHeaderContainerEl.isShown()){for(var e=[],t=0,n=this.children;t<n.length;t++){var i=n[t];e.push(i.tabHeaderEl.clientWidth)}for(var r=0;r<this.children.length;r++){wl(this.children[r].tabHeaderEl,new ml({duration:250}).addProp("width",e[r]+"px",""))}}else for(var o=0,a=this.children;o<a.length;o++){(i=a[o]).tabHeaderEl.style.width=""}},t.prototype.updateSlidingTabs=function(){var e=this,t=e.isStacked,n=e.children,i=e.tabsContainerEl;if(t){for(var r=0,o=[],a=0;a<n.length;a++){var s=(m=n[a]).tabHeaderEl.offsetWidth;o.push(s),r+=s}var l=i.clientWidth,c=Math.max(300,l-r),u=c/n.length,h=0,d=r;for(a=0;a<n.length;a++){(m=n[a]).tabHeaderEl.style.left=h+"px",h+=o[a],d-=o[a],m.tabHeaderEl.style.right=d+"px",m.containerEl.style.left=h+"px",m.containerEl.style.minWidth=u+"px",m.containerEl.style.maxWidth=c+"px"}this.onContainerScroll()}else for(var p=0,f=this.children;p<f.length;p++){var m;(m=f[p]).tabHeaderEl.style.left="",m.tabHeaderEl.style.right="",m.containerEl.style.left="",m.containerEl.style.minWidth="",m.containerEl.style.maxWidth=""}},t.prototype.onContainerScroll=function(){var e=this,t=e.isStacked,n=e.children,i=e.currentTab,r=e.tabsContainerEl;if(t){for(var o=[],a=[],s=0;s<n.length;s++){var l=n[s];o.push(l.tabHeaderEl.offsetWidth),a.push(l.containerEl.offsetWidth)}var c=r.scrollLeft,u=c+r.clientWidth,h=0;for(s=0;s<n.length;s++){var d=h+o[s],p=d+a[s];h=p;var f=s!==i&&(p<=c||d>=u);n[s].containerEl.toggleClass("is-hidden",f)}}},t.prototype.scrollIntoView=function(e){var t=this.children,n=this.tabsContainerEl,i=t[e];if(i){for(var r=0,o=0,a=0,s=0;s<t.length;s++){var l=t[s],c=l.tabHeaderEl.offsetWidth;s<=e?(r+=c,a+=c,s<e&&(a+=l.containerEl.offsetWidth)):o+=c}var u=a-r,h=a+i.containerEl.offsetWidth-n.clientWidth+o,d=n.scrollLeft;d<h?n.scrollTo({behavior:"smooth",left:h}):d>u&&n.scrollTo({behavior:"smooth",left:u})}},t}(yG),HK=function(){function e(e){this.owner=e,this.backHistory=[],this.forwardHistory=[]}return e.prototype.updateState=function(e){return g(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=e.state,n=e.eState,t.popstate=!0,[4,this.owner.setViewState(t,n)];case 1:return i.sent(),this.owner.trigger("history-change"),[2]}}))}))},e.prototype.forward=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){return[2,this.go(1)]}))}))},e.prototype.back=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){return[2,this.go(-1)]}))}))},e.prototype.pushState=function(e){var t=this.backHistory;t.push(e),t.length>20&&t.unshift(),this.forwardHistory=[],this.owner.trigger("history-change")},e.prototype.go=function(e){return g(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:if(this.owner.working)return new JA(Qf.interface.msgTabBusy()),[2];for(t=this.owner.getHistoryState(),n=t;e>0&&(i=this.forwardHistory.pop());)this.backHistory.push(n),n=i,e--;for(;e<0&&(i=this.backHistory.pop());)this.forwardHistory.push(n),n=i,e++;return n===t?[3,2]:[4,this.updateState(n)];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.serialize=function(){return{backHistory:w([],this.backHistory,!0),forwardHistory:w([],this.forwardHistory,!0)}},e.prototype.deserialize=function(e){e&&(e.backHistory&&(this.backHistory=e.backHistory),e.forwardHistory&&(this.forwardHistory=e.forwardHistory),this.owner.trigger("history-change"))},e}(),VK=function(e){function t(t,n){var i=e.call(this,t.workspace,n)||this;i.type="leaf",i.activeTime=0,i.history=new HK(i),i.hoverPopover=null,i.tabHeaderEl=null,i.tabHeaderInnerIconEl=null,i.tabHeaderInnerTitleEl=null,i.tabHeaderStatusContainerEl=null,i.tabHeaderStatusPinEl=null,i.tabHeaderStatusLinkEl=null,i.tabHeaderCloseEl=null,i.group=null,i.pinned=!1,i.width=0,i.height=0,i.resizeObserver=null,i.working=!1,i.app=t;var r=i.containerEl;r.addClass("workspace-leaf"),r.addEventListener("focusin",(function(){i.app.workspace.setActiveLeaf(i)})),r.addEventListener("pointerdown",(function(){i.app.workspace.setActiveLeaf(i)}),{capture:!0});var o=function(){if(i.parent instanceof RK){var e=i.parent.children;i===e.last()?i.parent.unlockTabWidths():i.parent.lockTabWidths()}i.detach()},a=i.tabHeaderEl=createDiv("workspace-tab-header tappable");a.draggable=!0,a.createDiv("workspace-tab-header-inner",(function(e){i.tabHeaderInnerIconEl=e.createDiv("workspace-tab-header-inner-icon"),i.tabHeaderInnerTitleEl=e.createDiv("workspace-tab-header-inner-title"),i.tabHeaderStatusContainerEl=e.createDiv("workspace-tab-header-status-container"),i.tabHeaderCloseEl=e.createDiv("workspace-tab-header-inner-close-button",(function(e){mx(e,"lucide-x"),Rx(e,Qf.interface.menu.close()),e.addEventListener("click",o)}))})),a.addEventListener("dragstart",(function(e){i.workspace.onDragLeaf(e,i)})),a.addEventListener("contextmenu",(function(e){return i.onOpenTabHeaderMenu(e,a)})),a.addEventListener("mousedown",(function(e){1===e.button&&e.preventDefault()})),a.addEventListener("auxclick",(function(e){1===e.button&&o()})),a.addEventListener("mouseover",(function(e){var t;if(!e.defaultPrevented&&xc(e,a)){var n=null===(t=i.getViewState().state)||void 0===t?void 0:t.file;if(n&&String.isString(n))i.app.vault.getFileByPath(n)&&i.workspace.trigger("hover-link",{event:e,source:"tab-header",hoverParent:i,targetEl:a,linktext:n})}}));var s=mc(i.onResize.bind(i),20,!0),l=i.resizeObserver=new ResizeObserver((function(e){for(var t=0,n=e;t<n.length;t++){if(n[t].target===r){var o=r.offsetWidth,a=r.offsetHeight;return void(o===i.width&&a===i.height||(i.width=o,i.height=a,s()))}}}));return l.observe(r),i.view=i._empty=new KP(i),i.view.open(i.containerEl),i}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return this.pinned&&(t.pinned=!0),t.state=this.getViewState(),this.group&&(t.group=this.group),t},t.prototype.canNavigate=function(){return this.view.navigation&&!this.pinned},t.prototype.openFile=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return e?(t=t||{},n=this.view,i=this.app.viewRegistry.getTypeByExtension(e.extension),n&&n instanceof YP&&n.canAcceptExtension(e.extension)&&(i=n.getViewType()),i?(r=t.state||{},o=null!==(l=t.active)&&void 0!==l?l:this===this.workspace.activeLeaf,a=t.group,r.file=e.path,s={type:i,state:r,active:o,group:a},[4,this.setViewState(s,t.eState)]):(this.app.openWithDefaultApp(e.path),[2])):[2];case 1:return c.sent(),[2]}}))}))},t.prototype.openLinkText=function(e,t,n){return g(this,void 0,void 0,(function(){var i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:i=this.app,d.label=1;case 1:return d.trys.push([1,6,,7]),n=n||{},r=WS(e),o=r.path,a=r.subpath,s=i.metadataCache.getFirstLinkpathDest(o,t),l=n.state||{},c=n.eState||{},s?(a&&(c.subpath=a),[3,4]):[3,2];case 2:return u=null,o.contains("/")||(u=i.fileManager.getNewFileParent(t,e)),[4,i.fileManager.createNewFile(u,o)];case 3:s=d.sent(),l.mode="source",d.label=4;case 4:return n.state=l,n.eState=c,[4,this.openFile(s,n)];case 5:return d.sent(),[3,7];case 6:return h=d.sent(),new JA(h.message),console.error(h),[2];case 7:return[2]}}))}))},t.prototype.open=function(e){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return t=this.view,e===t?[2,e]:t?(n=t.close(),t instanceof Gj||t instanceof KP?[3,2]:[4,n]):[3,2];case 1:r.sent(),r.label=2;case 2:this.containerEl.setChildrenInPlace([this.resizeHandleEl]),e||(e=this._empty),this.view=e,r.label=3;case 3:return r.trys.push([3,5,,6]),[4,e.open(this.containerEl)];case 4:return r.sent(),[3,6];case 5:return i=r.sent(),console.error("Failed to open view",i),[3,6];case 6:return[2,e]}}))}))},t.prototype.highlight=function(){this.containerEl.addClass("is-highlighted")},t.prototype.unhighlight=function(){this.containerEl.removeClass("is-highlighted")},t.prototype.getViewState=function(){var e=this.view,t=this.pinned,n={type:e?e.getViewType():"empty",state:e?e.getState():{}};return t&&(n.pinned=!0),e&&(n.icon=e.getIcon()||void 0,n.title=e.getDisplayText().trim()||void 0),n},t.prototype.setViewState=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:if(this.working)return[2];this.working=!0,h.label=1;case 1:return h.trys.push([1,,10,11]),n=this.view,i=n?n.getViewType():"",r=n instanceof Gj,o=e.type!==i,a=void 0,!n||n instanceof KP||(a=this.getHistoryState()),s={history:!1,layout:!1,close:!1},o||r?(l=this.app.viewRegistry.getViewCreatorByType(e.type),n=l?a||r||!e.icon||void 0===e.title||this.containerEl.isShown()?l(this):new Gj(this,e.type,e.icon,e.title):"string"!=typeof e.type||"empty"===e.type?this._empty:new Kj(this,e.type),[4,this.open(n)]):[3,3];case 2:h.sent(),s.history=!0,s.layout=!0,h.label=3;case 3:c=e.state||{},h.label=4;case 4:return h.trys.push([4,6,,7]),[4,n.setState(c,s)];case 5:return h.sent(),[3,7];case 6:return u=h.sent(),console.error(u),[3,7];case 7:return s.close?[4,this.open(null)]:[3,9];case 8:h.sent(),h.label=9;case 9:return e.active&&this.workspace.setActiveLeaf(this,{focus:!0}),void 0!==e.group&&this.setGroupMember(e.group),t&&this.setEphemeralState(t),(e.popstate||c.sync||r&&!o)&&(s.history=!1),s.layout&&this.workspace.onLayoutChange(),this.updateHeader(),s.history&&a&&this.recordHistory(a),s.done&&s.done(),[3,11];case 10:return this.working=!1,[7];case 11:return[2]}}))}))},Object.defineProperty(t.prototype,"isDeferred",{get:function(){return this.view instanceof Gj},enumerable:!1,configurable:!0}),t.prototype.loadIfDeferred=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.view instanceof Gj?[4,this.view.rerender()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.rebuildView=function(){return g(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.getViewState(),t=this.getEphemeralState(),[4,this.open(null)];case 1:return n.sent(),[4,this.setViewState(e,t)];case 2:return n.sent(),[2]}}))}))},t.prototype.getEphemeralState=function(){return this.view.getEphemeralState()},t.prototype.setEphemeralState=function(e){if(e&&e.focus){var t=this.containerEl.doc.activeElement;t&&t.instanceOf(HTMLElement)&&t!==document.body&&this.containerEl!==t&&!this.containerEl.contains(t)&&(t.blur(),getSelection().removeAllRanges())}this.view.setEphemeralState(e)},t.prototype.togglePinned=function(){this.setPinned(!this.pinned)},t.prototype.setPinned=function(e){this.pinned=e,this.trigger("pinned-change",e),this.updateHeader(),this.workspace.requestSaveLayout();var t=this.group;if(t)for(var n=0,i=this.workspace.getGroupLeaves(t);n<i.length;n++){var r=i[n];r.pinned!==e&&r.setPinned(e)}},t.prototype.setGroupMember=function(e){if(e!==this){var t=null;e&&((t=e.group)||(t=oc(16),e.setGroup(t))),this.setGroup(t)}},t.prototype.setGroup=function(e){if(e!==this.group){var t=this.pinned;if(!t)for(var n=0,i=this.workspace.getGroupLeaves(e);n<i.length;n++){if(i[n].pinned){t=!0;break}}this.setPinned(t),this.group=e,this.trigger("group-change",e),this.updateHeader(),this.workspace.requestUpdateLayout()}},t.prototype.detach=function(){var t,n=null===(t=this.parent)||void 0===t?void 0:t.id,i=this.getRoot().id;e.prototype.detach.call(this);var r=this.view,o=this.resizeObserver;r&&(this.workspace.pushUndoHistory(this,n,i),r.close(),this.view=this._empty),o&&o.disconnect()},t.prototype.updateHeader=function(){var e,t,n=this;mx(this.tabHeaderInnerIconEl,this.getIcon()),this.tabHeaderInnerTitleEl.setText(this.getDisplayText()),this.group?this.tabHeaderStatusLinkEl||(this.tabHeaderStatusLinkEl=this.tabHeaderStatusContainerEl.createDiv({cls:"workspace-tab-header-status-icon mod-linked",prepend:!0},(function(e){mx(e,"lucide-link"),Rx(e,Qf.interface.menu.unlinkTab()),e.addEventListener("click",(function(){for(var e=0,t=n.workspace.getGroupLeaves(n.group);e<t.length;e++){t[e].unhighlight()}n.setGroup(null)})),e.addEventListener("mouseover",(function(){mx(e,"lucide-unlink");for(var t=0,i=n.workspace.getGroupLeaves(n.group);t<i.length;t++){i[t].highlight()}})),e.addEventListener("mouseout",(function(){mx(e,"lucide-link");for(var t=0,i=n.workspace.getGroupLeaves(n.group);t<i.length;t++){i[t].unhighlight()}}))}))):(null===(e=this.tabHeaderStatusLinkEl)||void 0===e||e.detach(),this.tabHeaderStatusLinkEl=null),this.pinned?(this.tabHeaderCloseEl.hide(),this.tabHeaderStatusPinEl||(this.tabHeaderStatusPinEl=this.tabHeaderStatusContainerEl.createDiv("workspace-tab-header-status-icon mod-pinned",(function(e){mx(e,"lucide-pin"),Rx(e,Qf.interface.menu.unpin()),e.addEventListener("click",(function(){return n.setPinned(!1)}))})))):(this.tabHeaderCloseEl.show(),null===(t=this.tabHeaderStatusPinEl)||void 0===t||t.detach(),this.tabHeaderStatusPinEl=null),Rx(this.tabHeaderEl,pc(this.getDisplayText(),100),{delay:300}),this.parent instanceof CG&&this.parent.recomputeChildrenDimensions();var i=this.view?this.view.getViewType():"";this.tabHeaderEl.setAttr("data-type",i)},t.prototype.getIcon=function(){var t=this.view.getIcon();return t||e.prototype.getIcon.call(this)},t.prototype.getDisplayText=function(){var e=this.view.getDisplayText();return e||""},t.prototype.isVisible=function(){var e;return(!Zl.isMobile||!(null===(e=this.app.mobileTabSwitcher)||void 0===e?void 0:e.isVisible))&&this.containerEl.isShown()},t.prototype.onOpenTabHeaderMenu=function(e,t){var n=this;e.preventDefault();var i=PA.forEvent(e).addSections(["title","close","pane","open","action","find","info","view","view.linked","system","","danger"]);i.setSectionSubmenu("view.linked",{title:Qf.interface.menu.openLinkedView(),icon:"lucide-link"}),Zl.isPhone&&i.addItem((function(e){return e.setSection("title").setTitle(n.view.getDisplayText()).setIcon(n.view.getIcon()).setIsLabel(!0).titleEl.addClass("u-muted")})),this.view.onTabMenu(i),this.isVisible()&&(this.view.onPaneMenu(i,this.workspace.isInSidebar(this)?"sidebar-context-menu":"tab-header"),this.app.workspace.trigger("leaf-menu",i,this)),i.setParentElement(t)},t.prototype.handleDrop=function(e,t,n){if("bookmarks"===t.type){var i=this.app.internalPlugins.getEnabledPluginById("bookmarks");if(i){var r=t.items.map((function(e){return e.item})).filter((function(e){return"file"===e.type||"graph"===e.type}));if(1!==r.length)return;n||i.openBookmarkInLeaf(r[0],this,{active:!0})}return{action:Qf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"}}if("file"===t.type||"link"===t.type)return n||(this.workspace.setActiveLeaf(this),"file"===t.type?this.openFile(t.file):this.openLinkText(t.linktext,t.sourcePath)),{action:Qf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"}},t.prototype.getHistoryState=function(){return{title:this.getDisplayText(),icon:this.getIcon(),state:this.getViewState(),eState:this.getEphemeralState()}},t.prototype.recordHistory=function(e){var t=this.view,n=this.history;if(t&&t.navigation&&!(t instanceof KP)){var i=n.backHistory.last();if(i)if(!(JSON.stringify(i.state)!==JSON.stringify(e.state)))return;n.pushState(e)}},t.prototype.onResize=function(){this.view&&this.view.onResize()},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(gG),zK=function(){function e(e,t){this.items=[],this.workspace=null,this.containerEl=null,this.ribbonItemsEl=null,this.ribbonSettingEl=null,this.workspace=e;var n=this.containerEl=createDiv("workspace-ribbon side-dock-ribbon");n.addClass("mod-".concat(t)),"left"===t&&(this.ribbonItemsEl=n.createDiv("side-dock-actions"),this.ribbonSettingEl=n.createDiv("side-dock-settings"),Zl.isMobile||Uw(n)),n.addEventListener("contextmenu",this.onContextMenu.bind(this))}return e.prototype.load=function(e){var t;if(e.hasOwnProperty("hiddenItems")){for(var n=e.hiddenItems,i=0,r=this.items;i<r.length;i++){var o=r[i];o.hidden=null!==(t=n[o.id])&&void 0!==t&&t}var a=Object.keys(n);this.items.sort((function(e,t){return a.indexOf(e.id)-a.indexOf(t.id)}))}this.onChange(!1)},e.prototype.serialize=function(){for(var e={},t=0,n=this.items;t<n.length;t++){var i=n[t];e[i.id]=i.hidden}return{hiddenItems:e}},e.prototype.addRibbonItemButton=function(e,t,n,i){var r=this,o=this.makeRibbonItemButton(t,n,i);Hc(o,o,this.ribbonItemsEl,5,(function(){return null}),(function(t){var n=0,i=0;for(n=0;n<r.items.length&&i!==t;n++)r.items[n].buttonEl&&i++;var o=r.items.find((function(t){return t.id===e}));r.items.remove(o),r.items.splice(n,0,o),r.onChange(!0)}));var a=this.items.find((function(t){return t.id===e}));return a?(a.title=n,a.icon=t,a.callback=i):(a={id:e,icon:t,title:n,callback:i,hidden:!1},this.items.push(a)),a.buttonEl=o,this.onChange(!1),o},e.prototype.removeRibbonAction=function(e){for(var t=0,n=this.items;t<n.length;t++){var i=n[t];if(i.id===e){delete i.buttonEl,delete i.callback;break}}},e.prototype.setCollapsedState=function(e){this.containerEl.toggleClass("is-collapsed",e)},e.prototype.hide=function(){this.containerEl.addClass("is-hidden")},e.prototype.show=function(){this.containerEl.removeClass("is-hidden")},e.prototype.onChange=function(e){for(var t=[],n=0,i=this.items;n<i.length;n++){var r=i[n],o=r.buttonEl;o&&(o.toggle(!r.hidden),t.push(o))}this.ribbonItemsEl.setChildrenInPlace(t),e&&this.workspace.requestSaveLayout()},e.prototype.makeRibbonItemButton=function(e,t,n){var i=createDiv("clickable-icon side-dock-ribbon-action");return i.onClickEvent(n),Rx(i,t,{delay:300,placement:"right"}),mx(i,e),i},e.prototype.onContextMenu=function(e){var t=this;if(e.target===this.containerEl){for(var n=new PA,i=function(e){if(!e.buttonEl)return"continue";n.addItem((function(n){return n.setSection("order").setTitle(e.title).setIcon(e.icon).setChecked(!e.hidden).onClick((function(){e.hidden=!e.hidden,t.onChange(!0)}))}))},r=0,o=this.items;r<o.length;r++){i(o[r])}n.addItem((function(e){return e.setSection("ribbon").setTitle(Qf.interface.optionHideRibbon()).setIcon("lucide-panel-left-close").onClick((function(){t.workspace.app.vault.setConfig("showRibbon",!1)}))})),n.showAtMouseEvent(e)}},e}(),qK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.win=window,t.doc=document,t}return f(t,e),t}(kG),UK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parent=null,t.children=[],t.type="floating",t.allowSingleChild=!0,t.autoManageDOM=!1,t}return f(t,e),t}(yG),_K=function(e){function t(t,n,i){var r=e.call(this,t,"vertical",n)||this;r.parent=null,r.children=[],r.type="window",r.size={},r.workspace=t,r.containerEl.addClass("mod-root","workspace-window"),r.component.load();var o="popup";if(i){var a=["popup"];i.size&&(i.width=Math.max(i.size.width,600),i.height=Math.max(i.size.height,600));for(var s=0,l=["x","y","width","height"];s<l.length;s++){var c=l[s];i.hasOwnProperty(c)&&(a.push("".concat(c,"=").concat(i[c])),r.size[c]=i[c])}o=a.join(",")}var u=r.win=window.open("about:blank","_blank",o);r.doc=u.document;var h=createEl("base",{href:location.href});if(u.document.head.appendChild(h),ZR(u),JR(u),u.app=r.workspace.app,Sx(u.document),p2(u),YR(u),(r.rootEl=u.document.body.createDiv("app-container")).createDiv("horizontal-main-container").createDiv("workspace").appendChild(r.containerEl),u.document.title="Obsidian",u.addEventListener("focus",(function(){activeWindow=u,activeDocument=u.document,r.onFocus()})),u.addEventListener("beforeunload",(function(){r.close()})),u.history.forward=function(){return window.history.forward()},u.history.back=function(){return window.history.back()},u.history.go=function(e){return window.history.go(e)},u.addEventListener("resize",mc((function(){r.workspace.iterateLeaves(r,(function(e){return e.onResize()})),r.workspace.requestSaveLayout(),r.updateSize()}),50)),nm(u.document),GR(u),r.cleanup=KR(u,[h]),r.component.registerEvent(r.workspace.on("quit",(function(){u.close()}))),r.component.registerEvent(r.workspace.on("layout-change",(function(){r.updateTitle()}))),i){i.maximize&&u.electronWindow.maximize();var d=i.zoom;d&&"number"==typeof d&&u.electron.webFrame.setZoomLevel(d)}else u.electron.webFrame.setZoomLevel(window.electron.webFrame.getZoomLevel());return t.trigger("window-open",r,u),r.updateSize(),r}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this),n=this.win;if(n&&!n.closed){t.x=n.screenX,t.y=n.screenY,t.width=n.outerWidth,t.height=n.outerHeight,this.updateSize();var i=this.size;i&&Object.assign(t,i);try{var r=this.win.electronWindow;t.maximize=r.isMaximized(),t.zoom=r.webContents.zoomLevel}catch(e){}}return t},t.prototype.updateSize=function(){if(this.win){var e=this.win.electronWindow;if(e&&!e.isMaximized()&&!e.isMinimized()&&!e.isFullScreen()){var t=e.getBounds();this.size={x:t.x,y:t.y,width:t.width,height:t.height}}}},t.prototype.updateTitle=function(){if(this.win){var e=this.workspace.getMostRecentLeaf(this);this.win.document.title=this.app.getAppTitle(e?e.getDisplayText().trim():"")}},t.prototype.detach=function(){this.close()},t.prototype.close=function(){e.prototype.detach.call(this),this.workspace.iterateLeaves(this,(function(e){e.detach()}));var t=this,n=t.workspace,i=t.win,r=t.component,o=t.cleanup;activeWindow===i&&(activeWindow=window,activeDocument=document),o&&(o(),this.cleanup=null),r.unload(),i&&(i.close(),n.trigger("window-close",this,i),this.win=null)},t.prototype.removeChild=function(t){e.prototype.removeChild.call(this,t),0===this.children.length&&this.close()},t}(kG),WK="workspace.json",jK="workspace-mobile.json",GK=function(){function e(e,t){this.workspace=e,this.vault=t,this.lastOpenFiles=[],t.on("create",this.onFileCreated,this),t.on("rename",this.onRename,this)}return e.prototype.load=function(e){this.lastOpenFiles=e},e.prototype.serialize=function(){return this.lastOpenFiles},e.prototype.collect=function(e){if(this.lastOpenFiles[0]!==e.path){for(var t={md:25,canvas:10,image:10,other:10},n=[e.path],i=0,r=this.lastOpenFiles;i<r.length;i++){var o=r[i];if(o!==e.path){var a=Qc(o),s="other";GT.contains(a)&&(s="md"),KT.contains(a)&&(s="canvas"),UT.contains(a)&&(s="image");var l=t[s];l<=0||(n.push(o),t[s]=l-1)}}this.lastOpenFiles=n}},e.prototype.onFileOpen=function(e,t){this.workspace.layoutReady&&t&&(this.collect(t),this.workspace.requestSaveLayout())},e.prototype.onFileCreated=function(e){this.workspace.layoutReady&&(this.collect(e),this.workspace.requestSaveLayout())},e.prototype.onRename=function(e,t){if(this.workspace.layoutReady){var n=e.path;this.lastOpenFiles=this.lastOpenFiles.map((function(e){return e===t?n:e})),this.workspace.requestSaveLayout()}},e.prototype.getLastOpenFiles=function(){return this.getRecentFiles({showMarkdown:!0,showCanvas:!0,showNonImageAttachments:!0,showImages:!0})},e.prototype.getRecentFiles=function(e){for(var t=Object.assign({showMarkdown:!0,showCanvas:!0,showNonImageAttachments:!1,showImages:!1,maxCount:10},e),n=[],i=0,r=this.lastOpenFiles;i<r.length;i++){var o=r[i],a=Qc(o);if("md"===a?t.showMarkdown&&n.push(o):"canvas"===a?t.showCanvas&&n.push(o):UT.contains(a)?t.showImages&&n.push(o):t.showNonImageAttachments&&n.push(o),n.length>=t.maxCount)break}return n},e}();function KK(){if(!Zl.isDesktopApp){var e=Qf.interface.msgDesktopOnlyFeature();throw new JA(e),new Error(e)}if(If<13){e=Qf.interface.msgUpgradeInstaller();throw new JA(e),new Error(e)}}var YK=function(e){function t(t,n){var i=e.call(this)||this;if(i.leftSplit=null,i.rightSplit=null,i.leftRibbon=null,i.rightRibbon=null,i.rootSplit=null,i.floatingSplit=null,i.activeLeaf=null,i.activeTabGroup=null,i.containerEl=null,i.layoutReady=!1,i.requestSaveLayout=mc(i.saveLayout.bind(i),1e3),i.requestResize=mc(i.onResize.bind(i),0),i.requestActiveLeafEvents=mc(i.activeLeafEvents.bind(i),0),i.requestUpdateLayout=gc(i.updateLayout),i.requestLayoutChangeEvents=mc((function(){return i.trigger("layout-change")}),10),i.mobileFileInfos=[],i.backlinkInDocument=!1,i.lastTabGroupStacked=!1,i.protocolHandlers=new Map,i.onLayoutReadyCallbacks=[],i.undoHistory=[],i.lastActiveFile=null,i._activeEditor=null,i.layoutItemQueue=[],i.handleXCallback=function(e,t){if(!i.app.vault.getConfig("uriCallbacks"))return!1;if(e.hasOwnProperty("x-success")){var n=e["x-success"],r={name:t.basename,url:i.app.getObsidianUrl(t)};Zl.isDesktopApp&&i.app.vault.adapter instanceof mu&&(r.file=i.app.vault.adapter.getFilePath(t.path));try{if(n=BA.addQuery(n,r),"file:"===new URL(n).protocol.toLowerCase())return!0;window.open(n)}catch(e){console.error(e)}return!0}return!1},i.hoverLinkSources={},i.editorExtensions=[],i.app=t,i.containerEl=n,i.scope=new Dk(t.scope,(function(){var e=i.activeLeaf;return e&&e.view&&e.view.scope?e.view.scope:null})),i.recentFileTracker=new GK(i,t.vault),i.app.scope.register([],"Escape",(function(){var e=null,t=activeDocument.activeElement;i.activeLeaf&&i.activeLeaf.view instanceof LY&&"source"===i.activeLeaf.view.currentMode.type&&i.activeLeaf.view.titleEl!==t&&i.activeLeaf.view.inlineTitleEl!==t&&!dk(t)&&!i.activeLeaf.view.editor.hasFocus()&&i.activeLeaf.view.editor.focus(),i.activeLeaf&&i.activeLeaf.view.navigation||(i.activeLeaf&&i.iterateLeaves(i.activeLeaf.getContainer(),(function(t){t.view.navigation&&(!e||e.activeTime<t.activeTime)&&(e=t)})),e||i.iterateAllLeaves((function(t){t.view.navigation&&(!e||e.activeTime<t.activeTime)&&(e=t)})),i.setActiveLeaf(e))})),t.keymap.pushScope(i.scope),i.leftRibbon=new zK(i,"left"),i.rightRibbon=new zK(i,"right"),i.leftSidebarToggleButtonEl=createDiv("sidebar-toggle-button mod-left",(function(e){Hx(e,(function(){return i.leftSplit.collapsed?Qf.interface.sidebarExpand():Qf.interface.sidebarCollapse()}),{placement:"right"}),e.createDiv("clickable-icon",(function(e){return mx(e,"sidebar-left")})),e.addEventListener("click",(function(){return i.leftSplit.toggle()})),e.addEventListener("contextmenu",(function(e){PA.forEvent(e).addItem((function(e){return e.setTitle(Qf.interface.menu.leftSidebar()).setIcon("sidebar-left").setChecked(!i.leftSplit.collapsed).onClick((function(){i.leftSplit.toggle()}))})).addItem((function(e){return e.setTitle(Qf.interface.menu.ribbon()).setIcon("lucide-panel-left-close").setChecked(i.app.vault.getConfig("showRibbon")).onClick((function(){var e=i.app.vault.getConfig("showRibbon");i.app.vault.setConfig("showRibbon",!e)}))}))}))})),i.rightSidebarToggleButtonEl=createDiv("sidebar-toggle-button mod-right",(function(e){Hx(e,(function(){return i.rightSplit.collapsed?Qf.interface.sidebarExpand():Qf.interface.sidebarCollapse()}),{placement:"left"}),e.createDiv("clickable-icon",(function(e){return mx(e,"sidebar-right")})),e.addEventListener("click",(function(){return i.rightSplit.toggle()})),e.addEventListener("contextmenu",(function(e){PA.forEvent(e).addItem((function(e){return e.setTitle(Qf.interface.menu.rightSidebar()).setIcon("sidebar-right").setChecked(!i.rightSplit.collapsed).onClick((function(){i.rightSplit.toggle()}))}))}))})),i.editorSuggest=new sK(t),window.addEventListener("resize",i.requestResize.bind(i)),window.addEventListener("popstate",(function(e){LA(),e.preventDefault()})),window.history.forward=function(){var e;return null===(e=i.activeLeaf)||void 0===e?void 0:e.history.forward()},window.history.back=function(){var e;return null===(e=i.activeLeaf)||void 0===e?void 0:e.history.back()},window.history.go=function(e){var t;return null===(t=i.activeLeaf)||void 0===t?void 0:t.history.go(e)},Zl.isLinux||window.addEventListener("mousedown",(function(e){3!==e.button&&4!==e.button||(e.preventDefault(),e.stopPropagation(),3===e.button?window.history.back():window.history.forward())}),{capture:!0}),Zl.isDesktopApp&&(window.addEventListener("focus",(function(){activeWindow=window,activeDocument=document,i.rootSplit&&i.rootSplit.onFocus()})),window.addEventListener("fullscreenchange",(function(){return i.updateFrameless()}))),window.addEventListener("copy",(function(e){if(!e.defaultPrevented&&e.target===activeDocument.body){var t=activeDocument.activeElement;i.activeLeaf&&!dk(t)&&(i.activeLeaf.view.handleCopy(e),e.defaultPrevented)||t!==activeDocument.body&&t.dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,cancelable:!0}))}})),window.addEventListener("paste",(function(e){e.defaultPrevented||!i.activeLeaf||dk(activeDocument.activeElement)||i.activeLeaf.view.handlePaste(e)})),window.addEventListener("cut",(function(e){e.defaultPrevented||!i.activeLeaf||dk(activeDocument.activeElement)||i.activeLeaf.view.handleCut(e)})),Zl.isIosApp){var r=function(e){if(0!==e.scrollTop)return e.scroll({top:0,left:0,behavior:"smooth"}),!0};window.addEventListener("statusTap",(function(){var e=document.querySelectorAll(".modal-container");if(e.length){Jw(e[e.length-1],r)}else{var t=i,n=t.activeLeaf,o=t.leftSplit,a=t.rightSplit;if(o instanceof CG&&!o.collapsed&&!o.isPinned)Jw(o.containerEl,r);else if(a instanceof CG&&!a.collapsed&&!a.isPinned)Jw(a.containerEl,r);else if(n){if(n.view instanceof LY)return void n.view.setEphemeralState({scroll:0});Jw(n.containerEl,r)}}}))}i.app.vault.on("rename",(function(e,t){var n;if(e instanceof ww){var r=function(n){var i;(null===(i=n.state.state)||void 0===i?void 0:i.file)===t&&(n.title=e.basename,n.state.state.file=e.path)},o=function(e){for(var t=0,n=e.backHistory;t<n.length;t++){var i=n[t];r(i)}for(var o=0,a=e.forwardHistory;o<a.length;o++){i=a[o];r(i)}};i.iterateAllLeaves((function(e){o(e.history)}));for(var a=0,s=i.undoHistory;a<s.length;a++){var l=s[a];(null===(n=l.state.state)||void 0===n?void 0:n.file)===t&&(l.state.state.file=e.path),o(l.leafHistory)}}}));var o=function(e){for(var t=function(e){if(e.view instanceof Gj)return"continue";var t=e.getViewState();g(i,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,e.open(new KP(e))];case 1:return n.sent(),[4,e.setViewState(t)];case 2:return n.sent(),[2]}}))}))},n=0,r=i.getLeavesOfType(e);n<r.length;n++){t(r[n])}};i.app.viewRegistry.on("view-registered",o),i.app.viewRegistry.on("view-unregistered",o),i.on("file-menu",(function(e,t,n,r){t instanceof ww&&(e.addItem((function(e){return e.setSection("info").setTitle(Qf.commands.copyUrl()).setIcon("lucide-copy").onClick((function(){return i.app.copyObsidianUrl(t)}))})),e.addItem((function(e){return e.setSection("system").setTitle(Zl.isMobileApp?Qf.plugins.openWithDefaultApp.actionOpenFileMobile():Qf.plugins.openWithDefaultApp.actionOpenFile()).setIcon("lucide-arrow-up-right").onClick((function(){return i.app.openWithDefaultApp(t.path)}))}))),Zl.isDesktopApp&&e.addItem((function(e){return e.setSection("system").setTitle(Zl.isMacOS?Qf.plugins.openWithDefaultApp.actionShowInFolderMac():Qf.plugins.openWithDefaultApp.actionShowInFolder()).setIcon("lucide-arrow-up-right").onClick((function(){return i.app.showInFolder(t.path)}))})),Zl.canPopoutWindow&&t instanceof ww&&e.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewWindow()).setIcon("lucide-picture-in-picture-2").onClick((function(){return g(i,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.openPopoutLeaf().openFile(t)];case 1:return e.sent(),[2]}}))}))}))}))})),i.on("files-menu",(function(e,t){return e.addItem((function(e){return e.setSection("action").setTitle(Qf.plugins.fileExplorer.actionMoveItems({count:t.length})).setIcon("lucide-folder-tree").onClick((function(){new fK(i.app,t).open()}))}))})),i.on("markdown-viewport-menu",(function(e,n,i,r){var o=t.vault,a=o.getConfig("showLineNumber"),s=o.getConfig("readableLineLength");"source"===i&&e.addItem((function(e){return e.setSection("view").setTitle(Qf.setting.editor.optionShowLineNumber()).setIcon("lucide-list-ordered").setChecked(a).onClick((function(){return o.setConfig("showLineNumber",!a)}))})),e.addItem((function(e){return e.setSection("view").setTitle(Qf.setting.editor.optionReadableLineLength()).setIcon("lucide-ruler").setChecked(s).onClick((function(){return o.setConfig("readableLineLength",!s)}))}))}));var a=function(){var e=[],t=!1;return i.iterateAllLeaves((function(n){var i=n.view;i instanceof Z_&&(i.saving&&(t=!0),i.data!==i.lastSavedData&&e.push(i.save()))})),t&&e.push(i.app.vault.adapter.promise),i.app.vault.requestSaveConfig.run(),i.requestSaveLayout.run(),e};i.on("quit",(function(e){for(var t=0,n=a();t<n.length;t++){var i=n[t];e.addPromise(i)}})),Zl.isMobileApp&&pA&&pA.addListener("appStateChange",(function(e){i.layoutReady&&!e.isActive&&a()})),i.on("editor-menu",(function(e,t,n){var r=n.file;if(r){var o=t.getCursor(),a=eC(t.getLine(o.line));null!==a&&e.addItem((function(e){return e.setTitle(Qf.interface.menu.renameHeading()).setIcon("lucide-edit-3").onClick((function(){var e=n.file;if(r===e||Pm(o,t.getCursor())){var s=n instanceof uV?n.before.length:0,l=t.cm.state,c=l.doc,u=l.selection,h=c.lineAt(u.main.from),d={start:h.from+s,end:h.to+s};new rL(i.app,t,r,d,a).open()}}))}))}})),i.on("editor-menu",(function(e,t,n){var r=n.file;if(r){var o=t.getCursor(),a=t.getClickableTokenAt(o);a&&"blockid"===a.type&&e.addItem((function(e){return e.setTitle(Qf.interface.menu.renameBlockid()).setIcon("lucide-edit-3").onClick((function(){if(r===n.file||Pm(o,t.getCursor())){var e=n instanceof uV?n.before.length:0,s={start:t.posToOffset(a.start)+e,end:t.posToOffset(a.end)+e};new oL(i.app,t,r,s,a).open()}}))}))}}));var s=i.app.commands;if(s.addCommand({id:"editor:save-file",name:Qf.commands.saveFile(),callback:function(){var e=i.app.workspace.getActiveViewOfType(Z_);e&&e.save()},hotkeys:[oA(["Mod"],"S")]}),s.addCommand({id:"editor:download-attachments",name:Qf.commands.downloadAttachments(),checkCallback:function(e){var t=i.app.workspace.getActiveFile();if(t&&"md"===t.extension)return e||i.app.fileManager.downloadAttachmentsForNote(t),!0}}),s.addCommand({id:"editor:follow-link",name:Qf.commands.followCursorLink(),icon:"lucide-link",editorCheckCallback:function(e,t,n){var i=t.getClickableTokenAt(t.getCursor());return!!i&&(e||n.editMode.triggerClickableToken(i,!1),!0)},hotkeys:[oA(["Alt"],"Enter")]}),s.addCommand({id:"editor:open-link-in-new-leaf",name:Qf.commands.openCursorLinkInNewTab(),icon:"lucide-link",editorCheckCallback:function(e,t,n){var i=t.getClickableTokenAt(t.getCursor());return!!i&&(e||n.editMode.triggerClickableToken(i,"tab"),!0)},hotkeys:[oA(["Mod"],"Enter")]}),Zl.canPopoutWindow&&s.addCommand({id:"editor:open-link-in-new-window",name:Qf.commands.openCursorLinkInNewWindow(),icon:"lucide-link",editorCheckCallback:function(e,t,n){var i=t.getClickableTokenAt(t.getCursor());return!!i&&(e||n.editMode.triggerClickableToken(i,"window"),!0)},hotkeys:[oA(["Mod","Alt","Shift"],"Enter")]}),s.addCommand({id:"workspace:toggle-pin",name:Qf.commands.togglePin(),icon:"lucide-pin",checkCallback:function(e){var t=i.activeLeaf;return!(!(t&&t.view instanceof GP)||t.view instanceof KP)&&(e||t.togglePinned(),!0)}}),Zl.canSplit){s.addCommand({id:"editor:open-link-in-new-split",name:Qf.commands.openCursorLinkToTheRight(),icon:"lucide-link",editorCheckCallback:function(e,t,n){var i=t.getClickableTokenAt(t.getCursor());return!!i&&(e||n.editMode.triggerClickableToken(i,"split"),!0)},hotkeys:[oA(["Mod","Alt"],"Enter")]});var l=function(e,t){s.addCommand({id:"editor:focus-"+e,name:t,checkCallback:function(t){var n=i.getAdjacentLeafInDirection(i.activeLeaf,e);return!!n&&(t||(xw(),i.setActiveLeaf(n,{focus:!0})),!0)}})};l("top",Qf.commands.navigateTabAbove()),l("bottom",Qf.commands.navigateTabBelow()),l("left",Qf.commands.navigateTabLeft()),l("right",Qf.commands.navigateTabRight()),s.addCommand({id:"workspace:split-vertical",name:Qf.commands.splitRight(),icon:"lucide-separator-vertical",checkCallback:function(e){var t=i.activeLeaf;return!(!(t&&t.view instanceof GP)||i.isInSidebar(t))&&(e||i.duplicateLeaf(i.activeLeaf,"vertical"),!0)}}),s.addCommand({id:"workspace:split-horizontal",name:Qf.commands.splitDown(),icon:"lucide-separator-horizontal",checkCallback:function(e){var t=i.activeLeaf;return!!(t&&t.view instanceof GP)&&(e||i.duplicateLeaf(i.activeLeaf,"horizontal"),!0)}})}Zl.canStackTabs&&s.addCommand({id:"workspace:toggle-stacked-tabs",name:Qf.commands.toggleStackedTabs(),icon:"lucide-layers",checkCallback:function(e){var t=i.activeLeaf.parent;if(t instanceof RK){var n=t.getRoot();if(n===i.leftSplit||n===i.rightSplit)return;return e||t.setStacked(!t.isStacked),!0}}}),s.addCommand({id:"workspace:edit-file-title",name:Qf.commands.editFileTitle(),icon:"lucide-edit-3",checkCallback:function(e){var t=i.getActiveFileView();if(t&&t instanceof oH)return e||t.leaf.setEphemeralState({rename:"all"}),!0},hotkeys:[oA([],"F2")]}),s.addCommand({id:"workspace:copy-path",name:Qf.commands.copyPath(),icon:"lucide-copy",checkCallback:function(e){var t=i.getActiveFile();if(t)return e||(yc(t.path),new JA(Qf.interface.copied({context:"generic"}))),!0}}),s.addCommand({id:"workspace:copy-url",name:Qf.commands.copyUrl(),icon:"lucide-copy",checkCallback:function(e){var t=i.getActiveFile();if(t)return e||i.app.copyObsidianUrl(t),!0}}),s.addCommand({id:"workspace:undo-close-pane",name:Qf.commands.undoCloseTab(),icon:"lucide-undo-2",checkCallback:function(e){var t=i.undoHistory;if(t.length>0){if(!e){var n=t.shift(),r=i.activeLeaf,o=i.rootSplit;if(n.rootId&&(o=[i.rootSplit,i.floatingSplit,i.leftSplit,i.rightSplit].find((function(e){return e.id===n.rootId}))),n.parentId){var a=null;i.iterateTabs([o],(function(e){e.id===n.parentId&&(a=e)})),a&&(r=i.createLeafInTabGroup(a))}r&&"empty"===r.view.getViewType()||(r=o===i.floatingSplit?i.openPopoutLeaf():Zl.isMobile?i.createLeafInTabGroup():i.splitActiveLeaf(),n.parentId&&(r.parent.id=n.parentId)),n.leafId&&(r.id=n.leafId),n.state.active=!0,n.leafHistory&&r.history.deserialize(n.leafHistory),r.setViewState(n.state,n.eState)}return!0}},hotkeys:[oA(["Mod","Shift"],"T")]}),Zl.canExportPdf&&s.addCommand({id:"workspace:export-pdf",name:Qf.commands.exportPdf(),checkCallback:function(e){var t=i.getActiveViewOfType(LY);if(t)return e||t.printToPdf(),!0}}),s.addCommand({id:"editor:rename-heading",name:Qf.interface.menu.renameHeading(),icon:"lucide-edit-3",editorCheckCallback:function(e,t,n){var r=n.file;if(r){var o=t.getCursor(),a=eC(t.getLine(o.line));if(a){if(!e){var s=n instanceof uV?n.before.length:0,l=t.cm.state,c=l.doc,u=l.selection,h=c.lineAt(u.main.from),d={start:h.from+s,end:h.to+s};new rL(i.app,t,r,d,a).open()}return!0}}}}),Zl.canPopoutWindow&&(s.addCommand({id:"workspace:open-in-new-window",name:Qf.commands.openInNewWindow(),icon:"lucide-maximize",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.view instanceof GP)return e||i.openPopoutLeaf().setViewState(t.getViewState(),{focus:!0}),!0}}),s.addCommand({id:"workspace:move-to-new-window",name:Qf.commands.moveToNewWindow(),icon:"lucide-maximize",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.view instanceof GP)return e||i.moveLeafToPopout(t),!0}})),s.addCommand({id:"workspace:next-tab",name:Qf.commands.goToNextTab(),icon:"lucide-arrow-right",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.parent instanceof RK){if(!e){var n=t.parent,r=n.currentTab+1;r>=n.children.length&&(r=0),n.selectTabIndex(r);var o=n.children[r];o instanceof VK&&i.setActiveLeaf(o,{focus:!0})}return!0}},hotkeys:[oA(["Ctrl"],"Tab"),Zl.isMacOS?oA(["Meta","Shift"],"]"):oA(["Ctrl"],"PageDown")]});for(var c=function(e){s.addCommand({id:"workspace:goto-tab-".concat(e),name:Qf.commands.goToNthTab({n:e}),checkCallback:function(t){if(Zl.isPhone)return!1;var n=i.activeLeaf;if(n&&n.parent instanceof RK){var r=n.parent.children[e-1];if(r)return t||i.setActiveLeaf(r,{focus:!0}),!0}return!1},hotkeys:[oA(["Mod"],String(e))]})},u=0,h=[1,2,3,4,5,6,7,8];u<h.length;u++){c(h[u])}if(s.addCommand({id:"workspace:goto-last-tab",name:Qf.commands.goToLastTab(),checkCallback:function(e){var t=i.activeLeaf;if(t&&t.parent instanceof RK){var n=t.parent,r=n.children.length-1,o=n.children[r];if(o)return e||i.setActiveLeaf(o,{focus:!0}),!0}return!1},hotkeys:[oA(["Mod"],"9")]}),s.addCommand({id:"workspace:previous-tab",name:Qf.commands.goToPrevTab(),icon:"lucide-arrow-left",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.parent instanceof RK){if(!e){var n=t.parent,r=n.currentTab-1;r<0&&(r=n.children.length-1),n.selectTabIndex(r);var o=n.children[r];o instanceof VK&&i.setActiveLeaf(o,{focus:!0})}return!0}},hotkeys:[oA(["Ctrl","Shift"],"Tab"),Zl.isMacOS?oA(["Meta","Shift"],"["):oA(["Ctrl"],"PageUp")]}),s.addCommand({id:"workspace:new-tab",name:Qf.commands.newTab(),checkCallback:function(e){var t=i.getMostRecentLeaf();if(t&&t.parent instanceof RK){if(!e){var n=t.parent,r=new VK(i.app),o=n.children.length;n.insertChild(o,r),n.selectTabIndex(o),i.setActiveLeaf(r,{focus:!0})}return!0}},hotkeys:[oA(["Mod"],"T")]}),s.addCommand({id:"workspace:close",name:Qf.commands.closeActiveTab(),icon:"lucide-x",checkCallback:function(e){var t=i.activeLeaf;if(!t||!i.isInSidebar(t)||t.view instanceof GP||(t=i.getMostRecentLeaf(i.rootSplit)),t)return e||t.detach(),!0},hotkeys:[oA(["Mod"],"W")]}),Zl.canPopoutWindow&&s.addCommand({id:"workspace:close-window",name:Qf.interface.window.closeWindow(),icon:"lucide-x",callback:function(){activeWindow.close()},hotkeys:[oA(["Mod","Shift"],"W")]}),s.addCommand({id:"workspace:close-others",name:Qf.commands.closeOtherTabs(),icon:"lucide-x",checkCallback:function(e){var t=i.activeLeaf,n=[];if(i.iterateLeaves(t.getContainer(),(function(e){e===t||e.pinned||n.push(e)})),!e)for(var r=0,o=n;r<o.length;r++){o[r].detach()}return n.length>0}}),s.addCommand({id:"workspace:close-tab-group",name:Qf.commands.closeTabGroup(),icon:"lucide-x",checkCallback:function(e){if(Zl.canSplit){var t=i.activeLeaf;if(t&&!i.isInSidebar(t)){if(!e)for(var n=0,r=t.parent.children.slice();n<r.length;n++){var o=r[n];o.pinned||o.detach()}return!0}}}}),s.addCommand({id:"workspace:close-others-tab-group",name:Qf.commands.closeOthersInTabGroup(),icon:"lucide-x",checkCallback:function(e){if(Zl.canSplit){var t=i.activeLeaf;if(t&&!i.isInSidebar(t)&&t&&t.parent.children.length>1){if(!e)for(var n=0,r=t.parent.children.slice();n<r.length;n++){var o=r[n];o===t||o.pinned||o.detach()}return!0}}}}),Zl.isDesktopApp&&s.addCommand({id:"workspace:show-trash",name:Qf.commands.showTrash(),checkCallback:function(e){if("local"===t.vault.getConfig("trashOption"))return e||t.showInFolder(".trash"),!0}}),i.registerObsidianProtocolHandler("open",(function(e){if(e.file){var t=WS(e.file),n=t.path,r=t.subpath;n=tu(n);var o=i.app.metadataCache.getFirstLinkpathDest(n,"");if(o){var a=i.getLeaf(),s={};r&&(s.subpath=r),a.openFile(o,{active:!0,eState:s}),new JA(Qf.interface.msgOpenFileThroughUri({path:o.path}))}else new JA(Qf.interface.msgFileNotFoundThroughUri({name:e.file}))}})),i.registerObsidianProtocolHandler("search",(function(e){var t=i.app.internalPlugins.getEnabledPluginById("global-search");t&&t.openGlobalSearch(e.query)})),i.registerObsidianProtocolHandler("new",(function(e){return g(i,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g;return y(this,(function(y){switch(y.label){case 0:return t=null,n=this.app,i=n.vault,r=n.fileManager,o=n.metadataCache,a=e.overwrite,s=e.append||e.prepend||a,e.file?(l=e.file,/\.\.[\/\\]/.test(l)?[2]:(s&&((t=o.getFirstLinkpathDest(l,""))||(c=i.getAbstractFileByPathInsensitive(l))instanceof ww&&(t=c)),t?[3,7]:(u=Yc(l),m=void 0,""!==u?[3,1]:(m=i.getRoot(),[3,3])))):[3,8];case 1:return(m=i.getAbstractFileByPathInsensitive(u))?[3,3]:[4,i.createFolder(u)];case 2:y.sent(),m=i.getAbstractFileByPathInsensitive(u),y.label=3;case 3:if(!(m instanceof kw))return[2];y.label=4;case 4:return y.trys.push([4,6,,7]),[4,r.createNewFile(m,Kc(l))];case 5:return t=y.sent(),[3,7];case 6:return h=y.sent(),new JA(h.toString()),[2];case 7:return[3,12];case 8:if(d=(d=e.name||"").replace(/[\/\\]/,""),s&&(t=o.getFirstLinkpathDest(d,"")),t)return[3,12];p="",(f=this.getActiveFile())&&(p=f.path),m=r.getNewFileParent(p,d),y.label=9;case 9:return y.trys.push([9,11,,12]),[4,r.createNewFile(m,d)];case 10:return t=y.sent(),[3,12];case 11:return v=y.sent(),new JA(v.toString()),[2];case 12:return t?(g=e.content,e.clipboard?[4,navigator.clipboard.readText()]:[3,14]):[2];case 13:g=y.sent(),y.label=14;case 14:return g?e.append||e.prepend?[4,r.insertIntoFile(t,g,e.prepend?"prepend":"append")]:[3,16]:[3,18];case 15:return y.sent(),[3,18];case 16:return[4,i.modify(t,g)];case 17:y.sent(),y.label=18;case 18:return e.silent?[3,20]:[4,this.getLeaf().openFile(t,{active:!0,state:{mode:"source"},eState:{rename:"all"}})];case 19:y.sent(),y.label=20;case 20:return this.handleXCallback(e,t),[2]}}))}))})),i.registerObsidianProtocolHandler("show-plugin",(function(e){var t=i.app;if(!t.plugins.isEnabled()){var n=t.setting;return n.open(),void n.openTabById("community-plugins")}e.id&&new CK(t).setAutoOpen(e.id).setDimBackground(!0).open()})),i.registerObsidianProtocolHandler("show-theme",(function(e){e.name&&new BK(i.app,!1).setAutoOpen(e.name).setDimBackground(!0).open()})),i.registerObsidianProtocolHandler("show-release-notes",(function(e){e.version&&i.app.showReleaseNotes(e.version)})),i.registerObsidianProtocolHandler("debug-info",(function(e){new lK(t).open()})),i.registerObsidianProtocolHandler("publish-sites",(function(){return g(i,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.app.internalPlugins.getPluginById("publish")).enabled||e.enable(!1),[4,e.instance.viewSites()];case 1:return t.sent(),[2]}}))}))})),i.registerObsidianProtocolHandler("sync-setup",(function(e){i.onLayoutReady((function(){if(e.vault){var t=i.app.internalPlugins.getPluginById("sync");t.enabled||t.enable(!1),t.instance.connectToVault(JSON.parse(e.vault))}else i.app.openVaultChooser()}))})),i.registerObsidianProtocolHandler("vault-setup",(function(){return g(i,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return[4,this.app.vault.create(Qf.interface.starterContent.welcomeFilename()+".md",Qf.interface.starterContent.welcomeFileContent())];case 1:return e=i.sent(),t=this.getLeaf(),[4,(n=this.getLeaf("split")).setViewState({type:GG})];case 2:return i.sent(),n.view instanceof KG&&n.view.dataEngine.setOptions({close:!0}),t.openFile(e,{active:!0}),[2]}}))}))})),i.registerObsidianProtocolHandler("hook-get-address",(function(e){if(i.app.vault.getConfig("uriCallbacks")){var t=i.getActiveFile();if(t){if(!i.handleXCallback(e,t)){var n=i.app.getObsidianUrl(t);yc("[".concat(t.basename,"](").concat(n,")"))}}else e.hasOwnProperty("x-error")&&window.open(BA.addQuery(e["x-error"],{errorCode:"NotFound",errorMessage:"No file is open at the moment"}))}})),uA){var d=0;pA.addListener("backButton",(function(){var e;if(MA.length>0)MA.last().close();else{var t=i.leftSplit,n=i.rightSplit;if(t.collapsed||t instanceof CG&&t.isPinned)if(n.collapsed||n instanceof CG&&n.isPinned){var r=null===(e=i.activeLeaf)||void 0===e?void 0:e.history;if(r&&r.backHistory.length>0)r.back();else{var o=Date.now();o-d<5e3?pA.exitApp():(d=o,new JA(Qf.interface.mobile.msgBackAgainToExit(),5e3))}}else n.collapse();else t.collapse()}}))}CA(i.containerEl,(function(e){i.trigger("swipe",e)})),i.on("swipe",(function(e){if(!(e.points>1||"y"!==e.direction||e.y<e.startY)&&i.rootSplit.containerEl.contains(e.targetEl)){var n=i.app.vault.getConfig("mobilePullAction");if(n){var r=i.app.commands.findCommand(n),o=r?r.name:"Configure pull action",a=document.body.createDiv({cls:"pull-action pull-down-action",text:o});a.onClickEvent((function(){a.detach()}));var s=a.offsetHeight,l=!1;e.registerCallback({move:function(t,n){var i=(n-e.startY)/s;i=Math.clamp(i,0,1),a.toggleClass("mod-activated",1===i),a.style.transform="translateY(".concat((i-1)*s,"px)"),1!==i||l||navigator.vibrate(100),l=1===i},cancel:function(){a.detach()},finish:function(e,n,i){a.detach(),l&&(r?pW(r):new JA(Qf.setting.mobileToolbar.msgMissingQuickAction()).addButton(Qf.setting.mobileToolbar.buttonConfigure(),(function(){t.commands.executeCommandById("mobile:quick-action")})))}})}}})),i.on("swipe",(function(e){if(!(e.points<2||"x"!==e.direction)&&i.rootSplit.containerEl.contains(e.targetEl)){var t,n=e.x>e.startX;if(t=n?i.app.commands.findCommand("app:go-back"):i.app.commands.findCommand("app:go-forward")){var r=document.body.createDiv({cls:"pull-action pull-out-action",text:t.name});r.onClickEvent((function(){r.detach()})),n?r.style.left="0":r.style.right="0";var o=n?1:-1,a=r.offsetWidth,s=!1;e.registerCallback({move:function(t){var n=Math.clamp((t-e.startX)*o/a,0,1);r.toggleClass("mod-activated",1===n),r.style.transform="translateX(".concat(-(1-n)*a*o,"px)"),1!==n||s||navigator.vibrate(100),s=1===n},cancel:function(){r.detach()},finish:function(t,s,l){var c=Math.clamp((t-e.startX)*o/a,0,1);wl(r,new ml({duration:200*c}).addProp("transform",null,"translateX(".concat(-a*o,"px)"),""),(function(){r.detach()})),l*o/a>.5&&(n?i.app.commands.executeCommandById("app:go-back"):i.app.commands.executeCommandById("app:go-forward"))}})}}})),Zl.isIosApp&&i.on("css-change",(function(){return g(i,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=FI("--background-primary"))&&0!==e.a||(e=SI(getComputedStyle(document.body).backgroundColor)),e?[4,pA.setBackgroundColor({r:e.r/255,g:e.g/255,b:e.b/255})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})),i.registerHoverLinkSource("search",{display:Qf.plugins.pagePreview.labelSourceSearch(),defaultMod:!0}),i.registerHoverLinkSource("preview",{display:Qf.plugins.pagePreview.labelSourcePreview(),defaultMod:!1}),i.registerHoverLinkSource("editor",{display:Qf.plugins.pagePreview.labelSourceEditor(),defaultMod:!0}),i.registerHoverLinkSource("tab-header",{display:Qf.plugins.pagePreview.labelSourceTabHeader(),defaultMod:!0});var p=CodeMirror.getMode;return CodeMirror.getMode=function(e,t){var n=p.call(CodeMirror,e,t);return!t||n&&"null"!==n.name||(CodeMirror.getMode=p,wO.then((function(){for(var e=0,t=i.getLeavesOfType(LY.VIEW_TYPE);e<t.length;e++){var n=t[e];n.view instanceof LY&&n.view.editMode.resetSyntaxHighlighting()}}))),n},i}return f(t,e),t.prototype.loadLayout=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(d){switch(d.label){case 0:e=this.app.vault,t=Zl.isMobile?jK:WK,n={},d.label=1;case 1:return d.trys.push([1,3,,4]),r=(i=JSON).parse,[4,e.adapter.read(e.configDir+"/"+t)];case 2:return n=r.apply(i,[d.sent()]),[3,4];case 3:return d.sent(),[3,4];case 4:return n.hasOwnProperty("lastOpenFiles")&&this.recentFileTracker.load(n.lastOpenFiles),[4,this.setLayout(n)];case 5:if(d.sent(),!Zl.isDesktopApp||"Obsidian Sandbox"!==this.app.vault.getName())return[3,7];if(!((o=this.app.vault.adapter)instanceof mu)||electron.ipcRenderer.sendSync("get-sandbox-vault-path")!==o.getBasePath())return[2];for(new JA(Qf.interface.msgSandboxVault(),0),a=[],this.iterateLeaves([this.rootSplit,this.floatingSplit],(function(e){a.push(e)})),s=0,l=a;s<l.length;s++)l[s].detach();return this.updateLayout(),(c=this.app.metadataCache.getFirstLinkpathDest("Start Here",""))&&"md"===c.extension?[4,this.getLeaf().openFile(c,{active:!0,state:{mode:"source",source:!1}})]:[3,7];case 6:d.sent(),d.label=7;case 7:return this.trigger("layout-ready"),u=this.onLayoutReadyCallbacks,this.onLayoutReadyCallbacks=null,g(h,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:e=0,t=u,a.label=1;case 1:if(!(e<t.length))return[3,6];n=t[e],i=n.pluginId,r=n.callback,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,sleep(0)];case 3:return a.sent(),r(),[3,5];case 4:return o=a.sent(),console.error(o),i&&new JA(Qf.interface.msgPluginError({plugin:i})),[3,5];case 5:return e++,[3,1];case 6:return[2]}}))})),[2]}}))}))},t.prototype.clearLayout=function(){return g(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:return this.layoutReady=!1,e=[],this.iterateAllLeaves((function(t){e.push(t.open(null))})),[4,Promise.all(e)];case 1:for(r.sent(),this.leftSplit.containerEl.detach(),this.rootSplit.containerEl.detach(),this.rightSplit.containerEl.detach(),this.floatingSplit.containerEl.detach(),this.rootSplit.component.unload(),this.leftSplit.component.unload(),this.rightSplit.component.unload(),this.floatingSplit.component.unload(),t=0,n=this.floatingSplit.children.slice();t<n.length;t++)(i=n[t])instanceof _K&&i.close();return this.rootSplit=null,this.leftSplit=null,this.rightSplit=null,this.floatingSplit=null,this.activeLeaf=null,this.layoutItemQueue=[],[2]}}))}))},t.prototype.setLayout=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C,M,E,S;return y(this,(function(y){switch(y.label){case 0:return this.layoutReady=!1,t=this.app.vault,n=Zl.isMobile,(s=e.main)?(l=this,[4,this.deserializeLayout(s,"root")]):[3,2];case 1:(i=l.rootSplit=y.sent())&&"vertical"!==i.direction&&(i.setDirection("vertical"),i.recomputeChildrenDimensions()),y.label=2;case 2:return(c=e.left)?(u=this,[4,this.deserializeLayout(c,"left")]):[3,4];case 3:(r=u.leftSplit=y.sent())&&r instanceof wG&&"horizontal"!==r.direction&&(r.setDirection("horizontal"),r.recomputeChildrenDimensions()),y.label=4;case 4:return(h=e.right)?(d=this,[4,this.deserializeLayout(h,"right")]):[3,6];case 5:(o=d.rightSplit=y.sent())&&o instanceof wG&&"horizontal"!==o.direction&&(o.setDirection("horizontal"),o.recomputeChildrenDimensions()),y.label=6;case 6:return(p=e.floating)?(f=this,[4,this.deserializeLayout(p,null)]):[3,8];case 7:a=f.floatingSplit=y.sent(),y.label=8;case 8:return(m=e["left-ribbon"])&&this.leftRibbon.load(m),i?[3,11]:(i=this.rootSplit=new qK(this,"vertical"),v=new RK(this),g=new VK(this.app),v.insertChild(0,g),i.insertChild(0,v),(b=this.getLastOpenFiles()).length>0?(w=b[0],(k=t.getAbstractFileByPath(w))&&k instanceof ww?[4,g.openFile(k)]:[3,10]):[3,10]);case 9:y.sent(),y.label=10;case 10:this.setActiveLeaf(g),y.label=11;case 11:return i.containerEl.addClass("mod-root"),r||(n?(r=this.leftSplit=new MG(this)).collapse():r=this.leftSplit=new wG(this,"horizontal","left")),o||(o=this.rightSplit=n?new EG(this):new wG(this,"horizontal","right")).collapse(),a||(a=this.floatingSplit=new UK(this)),C=this.containerEl,Zl.isMobile?C.setChildrenInPlace([r.containerEl,i.containerEl,o.containerEl]):C.setChildrenInPlace([this.leftRibbon.containerEl,r.containerEl,i.containerEl,o.containerEl,this.rightRibbon.containerEl]),M=e.active,(E=this.getLeafById(M))&&this.setActiveLeaf(E,{focus:!0}),S=[],this.iterateAllLeaves((function(e){e.isVisible()&&S.push(e.loadIfDeferred())})),[4,Promise.all(S)];case 12:return y.sent(),this.layoutReady=!0,this.onLayoutChange(),this.requestActiveLeafEvents(),[2]}}))}))},t.prototype.onLayoutReady=function(e){null===this.onLayoutReadyCallbacks?e():this.onLayoutReadyCallbacks.push({pluginId:this.app.plugins.loadingPluginId,callback:e})},t.prototype.changeLayout=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.layoutReady?[4,this.clearLayout()]:[2];case 1:return t.sent(),[4,this.setLayout(e)];case 2:return t.sent(),[2]}}))}))},t.prototype.deserializeLayout=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f=this;return y(this,(function(m){switch(m.label){case 0:if(n=function(t){return g(f,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:n=0,o.label=1;case 1:return n<e.children.length?[4,this.deserializeLayout(e.children[n],null)]:[3,4];case 2:(i=o.sent())?("leaf"!==i.type||"tabs"===t.type||t instanceof CG||((r=new RK(this)).insertChild(0,i),i=r),t.insertChild(n,i)):(e.children.splice(n,1),n--),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},"split"!==e.type)return[3,2];if(i=void 0,"root"===t)i=new qK(this,e.direction,e.id);else if(t){if(Zl.isMobile)return[2,null];r=i=new wG(this,e.direction,t,e.id),e.width&&r.setSize(e.width),e.collapsed&&r.collapse()}else i=new bG(this,e.direction,e.id);return[4,n(i)];case 1:if(m.sent(),0===i.children.length&&!(i instanceof wG))return[2,null];for(s=0;s<e.children.length;s++)l=e.children[s].dimension,i.children[s].setDimension(l);return i.recomputeChildrenDimensions(),[2,i];case 2:if("floating"!==e.type)return[3,4];for(o=new UK(this,e.id),s=0;s<e.children.length;s++)"window"!==e.children[s].type&&(e.children.splice(s,1),s--);return[4,n(o)];case 3:return m.sent(),[2,o];case 4:return"window"===e.type&&Zl.isDesktopApp&&If>=13?(a=new _K(this,e.id,e),[4,n(a)]):[3,6];case 5:if(m.sent(),0===a.children.length)return[2,null];for(s=0;s<e.children.length;s++)l=e.children[s].dimension,a.children[s].setDimension(l);return a.recomputeChildrenDimensions(),[2,a];case 6:return"tabs"!==e.type?[3,8]:(c=new RK(this,e.id),e.stacked&&c.setStacked(!0),[4,n(c)]);case 7:return m.sent(),0===c.children.length?[2,null]:(u=e.currentTab||0,c.selectTabIndex(u),c.recomputeChildrenDimensions(),[2,c]);case 8:return"leaf"!==e.type?[3,10]:(h=new VK(this.app,e.id),d=e.state||{},[4,h.setViewState(d)]);case 9:return m.sent(),h.view?(e.group&&h.setGroup(e.group),e.pinned&&h.togglePinned(),[2,h]):(h.detach(),[2,null]);case 10:return"mobile-drawer"!==e.type?[3,12]:Zl.isMobile?(p=void 0,"left"===t?p=new MG(this,e.id):"right"===t&&(p=new EG(this,e.id)),[4,n(p)]):[2,null];case 11:return m.sent(),p.currentTab=e.currentTab,p.recomputeChildrenDimensions(),e.pinned&&p.setPinned(!0),[2,p];case 12:return[2,null]}}))}))},t.prototype.getLayout=function(){var e={};e.main=this.rootSplit.serialize(),e.left=this.leftSplit.serialize(),e.right=this.rightSplit.serialize(),e["left-ribbon"]=this.leftRibbon.serialize(),this.floatingSplit.children.length&&(e.floating=this.floatingSplit.serialize());var t=this.activeLeaf;return t&&(e.active=t.id),e},t.prototype.saveLayout=function(){return g(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:if(!this.layoutReady)return[2];e=this.app.vault,(t=this.getLayout()).lastOpenFiles=this.recentFileTracker.serialize(),i.label=1;case 1:return i.trys.push([1,3,,4]),n=Zl.isMobile?jK:WK,[4,e.adapter.write(e.configDir+"/"+n,JSON.stringify(t,null,2))];case 2:return i.sent(),[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},Object.defineProperty(t.prototype,"activeEditor",{get:function(){var e;return null!==(e=this._activeEditor)&&void 0!==e?e:this.getActiveViewOfType(LY)},set:function(e){e instanceof LY||(this._activeEditor=e)},enumerable:!1,configurable:!0}),t.prototype.unsetActiveEditor=function(e){e&&this._activeEditor!==e||(this._activeEditor=null)},t.prototype.onDragLeaf=function(e,t){var n=this;if(Zl.isPhone)e.preventDefault();else{var i=function(e){0===e.touches.length&&g()};Zl.isMobile&&window.addEventListener("touchend",i),Zl.isIosApp&&(Ac(),navigator.vibrate(200)),e.dataTransfer.setData("text/plain","");var r=createDiv("drag-ghost mod-leaf",(function(e){e.createDiv("drag-ghost-icon",(function(e){mx(e,t.getIcon())})),e.createSpan({text:pc(t.getDisplayText(),60)})}));Zl.isMobile?Ux(e):(e.doc.body.appendChild(r),e.dataTransfer.setDragImage(r,0,0),setTimeout((function(){return r.detach()})));var o=this.app.dragManager,a=null,s=createDiv("workspace-fake-target-overlay"),l=e.clientX,c=e.clientY,u=!1,h=null;t.loadIfDeferred();var d=function(e,t){return e instanceof wG?["left","right","top","bottom"]:t?["left","right"]:null},p=function(){h&&(h.style.opacity=null),o.hideOverlay(),s.hide()},f=function(e){e.preventDefault(),e.dataTransfer.dropEffect="none";var i=e.clientX,f=e.clientY;if(!u){var m=i-l,v=f-c;if(m*m+v*v<25)return;u=!0,document.body.addClass("is-grabbing")}var g=e.doc,y=n.getDropLocation(e);if(y&&y!==t){if(Zl.isMobile){r.style.left=i-r.offsetWidth/2+"px",r.style.top=f-r.offsetHeight-20+"px";var b=e.doc;r.parentNode!==b.body&&b.body.appendChild(r),r.show()}var w=y.getRoot(),k=w===n.leftSplit||w===n.rightSplit;if(t.view instanceof GP||w===n.leftSplit||w===n.rightSplit){var C=y.containerEl.getBoundingClientRect(),M=C.width,E=C.height,S=C.x,x=C.y,T=n.getDropDirection(e,C,d(y,k),y);if(y instanceof RK||y!==t.parent||"center"!==T&&1!==t.parent.children.length)if(e.dataTransfer.dropEffect="move",y===n.leftSplit&&n.leftSplit.collapsed?C=n.leftSidebarToggleButtonEl.getBoundingClientRect():y===n.rightSplit&&n.rightSplit.collapsed?C=n.rightSidebarToggleButtonEl.getBoundingClientRect():y instanceof RK&&"center"===T&&(C=y.getTabInsertLocation(i).rect),y instanceof yG&&1===y.children.length&&y.children[0]===t)p();else{if(o.showOverlay(g,C),"center"===T)return h&&(h.style.opacity=null),void s.hide();var D,A,L,P;if("top"===T?(D=C.x,A=x+C.height,P=M,L=E-C.height):"left"===T?(D=S+C.width,A=C.y,P=M-C.width,L=E):"right"===T?(D=S,A=x,P=M-C.width,L=E):"bottom"===T&&(D=S,A=x,P=M,L=E-C.height),!a||!h||y.containerEl!==h){h&&(h.style.opacity=null),s.empty(),s.appendChild(y.containerEl.cloneNode(!0)),y.containerEl.style.opacity="0",h=y.containerEl;for(var I=s,F=y.containerEl.parentElement,O=F.doc.body;F&&F!==O;){var B=createDiv(F.className);B.appendChild(I),I=B,F=F.parentElement}a&&a.detach(),a=I}y.containerEl.style.opacity="center"===T?null:"0",a.parentNode!==g.body&&(a.addClass("workspace-fake-target-container"),g.body.appendChild(a)),s.toggle("center"!==T),s.toggleClass("is-in-sidebar",w!==n.rootSplit),s.style.transform="translate(".concat(D,"px, ").concat(A,"px)"),s.style.width="".concat(P,"px"),s.style.height="".concat(L,"px")}else p()}else p()}else p()},m=!1,v=function(e){if(m=!1,g(),u){var i=n.getDropLocation(e);if(i&&i!==t){var r=i.getRoot(),o=r===n.leftSplit||r===n.rightSplit,a=t.parent;if(i instanceof yG&&(i===n.leftSplit||i===n.rightSplit)){if(a.removeChild(t),t.setDimension(null),Zl.isMobile)i.insertChild(-1,t);else{var s=i.children.first(),l=void 0;s instanceof RK?l=s:(l=new RK(n),i.insertChild(-1,l)),l.insertChild(-1,t)}n.requestResize()}else if(t.view instanceof GP||r===n.leftSplit||r===n.rightSplit){var c=i.containerEl.getBoundingClientRect(),h=n.getDropDirection(e,c,d(i,o),i);if(i instanceof RK||i!==t.parent||"center"!==h&&1!==t.parent.children.length){if(o&&t.setGroupMember(null),i instanceof RK&&"center"===h){var p=i.getTabInsertLocation(e.clientX).index;if(a===i){var f=i.children.indexOf(t);if(p>f&&p--,f===p)return}return a.removeChild(t),t.setDimension(null),i.insertChild(p,t),i.selectTabIndex(i.children.indexOf(t)),void n.requestResize()}if(!(i instanceof yG&&1===i.children.length&&i.children[0]===t)){var v=i.parent;if(v&&v instanceof bG){var y="top"===h||"bottom"===h?"horizontal":"vertical";if(o){l=new RK(n);n.splitLeaf(i,l,y,"left"===h||"top"===h),a.removeChild(t),t.setDimension(null),l.insertChild(0,t)}else if("center"===h){var b=a.children.indexOf(t),w=v.children.indexOf(i),k=t.dimension,C=i.dimension,M=new VK(n.app);v.replaceChild(w,M),a.replaceChild(b,i),v.replaceChild(w,t),t.setDimension(C),i.setDimension(k),i instanceof VK&&i.view instanceof KP&&i.detach()}else a.removeChild(t),t.setDimension(null),n.splitLeaf(i,t,y,"left"===h||"top"===h);n.requestResize()}else;}}}}}},g=function(){if(window.removeEventListener("touchend",i),window.removeEventListener("dragover",f),window.removeEventListener("dragenter",y),window.removeEventListener("dragleave",b),window.removeEventListener("dragend",g,{capture:!0}),window.removeEventListener("drop",v),h&&(h.style.opacity=null),o.removeOverlay(),r.detach(),null==a||a.detach(),s.detach(),document.body.removeClass("is-grabbing"),Zl.isMobile&&(u||e.target.dispatchEvent(new MouseEvent("contextmenu",{button:0,buttons:0,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey,shiftKey:e.shiftKey,screenX:e.screenX,screenY:e.screenY,bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}))),Zl.isDesktopApp&&e&&m&&t.view instanceof GP){var l=t.containerEl.getBoundingClientRect(),c=t.containerEl.win.electron.webFrame.getZoomLevel();m=!1,t.parent&&t.parent.removeChild(t),t.setDimension(null),n.openPopout({x:e.screenX,y:e.screenY,size:l,zoom:c}).insertChild(0,RK.createFrom(n,t)),n.setActiveLeaf(t,{focus:!0})}},y=function(e){e.target&&(m=!1),f(e)},b=function(e){e.relatedTarget||0===e.buttons||(p(),e.win.setTimeout((function(){m=!0}),10))};window.addEventListener("dragover",f),window.addEventListener("dragenter",y),window.addEventListener("dragleave",b),window.addEventListener("dragend",g,{capture:!0}),window.addEventListener("drop",v)}},t.prototype.onStartLink=function(e){var t=this,n=this.app.dragManager,i=function(i){i.preventDefault();var r=t.getDropLocation(i);if(r&&r!==e)if(r instanceof RK&&(r=r.children[r.currentTab]),r instanceof VK)if(r.view instanceof GP){var o=r.containerEl.getBoundingClientRect();n.showOverlay(i.doc,o)}else n.hideOverlay();else n.hideOverlay();else n.hideOverlay()},r=function(o){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",r),n.removeOverlay();var a=t.getDropLocation(o);a&&a!==e&&(a instanceof RK&&(a=a.children[a.currentTab]),a instanceof VK&&a.view instanceof GP&&e.setGroupMember(a))};window.addEventListener("mousemove",i),window.addEventListener("mouseup",r)},t.prototype.getDropLocation=function(e){var t=e.win;if(t!==window)for(var n=0,i=this.floatingSplit.children;n<i.length;n++){var r=i[n];if(r instanceof _K&&r.win===t)return this.recursiveGetTarget(e,r)}var o=this,a=o.leftRibbon,s=o.rightRibbon,l=o.leftSidebarToggleButtonEl,c=o.rightSidebarToggleButtonEl,u=o.leftSplit,h=o.rightSplit,d=o.rootSplit;return Fw(e,a.containerEl)||Fw(e,l)?u:Fw(e,s.containerEl)||Fw(e,c)?h:Fw(e,u.containerEl)?0===u.children.length?u:this.recursiveGetTarget(e,u):Fw(e,h.containerEl)?0===h.children.length?h:this.recursiveGetTarget(e,h):Fw(e,d.containerEl)?this.recursiveGetTarget(e,d):null},t.prototype.recursiveGetTarget=function(e,t){for(var n=0,i=t.children;n<i.length;n++){var r=i[n];if(Fw(e,r.containerEl))return r instanceof RK?r:r instanceof yG?this.recursiveGetTarget(e,r):r}return null},t.prototype.getDropDirection=function(e,t,n,i){var r=e.clientX,o=e.clientY,a=Math.abs(r-t.x)/t.width,s=Math.abs(o-t.y)/t.height,l=Math.abs(r-(t.x+t.width))/t.width,c=Math.abs(o-(t.y+t.height))/t.height;n=n||[],i instanceof RK&&i.isStacked&&!Fw(e,i.tabHeaderContainerEl)&&n.push("left","right");var u="center",h=1;if(s<.33&&s<h&&!n.contains("top"))if(h=s,i instanceof RK){!i.isStacked&&Fw(e,i.tabHeaderContainerEl)&&(h=0);var d=i.tabHeaderContainerEl.getBoundingClientRect();o-t.y<=d.height/3?u="top":(u="center",i.isStacked&&(h=1))}else u="top";a<.33&&a<h&&!n.contains("left")&&(h=a,u="left"),l<.33&&l<h&&!n.contains("right")&&(h=l,u="right"),c<.33&&c<h&&!n.contains("bottom")&&(h=c,u="bottom");var p=["left","right"].contains(u)?t.width:t.height;switch(p=Math.max(p/3,40),u){case"center":break;case"left":t.width=p;break;case"top":t.height=p;break;case"right":t.x+=t.width-p,t.width=p;break;case"bottom":t.y+=t.height-p,t.height=p}return u},t.prototype.createLeafInParent=function(e,t){var n=new VK(this.app);return e.children.length>0&&n.setDimension(100/e.children.length),e.insertChild(t,n),this.setActiveLeaf(n),n},t.prototype.splitLeaf=function(e,t,n,i){var r,o;void 0===n&&(n="vertical");for(var a=e;a;){if(a instanceof bG){o=(r=a).children.indexOf(e);break}e=a,a=a.parent}t instanceof RK||(t=RK.createFrom(this,t));var s=e.dimension;if(n!==r.direction){e.setDimension(null);var l=new bG(this,n);r.replaceChild(o,l),l.setDimension(s),i?(l.insertChild(0,t),l.insertChild(1,e)):(l.insertChild(0,e),l.insertChild(1,t))}else null!==s&&(e.setDimension(s/2),t.setDimension(s/2)),i?r.insertChild(o,t):r.insertChild(o+1,t)},t.prototype.createLeafBySplit=function(e,t,n){var i=new VK(this.app);return this.splitLeaf(e,i,t,n),this.setActiveLeaf(i),i},t.prototype.splitActiveLeaf=function(e){var t=this.getMostRecentLeaf();return t?this.createLeafBySplit(t,e):this.createLeafInParent(this.rootSplit,0)},t.prototype.splitLeafOrActive=function(e,t){return e?this.createLeafBySplit(e,t):this.splitActiveLeaf(t)},t.prototype.duplicateLeaf=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return e?("horizontal"!==t&&"vertical"!==t||(n=t,t="split"),i=e.getViewState(),r=e.getEphemeralState(),o=e.history.serialize(),[4,(a="split"===t?this.createLeafBySplit(e,n):this.getLeaf(t)).setViewState(i,m(m({},r),{focus:!0}))]):[2];case 1:return s.sent(),a.history.deserialize(o),[2,a]}}))}))},t.prototype.getUnpinnedLeaf=function(){var e,t,n=this.activeLeaf;if(n&&n.canNavigate())return n;var i=null!==(e=null==n?void 0:n.getContainer())&&void 0!==e?e:this.rootSplit,r=null;if(this.iterateLeaves(i,(function(e){if(e.canNavigate()){var t=e.parent;t&&(t.children[t.currentTab]===e||t instanceof RK&&t.isStacked)&&(!r||r.activeTime<e.activeTime)&&(r=e)}})),!r){var o=this.getMostRecentLeaf(i),a=null!==(t=null==o?void 0:o.parent)&&void 0!==t?t:i;r=new VK(this.app),a.insertChild(-1,r)}return this.setActiveLeaf(r),r},t.prototype.getLeaf=function(e,t){return"split"===e?this.splitActiveLeaf(t):"tab"===e||!0===e?this.createLeafInTabGroup():"window"===e?this.openPopoutLeaf():this.getUnpinnedLeaf()},t.prototype.createLeafInTabGroup=function(e){if(!e){var t=this.getMostRecentLeaf();if(!t)throw new Error("No tab group found.");e=t.parent}for(var n=e.children.length-1,i=e.children[n],r=0;r<e.children.length;r++){var o=e.children[r];o.activeTime>i.activeTime&&(i=o,n=r)}if(i.view instanceof KP)return i;var a=new VK(this.app);return e.insertChild(n+1,a),this.app.vault.getConfig("focusNewTab")&&this.setActiveLeaf(a),a},t.prototype.moveLeafToPopout=function(e,t){var n;if(KK(),e.view instanceof GP){null!=t||(t={}),t.size||(t.size=e.containerEl.getBoundingClientRect()),t.zoom||(t.zoom=e.containerEl.win.electron.webFrame.getZoomLevel());var i=this.app.workspace.openPopout(t);return null===(n=e.parent)||void 0===n||n.removeChild(e),e.setDimension(null),i.insertChild(0,RK.createFrom(this,e)),i}},t.prototype.openPopout=function(e){KK();var t=new _K(this,null,e);return this.floatingSplit.insertChild(-1,t),t},t.prototype.openPopoutLeaf=function(e){var t=this.openPopout(e),n=new VK(this.app);return t.insertChild(0,RK.createFrom(this,n)),n},t.prototype.openLinkText=function(e,t,n,i){return g(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return[4,this.getLeaf(n).openLinkText(e,t,i)];case 1:return r.sent(),[2]}}))}))},t.prototype.setActiveLeaf=function(e,t,n){var i;t&&"boolean"!=typeof t&&(n=t.focus);var r=this.activeLeaf;if(this.isAttached(e))if(r!==e){if(r&&(r.containerEl.removeClass("mod-active"),r.tabHeaderEl.removeClass("mod-active")),this.activeTabGroup&&this.activeTabGroup.containerEl.removeClass("mod-active"),this.activeLeaf=e,this.activeTabGroup=null==e?void 0:e.parent,this._activeEditor=null,e){e.activeTime=Date.now(),e.containerEl.addClass("mod-active"),e.tabHeaderEl.addClass("mod-active"),null===(i=this.activeTabGroup)||void 0===i||i.containerEl.addClass("mod-active");var o=e.parent;if(o instanceof RK){var a=o.children.indexOf(e);o.selectTabIndex(a)}var s=e.getContainer();s instanceof _K?s.updateTitle():this.updateTitle(),n&&(Zl.isDesktopApp&&s.focus(),e.setEphemeralState({focus:!0})),this.updateMobileVisibleTabGroup(),this.requestActiveLeafEvents()}}else n&&e&&e.setEphemeralState({focus:!0})},t.prototype.activeLeafEvents=function(){if(this.layoutReady){var e=this.activeLeaf;this.trigger("active-leaf-change",e);var t=this.lastActiveFile,n=this.getActiveFile();t!==n&&(this.recentFileTracker.onFileOpen(n,t),this.lastActiveFile=n,this.trigger("file-open",n))}},t.prototype.getLeafById=function(e){var t=null;return this.iterateAllLeaves((function(n){if(n.id===e)return t=n,!0})),t},t.prototype.getGroupLeaves=function(e){var t=[];return e?(this.iterateAllLeaves((function(n){n.group===e&&t.push(n)})),t):t},t.prototype.getFocusedContainer=function(){if(activeWindow===window)return this.rootSplit;for(var e=0,t=this.floatingSplit.children;e<t.length;e++){var n=t[e];if(n instanceof _K&&n.win===activeWindow)return n}return this.rootSplit},t.prototype.isAttached=function(e){if(!e)return!1;var t=e.getRoot();return[this.leftSplit,this.rootSplit,this.floatingSplit,this.rightSplit].includes(t)},t.prototype.getMostRecentLeaf=function(e){var t=null;return this.iterateLeaves(null!=e?e:[this.rootSplit,this.floatingSplit],(function(e){(!t||t.activeTime<e.activeTime)&&(t=e)})),t},t.prototype.getLeftLeaf=function(e){return this.getSideLeaf(this.leftSplit,e)},t.prototype.getRightLeaf=function(e){return this.getSideLeaf(this.rightSplit,e)},t.prototype.ensureSideLeaf=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return r=(i=n||{}).active,o=i.split,a=i.reveal,s=void 0===a||a,l=i.state,c=this.getLeavesOfType(e),u=0===c.length?"left"===t?this.getLeftLeaf(o):this.getRightLeaf(o):c[0],r||s?[4,u.loadIfDeferred()]:[3,2];case 1:h.sent(),h.label=2;case 2:return l||u.view.getViewType()!==e?[4,u.setViewState({type:e,state:l})]:[3,4];case 3:h.sent(),h.label=4;case 4:return s?[4,this.revealLeaf(u)]:[3,6];case 5:h.sent(),h.label=6;case 6:return r&&this.setActiveLeaf(u,{focus:!0}),[2,u]}}))}))},t.prototype.getActiveLeafOfViewType=function(e){return this.getActiveViewOfType(e)},t.prototype.getActiveViewOfType=function(e){var t=this.activeLeaf;if(!t)return null;var n=t.view;return n instanceof e?n:null},t.prototype.getActiveFileView=function(){var e=this.activeLeaf;if(e&&e.view.navigation)return e.view instanceof YP?e.view:null;e=null;var t=null;return this.iterateAllLeaves((function(n){n.view.navigation&&(!e||e.activeTime<n.activeTime)&&(e=n,t=n.view instanceof YP?n.view:null)})),t},t.prototype.getActiveFile=function(){var e,t;return(null===(e=this.activeEditor)||void 0===e?void 0:e.file)||(null===(t=this.getActiveFileView())||void 0===t?void 0:t.file)||null},t.prototype.getSideLeaf=function(e,t){if(e instanceof CG){var n=new VK(this.app);return e.insertChild(-1,n),n}if(t){var i=new RK(this);e.insertChild(-1,i);n=new VK(this.app);return i.insertChild(-1,n),n}0===e.children.length&&e.insertChild(0,new RK(this));var r=e.children[0];if(r instanceof yG){n=new VK(this.app);return r.insertChild(-1,n),n}return null},t.prototype.iterateTabs=function(e,t){Array.isArray(e)||(e=[e]);for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r instanceof RK&&t(r))return!0;if(r instanceof yG&&this.iterateTabs(r.children,t))return!0}return!1},t.prototype.iterateLeaves=function(e,t){if("function"==typeof e&&t instanceof gG){var n=t;t=e,e=n}if(Array.isArray(e))for(var i=0,r=e;i<r.length;i++){var o=r[i];if(this.iterateLeaves(o,t))return!0}else if(e instanceof VK){if(t(e))return!0}else if(e instanceof yG)for(var a=0,s=e.children;a<s.length;a++){var l=s[a];if(this.iterateLeaves(l,t))return!0}return!1},t.prototype.iterateRootLeaves=function(e){this.iterateLeaves(this.rootSplit,e)},t.prototype.iterateAllLeaves=function(e){this.iterateLeaves(this.rootSplit,e),this.iterateLeaves(this.leftSplit,e),this.iterateLeaves(this.rightSplit,e),this.iterateLeaves(this.floatingSplit,e)},t.prototype.getLeavesOfType=function(e){var t=[];return this.iterateAllLeaves((function(n){n.view.getViewType()===e&&t.push(n)})),t},t.prototype.detachLeavesOfType=function(e){for(var t=0,n=this.getLeavesOfType(e);t<n.length;t++){n[t].detach()}},t.prototype.getAdjacentLeafInDirection=function(e,t){if(!e)return null;e instanceof VK&&e.parent instanceof RK&&(e=e.parent);var n=e.containerEl.getBoundingClientRect(),i=null;switch(t){case"top":i={x:n.left+n.width/2,y:n.top-5};break;case"bottom":i={x:n.left+n.width/2,y:n.top+n.height+5};break;case"left":i={x:n.left-5,y:n.top+n.height/2};break;case"right":i={x:n.left+n.width+5,y:n.top+n.height/2}}if(i){var r=activeDocument.elementFromPoint(i.x,i.y),o=null,a=e.getContainer();if(this.iterateLeaves(a,(function(e){if(e.containerEl.contains(r))return o=e,!0})),o||this.iterateTabs(a,(function(e){if(e.containerEl.contains(r))return o=e.children[e.currentTab],!0})),o)return o}for(var s=null,l="left"===t||"right"===t?"vertical":"horizontal";e;){var c=e.parent;if(c instanceof RK&&("left"===t||"right"==t)||c instanceof bG&&c.direction===l){var u=c.children,h=u.indexOf(e);if("left"===t||"top"===t){if(h>0){s=u[h-1];break}}else if(h<u.length-1){s=u[h+1];break}}e=c}if(!s)return null;for(;s instanceof yG;){var d=s instanceof RK?s.currentTab:0;s=s.children[d]}return s instanceof VK?s:null},t.prototype.revealLeaf=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t=e.getRoot(),n=!1,t instanceof wG&&t.collapsed&&(n=!0,t.expand()),t instanceof CG&&(t.openLeaf(e),t.expand(),t===this.leftSplit?this.rightSplit.collapse():t===this.rightSplit&&this.leftSplit.collapse()),(i=e.parent)instanceof RK&&(r=i.currentTab,i.selectTab(e),(n||i.currentTab!==r)&&Tw(e.tabHeaderEl)),(o=e.getContainer())&&o.focus(),[4,e.loadIfDeferred()];case 1:return a.sent(),[2]}}))}))},t.prototype.getLastOpenFiles=function(){return this.recentFileTracker.getLastOpenFiles()},t.prototype.getRecentFiles=function(e){return this.recentFileTracker.getRecentFiles(e)},t.prototype.isInSidebar=function(e){var t=this.leftSplit,n=this.rightSplit,i=e.getRoot();return i===t||i===n},t.prototype.updateOptions=function(){this.layoutReady&&(this.iterateAllLeaves((function(e){e&&e.view instanceof LY&&e.view.updateOptions()})),Zl.isDesktopApp&&!Ul&&Rf(this.app.getSpellcheckLanguages()))},t.prototype.onLayoutChange=function(e){if(this.requestUpdateLayout(),e){var t=this.layoutItemQueue;t.contains(e)||t.push(e)}},t.prototype.updateLayout=function(){var e,t;if(this.layoutReady){for(var n=this.layoutItemQueue;n.length>0;)n.pop().recomputeChildrenDimensions();if(0===this.rootSplit.children.length){var i=new VK(this.app),r=new RK(this);this.lastTabGroupStacked&&r.setStacked(!0),r.insertChild(0,i),this.rootSplit.insertChild(0,r)}if(!this.activeLeaf||!this.isAttached(this.activeLeaf)){var o=this.activeTabGroup,a=null;o&&o instanceof RK&&this.isAttached(o)&&(a=o.children[o.currentTab]),a||(a=this.getMostRecentLeaf(this.getFocusedContainer())),a||this.iterateAllLeaves((function(e){(!a||a.activeTime<e.activeTime)&&(a=e)})),a||(a=this.createLeafInParent(this.rootSplit,0)),this.setActiveLeaf(a,{focus:!0})}var s=null===(e=this.activeLeaf)||void 0===e?void 0:e.parent;s!==this.activeTabGroup&&(null===(t=this.activeTabGroup)||void 0===t||t.containerEl.removeClass("mod-active"),this.activeTabGroup=s,null==s||s.containerEl.addClass("mod-active")),this.updateMobileVisibleTabGroup();var l={};for(var c in this.iterateAllLeaves((function(e){var t=e.group;t&&(l[t]=(l[t]||0)+1)})),l)if(l.hasOwnProperty(c)&&1===l[c])for(var u=0,h=this.getGroupLeaves(c);u<h.length;u++){(i=h[u]).setGroup(null)}this.updateFrameless(),this.updateTitle(),this.requestSaveLayout(),this.requestResize(),this.requestLayoutChangeEvents()}},t.prototype.updateMobileVisibleTabGroup=function(){if(Zl.isMobile){var e=this.activeLeaf;this.activeTabGroup instanceof CG&&(e=this.getMostRecentLeaf());for(var t=new Set,n=e.parent;n;)t.add(n),n.containerEl.addClass("mod-visible"),n=n.parent;var i=function(e){t.has(e)||e.containerEl.removeClass("mod-visible");for(var n=0,r=e.children;n<r.length;n++){var o=r[n];o instanceof yG&&i(o)}};i(this.rootSplit)}},t.prototype.updateFrameless=function(){var e=this;if(this.layoutReady){var t=this,n=t.rootSplit,i=t.leftSplit,r=t.rightSplit,o=t.floatingSplit,a=[],s=function(e){if(e instanceof RK)a.push(e);else if(e instanceof yG)for(var t=0,n=e.children;t<n.length;t++){var i=n[t];s(i)}};s(n),s(i),s(r),s(o);for(var l=0,c=a;l<c.length;l++){c[l].containerEl.removeClass("mod-top","mod-top-left-space","mod-top-right-space")}var u=function(t){var o=[],a=function(e){if(e instanceof RK)o.push(e);else if(e instanceof bG)if("vertical"===e.direction)for(var t=0,n=e.children;t<n.length;t++){var i=n[t];a(i)}else{var r=e.children[0];r&&a(r)}};a(t);for(var s=0,l=o;s<l.length;s++){l[s].containerEl.addClass("mod-top")}var c=null,u=null,h=null,d=null;if(o.length>0&&(h=c=o.first(),d=u=o.last()),t===n){var p=i.children[0],f=r.children[0];p instanceof RK&&(p.containerEl.addClass("mod-top","mod-top-left-space"),i.collapsed||(c=p)),f instanceof RK&&(f.containerEl.addClass("mod-top","mod-top-right-space"),r.collapsed||(u=f));var m=e,v=m.leftSidebarToggleButtonEl,g=m.rightSidebarToggleButtonEl,y=function(e,t,n){var i=e.parentElement;if(t!==i){var r=n.prepend,o=n.oldStyle,a=n.newStyle,s=e.offsetWidth,l=i?parseInt(getComputedStyle(i).paddingLeft):0,c=t?parseInt(getComputedStyle(t).paddingLeft):0;if(isNaN(l)&&(l=0),isNaN(c)&&(c=0),i&&""!==o){var u=e.cloneNode(!0);e.replaceWith(u);var h=new ml(vG);"offset"===o?h.addProp("margin-left",c+"px",-s+"px").addProp("left","",-l+"px"):"none"!==o&&h.addProp("overflow","hidden","hidden","").addProp("width",s+"px","0"),wl(u,h,(function(){return u.detach()}))}if(r?t.prepend(e):t.appendChild(e),i&&""!==a){h=new ml(vG);"offset"===a?h.addProp("margin-left",-(s+l)+"px","").addProp("left",-l+"px",""):"none"!==a&&h.addProp("overflow","hidden","hidden","").addProp("width","0",s+"px",""),wl(e,h)}}};Zl.isDesktopApp&&(!e.leftRibbon.containerEl.isShown()||Zl.isMacOS&&"hidden"===window.titlebarStyle)||Zl.isTablet?!i.collapsed&&p instanceof RK?y(v,p.tabHeaderContainerEl,{oldStyle:"offset",newStyle:""}):i.collapsed&&h&&y(v,h.tabHeaderContainerEl,{prepend:!0,oldStyle:"none",newStyle:"offset"}):e.leftRibbon.containerEl.prepend(v),Zl.isTablet&&i instanceof CG&&i.isPinned&&v.detach(),Zl.isDesktopApp&&!r.collapsed&&(Zl.isMacOS||"hidden"!==window.titlebarStyle||electronWindow.isFullScreen())?f instanceof RK&&y(g,f.tabHeaderContainerEl,{newStyle:""}):d&&y(g,d.tabHeaderContainerEl,{oldStyle:"none",newStyle:""}),Zl.isTablet&&r instanceof CG&&r.isPinned&&g.detach()}Zl.isDesktopApp&&(c&&c.containerEl.addClass("mod-top-left-space"),u&&u.containerEl.addClass("mod-top-right-space"))};u(n);for(var h=0,d=o.children;h<d.length;h++){var p=d[h];p instanceof _K&&u(p)}this.trigger("window-frame-change")}},t.prototype.onQuickPreview=function(e,t){this.trigger("quick-preview",e,t)},t.prototype.onResize=function(){this.trigger("resize")},t.prototype.onLinkContextMenu=function(e,t,n,i){this.handleLinkContextMenu(PA.forEvent(e),t,n,i)},t.prototype.handleLinkContextMenu=function(e,t,n,i){var r=this;if(!t)return!1;var o=WS(t).path,a=this.app.metadataCache.getFirstLinkpathDest(o,n);return Zl.isPhone&&e.addItem((function(e){return e.setSection("title").setTitle(a?a.basename:o).setIsLabel(!0)})),a?(e.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openLink()).setIcon("lucide-file").onClick((function(e){return r.openLinkText(t,n,Ak.isModEvent(e))}))})),e.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(){r.app.workspace.openLinkText(t,n,"tab")}))})),Zl.canSplit&&e.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(){r.app.workspace.openLinkText(t,n,"split")}))})),e.addItem((function(e){return e.setSection("action").setTitle(Qf.plugins.fileExplorer.menuOptRename()).setIcon("lucide-edit-3").onClick((function(){return r.app.fileManager.promptForFileRename(a)}))})),this.trigger("file-menu",e,a,"link-context-menu",i),!0):(e.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.createFile()).setIcon("lucide-file").onClick((function(e){return r.openLinkText(t,n,Ak.isModEvent(e))}))})),!0)},t.prototype.handleExternalLinkContextMenu=function(e,t){if(!t)return!1;var n=this.app.internalPlugins.getEnabledPluginById("webviewer");return e.addItem((function(e){return e.setTitle(Qf.plugins.webViewer.actionOpenLinkDefaultBrowser()).setIcon("lucide-globe-2").setSection("open").onClick((function(){n?n.openUrlExternally(t):window.open(t)}))})),n&&!n.options.openExternalURLs&&e.addItem((function(e){return e.setTitle(Qf.plugins.webViewer.actionOpenLinkWebViewer()).setIcon("lucide-globe-2").setSection("open").onClick((function(e){n.openUrl(t,Ak.isModEvent(e))}))})),e.addItem((function(e){return e.setTitle(Qf.interface.menu.copyUrl()).setSection("info").setIcon("lucide-link").onClick((function(){yc(t),new JA(Qf.interface.copied({item:Qf.interface.url()}))}))})),this.trigger("url-menu",e,t),!0},t.prototype.iterateCodeMirrors=function(e){},t.prototype.addMobileFileInfo=function(e){this.mobileFileInfos.push(e)},t.prototype.registerUriHook=function(){var e=this,t=function(t){if(t){console.log("Received URL action",t),e.getFocusedContainer().focus();var n=e.protocolHandlers;if(n.has(t.action))n.get(t.action)(t)}},n=window.OBS_ACT;if(window.OBS_ACT=t,n&&t(n),uA){pA.addListener("appUrlOpen",(function(n){var i;i=n.url,g(e,void 0,void 0,(function(){var e;return y(this,(function(n){return i&&(e=wj(i))?e.vault&&e.vault.toLowerCase()!==this.app.vault.getName().toLowerCase()?(sessionStorage.setItem("obsidian-uri",i),window.location.reload(),[2]):(t(e),[2]):[2]}))}))}))}},t.prototype.registerObsidianProtocolHandler=function(e,t){if(this.protocolHandlers.has(e))throw new Error('Action "'.concat(e,'" is already registered as a handler.'));this.protocolHandlers.set(e,t)},t.prototype.unregisterObsidianProtocolHandler=function(e,t){t&&this.protocolHandlers.get(e)!==t||this.protocolHandlers.delete(e)},t.prototype.registerHoverLinkSource=function(e,t){this.hoverLinkSources[e]=t},t.prototype.unregisterHoverLinkSource=function(e){delete this.hoverLinkSources[e]},t.prototype.hasUndoHistory=function(){return this.undoHistory.length>0},t.prototype.pushUndoHistory=function(e,t,n){if(e){var i=e.getViewState();if("empty"!==i.type){var r=e.getEphemeralState(),o=this.undoHistory;o.unshift({leafId:e.id,state:i,eState:r,parentId:t,rootId:n,leafHistory:e.history.serialize()}),o.length>10&&o.pop()}}},t.prototype.updateTitle=function(){var e=this.getMostRecentLeaf(this.activeLeaf.getContainer());document.title=this.app.getAppTitle(e?e.getDisplayText().trim():"")},t.prototype.registerEditorExtension=function(e){this.editorExtensions.push(e),this.updateOptions()},t.prototype.unregisterEditorExtension=function(e){this.editorExtensions.remove(e),this.updateOptions()},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(sw);var ZK="manifest.json",XK="main.js",$K="styles.css";Ve.override=Ve.highest,Ve.extend=Ve.high,Ve.fallback=Ve.lowest;var QK="See the stack trace to find the faulty plugin and file an issue with the plugin author. \nDetails: https://discuss.codemirror.net/t/release-0-20-0/4302",JK=Tu.prototype.iterate,eY=function(e){return function(t){console.error(new Error("[CM6] tree.iterate has changed syntax.\n".concat(QK))),e.call(this,t.type,t.from,t.to)}};Tu.prototype.iterate=function(e){e.enter&&e.enter.length>1&&(e.enter=eY(e.enter)),e.leave&&e.leave.length>1&&(e.leave=eY(e.leave)),JK.call(this,e)};var tY={from:function(){}};t.PluginField={define:tY,decorations:tY,atomicRanges:tY,scrollMargins:tY};var nY={obsidian:d,"@codemirror/autocomplete":l,"@codemirror/collab":c,"@codemirror/commands":a,"@codemirror/language":o,"@codemirror/lint":u,"@codemirror/search":s,"@codemirror/state":e,"@codemirror/text":e,"@codemirror/view":t,"@lezer/common":i,"@lezer/lr":h,"@lezer/highlight":r},iY={"@codemirror/closebrackets":l,"@codemirror/comment":a,"@codemirror/fold":o,"@codemirror/gutter":t,"@codemirror/highlight":o,"@codemirror/history":a,"@codemirror/matchbrackets":o,"@codemirror/panel":t,"@codemirror/rangeset":e,"@codemirror/rectangular-selection":t,"@codemirror/stream-parser":o,"@codemirror/tooltip":t},rY=function(e){function t(t,n){var i=e.call(this)||this;return i._lastDataModifiedTime=0,i._userDisabled=!1,i.onConfigFileChange=mc(i._onConfigFileChange,50),i.app=t,i.manifest=n,i}return f(t,e),t.prototype.load=function(){return g(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return this._loaded?[2]:(this._loaded=!0,[4,this.onload()]);case 1:for(n.sent(),e=0,t=this._children.slice();e<t.length;e++)t[e].load();return[2]}}))}))},t.prototype.onload=function(){},t.prototype.addRibbonIcon=function(e,t,n){var i=this.app,r=this.manifest.id+":"+t,o=i.workspace.leftRibbon.addRibbonItemButton(r,e,t,n);return this.register((function(){i.workspace.leftRibbon.removeRibbonAction(r),o.detach()})),o},t.prototype.addStatusBarItem=function(){var e=this.app.statusBar.registerStatusBarItem();return e.addClass("plugin-"+this.manifest.id.toLowerCase().replace(/[^_a-zA-Z0-9-]/,"-")),this.register((function(){return e.detach()})),e},t.prototype.addCommand=function(e){var t=this;return e.id=this.manifest.id+":"+e.id,e.name=this.manifest.name+": "+e.name,this.app.commands.addCommand(e),this.register((function(){return t.app.commands.removeCommand(e.id)})),e},t.prototype.removeCommand=function(e){this.app.commands.removeCommand(this.manifest.id+":"+e)},t.prototype.addSettingTab=function(e){var t=this;this.app.setting.addSettingTab(e),this.register((function(){return t.app.setting.removeSettingTab(e)}))},t.prototype.registerView=function(e,t){var n=this;this.app.viewRegistry.registerView(e,t),this.register((function(){n.app.viewRegistry.unregisterView(e),n._userDisabled&&n.app.workspace.detachLeavesOfType(e)}))},t.prototype.registerHoverLinkSource=function(e,t){var n=this;this.app.workspace.registerHoverLinkSource(e,t),this.register((function(){return n.app.workspace.unregisterHoverLinkSource(e)}))},t.prototype.registerExtensions=function(e,t){var n=this;this.app.viewRegistry.registerExtensions(e,t),this.register((function(){return n.app.viewRegistry.unregisterExtensions(e)}))},t.prototype.registerMarkdownPostProcessor=function(e,t){var n=this;return eB.registerPostProcessor(e,t),this.app.workspace.trigger("post-processor-change"),this.register((function(){eB.unregisterPostProcessor(e),n.app.workspace.trigger("post-processor-change")})),e},t.prototype.registerMarkdownCodeBlockProcessor=function(e,t,n){var i=this,r=eB.createCodeBlockPostProcessor(e,t);return eB.registerPostProcessor(r,n),eB.registerCodeBlockPostProcessor(e,t),this.app.workspace.trigger("post-processor-change"),this.register((function(){eB.unregisterCodeBlockPostProcessor(e),eB.unregisterPostProcessor(r),i.app.workspace.trigger("post-processor-change")})),r},t.prototype.registerCodeMirror=function(e){},t.prototype.registerEditorExtension=function(e){var t=this;this.app.workspace.registerEditorExtension(e),this.register((function(){return t.app.workspace.unregisterEditorExtension(e)}))},t.prototype.registerObsidianProtocolHandler=function(e,t){var n=this;this.app.workspace.registerObsidianProtocolHandler(e,t),this.register((function(){return n.app.workspace.unregisterObsidianProtocolHandler(e,t)}))},t.prototype.registerEditorSuggest=function(e){var t=this;this.app.workspace.editorSuggest.addSuggest(e),this.register((function(){return t.app.workspace.editorSuggest.removeSuggest(e)}))},t.prototype.loadData=function(){return g(this,void 0,Promise,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return[4,this.app.vault.readPluginData(this.manifest.dir)];case 1:return(e=n.sent())&&this.onExternalSettingsChange?(t=this,[4,this.getModifiedTime()]):[3,3];case 2:t._lastDataModifiedTime=n.sent(),n.label=3;case 3:return[2,e]}}))}))},t.prototype.saveData=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){return t=Date.now(),this._lastDataModifiedTime=t,[2,this.app.vault.writePluginData(this.manifest.dir,e,{mtime:t})]}))}))},t.prototype.loadCSS=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=(e=this).app,n=e.manifest,i=n.dir+"/"+$K,[4,t.vault.exists(i)];case 1:return s.sent()?[4,t.vault.readRaw(i)]:[3,3];case 2:r=s.sent(),(o=createEl("style",{type:"text/css"})).textContent=r,a=this.app.customCss.styleEl,document.head.insertBefore(o,a),this.register((function(){return o.detach()})),s.label=3;case 3:return[2]}}))}))},t.prototype.onUserEnable=function(){},t.prototype.getModifiedTime=function(){return g(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:e=this.app.vault,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.adapter.stat(tu(this.manifest.dir+"/data.json"))];case 2:return[2,t.sent().mtime];case 3:return t.sent(),[2,0];case 4:return[2]}}))}))},t.prototype._onConfigFileChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.onExternalSettingsChange?[4,this.getModifiedTime()]:[2];case 1:return e=t.sent(),this._lastDataModifiedTime<e&&this.onExternalSettingsChange(),this._lastDataModifiedTime=e,[2]}}))}))},t}(xA),oY=function(e){function t(t,n){var i=e.call(this,t,t.setting)||this;return i.plugin=n,i.name=n.manifest.name,i.id=n.manifest.id,i}return f(t,e),t}(vK),aY=function(e){function t(t,n){var i=e.call(this,t,t.setting)||this;return i.plugin=null,i.plugin=n,i.name=n.instance.name,i.id=n.instance.id,i}return f(t,e),t}(vK),sY=/^\/\/[@#] sourceMappingURL=data:application\/json(?:;charset[:=][^;]+)?;base64,.*$/gm,lY="\n/* nosourcemap */";var cY=function(){function e(e){this.manifests={},this.plugins={},this.enabledPlugins=new Set,this.updates={},this.requestSaveConfig=mc(this.saveConfig,1e3),this.app=e,this.app.vault.on("raw",this.onRaw.bind(this))}return e.prototype.onRaw=function(e){if(e.startsWith(this.app.vault.configDir)){var t=Kc(Yc(e));if(this.enabledPlugins.has(t)&&e==="".concat(this.getPluginFolder(),"/").concat(t,"/data.json")){var n=this.plugins[t];n&&n.onConfigFileChange()}}},e.prototype.loadManifests=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return e=this.app.vault.adapter,t=this.manifests={},n=this.getPluginFolder(),[4,e.exists(n)];case 1:return d.sent()?[4,e.list(n)]:[3,10];case 2:i=d.sent(),r=0,o=i.folders,d.label=3;case 3:if(!(r<o.length))return[3,10];a=o[r],d.label=4;case 4:return d.trys.push([4,8,,9]),s=a+"/"+ZK,[4,e.exists(s)];case 5:return d.sent()?(u=(c=JSON).parse,[4,e.read(s)]):[3,7];case 6:if(!(l=u.apply(c,[d.sent()])).id)return[3,9];l.dir=a,l.author&&"obsidian"!==l.author.toLowerCase()||(l.author=""),t[l.id]=l,d.label=7;case 7:return[3,9];case 8:return h=d.sent(),console.error(h),[3,9];case 9:return r++,[3,3];case 10:return[2]}}))}))},e.prototype.loadManifest=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:t=this.app.vault.adapter,n=this.manifests,l.label=1;case 1:return l.trys.push([1,5,,6]),i=e+"/"+ZK,[4,t.exists(i)];case 2:return l.sent()?(a=(o=JSON).parse,[4,t.read(i)]):[3,4];case 3:if(!(r=a.apply(o,[l.sent()])).id)return[2];r.dir=e,r.author&&"obsidian"!==r.author.toLowerCase()||(r.author=""),n[r.id]=r,l.label=4;case 4:return[3,6];case 5:return s=l.sent(),console.error(s),[3,6];case 6:return[2]}}))}))},e.prototype.loadPlugin=function(e){return g(this,arguments,Promise,(function(e,t){var n,i,r,o,a,s,l,c,u,h;return void 0===t&&(t=!1),y(this,(function(d){switch(d.label){case 0:return this.isEnabled()?(n=this.plugins[e])?[2,n]:(i=this.manifests[e])?[4,this.app.vault.adapter.read(i.dir+"/"+XK)]:[2,null]:[2];case 1:if(r=d.sent(),Yj||(r=(p=r).endsWith(lY)?p:p.replace(sY,"")),o=e,a=document.body.hasClass("emulate-mobile"),s=function(e){return iY.hasOwnProperty(e)?(console.error(new Error("[CM6][".concat(o,'] Using a deprecated package: "').concat(e,'".\n').concat(QK))),iY[e]):nY.hasOwnProperty(e)?nY[e]:a?(new JA("".concat(o,' attempted to load NodeJS package: "').concat(e,'"')),console.error(new Error("[".concat(o,'] Attempting to load NodeJS package: "').concat(e,'"'))),null):Mf(e)},c={exports:l={}},u=function(e,t){return window.eval("(function anonymous(require,module,exports){".concat(e,"\n})\n//# sourceURL=").concat(t,"\n"))}(r,"plugin:"+encodeURIComponent(e)),u(s,c,l),!(h=(l=c.exports||l).default||c.exports))throw new Error("Failed to load plugin "+e+". No exports detected.");if(!((n=new h(this.app,i))instanceof rY))throw new Error("Failed to load plugin "+e);return this.plugins[e]=n,[4,n.load()];case 2:return d.sent(),[4,n.loadCSS()];case 3:return d.sent(),t&&n.onUserEnable(),[2,n]}var p}))}))},e.prototype.unloadPlugin=function(e){return g(this,arguments,void 0,(function(e,t){var n;return void 0===t&&(t=!1),y(this,(function(i){return(n=this.plugins[e])?(n._userDisabled=t,n.unload(),delete this.plugins[e],[2]):[2]}))}))},e.prototype.initialize=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l=this;return y(this,(function(c){switch(c.label){case 0:return[4,(e=this.app).vault.readConfigJson("community-plugins")];case 1:return(t=c.sent())&&Array.isArray(t)||(t=[]),this.enabledPlugins=new Set(t),[4,this.loadManifests()];case 2:if(c.sent(),n=this.manifests,0===Object.keys(n).length)return[2];if(!this.isEnabled())return null===localStorage.getItem("enable-plugin-"+this.app.appId)&&new uY(e).open(),[2];Jj("communityPlugins"),i=function(e){var t;return y(this,(function(i){switch(i.label){case 0:return n.hasOwnProperty(e)?(t=window.setTimeout((function(){iG.instance.setContext((function(t){t.createDiv({text:Qf.interface.startUp.msgPluginHang({plugin:e})}),t.createDiv("progress-bar-context-button",(function(t){t.createEl("button",{text:Qf.setting.thirdPartyPlugin.buttonDisable()},(function(t){t.onClickEvent((function(){return g(l,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.enabledPlugins.delete(e),[4,this.saveConfig()];case 1:return t.sent(),window.location.reload(),[2]}}))}))}))}))}))}))}),3e3),[4,r.enablePlugin(e)]):[3,2];case 1:i.sent(),iG.instance.clearContext(),clearTimeout(t),i.label=2;case 2:return[2]}}))},r=this,o=0,a=t,c.label=3;case 3:return o<a.length?(s=a[o],[5,i(s)]):[3,6];case 4:c.sent(),c.label=5;case 5:return o++,[3,3];case 6:return this.requestSaveConfig(),this.checkForDeprecations(),setInterval((function(){return l.checkForDeprecations()}),432e5),[2]}}))}))},e.prototype.getPluginFolder=function(){return"".concat(this.app.vault.configDir,"/plugins")},e.prototype.enablePlugin=function(e){return g(this,arguments,Promise,(function(e,t){var n,i;return void 0===t&&(t=!1),y(this,(function(r){switch(r.label){case 0:if(!(n=this.manifests[e]))return[2,!1];if(this.isDeprecated(n))return new JA("Unable to load plugin ".concat(n.name," v").concat(n.version,". This version has been reported to cause issues. Please check for a newer version of the plugin.")),[2,!1];if("better-pdf-plugin"===n.id&&"1.4.0"===n.version)return new JA("Better PDF Plugin is no longer functional. We recommend uninstalling it.",6e3),[2,!1];if(!Zl.isDesktopApp&&n.isDesktopOnly)return[2,!1];r.label=1;case 1:return r.trys.push([1,3,4,5]),this.loadingPluginId=e,[4,this.loadPlugin(e,t)];case 2:return r.sent(),this.loadingPluginId=null,[3,5];case 3:return i=r.sent(),this.loadingPluginId=null,new JA(Qf.interface.msgFailedToLoadPlugin({plugin:e})),console.error("Plugin failure: "+e,i),[2,!1];case 4:return Jj("communityPlugins.".concat(e)),[7];case 5:return[2,!0]}}))}))},e.prototype.disablePlugin=function(e){return g(this,arguments,void 0,(function(e,t){var n;return void 0===t&&(t=!1),y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.unloadPlugin(e,t)];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),new JA("Failed to unload plugin ".concat(e)),console.error("Plugin failure: "+e,n),[3,3];case 3:return[2]}}))}))},e.prototype.enablePluginAndSave=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.enablePlugin(e,!0)];case 1:return t.sent()?(this.enabledPlugins.add(e),this.requestSaveConfig(),[2,!0]):[2,!1]}}))}))},e.prototype.disablePluginAndSave=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return this.enabledPlugins.delete(e),this.requestSaveConfig(),[4,this.disablePlugin(e,!0)];case 1:return t.sent(),[2]}}))}))},e.prototype.uninstallPlugin=function(e){return g(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return[4,this.disablePluginAndSave(e)];case 1:return i.sent(),(t=this.manifests[e])?(n=t.dir)?[4,this.app.vault.exists(n)]:[2]:[2];case 2:return i.sent()?[4,this.app.vault.adapter.rmdir(n,!0)]:[2];case 3:return i.sent(),delete this.manifests[e],delete this.updates[e],[2]}}))}))},e.prototype.getPlugin=function(e){return this.plugins.hasOwnProperty(e)?this.plugins[e]:null},e.prototype.saveConfig=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.vault.writeConfigJson("community-plugins",Array.from(this.enabledPlugins))];case 1:return e.sent(),[2]}}))}))},e.prototype.isEnabled=function(){return"true"===localStorage.getItem("enable-plugin-"+this.app.appId)},e.prototype.setEnable=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:if(localStorage.setItem("enable-plugin-"+this.app.appId,e?"true":"false"),e)return[3,5];t=Object.keys(this.plugins),n=0,i=t,s.label=1;case 1:return n<i.length?(a=i[n],[4,this.disablePlugin(a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[3,9];case 5:r=0,o=Array.from(this.enabledPlugins),s.label=6;case 6:return r<o.length?(a=o[r],[4,this.enablePlugin(a)]):[3,9];case 7:s.sent(),s.label=8;case 8:return r++,[3,6];case 9:return[2]}}))}))},e.prototype.checkForDeprecations=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:if(0===Object.keys(this.plugins).length)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,WA(vY).json];case 2:return gY=a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:for(n in e=this.plugins,t=[],e)t.push(n);i=0,a.label=5;case 5:return i<t.length?(n=t[i])in e?(r=n,this.plugins.hasOwnProperty(r)?(o=this.manifests[r]||this.plugins[r].manifest,this.isDeprecated(o)?[4,this.disablePluginAndSave(r)]:[3,7]):[3,7]):[3,7]:[3,8];case 6:a.sent(),new JA("The plugin ".concat(o.name," v").concat(o.version," has been disabled. This version has been reported to cause issues. Please check for a newer version of the plugin."),0),a.label=7;case 7:return i++,[3,5];case 8:return[2]}}))}))},e.prototype.isDeprecated=function(e){if(!e)return!1;if(!gY.hasOwnProperty(e.id))return!1;var t=e.id,n=e.version;return gY[t].contains(n)},e.prototype.installPlugin=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a,s,l,c,u,h,d,p,f,m;return y(this,(function(v){switch(v.label){case 0:i=n.id,r=n.name,(o=new JA(hY.msgInstallingPlugin({name:r}),0)).containerEl.addClass("is-loading"),a=null,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,WA(rW(e,t,ZK)).text];case 2:return a=v.sent(),(s=JSON.parse(a)).id&&s.id===i?[3,4]:(o.containerEl.removeClass("is-loading"),o.setMessage("Plugin ID mismatch."),setTimeout((function(){return o.hide()}),3e3),[2]);case 3:return l=v.sent(),console.error(l),o.containerEl.removeClass("is-loading"),o.setMessage(hY.msgFailedToInstallPlugin({name:r})),setTimeout((function(){return o.hide()}),3e3),[2];case 4:return c=this.app.vault,u=this.getPluginFolder(),[4,c.exists(u)];case 5:return v.sent()?[3,7]:[4,c.createFolder(u)];case 6:v.sent(),v.label=7;case 7:return h=u+"/"+i,[4,c.exists(h)];case 8:return v.sent()?[3,10]:[4,c.createFolder(h)];case 9:v.sent(),v.label=10;case 10:return[4,(d=c.adapter).write(h+"/"+ZK,a)];case 11:v.sent(),v.label=12;case 12:return v.trys.push([12,15,,16]),[4,WA(rW(e,t,XK)).text];case 13:return p=v.sent(),f=p.replace(sY,"")+lY,[4,d.write(h+"/"+XK,f)];case 14:return v.sent(),[3,16];case 15:return v.sent(),console.log("".concat(r,": ").concat(XK," not found")),[3,16];case 16:return v.trys.push([16,19,,20]),[4,WA(rW(e,t,$K)).text];case 17:return m=v.sent(),[4,d.write(h+"/"+$K,m)];case 18:return v.sent(),[3,20];case 19:return v.sent(),console.log("".concat(r,": ").concat($K," not found")),[3,20];case 20:return delete this.updates[i],o.containerEl.removeClass("is-loading"),o.containerEl.addClass("mod-success"),o.setMessage(hY.msgSuccessfullyInstalledPlugin({name:r})),setTimeout((function(){return o.hide()}),3e3),[4,this.loadManifest(h)];case 21:return v.sent(),this.plugins.hasOwnProperty(i)?[4,this.disablePlugin(i)]:[3,24];case 22:return v.sent(),[4,this.enablePlugin(i,!0)];case 23:v.sent(),v.label=24;case 24:return[2]}}))}))},e.prototype.checkForUpdates=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p;return y(this,(function(f){switch(f.label){case 0:this.updates={},e=this.updates,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,pY()];case 2:return t=f.sent(),[3,4];case 3:return n=f.sent(),console.error(n),new JA(hY.msgFailedLoadPlugins()),[2];case 4:i=0,r=t,f.label=5;case 5:if(!(i<r.length))return[3,12];if(o=r[i],a=o.id,!this.manifests.hasOwnProperty(a))return[3,11];if(s=this.manifests[a],!(l=s.version))return[3,11];c=o.repo,u=nW(c,ZK),h=null,f.label=6;case 6:return f.trys.push([6,8,,9]),[4,WA(u).json];case 7:return(h=f.sent())&&h.id&&h.id===a?[3,9]:[3,11];case 8:return f.sent(),[3,11];case 9:return[4,oW(c,h)];case 10:(d=f.sent())&&sL(l,d)&&(e[a]={repo:c,version:d,manifest:h}),f.label=11;case 11:return i++,[3,5];case 12:return p=Object.keys(e).length,new JA(0===p?hY.msgNoUpdatesFound():hY.msgUpdatesFound({count:p})),[2]}}))}))},e}(),uY=function(e){function t(t){var n=e.call(this,t)||this;n.modalEl.addClass("mod-trust-folder"),n.titleEl.setText(hY.labelTrustAuthor()),n.contentEl.createEl("p",{text:hY.labelTrustAuthorDescription_1()}),n.contentEl.createEl("p",{text:hY.labelTrustAuthorDescription_2()}),n.contentEl.createEl("p",{text:hY.labelTrustAuthorDescription_3()});var i=n.modalEl.createDiv("modal-button-container");return i.createEl("button",{text:hY.buttonEnablePlugins(),onclick:function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.close(),[4,this.app.plugins.setEnable(!0)];case 1:return e.sent(),this.app.setting.open(),this.app.setting.openTabById("community-plugins"),[2]}}))}))}}),i.createEl("button",{text:hY.buttonDontTrustAuthor(),onclick:function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.close(),[4,this.app.plugins.setEnable(!1)];case 1:return e.sent(),this.app.setting.open(),this.app.setting.openTabById("community-plugins"),[2]}}))}))}}),n}return f(t,e),t}(ZA),hY=Qf.setting.thirdPartyPlugin,dY=nW("obsidianmd/obsidian-releases","community-plugins.json"),pY=hL((function(){return g(void 0,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,WA(dY).json];case 1:if(e=t.sent(),!Array.isArray(e))throw new Error("Failed to parse community plugins.");return[2,e]}}))}))}),3e5,6e4),fY=nW("obsidianmd/obsidian-releases","community-plugin-stats.json"),mY=hL((function(){return WA(fY).json}),3e5,6e4),vY=nW("obsidianmd/obsidian-releases","community-plugin-deprecation.json"),gY={},yY={download:Qf.setting.thirdPartyPlugin.labelByPopularity,release:Qf.setting.thirdPartyPlugin.labelByReleased,alphabetical:Qf.setting.thirdPartyPlugin.labelAlphabetical,update:Qf.setting.thirdPartyPlugin.labelByUpdated},bY=function(e){function t(t,n,i){var r=e.call(this)||this;return r.lastSave=0,r.manager=null,r.instance=null,r.enabled=!1,r.commands=[],r.ribbonItems=[],r.mobileFileInfo=[],r.hasStatusBarItem=!1,r.statusBarEl=null,r.addedButtonEls=[],r.views={},r.onConfigFileChange=mc(r.handleConfigFileChange,50),r.app=t,r.instance=n,r.manager=i,r}return f(t,e),t.prototype.init=function(){var e=this.instance;e.init&&e.init(this.app,this)},t.prototype.enable=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m;return y(this,(function(v){switch(v.label){case 0:if(this.enabled)return[2];for(this.enabled=!0,n=(t=this).instance,i=t.views,r=t.app,o=0,a=this.commands;o<a.length;o++)s=a[o],r.commands.addCommand(s);for(l=0,c=this.ribbonItems;l<c.length;l++)u=c[l],h=r.workspace.leftRibbon.addRibbonItemButton(u.id,u.icon,u.title,u.callback),this.addedButtonEls.push(h);if(Zl.isMobile)for(d=0,p=this.mobileFileInfo;d<p.length;d++)f=p[d],r.workspace.addMobileFileInfo(f);for(m in this.hasStatusBarItem&&(this.statusBarEl=r.statusBar.registerStatusBarItem(),this.statusBarEl.addClass("plugin-"+this.instance.id.toLowerCase().replace(/[^_a-zA-Z0-9-]/,"-"))),i)i.hasOwnProperty(m)&&this.app.viewRegistry.registerView(m,i[m]);return n.onEnable?[4,n.onEnable(r,this)]:[3,2];case 1:v.sent(),v.label=2;case 2:return e&&n.onUserEnable&&n.onUserEnable(r),this.load(),this.manager.requestSaveConfig(),this.manager.trigger("change",this),[2]}}))}))},t.prototype.disable=function(e){if(this.enabled){this.enabled=!1;var t=this,n=t.instance,i=t.views,r=t.app;n.onDisable&&n.onDisable(r,this),e&&n.onUserDisable&&n.onUserDisable(r);for(var o=0,a=this.commands;o<a.length;o++){var s=a[o];r.commands.removeCommand(s.id)}for(var l=0,c=this.addedButtonEls;l<c.length;l++){c[l].detach()}for(var u=0,h=this.ribbonItems;u<h.length;u++){var d=h[u];r.workspace.leftRibbon.removeRibbonAction(d.id)}for(var p in this.statusBarEl&&this.statusBarEl.detach(),i)i.hasOwnProperty(p)&&(this.app.viewRegistry.unregisterView(p),e&&r.workspace.detachLeavesOfType(p));this.unload(),this.manager.requestSaveConfig(),this.manager.trigger("change",this)}},t.prototype.getModifiedTime=function(){return g(this,void 0,Promise,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:e=this.instance.id,t=this.manager.app,n=t.vault.getConfigFile(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.vault.adapter.stat(n)];case 2:return[2,i.sent().mtime];case 3:return i.sent(),[2,0];case 4:return[2]}}))}))},t.prototype.handleConfigFileChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.instance.onExternalSettingsChange?[4,this.getModifiedTime()]:[2];case 1:return e=t.sent(),this.lastSave<e&&this.instance.onExternalSettingsChange(),this.lastSave=e,[2]}}))}))},t.prototype.loadData=function(){return g(this,void 0,Promise,(function(){var e;return y(this,(function(t){return e=this.instance.id,[2,this.manager.app.vault.readConfigJson(e)]}))}))},t.prototype.saveData=function(e){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return t=this.instance.id,n=this.manager.app,i=Date.now(),this.lastSave=i,[4,n.vault.writeConfigJson(t,e,{mtime:i})];case 1:return r.sent(),[2]}}))}))},t.prototype.deleteData=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.manager.app.vault.deleteConfigJson(this.instance.id)];case 1:return e.sent(),[2]}}))}))},t.prototype.registerViewType=function(e,t){this.views[e]=t},t.prototype.registerGlobalCommand=function(e){e.name=this.instance.name+": "+e.name,this.commands.push(e)},t.prototype.registerRibbonItem=function(e,t,n){var i=this.instance.id+":"+e;this.ribbonItems.push({id:i,title:e,icon:t,callback:n,hidden:!1})},t.prototype.registerStatusBarItem=function(){this.hasStatusBarItem=!0},t.prototype.registerMobileFileInfo=function(e){this.mobileFileInfo.push({renderCallback:e})},t.prototype.addSettingTab=function(e){var t=this;this.app.setting.addSettingTab(e),this.register((function(){return t.app.setting.removeSettingTab(e)}))},t}(xA),wY=["file-explorer","global-search","switcher","graph","backlink","outgoing-link","tag-pane","page-preview","daily-notes","templates","note-composer","command-palette","slash-command","editor-status","starred","markdown-importer","zk-prefixer","random-note","outline","word-count","slides","audio-recorder","workspaces","file-recovery","publish","sync"],kY=function(e){function t(t){var n=e.call(this)||this;return n.plugins={},n.config={},n.requestSaveConfig=mc(n.saveConfig.bind(n),500),n.app=t,n.app.vault.on("raw",n.onRaw.bind(n)),n}return f(t,e),t.prototype.onRaw=function(e){if(Yc(e)===this.app.vault.configDir&&"json"===Qc(e)){var t=Xc(e),n=this.plugins[t];n&&n.enabled&&n.onConfigFileChange()}},t.prototype.getPluginById=function(e){var t=this.plugins;return t.hasOwnProperty(e)?t[e]:null},t.prototype.getEnabledPluginById=function(e){var t=this.plugins;if(t.hasOwnProperty(e)){var n=t[e];if(n.enabled)return n.instance}return null},t.prototype.loadPlugin=function(e){var t=this.app,n=this.plugins;if(n.hasOwnProperty(e.id))throw new Error("Plugin ".concat(e.name," has already been loaded"));var i=new bY(t,e,this);return i.init(),n[e.id]=i,e},t.prototype.getEnabledPlugins=function(){var e=this.plugins,t=[];for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i.enabled&&t.push(i)}return t},t.prototype.enable=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return t=(e=this).app,n=e.plugins,i={},[4,t.vault.readConfigJson("core-plugins")];case 1:return(r=d.sent())?Array.isArray(r)?[4,t.vault.readConfigJson("core-plugins-migration")]:[3,3]:[3,4];case 2:for((o=d.sent())&&"object"==typeof o&&(i=o),a=new Set(r),s=0,l=wY;s<l.length;s++)u=l[s],n.hasOwnProperty(u)&&(i[u]=a.has(u));return[3,4];case 3:"object"==typeof r&&(i=r),d.label=4;case 4:for(u in c=[],n)n.hasOwnProperty(u)&&(h=n[u],i.hasOwnProperty(u)?i[u]&&c.push(h.enable(!1)):(h.instance.defaultOn&&c.push(h.enable(!1)),this.requestSaveConfig()));return[4,Promise.all(c)];case 5:return d.sent(),this.config=i,[2]}}))}))},t.prototype.saveConfig=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:for(o in t=(e=this).app,n=e.plugins,i=e.config,r=[],n)n.hasOwnProperty(o)&&(i[o]=n[o].enabled,n[o].enabled&&r.push(o));return[4,t.vault.writeConfigJson("core-plugins",i)];case 1:return a.sent(),[2]}}))}))},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(sw),CY="backlink",MY=function(){function e(){this.id="backlink",this.name=Qf.plugins.backlinks.name(),this.description=Qf.plugins.backlinks.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerStatusBarItem(),t.registerViewType(CY,(function(e){return new EY(e)})),t.registerGlobalCommand({id:"backlink:open",name:Qf.plugins.backlinks.actionShow(),icon:"lucide-link",callback:function(){n.app.workspace.ensureSideLeaf(CY,"right",{active:!0})}}),t.registerGlobalCommand({id:"backlink:open-backlinks",name:Qf.plugins.backlinks.actionOpenForCurrent(),icon:"lucide-link",checkCallback:this.openBacklinksForActiveFile.bind(this)}),t.registerGlobalCommand({id:"backlink:toggle-backlinks-in-document",name:Qf.plugins.backlinks.actionToggleBacklinksInDocument(),icon:"lucide-link",checkCallback:this.toggleBacklinksInDocument.bind(this)})},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s=this;return y(this,(function(l){switch(l.label){case 0:return t.registerEvent(e.workspace.on("file-open",this.onFileOpen,this)),t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.metadataCache.on("resolved",this.updateBacklinks,this)),(n=this.plugin.statusBarEl)&&(n.addClass("mod-clickable"),n.addEventListener("click",(function(){s.app.workspace.ensureSideLeaf(CY,"right",{active:!0,reveal:!0})}))),i=this,o=(r=Object).assign,a=[{}],[4,t.loadData()];case 1:return i.options=o.apply(r,a.concat([l.sent()])),this.app.workspace.backlinkInDocument=this.options.backlinkInDocument,t.addSettingTab(new xY(e,t,this)),[2]}}))}))},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},this.app.workspace.backlinkInDocument=this.options.backlinkInDocument,[2]}}))}))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.onUserDisable=function(e){e.workspace.detachLeavesOfType(CY);for(var t=0,n=e.workspace.getLeavesOfType(AY);t<n.length;t++){var i=n[t],r=i.getViewState();r.state.backlinks=!1,i.setViewState(r)}e.workspace.requestSaveLayout()},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(CY,"right",{reveal:!1})},e.prototype.onFileMenu=function(e,t,n,i){var r=this;!Zl.isMobile&&t instanceof ww&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(Qf.plugins.backlinks.actionOpen()).setIcon("links-coming-in").onClick((function(){return g(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"horizontal").setViewState({type:CY,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))})),t instanceof ww&&i&&i.view instanceof LY&&i.view.canToggleBacklinks()&&e.addItem((function(e){return e.setSection("pane").setTitle(Qf.plugins.backlinks.menuOptBacklinksInDocument()).setChecked(!!(null==i?void 0:i.view.getState().backlinks)).setIcon("links-coming-in").onClick((function(){var e=i.view;e instanceof LY&&e.toggleBacklinks()}))}))},e.prototype.onFileOpen=function(e){this.file=e instanceof ww?e:null,this.updateBacklinks()},e.prototype.updateBacklinks=function(){var e=this.file,t=this.plugin.statusBarEl;if(t){if(!e)return t.setText(""),void t.hide();var n=0,i=e.path,r=this.app.metadataCache.resolvedLinks;for(var o in r)o!==i&&r.hasOwnProperty(o)&&r[o].hasOwnProperty(i)&&(n+=r[o][i]);var a=Qf.nouns.backlinkWithCount({count:n});t.setText(a),t.show()}},e.prototype.openBacklinksForActiveFile=function(e){var t=this.app.workspace,n=t.getActiveFile();if(n){if(!e)t.splitActiveLeaf("vertical").setViewState({type:CY,active:!0,group:t.activeLeaf,state:{file:n.path}});return!0}},e.prototype.toggleBacklinksInDocument=function(e){var t=this.app.workspace.getActiveViewOfType(LY);if(t&&t.canToggleBacklinks())return e||t.toggleBacklinks(),!0},e}(),EY=function(e){function t(t){var n=e.call(this,t)||this;n.icon="links-coming-in";var i=n.contentEl;return n.backlink=n.addChild(new SY(n.app,i)),n.requestUpdate(),n}return f(t,e),t.prototype.getDisplayText=function(){return!this.file||Zl.isMobile?Qf.plugins.backlinks.name():Qf.plugins.backlinks.tabTitle({displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return CY},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return Object.assign(t,this.backlink.getState())},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return i.sent(),[4,this.backlink.setState(t)];case 2:return i.sent(),[2]}}))}))},t.prototype.showSearch=function(){this.backlink.setShowSearch(!0),this.backlink.searchComponent.inputEl.focus()},t.prototype.onResize=function(){this.backlink.onResize()},t.prototype.update=function(){this.leaf.updateHeader();var e=this.backlink;e.file=this.file,e.tooltipPlacement=this.getSideTooltipPlacement(),e.update()},t}(ZP),SY=function(e){function t(t,n,i){var r=e.call(this)||this;r.collapseAll=!1,r.extraContext=!1,r.sortOrder="alphabetical",r.isShowingSearch=!1,r.searchQuery=null,r.backlinkFile=null,r.backlinkCollapsed=!1,r.backlinkHeaderEl=null,r.backlinkCountEl=null,r.backlinkQueue=null,r.unlinkedFile=null,r.unlinkedCollapsed=!1,r.unlinkedHeaderEl=null,r.unlinkedCountEl=null,r.unlinkedAliases="",r.unlinkedQueue=null,r.app=t;var o=r.headerDom=new XP(r.app,n);r.collapseAllButtonEl=o.addNavButton("lucide-list",Qf.plugins.search.labelCollapseResults(),r.onToggleCollapseClick.bind(r)),r.extraContextButtonEl=o.addNavButton("lucide-move-vertical",Qf.plugins.search.labelMoreContext(),r.onToggleMoreContextClick.bind(r)),o.addSortButton(rO,oO,(function(e){return r.setSortOrder(e)}),(function(){return r.sortOrder})),r.showSearchButtonEl=o.addNavButton("lucide-search",Qf.plugins.backlinks.labelShowSearch(),r.onToggleShowSearch.bind(r)),r.searchComponent=new WI(o.navHeaderEl).setPlaceholder(Qf.plugins.search.promptStartSearch()).onChange(mc(r.updateSearch.bind(r),300,!0)).then((function(e){Rx(e.clearButtonEl,Qf.plugins.search.tooltipClearSearch()),e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(Zl.isMobile&&xw(),r.updateSearch())})),e.containerEl.hide()}));var a=n.createDiv("backlink-pane");i=i||a;var s=r.backlinkHeaderEl=a.createDiv("tree-item-self is-clickable");s.createSpan("tree-item-icon collapse-icon",(function(e){mx(e,"right-triangle")})),s.createDiv({cls:"tree-item-inner",text:Qf.plugins.backlinks.labelLinkedMentions()}),s.addEventListener("click",r.toggleBacklinkCollapsed.bind(r)),r.backlinkCountEl=s.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.backlinkDom=new pO(r.app,a.createDiv("search-result-container"),Qf.plugins.backlinks.labelNoBacklinks(),i);var l=r.unlinkedHeaderEl=a.createDiv("tree-item-self is-clickable");return l.createSpan("tree-item-icon collapse-icon",(function(e){mx(e,"right-triangle")})),l.createDiv({cls:"tree-item-inner",text:Qf.plugins.backlinks.labelUnlinkedMentions()}),l.addEventListener("click",r.toggleUnlinkedCollapsed.bind(r)),r.unlinkedCountEl=l.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.unlinkedDom=new pO(r.app,a.createDiv("search-result-container"),Qf.plugins.backlinks.labelNoUnlinkedMentions(),i),r.setUnlinkedCollapsed(!0,!1),r}return f(t,e),t.prototype.onload=function(){var e=this.app,t=e.vault;this.registerEvent(e.metadataCache.on("resolve",this.onMetadataChanged,this)),this.registerEvent(t.on("create",this.onFileChanged,this)),this.registerEvent(t.on("modify",this.onFileChanged,this)),this.registerEvent(t.on("rename",this.onFileRename,this)),this.registerEvent(t.on("delete",this.onFileDeleted,this))},t.prototype.onToggleCollapseClick=function(){this.setCollapseAll(!this.collapseAll)},t.prototype.setCollapseAll=function(e){e!==this.collapseAll&&(this.collapseAll=e,this.backlinkDom.setCollapseAll(e),this.unlinkedDom.setCollapseAll(e),this.collapseAllButtonEl.toggleClass("is-active",e),this.app.workspace.requestSaveLayout())},t.prototype.onToggleMoreContextClick=function(){this.setExtraContext(!this.extraContext)},t.prototype.setExtraContext=function(e){e!==this.extraContext&&(this.extraContext=e,this.backlinkDom.setExtraContext(e),this.unlinkedDom.setExtraContext(e),this.extraContextButtonEl.toggleClass("is-active",e),this.app.workspace.requestSaveLayout())},t.prototype.getState=function(){return{collapseAll:this.collapseAll,extraContext:this.extraContext,sortOrder:this.sortOrder,showSearch:this.isShowingSearch,searchQuery:this.searchComponent.getValue(),backlinkCollapsed:this.backlinkCollapsed,unlinkedCollapsed:this.unlinkedCollapsed}},t.prototype.setState=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return t=e.collapseAll,n=e.extraContext,i=e.sortOrder,r=e.showSearch,o=e.searchQuery,a=e.backlinkCollapsed,s=e.unlinkedCollapsed,isBoolean(t)&&this.setCollapseAll(t),isBoolean(n)&&this.setExtraContext(n),isBoolean(r)&&this.setShowSearch(r),String.isString(i)&&aO.hasOwnProperty(i)&&this.setSortOrder(i),isBoolean(a)?[4,this.setBacklinkCollapsed(a,!1)]:[3,2];case 1:l.sent(),l.label=2;case 2:return isBoolean(s)?[4,this.setUnlinkedCollapsed(s,!1)]:[3,4];case 3:l.sent(),l.label=4;case 4:return String.isString(o)&&(this.searchComponent.setValue(o),this.updateSearch()),[2]}}))}))},t.prototype.onToggleShowSearch=function(){this.setShowSearch(!this.isShowingSearch),this.isShowingSearch&&this.searchComponent.inputEl.focus()},t.prototype.setShowSearch=function(e){e!==this.isShowingSearch&&(this.isShowingSearch=e,this.searchComponent.containerEl.toggle(e),this.showSearchButtonEl.toggleClass("is-active",e),e||(this.searchComponent.setValue(""),this.updateSearch()),this.app.workspace.requestSaveLayout())},t.prototype.setSortOrder=function(e){e!==this.sortOrder&&(this.sortOrder=e,this.backlinkDom.sortOrder=e,this.backlinkDom.changed(),this.unlinkedDom.sortOrder=e,this.unlinkedDom.changed(),this.app.workspace.requestSaveLayout())},t.prototype.onResize=function(){this.backlinkDom.onResize(),this.unlinkedDom.onResize()},t.prototype.updateSearch=function(){var e=this.searchComponent.getValue(),t=this.searchQuery;if(!(!t&&!e||t&&t.query===e))try{if(e){var n=new UP(this.app,e,!1);n.matcher?this.searchQuery=n:this.searchQuery=null}else this.searchQuery=null;this.backlinkFile=null,this.unlinkedFile=null,this.update()}catch(e){new JA(e.message),console.log(e)}},t.prototype.toggleBacklinkCollapsed=function(){this.setBacklinkCollapsed(!this.backlinkCollapsed,!0)},t.prototype.setBacklinkCollapsed=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e===this.backlinkCollapsed?[2]:(this.backlinkCollapsed=e,[4,this.setSectionCollapsed(this.backlinkHeaderEl,this.backlinkDom,e,t)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.backlinkDom.infinityScroll.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},t.prototype.toggleUnlinkedCollapsed=function(){this.setUnlinkedCollapsed(!this.unlinkedCollapsed,!0)},t.prototype.setUnlinkedCollapsed=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e===this.unlinkedCollapsed?[2]:(this.unlinkedCollapsed=e,[4,this.setSectionCollapsed(this.unlinkedHeaderEl,this.unlinkedDom,e,t)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.backlinkDom.infinityScroll.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},t.prototype.updateHeaderTooltip=function(e,t){LD(e,t),Rx(e,t?Qf.interface.tooltip.clickToExpand():Qf.interface.tooltip.clickToCollapse(),{placement:this.tooltipPlacement})},t.prototype.setSectionCollapsed=function(e,t,n,i){return g(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return this.updateHeaderTooltip(e,n),[4,t.toggle(n,i)];case 1:return r.sent(),this.update(),[2]}}))}))},t.prototype.onMetadataChanged=function(e){var t=this.backlinkQueue;if(t&&t.add(e),this.onFileChanged(e),e===this.unlinkedFile){var n="",i=this.app.metadataCache.getFileCache(e);if(i){var r=MS(i.frontmatter);r&&(n=JSON.stringify(r))}this.unlinkedAliases!==n&&this.recomputeUnlinked(e)}},t.prototype.onFileChanged=function(e){var t=this.unlinkedQueue;t&&t.add(e)},t.prototype.onFileRename=function(e){if(e===this.unlinkedFile)this.recomputeBacklink(e),this.recomputeUnlinked(e);else{this.onFileChanged(e);var t=this.backlinkQueue;t&&t.add(e)}},t.prototype.onFileDeleted=function(e){var t=this.unlinkedQueue;t&&t.remove(e);var n=this.backlinkQueue;n&&n.remove(e),this.backlinkDom.removeResult(e),this.unlinkedDom.removeResult(e)},t.prototype.update=function(){var e=this.file;this.backlinkFile!==e&&this.recomputeBacklink(e),this.unlinkedFile!==e&&this.recomputeUnlinked(e),this.updateHeaderTooltip(this.backlinkHeaderEl,this.backlinkCollapsed),this.updateHeaderTooltip(this.unlinkedHeaderEl,this.unlinkedCollapsed)},t.prototype.passSearchFilter=function(e,t){var n=this.searchQuery;if(n&&!n.match(e,t))return!1;return!0},t.prototype.recomputeBacklink=function(e){var t=this;this.stopBacklinkSearch();var n=this.backlinkCollapsed,i=this.backlinkCountEl;if(n)i.hide();else{this.backlinkFile=e;var r=this.app,o=this.backlinkDom;if(i.show(),i.setText("0"),o.emptyResults(),e){var a=this.app.metadataCache,s=function(){i.setText(String(o.getMatchCount())),o.changed()},l=this.backlinkQueue=new pL({onStart:function(){o.startLoader()},onStop:function(){o.stopLoader(),s()},onCancel:function(){t.backlinkQueue=null,s()}});o.emptyResults();var c=r.vault.getMarkdownFiles();c.sort(sO(o.sortOrder)),l.addList(c);var u=function(){return C(this,arguments,(function(){var t,n,i,r,s,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:p.trys.push([0,8,9,14]),t=!0,n=M(l.generator()),p.label=1;case 1:return[4,k(n.next())];case 2:return i=p.sent(),(c=i.done)?[3,7]:(d=i.value,t=!1,function(t){var n=t.path,i=a.resolvedLinks;return i.hasOwnProperty(n)&&i[n].hasOwnProperty(e.path)}(r=d)?[4,k(r)]:[3,5]);case 3:return[4,p.sent()];case 4:return p.sent(),[3,6];case 5:o.removeResult(r),p.label=6;case 6:return t=!0,[3,1];case 7:return[3,14];case 8:return s=p.sent(),u={error:s},[3,14];case 9:return p.trys.push([9,,12,13]),t||c||!(h=n.return)?[3,11]:[4,k(h.call(n))];case 10:p.sent(),p.label=11;case 11:return[3,13];case 12:if(u)throw u.error;return[7];case 13:return[7];case 14:return[2]}}))}))}(),h=mL(r.vault.generateFiles(u,!0),{batchSize:2,beforePause:s});g(t,void 0,void 0,(function(){var t,n,i,r,s,c,u,d,p,f,m;return y(this,(function(v){switch(v.label){case 0:v.trys.push([0,5,6,11]),t=function(){m=s.value,i=!1;var t=m.file,r=m.content;if(l.runnable.isCancelled())return{value:void 0};if(e===t)return"continue";var c=!1,u={},h=a.getFileCache(t);if(!h)return o.removeResult(t),"continue";if(!n.passSearchFilter(t,r))return"continue";var d=[];GS(h,(function(n){(function(t,n){var i=_S(n.link),r=a.getFirstLinkpathDest(i,t);return r&&r===e})(t.path,n)&&d.push(n)})),u.content=[],u.properties=[];for(var p=0,f=d;p<f.length;p++){var v=f[p];if(AS(v))u.content.push([v.position.start.offset,v.position.end.offset]);else if(LS(v)){var g=v.key.split("."),y=g[0],b=g.slice(1),w=void 0;if(b){w=[];for(var k=0,C=b;k<C.length;k++){var M=C[k],E=Number(M);w.push(Number.isNaN(E)?M:E)}}u.properties.push({key:y,subkey:w,pos:[0,v.original.length]})}c=!0}c?o.addResult(t,u,r).renderContentMatches():o.removeResult(t)},n=this,i=!0,r=M(h),v.label=1;case 1:return[4,r.next()];case 2:if(s=v.sent(),d=s.done)return[3,4];if("object"==typeof(c=t()))return[2,c.value];v.label=3;case 3:return i=!0,[3,1];case 4:return[3,11];case 5:return u=v.sent(),p={error:u},[3,11];case 6:return v.trys.push([6,,9,10]),i||d||!(f=r.return)?[3,8]:[4,f.call(r)];case 7:v.sent(),v.label=8;case 8:return[3,10];case 9:if(p)throw p.error;return[7];case 10:return[7];case 11:return[2]}}))}))}}},t.prototype.stopBacklinkSearch=function(){var e=this.backlinkQueue;e&&!e.runnable.isCancelled()&&(e.runnable.cancel(),this.backlinkFile=null),this.backlinkQueue=null},t.prototype.recomputeUnlinked=function(e){var t=this;this.stopUnlinkedSearch();var n=this.unlinkedCollapsed,i=this.unlinkedCountEl;if(n)i.hide();else{this.unlinkedFile=e,this.unlinkedAliases="";var r=this.app,o=this.unlinkedDom;if(i.show(),i.setText("0"),o.emptyResults(),e){var a=[new RegExp($L(e.basename),"gi")],s=this.app.metadataCache.getFileCache(e);if(s){var l=MS(s.frontmatter);if(l){for(var c=0,u=l;c<u.length;c++){var h=u[c];h&&a.push(new RegExp($L(h),"gi"))}this.unlinkedAliases=JSON.stringify(l)}}var d=function(){i.setText(String(o.getMatchCount()))},p=this.unlinkedQueue=new pL({onStart:function(){o.startLoader()},onStop:function(){o.stopLoader(),d()},onCancel:function(){t.unlinkedQueue=null}});o.emptyResults();var f=r.vault.getMarkdownFiles();f.sort(aO[o.sortOrder]),p.addList(f);var m=p.generator(),v=mL(r.vault.generateFiles(m,!0),{beforePause:d});g(t,void 0,void 0,(function(){var t,n,i,s,l,c,u,h,d,p,f,m,g,b,w,k,C,E,S,x,T,D,A,L,P;return y(this,(function(y){switch(y.label){case 0:y.trys.push([0,5,6,11]),t=!0,n=M(v),y.label=1;case 1:return[4,n.next()];case 2:if(i=y.sent(),D=i.done)return[3,4];if(P=i.value,t=!1,s=P.file,l=P.content,e===s)return[3,3];if(r.metadataCache.isUserIgnored(s.path))return[3,3];if(c=r.metadataCache.getFileCache(s),!this.passSearchFilter(s,l))return[3,3];for(u=!1,h=[],d=0,p=a;d<p.length;d++)for((f=p[d]).lastIndex=0,m=f.exec(l);m;)g=f.lastIndex,b=g-m[1].length,h.push([b,g]),m=f.exec(l);for((w={}).content=[],k=function(e){var t=jS(c,(function(t){return t.position.start.offset<=e[0]&&t.position.end.offset>=e[1]}));if(c&&c.frontmatterPosition){var n=c.frontmatterPosition;n&&n.start.offset<=e[0]&&n.end.offset>=e[1]&&(t=!0)}t||(u=!0,w.content.push(e))},C=0,E=h;C<E.length;C++)S=E[C],k(S);u?(x=o.addResult(s,w,l),this.addLinkFunction(x,e,s),x.separateMatches=!0,x.renderContentMatches()):o.removeResult(s),y.label=3;case 3:return t=!0,[3,1];case 4:return[3,11];case 5:return T=y.sent(),A={error:T},[3,11];case 6:return y.trys.push([6,,9,10]),t||D||!(L=n.return)?[3,8]:[4,L.call(n)];case 7:y.sent(),y.label=8;case 8:return[3,10];case 9:if(A)throw A.error;return[7];case 10:return[7];case 11:return[2]}}))}))}}},t.prototype.stopUnlinkedSearch=function(){var e=this.unlinkedQueue;e&&!e.runnable.isCancelled()&&(e.runnable.cancel(),this.unlinkedFile=null),this.unlinkedQueue=null},t.prototype.addLinkFunction=function(e,t,n){var i=this;e.onMatchRender=function(r,o){o.createEl("button",{cls:"search-result-file-match-replace-button",text:Qf.plugins.backlinks.labelLinkButtonText()}).addEventListener("click",(function(a){return g(i,void 0,void 0,(function(){var i,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return a.preventDefault(),o.detach(),e.invalidate(),i=this.app.vault,s=r[0],l=r[1],[4,i.read(n)];case 1:return c=d.sent(),u=c.slice(s,l),h=this.app.fileManager.generateMarkdownLink(t,n.path,"",u),c=c.slice(0,s)+h+c.slice(l),[4,i.modify(n,c)];case 2:return d.sent(),[2]}}))}))}))}},t}(xA),xY=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new NI(t).setName(Qf.plugins.backlinks.optionBacklinkInDocument()).setDesc(Qf.plugins.backlinks.optionBacklinkInDocumentDesc()).addToggle((function(t){return t.setValue(n.backlinkInDocument).onChange((function(t){n.backlinkInDocument=t,e.app.workspace.backlinkInDocument=t,e.plugin.saveData(n)}))}))},t}(aY),TY=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.onAccept=i,r.key=n.key,r.type=n.type,r.setTitle("Edit property");var o=function(e){e.isComposing||"Enter"!==e.key||(e.preventDefault(),r.onSubmit())};return new NI(r.contentEl).setName("Property").addText((function(e){e.setDisabled(!0),e.setValue(r.key),e.onChange((function(e){r.key=e})),e.inputEl.addEventListener("keydown",o)})),new NI(r.contentEl).setName("Type").addDropdown((function(e){for(var t,n=r.app.metadataTypeManager.registeredTypeWidgets,i=0,a=Object.values(n);i<a.length;i++){var s=a[i];s.reservedKeys&&!(null===(t=s.reservedKeys)||void 0===t?void 0:t.contains(r.type))||e.addOption(s.type,s.name())}e.setValue(r.type),e.onChange((function(e){r.type=e})),e.selectEl.addEventListener("keydown",o)})),r.addCancelButton(),r.addButton("mod-cta","Save",r.onSubmit.bind(r)),r}return f(t,e),t.prototype.onSubmit=function(){var e;this.shouldRestoreSelection=!1,this.app.metadataTypeManager.setType(this.key,this.type),null===(e=this.onAccept)||void 0===e||e.call(this),this.close()},t}(XA),DY=function(e){function t(t){var n=e.call(this,t.app,t.contentEl,t)||this;return n.type="source",n.requestOnInternalDataChange=mc((function(){return n.view.onInternalDataChange()}),10),n.requestSaveFolds=mc((function(){return n.view.onMarkdownFold()}),500),n.view=t,n.app=t.app,n.search.applyScope=function(e){n.view.scope=e},t.addChild(n),n.updateReadableLineLength(),n.updateOptions(),n.cm.scrollDOM.addEventListener("contextmenu",(function(e){if(!e.defaultPrevented&&!Zl.isMobile){var i=e.targetNode;n.sizerEl.contains(i)&&!i.parentElement.closest(".cm-gutters")||n.app.workspace.trigger("markdown-viewport-menu",PA.forEvent(e).addSections(["view",""]),t,"source","gutter")}})),n}return f(t,e),t.prototype.show=function(){e.prototype.show.call(this),this.sizerEl.prepend(this.view.metadataEditor.containerEl),this.sizerEl.prepend(this.view.inlineTitleEl),this.sizerEl.appendChild(this.view.backlinksEl)},t.prototype.set=function(t,n){e.prototype.set.call(this,t,n)},t.prototype.clear=function(){e.prototype.clear.call(this),this.propertiesExtension=null},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.propertiesExtension=null},t.prototype.getSelection=function(){return this.editor.getSelection()},t.prototype.beforeUnload=function(){this.requestOnInternalDataChange.cancel(),this.requestSaveFolds.run(),this.saveHistory()},t.prototype.getEphemeralState=function(e){var t=this.cm,n=t.state.doc,i=dm(n,t.state.selection.main.anchor),r=dm(n,t.state.selection.main.head);e.cursor={from:{line:i.line,ch:i.ch},to:{line:r.line,ch:r.ch}}},t.prototype.setEphemeralState=function(e){this.setState(e),this.setHighlight(e)},t.prototype.setState=function(e){var t=this.editor,n=e.cursor,i=t.getScrollInfo(),r=e.focus&&(!Zl.isMobile||e.focusOnMobile);if(n&&n.from&&(Zl.isDesktop&&(r=!0),t.setSelection(n.from,n.to),t.scrollTo(i.left,i.top)),e.focusMetadata){var o=this.view.metadataEditor;this.view.canShowProperties()&&o&&o.properties.length>0?(o.focus(),r=!1):r=!0}r&&this.focus(),e.hasOwnProperty("scroll")&&this.applyScroll(e.scroll)},t.prototype.setHighlight=function(e){var t=this,n=this.editor;if(void 0!==e.startLoc&&void 0!==e.endLoc){var i=e.startLoc,r=e.endLoc,o={line:i.line,ch:i.col},a=r?{line:r.line,ch:r.col}:{line:n.lastLine(),ch:n.getLine(n.lastLine()).length};this.highlightSearchMatches([{from:o,to:a}]),this.isScrolling=!0,this.onScroll()}else if(void 0!==e.line&&e.line>=0){var s=e.line;o={line:s,ch:0},a={line:s,ch:n.getLine(s).length};n.setSelection(a,a),this.highlightSearchMatches([{from:o,to:a}]),this.isScrolling=!0,this.onScroll()}else if(void 0!==e.propertyMatches){var l=e.propertyMatches;l.length>0&&("hidden"===this.app.vault.getConfig("propertiesInDocument")||this.view.canShowProperties()?g(t,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,OF(this.app)];case 1:return(e=t.sent())&&e.focusKey(l[0].key),[2]}}))})):(n.setSelection({line:0,ch:0}),this.isScrolling=!0,this.onScroll()))}else if(void 0!==e.match){var c=e.match,u=function(e,t){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i];n.push(o[0],o[1])}for(var a=Nm(e,n),s=[],l=0;l<t.length;l++)s.push({from:a[2*l],to:a[2*l+1]});return s}(c.content,c.matches);this.highlightSearchMatches(u),this.isScrolling=!0,this.onScroll()}},t.prototype.highlightSearchMatches=function(e,t,n,i){void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=!0);var r=this.editor;if(0!==e.length){r.addHighlights(e,"is-flashing",i,!0);var o=e[0];n&&r.setCursor(o.from),t&&r.scrollIntoView({from:o.to,to:o.from},!0)}else r.removeHighlights("is-flashing")},t.prototype.getFoldInfo=function(){var t,n=e.prototype.getFoldInfo.call(this),i=null!==(t=null==n?void 0:n.folds)&&void 0!==t?t:[],r=null==n?void 0:n.lines;return this.view.metadataEditor.properties.length>0&&this.view.metadataEditor.collapsed&&i.push({from:0,to:0}),i.length>0?{folds:i,lines:null!=r?r:this.editor.lineCount()}:null},t.prototype.getDynamicExtensions=function(){var t=e.prototype.getDynamicExtensions.call(this);if(!this.sourceMode){var n=this.propertiesExtension;n||(n=this.propertiesExtension=eA(this,this.view)),t.push(n)}return t},t.prototype.onUpdate=function(t,n){e.prototype.onUpdate.call(this,t,n);var i=t.transactions;n&&(this.view.requestSave(),this.requestSaveFolds(),this.requestOnInternalDataChange()),(gm(i,Fd)||gm(i,Od))&&this.requestSaveFolds()},t.prototype.onResize=function(){e.prototype.onResize.call(this);var t=this.containerEl;t.offsetParent&&this.updateBottomPadding(t.clientHeight)},t.prototype.updateBottomPadding=function(e){var t=this.view.backlinksEl,n=Math.round(e/2),i=n+"px";t.isShown()&&(i="100px",t.style.minHeight=Math.max(0,n-100)+"px"),this.cm.contentDOM.style.paddingBottom=i},t.prototype.updateReadableLineLength=function(){var e=this.app.vault.getConfig("readableLineLength");this.editorEl.toggleClass("is-readable-line-width",e)},t.prototype.onConfigChanged=function(t){e.prototype.onConfigChanged.call(this,t),"readableLineLength"===t&&this.updateReadableLineLength()},t}(RR),AY="markdown",LY=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-file",n.modeButtonEl=null,n.modes={},n.currentMode=null,n.scroll=null,n.showBacklinks=!1,n.rawFrontmatter=null,n.editMode=n.registerMode(new DY(n)),n.sourceMode={cmEditor:n.editor},n.previewMode=n.registerMode(new kB(n));var i=n.inlineTitleEl=createDiv("inline-title");i.contentEditable="true",i.spellcheck=n.app.vault.getConfig("spellcheck"),i.autocapitalize="on",i.tabIndex=-1,i.enterKeyHint=Zl.isAndroidApp?"enter":"done",i.addEventListener("focus",(function(){n.fileBeingRenamed=n.file})),i.addEventListener("blur",(function(){return n.onInlineTitleBlur()})),i.addEventListener("input",(function(){return n.onTitleChange(i)})),i.addEventListener("paste",(function(e){return n.onTitlePaste(i,e)})),i.addEventListener("keydown",n.onTitleKeydown.bind(n)),n.metadataEditor=new BF(n.app,n),n.addChild(n.metadataEditor),n.backlinksEl=createDiv("embedded-backlinks"),n.backlinksEl.hide(),n.modeButtonEl=n.addAction("lucide-book-open","",n.onSwitchView.bind(n));var r=n.modes;for(var o in r)r.hasOwnProperty(o)&&r[o].hide();var a=n.app.vault.getConfig("defaultViewMode");a&&r.hasOwnProperty(a)||(a="source"),n.currentMode=r[a],n.containerEl.setAttribute("data-mode",n.getMode()),n.currentMode.show(),n.updateButtons(),n.showBacklinks=n.app.workspace.backlinkInDocument,n.updateShowBacklinks(),n.addChild(n.previewMode);var s=0;return n.containerEl.addEventListener("wheel",(function(e){if(n.app.vault.getConfig("baseFontSizeAction")){var t=e.ctrlKey,i=Date.now();if(t&&!(s>i-500)){if(t&&0!==e.deltaY){if(Ul&&Number.isInteger(e.deltaY))return;var r=n.app.vault.getConfig("baseFontSize");e.deltaY<0?r++:r--,r=Math.clamp(r,10,30),n.app.vault.setConfig("baseFontSize",r)}}else s=i}}),{passive:!0}),n}return f(t,e),Object.defineProperty(t.prototype,"editor",{get:function(){return this.editMode.editor},enumerable:!1,configurable:!0}),t.prototype.saveFrontmatter=function(e){var t=DL(this.getViewData(),e);this.setViewData(t,!1),this.onInternalDataChange(),this.save()},t.prototype.getFile=function(){return this.file},t.prototype.shiftFocusAfter=function(){this.setEphemeralState({focus:!0,focusOnMobile:!0,cursor:{from:{line:0,ch:0}}})},t.prototype.shiftFocusBefore=function(){this.canShowProperties()&&!this.metadataEditor.hasFocus()&&this.metadataEditor.focus({bottom:!0})||this.inlineTitleEl.isShown()&&Sw(this.inlineTitleEl)},t.prototype.onInlineTitleBlur=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this.inlineTitleEl,[4,this.saveTitle(e)];case 1:return t.sent()||e.setText(this.file.basename),Bx(),[2]}}))}))},t.prototype.onload=function(){e.prototype.onload.call(this);var t=this.leaf;this.registerEvent(t.workspace.on("quick-preview",this.onExternalDataChange,this)),this.registerEvent(t.workspace.on("resize",this.onResize,this)),this.registerEvent(t.workspace.on("css-change",this.onCssChange,this)),this.registerEvent(this.app.vault.on("config-changed",this.onConfigChanged,this)),this.onResize()},t.prototype.onClose=function(){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e.prototype.onClose.call(this)];case 1:return t.sent(),this.editMode.destroy(),[2]}}))}))},t.prototype.getViewType=function(){return AY},t.prototype.canAcceptExtension=function(e){return GT.contains(e)},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.mode=this.getMode(),t.source=this.editMode.sourceMode,t.backlinks=this.showBacklinks,this.backlinks&&(t.backlinkOpts=this.backlinks.getState()),t},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return i=!1,r=t.mode,o=t.backlinks,a=t.backlinkOpts,s=t.source,r?(l=this.modes).hasOwnProperty(r)?[4,this.setMode(l[r])]:[3,2]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return c=this.editMode,"boolean"==typeof s&&c.sourceMode!==s&&(c.toggleSource(),i=!0),isBoolean(o)&&(this.showBacklinks=o,this.updateShowBacklinks(),o&&a&&"object"==typeof a&&this.backlinks.setState(a)),i&&(n.layout=!0),[4,e.prototype.setState.call(this,t,n)];case 3:return u.sent(),[2]}}))}))},t.prototype.getEphemeralState=function(){var t=e.prototype.getEphemeralState.call(this);return this.currentMode.getEphemeralState(t),null!==this.scroll&&(t.scroll=this.scroll),t},t.prototype.setEphemeralState=function(t){var n=t.rename;if(n){var i=void 0;if("start"===n?i=!0:"end"===n&&(i=!1),this.inlineTitleEl.isShown())(this.currentMode===this.editMode?this.editMode.cm.scrollDOM.scrollTop:this.previewMode.getScroll())<.5&&(Sw(this.inlineTitleEl,i),delete t.rename)}e.prototype.setEphemeralState.call(this,t);var r=t.subpath;if(r){var o=JS(this.app.metadataCache.getFileCache(this.file),r);o&&(t.line=o.start.line,t.startLoc=o.start,t.endLoc=o.end||null)}this.currentMode.setEphemeralState(t),t.hasOwnProperty("scroll")&&(this.scroll=t.scroll)},t.prototype.onUnloadFile=function(t){return g(this,void 0,Promise,(function(){return y(this,(function(n){return this.onMarkdownFold(),this.currentMode.beforeUnload(),this.rawFrontmatter=null,this.metadataEditor.clear(),this.editMode.setCssClass(null),[2,e.prototype.onUnloadFile.call(this,t)]}))}))},t.prototype.registerMode=function(e){return this.modes[e.type]=e,e},t.prototype.getMode=function(){return this.currentMode.type},t.prototype.getHoverSource=function(){return this.getMode()},t.prototype.toggleMode=function(){var e=this.leaf,t=e.getViewState();t.state.mode="preview"===t.state.mode?"source":"preview",e.setViewState(t,{focus:!0})},t.prototype.updateButtons=function(){var e=this.currentMode,t=this.modeButtonEl,n=Qf.interface.menu.modClickOpenNewTab({key:Sk.Mod});"source"===e.type?(mx(t,"lucide-book-open"),Rx(t,Qf("interface.menu.edit-view")+"\n"+Qf("interface.menu.switch-to-read-view")+"\n"+n)):(mx(t,"lucide-edit-3"),Rx(t,Qf("interface.menu.read-view")+"\n"+Qf("interface.menu.switch-to-edit-view")+"\n"+n))},t.prototype.getSyncViewState=function(){var t=e.prototype.getSyncViewState.call(this);return delete t.state.mode,delete t.state.source,delete t.eState.cursor,t},t.prototype.setMode=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e&&this.currentMode!==e?(n=(t=this).currentMode,i=t.scroll,"source"!==n.type?[3,2]:[4,this.save()]):[2,!1];case 1:o.sent(),o.label=2;case 2:return r=n.getFoldInfo(),this.app.foldManager.save(this.file,r),n.hide(),this.currentMode=e,e.show(),null!==this.data&&e.set(this.data,!1),e.onResize(),null!==i&&e.setEphemeralState({scroll:i}),e.applyFoldInfo(r),this.metadataEditor.setCollapse(!!r&&r.folds.some((function(e){return 0===e.from})),!1),this.updateButtons(),this.containerEl.setAttribute("data-mode",this.getMode()),[2,!0]}}))}))},t.prototype.getViewData=function(){return this.currentMode.get()},t.prototype.clear=function(){var e=this,t=e.currentMode,n=e.editMode,i=e.modes;for(var r in t===n&&this.onMarkdownFold(),this.scroll=null,i)i.hasOwnProperty(r)&&i[r].clear()},Object.defineProperty(t.prototype,"path",{get:function(){return this.file.path},enumerable:!1,configurable:!0}),t.prototype.onSwitchView=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e.preventDefault(),t=this.leaf,(n=this.getState()).mode="preview"===this.getMode()?"source":"preview",i={type:AY,state:n},Ak.isModEvent(e)&&(r=this.app.workspace,t=r.createLeafBySplit(this.leaf),i.active=!0,i.group=this.leaf),[4,t.setViewState(i)];case 1:return o.sent(),[2]}}))}))},t.prototype.canToggleBacklinks=function(){return"preview"===this.getMode()||this.editMode instanceof DY},t.prototype.toggleBacklinks=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.getState()).backlinks=!e.backlinks,[4,this.leaf.setViewState({type:AY,state:e})];case 1:return t.sent(),this.app.workspace.requestSaveLayout(),[2]}}))}))},t.prototype.updateShowBacklinks=function(){var e=this.showBacklinks,t=this.app,n=this.backlinks;e&&!n?(this.backlinksEl.show(),this.backlinks=this.addChild(new SY(t,this.backlinksEl)),this.updateBacklinks()):!e&&n&&(this.removeChild(n),this.backlinksEl.empty(),this.backlinksEl.hide(),this.backlinks=null),this.currentMode===this.editMode&&this.editMode.onResize()},t.prototype.updateBacklinks=function(){var e=this.backlinks;e&&(e.file=this.file,e.update())},t.prototype.onLoadFile=function(t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return this.inlineTitleEl.setText(this.getDisplayText()),[4,e.prototype.onLoadFile.call(this,t)];case 1:return n.sent(),this.updateBacklinks(),[2]}}))}))},t.prototype.onRename=function(t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return t===this.file&&this.inlineTitleEl.setText(t.basename),[4,e.prototype.onRename.call(this,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onMarkdownScroll=function(){var e=this.currentMode.getScroll();return null!==e&&(this.scroll=e),this.app.workspace.trigger("markdown-scroll",this),this.syncState(!1)},t.prototype.onMarkdownFold=function(){this.app.foldManager.save(this.file,this.currentMode.getFoldInfo())},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n);var r=this.getMode();t.addItem((function(e){return e.setSection("pane").setTitle(Qf.interface.menu.toggleReadingView()).setChecked("preview"===r).setIcon("lucide-book-open").onClick(i.onSwitchView.bind(i))})),t.addItem((function(e){return e.setSection("action").setTitle(Qf.interface.menu.addProperty()).setDisabled(!i.canShowProperties()).setIcon("lucide-plus-circle").onClick((function(){return g(i,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return t=(e=this).app,n=e.leaf,t.workspace.setActiveLeaf(n),[4,OF(this.app)];case 1:return i.sent().addProperty(),[2]}}))}))}))})),"source"===r&&t.addItem((function(e){return e.setSection("pane").setTitle(Qf.interface.menu.toggleSourceMode()).setIcon("lucide-code-2").setChecked(!!i.getState().source).onClick((function(){var e=i.getState();e.source=!e.source,i.leaf.setViewState({type:AY,state:e})}))})),t.addItem((function(e){return e.setSection("find").setTitle(Qf.interface.menu.find()).setIcon("lucide-file-search").onClick((function(){return i.showSearch()}))})),t.addItem((function(e){return e.setSection("find").setDisabled("source"!==r).setTitle(Qf.interface.menu.replace()).setIcon("lucide-file-search").onClick((function(){return i.showSearch(!0)}))})),Zl.canExportPdf&&t.addItem((function(e){return e.setSection("action").setTitle(Qf.commands.exportPdf()).setIcon("lucide-file-down").onClick((function(e){return i.printToPdf()}))}))},t.prototype.onResize=function(){this.currentMode.onResize()},t.prototype.onCssChange=function(){this.editMode.onCssChange()},t.prototype.loadFrontmatter=function(e){var t,n=vS(e).frontmatter;if(null===this.rawFrontmatter||this.rawFrontmatter!==n){this.rawFrontmatter=n;var i={};try{if("object"!=typeof(i=null!==(t=UD(n))&&void 0!==t?t:{})||Array.isArray(i))throw new Error("Frontmatter must be a valid object!")}catch(e){i=null}this.editMode.setCssClass(SS(i)),this.metadataEditor.synchronize(i)}},t.prototype.onInternalDataChange=function(){var e=this.currentMode.get();this.data!==e&&(this.data=e,this.leaf.workspace.onQuickPreview(this.file,this.data),this.loadFrontmatter(e))},t.prototype.onExternalDataChange=function(e,t){e===this.file&&this.setData(t,!1)},t.prototype.setViewData=function(e,t){var n=this.currentMode,i=this.modes;if(t){for(var r in this.scroll=null,i)i.hasOwnProperty(r)&&i[r].set(e,!0);var o=this.app.foldManager.load(this.file);o&&n.applyFoldInfo(o),this.metadataEditor.setCollapse(!!o&&o.folds.some((function(e){return 0===e.from})),!1)}else n.set(e,!1);this.loadFrontmatter(e)},t.prototype.onConfigChanged=function(e){"spellcheck"===e&&(this.inlineTitleEl.spellcheck=this.app.vault.getConfig("spellcheck"))},t.prototype.updateOptions=function(){var e=this.modes;for(var t in e)e.hasOwnProperty(t)&&e[t].updateOptions()},t.prototype.showSearch=function(e){void 0===e&&(e=!1),this.currentMode.showSearch(e)},t.prototype.canShowProperties=function(){return("source"!==this.getMode()||!this.editMode.sourceMode)&&"visible"===this.app.vault.getConfig("propertiesInDocument")},t.prototype.undo=function(){this.editMode.editor.undo()},t.prototype.redo=function(){this.editMode.editor.redo()},t.prototype.editProperty=function(){var e=this.metadataEditor.focusedLine;e&&new TY(this.app,e.entry,(function(){e.focusProperty()})).open()},t.prototype.collapseProperties=function(e){this.metadataEditor.setCollapse(e,!1)},t.prototype.toggleCollapseProperties=function(){"hidden"!==this.app.vault.getConfig("propertiesInDocument")&&this.metadataEditor.containerEl.isShown()?this.metadataEditor.toggleCollapse():this.editMode.toggleFoldFrontmatter()},t.prototype.metadataHasFocus=function(){return this.metadataEditor.hasFocus()},t.prototype.getSelection=function(){return this.currentMode.getSelection()},t.prototype.printToPdf=function(){new IY(this.app,this.file).open()},t.prototype.triggerClickableToken=function(e,t){var n=this;if("internal-link"===e.type)setTimeout((function(){n.app.workspace.openLinkText(e.text,n.file.path,t)}),100);else if("external-link"===e.type)window.open(e.text);else if("tag"===e.type){var i=e.text;i.startsWith("#")||(i="#"+i);var r=this.app.internalPlugins.getEnabledPluginById("global-search");r&&r.openGlobalSearch("tag:"+i)}},t.prototype.handleCut=function(e){this.metadataEditor.hasFocus()&&this.metadataEditor.handleCut(e)},t.prototype.handleCopy=function(e){this.metadataEditor.hasFocus()&&this.metadataEditor.handleCopy(e)},t.prototype.handlePaste=function(e){e.clipboardData.getData("obsidian/properties")&&this.metadataEditor.handlePaste(e)},t.VIEW_TYPE=AY,t}(Z_),PY=Qf.editor.printModal,IY=function(e){function t(t,n){var i=e.call(this,t)||this;i.file=n,i.modalEl.addClass("mod-narrow"),i.titleEl.setText(PY.title());var r=i.contentEl;r.createEl("p",{cls:"u-muted",text:PY.caption({filename:n.basename})});var o=t.vault.getConfig("pdfExportSettings");return new NI(r).setName(PY.settingIncludeFileName()).addToggle((function(e){return e.setValue(o.includeName).then((function(e){return i.includeName=e}))})),new NI(r).setName(PY.settingPageSize()).addDropdown((function(e){return e.addOption("A3",PY.settingPageSizeA3()).addOption("A4",PY.settingPageSizeA4()).addOption("A5",PY.settingPageSizeA5()).addOption("Legal",PY.settingPageSizeLegal()).addOption("Letter",PY.settingPageSizeLetter()).addOption("Tabloid",PY.settingPageSizeTabloid()).setValue(o.pageSize).then((function(e){return i.pageSize=e}))})),new NI(r).setName(PY.settingLandscape()).addToggle((function(e){return e.setValue(o.landscape).then((function(e){return i.landscape=e}))})),new NI(r).setName(PY.settingMargin()).addDropdown((function(e){return e.addOption("0",PY.settingMarginDefault()).addOption("2",PY.settingMarginMinimal()).addOption("1",PY.settingMarginNone()).setValue(o.margin).then((function(e){return i.marginsType=e}))})),new NI(r).setName(PY.settingDownscalePercent()).addSlider((function(e){return e.setLimits(10,100,1).setDynamicTooltip().setValue(o.downscalePercent).then((function(e){return i.scaleFactor=e}))})),r.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:PY.buttonExportToPdf()},(function(e){e.addEventListener("click",(function(){return g(i,void 0,void 0,(function(){var e,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e={includeName:this.includeName.getValue(),pageSize:this.pageSize.getValue(),landscape:this.landscape.getValue(),margin:this.marginsType.getValue(),downscalePercent:this.scaleFactor.getValue()},t.vault.setConfig("pdfExportSettings",e),(n={}).includeName=e.includeName,n.pageSize=e.pageSize,n.landscape=e.landscape,n.marginsType=parseInt(e.margin),1!==n.marginsType&&2!==n.marginsType||(n.margins={top:0,left:0,bottom:0,right:0}),n.scaleFactor=e.downscalePercent,n.scale=Math.clamp(n.scaleFactor/100,.1,2),n.open=!0,i=this.file,[4,Mf("electron").remote.dialog.showSaveDialog({defaultPath:i.basename+".pdf",filters:[{name:"PDF Files",extensions:["pdf"]},{name:"All Files",extensions:["*"]}],properties:["showOverwriteConfirmation"]})];case 1:return(r=o.sent()).canceled||!r.filePath?[2]:(n.filepath=r.filePath,this.close(),[4,this.printToPdf(n)]);case 2:return o.sent(),[2]}}))}))}))}))})),i}return f(t,e),t.prototype.printToPdf=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:iG.instance.setMessage(Qf.dialogue.preparingPdf()).show(),t=document.body.className,document.body.addClass("theme-light"),document.body.removeClass("theme-dark"),document.body.removeClass("theme-dark"),n=document.body.createDiv("print"),(i=new xA).load(),r=function(){n.detach(),i.unload(),document.body.className=t,iG.instance.hide()},n.addEventListener("click",r),a.label=1;case 1:return a.trys.push([1,5,6,7]),[4,this.print(n,i,e.includeName)];case 2:return a.sent(),[4,sleep(200)];case 3:return a.sent(),[4,(s=e,new Promise((function(e){var t=Mf("electron").ipcRenderer;t.once("print-to-pdf",e),t.send("print-to-pdf",s)})))];case 4:return a.sent(),new JA("PDF Saved to ".concat(e.filepath)),[3,7];case 5:return o=a.sent(),console.error(o),new JA("Failed to save PDF."),[3,7];case 6:return r(),[7];case 7:return[2]}var s}))}))},t.prototype.testPrint=function(){return g(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return(e=document.body.createDiv("print")).addEventListener("click",(function(){e.detach(),t.unload()})),(t=new xA).load(),[4,this.print(e,t,!0)];case 1:return n.sent(),[2]}}))}))},t.prototype.print=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k;return y(this,(function(y){switch(y.label){case 0:return i=e.createDiv("markdown-preview-view markdown-rendered"),o=(r=this).app,a=r.file,i.toggleClass("rtl",o.vault.getConfig("rightToLeft")),i.toggleClass("show-properties","hidden"!==o.vault.getConfig("propertiesInDocument")),n&&i.createEl("h1",{text:a.basename}),[4,this.app.vault.cachedRead(a)];case 1:for(s=y.sent(),l=pS(s),c=yS(l),u=bS(l),h=qT(u),d=createFragment(),p=function(e){"HR"===e.tagName?d.appendChild(e):d.createDiv({},(function(t){return t.appendChild(e)}))},f=0,m=Array.from(h.children);f<m.length;f++)v=m[f],p(v);return i.appendChild(d),i.addClasses(SS(c)),g=[],kB.postProcess(o,{docId:oc(16),sourcePath:a.path,frontmatter:c,promises:g,addChild:function(e){return t.addChild(e)},getSectionInfo:function(){return null},containerEl:i,el:i,displayMode:!0}),g.length>0?[4,Promise.all(g)]:[3,3];case 2:y.sent(),y.label=3;case 3:for(b=i.findAll("a.internal-link"),w=0,k=b;w<k.length;w++)k[w].removeAttribute("href");return[2,i]}}))}))},t}(ZA),FY={Mod:"CommandOrControl",Ctrl:"Ctrl",Meta:"Command",Alt:"Alt",Shift:"Shift"},OY=function(){function e(e){var t=this;this.requestRender=mc(this.render.bind(this),200),this.onLayoutChange=mc(this._onLayoutChange.bind(this),200),this.onWindowFrameChange=mc(this.updateWorkspace.bind(this),200),this.app=e,e.workspace.registerEditorExtension(NY()),e.workspace.on("layout-change",this.onLayoutChange),e.workspace.on("window-frame-change",this.onWindowFrameChange),Zl.isMacOS&&this.app.workspace.on("file-open",this.updateShareMenuItem,this),e.workspace.onLayoutReady((function(){return t.render()}))}return e.prototype._onLayoutChange=function(){this.updateViewState(),this.updateWorkspace()},e.prototype.updateViewState=function(){var t=this.app.workspace.getActiveFileView(),n=!1,i=!1,r=!1;t&&t instanceof LY&&(n=!0,r=!(i="preview"===t.getMode())&&t.editMode.sourceMode),e.updateMenuItems([{itemId:"markdown:toggle-preview",eState:{checked:i,enabled:n}},{itemId:"editor:toggle-source",eState:{checked:r,enabled:n&&!i}}])},e.prototype.updateWorkspace=function(){var t=this.app.workspace,n=t.leftSplit,i=t.rightSplit,r=activeWindow===window;e.updateMenuItems([{itemId:"app:toggle-left-sidebar",eState:{checked:!n.collapsed,enabled:r}},{itemId:"app:toggle-right-sidebar",eState:{checked:!i.collapsed,enabled:r}},{itemId:"app:toggle-ribbon",eState:{checked:document.body.hasClass("show-ribbon"),enabled:r}}])},e.prototype.updateShareMenuItem=function(t){var n=this.app.vault.adapter;n instanceof mu&&e.updateMenuItems([{itemId:"share-menu",eState:{sharingItem:{filePaths:t?[n.getFullPath(t.path)]:[]}}}],!0)},e.prototype.buildMenu=function(){var e=Qf.menuItems,t=w(w([],Zl.isMacOS?[{label:"Obsidian",submenu:[{before:["preferences-section"],appCommand:"app:open-settings",label:"Preferences..."},{type:"separator"}]}]:[],!0),[{label:"&File",submenu:w(w([{before:["open-section"],appCommand:"file-explorer:new-file",label:e.newFile()},{before:["open-section"],appCommand:"file-explorer:new-file-in-new-pane",label:e.newFileToTheRight()},{before:["open-section"],type:"separator"},{before:["open-section"],appCommand:"switcher:open",label:e.openSwitcher()},{before:["quit"],type:"separator"},{before:["quit"],appCommand:"workspace:close",label:e.closeTab()},{before:["quit"],appCommand:"workspace:close-window",label:e.closeWindow()}],Zl.isMacOS?[{before:["quit"],type:"separator"},{id:"share-menu",before:["quit"],enabled:!1,role:"shareMenu"}]:[],!0),[{before:["quit"],appCommand:"workspace:export-pdf",label:e.exportPdf()}],!1)},{label:"&Edit",submenu:[{id:"find-section",before:["speech-section"],type:"separator"},{before:["speech-section"],appCommand:"editor:open-search",label:e.find()},{before:["speech-section"],appCommand:"editor:open-search-replace",label:e.replace()},{type:"separator"}]},{label:"&Insert",submenu:[{appCommand:"editor:insert-wikilink",label:e.insertWikilink()},{appCommand:"editor:insert-link",label:e.insertMarkdownLink()},{appCommand:"editor:insert-callout",label:e.insertCallout()},{appCommand:"editor:insert-blockquote",label:e.insertQuote()},{type:"separator"},{appCommand:"editor:insert-codeblock",label:e.insertCodeblock()},{appCommand:"editor:insert-mathblock",label:e.insertMathBlock()},{appCommand:"editor:insert-table",label:e.insertTable()},{appCommand:"editor:insert-footnote",label:e.insertFootnote()},{type:"separator"},{type:"separator"},{appCommand:"editor:toggle-bullet-list",label:e.toggleBulletList()},{appCommand:"editor:toggle-numbered-list",label:e.toggleNumberedList()},{appCommand:"editor:toggle-checklist-status",label:e.toggleChecklist()},{type:"separator"},{appCommand:"editor:attach-file",label:e.insertAttachment()},{type:"separator"},{label:e.foldingMenu(),submenu:[{appCommand:"editor:fold-all",label:e.foldAll()},{appCommand:"editor:unfold-all",label:e.unfoldAll()},{type:"separator"},{appCommand:"editor:fold-more",label:e("fold-more")},{appCommand:"editor:fold-less",label:e("fold-less")}]}]},{label:"&Format",submenu:[{id:"heading-indeterminate",label:"Indeterminate heading level",type:"radio",visible:!1},{appCommand:"editor:set-heading-1",label:e.setHeading({level:1}),type:"radio"},{appCommand:"editor:set-heading-2",label:e.setHeading({level:2}),type:"radio"},{appCommand:"editor:set-heading-3",label:e.setHeading({level:3}),type:"radio"},{appCommand:"editor:set-heading-4",label:e.setHeading({level:4}),type:"radio"},{appCommand:"editor:set-heading-5",label:e.setHeading({level:5}),type:"radio"},{appCommand:"editor:set-heading-6",label:e.setHeading({level:6}),type:"radio"},{appCommand:"editor:set-heading-0",label:e.noHeading(),type:"radio"},{type:"separator"},{appCommand:"editor:toggle-bold",label:e.toggleBold(),type:"checkbox"},{appCommand:"editor:toggle-italics",label:e.toggleItalics(),type:"checkbox"},{appCommand:"editor:toggle-code",label:e.toggleCode(),type:"checkbox"},{appCommand:"editor:toggle-highlight",label:e.toggleHighlight(),type:"checkbox"},{type:"separator"},{appCommand:"editor:toggle-strikethrough",label:e.toggleStrikethrough(),type:"checkbox"},{appCommand:"editor:toggle-inline-math",label:e.toggleInlineMath(),type:"checkbox"},{appCommand:"editor:toggle-comments",label:e.toggleComment(),type:"checkbox"},{type:"separator"}]},{label:"&View",submenu:[{type:"checkbox",appCommand:"markdown:toggle-preview",label:e.readingView()},{type:"checkbox",appCommand:"editor:toggle-source",label:e.sourceMode()},{type:"separator"},{appCommand:"app:toggle-left-sidebar",label:e.toggleLeftSidebar(),type:"checkbox"},{appCommand:"app:toggle-right-sidebar",label:e.toggleRightSidebar(),type:"checkbox"},{type:"separator"},{appCommand:"app:toggle-ribbon",label:e.toggleRibbon(),type:"checkbox"},{type:"separator"},{appCommand:"workspace:split-vertical",label:e.splitRight()},{appCommand:"workspace:split-horizontal",label:e.splitDown()},{type:"separator"},{before:["developer-section"],label:e.navigateBack(),appCommand:"app:go-back"},{before:["developer-section"],label:e.navigateForward(),appCommand:"app:go-forward"},{before:["developer-section"],type:"separator"}]},{label:"&Help",role:"help",submenu:[{label:e.releaseNotes(),appCommand:"app:show-release-notes",before:["help-links"]},{appCommand:"app:show-debug-info",label:e.showDebugInfo()},{appCommand:"app:open-sandbox-vault",label:e.openSandbox()}]}],!1);return this.applyHotkeys(t),this.hideUnregisteredCommands(t),t},e.prototype.render=function(){var e=this.buildMenu();Ef((function(t){t.ipcRenderer.send("set-menu",{template:e})}))},e.prototype.getAcceleratorFromHotkey=function(e){if(!e)return"";var t=[];return xk.forEach((function(n){var i;(null===(i=e.modifiers)||void 0===i?void 0:i.contains(n))&&t.push(FY[n])})),e.key&&t.push(e.key.replace("Arrow","")),t.join("+")},e.prototype.applyHotkeys=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if("appCommand"in i){var r=this.app.hotkeyManager.getHotkeys(i.appCommand),o=this.app.hotkeyManager.getDefaultHotkeys(i.appCommand),a=(null==r?void 0:r[0])||(null==o?void 0:o[0])||null;i.accelerator=this.getAcceleratorFromHotkey(a),i.registerAccelerator=!1}"submenu"in i&&this.applyHotkeys(i.submenu)}},e.prototype.hideUnregisteredCommands=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];"appCommand"in i&&(this.app.commands.findCommand(i.appCommand)||(i.visible=!1)),"submenu"in i&&this.hideUnregisteredCommands(i.submenu)}},e.updateMenuItems=function(e,t){void 0===t&&(t=!1),Ef((function(n){n.ipcRenderer.send("update-menu-items",e,t)}))},e}();const BY=OY;function NY(){return[Xi.fromClass(function(){function e(e){this.view=e,this.update=mc(this.rawUpdate,500,!0)}return e.prototype.destroy=function(){this.update.cancel()},e.prototype.rawUpdate=function(e){var t=e.view.state,n=rf(t,t.selection.ranges[0]);OY.updateMenuItems([n.uniformHeading?{itemId:"editor:set-heading-".concat(n.headingLevel),eState:{checked:!0}}:{itemId:"heading-indeterminate",eState:{checked:!0}},{itemId:"editor:toggle-italics",eState:{checked:!!n.italic}},{itemId:"editor:toggle-bold",eState:{checked:!!n.bold}},{itemId:"editor:toggle-code",eState:{checked:!!n.code}},{itemId:"editor:toggle-highlight",eState:{checked:!!n.highlight}},{itemId:"editor:toggle-comments",eState:{checked:!!n.comment}},{itemId:"editor:toggle-strikethrough",eState:{checked:!!n.strikethrough}}])},e}())]}var RY=function(){function e(e){this.app=e}return e.prototype.cleanup=function(){var e=this.app,t=this.app.appId+"-note-fold-";for(var n in localStorage)if(n.startsWith(t)){var i=n.substr(t.length);e.vault.getAbstractFileByPath(i)||localStorage.removeItem(n)}},e.prototype.loadPath=function(e){return this.app.loadLocalStorage("note-fold-"+e)},e.prototype.load=function(e){return e?this.loadPath(e.path):null},e.prototype.savePath=function(e,t){return this.app.saveLocalStorage("note-fold-"+e,t)},e.prototype.save=function(e,t){e&&this.savePath(e.path,t)},e}(),HY=function(){function e(e){var t=this;this.isVisible=!1,this.app=e,this.showRibbonMenu=this.showRibbonMenu.bind(this),this.onRibbonMenuClick=this.showRibbonMenu,this.containerEl=createDiv("mobile-navbar",(function(n){n.createDiv("mobile-navbar-actions",(function(n){n.createDiv("mobile-navbar-action",(function(n){t.backButtonEl=WP(e,(function(){return e.workspace.activeLeaf}),"backward"),mx(t.backButtonEl,"lucide-chevron-left"),n.appendChild(t.backButtonEl)})),n.createDiv("mobile-navbar-action",(function(n){t.forwardButtonEl=WP(e,(function(){return e.workspace.activeLeaf}),"forward"),mx(t.forwardButtonEl,"lucide-chevron-right"),n.appendChild(t.forwardButtonEl)})),n.createDiv("mobile-navbar-action",(function(t){t.createSpan("clickable-icon",(function(e){mx(e,"lucide-plus-circle")})),t.addEventListener("click",(function(){var t,n;null===(n=null===(t=e.internalPlugins.getPluginById("switcher"))||void 0===t?void 0:t.instance)||void 0===n||n.onOpen()}))})),n.createDiv("mobile-navbar-action",(function(e){e.createDiv("clickable-icon",(function(e){t.tabButtonEl=e.createDiv("mobile-navbar-tabs-action")})),e.addEventListener("click",(function(e){e.preventDefault(),t.app.mobileTabSwitcher.show()})),e.addEventListener("contextmenu",(function(e){return t.app.mobileTabSwitcher.showTabManagementMenu(e)}))})),n.createDiv("mobile-navbar-action has-longpress-menu",(function(e){t.ribbonMenuItemEl=e.createSpan("clickable-icon",(function(e){e.addEventListener("click",(function(e){return t.onRibbonMenuClick(e)})),e.addEventListener("contextmenu",t.showRibbonMenu),mx(e,"lucide-menu")})),t.ribbonMenuFlairEl=e.createDiv("navbar-action-flair",(function(e){return mx(e,"chevrons-up-down")}))}))}))}));var n=function(){var n=0;e.workspace.iterateRootLeaves((function(){n++})),t.tabButtonEl.setText(String(n))};e.workspace.onLayoutReady((function(){n(),t.updateRibbonMenuItem()})),e.workspace.on("active-leaf-change",this.updateNavButtons,this),e.workspace.on("layout-change",n),Zl.isMobileApp&&(window.addEventListener("keyboardWillHide",(function(e){Zl.isMobile&&(e.hasPhysicalKeyboard?t.show():Pl((function(){return t.show()})))})),window.addEventListener("keyboardWillShow",(function(e){t.hide()}))),this.show()}return e.prototype.updateRibbonMenuItem=function(){var e,t=this.app.workspace.leftRibbon.items,n=this.app.vault.getConfig("mobileQuickRibbonItem");n&&(e=t.find((function(e){return e.id===n}))),this.ribbonMenuFlairEl.toggle(!!e),e?(this.onRibbonMenuClick=e.callback,mx(this.ribbonMenuItemEl,e.icon)):(this.onRibbonMenuClick=this.showRibbonMenu,mx(this.ribbonMenuItemEl,"lucide-menu"))},e.prototype.showRibbonMenu=function(e){e.preventDefault();for(var t=this.app.workspace.leftRibbon.items,n=this.app.vault.getConfig("mobileQuickRibbonItem"),i=new PA,r=function(e){if(e.hidden)return"continue";i.addItem((function(t){return t.setTitle(e.title).setIcon(e.icon).setChecked(n&&e.id===n).onClick((function(t){e.callback(t)}))}))},o=0,a=t;o<a.length;o++){r(a[o])}var s=this.ribbonMenuItemEl.getBoundingClientRect();i.setParentElement(this.ribbonMenuItemEl).showAtPosition({x:s.x,y:s.bottom,width:s.width,overlap:!0,left:!0})},e.prototype.updateNavButtons=function(){var e=this.app.workspace.activeLeaf;if(e){var t=e.history,n=t.backHistory,i=t.forwardHistory;this.backButtonEl.ariaDisabled=String(0===n.length),this.forwardButtonEl.ariaDisabled=String(0===i.length)}},e.prototype.show=function(){this.isVisible||this.app.mobileToolbar.isVisible||(this.isVisible=!0,this.app.dom.appContainerEl.appendChild(this.containerEl))},e.prototype.hide=function(){this.isVisible=!1,this.containerEl.detach()},e}(),VY=function(){function e(e,t){var n=this;this.app=e.app,this.leaf=e,this.switcher=t,this.containerEl=createDiv("mobile-tab",(function(i){var r=i.createDiv("mobile-tab-preview"),o=r.createDiv("mobile-tab-pin",(function(e){mx(e,"lucide-pin"),e.addEventListener("click",(function(e){e.preventDefault(),n.leaf.setPinned(!1)}))})),a=r.createDiv("close-button",(function(e){mx(e,"lucide-x"),e.addEventListener("click",(function(e){e.preventDefault(),n.containerEl.detach(),n.leaf.detach()}))}));o.toggle(e.pinned),a.toggle(!e.pinned),e.on("pinned-change",(function(){o.toggle(n.leaf.pinned),a.toggle(!n.leaf.pinned)}));var s=n.previewImgEl=r.createEl("img","mobile-tab-preview-embed");mx(n.placeholderEl=r.createDiv("mobile-tab-preview-empty"),e.getIcon()),s.src=t.cacheDir+"leaf-".concat(e.id,".png")+"?"+Date.now(),s.addEventListener("error",(function(e){n.togglePlaceholder(!0)})),s.addEventListener("load",(function(t){n.togglePlaceholder(e.view instanceof KP)})),n.titleEl=i.createDiv({cls:"mobile-tab-title",text:e.getDisplayText()}),i.addEventListener("click",(function(e){e.defaultPrevented||(e.preventDefault(),n.onClick())})),i.addEventListener("contextmenu",(function(t){t.defaultPrevented||(t.preventDefault(),e.onOpenTabHeaderMenu(t,i))}))}))}return e.prototype.togglePlaceholder=function(e){this.placeholderEl.toggle(e),this.previewImgEl.toggle(!e)},e.prototype.onClick=function(){this.app.workspace.setActiveLeaf(this.leaf),this.switcher.hide()},e.prototype.render=function(){var e=this.containerEl,t=this.leaf;e.removeClass("is-active"),this.titleEl.setText(t.getDisplayText())},e}(),zY=function(){function e(e){var t=this;this.cacheDir="",this.tabPreviewLookup=new WeakMap,this.isVisible=!1,this.requestRender=mc((function(){return t.render()}),100),this.app=e,this.containerEl=createDiv("mobile-tab-switcher"),this.scrollEl=this.containerEl.createDiv("mobile-tab-switcher-scroll"),this.innerScrollEl=this.scrollEl.createDiv("mobile-tab-switcher-inner-scroll");var n=this.menuBarEl=this.containerEl.createDiv("mobile-tab-switcher-menubar");n.createDiv("mobile-tab-switcher-menu-spacer",(function(n){n.createDiv({cls:"clickable-icon"},(function(n){mx(n,"lucide-plus"),n.addEventListener("click",(function(n){e.commands.executeCommandById("workspace:new-tab"),t.hide()}))}))})),n.createDiv({cls:"mobile-tab-switcher-menu-button tappable"},(function(e){t.tabCountEl=e.createSpan(),mx(e.createSpan("mobile-tab-switcher-menu-button-chevron"),"lucide-chevron-down")})).addEventListener("click",(function(e){return t.showTabManagementMenu(e)})),n.createDiv("mobile-tab-switcher-menu-spacer",(function(e){e.createDiv({cls:"clickable-icon",text:Qf.dialogue.buttonDone()},(function(e){e.addEventListener("click",(function(e){t.hide()}))}))})),this.setupCacheDir(),Zl.isMobileApp&&pA&&pA.addListener("screenshotSaved",(function(e){for(var n=A.convertFileSrc(e.uri),i=0,r=t.innerScrollEl.findAll("img");i<r.length;i++){var o=r[i];if(o.src.startsWith(n))return void(o.src=n+"?"+Date.now())}})),e.workspace.on("layout-change",this.onLayoutChange,this)}return e.prototype.onLayoutChange=function(){this.isVisible&&this.requestRender()},e.prototype.setupCacheDir=function(){return g(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.app,Zl.isMobileApp&&fA?[4,fA.getUri({path:"".concat(e.appId,"/tab-preview"),directory:K_.Cache})]:[3,2];case 1:t=n.sent(),this.cacheDir=A.convertFileSrc(t.uri),this.cacheDir.endsWith("/")||(this.cacheDir+="/"),n.label=2;case 2:return[2]}}))}))},e.prototype.render=function(){var e=this,t=this.app,n=this.tabPreviewLookup,i=0;t.workspace.iterateRootLeaves((function(){i++}));var r=function(t){for(var i,r=e.innerScrollEl.createDiv("mobile-tab-group-container"),o=0,a=t.children;o<a.length;o++){var s=a[o],l=r.createDiv("mobile-tab-wrapper"),c=null!==(i=n.get(s))&&void 0!==i?i:new VY(s,e);n.set(s,c),c.render(),l.append(c.containerEl)}return r},o=[],a=function(e){for(var t=0,n=e.children;t<n.length;t++){var i=n[t];i instanceof RK?o.push(r(i)):i instanceof bG&&a(i)}};a(t.workspace.rootSplit),this.innerScrollEl.setChildrenInPlace(o),this.tabCountEl.setText(Qf.nouns.tabsWithCount({count:i}));var s=this.app.workspace.getMostRecentLeaf();if(s){var l=this.tabPreviewLookup.get(s);null==l||l.containerEl.addClass("is-active")}},e.prototype.show=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return this.isVisible=!0,EA(this),(e=this.app.workspace.getMostRecentLeaf())&&Zl.isMobileApp&&pA?(t=e.view,n=t.containerEl,t instanceof GP&&t.contentEl.isShown()&&(n=t.contentEl),document.body.addClass("is-screenshotting"),[4,nextFrame()]):[3,6];case 1:d.sent(),i=n.getBoundingClientRect(),r=i.x,o=i.y,a=i.width,s=i.height,l=a>0&&s>0?{x:Math.round(r),y:Math.round(o),width:Math.round(a),height:Math.round(s)}:void 0,d.label=2;case 2:return d.trys.push([2,4,5,6]),[4,pA.takeScreenshot({path:"".concat(this.app.appId,"/tab-preview/leaf-").concat(e.id,".png"),rect:l})];case 3:return d.sent(),[3,6];case 4:return c=d.sent(),console.error(c),[3,6];case 5:return document.body.removeClass("is-screenshotting"),[7];case 6:return this.render(),document.body.appendChild(this.containerEl),(u=this.app.workspace.getMostRecentLeaf())&&(null==(h=this.tabPreviewLookup.get(u))||h.containerEl.scrollIntoView({block:"nearest"})),wl(this.containerEl,new ml({duration:90,fn:"var(--anim-motion-swing)"}).addProp("opacity","0","1","").addProp("transform","scale(1.1)","scale(1)","")),[2]}}))}))},e.prototype.showTabManagementMenu=function(e){var t=this,n=PA.forEvent(e);n.addSections(["open","danger"]),n.addItem((function(e){return e.setTitle(Qf.commands.newTab()).setIcon("lucide-plus-circle").setSection("open").onClick((function(){t.app.commands.executeCommandById("workspace:new-tab")}))})).addItem((function(e){return e.setTitle(Qf.commands.undoCloseTab()).setSection("open").setIcon("lucide-undo-2").setDisabled(!t.app.workspace.hasUndoHistory()).onClick((function(){t.app.commands.executeCommandById("workspace:undo-close-pane")}))}));var i=this.app.workspace.getMostRecentLeaf(),r=[];i&&(r=i.parent.children.slice()),r.length>1&&n.addItem((function(e){return e.setTitle(Qf.interface.menu.closeTabsWithCount({count:r.length})).setIcon("lucide-archive-x").setDisabled(!i).setSection("danger").setWarning(!0).onClick((function(){if(i)for(var e=0,t=r;e<t.length;e++){t[e].detach()}}))})),this.isVisible||n.addItem((function(e){return e.setTitle(Qf.interface.menu.close()).setSection("danger").setDisabled(!i).setWarning(!0).setIcon("lucide-x").onClick((function(){null==i||i.detach()}))}))},e.prototype.hide=function(){var e=this.containerEl;this.isVisible=!1,SA(this),wl(e,new ml({duration:90,fn:"var(--anim-motion-swing)"}).addProp("opacity","1","0","").addProp("transform","scale(1)","scale(1.1)",""),(function(){return e.detach()}))},e.prototype.close=function(){this.hide()},e}(),qY=function(){function e(e){var t=this;this.isVisible=!1,this.lastCommandIds="",this.app=e;var n=this.wrapperEl=createDiv("mobile-toolbar"),i=this.containerEl=n.createDiv("mobile-toolbar-options-container");this.optionsListEl=i.createDiv("mobile-toolbar-options-list"),Zl.isIosApp&&Zl.isMobile&&(Iw(i,this.optionsListEl),i.createDiv("mobile-toolbar-floating-options",(function(e){e.createDiv("mobile-toolbar-option",(function(e){mx(e,"keyboard-toggle"),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){t.app.commands.executeCommandById("editor:toggle-keyboard",e),e.preventDefault()}))}))}))),this.update=mc(this.update.bind(this),10,!0)}return e.prototype.compileToolbar=function(){var e=this.app,t=this.optionsListEl,n=e.vault.getConfig("mobileToolbarCommands"),i=JSON.stringify(n);if(i!==this.lastCommandIds){t.empty();for(var r=e.commands,o=function(e){var n=r.findCommand(e);if(!n)return"continue";t.createDiv("mobile-toolbar-option",(function(t){var i=n.icon;i||(i="question-mark-glyph"),mx(t,i),t.addEventListener("click",(function(t){r.executeCommandById(e,t),t.preventDefault()})),t.addEventListener("mousedown",(function(e){e.preventDefault()}))}))},a=0,s=n;a<s.length;a++){o(s[a])}this.lastCommandIds=i}},e.prototype.update=function(){var e,t=this.app,n=this.isVisible;(null===(e=t.workspace.activeEditor)||void 0===e?void 0:e.editor.hasFocus())?n||this.show():n&&this.hide()},e.prototype.show=function(){var e=this;if(0!==this.app.vault.getConfig("mobileToolbarCommands").length){if(this.app.mobileNavbar.hide(),!this.isVisible){this.isVisible=!0,this.compileToolbar();var t=this,n=t.app,i=t.wrapperEl,r=t.containerEl;n.dom.appContainerEl.appendChild(i),document.body.addClass("mod-toolbar-open");var o=r.offsetHeight-1;r.style.opacity="0",r.style.transform="translateY(".concat(o,"px)"),Pl((function(){e.isVisible&&(wl(r,new ml({duration:150}).addProp("transform",null,"")),wl(r,new ml({duration:150}).addProp("opacity",null,"")))}))}}else this.hide()},e.prototype.hide=function(){this.isVisible=!1,this.wrapperEl.detach(),document.body.removeClass("mod-toolbar-open")},e}(),UY=Qf.plugins.search,_Y=function(){function e(){this.id="global-search",this.name=UY.name(),this.description=UY.desc(),this.defaultOn=!0,this.app=null,this.plugin=null,this.options={}}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerGlobalCommand({id:"global-search:open",name:UY.actionOpenSearch(),icon:"lucide-search",callback:function(){var t=window.getSelection().toString(),i=e.workspace.getActiveViewOfType(LY);if(i){var r=i.getSelection();r&&(t=r)}t?t.contains(" ")&&(t='"'.concat(t.replace(/\\/,"\\\\").replace(/"/,'\\"'),'"')):t=null,n.openGlobalSearch(t)},hotkeys:[oA(["Mod","Shift"],"F")]}),t.registerViewType(WY,(function(e){return new jY(e)}))},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("editor-menu",this.onEditorMenu,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{},[2]}}))}))},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(WY,"left",{reveal:!1})},e.prototype.onFileMenu=function(e,t,n){var i=this;"file-explorer-context-menu"===n&&t instanceof kw&&e.addItem((function(e){return e.setSection("action").setTitle(UY.menuOptSearchInFolder()).setIcon("lucide-folder-search").onClick((function(){i.openGlobalSearch('path:"'.concat(t.path,'/" '))}))}))},e.prototype.onEditorMenu=function(e,t){var n=this,i=t.getSelection();i&&e.addItem((function(e){return e.setTitle(UY.menuOptSearchFor({keyword:pc(i,25)})).setIcon("lucide-search").setSection("view").onClick((function(){i.contains(" ")&&(i='"'.concat(i.replace(/\\/,"\\\\").replace(/"/,'\\"'),'"')),n.openGlobalSearch(i)}))}))},e.prototype.openGlobalSearch=function(e){this.app.workspace.ensureSideLeaf(WY,"left",{active:!0,reveal:!0,state:{query:e}})},e.prototype.getGlobalSearchQuery=function(){var e,t=this.app.workspace.getLeavesOfType(WY);if(0===t.length)return"";var n=t[0].getViewState();return String.isString(null===(e=null==n?void 0:n.state)||void 0===e?void 0:e.query)?n.state.query:""},e}(),WY="search",jY=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-search",n.searchContainerEl=null,n.searchInfoEl=null,n.infoEl=null,n.resultCountEl=null,n.matchingCase=!1,n.explainSearch=!1,n.showParams=!1,n.searchQuery=null,n.requestSaveSearch=mc(n.saveSearch.bind(n),5e3,!0);var i=n.containerEl,r=createDiv("search-result-container mod-global-search");n.dom=new pO(n.app,r,UY.labelNoMatches());var o=mc(n.startSearch.bind(n),0),a=i.createDiv("search-row");return new WI(a).setPlaceholder(UY.promptStartSearch()).setClass("global-search-input-container").addRightDecorator((function(e){n.matchingCaseButtonEl=e,Rx(e,UY.labelMatchCase()),mx(e,"uppercase-lowercase-a"),e.addClass("clickable-icon"),e.addEventListener("click",(function(){return n.setMatchingCase(!n.matchingCase)}))})).onChange((function(e){n.dom.setFocusedItem(null),n.stopSearch(),e?o():(n.startSearch(),n.infoEl.hide())})).then((function(e){Rx(e.clearButtonEl,UY.tooltipClearSearch()),n.searchComponent=e,n.searchComponent.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(Zl.isMobile&&xw(),n.startSearch())})),Zl.isMobile&&e.containerEl.createDiv("search-input-suggest-button",(function(t){mx(t,"right-triangle"),t.addEventListener("click",(function(){_G.showOnce(n.app,e.inputEl,!0)}))}))})),n.searchInfoEl=i.createDiv({cls:"search-info-container"}),n.searchInfoEl.hide(),n.filterSectionToggleEl=a.createDiv("clickable-icon",(function(e){Rx(e,UY.labelToggleSearchSettings()),mx(e,"lucide-sliders-horizontal"),e.addEventListener("click",(function(e){n.toggleFilterSection()}))})),n.searchParamsContainerEl=i.createDiv("search-params",(function(e){new NI(e).setName(UY.labelCollapseResults()).setClass("mod-toggle").addToggle((function(e){n.collapseResultsToggle=e,e.setSmall().onChange((function(e){return n.setCollapseAll(e)}))})),new NI(e).setName(UY.labelMoreContext()).setClass("mod-toggle").addToggle((function(e){n.extraContextToggle=e,e.setSmall().onChange((function(e){return n.setExtraContext(e)}))})),new NI(e).setName(UY.labelExplainSearchTerm()).setClass("mod-toggle").addToggle((function(e){n.explainSearchToggle=e,e.setSmall().onChange((function(e){return n.setExplainSearch(e)}))}))})),n.searchParamsContainerEl.hide(),n.infoEl=i.createDiv("search-results-info",(function(e){e.createDiv("clickable-icon search-results-result-count",(function(e){n.resultCountEl=e.createSpan(),e.createDiv("more-options-icon",(function(e){mx(e,"lucide-more-horizontal")})),e.addEventListener("click",(function(t){if(!e.classList.contains("has-active-menu")){var i=(new PA).addSections(["action"]).addItem((function(e){return e.setSection("action").setIcon("lucide-copy").setTitle(UY.labelCopySearchResults()).onClick(n.onCopyResultsClick.bind(n))}));n.app.workspace.trigger("search:results-menu",i,n),i.setParentElement(e).showAtMouseEvent(t)}}))}));for(var t=n.sortOrderDropdown=new KI(e).onChange((function(e){n.setSortOrder(e),n.app.workspace.requestSaveLayout()})),i=0,r=rO;i<r.length;i++)for(var o=0,a=r[i];o<a.length;o++){var s=a[o],l=oO[s]();t.addOption(s,l)}t.setValue("alphabetical")})),n.infoEl.hide(),n.containerEl.appendChild(r),n.scope=new Tk(n.app.scope),n.scope.register([],"Enter",n.onKeyEnterInFocus.bind(n)),n.scope.register(["Mod"],"Enter",n.onKeyEnterInFocus.bind(n)),n.scope.register([],"ArrowDown",n.onKeyArrowDownInFocus.bind(n)),n.scope.register([],"ArrowUp",n.onKeyArrowUpInFocus.bind(n)),n.scope.register([],"ArrowLeft",n.onKeyArrowLeftInFocus.bind(n)),n.scope.register([],"ArrowRight",n.onKeyArrowRightInFocus.bind(n)),n.scope.register(["Shift"],"ArrowUp",n.onKeyShowMoreBefore.bind(n)),n.scope.register(["Shift"],"ArrowDown",n.onKeyShowMoreAfter.bind(n)),n.queue=new fO(n.app,n.dom),n.addChild(n.queue),Zl.isMobile||_G.attach(n.app,n.searchComponent.inputEl,!0),n}return f(t,e),t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){return y(this,(function(t){return this.registerDomEvent(this.leaf.tabHeaderEl,"click",this.onTabHeaderClick.bind(this)),[2,e.prototype.onOpen.call(this)]}))}))},t.prototype.toggleFilterSection=function(){this.showParams=!this.showParams,this.filterSectionToggleEl.toggleClass("is-active",this.showParams),this.searchParamsContainerEl.toggle(this.showParams)},t.prototype.saveSearch=function(){var e=this.searchComponent.getValue();if(e){var t=this.app.loadLocalStorage("recent-searches");t&&Array.isArray(t)||(t=[]),t.remove(e),t.unshift(e),t.length>20&&(t=t.slice(0,20)),this.app.saveLocalStorage("recent-searches",t)}},t.prototype.getDisplayText=function(){return UY.name()},t.prototype.getViewType=function(){return WY},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.query=this.getQuery(),t.matchingCase=this.matchingCase,t.explainSearch=this.explainSearch,t.collapseAll=this.dom.collapseAll,t.extraContext=this.dom.extraContext,t.sortOrder=this.dom.sortOrder,t},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return c.sent(),i=t.query,r=t.matchingCase,o=t.explainSearch,a=t.collapseAll,s=t.extraContext,l=t.sortOrder,(String.isString(i)||null===i)&&this.setQuery(i),isBoolean(r)&&this.setMatchingCase(r),isBoolean(o)&&this.explainSearchToggle.setValue(o),isBoolean(a)&&this.collapseResultsToggle.setValue(a),isBoolean(s)&&this.extraContextToggle.setValue(s),String.isString(l)&&aO.hasOwnProperty(l)&&(this.sortOrderDropdown.setValue(l),this.setSortOrder(l)),[2]}}))}))},t.prototype.setEphemeralState=function(t){if(e.prototype.setEphemeralState.call(this,t),t.focus){var n=this.searchComponent.inputEl;n.setSelectionRange(0,n.value.length),n.focus()}},t.prototype.setMatchingCase=function(e){e!==this.matchingCase&&(this.matchingCase=e,this.matchingCaseButtonEl.toggleClass("is-active",e),this.app.workspace.requestSaveLayout(),""!==this.searchComponent.getValue()&&this.startSearch())},t.prototype.setExplainSearch=function(e){e!==this.explainSearch&&(this.explainSearch=e,this.searchInfoEl.toggle(e),this.app.workspace.requestSaveLayout())},t.prototype.setCollapseAll=function(e){e!==this.dom.collapseAll&&(this.dom.setCollapseAll(e),this.app.workspace.requestSaveLayout())},t.prototype.setExtraContext=function(e){e!==this.dom.extraContext&&(this.dom.setExtraContext(e),this.app.workspace.requestSaveLayout())},t.prototype.onCopyResultsClick=function(e){e.preventDefault(),new GY(this.app,this.dom).open()},t.prototype.onKeyEnterInFocus=function(e){var t=this.dom.focusedItem;t&&(t instanceof dO||t instanceof uO)&&t.onResultClick(e)},t.prototype.onKeyArrowUpInFocus=function(e){e.preventDefault(),this.dom.changeFocusedItem("backwards")},t.prototype.onKeyArrowDownInFocus=function(e){e.defaultPrevented||(e.preventDefault(),xw(),this.dom.changeFocusedItem("forwards"))},t.prototype.onKeyArrowLeftInFocus=function(e){var t;if(!this.searchComponent.inputEl.isActiveElement()){e.preventDefault();var n=this.dom.focusedItem;if(n instanceof uO)n.setCollapse(!0,!0);else if(n.parent instanceof uO){n.parent.setCollapse(!0,!0);for(var i=n;null===(t=i.parent)||void 0===t?void 0:t.collapsed;)i=i.parent;this.dom.setFocusedItem(i)}else n===this.dom.infinityScroll.rootEl&&this.dom.setCollapseAll(!0)}},t.prototype.onKeyArrowRightInFocus=function(e){this.searchComponent.inputEl.isActiveElement()||(e.preventDefault(),this.dom.focusedItem===this.dom.infinityScroll.rootEl?this.dom.setCollapseAll(!1):this.dom.focusedItem instanceof uO&&this.dom.focusedItem.setCollapse(!1,!0))},t.prototype.onKeyShowMoreBefore=function(e){this.dom.focusedItem instanceof dO&&this.dom.focusedItem.showMoreBefore()},t.prototype.onKeyShowMoreAfter=function(e){this.dom.focusedItem instanceof dO&&this.dom.focusedItem.showMoreAfter()},t.prototype.setSortOrder=function(e){var t=this.dom;t.sortOrder=e,t.changed()},t.prototype.onResize=function(){this.dom.onResize()},t.prototype.startSearch=function(){var e=this;this.stopSearch();var t=this,n=t.app,i=t.dom,r=t.searchInfoEl;i.emptyResults(),this.dom.setFocusedItem(null);try{var o=this.searchComponent.getValue(),a=new UP(n,o,this.matchingCase);if(!a.matcher)return;this.searchQuery=a,this.renderSearchInfo(a.matcher,r);var s=this.queue.start();_P(n,a.requiredInputs,s,(function(t,n){return g(e,void 0,void 0,(function(){var e;return y(this,(function(r){switch(r.label){case 0:return(e=a.match(t,n))?i.addResult(t,e,n).renderContentMatches():i.removeResult(t),i.el.isShown()?[3,2]:[4,new Promise((function(e){return i.el.onNodeInserted(e,!0)}))];case 1:r.sent(),r.label=2;case 2:return this.infoEl.show(),this.resultCountEl.setText(UY.labelResultCount({count:i.getMatchCount()})),[2]}}))}))}))}catch(e){r.createDiv({cls:"search-info",text:e.message}),console.log(e)}this.app.workspace.requestSaveLayout(),this.requestSaveSearch()},t.prototype.stopSearch=function(){this.queue.stop(),this.searchInfoEl.empty()},t.prototype.renderSearchInfo=function(e,t){var n=this;if(t.createDiv({text:e.getInfo()}),e instanceof mP)for(var i=t.createDiv("search-info-children"),r=0,o=e.matchers;r<o.length;r++){var a=o[r];this.renderSearchInfo(a,i)}else if(e instanceof yP){i=t.createDiv("search-info-children");this.renderSearchInfo(e.matcher,i)}else e instanceof dP&&t.createDiv("search-info-children",(function(t){t.createSpan({text:"Key:"}),t.createDiv("search-info-children",(function(t){n.renderSearchInfo(e.key,t)})),e.value&&(t.createSpan({text:"Value:"}),t.createDiv("search-info-children",(function(t){n.renderSearchInfo(e.value,t)})))}))},t.prototype.setQuery=function(e){var t=this.searchComponent,n=t.inputEl;String.isString(e)&&(n.value=e,t.setValue(e)),this.startSearch()},t.prototype.getQuery=function(){return this.searchComponent.getValue()},t.prototype.onTabHeaderClick=function(){var e=this;setTimeout((function(){e.searchComponent.inputEl.select()}),0)},t}(jP),GY=function(e){function t(t,n){var i=e.call(this,t)||this;i.setTitle(UY.labelCopySearchResults());var r=i.contentEl,o={},a=i.app.internalPlugins.getEnabledPluginById("global-search");a&&(o=a.options);var s,l,c,u=r.createDiv("copy-search-result-container"),h=u.createEl("textarea","copy-search-result-textarea"),d=function(){var e=n.getFiles();h.value=e.map((function(e,t){var n=s.getValue()?e.path:e.getShortName(),i=l.getValue();"wikilink"===i?n="[[".concat(n,"]]"):"markdown"===i&&(n="[".concat(e.basename,"](").concat(n,")"));var r=c.getValue();return"-"===r?n="- ".concat(n):"*"===r?n="* ".concat(n):"num"===r&&(n="".concat(t+1,". ").concat(n)),o.showFullPath=s.getValue(),o.linkStyle=l.getValue(),o.listStyle=c.getValue(),a.plugin.saveData(o),n})).join("\n"),h.select()};return new NI(u).setName(UY.optionShowPath()).setDesc(UY.optionShowPathDescription()).addToggle((function(e){e.setValue(!!o.showFullPath).onChange(d),s=e})),new NI(u).setName(UY.optionLinkStyle()).setDesc(UY.optionLinkStyleDescription()).addDropdown((function(e){e.addOption("none",UY.optionChoiceLinkStyleNone()).addOption("wikilink",UY.optionChoiceLinkStyleWikilink()).addOption("markdown",UY.optionChoiceLinkStyleMarkdownLink()).setValue(o.linkStyle||"none").onChange(d),l=e})),new NI(u).setName(UY.optionListPrefix()).setDesc(UY.optionListPrefixDescription()).addDropdown((function(e){e.addOption("none",UY.optionChoiceListStyleNone()).addOption("-",UY.optionChoiceListStyleDash()).addOption("*",UY.optionChoiceListStyleAsterisk()).addOption("num",UY.optionChoiceListStyleNumbered()).setValue(o.listStyle||"none").onChange(d),c=e})),r.createDiv("modal-button-container",(function(e){e.createEl("button",{text:UY.buttonCopyResults(),cls:"mod-cta"}).addEventListener("click",(function(){yc(h.value),new JA(UY.msgSuccessfullyCopied())})),e.createEl("button",{text:Qf.dialogue.buttonDone()}).addEventListener("click",(function(){return i.close()}))})),d(),i}return f(t,e),t}(ZA),KY=Symbol("parent"),YY=Qf.plugins.bookmarks,ZY=function(e){function t(t,n,i,r){var o=e.call(this,t.app)||this;o.plugin=t,o.item=n,o.isExistingItem=i,o.initialBookmarkGroup=null,o.bookmarkGroup=null,o.bookmarkGroupOptions=new Map,o.reverseBookmarkGroupOptions=new Map,o.modalEl.addClass("mod-bookmark");var a=i?Qf.plugins.bookmarks.actionEditBookmark():Qf.plugins.bookmarks.actionAddBookmark();o.setTitle(a);var s=t.getItemTitle(n),l=n.title,c=function(){n.title=l,i?(t.editItem(n),o.initialBookmarkGroup!==o.bookmarkGroup&&t.moveItem(n,o.bookmarkGroup,o.bookmarkGroup.items.length-1)):t.addItem(n,o.bookmarkGroup),null==r||r(),o.close()},u=function(e){e.isComposing||"Enter"!==e.key||(e.preventDefault(),c())};if("file"===n.type||"folder"===n.type){var h=ru(n.path);"file"===n.type&&n.subpath&&(h+=n.subpath),new NI(o.contentEl).setName(YY.optionPath()).addText((function(e){e.setDisabled(!0).setValue(h)}))}else"search"===n.type?new NI(o.contentEl).setName(YY.optionQuery()).addText((function(e){e.setDisabled(!0).setValue(n.query)})):"url"===n.type&&new NI(o.contentEl).setName(YY.optionURL()).addText((function(e){e.setDisabled(!0).setValue(n.url)}));new NI(o.contentEl).setName(YY.optionTitle()).addText((function(e){o.titleInputEl=e.inputEl,o.titleInputEl.enterKeyHint=Zl.isAndroidApp?"enter":"done",e.setPlaceholder(s).setValue(l).onChange((function(e){l=e})),e.inputEl.addEventListener("keydown",u)})),new NI(o.contentEl).setName(YY.optionGroup()).addDropdown((function(e){o.bookmarkGroupComponent=e;var n=function(t,i){for(var r=0,a=t;r<a.length;r++){var s=a[r];if("group"===s.type){var l=oc(16);e.addOption(l,i+s.title),o.bookmarkGroupOptions.set(l,s),o.reverseBookmarkGroupOptions.set(s,l),n(s.items,i+"Â ".repeat(4))}}};n(t.items,""),e.onChange((function(e){o.bookmarkGroup=o.bookmarkGroupOptions.get(e)}))}));var d=function(){t.removeItem(n),o.close()};return Zl.isPhone?(o.modalEl.createEl("button",{cls:"modal-nav-action mod-secondary",text:Qf.dialogue.buttonCancel()},(function(e){e.addEventListener("click",(function(){return o.close()}))})),o.modalEl.createEl("button",{cls:"modal-nav-action mod-cta",text:Qf.dialogue.buttonSave()},(function(e){e.addEventListener("click",c)})),i?(o.contentEl.appendChild(o.buttonContainerEl),o.buttonContainerEl.createEl("button",{cls:"mod-warning",text:YY.menuOptRemove()},(function(e){e.addEventListener("click",d)}))):o.buttonContainerEl.detach()):(i&&o.addButton(["mod-secondary","mod-destructive"],YY.menuOptRemove(),d),o.addCancelButton(),o.addButton("mod-cta",Qf.dialogue.buttonSave(),c)),o}return f(t,e),t.prototype.setBookmarkGroup=function(e){this.bookmarkGroup=e;var t=this.reverseBookmarkGroupOptions.get(e);return this.bookmarkGroupComponent.setValue(t),this},t.prototype.onOpen=function(){this.bookmarkGroup||(this.bookmarkGroup=this.item[KY]),this.initialBookmarkGroup=this.bookmarkGroup;var e=this.reverseBookmarkGroupOptions.get(this.initialBookmarkGroup);this.bookmarkGroupComponent.setValue(e),this.titleInputEl.select()},t}(XA),XY=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.modalEl.addClass("mod-bookmark"),r.setTitle("Add ".concat(i.length," bookmarks"));var o=window.moment().format("LLL"),a="",s=null,l=function(){var e=EZ(a||o);n.addItem(e,s);for(var t=0,l=i;t<l.length;t++){var c=l[t];n.addItem(c,e)}r.close()},c=function(e){e.isComposing||"Enter"!==e.key||(e.preventDefault(),l())};new NI(r.contentEl).setName(YY.optionTitle()).addText((function(e){e.setPlaceholder(o).setValue(a).onChange((function(e){a=e})),e.inputEl.addEventListener("keydown",c)}));var u=new Map;return new NI(r.contentEl).setName(YY.optionGroup()).addDropdown((function(e){var t=function(n,i){for(var r=0,o=n;r<o.length;r++){var a=o[r];if("group"===a.type){var s=oc(16);e.addOption(s,i+a.title),u.set(s,a),t(a.items,i+"Â ".repeat(4))}}};t(n.items,""),e.onChange((function(e){s=u.get(e)}))})),r.addCancelButton(),r.addButton("mod-cta",Qf.dialogue.buttonSave(),l),r}return f(t,e),t}(XA);function $Y(e){e=tu(e=(e=e.replace(/[?*]/g,"")).replace(/[\\/:]/g," - "));try{vw(e)}catch(e){return"Untitled"}return e}var QY=function(){function e(e,t){var n=this;t.addClass("webviewer-address-container");var i=t.createDiv("webviewer-address");this.addrInputEl=i.createEl("input",{type:"text"}),this.addrInputEl.setAttr("spellcheck",!1),this.suggest=new JY(e,this.addrInputEl);var r="";this.addrInputEl.addEventListener("focus",(function(){t.win.setTimeout((function(){return n.addrInputEl.select()}),100),r=n.addrInputEl.value,n.suggest.open()})),this.addrInputEl.addEventListener("keydown",(function(e){"Escape"===e.key&&(e.preventDefault(),n.addrInputEl.blur(),n.addrInputEl.value=r)}))}return e.prototype.setValue=function(e){this.addrInputEl.value=e||""},e.prototype.focus=function(){this.addrInputEl.focus()},e}(),JY=function(e){function t(t,n){var i=e.call(this,t.app,n)||this;return i.webview=t,i.inputEl=n,i.scope.register([],"Escape",(function(){i.close()})),i}return f(t,e),t.prototype.selectSuggestion=function(e,t){this.inputEl.blur(),this.webview.navigate(e.url,!0),this.close()},t.prototype.getSuggestions=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k;return y(this,(function(y){switch(y.label){case 0:return t=e,e=e.toLowerCase(),n=[e],(i={})["about:blank"]={url:"about:blank",title:"Blank",type:"about"},r=0,[4,this.webview.plugin.db.getHistoryItems()];case 1:o=y.sent(),y.label=2;case 2:if(!(r<o.length))return[3,4];a=o[r],i[a.url]||(i[a.url]={url:a.url,title:a.title,type:"history"}),y.label=3;case 3:return r++,[3,2];case 4:if(s=this.app.internalPlugins.getEnabledPluginById("bookmarks"))for(l=s.getBookmarks(),c=l.filter((function(e){return"url"===e.type})),u=0,h=c;u<h.length;u++)d=h[u],i[d.url]={url:d.url,title:d.title,type:"bookmark"};for(p=[],f=!1,m=0,v=Object.values(i);m<v.length;m++)g=v[m],b={title:g.title,url:g.url,type:g.type,score:0,matches:null},""!==e?(g.url.toLowerCase()===e&&(f=!0),w="".concat(g.title," ").concat(g.url).toLowerCase(),(k=UL(n,w))&&(b.matches=k,b.score=RL(k,e.length,w.length,0),p.push(b))):p.push(b);return f||""===e?[2,p]:e.startsWith("http://")||e.startsWith("https://")?(p.unshift({title:"",url:t,score:100,matches:null,type:"typed"}),[2,p]):(C=/([^\/?#]+)/.exec(e)[0],-1!==(M=C.lastIndexOf("."))&&M!==C.length-1?(p.unshift({title:"",url:"https://"+t,score:100,matches:null,type:"typed"}),[2,p]):(p.unshift({title:Qf.plugins.webViewer.actionSearchForQuery({query:t}),url:this.webview.plugin.getSearchEngineUrl(t),score:100,matches:null,type:"search"}),[2,p]))}var C,M}))}))},t.prototype.renderSuggestion=function(e,t){var n=this;t.addClass("mod-complex"),t.addClass("webviewer-addressbar-suggestion");var i=t.createDiv("suggestion-icon"),r=t.createDiv("suggestion-content"),o=t.createDiv("suggestion-aux");("search"===e.type?i.createSpan({cls:"suggestion-flair-left"},(function(e){mx(e,"lucide-search")})):"history"!==e.type&&"bookmark"!==e.type||i.createSpan({cls:"suggestion-flair-left"},(function(t){n.webview.plugin.db.setIcon(t,e.url)})),"bookmark"===e.type&&o.createSpan({cls:"suggestion-flair"},(function(e){mx(e,"lucide-bookmark")})),jL(r.createDiv("suggestion-title"),e.title,e.matches),"search"!==e.type)&&jL(r.createDiv("suggestion-url"),e.url,e.matches,-(e.title.length+1))},t.prototype.reposition=function(t){e.prototype.reposition.call(this,t);var n=(t.right-t.left).toString()+"px";this.suggestEl.style.width=n,this.suggestEl.style.maxWidth=n},t}(AF),eZ=Qf.plugins.webViewer,tZ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.icon="lucide-clock",i.itemDoms=new Map,i.requestUpdate=mc(i.update.bind(i),100),i.plugin=n,i.scope=new Tk(i.app.scope),i.tree=new fI(i,{app:i.app,containerEl:i.contentEl,id:sZ,scope:i.scope}),i}return f(t,e),t.prototype.onload=function(){this.registerEvent(this.app.workspace.on("webviewer:update-history",this.requestUpdate,this))},t.prototype.getViewType=function(){return sZ},t.prototype.getDisplayText=function(){return eZ.historyName()},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n),t.addItem((function(e){return e.setSection("action").setTitle(eZ.actionClearHistory()).setIcon("lucide-eraser").onClick((function(e){i.plugin.db.clearHistoryItems()}))}))},t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return this.update(),[2]}))}))},t.prototype.onResize=function(){this.tree.infinityScroll.onResize()},t.prototype.update=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return[4,this.plugin.db.getHistoryItems()];case 1:for(e=s.sent(),t=[],n=new Map,i=0,r=e;i<r.length;i++)o=r[i],(a=this.itemDoms.get(o.id))||(a=new nZ(this.app,this.plugin,o)),t.push(a),n.set(o.id,a);return this.itemDoms=n,this.tree.root.vChildren.setChildren(t),this.tree.infinityScroll.queueCompute(),[2]}}))}))},t}(GP),nZ=function(e){function t(t,n,i){var r=e.call(this)||this;r.vChildren=new eI(r),r.pusherEl=uI(),r.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},r.app=t,r.plugin=n,r.item=i;var o=r.selfEl.createDiv({cls:"tree-item-icon",prepend:!0});return r.plugin.db.setIcon(o,i.url),r.titleEl=r.innerEl.createDiv("tree-item-inner-text webviewer-history-view-item"),r.titleEl.setText(i.title||i.url),r.selfEl.addEventListener("contextmenu",r.onContextMenu.bind(r)),r.setClickable(!0),r}return f(t,e),t.prototype.onSelfClick=function(e){this.app.workspace.getLeaf(Ak.isModEvent(e)).setViewState({type:aZ,state:{url:this.item.url,title:this.item.title,navigate:!0}})},t.prototype.onContextMenu=function(e){var t=this;if(!e.defaultPrevented){var n=(new PA).addSections(["action","danger"]);n.addItem((function(e){return e.setTitle(eZ.actionCopyURL()).setIcon("lucide-copy").setSection("action").onClick((function(){navigator.clipboard.writeText(t.item.url)}))})),n.addItem((function(e){return e.setTitle(eZ.actionRemoveFromHistory()).setIcon("lucide-trash-2").setSection("danger").setWarning(!0).onClick((function(){t.plugin.db.removeHistoryItem(t.item)}))})),n.showAtMouseEvent(e)}},t}($P),iZ=function(){function e(e){this.db=null,this.app=e}return e.prototype.connect=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,B_(this.app.appId+"-webview",1,{upgrade:function(e,t,n,i){e.objectStoreNames.contains("icons")||e.createObjectStore("icons"),e.objectStoreNames.contains("history")||e.createObjectStore("history",{keyPath:"id",autoIncrement:!0})}})];case 1:return e.db=t.sent(),[2]}}))}))},e.prototype.getHistoryItems=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return this.db?[4,this.db.getAll("history")]:[2,[]];case 1:return[2,e.sent().reverse()]}}))}))},e.prototype.addHistoryItem=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return this.db?[4,(n=this.db.transaction("history","readonly")).objectStore("history").openCursor(null,"prev")]:[2];case 1:return(i=c.sent())&&i.value.url===e?(n.commit(),[2]):(n.commit(),r={title:t||"",url:e,accessTs:Date.now()},[4,this.db.put("history",r)]);case 2:return o=c.sent(),r.id=o,[4,this.db.getAllKeys("history")];case 3:return(a=c.sent()).length>1e3&&(s=a.length-1e3,l=a[s-1],this.db.delete("history",IDBKeyRange.upperBound(l))),this.app.workspace.trigger("webviewer:update-history"),[2]}}))}))},e.prototype.removeHistoryItem=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.db.delete("history",e.id)];case 1:return t.sent(),this.app.workspace.trigger("webviewer:update-history"),[2]}}))}))},e.prototype.clearHistoryItems=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.db.delete("history",IDBKeyRange.lowerBound(0,!0))];case 1:return e.sent(),this.app.workspace.trigger("webviewer:update-history"),[2]}}))}))},e.prototype.setIcon=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=function(e){var t=e.toLowerCase().match(/^https?:\/\/([^\/?#]+)/);if(t)return t[1]}(t),i?[4,this.loadIcon(i,n)]:[3,2];case 1:if(r=o.sent())return e.createEl("img").src=r,[2];o.label=2;case 2:return mx(e,"globe-2"),[2]}}))}))},e.prototype.loadIcon=function(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return this.db?[4,this.db.get("icons",e)]:[2,null];case 1:return(n=i.sent())?[2,null==n?void 0:n.base64]:[2,this.storeIcon(e,t)]}}))}))},e.prototype.storeIcon=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:if(!t)return[2,null];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,UA(t)];case 2:return n=s.sent(),i=n.headers["content-type"],r=Array.from(new Uint8Array(n.arrayBuffer)),o=btoa(String.fromCharCode.apply(null,r)),a="data:".concat(i,";base64,").concat(o),this.db.put("icons",{source:t,base64:a},e),[2,a];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},e}(),rZ=function(e){function t(t,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var o=e.call(this,t,n)||this;return o.includeRoot=!1,o.allowNullSelection=i,o.includeRoot=r,o}return f(t,e),t.prototype.renderSuggestion=function(e,t){e?t.setText(e.path):t.setText("+ "+this.getValue())},t.prototype.getSuggestions=function(e){e=e.toLowerCase();for(var n=[],i=0,r=this.app.vault.getAllFolders(this.includeRoot);i<r.length;i++){var o=r[i];if(n.length>=t.MAX_SUGGESTIONS)break;this.filePredicate(o,e)&&n.push(o)}return this.allowNullSelection&&e&&n.push(null),n},t.prototype.filePredicate=function(e,t){return e.path.toLowerCase().contains(t)},t.prototype.selectSuggestion=function(t,n){t&&(this.setValue(t.path),this.textInputEl.trigger("input")),this.close(),e.prototype.selectSuggestion.call(this,t,n)},t.MAX_SUGGESTIONS=100,t}(AF),oZ=function(e){function t(t,n,i,r){void 0===r&&(r=!1);var o=e.call(this,t,n,r)||this;return o.folderPredicate=i,o}return f(t,e),t.prototype.filePredicate=function(t,n){return!!this.folderPredicate(t)&&e.prototype.filePredicate.call(this,t,n)},t}(rZ),aZ="webviewer",sZ="webviewer-history",lZ="duckduckgo",cZ=Qf.plugins.webViewer,uZ={duckduckgo:{display:"DuckDuckGo",url:"https://duckduckgo.com/?q=%s"},brave:{display:"Brave",url:"https://search.brave.com/search?q=%s"},bing:{display:"Bing",url:"https://www.bing.com/search?q=%s"},google:{display:"Google",url:"https://www.google.com/search?q=%s"},custom:{display:"custom"}},hZ={openExternalURLs:!0,enableAdblocking:!0},dZ=function(){function e(){this.id="webviewer",this.name=cZ.name(),this.description=cZ.desc(),this.defaultOn=!1,this.pendingIgnoredURLs=[]}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,this.db=new iZ(e),t.registerGlobalCommand({id:"webviewer:open",name:cZ.actionOpen(),callback:function(){n.app.workspace.getLeaf(!0).setViewState({type:aZ,active:!0,state:{url:n.options.homepage||"about:blank"}})}}),t.registerGlobalCommand({id:"webviewer:open-history",name:cZ.actionShowHistory(),icon:"lucide-clock",callback:function(){n.app.workspace.ensureSideLeaf(sZ,"left",{active:!0})}}),t.registerGlobalCommand({id:"webviewer:toggle-reader-mode",name:cZ.actionToggleReaderMode(),icon:"glasses",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(wZ);return!!t&&(e||t.toggleReaderMode(),!0)}}),t.registerGlobalCommand({id:"webviewer:focus-address-bar",name:cZ.actionFocusAddressBar(),icon:"text-cursor-input",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(wZ);return!!t&&(e||t.addressBar.focus(),!0)}}),t.registerGlobalCommand({id:"webviewer:zoom-in",name:Qf.commands.zoomIn(),icon:"zoom-in",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(wZ);return!!t&&(e||t.zoomIn(),!0)}}),t.registerGlobalCommand({id:"webviewer:zoom-reset",name:Qf.commands.resetZoom(),icon:"rotate-cw",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(wZ);return!!t&&(e||t.zoomReset(),!0)}}),t.registerGlobalCommand({id:"webviewer:zoom-out",name:Qf.commands.zoomOut(),icon:"zoom-in",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(wZ);return!!t&&(e||t.zoomOut(),!0)}}),t.registerGlobalCommand({id:"webviewer:search",name:cZ.actionSearchTheWeb(),icon:"search",callback:function(){new mZ(n.app,n).open()}}),t.registerGlobalCommand({id:"webviewer:save-to-vault",name:cZ.actionSaveToVault(),icon:"lucide-file-down",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(wZ);return!!t&&(e||t.saveAsMarkdown().then((function(e){e&&n.app.workspace.getLeaf("tab").openFile(e)})),!0)}}),t.registerViewType(aZ,(function(e){return new wZ(e,n)})),t.registerViewType(sZ,(function(e){return new tZ(e,n)}))},e.prototype.onEnable=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return n=this.handleOpenUrl.bind(this),window.addEventListener("open-url",n),t.register((function(){window.removeEventListener("open-url",n)})),i=this,o=(r=Object).assign,a=[hZ],[4,t.loadData()];case 1:return i.options=o.apply(r,a.concat([s.sent()])),t.addSettingTab(new pZ(e,t,this)),this.updateSession(),this.db.connect(),[2]}}))}))},e.prototype.saveOptions=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2,this.plugin.saveData(this.options)]}))}))},e.prototype.getSearchEngineUrl=function(e){var t,n="custom"===this.options.searchEngine?this.options.customSearchEngine:null===(t=uZ[this.options.searchEngine])||void 0===t?void 0:t.url;return n||(n=uZ[lZ].url),n.replace("%s",encodeURIComponent(e))},e.prototype.updateSession=function(){electron.ipcRenderer.send("create-browser-session",this.app.getWebviewPartition(),this.options.enableAdblocking)},e.prototype.handleOpenUrl=function(e){if(this.options.openExternalURLs){var t=e.detail,n=t.url,i=t.leaf,r=t.active,o=null!==activeDocument.querySelector(".modal-container")?"window":i;this.pendingIgnoredURLs.contains(n)?this.pendingIgnoredURLs.remove(n):(e.preventDefault(),this.openUrl(n,o,r))}},e.prototype.openUrl=function(e,t,n){void 0===n&&(n=!0);var i=this.app.workspace.getLeaf(t);null==i||i.setViewState({type:aZ,active:n,state:{url:e,title:e,navigate:!0}})},e.prototype.openUrlExternally=function(e){this.pendingIgnoredURLs.push(e),window.open(e)},e}(),pZ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl,n=this.instance.options;t.empty(),new NI(t).setName(cZ.optionOpenExternalLinks()).setDesc(cZ.optionOpenExternalLinksDesc()).addToggle((function(t){t.setValue(n.openExternalURLs).onChange((function(t){n.openExternalURLs=t,e.plugin.saveData(n)}))})),new NI(t).setName(cZ.optionHomepage()).setDesc(cZ.optionHomepageDesc()).addText((function(t){t.setValue(n.homepage).onChange((function(t){n.homepage=t,e.plugin.saveData(n)}))})),new NI(t).setName(cZ.optionSavedMarkdown()).setDesc(cZ.optionSavedMarkdownDesc()).addText((function(t){t.setPlaceholder(Qf.setting.folderPathExamplePlaceholder()).setValue(n.markdownPath).onChange((function(t){n.markdownPath=t.trim(),e.plugin.saveData(n)})),new rZ(e.app,t.inputEl)}));var i,r="custom"===n.searchEngine;new NI(t).setName(cZ.optionSearchEngine()).setDesc(cZ.optionSearchEngineDesc()).addDropdown((function(t){for(var r=0,o=Object.entries(uZ);r<o.length;r++){var a=o[r],s=a[0],l=a[1],c="custom"===l.display?cZ.optionSearchEngineCustomDropDown():l.display;t.addOption(s,c)}t.setValue(n.searchEngine||lZ).onChange((function(t){"custom"!==t||n.customSearchEngine||(n.customSearchEngine=uZ[lZ].url),i.setVisibility("custom"===t),n.searchEngine=t,e.plugin.saveData(n)}))})),i=new NI(t).setName(cZ.optionSearchEngineCustom()).setDesc(cZ.optionSearchEngineDesc()).setVisibility(r).addText((function(t){t.setValue(n.customSearchEngine||uZ[lZ].url).setPlaceholder(uZ[lZ].url),t.inputEl.addEventListener("blur",(function(i){var r=t.getValue();if(!r.contains("%s")){return Ox(t.inputEl,'Search engine URL must contain "%s"',{placement:"bottom",classes:["mod-error"]}),window.setTimeout(Bx,2e3),void t.setValue(n.customSearchEngine)}n.customSearchEngine=r,e.plugin.saveData(n)}))})),new NI(t).setName(cZ.optionEnableAdblock()).setDesc(cZ.optionEnableAdblockDesc()).addToggle((function(t){t.setValue(n.enableAdblocking).onChange((function(t){n.enableAdblocking=t,e.plugin.saveData(n),e.instance.updateSession()}))}));var o=electron.ipcRenderer.sendSync("adblock-lists");new NI(t).setName(cZ.optionAdblockLists()).setDisabled(n.enableAdblocking).setDesc(cZ.optionAdblockListsDesc()).addTextArea((function(e){e.setValue(o.join("\n")),e.inputEl.addEventListener("blur",(function(){var t=e.inputEl.value.split("\n");o=electron.ipcRenderer.sendSync("adblock-lists",t)})),e.inputEl.addClass("webviewer-adblock-lists")}));var a=electron.ipcRenderer.sendSync("adblock-frequency");new NI(t).setName(cZ.optionAdblockFrequency()).setDesc(cZ.optionAdblockFrequencyDesc()).addSlider((function(e){e.setLimits(0,24,1).setValue(a).setDynamicTooltip().onChange((function(e){a=electron.ipcRenderer.sendSync("adblock-frequency",e)}))})),new NI(t).setName(cZ.labelWebViewerData()).addButton((function(t){t.setButtonText(cZ.labelClearData()).onClick((function(){new fZ(e.app,e.instance).open()}))}))},t}(aY),fZ=function(e){function t(t,n){var i=e.call(this,t)||this;i.clearCookies=!0,i.clearCache=!0,i.clearHistory=!0,i.clearAll=!1,i.webviewer=n;var r=i,o=r.titleEl,a=r.contentEl;o.setText(cZ.titleClearDataModal());var s=null,l=new NI(a).setName(cZ.actionClearDataCookies()).setDesc(cZ.actionClearDataCookiesDesc()).addToggle((function(e){s=e,e.setValue(i.clearCookies).onChange((function(e){i.clearCookies=e}))})),c=null,u=new NI(a).setName(cZ.actionClearDataCache()).addToggle((function(e){c=e,e.setValue(i.clearCache).onChange((function(e){i.clearCache=e}))})),h=null,d=new NI(a).setName(cZ.actionClearDataHistory()).addToggle((function(e){h=e,e.setValue(i.clearHistory).onChange((function(e){i.clearAll=e}))}));return new NI(a).setName(cZ.actionClearDataAll()).setDesc(cZ.actionClearDataAllDesc()).addToggle((function(e){e.setValue(i.clearAll).onChange((function(e){i.clearAll=e,l.setDisabled(e),u.setDisabled(e),d.setDisabled(e),e&&(s.setValue(!0),c.setValue(!0),h.setValue(!0))}))})),a.createDiv("modal-button-container").createEl("button",{cls:"mod-cta",text:cZ.actionClearData()},(function(e){e.addEventListener("click",i.performClearData.bind(i))})),i}return f(t,e),t.prototype.performClearData=function(){return g(this,void 0,Promise,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=[],this.clearAll?e=["cookies","filesystem","indexdb","localstorage","shadercache","websql","serviceworkers","cachestorage"]:(this.clearCookies&&e.push("cookies"),this.clearCache&&e.push("cachestorage")),e.length>0?[4,(t=electron.remote.session.fromPartition(this.app.getWebviewPartition())).clearStorageData({storages:e})]:[3,3];case 1:return n.sent(),this.clearAll?[4,t.clearData()]:[3,3];case 2:n.sent(),n.label=3;case 3:return this.clearHistory?[4,this.webviewer.db.clearHistoryItems()]:[3,5];case 4:n.sent(),n.label=5;case 5:return this.close(),[2]}}))}))},t}(ZA),mZ=function(e){function t(t,n){var i=e.call(this,t)||this;i.inputEl=null,i.webviewer=n;var r=i.modalEl;return r.removeClass("modal"),r.addClass("prompt"),r.empty(),r.createDiv("prompt-input-container",(function(e){i.inputEl=e.createEl("input",{cls:"prompt-input",type:"text",placeholder:cZ.labelSearchTheWeb()})})),i.inputEl.addEventListener("keydown",(function(e){if("Enter"===e.key){var t=i.webviewer.getSearchEngineUrl(i.inputEl.value);i.app.workspace.getLeaf("tab").setViewState({type:aZ,active:!0,state:{url:t,navigate:!0}}),i.close()}})),i}return f(t,e),t}(ZA),vZ=function(e){function t(t,n,i){var r=e.call(this,t,i)||this;return r.foundInPageHandler=r._foundInPageHandler.bind(r),r.webview=n,r}return f(t,e),t.prototype.findPrevious=function(){var e=this.getQuery();this.webview.findInPage(e,{findNext:!1,forward:!1})},t.prototype.findNext=function(){var e=this.currentResult==this.numResults,t=this.getQuery();this.webview.findInPage(t,{findNext:e})},t.prototype.findNextOrReplace=function(){this.findNext()},t.prototype.onSearchInput=function(){var e=this.getQuery();e&&this.webview.findInPage(e,{findNext:!0})},t.prototype.show=function(){var e=this,t=e.containerEl,n=e.searchContainerEl,i=e.searchInputEl;t.prepend(n),i.focus(),i.select(),this.app.keymap.pushScope(this.scope),this.onSearchInput(),this.webview.addEventListener("found-in-page",this.foundInPageHandler)},t.prototype.hide=function(){this.webview.stopFindInPage("clearSelection"),this.searchContainerEl.detach(),this.app.keymap.popScope(this.scope),this.webview.removeEventListener("found-in-page",this.foundInPageHandler)},t.prototype._foundInPageHandler=function(e){e.result.finalUpdate&&(this.numResults=e.result.matches,this.currentResult=e.result.activeMatchOrdinal)},t}(MN),gZ=Qf.plugins.webViewer,yZ={"image/avif":"avif","image/bmp":"bmp","image/gif":"gif","image/jpeg":"jpg","image/pict":"pict","image/png":"png","image/svg+xml":"svg","image/tiff":"tiff","image/webp":"webp"},bZ="data:text/plain,",wZ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.navigation=!0,i.hasConfiguredWebContents=!1,i.webviewMounted=!1,i.loadFirstPage=null,i.webviewFirstLoadFinished=!1,i.requestCommitPageLoad=mc(i.commitPageLoad.bind(i)),i.plugin=n,i.mode="blank",i}return f(t,e),t.prototype.getViewType=function(){return aZ},t.prototype.getDisplayText=function(){return this.title||gZ.labelNewWebViewer()},t.prototype.getState=function(){return m(m({},e.prototype.getState.call(this)),{url:this.url,title:this.title,mode:this.mode})},t.prototype.getIcon=function(){return"globe-2"},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return r.sent(),t.url&&this.url!==t.url?(t.title&&(this.title=t.title),i=t.navigate||!1,this.navigate(t.url,i),[2]):[2]}}))}))},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n),t.addItem((function(e){return e.setTitle(gZ.actionSaveToVault()).setIcon("lucide-file-down").onClick((function(){return g(i,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,this.saveAsMarkdown()];case 1:return(e=t.sent())&&this.app.workspace.getLeaf("tab").openFile(e),[2]}}))}))}))})),t.addItem((function(e){return e.setSection("action").setTitle(Qf.interface.menu.find()).setIcon("lucide-file-search").onClick(i.showSearch.bind(i))})),t.addItem((function(e){return e.setSection("action").setTitle(gZ.actionOpenDefaultBrowser()).setIcon("lucide-globe-2").onClick((function(){return i.plugin.openUrlExternally(i.url)}))}));var r=this.webview.getZoomFactor();t.addItem((function(e){return e.setTitle(Qf.commands.zoomIn()).setIcon("zoom-in").setSection("zoom").setDisabled(r>=3).onClick(i.zoomIn.bind(i))})),t.addItem((function(e){return e.setTitle(Qf.commands.resetZoom()).setIcon("rotate-cw").setSection("zoom").setDisabled(1===r).onClick(i.zoomReset.bind(i))})),t.addItem((function(e){return e.setTitle(Qf.commands.zoomOut()).setIcon("zoom-out").setSection("zoom").setDisabled(r<=.5).onClick(i.zoomOut.bind(i))}))},t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){var e,t;return y(this,(function(n){return this.headerEl.addClass("view-header-always-show"),e=createDiv("view-header-reload-button"),this.reloadButtonEl=e.createEl("button","clickable-icon"),mx(this.reloadButtonEl,"rotate-cw"),this.headerEl.insertBefore(e,this.titleContainerEl),this.titleEl.detach(),this.addressBar=new QY(this,this.titleContainerEl),(t=this.contentEl).addClass("webviewer-content"),this.searchContainerEl=t.createDiv("search-in-page"),this.readerView=t.createDiv("reader-mode-content"),this.readerView.hide(),this.readerView.addEventListener("contextmenu",this.onReaderModeContextMenu.bind(this)),this.instantiateWebView(),this.errorView=t.createDiv("error-notice",(function(e){e.createEl("h1",{text:gZ.labelFailToLoad()}),e.createEl("p",{text:gZ.labelFailToLoadDesc()}),e.hide()})),this.readerModeToggleBtn=this.addAction("glasses","Reader view",this.toggleReaderMode.bind(this)),[2]}))}))},t.prototype.toggleReaderMode=function(){"reader"===this.mode?this.displayWebView():this.displayReaderView()},t.prototype.zoomIn=function(){var e=this.webview.getZoomFactor();e<3&&this.webview.setZoomFactor(e+.1)},t.prototype.zoomOut=function(){var e=this.webview.getZoomFactor();e>.5&&this.webview.setZoomFactor(e-.1)},t.prototype.zoomReset=function(){this.webview.setZoomFactor(1)},t.prototype.reportPageLoad=function(e,t,n){e&&(this.requestCommitPageLoad.cancel(),this.inProgressPageLoad&&this.inProgressPageLoad.hasOwnProperty("navigate")&&(n=this.inProgressPageLoad.navigate),this.showLoadingIndicator(!0),this.inProgressPageLoad={url:e,title:t,navigate:n})},t.prototype.showLoadingIndicator=function(e){if(this.contentEl.hasClass("is-loading")!==e){var t=e?"x":"rotate-cw";mx(this.reloadButtonEl,t),this.contentEl.toggleClass("is-loading",e)}},t.prototype.commitPageLoad=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return this.inProgressPageLoad?(e=this.inProgressPageLoad,t=e.url,n=e.title,i=e.navigate,this.inProgressPageLoad=null,t===bZ?[2]:(i&&this.webviewFirstLoadFinished?this.pushViewStackHistory(t):this.webviewFirstLoadFinished||(this.webviewFirstLoadFinished=!0),this.url=t,this.addressBar.setValue(t),n?(this.title=n,[3,3]):[3,1])):[2];case 1:return[4,this.storeCurrentPageTitle()];case 2:o.sent(),o.label=3;case 3:return this.title!==bZ&&(this.leaf.tabHeaderInnerTitleEl.setText(this.title),this.plugin.db.addHistoryItem(this.url,this.title)),(r=this.app.internalPlugins.getEnabledPluginById("bookmarks"))&&r.updateTabHeaders(),this.hasConfiguredWebContents||(this.hasConfiguredWebContents=!0,this.configureWebContents()),"reader"===this.mode?this.displayReaderView():this.webview.executeJavaScript("document.querySelectorAll('[target=\"_blank\"]').forEach(el => { el.removeAttribute('target')})"),this.app.workspace.requestSaveLayout(),[2]}}))}))},t.prototype.instantiateWebView=function(){var e=this,t=this.contentEl,n=t.doc;this.webview&&this.webview.detach(),this.hasConfiguredWebContents=!1,this.webviewMounted=!1,this.webviewFirstLoadFinished=!1;var i=this.webview=n.createElement("webview");i.style.backgroundColor="white",i.allowpopups=!0,i.partition=this.app.getWebviewPartition(),i.setAttr("src",this.url||bZ),this.reloadButtonEl.addEventListener("click",(function(){i.isLoading()?(i.stop(),e.showLoadingIndicator(!1)):i.reload()})),i.addEventListener("did-start-navigation",(function(t){t.isMainFrame&&e.reportPageLoad(t.url,void 0,!0)})),i.addEventListener("did-redirect-navigation",(function(t){return g(e,void 0,void 0,(function(){return y(this,(function(e){return t.isMainFrame?(this.reportPageLoad(t.url,void 0,!1),[2]):[2]}))}))})),i.addEventListener("dom-ready",(function(){if(e.webviewMounted=!0,e.loadFirstPage){var t=e.loadFirstPage;e.loadFirstPage=null,t()}e.requestCommitPageLoad()})),i.addEventListener("did-stop-loading",(function(){e.showLoadingIndicator(!1)})),i.addEventListener("did-finish-load",(function(){return g(e,void 0,void 0,(function(){return y(this,(function(e){return this.showLoadingIndicator(!1),[2]}))}))})),i.addEventListener("did-fail-load",(function(t){-3!==t.errorCode&&t.isMainFrame&&(e.showLoadingIndicator(!1),e.displayErrorView(),e.requestCommitPageLoad())})),i.addEventListener("did-navigate-in-page",(function(){return g(e,void 0,void 0,(function(){return y(this,(function(e){return this.requestCommitPageLoad(),[2]}))}))})),i.addEventListener("page-favicon-updated",(function(t){var n=e.selectFavicon(t.favicons);e.setFavicon(n)})),i.addEventListener("page-title-updated",(function(t){e.leaf.tabHeaderInnerTitleEl.setText(t.title),e.title=t.title})),i.addEventListener("context-menu",this.displayContextMenu.bind(this)),i.addEventListener("destroyed",(function(){n!==t.doc&&(i.detach(),e.instantiateWebView())})),n.contains(t)?t.appendChild(this.webview):t.onNodeInserted((function(){t.doc===n?t.appendChild(e.webview):e.instantiateWebView()}),!0)},t.prototype.storeCurrentPageTitle=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return this.title=this.webview.getTitle(),[2]}))}))},t.prototype.displayErrorView=function(){this.hideAll(),this.mode="error",this.errorView.show()},t.prototype.displayWebView=function(){this.hideAll(),this.mode="webview",this.webview.show(),this.renderer=null,this.app.workspace.requestSaveLayout()},t.prototype.configureWebContents=function(){var e=this,t=electron.remote.webContents.fromId(this.webview.getWebContentsId());t.noContextMenu=!0,t.on("before-input-event",(function(n,i){if("keyDown"===i.type&&!t.isDestroyed()){var r=e.app.keymap.onKeyEvent(new KeyboardEvent("keydown",{code:i.code,key:i.key,shiftKey:i.shift,altKey:i.alt,ctrlKey:i.control,metaKey:i.meta,repeat:i.isAutoRepeat}));t.setIgnoreMenuShortcuts(!!r)}})),t.on("input-event",(function(t,n){"mouseDown"===n.type&&e.app.workspace.setActiveLeaf(e.leaf)}))},t.prototype.getReaderModeContent=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,fetch("/lib/readability.js")];case 1:return(e=a.sent()).ok?[4,e.text()]:(new JA(gZ.msgErrorExtractingContent()),[2]);case 2:return t=a.sent(),[4,this.webview.executeJavaScript(t)];case 3:a.sent(),n="new Readability(document.cloneNode(true)).parse()",a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.webview.executeJavaScript(n)];case 5:return i=a.sent(),[3,7];case 6:return a.sent(),new JA(gZ.msgErrorFindingContent()),[2];case 7:return i&&i.content&&"string"==typeof i.content?"string"!=typeof(r=i.title||i.siteName||"Untitled")?(console.error("Unexpected value when extracting site title"),new JA(gZ.msgErrorFindingContent()),[2]):(r=$Y(r),o=qT(i.content),[2,{md:rw(o),title:r}]):(new JA(gZ.msgErrorFindingContent()),[2])}}))}))},t.prototype.displayReaderView=function(){return g(this,void 0,Promise,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return[4,this.getReaderModeContent()];case 1:return(e=n.sent())?(t=this.app.vault.getConfig("readableLineLength"),this.readerView.toggleClass("is-readable-line-width",t),this.renderer||(this.readerView.empty(),this.renderer=new eB(this,this,this.readerView,"worker.js",!1)),this.renderer.clear(),this.renderer.set(e.md),this.hideAll(),this.readerModeToggleBtn.addClass("mod-webviewer"),this.readerView.show(),this.mode="reader",this.app.workspace.requestSaveLayout(),[2]):[2]}}))}))},t.prototype.displayBlank=function(){var e=this;this.hideAll(),this.mode="blank",this.titleContainerEl.win.setTimeout((function(){e.addressBar.focus()}),100),this.app.workspace.requestSaveLayout()},t.prototype.hideAll=function(){this.readerModeToggleBtn.removeClass("mod-webviewer"),this.closeSearch(),this.webview.hide(),this.errorView.hide(),this.readerView.hide()},t.prototype.saveAsMarkdown=function(){return g(this,void 0,Promise,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return[4,this.getReaderModeContent()];case 1:return(e=i.sent())?((t=this.plugin.options.markdownPath||"")&&(t+="/"),n=this.app.vault.getAvailablePath(t+e.title,"md"),[2,this.app.vault.create(n,e.md)]):[2]}}))}))},t.prototype.navigate=function(e,t){var n=this;if(e)if(this.webviewMounted){if(e!==bZ&&this.addressBar.setValue(e),"about:blank"===e)return this.url="about:blank",void this.displayBlank();this.reportPageLoad(e,void 0,t),this.webview.stop(),this.webview.loadURL(e).then((function(){"webview"!==n.mode&&"reader"!==n.mode&&n.displayWebView()})).catch((function(e){}))}else this.loadFirstPage=function(){n.navigate(e,t)}},t.prototype.pushViewStackHistory=function(e){var t,n=this.url,i=this.title,r=null===(t=this.leaf.history.backHistory.last())||void 0===t?void 0:t.state.state;this.url===e||r&&r.url===n||this.leaf.recordHistory({title:i,icon:"globe-2",state:{state:{url:n},type:"webviewer"},eState:null})},t.prototype.selectFavicon=function(e){if(0!==e.length){if(1===e.length)return e[0];for(var t=0,n=e[0],i=/(\d+)x\d+/,r=0,o=e;r<o.length;r++){var a=o[r],s=a.match(i);if(s){var l=Number.parseInt(s[1]);if(32===l)return a;l>t&&(t=l,n=a)}}return n}},t.prototype.setFavicon=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e&&this.faviconUrl==e?[2]:(this.faviconUrl=e,this.faviconImgEl?this.faviconImgEl.empty():this.faviconImgEl=createDiv("webviewer-favicon-container"),(t=this.webview.src)?[4,this.plugin.db.setIcon(this.faviconImgEl,t,e)]:[2]);case 1:return n.sent(),this.leaf.tabHeaderInnerIconEl.empty(),this.leaf.tabHeaderInnerIconEl.appendChild(this.faviconImgEl),[2]}}))}))},t.prototype.contextMenuItemsForLink=function(e,t){var n=this,i=function(t){n.app.workspace.getLeaf(t).setViewState({type:aZ,active:!0,state:{url:e}})},r=[{label:gZ.actionOpenLink(),click:function(){i()}},{label:gZ.actionOpenLinkNewTab(),click:function(){i("tab")}},{label:gZ.actionOpenLinkNewSplit(),click:function(){i("split")}},{label:gZ.actionOpenLinkNewWindow(),click:function(){i("window")}},{label:gZ.actionOpenLinkDefaultBrowser(),click:function(){n.plugin.openUrlExternally(e)}},{type:"separator"},{label:gZ.actionCopyLinkAddress(),click:function(){navigator.clipboard.writeText(e)}}],o=this.app.internalPlugins.getEnabledPluginById("bookmarks");return o&&r.push({label:gZ.actionBookmarkLink(),click:function(){var t=xZ(e);new ZY(o,t,!1).open()}}),r},t.prototype.contextMenuItemsForSelection=function(e,t){var n=this,i=[{label:gZ.actionSearchForQuery({query:pc(e,15)}),click:function(){var t=encodeURIComponent(e),i=n.plugin.getSearchEngineUrl(t);n.app.workspace.getLeaf("tab").setViewState({type:aZ,active:!0,state:{url:i}})}},{label:gZ.actionExtractSelection(),click:function(){return g(n,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=$Y(this.title),n=this.app.vault.getAvailablePath(t,"md"),[4,this.app.vault.create(n,e)];case 1:return i.sent(),this.app.workspace.openLinkText(n,"",!0),[2]}}))}))}},{type:"separator"},{label:gZ.actionCopySelection(),accelerator:"CmdOrCtrl+C",role:"copy"}];return t&&i.push({label:gZ.actionCut(),accelerator:"CmdOrCtrl+X",role:"cut"},{label:gZ.actionPaste(),accelerator:"CmdOrCtrl+V",role:"paste"},{label:gZ.actionDelete(),accelerator:"Delete",role:"delete"},{label:gZ.actionSelectAll(),accelerator:"CmdOrCtrl+A",role:"selectAll"}),i},t.prototype.contextMenuItemsForImg=function(e){var t=this;return[{label:gZ.actionSaveImage(),click:function(){return g(t,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return[4,UA(e)];case 1:return t=o.sent(),n=$Y(n=decodeURIComponent(Xc(e))),i=yZ[t.headers["content-type"]]||Qc(e),[4,this.app.vault.getAvailablePathForAttachments(n,i,null)];case 2:return r=o.sent(),this.app.vault.createBinary(r,t.arrayBuffer),new JA('Stored as "'.concat(r,'"')),[2]}}))}))}},{label:gZ.actionCopyImage(),click:function(){return g(t,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return[4,UA(e)];case 1:return t=r.sent(),n=lu(t.arrayBuffer),i=electron.nativeImage.createFromBuffer(n),electron.clipboard.writeImage(i),[2]}}))}))}},{label:gZ.actionCopyImageLink(),click:function(){electron.clipboard.writeText(e)}}]},t.prototype.displayContextMenu=function(e){var t=this;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var n=e.params,i=[];if(n.linkURL&&i.push.apply(i,this.contextMenuItemsForLink(n.linkURL,n.linkText)),n.selectionText?(i.length>0&&i.push({type:"separator"}),i.push.apply(i,this.contextMenuItemsForSelection(n.selectionText,n.isEditable))):n.isEditable&&(i.length>0&&i.push({type:"separator"}),i.push({label:gZ.actionPaste(),role:"paste"},{label:gZ.actionSelectAll(),role:"selectAll"})),"image"===n.mediaType&&n.srcURL&&(i.length>0&&i.push({type:"separator"}),i.push.apply(i,this.contextMenuItemsForImg(n.srcURL))),!n.selectionText&&"none"===n.mediaType&&!n.linkURL){i.length>0&&i.push({type:"separator"}),i.push({label:gZ.actionBackward(),enabled:this.leaf.history.backHistory.length>0,click:function(){t.leaf.history.back()}},{label:gZ.actionForward(),enabled:this.leaf.history.forwardHistory.length>0,click:function(){t.leaf.history.forward()}},{label:gZ.actionReload(),click:function(){t.webview.reload()}});var r=this.app.internalPlugins.getEnabledPluginById("bookmarks");r&&i.push({label:gZ.actionBookmarkPage(),click:function(){var e=xZ(t.url,t.title);new ZY(r,e,!1).open()}}),i.push({label:gZ.actionOpenDefaultBrowser(),click:function(){t.plugin.openUrlExternally(t.url)}},{label:gZ.actionSelectAll(),accelerator:"CmdOrCtrl+A",role:"selectAll"})}var o=electron.remote.Menu.buildFromTemplate(i),a=this.webview.win.electronWindow;o.popup({window:a})},t.prototype.showSearch=function(){var e=this;"reader"===this.mode?(this.searchReader||(this.searchReader=new mO(this.plugin.app,this.renderer,this.searchContainerEl,(function(){e.app.keymap.popScope(e.searchReader.scope),e.searchReader=null}))),this.searchReader.searchInputEl.focus(),this.searchReader.searchInputEl.select(),this.app.keymap.pushScope(this.searchReader.scope)):"webview"===this.mode&&(this.searchWebView||(this.searchWebView=new vZ(this.app,this.webview,this.searchContainerEl)),this.searchWebView.show())},t.prototype.closeSearch=function(){this.searchReader&&(this.searchReader.close(),this.searchReader=null),this.searchWebView&&this.searchWebView.hide()},t.prototype.onExternalLinkClick=function(e,t,n){e.preventDefault(),e.stopPropagation(),this.navigate(n,!0)},t.prototype.onReaderModeContextMenu=function(e){var t,n=this;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var i=[],r=e.targetNode;if(r.instanceOf(HTMLElement))switch(r.nodeName){case"A":var o=r.getAttr("href"),a=r.innerText;i.push.apply(i,this.contextMenuItemsForLink(o,a));break;case"IMG":var s=r.getAttr("src");i.push.apply(i,this.contextMenuItemsForImg(s))}var l=null===(t=r.win.getSelection())||void 0===t?void 0:t.toString();if(l&&(i.length>0&&i.push({type:"separator"}),i.push.apply(i,this.contextMenuItemsForSelection(l))),0===i.length){var c=this.app.internalPlugins.getEnabledPluginById("bookmarks");c&&i.push({label:gZ.actionBookmarkPage(),click:function(){var e=xZ(n.url,n.title);new ZY(c,e,!1).open()}}),i.push({label:gZ.actionOpenDefaultBrowser(),click:function(){n.plugin.openUrlExternally(n.url)}},{label:gZ.actionSelectAll(),accelerator:"CmdOrCtrl+A",click:function(){var e=n.renderer.previewEl.win,t=e.getSelection(),i=e.document.createRange();i.selectNodeContents(n.renderer.previewEl),t.removeAllRanges(),t.addRange(i)}})}var u=electron.remote.Menu.buildFromTemplate(i),h=r.win.electronWindow;u.popup({window:h})},t.prototype.onCheckboxClick=function(e,t,n){},t.prototype.onFoldChange=function(){},t.prototype.onScroll=function(){},t.prototype.postProcess=function(e,t,n){},t.prototype.onRenderComplete=function(){},t.prototype.onInternalLinkClick=function(e,t,n){},t.prototype.onInternalLinkRightClick=function(e,t,n){},t.prototype.onInternalLinkDrag=function(e,t,n){},t.prototype.onInternalLinkMouseover=function(e,t,n){},t.prototype.onTagClick=function(e,t,n){},t.prototype.onExternalLinkRightClick=function(e,t,n){},t}(GP),kZ=Qf.plugins.bookmarks;function CZ(e,t){return t||(t=void 0),{type:"file",ctime:Date.now(),path:e.path,subpath:t}}function MZ(e){return{type:"folder",ctime:Date.now(),path:e.path}}function EZ(e){return{type:"group",ctime:Date.now(),items:[],title:e||kZ.labelUntitledGroup()}}function SZ(e,t){return{type:"graph",ctime:Date.now(),title:t||kZ.labelUntitledGraph(),options:e}}function xZ(e,t){return{type:"url",ctime:Date.now(),url:e,title:t||""}}function TZ(e){return{type:"search",ctime:Date.now(),query:e}}function DZ(e){return e.view instanceof KG?SZ(e.view.dataEngine.getOptions()):e.view instanceof jY?TZ(e.view.getQuery()):e.view instanceof YP?CZ(e.view.file):e.view instanceof wZ?xZ(e.view.url,e.view.getDisplayText()):null}function AZ(e,t){var n=function(e,i){for(var r=0,o=e;r<o.length;r++){var a=o[r];if(t(a,i))return;"group"===a.type&&n(a.items,i+a.title+"/")}};n(e,"")}function LZ(e){for(var t=[],n=0,i=hK(e);n<i.length;n++){var r=i[n];r instanceof ww?t.push(CZ(r)):r instanceof kw&&t.push(MZ(r))}return t}function PZ(e){return"md"===e.extension?$c(e.path):e.path}var IZ=function(e){function t(t){var n=e.call(this,t)||this;return n.shouldShowUnresolved=!1,n.shouldShowMarkdown=!0,n.shouldShowCanvas=!0,n.shouldShowAlias=!0,n.shouldShowNonImageAttachments=!0,n.shouldShowImages=!0,n.shouldShowAllTypes=!1,n.shouldShowNonFileBookmarks=!1,n.createButtonEl=null,n.allowCreateNewFile=!1,n.context="view",n.limit=20,n.scope.register([],"Tab",(function(e){var t;if(!e.isComposing){var i,r=n.chooser,o=r.values,a=r.selectedItem,s=n.inputEl.value,l=o[a];if(l){var c=KL("file"===(i=l).type||"alias"===i.type?ru(i.file.path):"unresolved"===i.type?i.linktext:"bookmark"===i.type?i.bookmarkPath:"",null===(t=l.match)||void 0===t?void 0:t.matches);c===s&&(c+="/"),n.inputEl.value=c,n.inputEl.trigger("input")}return!1}})),n.createButtonEl=createEl("button","clickable-icon",(function(e){mx(e,"lucide-file-plus"),e.addEventListener("click",(function(e){n.onChooseSuggestion(null,e),n.close()}))})),n}return f(t,e),t.prototype.onInput=function(){var t,n;if(e.prototype.onInput.call(this),Zl.isMobile&&this.allowCreateNewFile){var i=this,r=i.createButtonEl,o=i.chooser,a=i.ctaEl,s=i.inputEl.value.trim();if(""===s)return void r.detach();r.parentElement||(a.appendChild(r),wl(r,new ml({duration:150,fn:"cubic-bezier(0, 0.55, 0.45, 1)"}).addProp("transform","scale(0.10)","")));var l=null!==(n=null===(t=o.suggestions[0])||void 0===t?void 0:t.getText())&&void 0!==n?n:"";r.ariaDisabled=String(s.toLowerCase()===l.toLowerCase())}},Object.defineProperty(t.prototype,"supportsCreate",{get:function(){return this.allowCreateNewFile&&this.shouldShowMarkdown},enumerable:!1,configurable:!0}),t.prototype.onNoSuggestion=function(){var e=this.inputEl.value.trim();if(e&&this.supportsCreate)this.chooser.setSuggestions([null]);else{var t=e?this.emptyStateText:Qf.setting.thirdPartyPlugin.labelNoRecentFilesFound();this.chooser.setSuggestions(null),this.chooser.addMessage(t)}},t.prototype.getSuggestions=function(e){var t=this;e=e.trim();var n=this.app,i=n.embedRegistry,r=n.workspace,o=n.vault,a=n.metadataCache,s=n.viewRegistry,l=[],c=this.shouldShowAllTypes,u="view"===this.context?s:i,h=function(e){return"md"===e.extension?t.shouldShowMarkdown:"canvas"===e.extension?t.shouldShowCanvas:UT.contains(e.extension)?t.shouldShowImages:!!c||!!t.shouldShowNonImageAttachments&&u.isExtensionRegistered(e.extension)};if(!e){for(var d=0,p=r.getRecentFiles({showNonImageAttachments:this.shouldShowNonImageAttachments,showImages:this.shouldShowImages,showCanvas:this.shouldShowCanvas,showMarkdown:this.shouldShowMarkdown});d<p.length;d++){var f=p[d];(b=o.getAbstractFileByPath(f))instanceof ww&&(a.isUserIgnored(b.path)||h(b)&&l.push({type:"file",file:b,match:null}))}return l}var m,v=o.getFiles().filter((function(e){return h(e)}));m=v.length<1e4?NL(e):_L(e);for(var g=0,y=v;g<y.length;g++){var b=y[g],w=a.isUserIgnored(b.path);if((O=EF(m,PZ(b)))&&(w&&(O.score-=10),l.push({type:"file",file:b,match:O,downranked:w})),this.shouldShowAlias){var k=a.getFileCache(b);if(k){var C=MS(k.frontmatter);if(C)for(var M=0,E=C;M<E.length;M++){var S=E[M],x=m(S);x&&(w&&(x.score-=10),l.push({type:"alias",alias:S,file:b,match:x,downranked:w}))}}}}if(this.shouldShowUnresolved){var T=a.unresolvedLinks,D=[];for(var A in T)if(T.hasOwnProperty(A)){var L=T[A];for(var P in L)L.hasOwnProperty(P)&&D.push(P)}for(var I=0,F=D=Array.from(new Set(D));I<F.length;I++){var O,B=F[I];(O=m(B))&&l.push({type:"unresolved",linktext:B,match:O})}}var N=this.app.internalPlugins.getEnabledPluginById("bookmarks");if(N){var R=function(e,t){var n=t+N.getItemTitle(e),i=m(n);i&&l.push({type:"bookmark",match:i,item:e,bookmarkPath:n})};AZ(N.items,(function(e,n){if("file"!==e.type||e.subpath)t.shouldShowNonFileBookmarks&&"group"!==e.type&&R(e,n);else{var i=t.app.vault.getAbstractFileByPath(e.path);i instanceof ww&&h(i)&&R(e,n)}}))}return zL(l),l},t.prototype.renderSuggestion=function(e,t){var n=this;t.addClass("mod-complex");var i=t.createDiv("suggestion-content"),r=t.createDiv("suggestion-aux");if(!e){var o=this.inputEl.value;return i.createDiv({cls:"suggestion-title",text:o}),void r.createSpan({cls:"suggestion-action",text:Qf.interface.labelEnterToCreate()})}if(e.downranked&&t.addClass("mod-downranked"),"file"===e.type)WL(i.createDiv("suggestion-title"),PZ(e.file),e.match),r.createSpan({cls:"suggestion-flair"});else if("alias"===e.type){WL(i.createDiv("suggestion-title"),e.alias,e.match),i.createDiv({cls:"suggestion-note",text:PZ(e.file)}),r.createSpan({cls:"suggestion-flair"},(function(e){mx(e,"lucide-forward"),Rx(e,Qf.interface.tooltip.alias())}))}else if("unresolved"===e.type){WL(a=i.createDiv("suggestion-title"),e.linktext,e.match),r.createSpan({cls:"suggestion-flair"},(function(e){mx(e,"lucide-file-plus"),Rx(e,Qf.interface.tooltip.notCreatedYet())}))}else if("bookmark"===e.type){var a=i.createDiv("suggestion-title"),s=i.createDiv("suggestion-note");WL(a,e.bookmarkPath,e.match),r.createSpan({cls:"suggestion-flair"},(function(t){var i;if("file"===e.item.type)mx(t,"lucide-bookmark"),s.setText(ru(e.item.path)+(null!==(i=e.item.subpath)&&void 0!==i?i:""));else if("folder"===e.item.type)mx(t,"lucide-bookmark"),s.setText(ru(e.item.path));else if("search"===e.item.type)mx(t,"lucide-search"),s.setText(e.item.query);else if("graph"===e.item.type)mx(t,"lucide-git-fork"),s.detach();else if("url"===e.item.type){var r=n.app.internalPlugins.getEnabledPluginById("webviewer");r?(t.addClass("webviewer-favicon-container"),r.db.setIcon(t,e.item.url)):mx(t,"globe-2"),s.setText(e.item.url)}}))}},t}(hV),FZ=function(){function e(e){this.app=e}return e.prototype.setupNative=function(){var e=this;uA&&pA.addListener("appShareIntent",(function(t){return g(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return xw(),"text"!==t.type?[3,2]:[4,this.handleShareText(t.text)];case 1:e.sent(),e.label=2;case 2:return"files"!==t.type?[3,4]:[4,this.handleShareFiles(t.files)];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}))},e.prototype.setupWorkspace=function(){var e=this.app,t=e.workspace;t.on("receive-text-menu",(function(n,i){var r=t.getActiveViewOfType(LY);r&&n.addItem((function(t){return t.setSection("options").setTitle(Qf.interface.mobile.actionInsertTextIntoFile({filename:r.file.basename})).setIcon("lucide-file").onClick((function(){var t="\n"+i+"\n";"preview"===r.getMode()?e.fileManager.insertIntoFile(r.file,t):r.editor.insertText(t)}))})),n.addItem((function(t){return t.setSection("options").setTitle(Qf.interface.mobile.actionChooseFileToInsert()).setIcon("lucide-navigation").onClick((function(){new OZ(e,i).open()}))}))})),t.on("receive-files-menu",(function(n,i){var r=t.getActiveViewOfType(LY);r&&n.addItem((function(t){return t.setTitle(Qf.interface.mobile.actionInsertLinkIntoFile({filename:r.file.basename})).setIcon("lucide-file").onClick((function(){var t=i.map((function(t){return e.fileManager.generateMarkdownLink(t,r.file.path)}));r.editor.insertText("\n"+t.join("\n")+"\n")}))}))}))},e.prototype.handleShareText=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){return t=(new PA).addSections(["title","options","danger"]).addItem((function(t){return t.setSection("title").setTitle(pc(e,300)).setIcon("lucide-list-end").setIsLabel(!0).titleEl.addClass("u-muted","u-small")})).addItem((function(e){return e.setSection("options").setTitle(Qf.interface.mobile.actionInsertTextDesc()).removeIcon().setIsLabel(!0).titleEl.addClass("u-muted","u-small")})),this.app.workspace.trigger("receive-text-menu",t,e),t.addItem((function(e){return e.setSection("danger").setTitle(Qf.dialogue.buttonCancel()).setIcon("lucide-x").onClick((function(){return null}))})).showAtPosition({x:0,y:0}),[2]}))}))},e.prototype.handleShareFiles=function(e){return g(this,void 0,void 0,(function(){var t=this;return y(this,(function(n){return(new PA).addItem((function(t){return t.setTitle(createFragment((function(t){for(var n=0,i=e;n<i.length;n++){var r=i[n];t.createDiv({text:r.name})}}))).removeIcon().setIsLabel(!0).titleEl.addClass("u-muted","u-small")})).addSeparator().addItem((function(n){return n.setTitle(Qf.interface.mobile.actionImport()).setIcon("lucide-files").onClick((function(){return t.importFiles(e)}))})).addItem((function(e){return e.setTitle(Qf.dialogue.buttonCancel()).setIcon("lucide-x").onClick((function(){return null}))})).showAtPosition({x:0,y:0}),[2]}))}))},e.prototype.importFiles=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m;return y(this,(function(v){switch(v.label){case 0:t=[],n=new JA(Qf.interface.mobile.msgImporting(),0),i=0,r=this.app.vault,o=0,a=e,v.label=1;case 1:if(!(o<a.length))return[3,12];s=a[o],v.label=2;case 2:return v.trys.push([2,10,,11]),e.length>1&&n.setMessage(Qf.interface.mobile.msgImporting()+" (".concat(i,"/").concat(e.length,")")),[4,fetch(A.convertFileSrc(s.uri))];case 3:return[4,v.sent().arrayBuffer()];case 4:return l=v.sent(),c=s.name||Kc(s.uri),u=Xc(c),h=Qc(c),d=void 0,"md"===h?[3,6]:[4,r.getAvailablePathForAttachments(u,h,this.app.workspace.getActiveFile())];case 5:return d=v.sent(),[3,8];case 6:return[4,r.getAvailablePath(u,h)];case 7:d=v.sent(),v.label=8;case 8:return[4,r.createBinary(d,l)];case 9:return p=v.sent(),t.push(p),i++,[3,11];case 10:return f=v.sent(),n.hide(),new JA(Qf.interface.mobile.msgFailedToImportFile({filename:s.name})),new JA(f.toString()),[2];case 11:return o++,[3,1];case 12:return n.hide(),(m=(new PA).addItem((function(e){return e.setTitle(Qf.interface.mobile.msgImportSuccess()).removeIcon().setIsLabel(!0)})).addSeparator()).addItem((function(e){return e.setTitle(Qf.dialogue.buttonDone()).setIcon("lucide-check").onClick((function(){return null}))})),this.app.workspace.trigger("receive-files-menu",m,t),m.showAtPosition({x:0,y:0}),[2]}}))}))},e}(),OZ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.emptyStateText=Qf.plugins.quickSwitcher.labelNoNoteCreateNew(),i.allowCreateNewFile=!0,i.text=n,i.shouldShowUnresolved=!0,i.shouldShowNonImageAttachments=!1,i.shouldShowImages=!1,i.shouldShowCanvas=!1,i.shouldShowAllTypes=!1,i.setPlaceholder("Choose file to insert"),i.setInstructions([{command:"â†‘â†“",purpose:"to navigate"},{command:"â†µ",purpose:"to select"},{command:"esc",purpose:"to dismiss"}]),i}return f(t,e),t.prototype.onChooseSuggestion=function(e,t){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:t=null,n=this.app,r.label=1;case 1:return r.trys.push([1,7,,8]),e?[3,3]:[4,n.fileManager.createNewMarkdownFileFromLinktext(this.inputEl.value,"")];case 2:return t=r.sent(),[3,6];case 3:return"unresolved"!==e.type?[3,5]:[4,n.fileManager.createNewMarkdownFileFromLinktext(e.linktext,"")];case 4:return t=r.sent(),[3,6];case 5:"file"!==e.type&&"alias"!==e.type||(t=e.file),r.label=6;case 6:return[3,8];case 7:return i=r.sent(),new JA(i.toString()),[2];case 8:return t?[4,this.app.fileManager.insertIntoFile(t,this.text)]:[3,11];case 9:return r.sent(),[4,this.app.workspace.getLeaf().openFile(t)];case 10:r.sent(),r.label=11;case 11:return[2]}}))}))},t}(IZ),BZ=n(1928),NZ=n.n(BZ),RZ="audio/mp4",HZ=function(){function e(){this.id="audio-recorder",this.name=Qf.plugins.audioRecorder.name(),this.description=Qf.plugins.audioRecorder.desc(),this.app=null,this.plugin=null,this.recording=!1,this.recorder=null,this.extension=""}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerRibbonItem(Qf.plugins.audioRecorder.actionToggle(),"lucide-mic",this.onRecordAudio.bind(this)),t.registerGlobalCommand({id:"audio-recorder:start",name:Qf.plugins.audioRecorder.actionStart(),icon:"lucide-play-circle",checkCallback:function(e){return!n.recording&&(e||n.onStartRecording(),!0)}}),t.registerGlobalCommand({id:"audio-recorder:stop",name:Qf.plugins.audioRecorder.actionStop(),icon:"lucide-stop-circle",checkCallback:function(e){return!!n.recording&&(e||n.onStopRecording(),!0)}})},e.prototype.checkPermission=function(){return g(this,void 0,Promise,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return Zl.isDesktopApp&&"macOS"===zl?(e=Mf("electron"))?(t=e.remote.systemPreferences,n=t.getMediaAccessStatus("microphone"),["denied","restricted","unknown"].contains(n)?(this.showRecordingMessage(Qf.plugins.audioRecorder.msgAccessDenied(),!0),[2,!1]):[3,1]):(this.showRecordingMessage(Qf.plugins.audioRecorder.msgAccessDenied(),!0),[2,!1]):[3,5];case 1:return"not-determined"!==n?[3,3]:(this.showRecordingMessage(Qf.plugins.audioRecorder.msgPendingGrant(),!1),[4,t.askForMediaAccess("microphone")]);case 2:return[2,i.sent()];case 3:if("granted"===n)return[2,!0];i.label=4;case 4:return[2,!1];case 5:return[2,!0]}}))}))},e.prototype.onRecordAudio=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.checkPermission()];case 1:return e.sent()?this.recording?[3,3]:[4,this.onStartRecording()]:[2];case 2:return e.sent(),[3,4];case 3:this.onStopRecording(),e.label=4;case 4:return[2]}}))}))},e.prototype.onStartRecording=function(){return g(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:if(hA&&!navigator.mediaDevices)return new JA("This functionality requires iOS 14.5."),[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 2:return e=i.sent(),[4,this.startRecording(e)];case 3:return i.sent(),[3,5];case 4:return(t=i.sent()).message.contains("Requested device not found")&&this.plugin.addedButtonEls.length>0?(n=Qf.plugins.audioRecorder.msgNoMicrophone(),this.showRecordingMessage(n,!0)):(t.message.contains("denied")&&new JA(t.message),console.error(t)),[2];case 5:return this.recording=!0,this.plugin.addedButtonEls.forEach((function(e){mx(e,"lucide-mic"),e.addClass("is-active")})),[2]}}))}))},e.prototype.onStopRecording=function(){this.recording=!1,this.recorder.stop(),this.plugin.addedButtonEls.forEach((function(e){e.removeClass("is-active")}))},e.prototype.startRecording=function(e){var t=this,n=[],i='audio/webm;codecs="opus"';this.extension="webm",MediaRecorder.isTypeSupported(RZ)&&(i=RZ,this.extension="m4a"),this.recorder=new MediaRecorder(e,{mimeType:i}),this.recorder.addEventListener("dataavailable",(function(e){e.data.size>0&&n.push(e.data)})),this.recorder.addEventListener("stop",(function(){return g(t,void 0,void 0,(function(){var t,o,a;return y(this,(function(s){switch(s.label){case 0:if(this.recorder=null,e.getTracks().forEach((function(e){e.stop()})),t=new Blob(n,{type:i}),"webm"!==this.extension)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,NZ()(t)];case 2:return t=s.sent(),[3,4];case 3:return o=s.sent(),console.error(o),[3,4];case 4:return a=this.saveRecording,[4,t.arrayBuffer()];case 5:return[4,a.apply(this,[s.sent()])];case 6:return s.sent(),r&&r.release(),[2]}}))}))})),this.recorder.start();var r=null;uA&&(r=kA())},e.prototype.saveRecording=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return t=this.app,n=t.workspace,i="Recording "+window.moment().format("YYYYMMDDHHmmss"),r=n.getActiveFile(),o=n.getActiveViewOfType(LY),[4,t.vault.getAvailablePathForAttachments(i,this.extension,r)];case 1:return a=c.sent(),[4,t.vault.createBinary(a,e)];case 2:return s=c.sent(),o?(l=this.app.fileManager.generateMarkdownLink(s,o.file.path),o.editor.replaceSelection("\n".concat(l,"\n")),[2]):[4,n.getUnpinnedLeaf().openFile(s,{active:!0})];case 3:return c.sent(),[2]}}))}))},e.prototype.showRecordingMessage=function(e,t){this.plugin.addedButtonEls.length>0&&Ox(this.plugin.addedButtonEls[0],e,{placement:"right",classes:t?["mod-error"]:[]})},e}(),VZ=Qf.plugins.bookmarks,zZ=Qf.plugins.fileExplorer,qZ="bookmarks",UZ=function(e){function t(t,n){var i=e.call(this)||this;i.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},i.renameScope=null,i.tree=n,i.view=t,i.selfEl.addClass("bookmark"),i.selfEl.addEventListener("contextmenu",i.onContextMenu.bind(i)),i.titleEl=i.innerEl.createSpan({cls:"tree-item-inner-text"});var r=i.renameScope=new Tk(t.app.scope);return r.register([],"Enter",(function(){i.stopRename(!0)})),r.register([],"Escape",(function(){i.stopRename(!1)})),i}return f(t,e),Object.defineProperty(t.prototype,"path",{get:function(){for(var e=this.view.plugin,t=[],n=this;n;)t.push(e.getItemTitle(n.item)),n=n.parent instanceof _Z?n.parent:null;return t.reverse().join("/")},enumerable:!1,configurable:!0}),t.prototype.startRename=function(){var e=this,t=e.selfEl,n=e.titleEl,i=e.tree,r=e.view;t.addClass("is-being-renamed"),i.setFocusedItem(this,!0),n.setAttribute("contenteditable","true"),Sw(n),r.app.keymap.pushScope(this.renameScope)},t.prototype.update=function(){var e=this.item,t=this.view,n=t.plugin.getItemTitle(e);this.titleEl.setText(n),this.el.setAttr("data-path",this.path);var i=!1;"file"===e.type&&(this.selfEl.toggle(!!t.app.vault.getAbstractFileByPath(e.path)),i=!0),this.tree.infinityScroll.invalidate(this,i)},t.prototype.setActive=function(e){this.selfEl.toggleClass("is-active",e)},t.prototype.stopRename=function(e){var t=this,n=t.item,i=t.selfEl,r=t.view;if(e){var o=this.titleEl.textContent.trim();o?(n.title=o,r.plugin.onItemsChanged(!0)):this.update()}else this.update();this.titleEl.removeAttribute("contenteditable"),i.removeClass("is-being-renamed"),r.app.keymap.popScope(this.renameScope)},t.prototype.onTitleBlur=function(e){this.stopRename(!0)},t.prototype.onContextMenu=function(e){var t=this,n=this.view,i=n.app,r=n.tree,o=n.plugin,a=PA.forEvent(e).setParentElement(this.selfEl).addSections(["title","open","action","view","info","","danger"]);if(r.selectedDoms.size>1&&r.selectedDoms.has(this)){var s=Array.from(r.selectedDoms).map((function(e){return e.item}));a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(e){return o.openBookmarks(s,"tab")}))})),Zl.canSplit&&a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(e){return o.openBookmarks(s,"split")}))})),Zl.canPopoutWindow&&a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewWindow()).setIcon("lucide-picture-in-picture-2").onClick((function(e){return o.openBookmarks(s,"window")}))})),a.addItem((function(e){return e.setSection("danger").setTitle(VZ.menuOptRemove()).setIcon("lucide-trash-2").onClick((function(){r.selectedDoms.forEach((function(e){o.removeItem(e.item)}))}))})),i.workspace.trigger("bookmarks:bookmarks-menu",a,s)}else{if(a.addItem((function(e){return e.setSection("action").setTitle(VZ.menuOptRename()).setIcon("lucide-pencil").onClick((function(e){return t.startRename()}))})).addItem((function(e){return e.setSection("danger").setTitle(VZ.menuOptRemove()).setIcon("lucide-trash-2").onClick((function(){t.view.plugin.removeItem(t.item)}))})),"group"===this.item.type){var l=this.item,c=this.item.items;a.addItem((function(e){return e.setSection("action").setTitle(VZ.actionNewBookmark()).setIcon("lucide-bookmark-plus").onClick((function(t){var n=DZ(i.workspace.getMostRecentLeaf());e&&new ZY(o,n,!1).setBookmarkGroup(l).open()}))})).addItem((function(e){return e.setSection("action").setIcon("lucide-folder-plus").setTitle(VZ.actionNewGroup()).onClick((function(){return t.view.createNewGroup(l)}))})).addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(e){return o.openBookmarks(c,"tab")}))})),Zl.canSplit&&a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(e){return o.openBookmarks(c,"split")}))})),Zl.canPopoutWindow&&a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewWindow()).setIcon("lucide-picture-in-picture-2").onClick((function(e){return o.openBookmarks(c,"window")}))}))}else"file"!==this.item.type&&"graph"!==this.item.type||(a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(e){return o.openBookmark(t.item,"tab")}))})),Zl.canSplit&&a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(e){return o.openBookmark(t.item,"split")}))})),Zl.canPopoutWindow&&a.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewWindow()).setIcon("lucide-picture-in-picture-2").onClick((function(e){return o.openBookmark(t.item,"window")}))}))),a.addItem((function(e){return e.setSection("action").setTitle(VZ.menuOptEdit()).setIcon("lucide-pencil").onClick((function(e){new ZY(t.view.plugin,t.item,!0).open()}))}));if("file"===this.item.type||"folder"===this.item.type){var u=i.vault.getAbstractFileByPath(this.item.path);u&&a.addItem((function(e){return e.setSection("view").setTitle(Qf.plugins.fileExplorer.actionRevealFile()).setIcon("lucide-folder-open").onClick((function(e){i.internalPlugins.getEnabledPluginById("file-explorer").revealInFolder(u)}))}))}i.workspace.trigger("bookmarks:bookmarks-menu",a,[this.item])}},t}($P),_Z=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.vChildren=new eI(r),r.pusherEl=uI(),r.view=t,r.item=i,r.setCollapsible(!0),r.setClickable(!0),r.titleEl.addEventListener("blur",r.onTitleBlur.bind(r)),r}return f(t,e),t.prototype.onSelfClick=function(e){this.tree.handleItemSelection(e,this)||this.onCollapseClick(e)},t.prototype.refreshChildren=function(){var e=this.view,n=this.item;this.vChildren.clear(),this.tree.infinityScroll.invalidate(this);for(var i=0,r=n.items;i<r.length;i++){var o=r[i],a=e.getItemDom(o);this.vChildren.addChild(a),a.update(),a instanceof t&&a.refreshChildren()}},t.prototype.onCollapseClick=function(t){e.prototype.onCollapseClick.call(this,t),this.tree.requestSaveFolds()},t.prototype.updateCollapsed=function(t){return g(this,void 0,Promise,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=this.tree.infinityScroll,this.collapsed||null===(r=(i=this.tree).handleCollapseAll)||void 0===r||r.call(i,!1),n.invalidate(this,!0),[4,e.prototype.updateCollapsed.call(this,t)];case 1:return o.sent(),n.invalidate(this),[2]}}))}))},t}(QP(UZ)),WZ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;if(r.app=t.app,r.item=i,r.iconEl=r.selfEl.createDiv({cls:"tree-item-icon",prepend:!0}),r.setClickable(!0),r.constructDom(),"file"===i.type&&!i.subpath){var o=t.app.workspace.getActiveFile();r.setActive(i.path===(null==o?void 0:o.path))}return r}return f(t,e),t.prototype.onFileMouseover=function(e){var t;if(!Bc(e)&&"file"===this.item.type){var n=this.view.app,i=n.vault.getAbstractFileByPath(this.item.path);i instanceof ww&&n.workspace.trigger("hover-link",{event:e,source:qZ,hoverParent:this,targetEl:this.selfEl,linktext:i.path+(null!==(t=this.item.subpath)&&void 0!==t?t:"")})}},t.prototype.onSelfClick=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return this.tree.handleItemSelection(e,this)||this.view.plugin.openBookmark(this.item,Ak.isModEvent(e),{eState:{focus:!0}}),[2]}))}))},t.prototype.constructDom=function(){var e,t,n=this.item;if("file"===n.type)n.path.endsWith(".canvas")?mx(this.iconEl,"lucide-layout-dashboard"):(null===(e=n.subpath)||void 0===e?void 0:e.startsWith("#^"))?mx(this.iconEl,"lucide-toy-brick"):(null===(t=n.subpath)||void 0===t?void 0:t.startsWith("#"))?mx(this.iconEl,"lucide-heading"):mx(this.iconEl,"lucide-file"),this.selfEl.addEventListener("mouseover",this.onFileMouseover.bind(this));else if("folder"===n.type)mx(this.iconEl,"lucide-folder");else if("search"===n.type)mx(this.iconEl,"lucide-search");else if("graph"===n.type)mx(this.iconEl,"lucide-git-fork");else if("url"===n.type){var i=this.app.internalPlugins.getEnabledPluginById("webviewer");i?i.db.setIcon(this.iconEl,n.url):mx(this.iconEl,"globe-2")}this.titleEl.addEventListener("blur",this.onTitleBlur.bind(this))},t}(UZ),jZ=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=n,i.icon="lucide-bookmark",i.itemDoms=new WeakMap,i.collapseOrExpandAllEl=null,i.requestUpdate=mc(i.update.bind(i),50),i.emptyEl=createDiv({cls:"pane-empty bookmarks-pane-empty",text:VZ.labelNoBookmarks()}),i.invalidStateEl=createDiv({cls:"pane-empty mod-error"},(function(e){e.createDiv({text:VZ.labelInvalidData()}),e.createDiv({text:VZ.labelInvalidDataDesc()})})),i.scope=new Tk(i.app.scope);var r=new XP(i.app,i.containerEl);return i.tree=new fI(i,{app:i.app,containerEl:i.contentEl,id:qZ,scope:i.scope,getNodeId:i.getNodeId.bind(i),handleDeleteSelectedItems:i.onDeleteSelectedItems.bind(i),handleRenameFocusedItem:i.onRenameKey.bind(i),handleCollapseAll:i.handleCollapseAll.bind(i)}),r.addNavButton("lucide-bookmark-plus",VZ.actionNewBookmark(),(function(){var e=DZ(i.app.workspace.getMostRecentLeaf());e&&new ZY(i.plugin,e,!1).open()})),r.addNavButton("lucide-folder-plus",VZ.actionNewGroup(),(function(){return i.createNewGroup()})),i.collapseOrExpandAllEl=r.addNavButton("lucide-chevrons-down-up",VZ.actionCollapseAll(),(function(){return i.tree.toggleCollapseAll()})),i.containerEl.addEventListener("contextmenu",i.onContextMenu.bind(i)),i.attachDropHandler(),i}return f(t,e),t.prototype.load=function(){var t=this;e.prototype.load.call(this);var n=this.app;this.registerEvent(n.vault.on("create",this.onFileCreate.bind(this),this)),this.registerEvent(n.vault.on("delete",this.onFileDelete.bind(this),this)),this.registerEvent(this.plugin.on("changed",this.requestUpdate,this)),this.registerEvent(n.metadataCache.on("finished",this.requestUpdate,this)),this.registerEvent(n.workspace.on("file-open",this.onFileOpen,this)),this.app.workspace.onLayoutReady((function(){t.onFileOpen(n.workspace.getActiveFile()),t.update(),t.tree.loadFolds()}))},t.prototype.onFileCreate=function(e){iI(this.tree.root,(function(t){"file"!==t.item.type&&"folder"!==t.item.type||t.item.path!==e.path||t.update()}))},t.prototype.onFileDelete=function(e){iI(this.tree.root,(function(t){"file"!==t.item.type&&"folder"!==t.item.type||t.item.path!==e.path||t.update()}))},t.prototype.handleCollapseAll=function(e){this.tree.isAllCollapsed=e,e?(mx(this.collapseOrExpandAllEl,"lucide-chevrons-up-down"),Rx(this.collapseOrExpandAllEl,zZ.actionExpandAll())):(mx(this.collapseOrExpandAllEl,"lucide-chevrons-down-up"),Rx(this.collapseOrExpandAllEl,zZ.actionCollapseAll()))},t.prototype.getDisplayText=function(){return VZ.name()},t.prototype.getViewType=function(){return qZ},t.prototype.isItem=function(e){return e instanceof UZ},Object.defineProperty(t.prototype,"root",{get:function(){return this.tree.infinityScroll.rootEl},enumerable:!1,configurable:!0}),t.prototype.attachDropHandler=function(){var e=this,t="move";this.app.dragManager.handleDrop(this.containerEl,(function(n,i,r){var o=mI(n,e.tree),a=[];"bookmarks"===i.source&&"bookmarks"===i.type&&(a=i.items);var s=wI(e.tree,o,a,r);if(!o)return null;if(!r){var l=function(t){var n=o.parentNode instanceof _Z?o.parentNode.item:null;e.plugin.moveItem(t,n,o.idx)};if("bookmarks"===i.type)for(var c=0,u=i.items;c<u.length;c++){var h=u[c];o.parentNode!==h&&l(h.item)}else if("file"===i.type)t="copy",l(CZ(i.file));else if("heading"===i.type){t="copy";var d="#"+QS(i.heading.heading);l(CZ(i.file,d))}else if("link"===i.type){if(i.file){t="copy";d=WS(i.linktext).subpath;var p=CZ(i.file,d);p.title=i.title,l(p)}}else if("folder"===i.type){t="copy",LZ([i.file]).forEach(l)}else if("files"===i.type){t="copy",LZ(i.files).forEach(l)}}return{dropEffect:t,hoverEl:s,hoverClass:"is-active"}}))},t.prototype.onRenameKey=function(e){e.preventDefault(),this.tree.isItem(this.tree.focusedItem)&&this.tree.focusedItem.startRename()},t.prototype.onDeleteSelectedItems=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r=this;return y(this,(function(o){return e.preventDefault(),t=this.tree,n=t.focusedItem,(i=t.selectedDoms).size>0?i.forEach((function(e){r.plugin.removeItem(e.item)})):n instanceof WZ&&this.plugin.removeItem(n.item),[2]}))}))},t.prototype.getNodeId=function(e){return"item-".concat(e.item.ctime)},t.prototype.createNewGroup=function(e){var t=EZ();(e?e.items:this.plugin.items).push(t),this.plugin.saveData(),this.update(),this.getItemDom(t).startRename()},t.prototype.onContextMenu=function(e){var t=this;e.defaultPrevented||(new PA).addItem((function(e){return e.setIcon("lucide-folder-plus").setTitle(VZ.actionNewGroup()).onClick((function(){return t.createNewGroup()}))})).showAtMouseEvent(e)},t.prototype.onFileOpen=function(e){iI(this.root,(function(t){if("file"===t.item.type){var n=e&&t.item.path===e.path&&!t.item.subpath;t.setActive(n)}}))},t.prototype.onResize=function(){this.tree.infinityScroll.onResize()},t.prototype.dragSelectedBookmarks=function(e,t){var n=this.tree.selectedDoms;if(0===n.size||1===n.size&&n.has(t))return null;if(!n.has(t))return null;var i=[],r=[];n.forEach((function(e){r.push(e.item),i.push(e.selfEl)}));var o=Array.from(n);return o.sort((function(e,t){return e.selfEl.offsetTop-t.selfEl.offsetTop})),this.app.dragManager.updateSource(i,"is-being-dragged"),{source:"bookmarks",type:"bookmarks",icon:"lucide-bookmark",items:o,title:VZ.labelBookmarkWithCount({count:n.size})}},t.prototype.getItemDom=function(e){var t=this.itemDoms.get(e);return t||(t="group"===e.type?new _Z(this,this.tree,e):new WZ(this,this.tree,e),this.itemDoms.set(e,t),this.attachDragHandler(t)),t},t.prototype.attachDragHandler=function(e){var t=this,n=this.plugin,i=this.app.dragManager;i.handleDrag(e.selfEl,(function(r){var o=t.dragSelectedBookmarks(r,e);return o||(t.tree.selectedDoms.has(e)||(t.tree.clearSelectedDoms(),t.tree.selectItem(e)),i.updateSource([e.selfEl],"is-being-dragged"),Lk(r.dataTransfer,n.getItemTitle(e.item)),{source:"bookmarks",type:"bookmarks",icon:"lucide-bookmark",items:[e],title:n.getItemTitle(e.item)})}))},t.prototype.update=function(){var e=this.root.vChildren;if(e.clear(),this.invalidStateEl.detach(),this.emptyEl.detach(),this.plugin.hasValidData){for(var t=!1,n=0,i=this.plugin.items;n<i.length;n++){var r=i[n],o=this.getItemDom(r);e.addChild(o),o.update(),o instanceof _Z&&o.refreshChildren(),"none"!==o.el.style.display&&(t=!0)}t?this.emptyEl.detach():this.contentEl.appendChild(this.emptyEl)}else this.contentEl.appendChild(this.invalidStateEl);this.tree.infinityScroll.invalidate(this.root)},t.prototype.handlePaste=function(e){var t=e.clipboardData.getData("obsidian/bookmarks");if(t){var n=this.tree.focusedItem,i=[];try{i=JSON.parse(t)}catch(e){console.log(e)}if(i&&Array.isArray(i)){var r=void 0;n&&(n instanceof _Z?r=n.item:n.parent instanceof _Z&&(r=n.parent.item));for(var o=Date.now(),a=0,s=i;a<s.length;a++){var l=s[a];this.plugin.addItem(m(m({},l),{ctime:o}),r)}}}},t.prototype._copyToClipboard=function(e,t){e.clipboardData.setData("obsidian/bookmarks",JSON.stringify(t))},t.prototype._getActiveBookmarks=function(){var e=this.tree,t=e.focusedItem,n=e.selectedDoms;return n.size>0?Array.from(n).map((function(e){return e.item})):t&&this.tree.isItem(t)?[t.item]:[]},t.prototype.handleCopy=function(e){var t=this._getActiveBookmarks();0!==t.length&&(e.preventDefault(),this._copyToClipboard(e,t))},t.prototype.handleCut=function(e){var t=this._getActiveBookmarks();if(0!==t.length){e.preventDefault(),this._copyToClipboard(e,t);for(var n=0,i=t;n<i.length;n++){var r=i[n];this.plugin.removeItem(r)}}},t}(GP),GZ=Qf.plugins.bookmarks,KZ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="bookmarks",t.name=GZ.name(),t.description=GZ.desc(),t.defaultOn=!0,t.hasValidData=!1,t.items=[],t.bookmarkLookup={},t.urlBookmarkLookup={},t.bookmarkedViews=new WeakMap,t.onItemsChanged=mc(t._onItemsChanged.bind(t),20),t}return f(t,e),t.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerGlobalCommand({id:"bookmarks:open",name:GZ.actionShow(),icon:"lucide-bookmark",callback:function(){n.app.workspace.ensureSideLeaf(qZ,"left",{active:!0})}}),t.registerGlobalCommand({id:"bookmarks:bookmark-current-view",name:Qf.plugins.bookmarks.actionBookmark(),icon:"lucide-bookmark-plus",checkCallback:function(t){var i=e.workspace.getMostRecentLeaf();if(i){var r=n.findBookmarkByView(i.view),o=!!r;if(r||(r=DZ(i)),r)return t||new ZY(n,r,o).open(),!0}}}),t.registerGlobalCommand({id:"bookmarks:bookmark-current-search",name:Qf.plugins.bookmarks.actionBookmarkSearch(),icon:"lucide-search",checkCallback:function(e){var t=n.app.internalPlugins.getEnabledPluginById("global-search");if(t){if(!e){var i=t.getGlobalSearchQuery();if(!i)return new JA(GZ.msgNoSearchQuery()),!0;var r=TZ(i);new ZY(n,r,!1).open()}return!0}}}),t.registerGlobalCommand({id:"bookmarks:unbookmark-current-view",name:Qf.plugins.bookmarks.actionRemoveBookmark(),icon:"lucide-bookmark-plus",checkCallback:function(e){var t=n.app.workspace.getMostRecentLeaf(),i=n.findBookmarkByView(t.view);if(i)return e||n.removeItem(i),!0}}),t.registerGlobalCommand({id:"bookmarks:bookmark-current-section",name:Qf.plugins.bookmarks.actionBookmarkBlock(),icon:"lucide-bookmark-plus",editorCallback:function(e,t){var i,r=function(e,t){var n=e.app.metadataCache,i=e.file,r=n.getFileCache(i);if(!r)return null;function o(e){return t.line<e.position.start.line?-1:t.line>e.position.end.line?1:0}var a=hc(r.sections||[],o);return"list"===(null==a?void 0:a.type)?hc(r.listItems||[],o):"heading"===(null==a?void 0:a.type)?hc(r.headings||[],o):a}(t.editMode,e.getCursor("to")),o=void 0;if(r){if(function(e){return e.hasOwnProperty("heading")}(r))i=CZ(t.file,"#"+QS(r.heading));else{var a=r.id;a||(a=oc(6),o=function(){!function(e,t,n,i){g(this,void 0,void 0,(function(){var r,o,a,s,l,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:return i=null!=i?i:oc(6),r=t.editor,o=t.file,[4,t.app.metadataCache.blockCache.getForFile(e,o)];case 1:for(a=p.sent(),s=0,l=a.blocks;s<l.length;s++)if(c=l[s],(u=c.node.position)&&u.start.line-1<=n.line&&u.end.line-1>=n.line)return h={content:a.content,node:c.node},d=GD(h,i),r.cm.dispatch({changes:{from:d.blockEnd,insert:d.addition}}),[2];return[2]}}))}))}(new dL,t.editMode,e.getCursor("to"),a)}),i=CZ(t.file,"#^"+a)}e.somethingSelected()&&(i.title=e.getSelection().trim()),new ZY(n,i,!1,o).open()}}}),t.registerGlobalCommand({id:"bookmarks:bookmark-current-heading",name:Qf.plugins.bookmarks.actionBookmarkHeading(),icon:"lucide-bookmark-plus",editorCallback:function(e,t){var i=function(e){var t=e.app,n=e.file,i=e.editor.getCursor("to");return n?jD(t,n,i):null}(t.editMode);if(i){var r=CZ(t.file,"#"+QS(i.heading));new ZY(n,r,!1).open()}}}),t.registerGlobalCommand({id:"bookmarks:bookmark-all-tabs",name:Qf.plugins.bookmarks.actionBookmarkAllTabs(),icon:"lucide-bookmark-plus",callback:function(){var e=n.app.workspace,t=e.rootSplit,i=e.floatingSplit,r=[];n.app.workspace.iterateLeaves([t,i],(function(e){var t=DZ(e);t&&r.push(t)})),r.length>0&&new XY(n.app,n,r).open()}}),t.registerViewType(qZ,(function(e){return new jZ(e,n)}))},t.prototype.onUserEnable=function(){this.initLeaf()},t.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(qZ,"left",{reveal:!1})},t.prototype.findBookmarkByView=function(e){return e instanceof YP&&e.file?this.bookmarkLookup[e.file.path]:e instanceof wZ?this.urlBookmarkLookup[e.url]:null},t.prototype.onFileRename=function(e,t){var n=!1;AZ(this.items,(function(i){"file"!==i.type&&"folder"!==i.type||i.path!==t||(i.path=e.path,n=!0)})),n&&this.onItemsChanged(!0)},t.prototype.updateTabHeaders=function(){var e=this;this.app.workspace.iterateAllLeaves((function(t){var n=t.view;if(n instanceof GP){var i=e.findBookmarkByView(n),r=i?GZ.labelBookmarked():GZ.labelBookmark(),o=e.bookmarkedViews.get(n);o||(o=n.addAction("lucide-bookmark",r,(function(){var i=e.findBookmarkByView(n),r=!!i;i||(i=DZ(t)),new ZY(e,i,r).open()}))).addClass("mod-bookmark"),e.bookmarkedViews.set(n,o),o.toggleClass(["mod-bookmarked","mod-filled"],!!i),Rx(o,r)}}))},t.prototype.getBookmarks=function(){var e=[];return AZ(this.items,(function(t){e.push(t)})),e},t.prototype.getItemTitle=function(e){if(!e.title){if("file"===e.type&&e.subpath)return iu(e.path)+e.subpath;if("file"===e.type||"folder"===e.type){var t=this.app.vault.getAbstractFileByPath(e.path);return t instanceof ww?t.getShortName():t instanceof kw?t.name:iu(e.path)}if("search"===e.type)return e.query}return e.title},t.prototype.addItem=function(e,t){var n=t?t.items:this.items;e[KY]=t,n.push(e),this.onItemsChanged(!0)},t.prototype.editItem=function(e){this._onItemsChanged(!0)},t.prototype.removeItem=function(e){var t,n;e&&((null!==(n=null===(t=e[KY])||void 0===t?void 0:t.items)&&void 0!==n?n:this.items).remove(e),this.onItemsChanged(!0))},t.prototype.moveItem=function(e,t,n){var i=e[KY],r=i?i.items:this.items,o=r.indexOf(e);r.remove(e);var a=t?t.items:this.items;-1!==o&&o<n&&r===a&&n--,a.splice(n,0,e),e[KY]=t,this._onItemsChanged(!0)},t.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return t.registerEvent(e.workspace.on("editor-menu",this.onEditorMenu,this)),t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.workspace.on("files-menu",this.onFilesMenu,this)),t.registerEvent(e.workspace.on("leaf-menu",this.onLeafMenu,this)),t.registerEvent(e.workspace.on("search:results-menu",this.onSearchResultsMenu,this)),t.registerEvent(e.workspace.on("tab-group-menu",this.onTabGroupMenu,this)),t.registerEvent(e.workspace.on("layout-change",this.updateTabHeaders,this)),t.registerEvent(e.vault.on("rename",this.onFileRename.bind(this),this)),e.workspace.registerHoverLinkSource(qZ,{display:this.name,defaultMod:!0}),[4,this.loadData()];case 1:return i.sent()||e.workspace.onLayoutReady((function(){return g(n,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,this.app.vault.readConfigJson("starred")];case 1:if((e=a.sent())&&e.hasOwnProperty("items")&&Array.isArray(e.items)){for(t=[],n=Date.now(),i=0,r=e.items;i<r.length;i++)("file"!==(o=r[i]).type&&"folder"!==o.type||this.app.vault.getAbstractFileByPath(o.path))&&("file"===o.type&&delete o.title,o.ctime||(o.ctime=n),t.push(o));this.items=t,this._onItemsChanged(!0)}return[2]}}))}))})),[2]}}))}))},t.prototype.loadData=function(){return g(this,void 0,Promise,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return[4,this.plugin.loadData()];case 1:return e=n.sent(),this.hasValidData=void 0!==e,e&&e.hasOwnProperty("items")&&Array.isArray(e.items)&&(t=function(e,n){for(var i=0,r=e;i<r.length;i++){var o=r[i];o[KY]=n,"group"===o.type&&t(o.items,o)}},t(e.items,null),this.items=e.items),this.rebuildBookmarkCache(),[2,!!this.items]}}))}))},t.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.loadData()];case 1:return e.sent(),this.onItemsChanged(!1),[2]}}))}))},t.prototype.onEditorMenu=function(e,t,n){var i=this,r=n.file;if(r){var o=t.getCursor(),a=eC(t.getLine(o.line));if(a){var s="#"+QS(a);e.addItem((function(e){return e.setTitle(GZ.menuOptBookmarkHeading()).setIcon("lucide-bookmark").setSection("action").onClick((function(){var e=CZ(r,s);new ZY(i,e,!1).open()}))}))}}},t.prototype.onFilesMenu=function(e,t,n,i){var r=this;e.addItem((function(e){return e.setSection("action").setTitle(GZ.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=LZ(t);new XY(r.app,r,e).open()}))}))},t.prototype.onFileMenu=function(e,t,n,i){var r=this,o=this.bookmarkLookup.hasOwnProperty(t.path);e.addItem((function(e){return e.setSection("action").setTitle(o?GZ.actionEditBookmark():GZ.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=r.bookmarkLookup[t.path];e||(t instanceof ww?e=CZ(t):t instanceof kw&&(e=MZ(t))),e&&new ZY(r,e,o).open()}))}))},t.prototype.onTabGroupMenu=function(e,t){var n=this,i=t.children.map(DZ).filter(Boolean),r=i.length;r>0&&e.addItem((function(e){return e.setSection("action").setTitle(GZ.actionBookmarkTabGroup({count:r})).setIcon("lucide-bookmark").onClick((function(){new XY(n.app,n,i).open()}))}))},t.prototype.onSearchResultsMenu=function(e,t){var n=this,i=t.getQuery();e.addItem((function(e){return e.setSection("action").setTitle(GZ.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=TZ(i);new ZY(n,e,!1).open()}))}))},t.prototype.onLeafMenu=function(e,t){var n=this;if(t.view instanceof KG){var i=t.view.dataEngine.getOptions();e.addItem((function(e){return e.setSection("action").setTitle(GZ.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=SZ(i);new ZY(n,e,!1).open()}))}))}else if(t.view instanceof wZ){var r=t.view,o=r.url,a=r.title,s=this.urlBookmarkLookup.hasOwnProperty(o);e.addItem((function(e){return e.setSection("action").setTitle(s?GZ.actionEditBookmark():GZ.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=n.urlBookmarkLookup[o];e||(e=xZ(o,a)),e&&new ZY(n,e,s).open()}))}))}},t.prototype._onItemsChanged=function(e){this.trigger("changed"),this.rebuildBookmarkCache(),this.updateTabHeaders(),e&&this.saveData()},t.prototype.saveData=function(){this.plugin.saveData({items:this.items})},t.prototype.rebuildBookmarkCache=function(){var e=this;this.bookmarkLookup={},this.urlBookmarkLookup={},AZ(this.items,(function(t){"folder"===t.type||"file"===t.type&&!t.subpath?e.bookmarkLookup[t.path]=t:"url"===t.type&&(e.urlBookmarkLookup[t.url]=t)}))},t.prototype.openBookmarkInLeaf=function(e,t,n){return g(this,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return"file"!==e.type?[3,1]:(i=e.path+(null!==(o=e.subpath)&&void 0!==o?o:""),t.openLinkText(i,"",n),[3,5]);case 1:return"graph"!==e.type?[3,4]:(r=this.app.internalPlugins.getEnabledPluginById("graph"))?[4,t.setViewState({type:"graph"})]:[3,3];case 2:a.sent(),t.view instanceof KG&&t.view.dataEngine.setOptions(e.options),r.options.options=e.options,a.label=3;case 3:return[3,5];case 4:"url"===e.type&&window.open(e.url,"_blank"),a.label=5;case 5:return[2]}}))}))},t.prototype.openBookmark=function(e,t,n){return g(this,void 0,void 0,(function(){var i,r,o,a,s,l;return y(this,(function(c){if("file"===e.type||"graph"===e.type)return i=this.app.workspace.getLeaf(t),[2,this.openBookmarkInLeaf(e,i,n)];if("url"===e.type)window.open(e.url,"_blank");else if("folder"===e.type)(r=this.app.vault.getAbstractFileByPath(e.path))&&(o=this.app.internalPlugins.getEnabledPluginById("file-explorer"))&&o.revealInFolder(r);else if("search"===e.type&&(a=e.query,s=this.app.internalPlugins.getEnabledPluginById("global-search"))){if(l=s.getGlobalSearchQuery(),!t||""===l)return s.openGlobalSearch(a),[2];l.contains(a)?s.openGlobalSearch(l.replace(a,"").trim()):s.openGlobalSearch("".concat(l.trim()," ").concat(a))}return[2]}))}))},t.prototype.openBookmarks=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(0===(n=e.filter((function(e){return"file"===e.type||"graph"===e.type}))).length)return[2];for(i=this.app.workspace.getLeaf(t),r=i.parent.children.length,o=[i],s=1;s<n.length;s++)a=new VK(this.app),i.parent.insertChild(r,a),o.push(a),r++;s=0,l.label=1;case 1:return s<o.length?[4,this.openBookmarkInLeaf(n[s],o[s],{active:!1})]:[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return this.app.vault.getConfig("focusNewTab")&&this.app.workspace.setActiveLeaf(i,{focus:!0}),[2]}}))}))},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(sw),YZ=Qf.plugins.canvas;function ZZ(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];Sk.hasOwnProperty(r)?t.push(Sk[r]):t.push(r)}return t.join(Zl.isMacOS?" ":" + ")}var XZ=function(e){function t(t){var n,i=e.call(this,t.app)||this;i.modalEl.addClass("mod-canvas-help"),i.setTitle(YZ.labelCanvasHelp());var r=i.contentEl.createDiv("canvas-help"),o=function(e,t){r.createDiv({cls:"canvas-instruction"},(function(n){n.createDiv({cls:"canvas-instruction-label",text:e}),n.createDiv({cls:"canvas-instruction-desc"},(function(e){for(var n=0,i=t;n<i.length;n++){var r=i[n];e.createSpan({cls:"setting-hotkey",text:ZZ(r)})}}))}))},a=[["Scroll"]],s=[["Shift","Scroll"]],l=[["Mod","Scroll"],["Space","Scroll"]];return"zoom"===t.view.plugin.options.defaultWheelBehavior&&(a=(n=[l,a])[0],l=n[1],s=[["Mod","Shift","Scroll"],["Shift","Space","Scroll"]]),o(YZ.labelPan(),w([["Space","Drag"]],a,!0)),o(YZ.labelPanHorizontal(),s),o(YZ.labelZoom(),l),o(YZ.actionZoomToFit(),[["Shift","1"]]),o(YZ.actionZoomToSelection(),[["Shift","2"]]),o(YZ.labelSelectAll(),[["Mod","A"]]),o(YZ.labelAddRemoveSelection(),[["Shift","Click"],["Shift","Drag to select"]]),o(YZ.actionCreateWithSize(),[["Mod","Drag to select"]]),o(YZ.labelCloneCard(),[[Zl.isMacOS?"Alt":"Ctrl","Drag"]]),o(YZ.labelConstrainMovementAxis(),[["Shift","Drag"]]),o(YZ.labelDisableDragSnapping(),[[Zl.isMacOS?"Ctrl":"Alt"]]),o(YZ.labelRemoveCard(),[["Backspace"],["Delete"]]),o(Qf.setting.mobileToolbar.optionUndo(),[["Mod","Z"]]),o(Qf.setting.mobileToolbar.optionRedo(),[["Mod","Y"],["Mod","Shift","Z"]]),i}return f(t,e),t}(ZA);function $Z(e){var t=e.getBoundingClientRect(),n=t.left+e.clientLeft,i=t.top+e.clientTop,r=e.clientWidth,o=e.clientHeight;return{left:n,top:i,width:r,height:o,cx:n+r/2,cy:i+o/2,minX:-r/2,minY:-o/2,maxX:r/2,maxY:o/2}}function QZ(e,t,n,i){return{minX:e,minY:t,maxX:n,maxY:i}}function JZ(e,t){return QZ(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.max(e.x,t.x),Math.max(e.y,t.y))}function eX(e){var t=e.x,n=e.y;return QZ(t,n,t+e.width,n+e.height)}function tX(e){var t=e.minX,n=e.minY;return Nl(t,n,e.maxX-t,e.maxY-n)}function nX(e){for(var t=QZ(1/0,1/0,-1/0,-1/0),n=0,i=e;n<i.length;n++){var r=i[n];t.minX=Math.min(t.minX,r.minX),t.minY=Math.min(t.minY,r.minY),t.maxX=Math.max(t.maxX,r.maxX),t.maxY=Math.max(t.maxY,r.maxY)}return t}function iX(e,t){return QZ(e.minX-t,e.minY-t,e.maxX+t,e.maxY+t)}function rX(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&e.maxX>=t.maxX&&e.maxY>=t.maxY}function oX(e){var t=e.minX,n=e.minY;return Ol((t+e.maxX)/2,(n+e.maxY)/2)}function aX(e,t){return Ol(e.x-t.width/2,e.y-t.height/2)}function sX(e,t,n){return n&&(e="center"===n?aX(e,t):function(e,t){var n=e.x,i=e.y,r=e.width,o=e.height;switch(t){case"left":return Ol(n,i-o/2);case"top":return Ol(n-r/2,i);case"right":return Ol(n-r,i-o/2);case"bottom":return Ol(n-r/2,i-o)}}(Rl(e,t),n)),Rl(e,t)}function lX(e,t,n){var i,r,o,a=n.x,s=n.y,l=n.width,c=n.height;switch(e){case"top":case"bottom":i=Nl(a,t.y,l,0),r=!1,o=!0;break;case"left":case"right":i=Nl(t.x,s,0,c),r=!0,o=!1;break;case"topleft":case"topright":case"bottomleft":case"bottomright":i=Nl(t.x,t.y,0,0),r=!0,o=!0}return{source:i,resizeX:r,resizeY:o}}var cX=Qf.plugins.quickSwitcher,uX=Qf.plugins.canvas,hX=function(e){function t(t,n,i){var r=e.call(this,t.app)||this;return r.emptyStateText=cX.labelNoNoteCreateNew(),r.allowCreateNewFile=!0,r.context="embed",r.canvas=t,r.handleClose=i,r.handleChoose=n,r.shouldShowUnresolved=!1,r.shouldShowMarkdown=!0,r.shouldShowImages=!0,r.shouldShowNonImageAttachments=!0,r.shouldShowAllTypes=t.app.vault.getConfig("showUnsupportedFiles"),r.setPlaceholder(uX.promptStartSearch()),r.setInstructions([{command:"â†‘â†“",purpose:cX.instructionNavigate()},{command:"â†µ",purpose:cX.instructionOpen()},{command:"shift â†µ",purpose:cX.instructionCreate()},{command:"esc",purpose:cX.instructionDismiss()}]),r.scope.register(["Shift"],"Enter",(function(e){return r.selectSuggestion(null,e),!1})),r}return f(t,e),t.prototype.showMarkdownAndCanvas=function(e){return this.shouldShowMarkdown=e,this.shouldShowCanvas=e,this},t.prototype.showAttachments=function(e){return this.shouldShowNonImageAttachments=e,this.shouldShowImages=e,this},t.prototype.onChooseSuggestion=function(e,t){return g(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return e?[3,2]:(t=this.canvas.view.file.path,[4,this.app.fileManager.createNewMarkdownFileFromLinktext(this.inputEl.value,t)]);case 1:return n=i.sent(),this.handleChoose(n),[2];case 2:return"file"!==e.type&&"alias"!==e.type||this.handleChoose(e.file),[2]}}))}))},t.prototype.onClose=function(){this.handleClose&&this.handleClose()},t}(IZ),dX=function(e){function t(t,n,i){var r=e.call(this,t.app)||this;return r.emptyStateText=Qf.plugins.canvas.labelNoMedia(),r.allowCreateNewFile=!1,r.context="embed",r.canvas=t,r.handleClose=i,r.handleChoose=n,r.shouldShowUnresolved=!1,r.shouldShowMarkdown=!1,r.shouldShowCanvas=!0,r.shouldShowImages=!0,r.shouldShowNonImageAttachments=!0,r.shouldShowAllTypes=t.app.vault.getConfig("showUnsupportedFiles"),r.setPlaceholder(uX.promptStartSearch()),r.setInstructions([{command:"â†‘â†“",purpose:cX.instructionNavigate()},{command:"â†µ",purpose:cX.instructionOpen()},{command:"esc",purpose:cX.instructionDismiss()}]),r}return f(t,e),t.prototype.onChooseSuggestion=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(t){return e?("file"!==e.type&&"alias"!==e.type||this.handleChoose(e.file),[2]):[2]}))}))},t.prototype.onClose=function(){this.handleClose&&this.handleClose()},t}(IZ),pX=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.emptyStateText=uX.labelNoImages(),r.context="embed",r.handleClose=i,r.handleChoose=n,r.shouldShowUnresolved=!1,r.shouldShowMarkdown=!1,r.shouldShowCanvas=!1,r.shouldShowAllTypes=!1,r.shouldShowImages=!0,r.shouldShowNonImageAttachments=!1,r.setPlaceholder(uX.promptStartSearch()),r.setInstructions([{command:"â†‘â†“",purpose:cX.instructionNavigate()},{command:"â†µ",purpose:cX.instructionSelect()},{command:"esc",purpose:cX.instructionDismiss()}]),r}return f(t,e),t.prototype.onChooseSuggestion=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return e?("file"===e.type&&this.handleChoose(e.file),[2]):[2]}))}))},t.prototype.onClose=function(){this.handleClose&&this.handleClose()},t}(IZ);function fX(e,t,n){for(var i=[1/0,null],r=0,o=t;r<o.length;r++)for(var a=o[r],s=a.getBBox(),l=0,c=[["top",M$(s,"top")],["right",M$(s,"right")],["bottom",M$(s,"bottom")],["left",M$(s,"left")]];l<c.length;l++){var u=c[l],h=u[0],d=Hl(e,u[1]);if(d<=n)return{side:h,node:a};d<i[0]&&(i=[d,{side:h,node:a}])}return i[1]}function mX(e){var t=e.minX,n=e.minY,i=e.maxX,r=e.maxY;return[Ol(t,n),Ol(t,r),Ol(i,n),Ol(i,r),Ol((t+i)/2,(n+r)/2)]}function vX(e){var t=Array.combine(e.map(mX));t.sort((function(e,t){return e.x!==t.x?e.x-t.x:e.y-t.y}));for(var n=[],i=null,r=0,o=t;r<o.length;r++){var a=o[r];i&&i.x===a.x&&i.y===a.y||(i=a,n.push(a))}return n}function gX(e,t){e.sort((function(e,n){return t(e)-t(n)}))}function yX(e,t,n,i){if(0===e.length||0===t.length)return null;var r="x"===i?bX:wX;gX(e,r),gX(t,r);for(var o=n,a=[],s=[],l=[],c=1/0,u=0,h=e;u<h.length;u++){var d=h[u],p=r(d);if(p!==c){c=p,(s.length>0||l.length>0)&&(a.push({src:s,dest:l}),s=[],l=[]);for(var f=0,m=t.length-1;f<=m;){var v=f+m>>1,g=p-r(t[v]);if(g>0)f=v+1;else{if(!(g<0)){f=m=v;break}m=v-1}}if(f!==m)if(m<0)m=0;else if(f>=t.length-1)f=t.length-1;else{var y=r(t[f])-p,b=p-r(t[m]);y===b?y===o?m=f:f=m:f=m=y<b?f:m}var w=r(t[f]),k=w-p;if(k===o||Math.abs(k)<Math.abs(o)){for(k!==o&&(a=[],s=[],l=[],o=k);f>0&&r(t[f-1])===w;)f--;for(;m<t.length-1&&r(t[m+1])===w;)m++;s.push(d);for(var C=f;C<=m;C++)l.push(t[C])}}else s.length>0&&r(s.last())===p&&s.push(d)}return(s.length>0||l.length>0)&&a.push({src:s,dest:l}),0===a.length?null:{matches:a,delta:o}}function bX(e){return e.x}function wX(e){return e.y}var kX=/^(\d+)$/;function CX(e,t){t=(t||"").trim();for(var n=0,i=Array.from(e.classList);n<i.length;n++){var r=i[n];r.startsWith("mod-canvas-color")&&e.removeClass(r)}if(e.style.removeProperty("--canvas-color"),e.toggleClass("is-themed",!!t),t)if(kX.test(t))e.addClass("mod-canvas-color-"+t);else{var o=OI(t);o&&(e.addClass("mod-canvas-color-custom"),e.style.setProperty("--canvas-color","".concat(o.r,",").concat(o.g,",").concat(o.b)))}}var MX=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/i;function EX(e){var t=e.match(MX);return t?LI({r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3])}):e}var SX=function(){function e(e,t){var n=this;this.bbox=QZ(0,0,0,0),this.resizerEls=[],this.canvas=e,this.selectionEl=createDiv("canvas-selection"+(t?" ".concat(t):""));for(var i=function(e){var t=createDiv({cls:"canvas-node-resizer",attr:{"data-resize":e}});t.addEventListener("pointerdown",(function(i){i.targetNode===t&&"mouse"===i.pointerType&&n.onResizePointerdown(i,e)})),"bottom"!==e&&"right"!==e||t.addEventListener("dblclick",(function(t){Array.from(n.canvas.selection).forEach((function(n){return n instanceof u$&&n.onResizeDblclick(t,e)}))})),r.resizerEls.push(t)},r=this,o=0,a=["top","right","bottom","left"];o<a.length;o++){i(a[o])}for(var s=function(e){var t=createDiv({cls:"canvas-node-resizer",attr:{"data-resize":e}});t.addEventListener("pointerdown",(function(t){n.onResizePointerdown(t,e)})),l.resizerEls.push(t)},l=this,c=0,u=["topright","bottomright","bottomleft","topleft"];c<u.length;c++){s(u[c])}}return e.prototype.update=function(e){this.bbox=e;var t=this.selectionEl,n=this.resizerEls;t.parentNode||this.canvas.canvasEl.appendChild(t);for(var i=0,r=n;i<r.length;i++){var o=r[i];t.appendChild(o)}var a=iX(e,10);t.setCssStyles({transform:"translate(".concat(a.minX,"px, ").concat(a.minY,"px)"),width:"".concat(a.maxX-a.minX,"px"),height:"".concat(a.maxY-a.minY,"px")})},e.prototype.onResizePointerdown=function(e,t){var n=this;e.isPrimary&&0===e.button&&"mouse"===e.pointerType&&(e.preventDefault(),vk(e,(function(){for(var i=n,r=i.bbox,o=i.canvas,a=tX(r),s=a.x,l=a.y,c=a.width,u=a.height,h=o.options,d=h.snapToGrid,p=h.snapToObjects,f=Array.from(o.selection),m=[],v=[],g=[],y=0,b=f;y<b.length;y++){var w=b[y];w.nodeEl.addClass("is-dragging"),v.push(w.rect);var k=w.getBBox();g.push({width:(k.maxX-k.minX)/c,height:(k.maxY-k.minY)/u}),m.push({minX:(k.minX-r.minX)/c,minY:(k.minY-r.minY)/u,maxX:(k.maxX-r.maxX)/c,maxY:(k.maxY-r.maxY)/u})}return n.canvas.handleDragWithPan(e,{move:function(e){var i,o,a=n.canvas,h=a.config.minContainerDimension,v=h/Math.min.apply(Math,g.map((function(e){return e.width}))),y=h/Math.min.apply(Math,g.map((function(e){return e.height}))),b=a.posFromEvt(e);a.clearSnapPoints();var w=0,k=0,C=lX(t,b,{x:s,y:l,width:c,height:u}),M=C.source,E=C.resizeX,S=C.resizeY;if(a.canSnap(e)){if(p){var x=vX([eX(M)]),T=vX(a.getViewportNodes(!0).map(eX)),D=a.snapDistance;E&&(i=yX(x,T,D,"x"))&&(w=i.delta),S&&(o=yX(x,T,D,"y"))&&(k=o.delta)}if(d){var A=a.gridSpacing;E&&!i&&(w=Math.round(b.x/A)*A-b.x),S&&!o&&(k=Math.round(b.y/A)*A-b.y)}}var L=b.x+w,P=b.y+k;t.contains("top")&&(r.minY=Math.min(r.maxY-y,P),r.minY!==P&&(o=null,k=r.minY-b.y)),t.contains("left")&&(r.minX=Math.min(r.maxX-v,L),r.minX!==L&&(i=null,w=r.minX-b.x)),t.contains("bottom")&&(r.maxY=Math.max(r.minY+y,P),r.maxY!==P&&(o=null,k=r.maxY-b.y)),t.contains("right")&&(r.maxX=Math.max(r.minX+v,L),r.maxX!==L&&(i=null,w=r.maxX-b.x));var I={x:r.minX,y:r.minY,width:r.maxX-r.minX,height:r.maxY-r.minY},F=f.some((function(e){return e.aspectRatio}));e.shiftKey&&(F=!F);var O=0;if(F&&0!==u&&(O=c/u),0!==O){var B=I.width,N=I.height;if(E&&S){var R=Math.max(B,N*O);N=Math.max(N,B/O),(B=R)!==I.width?i=null:N!==I.height&&(o=null)}else E?N=B/O:S&&(B=N*O);if(t.includes("left")){var H=s+c-B;w+=H-I.x,I.x=H}if(t.includes("top")){var V=l+u-N;k+=V-I.y,I.y=V}t.includes("right")&&(w+=B-I.width),t.includes("bottom")&&(k+=N-I.height),I.width=B,I.height=N}(i||o)&&a.renderSnapPoints(i,o,w,k);for(var z=eX(I),q=0;q<f.length;q++){var U=f[q],_=m[q],W={minX:z.minX+_.minX*I.width,minY:z.minY+_.minY*I.height,maxX:z.maxX+_.maxX*I.width,maxY:z.maxY+_.maxY*I.height};U.moveAndResize(tX(W))}},end:function(){o.requestSave()},cancel:function(){for(var e=0;e<f.length;e++){f[e].moveAndResize(v[e])}o.requestSave()},cleanup:function(){for(var e=0,t=f;e<t.length;e++){t[e].nodeEl.removeClass("is-dragging")}}})})))},e.prototype.hide=function(){this.selectionEl.remove()},e}(),xX=Qf.interface,TX=Qf.plugins.canvas,DX=function(){function e(e){var t=this;this.canvas=e;var n=this.containerEl=createDiv("canvas-menu-container");this.menuEl=n.createDiv("canvas-menu"),this.selection=new SX(e,"mod-group-selection");var i=this.selection.selectionEl;i.addEventListener("contextmenu",(function(e){t.canvas.onSelectionContextMenu(e),e.preventDefault()})),i.addEventListener("pointerdown",(function(e){e.isPrimary&&0===e.button&&!e.defaultPrevented&&vk(e,(function(){return t.canvas.handleSelectionDrag(e,i)}))}))}return e.prototype.render=function(e){var t,n=this,i=this,r=i.canvas,o=i.selection,a=i.containerEl,s=i.menuEl,l=r.app,c=Array.from(r.selection);if(0===c.length)return a.detach(),s.empty(),void o.hide();c.sort(r$);var u=1===c.length,h=c.last(),d=nX(c.map((function(e){return e.getBBox()}))),p=d.minX,f=d.maxX,m=d.minY;if(u?o.hide():o.update(d),r.isDragging)return a.detach(),void s.empty();if(r.wrapperEl.append(a),e){var v,g,y;s.empty();var b=function(e,t,n,i,o){if(!r.readonly||o){var a=e.createEl("button","clickable-icon");Rx(a,t,{placement:"top"}),mx(a,n),a.addEventListener("click",i)}};b(s,TX.actionRemove(),"lucide-trash-2",(function(){r.deleteSelection()}));var w=h.color;b(s,TX.actionSetColor(),"lucide-palette",(function(e){var t=e.currentTarget;if(!g||(v.removeClass("is-active"),g.remove(),g=null,"color"!==y)){v=t,t.addClass("is-active"),g=s.createDiv("canvas-submenu"),y="color";var n=function(e,t){void 0===t&&(t=!0);for(var n=0,i=c;n<i.length;n++){i[n].setColor(e,!t)}w=e,t&&(g.remove(),g=null,r.requestSave())},i=!1,o=function(e){var t=g.createDiv("canvas-color-picker-item");w===e&&(t.addClass("is-active"),i=!0),e&&t.addClass("mod-canvas-color-"+e),t.addEventListener("click",(function(){return n(e)}))};o("");for(var a=1;a<=6;a++)o(String(a));var l=g.createDiv("canvas-color-picker-item canvas-color-picker-custom"),u=l.createEl("input",{type:"color"});if(l.style.setProperty("--canvas-color","0,0,0"),!i){var h=OI(w);h&&(u.value=LI(h),l.style.setProperty("--canvas-color","".concat(h.r,",").concat(h.g,",").concat(h.b)),l.addClass("is-active"))}u.addEventListener("change",(function(){return n(u.value)})),u.addEventListener("input",(function(){return n(u.value,!1)}))}}));var k=sA(oA(["Shift"],"2"));if(b(s,TX.actionZoomToSelection()+"\n(".concat(k,")"),"zoom-to-selection",(function(){r.zoomToSelection()}),!0),!u&&h instanceof u$&&b(s,TX.actionCreateGroup(),"create-group",(function(){var e=tX(iX(nX(Array.from(r.selection.values()).map((function(e){return e.getBBox()}))),20));r.createGroupNode({pos:e,size:e})})),!u&&h instanceof u$||u&&h instanceof w$){var C=function(){if(u&&h instanceof w$){var e=h.getBBox();return[n.canvas.getContainingNodes(e).filter((function(e){return e!==h})),iX(e,-20)]}var t=c.filter((function(e){return e instanceof u$}));return[t,nX(t.map((function(e){return e.getBBox()})))]};b(s,TX.actionAlign(),"lucide-align-start-vertical",(function(e){var t=e.currentTarget;if(!t.hasClass("has-active-menu")){var n=function(e){for(var t=C(),n=t[0],i=t[1],o=0,a=n;o<a.length;o++){var s=a[o];"left"===e?s.moveTo(Ol(i.minX,s.y)):"right"===e?s.moveTo(Ol(i.maxX-s.width,s.y)):"top"===e?s.moveTo(Ol(s.x,i.minY)):"bottom"===e?s.moveTo(Ol(s.x,i.maxY-s.height)):"center"===e?s.moveTo(Ol((i.minX+i.maxX-s.width)/2,s.y)):"middle"===e&&s.moveTo(Ol(s.x,(i.minY+i.maxY-s.height)/2))}r.requestSave()},i=function(e){var t=C(),n=t[0],i=t[1];if(!(n.length<=1)){if("horizontal"===e){for(var o=0,a=0,s=n;a<s.length;a++){o+=s[a].width}n.sort((function(e,t){return e.x!==t.x?e.x-t.x:e.y-t.y}));for(var l=(i.maxX-i.minX-o)/(n.length-1),c=1;c<n.length-1;c++){var u=n[c-1];(f=n[c]).moveTo(Ol(u.x+u.width+l,f.y))}}else if("vertical"===e){for(var h=0,d=0,p=n;d<p.length;d++){h+=p[d].height}n.sort((function(e,t){return e.y!==t.y?e.y-t.y:e.x-t.x}));for(l=(i.maxY-i.minY-h)/(n.length-1),c=1;c<n.length-1;c++){var f;u=n[c-1];(f=n[c]).moveTo(Ol(f.x,u.y+u.height+l))}}r.requestSave()}},o=function(e){var t=C(),n=t[0],i=t[1];if(!(n.length<=1)){if("horizontal"===e)for(var o=0,a=n;o<a.length;o++){(c=a[o]).moveAndResize(Nl(i.minX,c.y,i.maxX-i.minX,c.height))}else if("vertical"===e)for(var s=0,l=n;s<l.length;s++){var c;(c=l[s]).moveAndResize(Nl(c.x,i.minY,c.width,i.maxY-i.minY))}r.requestSave()}},a=function(e){var t=C(),n=t[0],i=t[1];if(!(n.length<=1)){n.sort((function(e,t){return e.y-t.y}));for(var o=[],a=-1/0,s=0,l=n;s<l.length;s++){if((v=l[s]).y<a){o.last().push(v);var c=v.y+v.height;c<a&&(a=c)}else o.push([v]),a=v.y+v.height}for(var u=0,h=o;u<h.length;u++){(w=h[u]).sort((function(e,t){return e.x-t.x}))}var d=[].concat.apply([],o),p=d[0],f=r.gridSpacing;if("horizontal"===e)for(var m=1;m<d.length;m++){(v=d[m]).moveTo(Ol(p.x+p.width+f,p.y)),p=v}else if("vertical"===e)for(m=1;m<d.length;m++){var v;(v=d[m]).moveTo(Ol(p.x,p.y+p.height+f)),p=v}else if("grid"===e)for(var g=i.minY,y=0,b=o;y<b.length;y++){var w;(w=b[y])[0].moveTo(Ol(i.minX,g));var k=w[0].height;for(m=1;m<w.length;m++){var M=w[m-1],E=w[m];E.moveTo(Ol(M.x+M.width+f,g)),k=Math.max(k,E.height)}g+=k+f}r.requestSave()}},s=t.getBoundingClientRect();(new PA).setUseNativeMenu(!1).addItem((function(e){return e.setSection("align-h").setTitle(TX.actionAlignLeft()).setIcon("lucide-align-start-vertical").onClick((function(){return n("left")}))})).addItem((function(e){return e.setSection("align-h").setTitle(TX.actionAlignCenter()).setIcon("lucide-align-center-vertical").onClick((function(){return n("center")}))})).addItem((function(e){return e.setSection("align-h").setTitle(TX.actionAlignRight()).setIcon("lucide-align-end-vertical").onClick((function(){return n("right")}))})).addItem((function(e){return e.setSection("align-v").setTitle(TX.actionAlignTop()).setIcon("lucide-align-start-horizontal").onClick((function(){return n("top")}))})).addItem((function(e){return e.setSection("align-v").setTitle(TX.actionAlignMiddle()).setIcon("lucide-align-center-horizontal").onClick((function(){return n("middle")}))})).addItem((function(e){return e.setSection("align-v").setTitle(TX.actionAlignBottom()).setIcon("lucide-align-end-horizontal").onClick((function(){return n("bottom")}))})).addItem((function(e){return e.setSection("arrange").setTitle(TX.actionArrangeHorizontally()).setIcon("stack-horizontal").onClick((function(){return a("horizontal")}))})).addItem((function(e){return e.setSection("arrange").setTitle(TX.actionArrangeVertically()).setIcon("stack-vertical").onClick((function(){return a("vertical")}))})).addItem((function(e){return e.setSection("arrange").setTitle(TX.actionArrangeGrid()).setIcon("lucide-layout-grid").onClick((function(){return a("grid")}))})).addItem((function(e){return e.setSection("distribute").setTitle(TX.actionDistributeHorizontalSpacing()).setIcon("distribute-space-horizontal").onClick((function(){return i("horizontal")}))})).addItem((function(e){return e.setSection("distribute").setTitle(TX.actionDistributeVerticalSpacing()).setIcon("distribute-space-vertical").onClick((function(){return i("vertical")}))})).addItem((function(e){return e.setSection("justify").setTitle(TX.actionJustifyHorizontally()).setIcon("stretch-horizontal").onClick((function(){return o("horizontal")}))})).addItem((function(e){return e.setSection("justify").setTitle(TX.actionJustifyVertically()).setIcon("stretch-vertical").onClick((function(){return o("vertical")}))})).setParentElement(t).showAtPosition({x:s.x,y:s.bottom,width:s.width,overlap:!0})}}))}if(h instanceof L$&&c.every((function(e){return e instanceof L$}))){var M=c,E="lucide-arrow-right";"arrow"===h.from.end?E="lucide-move-horizontal":"none"===h.to.end&&(E="line-horizontal"),b(s,TX.labelLineDirection(),E,(function(e){var t=e.currentTarget;if(!t.hasClass("has-active-menu")){var n=function(e,t){for(var n=0,i=M;n<i.length;n++){var o=i[n];o.from.end=e,o.to.end=t,r.markDirty(o)}r.requestSave()},i=t.getBoundingClientRect();(new PA).setUseNativeMenu(!1).addItem((function(e){return e.setTitle(TX.labelNondirectional()).setIcon("line-horizontal").setChecked("line-horizontal"===E).onClick((function(){return n("none","none")}))})).addItem((function(e){return e.setTitle(TX.labelUnidirectional()).setIcon("lucide-arrow-right").setChecked("lucide-arrow-right"===E).onClick((function(){return n("none","arrow")}))})).addItem((function(e){return e.setTitle(TX.labelBidirectional()).setIcon("lucide-move-horizontal").setChecked("lucide-move-horizontal"===E).onClick((function(){return n("arrow","arrow")}))})).setParentElement(t).showAtPosition({x:i.x,y:i.bottom,width:i.width,overlap:!0})}}))}if(u&&h instanceof L$&&h.labelElement){var S=h;b(s,TX.actionRemoveLabel(),"lucide-x-square",(function(){S.setLabel(""),S.labelElement.destroy(),r.requestSave(),n.render(!0)}))}if(u)if(h instanceof L$){var x=h;b(s,TX.actionEditLabel(),"lucide-edit",(function(){x.editLabel()}))}else if(h instanceof u$&&h.isEditable()){var T=h,D=T instanceof w$,A=D?TX.actionEditLabel():xX.menu.edit();if(b(s,A,"lucide-edit",(function(){T.startEditing()})),D){var L=T,P=L.bgFile?TX.actionEditBackground():TX.actionSetBackground();b(s,P,"lucide-image",(function(e){var t=e.currentTarget;if(!t.hasClass("has-active-menu")){var i=function(){new pX(l,(function(e){L.setBackgroundFile(e),r.requestSave(),n.render(!0)})).open()};if(L.bgPath){var o=function(e){L.setBackgroundStyle(e),r.requestSave()},a=t.getBoundingClientRect();(new PA).setUseNativeMenu(!1).addItem((function(e){return e.setSection("image").setTitle(TX.actionReplaceBackground()).setIcon("lucide-repeat").onClick(i)})).addItem((function(e){return e.setSection("image").setTitle(TX.actionRemoveBackground()).setIcon("lucide-image-off").onClick((function(){L.setBackgroundFile(null),r.requestSave(),n.render(!0)}))})).addItem((function(e){return e.setSection("style").setTitle(TX.optionBackgroundCover()).setIcon("lucide-scaling").setChecked(!L.bgStyle||"cover"===L.bgStyle).onClick((function(){return o("cover")}))})).addItem((function(e){return e.setSection("style").setTitle(TX.optionBackgroundRatio()).setIcon("aspect-ratio").setChecked("ratio"===L.bgStyle).onClick((function(){return o("ratio")}))})).addItem((function(e){return e.setSection("style").setTitle(TX.optionBackgroundRepeat()).setIcon("lucide-layout-grid").setChecked("repeat"===L.bgStyle).onClick((function(){return o("repeat")}))})).setParentElement(t).showAtPosition({x:a.x,y:a.bottom,width:a.width,overlap:!0})}else i()}}))}}}var I=r.scale,F=r.canvasRect,O=(p+f)/2,B=m-10/I,N=c.some((function(e){return e instanceof w$}));if(N?B=m-35/Math.sqrt(I):h instanceof m$&&(B=m-30/Math.sqrt(I)),h instanceof L$&&u){var R=h.getCenter(),H=(null===(t=h.labelElement)||void 0===t?void 0:t.wrapperEl.clientHeight)||20;B=Math.min(B,R.y-20/I-H/2)}var V=s.getBoundingClientRect(),z=V.width,q=V.height;O=(O-r.x)*I-z/2+F.width/2,B=(B-r.y)*I-q+F.height/2,O=Math.clamp(O,10,F.width-z-10),B=Math.clamp(B,10,F.height-q-10),a.setCssStyles({left:"".concat(O,"px"),top:"".concat(B,"px")})},e.prototype.updateZIndex=function(e){this.containerEl.style.zIndex=String(e)},e}();function AX(e,t,n,i,r){LX(e,t,n||0,i||e.length-1,r||IX)}function LX(e,t,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);LX(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(i,Math.floor(t+(o-a)*l/o+c)),r)}var u=e[t],h=n,d=i;for(PX(e,n,t),r(e[i],u)>0&&PX(e,n,i);h<d;){for(PX(e,h,d),h++,d--;r(e[h],u)<0;)h++;for(;r(e[d],u)>0;)d--}0===r(e[n],u)?PX(e,n,d):PX(e,++d,i),d<=t&&(n=d+1),t<=d&&(i=d-1)}}function PX(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function IX(e,t){return e<t?-1:e>t?1:0}var FX=function(){function e(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}return e.prototype.all=function(){return this._all(this.data,[])},e.prototype.search=function(e){var t=this.data,n=[];if(!WX(e,t))return n;for(var i=this.toBBox,r=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?i(a):a;WX(e,s)&&(t.leaf?n.push(a):_X(e,s)?this._all(a,n):r.push(a))}t=r.pop()}return n},e.prototype.collides=function(e){var t=this.data;if(!WX(e,t))return!1;for(var n=[];t;){for(var i=0;i<t.children.length;i++){var r=t.children[i],o=t.leaf?this.toBBox(r):r;if(WX(e,o)){if(t.leaf||_X(e,o))return!0;n.push(r)}}t=n.pop()}return!1},e.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},e.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},e.prototype.clear=function(){return this.data=jX([]),this},e.prototype.remove=function(e,t){if(!e)return this;for(var n,i,r,o=this.data,a=this.toBBox(e),s=[],l=[];o||s.length;){if(o||(o=s.pop(),i=s[s.length-1],n=l.pop(),r=!0),o.leaf){var c=BX(e,o.children,t);if(-1!==c)return o.children.splice(c,1),s.push(o),this._condense(s),this}r||o.leaf||!_X(o,a)?i?(n++,o=i.children[n],r=!1):o=null:(s.push(o),l.push(n),n=0,i=o,o=o.children[0])}return this},e.prototype.toBBox=function(e){return e},e.prototype.compareMinX=function(e,t){return e.minX-t.minX},e.prototype.compareMinY=function(e,t){return e.minY-t.minY},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(e){return this.data=e,this},e.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},e.prototype._build=function(e,t,n,i){var r,o=n-t+1,a=this._maxEntries;if(o<=a)return NX(r=jX(e.slice(t,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=jX([])).leaf=!1,r.height=i;var s=Math.ceil(o/a),l=s*Math.ceil(Math.sqrt(a));GX(e,t,n,l,this.compareMinX);for(var c=t;c<=n;c+=l){var u=Math.min(c+l-1,n);GX(e,c,u,s,this.compareMinY);for(var h=c;h<=u;h+=s){var d=Math.min(h+s-1,u);r.children.push(this._build(e,h,d,i-1))}}return NX(r,this.toBBox),r},e.prototype._chooseSubtree=function(e,t,n,i){for(;i.push(t),!t.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var l=t.children[s],c=qX(l),u=(h=e,d=l,(Math.max(d.maxX,h.maxX)-Math.min(d.minX,h.minX))*(Math.max(d.maxY,h.maxY)-Math.min(d.minY,h.minY))-c);u<o?(o=u,r=c<r?c:r,a=l):u===o&&c<r&&(r=c,a=l)}t=a||t.children[0]}var h,d;return t},e.prototype._insert=function(e,t,n){var i=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(i,this.data,t,r);for(o.children.push(e),HX(o,i);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(i,r,t)},e.prototype._split=function(e,t){var n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=jX(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,NX(n,this.toBBox),NX(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},e.prototype._splitRoot=function(e,t){this.data=jX([e,t]),this.data.height=e.height+1,this.data.leaf=!1,NX(this.data,this.toBBox)},e.prototype._chooseSplitIndex=function(e,t,n){for(var i,r,o,a,s,l,c,u=1/0,h=1/0,d=t;d<=n-t;d++){var p=RX(e,0,d,this.toBBox),f=RX(e,d,n,this.toBBox),m=(r=p,o=f,a=void 0,s=void 0,l=void 0,c=void 0,a=Math.max(r.minX,o.minX),s=Math.max(r.minY,o.minY),l=Math.min(r.maxX,o.maxX),c=Math.min(r.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,c-s)),v=qX(p)+qX(f);m<u?(u=m,i=d,h=v<h?v:h):m===u&&v<h&&(h=v,i=d)}return i||n-t},e.prototype._chooseSplitAxis=function(e,t,n){var i=e.leaf?this.compareMinX:VX,r=e.leaf?this.compareMinY:zX;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)},e.prototype._allDistMargin=function(e,t,n,i){e.children.sort(i);for(var r=this.toBBox,o=RX(e,0,t,r),a=RX(e,n-t,n,r),s=UX(o)+UX(a),l=t;l<n-t;l++){var c=e.children[l];HX(o,e.leaf?r(c):c),s+=UX(o)}for(l=n-t-1;l>=t;l--){c=e.children[l];HX(a,e.leaf?r(c):c),s+=UX(a)}return s},e.prototype._adjustParentBBoxes=function(e,t,n){for(var i=n;i>=0;i--)HX(t[i],e)},e.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():NX(e[t],this.toBBox)},e}();const OX=FX;function BX(e,t,n){if(!n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function NX(e,t){RX(e,0,e.children.length,t,e)}function RX(e,t,n,i,r){r||(r=jX(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=t;o<n;o++){var a=e.children[o];HX(r,e.leaf?i(a):a)}return r}function HX(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function VX(e,t){return e.minX-t.minX}function zX(e,t){return e.minY-t.minY}function qX(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function UX(e){return e.maxX-e.minX+(e.maxY-e.minY)}function _X(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function WX(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function jX(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function GX(e,t,n,i,r){for(var o=[t,n];o.length;)if(!((n=o.pop())-(t=o.pop())<=i)){var a=t+Math.ceil((n-t)/i/2)*i;AX(e,a,t,n,r),o.push(t,a,a,n)}}var KX=function(){function e(e){this.data=[],this.current=0,this.max=e}return e.prototype.canUndo=function(){return this.current>0},e.prototype.undo=function(){return this.canUndo()?(this.current--,this.data[this.current]):null},e.prototype.canRedo=function(){return this.current<this.data.length-1},e.prototype.redo=function(){return this.canRedo()?(this.current++,this.data[this.current]):null},e.prototype.push=function(e){var t=this.data;t.length-1>this.current&&(t.length=this.current+1),t.push(e),t.length>=this.max&&t.shift(),this.current=t.length-1},e.prototype.replace=function(e){var t=this.data;0===t.length?(t.push(e),this.current=0):t[this.current]=e},e.prototype.clear=function(){this.data.length=0,this.current=0},e}(),YX=Qf.plugins.canvas,ZX=Qf.interface,XX="0.7",$X=.01,QX=.93,JX=-1.7,e$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.insert=function(t){return t.bbox=t.getBBox(),e.prototype.insert.call(this,t),this},t.prototype.remove=function(t){return t.bbox?(e.prototype.remove.call(this,t),t.bbox=null,this):this},t.prototype.toBBox=function(e){return e.bbox},t}(OX),t$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.compareMinX=function(e,t){return e.x-t.x},t.prototype.compareMinY=function(e,t){return e.y-t.y},t}(e$),n$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.compareMinX=function(e,t){var n=e.getBBox(),i=t.getBBox();return n.minX-i.minX},t.prototype.compareMinY=function(e,t){var n=e.getBBox(),i=t.getBBox();return n.minY-i.minY},t}(e$),i$=function(){function e(e){var t=this;this.config={zoomMultiplier:.5,objectSnapDistance:15,minContainerDimension:50,defaultTextNodeDimensions:{width:250,height:60},defaultFileNodeDimensions:{width:400,height:400}},this.requestUpdateFileOpen=mc(this.updateFileOpen.bind(this),200),this.zIndexCounter=1,this.isHoldingSpace=!1,this.readonly=!1,this.history=new KX(100),this.data={},this.requestPushHistory=mc(this.pushHistory.bind(this),250,!0),this.x=0,this.y=0,this.zoom=0,this.scale=1,this.tx=0,this.ty=0,this.tZoom=0,this.finishViewportAnimation=!1,this.zoomToFitQueued=!1,this.screenshotting=!1,this.nodes=new Map,this.nodeIndex=new t$,this.edges=new Map,this.edgeIndex=new n$,this.edgeFrom=new sc,this.edgeTo=new sc,this.staleSelection=null,this.selection=new Set,this.selectionChanged=!1,this.keys={},this.isDragging=!1,this.viewportChanged=!0,this.moved=new Set,this.dirty=new Set,this.frame=0,this.wasAnimating=!1,this.pauseAnimation=0,this.lastNodesInViewport=new Set,this.lastEdgesInViewport=new Set,this.onGlobalKeydown=function(e){if(" "===e.key&&!t.isHoldingSpace){if(1===t.selection.size){var n=Array.from(t.selection)[0];if(n instanceof u$&&n.isEditing)return}t.wrapperEl.appendChild(t.moverEl),t.moverEl.style.zIndex=String(t.zIndexCounter+4),t.isHoldingSpace=!0}},this.onGlobalKeyup=function(e){" "===e.key&&(t.moverEl.detach(),t.isHoldingSpace=!1)},this.pointer={x:0,y:0},this.pointerFrame=0,this.app=e.app,this.view=e,this.menu=new DX(this);var n=this.wrapperEl=e.contentEl.createDiv({cls:"canvas-wrapper",attr:{tabIndex:-1,"data-ignore-swipe":"true"}});n.onNodeInserted((function(){return t.onResize()})),n.addEventListener("keydown",this.onKeydown.bind(this)),n.addEventListener("pointerdown",this.onPriorityPointerdown.bind(this),{capture:!0}),n.addEventListener("pointerdown",this.onPointerdown.bind(this)),n.addEventListener("dblclick",this.onDoubleClick.bind(this)),n.addEventListener("contextmenu",this.onContextMenu.bind(this)),n.addEventListener("wheel",this.onWheel.bind(this)),Zl.isMobile||n.addEventListener("pointermove",this.onPointermove.bind(this));var i=n.createSvg("svg","canvas-background"),r=oc(16);this.backgroundPatternEl=i.createSvg("pattern",{attr:{id:r,patternUnits:"userSpaceOnUse"}},(function(e){e.createSvg("circle",{attr:{cx:XX,cy:XX,r:XX}})})),i.createSvg("rect",{attr:{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(r,")")}}),(this.moverEl=createDiv("canvas-mover")).addEventListener("pointerdown",this.handleMoverPointerdown.bind(this)),this.cardMenuEl=n.createDiv("canvas-card-menu",(function(e){e.createDiv({cls:"canvas-card-menu-button mod-draggable"},(function(e){Rx(e,YX.actionDragToAddCard(),{placement:"top"}),mx(e,"lucide-sticky-note"),e.addEventListener("click",(function(){t.createTextNode({pos:t.posCenter(),position:"center"})})),e.addEventListener("pointerdown",(function(e){var n=t.config.defaultTextNodeDimensions;t.dragTempNode(e,n,(function(e){t.deselectAll(),t.createTextNode({pos:e,size:n})}))}))})),e.createDiv({cls:"canvas-card-menu-button mod-draggable"},(function(e){Rx(e,YX.actionDragToAddNote(),{placement:"top"}),mx(e,"lucide-file-text"),e.addEventListener("click",(function(){new hX(t,(function(e){t.createFileNode({pos:t.posCenter(),file:e})})).showAttachments(!1).open()})),e.addEventListener("pointerdown",(function(e){var n=t.config.defaultFileNodeDimensions;t.dragTempNode(e,n,(function(e){new hX(t,(function(i){t.createFileNode({pos:e,size:n,file:i})})).showAttachments(!1).open()}))}))})),e.createDiv({cls:"canvas-card-menu-button mod-draggable"},(function(e){Rx(e,YX.actionDragToAddMedia(),{placement:"top"}),mx(e,"lucide-file-image"),e.addEventListener("click",(function(){new dX(t,(function(e){t.createFileNode({pos:t.posCenter(),position:"center",file:e})})).open()})),e.addEventListener("pointerdown",(function(e){var n=t.config.defaultFileNodeDimensions;t.dragTempNode(e,n,(function(e){new hX(t,(function(i){t.createFileNode({pos:e,size:n,file:i})})).showMarkdownAndCanvas(!1).open()}))}))}))})),this.canvasControlsEl=n.createDiv("canvas-controls",(function(e){e.createDiv("canvas-control-group",(function(e){e.createDiv("canvas-control-item",(function(e){t.quickSettingsButton=e,t.setReadonly(t.readonly),e.addEventListener("click",(function(n){if(t.readonly)t.setReadonly(!t.readonly),t.view.saveLocalData();else{if(e.hasClass("has-active-menu"))return;var i=new PA;t.showQuickSettingsMenu(i),i.setParentElement(e).showAtMouseEvent(n)}}))}))})),e.createDiv("canvas-control-group",(function(e){e.createDiv("canvas-control-item",(function(e){mx(e,"lucide-plus"),Rx(e,Qf.commands.zoomIn(),{placement:"left"}),e.addEventListener("click",(function(){t.zoomBy(t.config.zoomMultiplier)}))})),e.createDiv("canvas-control-item",(function(e){mx(e,"lucide-rotate-cw"),Rx(e,Qf.commands.resetZoom(),{placement:"left"}),e.addEventListener("click",(function(){t.zoomBy(-t.zoom)}))})),e.createDiv("canvas-control-item",(function(e){mx(e,"lucide-maximize");var n=sA(oA(["Shift"],"1"));Rx(e,YX.actionZoomToFit()+"\n(".concat(n,")"),{placement:"left"}),e.addEventListener("click",(function(){t.zoomToFit()}))})),e.createDiv("canvas-control-item",(function(e){mx(e,"lucide-minus"),Rx(e,Qf.commands.zoomOut(),{placement:"left"}),e.addEventListener("click",(function(){t.zoomBy(-t.config.zoomMultiplier)}))}))})),e.createDiv("canvas-control-group",(function(e){e.createDiv("canvas-control-item",(function(e){t.undoBtnEl=e,mx(e,"lucide-undo-2"),Rx(e,Qf.setting.mobileToolbar.optionUndo(),{placement:"left"}),e.addEventListener("click",(function(){t.undo()}))})),e.createDiv("canvas-control-item",(function(e){t.redoBtnEl=e,mx(e,"lucide-redo-2"),Rx(e,Qf.setting.mobileToolbar.optionRedo(),{placement:"left"}),e.addEventListener("click",(function(){t.redo()}))}))})),Zl.isDesktop&&e.createDiv("canvas-control-group",(function(e){e.createDiv("canvas-control-item",(function(e){mx(e,"lucide-help-circle"),Rx(e,YX.labelCanvasHelp(),{placement:"left"}),e.addEventListener("click",(function(){new XZ(t).open()}))}))}))}));var o=this.canvasEl=n.createDiv("canvas");this.edgeContainerEl=o.createSvg("svg","canvas-edges"),this.edgeEndContainerEl=o.createSvg("svg","canvas-edges"),this.app.dragManager.handleDrop(n,(function(e,n,i){if(n){if(!i)switch(n.type){case"file":case"link":(u=n.file)instanceof ww&&t.createFileNode({pos:t.posFromEvt(e),file:u}),t.wrapperEl.focus();break;case"files":var r=n.files;if(r.length){for(var o=new Set,a=0,s=r;a<s.length;a++){(u=s[a])instanceof kw?Cw.recurseChildren(u,(function(e){e instanceof ww&&o.add(e)})):u instanceof ww&&o.add(u)}var l=Array.from(o);l.sort((function(e,t){return e.basename.localeCompare(t.basename)}));var c=t.createFileNodes(l,t.posFromEvt(e));t.deselectAll(),c.forEach((function(e){return t.select(e)})),t.requestSave()}t.wrapperEl.focus();break;case"folder":var u;if((u=n.file)instanceof kw){var h=[];Cw.recurseChildren(u,(function(e){e instanceof ww&&h.push(e)})),h.sort((function(e,t){return e.basename.localeCompare(t.basename)})),t.createFileNodes(h,t.posFromEvt(e)),t.requestSave(),t.wrapperEl.focus();break}}return{dropEffect:"copy"}}e.preventDefault();var d=e.dataTransfer;if(Ik(e.dataTransfer))return i||t.app.importAttachments(Fk(d,"drop",!0),null).then((function(n){t.createFileNodes(n,t.posFromEvt(e)),t.requestSave()})),{dropEffect:"copy"};var p=e.dataTransfer.getData("text/plain");if(qc(p))return i||t.createLinkNode({pos:t.posFromEvt(e),position:"center",url:p}),{dropEffect:"link"};if(p){if(!i){var f=t.posFromEvt(e);t.createTextNode({pos:f,position:"center",text:p})}return{dropEffect:"copy"}}}),!0),this.canvasRect=$Z(this.wrapperEl),this.nodeInteractionLayer=new c$(this)}return Object.defineProperty(e.prototype,"options",{get:function(){return this.view.plugin.options},enumerable:!1,configurable:!0}),e.prototype.createPlaceholder=function(){var e;this.canvasPlaceholderEl||(e=Zl.isMobile?createFragment((function(e){e.appendText(YX.labelDragPan()),e.createEl("br"),e.appendText(YX.labelPinchZoom()),e.createEl("br"),e.appendText(YX.labelLongpress())})):createFragment((function(e){e.appendText(YX.labelDragFromBelow()),e.createEl("br"),e.appendText(YX.labelSpaceDragPan()),e.createEl("br"),e.appendText("".concat(Sk.Mod," + ").concat(YX.labelScrollToZoom()))})),this.canvasPlaceholderEl=this.canvasEl.createDiv({cls:"canvas-placeholder-message",text:e}))},e.prototype.getData=function(){var e=[],t=[],n=Array.from(this.nodes.values());n.sort(r$);for(var i=0,r=n;i<r.length;i++){var o=r[i];e.push(o.getData())}for(var a=0,s=Array.from(this.edges.values());a<s.length;a++){var l=s[a];t.push(l.getData())}return m(m({},this.data),{nodes:e,edges:t})},e.prototype.getSelectionData=function(e){void 0===e&&(e=this.selection);var t=[],n=[],i=Array.from(e);i.sort(r$);for(var r=new Set,o=0,a=i;o<a.length;o++){var s=a[o];if(s instanceof u$){t.push(s.getData());for(var l=0,c=this.getEdgesForNode(s);l<c.length;l++){var u=c[l];r.add(u)}}}for(var h=0,d=Array.from(r);h<d.length;h++){u=d[h];e.has(u.from.node)&&e.has(u.to.node)&&n.push(u.getData())}return{nodes:t,edges:n,center:oX(nX(i.map((function(e){return e.getBBox()}))))}},e.prototype.updateFileOpen=function(e){var t=this.app,n=this.view,i=n.leaf;i===t.workspace.activeLeaf&&i.view===n&&(null===e&&(e=this.view.file),this.app.workspace.trigger("file-open",e))},e.prototype.setData=function(e){e&&(0!==Object.keys(e).length?(this.importData(e,!0),this.data=e,this.pushHistory(e)):this.createPlaceholder())},e.prototype.importData=function(e,t){var n=this,i=e.nodes,r=e.edges;if(i&&Array.isArray(i)){for(var o=this.nodes,a=new Set,s=0,l=0,c=i;l<c.length;l++){var u=c[l],h=u.id,d=void 0;if(o.has(h))d=o.get(h);else{if("file"===u.type)d=new m$(this,h);else if("text"===u.type)d=new v$(this,h);else if("link"===u.type)d=new y$(this,h);else{if("group"!==u.type)continue;d=new w$(this,h)}this.addNode(d),this.markMoved(d)}d.setData(u),a.add(d),d.zIndex<s&&d.updateZIndex(),s=d.zIndex}if(t&&o.forEach((function(e){a.has(e)||n.removeNode(e)})),r&&Array.isArray(r)){for(var p=this.edges,f=new Set,m=0,v=r;m<v.length;m++){var g=v[m],y=(h=g.id,g.fromNode),b=g.fromSide,w=g.fromEnd,k=g.toNode,C=g.toSide,M=g.toEnd;if(o.has(y)&&o.has(k)){var E=void 0;if(p.has(h))E=p.get(h);else{var S=o.get(y),x=o.get(k);b||(g.fromSide=b=C$(S,x)),C||(g.toSide=C=C$(x,S)),E=new L$(this,h,{node:S,side:b,end:w||D$},{node:x,side:C,end:M||A$}),this.addEdge(E),this.markMoved(E)}f.add(E),E.setData(g)}else p.has(h)&&this.removeEdge(p.get(h))}return t&&p.forEach((function(e){f.has(e)||n.removeEdge(e)})),a}}},e.prototype.load=function(){window.addEventListener("keydown",this.onGlobalKeydown),window.addEventListener("keyup",this.onGlobalKeyup)},e.prototype.unload=function(){window.removeEventListener("keydown",this.onGlobalKeydown),window.removeEventListener("keyup",this.onGlobalKeyup),this.clear(),this.cancelFrame()},e.prototype.clear=function(){var e=this;this.staleSelection=[],this.selection.clear(),this.nodes.forEach((function(t){return e.removeNode(t)})),this.edges.forEach((function(t){return e.removeEdge(t)})),this.nodeIndex.clear(),this.history.clear(),this.data={},this.requestPushHistory.cancel(),this.requestUpdateFileOpen.cancel(),this.setViewport(0,0,0),this.setReadonly(!1)},e.prototype.requestSave=function(e){void 0===e&&(e=!0),this.data=this.getData(),e&&this.requestPushHistory(this.data),this.view.requestSave()},e.prototype.overrideHistory=function(){this.requestPushHistory.run(),this.data=this.getData(),this.history.replace(this.data),this.updateHistoryUI(),this.view.requestSave()},e.prototype.undo=function(){var e=this.history;e.canUndo()&&this.applyHistory(e.undo())},e.prototype.redo=function(){var e=this.history;e.canRedo()&&this.applyHistory(e.redo())},e.prototype.applyHistory=function(e){this.importData(e,!0),this.data=e,this.view.requestSave(),this.updateHistoryUI()},e.prototype.pushHistory=function(e){this.history.push(e),this.updateHistoryUI()},e.prototype.updateHistoryUI=function(){var e=this.history;this.undoBtnEl.toggleClass("is-disabled",!e.canUndo()),this.redoBtnEl.toggleClass("is-disabled",!e.canRedo())},Object.defineProperty(e.prototype,"zoomBreakpoint",{get:function(){return JX-(this.options.zoomBreakpoint||0)},enumerable:!1,configurable:!0}),e.prototype.setViewport=function(e,t,n){e===this.x&&t===this.y&&n===this.zoom||(this.x=this.tx=e,this.y=this.ty=t,this.zoom=this.tZoom=n,this.markViewportChanged())},e.prototype.zoomBy=function(e,t){var n=this.tZoom;n+=e,this.tZoom=n,t||(t=Ol(0,0)),this.zoomCenter=t,this.markViewportChanged()},e.prototype.panTo=function(e,t){this.x=e,this.y=t,this.tx=e,this.ty=t,this.markViewportChanged()},e.prototype.panBy=function(e,t){this.x+=e,this.y+=t,this.tx=this.x,this.ty=this.y,this.markViewportChanged()},e.prototype.zoomToSelection=function(){var e=this.selection;if(0!==e.size){var t=nX(Array.from(e.values()).map((function(e){return e.getBBox()})));this.zoomToBbox(t)}},e.prototype.nudgeSelection=function(e,t){var n=Array.from(this.selection).filter((function(e){return e instanceof u$}));if(0!==n.length){var i=e.shiftKey?5*this.gridSpacing:this.gridSpacing,r={x:0,y:0};switch(t){case"down":r.y=i;break;case"up":r.y=-i;break;case"left":r.x=-i;break;case"right":r.x=i}if(this.options.snapToGrid){var o=this.gridSpacing,a=nX(Array.from(this.selection).map((function(e){return e.getBBox()}))),s={x:Math.round(a.minX%o),y:Math.round(a.minY%o)};("left"===t||"right"===t)&&s.x>0?(r.x=-s.x,"right"===t&&(r.x+=o)):("up"===t||"down"===t)&&s.y>0&&(r.y=-s.y,"down"===t&&(r.x+=o))}for(var l=0,c=n;l<c.length;l++){var u=c[l];u.moveTo({x:u.x+r.x,y:u.y+r.y})}this.requestSave()}},e.prototype.zoomToFit=function(){var e=this.nodes;if(0!==e.size){var t=nX(Array.from(e.values()).map((function(e){return e.getBBox()})));this.zoomToBbox(t)}},e.prototype.zoomToBbox=function(e){var t=this.canvasRect,n=t.width,i=t.height;if(0!==n&&0!==i){var r=n/(1.1*(e.maxX-e.minX)),o=i/(1.1*(e.maxY-e.minY)),a=Math.clamp(Math.min(r,o),-4,1),s=oX(e);this.tx=s.x,this.ty=s.y,this.zoomCenter=null,this.tZoom=Math.log2(a),this.markViewportChanged()}},e.prototype.panIntoView=function(e,t){void 0===t&&(t=this.gridSpacing),e=iX(e,t);var n=this.getViewportBBox();e.maxX-e.minX>n.maxX-n.minX||e.maxY-e.minY>n.maxY-n.minY?this.zoomToBbox(e):(e.minX<n.minX&&(this.tx=this.x+e.minX-n.minX),e.minY<n.minY&&(this.ty=this.y+e.minY-n.minY),e.maxX>n.maxX&&(this.tx=this.x+e.maxX-n.maxX),e.maxY>n.maxY&&(this.ty=this.y+e.maxY-n.maxY),this.markViewportChanged())},Object.defineProperty(e.prototype,"gridSpacing",{get:function(){var e=this.zoom;return e<-3.3?160:e<-2.16?80:e<-.91?40:20},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"snapDistance",{get:function(){return Math.ceil(this.config.objectSnapDistance/this.scale)},enumerable:!1,configurable:!0}),e.prototype.posFromEvt=function(e){return this.posFromDom(this.domPosFromEvt(e))},e.prototype.domPosFromEvt=function(e){var t=this.canvasRect,n=t.cx,i=t.cy;return Ol(e.clientX-n,e.clientY-i)},e.prototype.domPosFromClient=function(e){var t=this.canvasRect,n=t.cx,i=t.cy;return Ol(e.x-n,e.y-i)},e.prototype.posFromClient=function(e){return this.posFromDom(this.domPosFromClient(e))},e.prototype.posFromDom=function(e){var t=this,n=t.x,i=t.y,r=t.scale;return Ol(n+e.x/r,i+e.y/r)},e.prototype.domFromPos=function(e){var t=this,n=t.x,i=t.y,r=t.scale;return Ol((e.x-n)*r,(e.y-i)*r)},e.prototype.posCenter=function(){return this.posFromDom(Ol(0,0))},e.prototype.posInViewport=function(e){var t=this.canvasRect,n=t.minX,i=t.minY,r=t.maxX,o=t.maxY;return e.x>=n||e.x<=r||e.y>=i||e.y<=o},e.prototype.getViewportNodes=function(e){var t=this.getIntersectingNodes(this.getViewportBBox());if(e){var n=this.selection;t=t.filter((function(e){return!n.has(e)}))}return t},e.prototype.hitTestNode=function(e,t){void 0===t&&(t=0);var n=this.nodeIndex.search(iX(QZ(e.x,e.y,e.x,e.y),t));return 0===n.length?null:(n.sort((function(e,t){return t.zIndex-e.zIndex})),n[0])},e.prototype.addNode=function(e){this.nodes.set(e.id,e),this.requestFrame(),this.canvasPlaceholderEl&&(this.canvasPlaceholderEl.detach(),this.canvasPlaceholderEl=null)},e.prototype.removeNode=function(e){for(var t=0,n=this.getEdgesForNode(e);t<n.length;t++){var i=n[t];this.removeEdge(i)}this.deselect(e),this.nodes.delete(e.id),this.nodeIndex.remove(e),this.moved.delete(e),this.dirty.delete(e),this.lastNodesInViewport.delete(e),e.destroy(),this.requestFrame()},e.prototype.getIntersectingNodes=function(e){return this.nodeIndex.search(e)},e.prototype.getContainingNodes=function(e){return this.nodeIndex.search(e).filter((function(t){return rX(e,t.getBBox())}))},e.prototype.addEdge=function(e){var t=this,n=t.edges,i=t.edgeFrom,r=t.edgeTo;n.set(e.id,e),i.add(e.from.node,e),r.add(e.to.node,e),this.requestFrame()},e.prototype.removeEdge=function(e){var t=this,n=t.edges,i=t.edgeIndex,r=t.edgeFrom,o=t.edgeTo;n.has(e.id)&&(this.deselect(e),n.delete(e.id),r.delete(e.from.node,e),o.delete(e.to.node,e),i.remove(e),this.moved.delete(e),this.dirty.delete(e),this.lastEdgesInViewport.delete(e),e.destroy(),this.requestFrame())},e.prototype.getEdgesForNode=function(e){return this.edgeFrom.getArray(e).concat(this.edgeTo.getArray(e))},e.prototype.getIntersectingEdges=function(e){return this.edgeIndex.search(e)},e.prototype.updateSelection=function(e){this.staleSelection||(this.staleSelection=Array.from(this.selection)),e(),this.requestFrame()},e.prototype.select=function(e){var t=this.selection;t.has(e)||this.updateSelection((function(){t.add(e)}))},e.prototype.deselect=function(e){var t=this.selection;t.has(e)&&this.updateSelection((function(){t.delete(e)}))},e.prototype.toggleSelect=function(e){var t=this.selection;this.updateSelection((function(){t.has(e)?t.delete(e):t.add(e)}))},e.prototype.selectOnly=function(e){var t=this.selection;1===t.size&&Array.from(t)[0]===e||this.updateSelection((function(){t.clear(),t.add(e)}))},e.prototype.selectAll=function(e){var t=this,n=this.selection;this.updateSelection((function(){e?(n.clear(),e.forEach((function(e){return n.add(e)}))):t.nodes.forEach((function(e){return n.add(e)}))}))},e.prototype.deselectAll=function(){var e=this.selection;0!==e.size&&this.updateSelection((function(){e.clear()}))},e.prototype.deleteSelection=function(){if(!this.readonly){for(var e=this.selection,t=0,n=Array.from(e);t<n.length;t++){var i=n[t];i instanceof u$&&this.removeNode(i),i instanceof L$&&this.removeEdge(i)}this.deselectAll(),this.requestSave()}},e.prototype.setDragging=function(e){this.isDragging!==e&&(this.isDragging=e,this.wrapperEl.toggleClass("is-dragging",e),this.selectionChanged=!0,this.requestFrame())},e.prototype.onResize=function(){var e=this.canvasRect,t=this.canvasRect=$Z(this.wrapperEl);if(Zl.isMobile&&e.height>0&&t.height>0&&e.height!==t.height&&(this.y=this.ty+=(t.height-e.height)/2/this.scale),Zl.isMobile&&1===this.selection.size){var n=Array.from(this.selection)[0];n instanceof u$&&n.isEditing&&this.panIntoView(n.getBBox())}this.viewportChanged=!0,this.requestFrame(),this.canvasRect.width>0&&this.zoomToFitQueued&&(this.zoomToFitQueued=!1,this.finishViewportAnimation=!0,this.zoomToFit())},e.prototype.getZIndex=function(){var e=this,t=e.menu,n=e.cardMenuEl,i=e.canvasControlsEl,r=this.zIndexCounter+=1,o=(r+1).toString();return n.style.zIndex=o,i.style.zIndex=o,t.updateZIndex(r+3),r},e.prototype.createTextNode=function(e){var t=e.pos,n=e.size,i=e.position,r=e.text,o=e.save,a=e.focus,s=new v$(this);return n||(n=this.config.defaultTextNodeDimensions),s.moveAndResize(sX(t,n,i)),r&&s.setText(r),this.addNode(s),!1!==o&&this.requestSave(),!1!==a&&(s.attach(),s.render(),this.selectOnly(s),s.startEditing()),s},e.prototype.createFileNode=function(e){var t=e.pos,n=e.size,i=e.position,r=e.file,o=e.subpath,a=e.save,s=e.focus,l=new m$(this);return n||(n=this.config.defaultFileNodeDimensions),l.moveAndResize(sX(t,n,i)),l.setFile(r,o),this.addNode(l),!1!==a&&this.requestSave(),!1!==s&&this.selectOnly(l),l},e.prototype.createFileNodes=function(e,t){for(var n=t.x,i=t.y,r=this.config.defaultFileNodeDimensions,o=r.width,a=r.height,s=0,l=[],c=0,u=e;c<u.length;c++){var h=u[c];l.push(this.createFileNode({pos:{x:n+(o+45)*(s%10),y:i+(a+45)*Math.trunc(s/10)},size:r,file:h,save:!1,focus:!1})),s++}return l},e.prototype.createLinkNode=function(e){var t=e.pos,n=e.size,i=e.position,r=e.url,o=e.save,a=e.focus,s=new y$(this);return n||(n=this.config.defaultFileNodeDimensions),FO.test(r)&&(n={width:640,height:360}),s.moveAndResize(sX(t,n,i)),s.setUrl(r),this.addNode(s),!1!==o&&this.requestSave(),!1!==a&&this.selectOnly(s),s},e.prototype.createGroupNode=function(e){var t=e.pos,n=e.size,i=e.position,r=e.label,o=e.save,a=e.focus,s=new w$(this);return n||(n=this.config.defaultFileNodeDimensions),s.moveAndResize(sX(t,n,i)),r||(r=YX.labelUntitledGroup()),s.setLabel(r),this.addNode(s),!1!==o&&this.requestSave(),!1!==a&&(this.selectOnly(s),s.attach(),s.render(),s.focusLabel()),s},e.prototype.markViewportChanged=function(){this.viewportChanged=!0,this.requestFrame()},e.prototype.markMoved=function(e){this.moved.add(e),this.requestFrame()},e.prototype.markDirty=function(e){this.dirty.add(e),this.selection.has(e)&&(this.selectionChanged=!0),this.requestFrame()},e.prototype.requestFrame=function(e){var t=this;this.frame||(e||(e=performance.now()),this.frameWin=this.canvasEl.win,this.frame=this.frameWin.requestAnimationFrame((function(){t.frame=0,t.frameWin=null;var n=performance.now(),i=n-e,r=t.viewportChanged;if(r){var o=Math.pow(.984,i);t.finishViewportAnimation&&(o=0,t.finishViewportAnimation=!1);var a=1-o,s=t,l=s.x,c=s.y,u=s.zoom,h=s.tx,d=s.ty,p=s.tZoom,f=s.zoomCenter,m=s.scale;t.screenshotting||(p=t.tZoom=Math.clamp(p,-4,1));var v=p-u;if(Math.abs(v)<$X&&(a=1),Math.abs(v)===1/0)u=p=0,m=Math.pow(2,u);else if(0===v)u=p,m=Math.pow(2,u);else if(f){var g=f.x,y=f.y,b=m;u+=v*a,l-=g/(m=Math.pow(2,u))-g/b,c-=y/m-y/b,h=t.tx=l,d=t.ty=c}else u+=v*a,m=Math.pow(2,u);var w=h-l;l+=w*a,0!==w&&Math.abs(w)<$X&&(l=h);var k=d-c;c+=k*a,0!==k&&Math.abs(k)<$X&&(c=d),t.x=l,t.y=c,t.zoom=u,t.scale=m;var C=t,M=C.canvasEl,E=C.wrapperEl,S=t.canvasRect,x=S.width,T=S.height;E.toggleClass("mod-zoomed-out",u<=JX),M.style.transform="translate(".concat(x/2,"px, ").concat(T/2,"px) scale(").concat(m,") translate(").concat(-l,"px, ").concat(-c,"px)");var D=t.gridSpacing;t.backgroundPatternEl.setAttrs({x:String(x/2-l%D*m),y:String(T/2-c%D*m),width:String(D*m),height:String(D*m)}),t.x!==h||t.y!==d||t.zoom!==p||Date.now()<t.pauseAnimation?(t.requestFrame(n),t.wasAnimating=!0):(t.screenshotting&&(m=Math.min(1,m)),E.setCssProps({"--zoom-multiplier":String(Math.sqrt(1/m))}),E.toggleClass("mod-animating",!Zl.isIosApp&&t.wasAnimating),t.wasAnimating=!1,t.viewportChanged=!1,t.app.workspace.requestSaveLayout())}var A=t,L=A.moved,P=A.dirty,I=A.nodes,F=A.edges,O=A.edgeIndex,B=A.nodeIndex;if(L.size>0){for(var N=0,R=Array.from(L);N<R.length;N++){if((re=R[N])instanceof u$)for(var H=0,V=t.getEdgesForNode(re);H<V.length;H++){var z=V[H];L.add(z)}}for(var q=[],U=[],_=0,W=Array.from(L);_<W.length;_++){(re=W[_])instanceof u$?(B.remove(re),I.has(re.id)&&q.push(re)):re instanceof L$&&(O.remove(re),F.has(re.id)&&U.push(re)),P.add(re)}for(var j=0,G=q;j<G.length;j++){var K=G[j];B.insert(K)}for(var Y=0,Z=U;Y<Z.length;Y++){z=Z[Y];O.insert(z)}}t.virtualize();for(var X=0,$=Array.from(P);X<$.length;X++){(re=$[X]).isAttached&&(re.render(),P.delete(re))}var Q=t,J=Q.staleSelection,ee=Q.selection,te=Q.selectionChanged;if(J){for(var ne=0,ie=J;ne<ie.length;ne++){var re=ie[ne];ee.has(re)||(1===J.length?re.blur():re.deselect(),te=!0)}for(var oe=new Set(J),ae=0,se=Array.from(ee);ae<se.length;ae++){re=se[ae];oe.has(re)?1===J.length&&ee.size>1?(re.blur(),re.select(),te=!0):J.length>1&&1===ee.size&&(re.deselect(),re.focus(),te=!0):(1===ee.size?re.focus():re.select(),te=!0)}if(Zl.isMobile){var le=null,ce=Array.from(ee);1===ce.length&&ce[0]instanceof u$&&(le=ce[0]),t.nodeInteractionLayer.setTarget(le)}}t.staleSelection=null,t.selectionChanged=!1,(te||r||Array.from(t.selection).some((function(e){return L.has(e)})))&&t.menu.render(te),L.clear(),t.nodeInteractionLayer.render()})))},e.prototype.cancelFrame=function(){var e=this,t=e.frameWin,n=e.frame,i=e.pointerFrame,r=e.pointerFrameWin;n&&t&&(t.cancelAnimationFrame(n),this.frame=0,this.frameWin=null),i&&r&&(r.cancelAnimationFrame(i),this.pointerFrame=0,this.pointerFrameWin=null)},e.prototype.getViewportBBox=function(){var e=this.canvasRect,t=this.posFromDom(Ol(e.minX,e.minY)),n=this.posFromDom(Ol(e.maxX,e.maxY));return{minX:t.x,minY:t.y,maxX:n.x,maxY:n.y}},e.prototype.virtualize=function(){var e=this,t=e.screenshotting,n=e.lastNodesInViewport,i=e.lastEdgesInViewport,r=this.getViewportBBox(),o=this.getIntersectingNodes(r),a=this.getIntersectingEdges(r);t&&(o=Array.from(this.nodes.values()),a=Array.from(this.edges.values()));var s=new Set(o),l=new Set(a),c=this.selection;1===c.size&&c.forEach((function(e){e instanceof u$&&s.add(e)}));for(var u=0,h=0,d=o;h<d.length;h++){var p=d[h];n.has(p)?p.attach():u<10||t?(p.attach(),u++):s.delete(p)}for(var f=0,m=a;f<m.length;f++){m[f].attach()}var v=[];n.forEach((function(e){s.has(e)||v.push(e)}));for(var g=0,y=v;g<y.length;g++){(p=y[g]).preDetach()}for(var b=0,w=v;b<w.length;b++){(p=w[b]).detach()}i.forEach((function(e){l.has(e)||e.detach()})),this.lastNodesInViewport=s,this.lastEdgesInViewport=l,u>0&&this.requestFrame()},e.prototype.rerenderViewport=function(){var e=this;this.lastNodesInViewport.forEach((function(t){return e.markDirty(t)}))},e.prototype.setState=function(e){var t=e.x,n=e.y,i=e.zoom;Number.isNumber(t)&&Number.isNumber(n)&&Number.isNumber(i)&&(this.setViewport(t,n,i),this.zoomToFitQueued=!1)},e.prototype.getState=function(){var e=this;return{x:e.tx,y:e.ty,zoom:e.tZoom}},e.prototype.handleCut=function(e){if(!this.readonly&&this.canvasEl.doc.activeElement===this.wrapperEl){this.handleCopy(e);for(var t=this.selection,n=0,i=Array.from(t);n<i.length;n++){var r=i[n];r instanceof u$&&this.removeNode(r),r instanceof L$&&this.removeEdge(r)}this.requestSave()}},e.prototype.cloneData=function(e,t){for(var n=e.nodes,i=e.edges,r={},o=0,a=n;o<a.length;o++){var s=a[o],l=s.id,c=oc(16);s.id=c,r[l]=c,t&&(s.x+=t.x,s.y+=t.y)}for(var u=0,h=i;u<h.length;u++){var d=h[u];d.fromNode=r[d.fromNode]||"",d.toNode=r[d.toNode]||"",d.id=oc(16)}return e},e.prototype.handleCopy=function(e){if(this.canvasEl.doc.activeElement===this.wrapperEl&&(e.preventDefault(),0!==this.selection.size)){var t=this.getSelectionData();e.clipboardData.setData("obsidian/canvas",JSON.stringify(t))}},e.prototype.handlePaste=function(e){var t=this;if(!e.defaultPrevented&&!this.readonly&&this.canvasEl.doc.activeElement===this.wrapperEl){e.preventDefault();var n=this.posCenter(),i=Fk(e.clipboardData,"clipboard",!0);if(i.length>0)this.app.importAttachments(i,null).then((function(e){t.createFileNodes(e,n),t.requestSave()}));else{var r=e.clipboardData.getData("obsidian/canvas");if(r){var o=void 0;try{o=JSON.parse(r)}catch(e){return void console.error(e)}var a=o.nodes,s=o.edges,l=o.center;if(!a||!Array.isArray(a))return;if(!s||!Array.isArray(s))return;var c=null;l&&(c={x:n.x-l.x,y:n.y-l.y});var u=this.cloneData(o,c),h=this.importData(u,!1);return this.deselectAll(),this.requestSave(),void h.forEach((function(e){return t.select(e)}))}var d=e.clipboardData.getData("text/plain");if(qc(d))return this.createLinkNode({pos:n,position:"center",url:d}),void this.requestSave();d&&this.createTextNode({pos:n,position:"center",text:d})}}},e.prototype.toggleGridSnapping=function(e){this.options.snapToGrid=e,this.view.plugin.saveOptions()},e.prototype.toggleObjectSnapping=function(e){this.options.snapToObjects=e,this.view.plugin.saveOptions()},e.prototype.getSnapping=function(e,t,n,i){var r,o,a=this.options,s=a.snapToGrid,l=0,c=0;if(a.snapToObjects){var u=vX(e),h=vX(t),d=this.snapDistance;(r=yX(u,h,n?d:0,"x"))&&(l+=r.delta),(o=yX(u,h,i?d:0,"y"))&&(c+=o.delta)}if(s&&(!r||!o)){var p=nX(e),f=this.gridSpacing;!r&&n&&(l+=Math.round(p.minX/f)*f-p.minX),!o&&i&&(c+=Math.round(p.minY/f)*f-p.minY)}return(r||o)&&this.renderSnapPoints(r,o,l,c),Ol(l,c)},e.prototype.endSnapPointRendering=function(){this.snapContainerEl&&(this.snapContainerEl.detach(),this.snapContainerEl=null)},e.prototype.clearSnapPoints=function(){this.snapContainerEl&&this.snapContainerEl.empty()},e.prototype.renderSnapPoints=function(e,t,n,i){var r=this.snapContainerEl;r||(r=this.snapContainerEl=this.canvasEl.createSvg("svg","canvas-snaps")),r.style.zIndex=String(this.zIndexCounter+2);var o=function(e){return Ol(e.x+n,e.y+i)},a=[];e&&(a=a.concat(e.matches)),t&&(a=a.concat(t.matches));for(var s=0,l=a;s<l.length;s++){for(var c=l[s],u=c.src,h=c.dest,d=1/0,p=1/0,f=-1/0,m=-1/0,v=0,g=u.map(o).concat(h);v<g.length;v++){var y=g[v];r.createSvg("circle",{attr:{cx:y.x,cy:y.y,r:4}}),d=Math.min(d,y.x),p=Math.min(p,y.y),f=Math.max(f,y.x),m=Math.max(m,y.y)}r.createSvg("line",{attr:{x1:d,y1:p,x2:f,y2:m}})}},e.prototype.onKeydown=function(e){if(!e.repeat)switch(e.key){case"Escape":this.deselectAll();break;case"Backspace":case"Delete":var t=this.wrapperEl;if(this.isDragging||t.doc.activeElement!==t)break;this.deleteSelection()}},e.prototype.onPriorityPointerdown=function(e){var t=this;if("mouse"===e.pointerType){if(1===e.button){e.preventDefault();var n=this.posFromEvt(e);this.setDragging(!0),vk(e,(function(){return{move:function(e){var i=t.posFromEvt(e);t.panBy(n.x-i.x,n.y-i.y)},end:function(e){e.preventDefault()},cleanup:function(){t.setDragging(!1)}}}),0)}if(2===e.button||Zl.isMacOS&&1===e.button&&e.ctrlKey){e.preventDefault();var i=this.posFromEvt(e);vk(e,(function(){return t.setDragging(!0),{move:function(e){var n=t.posFromEvt(e);t.panBy(i.x-n.x,i.y-n.y)},cleanup:function(){gk(t.wrapperEl,"contextmenu"),t.setDragging(!1)}}}))}}},e.prototype.onPointerdown=function(e){var t=this;if("touch"!==e.pointerType){if(e.targetNode===this.wrapperEl&&"mouse"===e.pointerType&&0===e.button){var n=e.shiftKey,i=new Set(this.selection);n||this.deselectAll(),vk(e,(function(){return t.handleDragToSelect(e,n,i)}))}}else this.onTouchdown(e)},e.prototype.interactionHitTest=function(e){var t=this;if(this.pointer=this.posFromEvt(e),!this.pointerFrame){var n=this.pointerFrameWin=this.canvasEl.win;this.pointerFrame=n.requestAnimationFrame((function(){if(t.pointerFrame=0,t.pointerFrameWin=null,!t.isDragging){var e=t,n=e.pointer,i=e.nodeInteractionLayer,r=t.hitTestNode(n,8/t.scale);t.selection.size>1&&t.selection.has(r)?i.setTarget(null):i.target!==r&&i.setTarget(r)}}))}},e.prototype.onPointermove=function(e){"touch"!==e.pointerType&&this.interactionHitTest(e)},e.prototype.onTouchdown=function(e){var t=this;if(e.isPrimary&&!e.defaultPrevented&&!ok(e,this.wrapperEl,!0)){e.preventDefault();var n=e.targetNode,i=n===this.wrapperEl,r=n===this.menu.selection.selectionEl,o=e.win,a=e,s=function(e){return{id:e.pointerId,x:e.clientX,y:e.clientY,pos:t.posFromEvt(e)}},l=[s(e)],c=!1,u={},h=null,d=null;if(!i&&!r)for(var p=0,f=Array.from(this.nodes.values());p<f.length;p++){var m=f[p];m.nodeEl.contains(n)&&(d=m)}var v=!1,g=o.setTimeout((function(){g=0,v=!0,navigator.vibrate(100),Fl(o,e.clientX,e.clientY)}),600),y=function(e){"touch"!==e.pointerType||e.isPrimary||l.push(s(e))},b=function(e){if("touch"===e.pointerType){var s=l.find((function(t){return t.id===e.pointerId}));if(s){if(s.x=e.clientX,s.y=e.clientY,!c&&e.pointerId===a.pointerId&&Hl(Bl(a),Bl(e))>5){if(g&&o.clearTimeout(g),v){if(i){var h=e.shiftKey,p=new Set(t.selection);h||t.deselectAll(),u=t.handleDragToSelect(e,h,p)}else r?u=t.handleSelectionDrag(e,n):d&&(u=t.handleSelectionDrag(e,n,d));if(!u)return u={},void C()}else t.setDragging(!0);c=!0}if(e.pointerId===a.pointerId&&u.move&&u.move(e),!v)if(1===l.length){var f=l[0],m=t.posFromClient(f);t.panBy(f.pos.x-m.x,f.pos.y-m.y)}else{var y=l[0],b=l[1],w=t.posFromClient(y),k=t.posFromClient(b),M=Ol((y.pos.x+b.pos.x)/2,(y.pos.y+b.pos.y)/2),E=Hl(y.pos,b.pos),S=Hl(w,k);if(E>0&&S>0){var x=t.scale*S/E,T=Math.log2(x);T=Math.clamp(T,-4,1),t.zoom=t.tZoom=T,t.scale=Math.pow(2,T),t.markViewportChanged(),t.pauseAnimation=Date.now()+200}w=t.posFromClient(y),k=t.posFromClient(b);var D=Ol((w.x+k.x)/2,(w.y+k.y)/2);t.panBy(M.x-D.x,M.y-D.y),y.pos=t.posFromClient(y),b.pos=t.posFromClient(b)}}}},w=function(e){if("touch"===e.pointerType){if(e.pointerId===a.pointerId&&!c)return i&&t.deselectAll(),void C();var n=l.find((function(t){return t.id===e.pointerId}));n&&(n.x=e.clientX,n.y=e.clientY,e.pointerId===a.pointerId&&u.end&&u.end(e),l.remove(n),0===l.length&&C())}},k=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),h=e},C=function(){if(o.removeEventListener("pointerdown",y),o.removeEventListener("pointermove",b),o.removeEventListener("pointerup",w),o.removeEventListener("pointercancel",w),o.removeEventListener("contextmenu",k,{capture:!0}),g&&o.clearTimeout(g),u.cleanup&&u.cleanup(),t.setDragging(!1),!c&&(!v&&r&&t.deselectAll(),v)){var e=h||a;e.targetNode.dispatchEvent(new MouseEvent("contextmenu",e))}};o.addEventListener("pointerdown",y),o.addEventListener("pointermove",b),o.addEventListener("pointerup",w),o.addEventListener("pointercancel",w),o.addEventListener("contextmenu",k,{capture:!0})}},e.prototype.handleDragToSelect=function(e,t,n){var i=this,r=this.posFromEvt(e),o=new SX(this);return this.handleDragWithPan(e,{move:function(e){var a=i.posFromEvt(e);o.update(JZ(r,a));var s={minX:Math.min(r.x,a.x),minY:Math.min(r.y,a.y),maxX:Math.max(r.x,a.x),maxY:Math.max(r.y,a.y)},l=i.getIntersectingNodes(s);l=l.filter((function(e){return!(e instanceof w$)||rX(s,e.getBBox())}));var c=new Set(l);if(t){var u=new Set(n);c.forEach((function(e){u.has(e)?u.delete(e):u.add(e)})),c=u}i.selectAll(c)},end:function(e){if(Ak.isModifier(e,"Mod")){var t=i.view.plugin.options.defaultModDragBehavior,n=tX(o.bbox);switch(t){case"card":i.createTextNode({pos:n,size:n}),o.hide();break;case"note":new hX(i,(function(e){i.createFileNode({pos:n,size:n,file:e}),o.hide()})).showAttachments(!1).open();break;case"media":new hX(i,(function(e){i.createFileNode({pos:n,size:n,file:e}),o.hide()})).showMarkdownAndCanvas(!1).open();break;case"webpage":new o$(i.app,"",(function(e){i.createLinkNode({pos:n,size:n,url:e}),o.hide()})).open();break;case"group":i.createGroupNode({pos:n,size:n}),o.hide();break;default:var r=new PA;i.showCreationMenu(r,n,n),r.onHide((function(){o.hide()})),r.showAtMouseEvent(e)}}else o.hide();gk(i.wrapperEl,"click")},cancel:function(){i.selectAll(n),o.hide()}})},e.prototype.onDoubleClick=function(e){if(!(e.defaultPrevented||e.targetNode!==this.wrapperEl||this.isDragging||this.readonly)){var t=this.posFromEvt(e);this.createTextNode({pos:t,position:"center"})}},e.prototype.onContextMenu=function(e){var t=this;if(!e.defaultPrevented&&e.targetNode===this.wrapperEl&&!this.readonly){e.preventDefault(),this.deselectAll();var n=this.posFromEvt(e),i=new PA;this.showCreationMenu(i,n),i.addSeparator(),this.history.canUndo()&&i.addItem((function(e){e.setTitle(Qf.setting.mobileToolbar.optionUndo()).setSection("history").setIcon("lucide-undo-2").onClick((function(){t.undo()}))})),this.history.canRedo()&&i.addItem((function(e){e.setTitle(Qf.setting.mobileToolbar.optionRedo()).setSection("history").setIcon("lucide-redo-2").onClick((function(){t.redo()}))})),Zl.isDesktopApp&&i.addSeparator().addItem((function(t){t.setTitle(Qf.interface.menu.paste()).setSection("clipboard").setIcon("lucide-clipboard-check").onClick((function(){e.win.electron.remote.getCurrentWebContents().paste()}))})),this.showQuickSettingsMenu(i),i.showAtMouseEvent(e)}},e.prototype.setReadonly=function(e){var t=this.quickSettingsButton;if(this.readonly=e,t){var n=e?"lucide-lock":"lucide-settings",i=e?YX.labelDisableReadonly():YX.labelCanvasSettings();mx(t,n),Rx(t,i,{placement:"left"}),this.wrapperEl.toggleClass("mod-readonly",e),this.menu.render(!0)}},e.prototype.showQuickSettingsMenu=function(e){var t=this,n=this.view.plugin,i=n.options;e.addItem((function(e){return e.setSection("canvas").setTitle(YX.optionSnapToGrid()).setIcon("lucide-grid").setChecked(!!i.snapToGrid).onClick((function(){i.snapToGrid=!i.snapToGrid,n.saveOptions()}))})).addItem((function(e){return e.setSection("canvas").setTitle(YX.optionSnapToObjects()).setIcon("snap-to-object").setChecked(!!i.snapToObjects).onClick((function(){i.snapToObjects=!i.snapToObjects,n.saveOptions()}))})).addItem((function(e){return e.setSection("canvas").setTitle(YX.labelReadonly()).setIcon("lucide-lock").setChecked(t.readonly).onClick((function(){t.setReadonly(!t.readonly),t.view.saveLocalData()}))}))},e.prototype.showCreationMenu=function(e,t,n){var i=this;e.addItem((function(e){e.setTitle(YX.actionAddCard()).setSection("create").setIcon("lucide-sticky-note").onClick((function(){i.createTextNode({pos:t,size:n})}))})).addItem((function(e){e.setTitle(YX.actionAddNote()).setSection("create").setIcon("lucide-file-text").onClick((function(){new hX(i,(function(e){i.createFileNode({pos:t,size:n,file:e})})).showAttachments(!1).open()}))})).addItem((function(e){e.setTitle(YX.actionAddMedia()).setSection("create").setIcon("lucide-file-image").onClick((function(){new dX(i,(function(e){i.createFileNode({pos:t,size:n,file:e})})).open()}))})).addItem((function(e){e.setTitle(YX.actionAddWebsite()).setSection("create").setIcon("lucide-external-link").onClick((function(){new o$(i.app,"",(function(e){i.createLinkNode({pos:t,size:n,url:e})})).open()}))})).addItem((function(e){e.setTitle(YX.actionCreateGroup()).setSection("create").setIcon("create-group").onClick((function(){i.createGroupNode({pos:t,size:n})}))}))},e.prototype.smartZoom=function(e){var t=this.posFromEvt(e),n=QZ(t.x,t.y,t.x,t.y);if(this.selection.size>0&&rX(this.menu.selection.bbox,n))return void this.zoomToSelection();var i=this.getIntersectingNodes(n);if(i.length>0){i.sort((function(e,t){return e.width*e.height-t.width*t.height}));var r=i[0].bbox;this.zoomToBbox(r)}else this.zoomToFit()},e.prototype.onWheel=function(e){if(!this.isDragging&&!e.defaultPrevented){var t=this.wrapperEl,n=this.options.defaultWheelBehavior,i=e.ctrlKey||e.metaKey,r=i||this.isHoldingSpace,o=240===Math.abs(e.wheelDeltaY)&&0===e.wheelDeltaX;if("zoom"!==n||o||(r=!r),Zl.isMacOS&&e.ctrlKey&&0===e.deltaX&&0===e.deltaY)this.smartZoom(e);else if(i||!ok(e,t)){e.preventDefault();var a=e.deltaX,s=e.deltaY,l=e.deltaMode;l&&(l===e.DOM_DELTA_LINE?(a*=40,s*=40):l===e.DOM_DELTA_PAGE&&(a*=800,s*=800)),r?(this.zoomBy(-s/300,s<0?this.domPosFromEvt(e):void 0),this.pauseAnimation=Date.now()+200):e.shiftKey&&0===a?(this.tx+=s/this.scale*QX,this.markViewportChanged()):(this.tx+=a/this.scale*QX,this.ty+=s/this.scale*QX,this.markViewportChanged());var c=e.wheelDeltaX,u=e.wheelDeltaY;0===a&&Number.isInteger(u)&&120===Math.abs(u)&&u!==-3*e.deltaY||0===s&&Number.isInteger(c)&&120===Math.abs(c)&&c!==-3*e.deltaX||(this.finishViewportAnimation=!0)}}},e.prototype.handleMoverPointerdown=function(e){var t=this;if(e.isPrimary&&0===e.button){var n=this.posFromEvt(e);vk(e,(function(){return{move:function(e){var i=t.posFromEvt(e);t.panBy(n.x-i.x,n.y-i.y)}}}))}},e.prototype.onSelectionContextMenu=function(e){var t=this;if(!e.defaultPrevented){var n=PA.forEvent(e);n.addSections(["title","open","selection","clipboard","action","view","info","","danger"]),this.readonly||n.addItem((function(e){e.setTitle(ZX.deleteActionShortName()).setSection("danger").setIcon("lucide-trash-2").onClick((function(){t.deleteSelection()}))})),n.addItem((function(e){e.setTitle(YX.actionZoomToSelection()).setSection("selection").setIcon("zoom-to-selection").onClick((function(){t.zoomToSelection()}))})),this.readonly||n.addItem((function(e){e.setTitle(YX.actionCreateGroup()).setSection("selection").setIcon("create-group").onClick((function(){var e=tX(iX(nX(Array.from(t.selection.values()).map((function(e){return e.getBBox()}))),20));t.createGroupNode({pos:e,size:e})}))})),!this.readonly&&Zl.isDesktopApp&&n.addItem((function(t){t.setTitle(Qf.interface.menu.cut()).setIcon("lucide-scissors").setSection("clipboard").onClick((function(){e.win.electron.remote.getCurrentWebContents().cut()}))})).addItem((function(t){t.setTitle(Qf.interface.menu.copy()).setIcon("lucide-copy").setSection("clipboard").onClick((function(){e.win.electron.remote.getCurrentWebContents().copy()}))})).addItem((function(t){t.setTitle(Qf.interface.menu.paste()).setIcon("lucide-clipboard-check").setSection("clipboard").onClick((function(){e.win.electron.remote.getCurrentWebContents().paste()}))})),this.app.workspace.trigger("canvas:selection-menu",n,this);var i=Array.from(this.selection).filter((function(e){return e instanceof m$})).map((function(e){return e.file}));i.length>1&&this.app.workspace.trigger("files-menu",n,i,"canvas:selection-menu",null)}},e.prototype.canSnap=function(e){return Zl.isMacOS?!e.ctrlKey:!e.altKey},e.prototype.dragTempNode=function(e,t,n){var i=this;e.isPrimary&&0===e.button&&(e.preventDefault(),vk(e,(function(){var r=new d$(i);return r.resize(t),r.attach(),r.nodeEl.addClass("is-dragging"),i.handleDragWithPan(e,{move:function(e){i.clearSnapPoints();var n=i.posFromEvt(e),o=m(m({},aX(n,t)),t);if(i.canSnap(e)){var a=[o].map(eX),s=i.getViewportNodes().filter((function(e){return!(e instanceof w$)})).map(eX),l=i.getSnapping(a,s,!0,!0);o.x+=l.x,o.y+=l.y}r.moveTo(o),r.render()},end:function(e){i.posInViewport(i.domPosFromEvt(e))&&n(Ol(r.x,r.y))},cleanup:function(){r.detach()}})})))},e.prototype.handleDragWithPan=function(e,t){var n=this,i=this.wrapperEl.getBoundingClientRect();this.setDragging(!0);var r=e.win,o=0,a=0,s=0;return m(m({},t),{move:function(e){var l,c=e.clientX,u=e.clientY,h=iX(eX(i),-30);o=0,a=0,c<h.minX&&(o=c-h.minX),c>h.maxX&&(o=c-h.maxX),u<h.minY&&(a=u-h.minY),u>h.maxY&&(a=u-h.maxY),0!==o||0!==a?(o=Math.clamp(o,-40,40),a=Math.clamp(a,-40,40),s||(s=r.setInterval((function(){var e=.5/Math.sqrt(n.scale);n.panBy(o*e,a*e)}),1e3/60))):s&&(r.clearInterval(s),s=0),null===(l=t.move)||void 0===l||l.call(t,e)},cleanup:function(){var e;s&&(r.clearInterval(s),s=0),n.endSnapPointRendering(),n.setDragging(!1),null===(e=t.cleanup)||void 0===e||e.call(t)}})},e.prototype.handleSelectionDrag=function(e,t,n){var i=this;if(!this.readonly){var r=this.posFromEvt(e);n&&!this.selection.has(n)&&this.selectOnly(n);var o=new Set;this.selection.forEach((function(e){if(e instanceof u$&&(o.add(e),e instanceof w$))for(var t=0,n=i.getContainingNodes(e.getBBox());t<n.length;t++){var r=n[t];o.add(r)}}));for(var a=Array.from(o),s=new WeakMap,l=0,c=a;l<c.length;l++){var u=c[l];s.set(u,Ol(u.x,u.y)),u.nodeEl.addClass("is-dragging"),u.updateZIndex()}var h=a,d=null,p=function(e){var t=Zl.isMacOS?e.altKey:e.ctrlKey;if(t&&!d){h=d=[];for(var n=0,r=a;n<r.length;n++){var o=r[n],l=s.get(o),c=new d$(i);d.push(c),s.set(c,l),c.x=o.x,c.y=o.y,c.width=o.width,c.height=o.height,c.attach(),c.render(),c.nodeEl.addClass("is-dragging"),o.moveTo(l)}}else if(!t&&d){for(var u=0;u<a.length;u++){c=d[u];a[u].moveTo(c),c.detach()}d=null,h=a}},f=function(e,t){var n=s.get(e);return{x:n.x+t.x,y:n.y+t.y,width:e.width,height:e.height}},m=function(e){var t,n,o=i.posFromEvt(e),a=(n=r,{x:(t=o).x-n.x,y:t.y-n.y});if(e.shiftKey&&(Math.abs(a.x)>Math.abs(a.y)?a.y=0:a.x=0),!i.canSnap(e))return a;var s=h,l=s.filter((function(e){return e instanceof w$}));if(l.length){s=[];for(var c=function(e){l.some((function(t){return t!==e&&rX(t.getBBox(),e.getBBox())}))||s.push(e)},u=0,d=l;u<d.length;u++){c(d[u])}}var p=new Set(h),m=s.map((function(e){return f(e,a)})).map(eX),v=i.getViewportNodes().filter((function(e){return!p.has(e)&&l.length>0==e instanceof w$})).map(eX),g=i.getSnapping(m,v,0!==a.x,0!==a.y);return function(e,t){return{x:e.x+t.x,y:e.y+t.y}}(a,g)};return this.handleDragWithPan(e,{move:function(e){i.clearSnapPoints(),p(e);for(var t=m(e),n=0,r=h;n<r.length;n++){var o=r[n];o.moveTo(f(o,t))}},end:function(e){for(var t=0,n=a;t<n.length;t++){n[t].nodeEl.removeClass("is-dragging")}if(d){var r=m(e),s=i.getSelectionData(o),l=i.cloneData(s,r),c=i.importData(l,!1);i.clearSnapPoints(),i.selectAll(c)}i.setDragging(!1),i.requestSave()},cancel:function(){for(var e=0,t=a;e<t.length;e++){var n=t[e];n.moveTo(s.get(n)),n.nodeEl.removeClass("is-dragging")}},cleanup:function(){if(d)for(var e=0,n=d;e<n.length;e++){n[e].detach()}t&&gk(t,"click")},keydown:function(e){p(e)},keyup:function(e){p(e)}})}},e.prototype.takeScreenshot=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g;return y(this,(function(y){switch(y.label){case 0:n=this.wrapperEl,y.label=1;case 1:return y.trys.push([1,,6,7]),n.addClass("is-screenshotting"),t&&n.addClass("is-text-garbled"),this.deselectAll(),this.app.statusBar.containerEl.hide(),[4,sleep(10)];case 2:return y.sent(),[4,nextFrame()];case 3:return y.sent(),i=nX(Array.from(this.nodes.values()).map(eX)),r=this.domFromPos(Ol(i.minX,i.minY)),o=r.x,a=r.y,s=this.domFromPos(Ol(i.maxX,i.maxY)),l=s.x,c=s.y,u=this.canvasRect,h=u.cx,d=u.cy,o+=h,a+=d,l+=h,c+=d,o-=10,a-=10,l+=10,c+=10,p=n.getBoundingClientRect(),o<p.x&&(o=p.x),a<p.y&&(a=p.y),l>p.right&&(l=p.right),c>p.bottom&&(c=p.bottom),f=Nl(Math.round(o),Math.round(a),Math.round(l-o),Math.round(c-a)),m=n.win.electron.remote,[4,m.getCurrentWebContents().capturePage(f)];case 4:return v=y.sent(),g=lu(v.toPNG()),[4,window.require("original-fs").promises.writeFile(e,g)];case 5:return y.sent(),new JA(e,1e4).addButton(Zl.isMacOS?Qf.plugins.openWithDefaultApp.actionShowInFolderMac():Qf.plugins.openWithDefaultApp.actionShowInFolder(),(function(){return Hf(e)})),[3,7];case 6:return this.app.statusBar.containerEl.show(),n.removeClass("is-screenshotting"),n.removeClass("is-text-garbled"),[7];case 7:return[2]}}))}))},e.prototype.generateHDImage=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w,k,C,M,E,S,x,T,D,A,L,P,I,F,O,B,N,R,H,V,z,q,U,_,W,j,G,K,Y,Z,X,$,Q,J=this;return y(this,(function(ee){switch(ee.label){case 0:return e=this.wrapperEl,0===this.nodes.size?(new JA(YX.msgExportFailedEmptyCanvas()),[2]):(t=e.win,n=e.doc,i=t.electron.remote,r=i.getCurrentWebContents(),o=Math.pow(1.2,r.getZoomLevel()),a=t.devicePixelRatio,s=Math.round(a/o*1e5)/1e5,l=iX(nX(Array.from(this.nodes.values()).map(eX)),100),c=l.maxX-l.minX,u=l.maxY-l.minY,h=Math.min(2,16284/s/c,16284/s/u),d="",p=Math.min(1,h),f=Math.log2(p),m=Math.log2(h),v=!0,b=!1,w="full",[4,new Promise((function(e){var t=new ZA(J.app);t.setTitle(YX.actionExportPng()),t.modalEl.addClass("mod-narrow");var n,i,r=t.contentEl;r.createEl("p",{cls:"u-muted",text:YX.labelExportPngDesc({title:J.view.file.basename})}),new NI(r).setName(YX.optionExportPngFrame()).setDesc(YX.optionExportPngFrameDesc()).addDropdown((function(e){return e.addOption("full",YX.optionExportPngFrameFull()).addOption("viewport",YX.optionExportPngFrameViewport()).setValue(w).onChange((function(e){var t="full"===(w=e);n.setVisibility(t),i.setVisibility(t)}))}));var o=function(){return n.setDesc(YX.labelExportPngDimensions({dimensions:"".concat(Math.ceil(c*p*s).toLocaleString(),"px x ").concat(Math.ceil(u*p*s).toLocaleString(),"px")}))};n=new NI(r).setName(YX.optionExportPngZoom()).setDesc(YX.optionExportPngZoomDesc()).addSlider((function(e){return e.setLimits(Math.min(-1,m),m,"any").setValue(f).setDynamicTooltip().onChange((function(e){f=e,p=Math.pow(2,e),o()})).getValuePretty=function(){return Math.pow(2,e.getValue()).toFixed(2)}})),o(),i=new NI(r).setName(YX.optionExportPngShowLogo()).setDesc(YX.optionExportPngShowLogoDesc()).addToggle((function(e){return e.setValue(v).onChange((function(e){return v=e}))})),new NI(r).setName(YX.optionExportPngPrivacyMode()).setDesc(YX.optionExportPngPrivacyModeDesc()).addToggle((function(e){return e.setValue(b).onChange((function(e){return b=e}))})),r.createDiv("modal-button-container",(function(n){n.createEl("button",{cls:"mod-cta",text:Qf.dialogue.buttonSave()}).addEventListener("click",(function(){return g(J,void 0,void 0,(function(){return y(this,(function(n){return t.close(),e(),[2]}))}))}))})),t.open()}))]);case 1:return ee.sent(),[4,i.dialog.showSaveDialog({defaultPath:this.view.file.basename+".png",filters:[{name:"PNG Files",extensions:["png"]},{name:"All Files",extensions:["*"]}],properties:["showOverwriteConfirmation"]})];case 2:return(k=ee.sent()).canceled||!k.filePath?[2]:(d=k.filePath)?"viewport"!==w?[3,4]:[4,this.takeScreenshot(d,b)]:[2];case 3:return ee.sent(),[2];case 4:this.deselectAll(),C=n.body,e.addClass("is-screenshotting"),b&&e.addClass("is-text-garbled"),this.screenshotting=!0,C.appendChild(e),E="",ee.label=5;case 5:return ee.trys.push([5,,16,18]),v&&(l.maxY+=80,u+=80,(M=this.canvasEl.createDiv("canvas-watermark")).setCssStyles({position:"absolute",left:l.minX+80+"px",top:l.maxY-80+"px",transform:"translate(0, -100%) scale(".concat(4/p,")"),transformOrigin:"bottom left",display:"flex",whiteSpace:"pre",alignItems:"center",gap:"3px",zIndex:"9999999"}),M.appendChild(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttrs({viewBox:"0 0 143 25",width:String(e),fill:"currentColor"}),t.innerHTML='<path d="M7 14.6a12 12 0 0 1 2.8-.6 10 10 0 0 1 .5-8.8l.4-.7a32.9 32.9 0 0 0 .9-2.3v-1c-.1-.4-.3-.7-.7-1.1-.6-.2-1.1 0-1.6.3L4.2 5.1c-.3.2-.5.6-.6 1l-.4 3a14.6 14.6 0 0 1 3.7 5.5Zm-4-4.2-.1.3-2.8 6c-.2.7-.1 1.4.4 1.9L4.8 23a8.7 8.7 0 0 0 .8-8.7c-.7-1.8-1.9-3.2-2.6-4Z"/><path d="M5.8 23.5H6a23.8 23.8 0 0 1 7.4 1.4c1.2.4 2.3-.5 2.5-1.7a7 7 0 0 1 .8-2.7c-.8-2-1.6-3.2-2.6-4a5 5 0 0 0-2.9-1.3c-1.6-.2-3 .2-4 .5.6 2.3.4 5-1.4 7.8Z"/><path d="m17.4 19.3 2-3c0-.4 0-.7-.2-1a18 18 0 0 1-2-3.5c-.7-1.4-.7-3.5-.8-4.6 0-.4 0-.7-.3-1l-3.4-4.3v.6L12 4l-.5 1-.3.6A11 11 0 0 0 10 9.4c0 1.3 0 2.8.9 4.7h.4c1.1.2 2.3.6 3.5 1.6 1 .8 1.8 2 2.5 3.6ZM39.8 4.5c-6 0-10.3 3.7-10.3 8.9 0 5.1 4.3 8.9 10.3 8.9 5.9 0 10.2-3.8 10.2-9 0-5-4.3-8.8-10.2-8.8Zm0 3.5c3.5 0 6.1 2.1 6.1 5.4 0 3.2-2.6 5.4-6.1 5.4-3.6 0-6.2-2.2-6.2-5.4 0-3.3 2.6-5.4 6.2-5.4Zm15.7 12.6c.8.9 2.5 1.7 4.6 1.7 4.3 0 6.8-3 6.8-6.6C67 12 64.4 9 60.1 9c-2.1 0-3.8.8-4.6 1.7v-6h-3.9V22h3.9v-1.4Zm-.1-5c0-2 1.7-3.4 3.9-3.4 2 0 3.9 1.2 3.9 3.5 0 2.2-1.8 3.5-4 3.5-2.1 0-3.8-1.4-3.8-3.4v-.2ZM67.3 20a11 11 0 0 0 7.2 2.3c4 0 7-1.5 7-4.4 0-3-2.9-3.5-6.1-3.8-2.8-.4-3.6-.4-3.6-1.1 0-.7.9-1 2.5-1 2 0 3.7.5 4.8 1.6l2-2.3A9.7 9.7 0 0 0 74.5 9c-4 0-6.5 1.7-6.5 4.3 0 2.7 2.5 3.3 5.6 3.7 2.8.3 4 .3 4 1.2 0 .8-1 1.1-2.8 1.1-2.2 0-4.1-.7-5.7-2l-1.8 2.5ZM82.8 8h4V4.9h-4V8Zm3.9 1.4h-3.8V22h3.8V9.4Zm13.1 11.2V22h3.9V4.8h-3.9v6C99 9.8 97.4 9 95.2 9c-4.3 0-6.8 3-6.8 6.6 0 3.6 2.5 6.6 6.8 6.6 2.2 0 3.8-.8 4.6-1.7Zm.1-5v.2c0 2-1.7 3.4-3.9 3.4-2 0-3.9-1.3-3.9-3.5 0-2.3 1.8-3.5 4-3.5 2.1 0 3.8 1.4 3.8 3.4ZM106 8h4V4.9h-4V8Zm3.9 1.4H106V22h3.9V9.4Zm7 12.9a8 8 0 0 0 5.2-1.7c.6 1.2 2.2 2 5 1.4v-2.8c-1.4.3-1.7 0-1.7-.7v-4.6c0-3.2-2.3-4.8-6.4-4.8-3.5 0-6.2 1.5-7 3.8l3.4 1c.4-1 1.7-1.8 3.5-1.8 2 0 2.8.8 2.8 1.7v.1l-5 .5c-3 .3-5.2 1.5-5.2 4 0 2.4 2.2 3.9 5.4 3.9Zm4.8-5.1c0 1.4-2.2 2.3-4.1 2.3-1.5 0-2.4-.5-2.4-1.3s.7-1.1 2-1.3l4.5-.4v.7Zm6.7 4.8h3.8v-6c0-2.2 1.2-3.5 3.3-3.5 2 0 3 1.3 3 3.4V22h3.8v-7.2c0-3.5-2.2-5.7-5.5-5.7-2 0-3.6.8-4.6 1.8V9.4h-3.8V22Z"/>',t}(100))),x=5/o,e.setCssStyles({top:"".concat(x,"px"),left:"".concat(x,"px"),bottom:"".concat(x,"px"),right:"".concat(x,"px"),width:"auto",height:"auto"}),S=window.open("about:blank","_blank","popup,x=".concat(t.screenX+5,",y=").concat(t.screenY+5,",width=").concat(t.outerWidth-10,",height=").concat(t.outerHeight-10)),T=createEl("base",{href:location.href}),S.document.head.appendChild(T),S.document.title="Obsidian",ZR(S),KR(S,[T])(),(D=new iG(S.document)).show(),D.setMessage("Rendering tiles..."),A=!1,D.el.createEl("button",{cls:"mod-cta",text:Qf.dialogue.buttonStop()},(function(e){e.style.marginTop="20px",e.onClickEvent((function(){A=!0}))})),this.onResize(),L=e.getBoundingClientRect(),P=Math.ceil(L.x*o+1),I=Math.ceil(L.y*o+1),F=Math.floor(L.width*o)-2,O=Math.floor(L.height*o)-2,this.zoom=this.tZoom=Math.log2(p/o),B=Nl(P,I,F,O),N=F/p,R=O/p,H=Math.ceil((l.maxX-l.minX)/N),V=Math.ceil((l.maxY-l.minY)/R),z=l.minX+N/2,q=l.minY+R/2,(U=n.createElement("canvas")).width=Math.ceil(c*p*s),U.height=Math.ceil(u*p*s),_=U.getContext("2d"),this.viewportChanged=!0,this.requestFrame(),[4,sleep(500)];case 6:ee.sent(),W=H*V,j=0,G=0,ee.label=7;case 7:if(!(G<V))return[3,12];K=function(e){var i,o,a,l;return y(this,(function(c){switch(c.label){case 0:return A?[2,{value:void 0}]:(Y.x=Y.tx=z+e*N,Y.y=Y.ty=q+G*R,Y.viewportChanged=!0,Y.requestFrame(),[4,sleep(100)]);case 1:return c.sent(),[4,t.nextFrame()];case 2:return c.sent(),t.requestIdleCallback?[4,new Promise((function(e){return t.requestIdleCallback(e)}))]:[3,4];case 3:c.sent(),c.label=4;case 4:return[4,r.capturePage(B)];case 5:return i=c.sent(),o=su(i.toPNG()),a=new Blob([o],{type:"image/png"}),E=URL.createObjectURL(a),(l=n.createElement("img")).src=E,[4,new Promise((function(e,t){l.addEventListener("load",e),l.addEventListener("error",t)}))];case 6:return c.sent(),_.drawImage(l,e*F*s,G*O*s),URL.revokeObjectURL(E),E="",j++,D.setProgress(j,W),D.setMessage("Rendering tiles... (".concat(j,"/").concat(W,")")),[2]}}))},Y=this,Z=0,ee.label=8;case 8:return Z<H?[5,K(Z)]:[3,11];case 9:if("object"==typeof(X=ee.sent()))return[2,X.value];ee.label=10;case 10:return Z++,[3,8];case 11:return G++,[3,7];case 12:return D.setMessage("Generating final image"),[4,Wc(U,"image/png")];case 13:return[4,ee.sent().arrayBuffer()];case 14:return $=ee.sent(),Q=lu($),[4,window.require("original-fs").promises.writeFile(d,Q)];case 15:return ee.sent(),new JA(d,1e4).addButton(Zl.isMacOS?Qf.plugins.openWithDefaultApp.actionShowInFolderMac():Qf.plugins.openWithDefaultApp.actionShowInFolder(),(function(){return Hf(d)})),[3,18];case 16:return this.view.contentEl.appendChild(e),M&&M.detach(),e.removeClass("is-screenshotting"),e.removeClass("is-text-garbled"),e.setCssStyles({top:"",left:"",bottom:"",right:"",width:"",height:""}),this.screenshotting=!1,S&&S.close(),E&&URL.revokeObjectURL(E),[4,t.nextFrame()];case 17:return ee.sent(),this.zoomToFitQueued=!0,this.onResize(),[7];case 18:return[2]}}))}))},e}();function r$(e,t){return e.zIndex-t.zIndex}var o$=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.title=YX.labelEnterUrl(),r.onSave=i,r}return f(t,e),t.prototype.validate=function(t){e.prototype.validate.call(this,t);try{new URL(t)}catch(e){return void this.displayError("Invalid URL",!1)}},t.prototype.submit=function(e){try{new URL(e)}catch(e){return void this.displayError("Invalid URL",!1)}this.close(),this.onSave(e)},t}(eL),a$=Qf.interface,s$=Qf.plugins.canvas,l$=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.fileSuggestions=null,o.mode="heading",o.runnable=null,o.emptyStateText=Qf.plugins.canvas.labelNoSectionFound(),o.file=n,o.cb=r,o.mode=i,o.setInstructions([{command:"â†‘â†“",purpose:Qf.plugins.templates.instructionNavigate()},{command:"â†µ",purpose:"block"===o.mode?s$.instructionNarrowBlock():s$.instructionNarrowHeading()},{command:"esc",purpose:Qf.plugins.templates.instructionDismiss()}]),o.setPlaceholder(s$.promptToNarrow()),o}return f(t,e),t.prototype.onChooseSuggestion=function(e,t){this.cb(e)},t.prototype.getSuggestions=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e=e.trim(),[4,this.getSuggestionsAsync(e)];case 1:return(t=n.sent())?(t.sort(mF),e||t.unshift({alias:s$.labelNoNarrow(),type:"alias",file:this.file,matches:null,path:this.file.path,score:0}),[2,t]):[2,null]}}))}))},t.prototype.getSuggestionsAsync=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){return n=(t=this).mode,(i=t.runnable)&&i.cancel(),i=this.runnable=new dL,"block"===n?[2,this.getBlockSuggestions(i,e)]:"heading"===n?((r=e).startsWith("#")||(r="#"+r),[2,this.getHeadingSuggestions(i,r)]):[2,[]]}))}))},t.prototype.getHeadingSuggestions=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o;return y(this,(function(a){return i=(n=this).app.metadataCache,r=n.file,o=i.getFileCache(r),[2,yF(e,this.file,o.headings,r.path,t)]}))}))},t.prototype.getBlockSuggestions=function(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,this.app.metadataCache.blockCache.getForFile(e,this.file)];case 1:return n=i.sent(),[2,bF(e,this.file,this.file.path,n,t)]}}))}))},t.prototype.renderSuggestion=function(e,t){wF(e,t)},t.prototype.close=function(){e.prototype.close.call(this),this.fileSuggestions=null},t}(hV),c$=function(){function e(e){var t=this;this.canvas=e;for(var n=this.interactionEl=createDiv("canvas-node-interaction-layer"),i=function(e){var i=createDiv({cls:"canvas-node-resizer",attr:{"data-resize":e}});i.addEventListener("pointerdown",(function(n){var r;n.targetNode===i&&"mouse"===n.pointerType&&(null===(r=t.target)||void 0===r||r.onResizePointerdown(n,e))})),i.addEventListener("click",(function(e){var n;return null===(n=t.target)||void 0===n?void 0:n.onClick(e)})),"bottom"!==e&&"right"!==e||i.addEventListener("dblclick",(function(n){var i;return null===(i=t.target)||void 0===i?void 0:i.onResizeDblclick(n,e)})),i.createDiv({cls:"canvas-node-connection-point",attr:{"data-side":e}}).addEventListener("pointerdown",(function(n){var i;return null===(i=t.target)||void 0===i?void 0:i.onConnectionPointerdown(n,e)})),n.append(i)},r=0,o=["top","right","bottom","left"];r<o.length;r++){i(o[r])}for(var a=function(e){var i=createDiv({cls:"canvas-node-resizer",attr:{"data-resize":e}});i.addEventListener("pointerdown",(function(n){var i;return null===(i=t.target)||void 0===i?void 0:i.onResizePointerdown(n,e)})),i.addEventListener("click",(function(e){var n;return null===(n=t.target)||void 0===n?void 0:n.onClick(e)})),n.append(i)},s=0,l=["topright","bottomright","bottomleft","topleft"];s<l.length;s++){a(l[s])}}return e.prototype.setTarget=function(e){this.target!==e&&(this.target=e,this.render())},e.prototype.render=function(){var e=this,t=e.canvas,n=e.target,i=e.interactionEl;if(n?i.parentNode||t.canvasEl.appendChild(i):i.parentNode&&i.detach(),n){var r=n.x,o=n.y,a=n.width,s=n.height;this.interactionEl.setCssStyles({transform:"translate(".concat(r,"px, ").concat(o,"px)"),width:"".concat(a,"px"),height:"".concat(s,"px"),zIndex:String(t.zIndexCounter+1)})}},e}(),u$=function(){function e(e,t){void 0===t&&(t=oc(16)),this.x=0,this.y=0,this.width=100,this.height=100,this.color="",this.unknownData={},this.initialized=!1,this.zIndex=-1,this.aspectRatio=0,this.isEditing=!1,this.destroyed=!1,this.renderedZIndex=-1,this.app=e.app,this.canvas=e,this.id=t,this.nodeEl=createDiv("canvas-node")}return e.prototype.getData=function(){var e=this,t=e.id,n=e.x,i=e.y,r=e.width,o=e.height,a=e.color,s=e.unknownData,l=m(m({},s),{id:t,x:n,y:i,width:r,height:o});return a&&(l.color=a),l},e.prototype.setData=function(e){var t=this.canvas,n=e.x,i=e.y,r=e.width,o=e.height,a=e.color,s=v(e,["x","y","width","height","color"]),l=!1,c=!1;n=Math.round(n),i=Math.round(i),r=Math.round(r),o=Math.round(o),isNaN(n)||this.x===n||(this.x=n,c=!0,l=!0),isNaN(i)||this.y===i||(this.y=i,c=!0,l=!0),isNaN(r)||this.width===r||(this.width=r,c=!0,l=!0),isNaN(o)||this.height===o||(this.height=o,c=!0,l=!0),a=EX(a||""),this.color!==a&&(this.color=a,l=!0),l&&t.markDirty(this),c&&t.markMoved(this),this.unknownData=s},Object.defineProperty(e.prototype,"rect",{get:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},enumerable:!1,configurable:!0}),e.prototype.setColor=function(e,t){void 0===t&&(t=!1),e=EX(e||""),this.color!==e&&(this.color=e,t?this.render():this.canvas.markDirty(this))},e.prototype.moveTo=function(e){this.moveAndResize(m({width:this.width,height:this.height},e))},e.prototype.resize=function(e){this.moveAndResize(m({x:this.x,y:this.y},e))},e.prototype.moveAndResize=function(e){this.x=Math.round(e.x),this.y=Math.round(e.y),this.width=Math.round(e.width),this.height=Math.round(e.height),this.canvas.markMoved(this)},e.prototype.destroy=function(){this.nodeEl.detach(),this.destroyed=!0},e.prototype.attach=function(){var e=this.nodeEl,t=this.canvas;e.parentNode||t.canvasEl.appendChild(e),this.updateBreakpoint(t.zoom>t.zoomBreakpoint||this.isEditing)},e.prototype.preDetach=function(){},e.prototype.detach=function(){this.nodeEl.parentNode&&this.nodeEl.detach()},e.prototype.updateBreakpoint=function(e){},Object.defineProperty(e.prototype,"isAttached",{get:function(){return!!this.nodeEl.parentNode},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){var e=this.nodeEl;e.addEventListener("click",this.onClick.bind(this)),e.addEventListener("contextmenu",this.onContextMenu.bind(this)),(this.containerEl=e.createDiv("canvas-node-container")).addEventListener("pointerdown",this.onPointerdown.bind(this))},e.prototype.setIsEditing=function(e){this.isEditing!==e&&(this.isEditing=e,this.nodeEl.toggleClass("is-editing",e))},e.prototype.isEditable=function(){return!1},e.prototype.startEditing=function(){var e=this.canvas;if(!e.readonly){e.selectOnly(this);var t=e.zoomBreakpoint+.1;e.zoom<t&&e.zoomToBbox(this.getBBox())}},e.prototype.getBBox=function(){return eX(this)},e.prototype.render=function(){this.initialized||(this.initialized=!0,this.initialize(),this.zIndex<0&&this.updateZIndex());var e=this,t=e.nodeEl,n=e.x,i=e.y,r=e.width,o=e.height,a=e.color,s=e.canvas;t.setCssStyles({transform:"translate(".concat(n,"px, ").concat(i,"px)"),width:"".concat(r,"px"),height:"".concat(o,"px")}),t.setCssProps({"--canvas-node-width":"".concat(r,"px"),"--canvas-node-height":"".concat(o,"px")}),CX(t,a),t.toggleClass("is-themed",!!a),this.renderZIndex(),this.updateBreakpoint(s.zoom>s.zoomBreakpoint||this.isEditing)},e.prototype.updateZIndex=function(){var e=this.canvas;this.zIndex!==e.zIndexCounter&&(this.zIndex=e.getZIndex()),this.renderZIndex()},e.prototype.renderZIndex=function(){var e=this.canvas,t=this.zIndex;1==e.selection.size&&e.selection.has(this)&&(t=e.zIndexCounter+1),t!==this.renderedZIndex&&(this.nodeEl.style.zIndex=t.toString(),this.renderedZIndex=t)},Object.defineProperty(e.prototype,"isFocused",{get:function(){return this.nodeEl.hasClass("is-focused")},enumerable:!1,configurable:!0}),e.prototype.focus=function(){this.nodeEl.addClass("is-focused"),this.renderZIndex()},e.prototype.blur=function(){this.nodeEl.removeClass("is-focused"),this.setIsEditing(!1),this.renderZIndex()},e.prototype.select=function(){this.nodeEl.addClass("is-selected"),this.renderZIndex()},e.prototype.deselect=function(){this.nodeEl.removeClass("is-selected"),this.renderZIndex()},e.prototype.onPointerdown=function(e){var t=this;if(e.isPrimary&&0===e.button&&!this.isEditing&&"mouse"===e.pointerType&&!this.canvas.readonly){var n=e.targetNode;n.instanceOf(HTMLElement)&&n.hasClass("inline-title")||vk(e,(function(){return t.canvas.handleSelectionDrag(e,t.nodeEl,t)}))}},e.prototype.onClick=function(e){if(!this.isEditing){var t=this.canvas;e.shiftKey?t.toggleSelect(this):t.selectOnly(this)}},e.prototype.onContextMenu=function(e){if(!this.isEditing&&!e.defaultPrevented){var t=this.canvas;if(t.selection.has(this)&&t.selection.size>1)t.onSelectionContextMenu(e);else{t.selectOnly(this);var n=PA.forEvent(e);n.addSections(["title","canvas","open","action-primary","action","info","view","system","","danger"]),this.showMenu(n)}}},e.prototype.showMenu=function(e){var t=this,n=this.canvas;n.readonly||e.addItem((function(e){return e.setSection("danger").setTitle(s$.actionRemove()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){n.removeNode(t),n.requestSave()}))})),e.addItem((function(e){return e.setSection("canvas").setTitle(s$.actionZoomToSelection()).setIcon("zoom-to-selection").onClick((function(){n.zoomToSelection()}))})),this.app.workspace.trigger("canvas:node-menu",e,this)},e.prototype.onResizePointerdown=function(e,t){var n=this;e.isPrimary&&0===e.button&&("mouse"===e.pointerType||this.canvas.selection.has(this))&&(e.preventDefault(),vk(e,(function(){var i=n,r=i.canvas,o=i.x,a=i.y,s=i.width,l=i.height,c=r.options,u=c.snapToGrid,h=c.snapToObjects;return r.selectOnly(n),n.nodeEl.addClass("is-dragging"),n.canvas.handleDragWithPan(e,{move:function(e){var i,c,d=r.config.minContainerDimension,p=r.posFromEvt(e);r.clearSnapPoints();var f=0,m=0,v=lX(t,p,n),g=v.source,y=v.resizeX,b=v.resizeY;if(r.canSnap(e)){if(h){var w=vX([eX(g)]),k=vX(r.getViewportNodes(!0).map(eX)),C=r.snapDistance;y&&(i=yX(w,k,C,"x"))&&(f=i.delta),b&&(c=yX(w,k,C,"y"))&&(m=c.delta)}if(u){var M=r.gridSpacing;y&&!i&&(f=Math.round(p.x/M)*M-p.x),b&&!c&&(m=Math.round(p.y/M)*M-p.y)}}var E=p.x+f,S=p.y+m,x=eX({x:o,y:a,width:s,height:l});t.contains("top")&&(x.minY=Math.min(x.maxY-d,S),x.minY!==S&&(c=null,m=x.minY-p.y)),t.contains("left")&&(x.minX=Math.min(x.maxX-d,E),x.minX!==E&&(i=null,f=x.minX-p.x)),t.contains("bottom")&&(x.maxY=Math.max(x.minY+d,S),x.maxY!==S&&(c=null,m=x.maxY-p.y)),t.contains("right")&&(x.maxX=Math.max(x.minX+d,E),x.maxX!==E&&(i=null,f=x.maxX-p.x));var T={x:x.minX,y:x.minY,width:x.maxX-x.minX,height:x.maxY-x.minY},D=n.aspectRatio;if(0!==D){var A=T.width,L=T.height;if(y&&b){var P=Math.max(A,L*D);L=Math.max(L,A/D),(A=P)!==T.width?i=null:L!==T.height&&(c=null)}else y?L=A/D:b&&(A=L*D);if(t.includes("left")){var I=o+s-A;f+=I-T.x,T.x=I}if(t.includes("top")){var F=a+l-L;m+=F-T.y,T.y=F}t.includes("right")&&(f+=A-T.width),t.includes("bottom")&&(m+=L-T.height),T.width=A,T.height=L}(i||c)&&r.renderSnapPoints(i,c,f,m),n.moveAndResize(T)},end:function(){r.requestSave()},cancel:function(){n.moveAndResize({x:o,y:a,width:s,height:l}),r.requestSave()},cleanup:function(){n.nodeEl.removeClass("is-dragging")}})})))},e.prototype.onConnectionPointerdown=function(e,t){var n=this;e.isPrimary&&0===e.button&&("touch"!==e.pointerType||this.canvas.selection.has(this))&&(e.preventDefault(),vk(e,(function(){var i=n.canvas,r=new d$(i),o=null;i.canvasEl.addClass("is-connecting"),i.deselectAll();var a=function(e){switch(e){case"right":return"left";case"left":return"right";case"top":return"bottom"}return"top"}(t),s={side:t,node:n,end:D$},l=new L$(i,oc(16),s,{side:a,node:r,end:A$});return i.addEdge(l),n.canvas.handleDragWithPan(e,{move:function(e){var t=i.posFromEvt(e);r.x=t.x,r.y=t.y,r.width=0,r.height=0;var c=i.getIntersectingNodes(iX(r.getBBox(),n.canvas.config.objectSnapDistance)).filter((function(e){return e!==n&&(!(e instanceof w$&&rX(e.getBBox(),n.getBBox()))&&!(n instanceof w$&&rX(n.getBBox(),e.getBBox())))}));(o=fX(t,c,i.config.objectSnapDistance))?l.update(s,{side:o.side,node:o.node,end:A$}):l.update(s,{side:a,node:r,end:A$})},end:function(e){if(o)i.requestSave();else{var t=n.app,r=t.metadataCache,c=(new PA).addSections(["action","file",""]),u=!1,h=function(){activeWindow.setTimeout((function(){u||i.removeEdge(l),u=!1}),50)};c.onHide(h);var d=function(e){l.update(s,{side:a,node:e,end:A$}),i.requestSave()},p=function(t,n){var r=i.posFromEvt(e),o=i.createFileNode({pos:r,position:a,file:t,subpath:n});d(o)},f=function(o,s){return g(n,void 0,void 0,(function(){var n,l,c,h,f,m,v,g;return y(this,(function(y){switch(y.label){case 0:return u=!0,n=i.posFromEvt(e),o?(c=WS(o),h=c.path,f=c.subpath,(m=r.getFirstLinkpathDest(h,s))?[3,2]:(v=WS(o).path,g=t.fileManager.getNewFileParent(o,v),[4,t.fileManager.createNewMarkdownFile(g,v)])):[3,3];case 1:m=y.sent(),y.label=2;case 2:return p(m,f),[3,4];case 3:l=i.createTextNode({pos:n,position:a}),d(l),y.label=4;case 4:return[2]}}))}))};if(c.addItem((function(e){return e.setTitle(s$.actionAddCard()).setSection("action").onClick((function(){return f("","")}))})).addItem((function(e){return e.setTitle(s$.actionAddNote()).setSection("action").onClick((function(){u=!0,new hX(n.canvas,(function(e){u=!0,p(e,"")}),h).open()}))})),n instanceof m$){var m=n.file,v=[];KS(r.getFileCache(m).links,(function(e){var t=WS(e.link),n=t.path,i=t.subpath,o=r.getFirstLinkpathDest(n,m.path);o&&v.push(p$(o,i))}));for(var b=0,w=n.getConnectedFiles(),k=function(e){return w.has(e)?"continue":(w.add(e),c.addItem((function(t){return t.setTitle(e).setSection("file").onClick((function(){return f(e,m.path)}))})),++b>=20?"break":void 0)},C=0,M=v;C<M.length;C++){if("break"===k(M[C]))break}}n.app.workspace.trigger("canvas:node-connection-drop-menu",c,n,l),c.showAtMouseEvent(e)}},cancel:function(){i.removeEdge(l)},cleanup:function(){i.canvasEl.removeClass("is-connecting")}})})))},e.prototype.onResizeDblclick=function(e,t){},e.prototype.getConnectedFiles=function(){for(var e=this.canvas,t=new Set,n=0,i=e.edgeFrom.getArray(this);n<i.length;n++){var r=i[n],o=r.to.node;r.from.node===this&&o instanceof m$&&o.file&&t.add(p$(o.file,o.subpath))}return t},e}(),h$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContentMounted=!1,t.alwaysKeepLoaded=!1,t}return f(t,e),t.prototype.attach=function(){var t=!this.nodeEl.parentNode;e.prototype.attach.call(this),t&&this.contentEl&&ik(this.contentEl)},t.prototype.preDetach=function(){this.alwaysKeepLoaded||this.nodeEl.parentNode&&this.contentEl&&tk(this.contentEl)},t.prototype.detach=function(){this.alwaysKeepLoaded||e.prototype.detach.call(this)},t.prototype.updateBreakpoint=function(t){e.prototype.updateBreakpoint.call(this,t),t?this.mountContent():this.unmountContent()},t.prototype.mountContent=function(){var e=this.initialized,t=this.containerEl;e&&!this.isContentMounted&&(t.appendChild(this.contentEl),t.appendChild(this.contentBlockerEl),this.placeholderEl.detach(),this.isContentMounted=!0,ik(this.contentEl))},t.prototype.unmountContent=function(){this.alwaysKeepLoaded||this.initialized&&this.isContentMounted&&(tk(this.contentEl),this.contentEl.detach(),this.contentBlockerEl.detach(),this.containerEl.appendChild(this.placeholderEl),this.isContentMounted=!1)},t.prototype.initialize=function(){e.prototype.initialize.call(this),this.contentEl=createDiv("canvas-node-content"),this.contentBlockerEl=createDiv("canvas-node-content-blocker"),this.placeholderEl=this.containerEl.createDiv("canvas-node-placeholder")},t}(u$),d$=function(e){function t(t){var n=e.call(this,t,oc(16))||this;return n.nodeEl.addClass("is-dummy"),n}return f(t,e),t}(u$);function p$(e,t){return e.path+t}var f$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizeDirty=!1,t}return f(t,e),t.prototype.initialize=function(){var t=this;e.prototype.initialize.call(this);var n=function(e){var t=e.doc.activeElement;if(["INPUT","BUTTON"].contains(t.tagName))return!0;if(t.hasClass("inline-title"))return!0;var n=e.targetNode;return!(!n.instanceOf(Element)||!n.closest(".collapse-indicator"))};this.containerEl.addEventListener("dblclick",(function(e){if(!e.defaultPrevented){var i=t.child;i instanceof nH&&!i.editMode&&!n(e)&&t.startEditing(Bl(e))}})),lk(this.contentEl,(function(e){t.destroyed||n(e)||t.startEditing(Bl(e))}))},t.prototype.blur=function(){e.prototype.blur.call(this);var t=this.child;this.app.workspace;(t instanceof g$||t instanceof uV)&&(t.showPreview(!0),t.applyScope(null))},t.prototype.focus=function(){e.prototype.focus.call(this);var t=this.app.workspace,n=this.child instanceof nH?this.child:null;t.activeEditor=n;var i=null;this instanceof m$&&(i=this.file),this.canvas.requestUpdateFileOpen(i)},t.prototype.destroy=function(){e.prototype.destroy.call(this);var t=this.child;(t instanceof g$||t instanceof uV)&&t.applyScope(null),this.unloadChild()},t.prototype.unloadChild=function(){this.aspectRatio=0,this.child&&(this.child.unload(),this.child=null,this.alwaysKeepLoaded=!1),this.contentEl&&this.contentEl.empty(),this.setIsEditing(!1)},t.prototype.startEditing=function(t){e.prototype.startEditing.call(this);var n=this.child;!this.canvas.readonly&&n instanceof nH&&(n.showEditor(t),this.setIsEditing(!0))},t.prototype.isEditable=function(){return this.child instanceof nH},t.prototype.onClick=function(t){var n=this.child;this.canvas.readonly||(n instanceof nH?this.setIsEditing(!!n.editMode):this.setIsEditing(!1)),e.prototype.onClick.call(this,t)},t.prototype.onResizeDblclick=function(t,n){t.preventDefault(),e.prototype.onResizeDblclick.call(this,t,n);var i=this.child;if(i instanceof nH){var r=i.previewMode.renderer.previewEl;if(!r.isShown())return;if("top"===n||"bottom"===n){for(var o=0;o<10;o++){var a=r.clientHeight;r.style.height="1px";var s=r.scrollHeight;r.style.height="";var l=s-a+1;if(Math.abs(l)<.5)break;this.resize({width:this.width,height:this.height+l}),this.render(),this.canvas.requestSave()}return}r.style.height="1px";try{var c=r.scrollHeight+.1,u=this.width,h=0,d=u;for(o=0;o<10;o++){var p=Math.round((h+d)/2);if(this.resize({width:p,height:this.height}),this.render(),r.scrollHeight>c?h=p:d=p,d-h<1)break}this.resize({width:d,height:this.height}),r.scrollHeight>c?(this.resize({width:u,height:this.height}),this.render()):this.canvas.requestSave()}finally{r.style.height=""}}},t.prototype.moveAndResize=function(t){var n=this,i=n.width,r=n.height;n.child instanceof nH&&(i!==t.width||r!==t.height)&&(this.resizeDirty=!0),e.prototype.moveAndResize.call(this,t)},t.prototype.render=function(){e.prototype.render.call(this);var t=this.child;this.resizeDirty&&t instanceof nH&&t.previewMode.renderer.onResize(),this.resizeDirty=!1},t}(h$),m$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filePath="",t.subpath="",t.file=null,t}return f(t,e),t.prototype.initFile=function(){var e=this,t=e.filePath,n=e.file,i=e.app;if(t&&(null==n?void 0:n.path)!==t){this.file=null;var r=i.vault.getAbstractFileByPath(t);r instanceof ww&&(this.file=r)}},t.prototype.getData=function(){return m(m({},e.prototype.getData.call(this)),{type:"file",file:this.file?this.file.path:this.filePath,subpath:this.subpath||void 0})},t.prototype.setData=function(t){e.prototype.setData.call(this,t);var n=t.file,i=t.subpath;n&&this.setFilePath(n,i||"")},t.prototype.setFilePath=function(e,t){this.filePath===e&&this.subpath===t||(this.filePath=e,this.file&&this.file.path===e&&this.subpath===t||(this.subpath=t,this.initFile(),this.unloadChild()),this.canvas.markDirty(this))},t.prototype.setFile=function(e,t,n){t=t||"",(n||this.filePath!==e.path||this.subpath!==t)&&(this.subpath=t,this.filePath=e.path,this.file!==e&&(this.file=e,this.unloadChild()),this.canvas.markDirty(this))},t.prototype.blur=function(){e.prototype.blur.call(this),this.canvas.requestUpdateFileOpen(null)},t.prototype.focus=function(){e.prototype.focus.call(this),this.child&&this.onFileFocus()},t.prototype.onFileFocus=function(){var e=this.app.workspace,t=this.child instanceof nH?this.child:null;e.activeEditor=t,this.canvas.requestUpdateFileOpen(this.file)},t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.updateNodeLabel=function(e){var t=this,n=t.labelEl,i=t.canvas,r=t.nodeEl,o=i.options.cardLabelVisibility;"never"!==o?(n||((n=this.labelEl=r.createDiv("canvas-node-label")).addEventListener("click",this.onLabelClick.bind(this)),n.addEventListener("dblclick",this.onLabelDblClick.bind(this)),n.addEventListener("pointerdown",this.onPointerdown.bind(this))),n.toggleClass("mod-hover-label","hover"===o),n.setText(e)):n&&(n.detach(),this.labelEl=null)},t.prototype.updateBreakpoint=function(e){if(e)this.mountContent();else{var t=this.child;t instanceof nV||t instanceof W$?this.mountContent():this.unmountContent()}},t.prototype.render=function(){var t=this;e.prototype.render.call(this);var n=this,i=n.file,r=n.filePath,o=n.subpath;if(i){var a=i.getShortName();o&&"md"===i.extension&&(a+=" â€º "+o.substring(1)),this.updateNodeLabel(a),this.placeholderEl.setText(a)}else this.updateNodeLabel(createFragment((function(e){mx(e.createSpan(),"lucide-alert-triangle"),e.createSpan({text:r})}))),this.placeholderEl.setText(r);if(!this.child){var s,l={app:this.app,linktext:this.filePath+this.subpath,sourcePath:"",containerEl:this.contentEl,depth:0};i?(s=this.child=cV.load(l))instanceof uV&&(s.editable=!0,s.useIframe=!0):s=this.child=new b$(l,this,(function(){return t.render()})),this.isFocused&&this.onFileFocus(),s.load(),g(t,void 0,void 0,(function(){var e,t,n,i,r,o,a,l=this;return y(this,(function(c){switch(c.label){case 0:return[4,s.loadFile()];case 1:return c.sent(),s instanceof NH&&s.viewer.then((function(e){var t=e.pdfViewer,n=e.toolbar;t.setHeight("auto"),n.toolbarRightEl.createDiv("clickable-icon",(function(n){mx(n,"lucide-file-symlink"),Rx(n,Qf.pdf.actionSavePDFLocation()),e.on("pagechanging",mc((function(){l.subpath!=="#page=".concat(t.page)?n.setAttr("aria-disabled","false"):"true"!==n.getAttr("aria-disable")&&n.setAttr("aria-disabled","true")}),100,!0)),n.addEventListener("click",(function(){l.subpath="#page=".concat(t.page),l.canvas.requestSave(),n.setAttr("aria-disabled","true")}))}))})),(e=this.contentEl.firstChild)?(t=null,e.instanceOf(HTMLImageElement)?(t={width:e.naturalWidth,height:e.naturalHeight},e.draggable=!1):e.instanceOf(HTMLVideoElement)?t={width:e.videoWidth,height:e.videoHeight}:e.instanceOf(HTMLAudioElement)&&(n=function(){l.resize({width:l.width,height:e.clientHeight||42})},e.isShown()||e.onNodeInserted(n,!0),n()),t&&0!==t.height&&(i=this.aspectRatio=t.width/t.height,o=(r=this).width,a=r.height,o/a!==i&&(this.resize({width:Math.min(o,a*i),height:Math.min(a,o/i)}),this.canvas.overrideHistory())),[2]):[2]}}))}))}},t.prototype.onLabelClick=function(e){var t=Ak.isModEvent(e);t&&this.app.workspace.getLeaf(t).openLinkText(this.filePath+this.subpath,"")},t.prototype.onLabelDblClick=function(e){this.app.workspace.getLeaf(!1).openLinkText(this.filePath+this.subpath,"")},t.prototype.onPointerdown=function(t){var n;this.child instanceof NH&&t.targetNode.instanceOf(HTMLElement)&&(null===(n=t.targetNode.parentElement)||void 0===n?void 0:n.hasClass("textLayer"))||e.prototype.onPointerdown.call(this,t)},t.prototype.showMenu=function(t){var n=this;e.prototype.showMenu.call(this,t);var i=this,r=i.file,o=i.child,a=i.canvas;a.readonly||t.addItem((function(e){return e.setSection("canvas").setTitle(s$.actionSwapFile()).setIcon(r?"lucide-arrow-left-right":"lucide-wrench").onClick((function(){var e=!r||"md"===r.extension||"canvas"===r.extension,t=!r||"md"!==r.extension;new hX(n.canvas,(function(e){n.setFile(e,""),n.canvas.requestSave()})).showMarkdownAndCanvas(e).showAttachments(t).open()}))})),r&&("md"===r.extension&&t.addItem((function(e){return e.setSection("open").setTitle(a$.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(){n.app.workspace.getLeaf("tab").openFile(r)}))})),!a.readonly&&o instanceof uV&&t.addItem((function(e){return e.setSection("canvas").setTitle(a$.menu.edit()).setIcon("lucide-edit").onClick((function(){return n.startEditing()}))})),a.readonly||"md"!==r.extension||(t.addItem((function(e){return e.setSection("canvas").setIcon("lucide-minimize-2").setTitle(s$.actionNarrowHeading()).onClick((function(){new l$(n.app,r,"heading",(function(e){var t=fF(e),i=t.path,r=t.subpath;n.setFilePath(i,r),n.canvas.requestSave()})).open()}))})),t.addItem((function(e){return e.setSection("canvas").setIcon("lucide-minimize-2").setTitle(s$.actionNarrowBlock()).onClick((function(){new l$(n.app,r,"block",(function(e){if("block"===e.type&&!e.node.id){var t=e.content,i=e.file,r=e.node.id=oc(6),o=GD(e,r),a=o.blockEnd,s=o.addition;t=t.slice(0,a)+s+t.slice(a),n.app.vault.modify(i,t)}var l=fF(e),c=l.path,u=l.subpath;n.setFilePath(c,u),n.canvas.requestSave()})).open()}))}))),this.subpath||(t.addItem((function(e){return e.setSection("action").setTitle(Qf.plugins.fileExplorer.menuOptRename()).setIcon("lucide-edit-3").onClick((function(){return n.app.fileManager.promptForFileRename(r)}))})),this.app.workspace.trigger("file-menu",t,r,"canvas-menu")))},t}(f$),v$=function(e){function t(t,n){void 0===n&&(n=oc(16));var i=e.call(this,t,n)||this;return i.text="",i}return f(t,e),t.prototype.getData=function(){return m(m({},e.prototype.getData.call(this)),{type:"text",text:this.text})},t.prototype.setData=function(t){e.prototype.setData.call(this,t);var n=t.text;String.isString(n)&&this.setText(n)},t.prototype.setText=function(e){this.text!==e&&(this.text=e,this.child&&this.child.set(e))},t.prototype.initialize=function(){e.prototype.initialize.call(this),mx(this.placeholderEl.createDiv("canvas-icon-placeholder"),"lucide-align-left")},t.prototype.render=function(){e.prototype.render.call(this),this.child||(this.child=new g$(this),this.child.set(this.text),this.child.load())},t.prototype.showMenu=function(t){var n=this;(e.prototype.showMenu.call(this,t),this.canvas.readonly)||this.child&&t.addItem((function(e){return e.setSection("canvas").setTitle(a$.menu.edit()).setIcon("lucide-edit").onClick((function(){return n.startEditing()}))})).addItem((function(e){return e.setSection("canvas").setTitle(s$.actionConvertToFile()).setIcon("lucide-file-input").onClick((function(){return n.convertToFile()}))}))},t.prototype.convertToFile=function(){var e=this,t=this.canvas,n=this.text,i=t.view.file.path;new tL(this.app,"Untitled",(function(t){return g(e,void 0,void 0,(function(){var e,r,o,a,s,l,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:r=(e=this).app,o=e.canvas,a=r.fileManager.getNewFileParent(i,t),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,r.fileManager.createNewMarkdownFile(a,t,n)];case 2:for(s=p.sent(),l=o.createFileNode({pos:this,size:this,file:s,save:!1,focus:!1}),c=o.getEdgesForNode(this),u=0,h=c;u<h.length;u++)(d=h[u]).from.node===this&&d.update(m(m({},d.from),{node:l}),d.to),d.to.node===this&&d.update(d.from,m(m({},d.to),{node:l}));return o.removeNode(this),o.selectOnly(l),o.requestSave(),[3,4];case 3:return[2,p.sent()];case 4:return[2]}}))}))})).open()},t}(f$),g$=function(e){function t(t){var n=e.call(this,t.app,t.contentEl,null)||this;return n.editable=!0,n.useIframe=!0,n.scope=null,n.node=t,n.containerEl.addClass("markdown-embed"),n}return f(t,e),t.prototype.save=function(t,n){void 0===n&&(n=!1),e.prototype.save.call(this,t,n),n&&this.node.text!==t&&(this.node.text=t,this.node.canvas.requestSave())},t.prototype.applyScope=function(e){e!==this.scope&&(this.scope&&this.app.keymap.popScope(this.scope),e&&this.app.keymap.pushScope(e),this.scope=e)},t.prototype.onunload=function(){e.prototype.onunload.call(this),this.applyScope(null)},Object.defineProperty(t.prototype,"linktext",{get:function(){var e=this.node;return e.canvas.view.file.path+"#^"+e.id},enumerable:!1,configurable:!0}),t.prototype.getFoldInfo=function(){return this.app.foldManager.loadPath(this.linktext)},t.prototype.onMarkdownFold=function(){var e="preview"===this.getMode()?this.previewMode.renderer.getFoldInfo():this.editMode.getFoldInfo();this.app.foldManager.savePath(this.linktext,e)},t}(nH),y$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="",t.alwaysKeepLoaded=!0,t}return f(t,e),t.prototype.getData=function(){return m(m({},e.prototype.getData.call(this)),{type:"link",url:this.url})},t.prototype.setData=function(t){e.prototype.setData.call(this,t);var n=t.url;n&&this.setUrl(n)},t.prototype.setUrl=function(e){this.url!==e&&(this.url=e,this.canvas.markDirty(this),this.setFrameUrl())},t.prototype.recreateFrame=function(){var e,t=this;if(this.frameEl&&this.frameEl.detach(),Zl.isDesktopApp){var n=this.contentEl,i=n.doc,r=i.createElement("webview"),o=this.app.getWebviewPartition();electron.ipcRenderer.send("create-browser-session",o,null),r.partition=o,r.addClass("canvas-link"),r.allowpopups=!0,e=this.frameEl=r,r.addEventListener("did-frame-finish-load",(function(){t.updateNodeLabel(r.getTitle())})),r.addEventListener("destroyed",(function(){i!==n.doc&&(r.detach(),t.recreateFrame())})),i.contains(n)?n.appendChild(r):n.onNodeInserted((function(){n.doc===i?n.appendChild(r):t.recreateFrame()}),!0)}else(e=this.frameEl=this.contentEl.createEl("iframe","canvas-link")).setAttr("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals"),e.setAttr("allow","fullscreen");e.style.width="100%",e.style.height="100%",this.setFrameUrl()},t.prototype.initialize=function(){e.prototype.initialize.call(this),this.recreateFrame()},t.prototype.updateNodeLabel=function(e){var t=this,n=this,i=n.labelEl,r=n.canvas,o=n.nodeEl,a=r.options.cardLabelVisibility;"never"!==a?(i||((i=this.labelEl=o.createDiv("canvas-node-label")).addEventListener("click",this.onLabelClick.bind(this)),i.addEventListener("dblclick",(function(){window.open(t.url,"_blank")})),i.addEventListener("pointerdown",this.onPointerdown.bind(this))),i.toggleClass("mod-hover-label","hover"===a),i.setText(e)):i&&(i.detach(),this.labelEl=null)},t.prototype.onLabelClick=function(e){Ak.isModifier(e,"Mod")&&window.open(this.url,"_blank")},t.prototype.setFrameUrl=function(){var e=this.frameEl,t=this.url;if(e&&(this.updateNodeLabel(t),/^https?:\/\//.test(t))){var n=BO(t);if(n&&(t=n),e.src=t,Bf(e)&&e.isShown())try{e.loadURL(t)}catch(e){}}},t.prototype.showMenu=function(t){var n=this;e.prototype.showMenu.call(this,t),this.canvas.readonly||t.addItem((function(e){return e.setSection("canvas").setTitle(s$.actionChangeUrl()).setIcon("lucide-link").onClick((function(){new o$(n.app,n.url,(function(e){n.setUrl(e),n.canvas.requestSave()})).open()}))})),t.addItem((function(e){return e.setSection("canvas").setTitle(Qf.interface.menu.openInBrowser()).setIcon("lucide-globe").onClick((function(){window.open(n.url,"_blank")}))})).addItem((function(e){return e.setSection("canvas").setTitle(Qf.interface.menu.copyUrl()).setIcon("lucide-copy").onClick((function(){yc(n.url),new JA(Qf.interface.copied({item:Qf.interface.url()}))}))})).addItem((function(e){return e.setSection("canvas").setTitle(s$.actionReloadPage()).setIcon("lucide-rotate-ccw").onClick((function(){var e=n.frameEl;if(Bf(e))try{e.loadURL(n.url)}catch(e){}else e.src=n.url}))}))},t}(h$),b$=function(e){function t(t,n,i){var r=e.call(this)||this;return r.file=null,r.ctx=t,r.node=n,r.reload=i,r.containerEl=t.containerEl,r}return f(t,e),t.prototype.loadFile=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l;return y(this,(function(c){return t=(e=this).containerEl,n=e.ctx,i=n.app,r=n.linktext,o=n.sourcePath,a=e.node,s=a.canvas,a.contentBlockerEl.detach(),l=WS(r).path,t.createDiv("canvas-empty-embed-container",(function(e){e.createDiv({cls:"canvas-empty-embed-label",text:s$.labelEmptyEmbed({linktext:r})}),e.createDiv("canvas-empty-embed-action-list",(function(e){var t=Qc(l);"md"!==t&&""!==t||e.createEl("button",{cls:"empty-state-action",text:Qf.interface.emptyState.createNewFile()},(function(e){e.addEventListener("click",(function(){i.fileManager.createNewMarkdownFileFromLinktext(r,o)}))})),e.createEl("button",{cls:"empty-state-action",text:s$.actionSwapFile()},(function(e){e.addEventListener("click",(function(e){new hX(a.canvas,(function(e){a.setFile(e,""),s.requestSave()})).open()}))})),e.createEl("button",{cls:"empty-state-action mod-warning",text:s$.actionRemove()},(function(e){e.addEventListener("click",(function(e){s.removeNode(a),s.requestSave()}))}))}))})),t.addClass("mod-canvas-empty"),[2]}))}))},t.prototype.onload=function(){var e=this,t=this.ctx,n=t.app,i=t.linktext,r=mc((function(t){var n=WS(i),r=n.path,o=n.subpath;t instanceof ww&&t.path===r&&e.node.setFile(t,o,!0)}));this.registerEvent(n.vault.on("create",r)),this.registerEvent(n.vault.on("rename",r))},t.prototype.onClick=function(e){var t=this.ctx,n=t.app,i=t.linktext,r=t.sourcePath;n.workspace.openLinkText(i,r,Ak.isModEvent(e))},t}(xA),w$=function(e){function t(t,n){void 0===n&&(n=oc(16));var i=e.call(this,t,n)||this;return i.label="",i.bgPath="",i.bgStyle="",i.nodeEl.addClass("canvas-node-group"),i}return f(t,e),t.prototype.getData=function(){var t=m(m({},e.prototype.getData.call(this)),{type:"group"}),n=this,i=n.label,r=n.bgPath,o=n.bgFile,a=n.bgStyle;return i&&(t.label=i),r&&(t.background=o?o.path:r,a&&"cover"!==a&&(t.backgroundStyle=a)),t},t.prototype.setData=function(t){var n=t.label,i=t.background,r=v(t,["label","background"]);e.prototype.setData.call(this,r);var o=t.backgroundStyle;if(n&&String.isString(n)&&this.setLabel(n),o||(o=""),i&&String.isString(i)){if(this.bgPath!==i||this.bgFile&&this.bgFile.path!==i){this.bgPath=i;var a=this.app.vault.getAbstractFileByPath(i);this.bgFile=a instanceof ww?a:null,this.canvas.markDirty(this)}this.bgStyle!==o&&(this.bgStyle=o,this.canvas.markDirty(this))}else this.bgPath&&(this.bgPath="",this.bgFile=null,this.bgStyle="",this.canvas.markDirty(this));this.updateAspectRatio()},t.prototype.setLabel=function(e){this.label!==e&&(this.label=e,this.canvas.markDirty(this))},t.prototype.setBackgroundFile=function(e){var t=e?e.path:"";this.bgPath===t&&this.bgFile===e||(this.bgPath=t,this.bgFile=e,e||(this.bgStyle=""),this.updateAspectRatio(),this.canvas.markDirty(this))},t.prototype.setBackgroundStyle=function(e){this.bgPath||(e=""),this.bgStyle!==e&&(this.bgStyle=e,this.updateAspectRatio(),this.canvas.markDirty(this))},t.prototype.initialize=function(){var t=this;e.prototype.initialize.call(this),this.contentEl=this.containerEl.createDiv("canvas-node-content");var n=this.labelEl=this.nodeEl.createDiv("canvas-group-label");n.spellcheck=!1,n.addEventListener("pointerdown",this.onPointerdown.bind(this)),n.addEventListener("dblclick",(function(){return t.focusLabel()})),n.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(e.preventDefault(),t.blurLabel())})),n.addEventListener("blur",(function(){return t.blurLabel()}))},t.prototype.focusLabel=function(){var e=this.labelEl;e&&(e.show(),e.setAttr("contenteditable",!0),Sw(e))},t.prototype.blur=function(){e.prototype.blur.call(this),this.blurLabel()},t.prototype.blurLabel=function(){var e=this.labelEl;if(e){e.setAttr("contenteditable",!1),e.blur();var t=e.getText();this.label!==t?(this.setLabel(t),this.canvas.requestSave()):(e.toggle(!!t),e.setText(t))}},t.prototype.render=function(){e.prototype.render.call(this);var t=this,n=t.labelEl,i=t.label,r=t.color;n.toggle(!!i),n.setText(i);var o=!1,a=!1;if(r){var s=void 0;if(kX.test(r)){var l=n.getCssPropertyValue("--canvas-color-".concat(r));s=OI("rgb(".concat(l,")"))}else s=OI(r);s&&(BI(s)?a=!0:o=!0)}n.toggleClass("mod-foreground-light",o),n.toggleClass("mod-foreground-dark",a);var c=this,u=c.app,h=c.bgFile,d=c.bgStyle,p=c.contentEl;if(h){var f={backgroundImage:'url("'.concat(CSS.escape(u.vault.getResourcePath(h)),'")'),backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover"};"repeat"===d&&(f.backgroundRepeat="repeat",f.backgroundPosition="top left",f.backgroundSize="auto"),p.setCssStyles(f)}else p.setCssStyles({backgroundImage:"",backgroundRepeat:"",backgroundPosition:"",backgroundSize:""})},t.prototype.updateAspectRatio=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return t=(e=this).bgFile,"ratio"===e.bgStyle&&t?(i=(n=this).app,r=n.canvas,o=n.width,a=n.height,[4,Cc(i.vault.getResourcePath(t))]):(this.aspectRatio=0,[2]);case 1:return(s=c.sent())&&0!==s.height&&(l=this.aspectRatio=s.width/s.height,o/a!==l&&(this.resize({width:Math.min(o,a*l),height:Math.min(a,o/l)}),r.overrideHistory())),[2]}}))}))},t.prototype.updateZIndex=function(){this.renderZIndex()},t.prototype.renderZIndex=function(){var e=this.zIndex=Math.round(-this.width*this.height);this.nodeEl.style.zIndex=String(e)},t.prototype.isEditable=function(){return!0},t.prototype.startEditing=function(){e.prototype.startEditing.call(this),this.canvas.readonly||this.focusLabel()},t.prototype.showMenu=function(t){var n=this;e.prototype.showMenu.call(this,t),this.canvas.readonly||t.addItem((function(e){return e.setSection("canvas").setTitle(s$.actionEditLabel()).setIcon("lucide-edit").onClick((function(){return n.startEditing()}))}))},t}(u$),k$=Qf.plugins.canvas;function C$(e,t){var n=oX(e.getBBox()),i=oX(t.getBBox()),r=Math.atan2(i.y-n.y,i.x-n.x),o=Math.atan2(e.height,e.width);return r>-o&&r<=o?"right":r>o&&r<=Math.PI-o?"bottom":r>Math.PI-o||r<=-(Math.PI-o)?"left":"top"}function M$(e,t){switch(t){case"top":return Ol((e.minX+e.maxX)/2,e.minY);case"right":return Ol(e.maxX,(e.minY+e.maxY)/2);case"bottom":return Ol((e.minX+e.maxX)/2,e.maxY);case"left":return Ol(e.minX,(e.minY+e.maxY)/2)}}function E$(e,t){var n=m({},e);switch(t){case"top":n.y-=7;break;case"bottom":n.y+=7;break;case"left":n.x-=7;break;case"right":n.x+=7}return n}function S$(e,t,n){switch(e){case"left":return{x:t.x-n,y:t.y};case"right":return{x:t.x+n,y:t.y};case"top":return{x:t.x,y:t.y-n};case"bottom":return{x:t.x,y:t.y+n}}}function x$(e,t,n,i){var r=Hl(e,n),o=Math.clamp(r/2,70,150),a=S$(t,e,o),s=S$(i,n,o);return{from:e,to:n,cp1:a,cp2:s,path:"M".concat(e.x,",").concat(e.y," C").concat(a.x,",").concat(a.y," ").concat(s.x,",").concat(s.y," ").concat(n.x,",").concat(n.y)}}var T$={top:"180",bottom:"0",left:"90",right:"270"},D$="none",A$="arrow",L$=function(){function e(e,t,n,i){this.color="",this.label="",this.unknownData={},this.initialized=!1,this.canvas=e,this.id=t,this.from=n,this.to=i,this.lineGroupEl=createSvg("g"),this.lineEndGroupEl=createSvg("g")}return e.prototype.attach=function(){this.isAttached||(this.canvas.edgeContainerEl.appendChild(this.lineGroupEl),this.canvas.edgeEndContainerEl.appendChild(this.lineEndGroupEl))},e.prototype.detach=function(){this.isAttached&&(this.lineGroupEl.detach(),this.lineEndGroupEl.detach())},Object.defineProperty(e.prototype,"isAttached",{get:function(){return!!this.lineGroupEl.parentNode},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e,t,n;null===(e=this.labelElement)||void 0===e||e.destroy(),null===(t=this.lineGroupEl)||void 0===t||t.remove(),null===(n=this.lineEndGroupEl)||void 0===n||n.remove()},e.prototype.getData=function(){var e=this,t=e.id,n=e.from,i=e.to,r=e.color,o=e.label,a=e.unknownData,s=m(m({},a),{id:t,fromNode:n.node.id,fromSide:n.side,toNode:i.node.id,toSide:i.side});return n.end!==D$&&(s.fromEnd=n.end),i.end!==A$&&(s.toEnd=i.end),r&&(s.color=r),o&&(s.label=o),s},e.prototype.setData=function(e){var t=e.fromNode,n=e.fromSide,i=e.fromEnd,r=e.toNode,o=e.toSide,a=e.toEnd,s=e.color,l=e.label,c=v(e,["fromNode","fromSide","fromEnd","toNode","toSide","toEnd","color","label"]),u=!1;s=EX(s||""),this.color!==s&&(this.color=s,u=!0),this.label!==l&&(this.label=l,u=!0);var h=this.canvas,d=h.nodes,p=!1;t&&t!==this.from.node.id&&d.has(t)&&(p=!0,this.from.node=d.get(t)),i=i||D$,t&&i!==this.from.end&&(this.from.end=i,u=!0),r&&r!==this.to.node.id&&d.has(r)&&(p=!0,this.to.node=d.get(r)),a=a||A$,r&&a!==this.to.end&&(this.to.end=a,u=!0),t&&(n=null!=n?n:C$(this.from.node,this.to.node))!==this.from.side&&(this.from.side=n,u=!0),r&&(o=null!=o?o:C$(this.to.node,this.from.node))!==this.to.side&&(this.to.side=o,u=!0),p&&h.markMoved(this),u&&h.markDirty(this),this.unknownData=c},e.prototype.setColor=function(e,t){void 0===t&&(t=!1),e=EX(e||""),this.color!==e&&(this.color=e,t?this.render():this.canvas.markDirty(this))},e.prototype.setLabel=function(e){this.label!==e&&(this.label=e)},e.prototype.update=function(e,t){var n=this.canvas;this.from.node!==e.node&&(n.edgeFrom.delete(this.from.node,this),e.node instanceof d$||n.edgeFrom.add(e.node,this)),this.to.node!==t.node&&(n.edgeTo.delete(this.to.node,this),t.node instanceof d$||n.edgeTo.add(t.node,this)),this.from=e,this.to=t,n.markMoved(this)},e.prototype.getBBox=function(){var e=this.from,t=this.to,n=M$(e.node.getBBox(),e.side),i=M$(t.node.getBBox(),t.side);return{minX:Math.min(n.x,i.x),minY:Math.min(n.y,i.y),maxX:Math.max(n.x,i.x),maxY:Math.max(n.y,i.y)}},e.prototype.focus=function(){this.select()},e.prototype.blur=function(){var e;this.deselect(),null===(e=this.labelElement)||void 0===e||e.blur()},e.prototype.select=function(){this.lineGroupEl.addClass("is-focused"),this.lineEndGroupEl.addClass("is-focused")},e.prototype.deselect=function(){this.lineGroupEl.removeClass("is-focused"),this.lineEndGroupEl.removeClass("is-focused")},e.prototype.editLabel=function(){this.labelElement||(this.labelElement=new P$(this)),this.labelElement.focus()},e.prototype.getCenter=function(){return function(e,t){var n=t.from,i=t.to,r=t.cp1,o=t.cp2,a=1-e,s=a*a*a,l=3*e*a*a,c=3*e*e*a,u=e*e*e;return{x:s*n.x+l*r.x+c*o.x+u*i.x,y:s*n.y+l*r.y+c*o.y+u*i.y}}(.5,this.bezier)},e.prototype.initialize=function(){var e=this,t=this.lineGroupEl;t.addEventListener("click",(function(t){return e.onClick(t)})),t.addEventListener("contextmenu",(function(t){return e.onContextMenu(t)})),t.addEventListener("pointerdown",(function(t){return e.onConnectionPointerdown(t)})),this.path={interaction:t.createSvg("path","canvas-interaction-path"),display:t.createSvg("path","canvas-display-path")}},e.prototype.render=function(){var e;this.initialized||(this.initialized=!0,this.initialize());var t=this,n=t.lineGroupEl,i=t.lineEndGroupEl,r=t.color,o=t.label;this.updatePath(),this.labelElement&&!o&&this.labelElement.destroy(!0),null===(e=this.labelElement)||void 0===e||e.render(),o&&(this.labelElement||(this.labelElement=new P$(this)),this.labelElement.setText(o)),CX(n,r),CX(i,r),n.toggleClass("is-themed",!!r),i.toggleClass("is-themed",!!r)},e.prototype.updatePath=function(){var e=this,t=e.from,n=e.to,i=e.path,r=e.toLineEnd,o=e.fromLineEnd,a=M$(t.node.getBBox(),t.side),s=E$(a,t.side),l=M$(n.node.getBBox(),n.side),c=E$(l,n.side),u=this.bezier=x$(s,t.side,c,n.side);t.end!==(null==o?void 0:o.type)&&(o&&o.el.detach(),o=this.fromLineEnd=this.createEdgeEnd(t.end)),n.end!==(null==r?void 0:r.type)&&(r&&r.el.detach(),r=this.toLineEnd=this.createEdgeEnd(n.end));var h=u.path;o?o.el.style.transform="translate(".concat(a.x,"px, ").concat(a.y,"px) rotate(").concat(T$[t.side],"deg)"):h="M".concat(a.x," ").concat(a.y," L").concat(s.x," ").concat(s.y," ").concat(h),r?r.el.style.transform="translate(".concat(l.x,"px, ").concat(l.y,"px) rotate(").concat(T$[n.side],"deg)"):h="".concat(h," M").concat(c.x," ").concat(c.y," L").concat(l.x," ").concat(l.y),i.interaction.setAttr("d",h),i.display.setAttr("d",h)},e.prototype.createEdgeEnd=function(e){return"arrow"===e?{el:this.lineEndGroupEl.createSvg("g",{},(function(e){e.createSvg("polygon",{cls:"canvas-path-end",attr:{points:"0,0 6.5,10.4 -6.5,10.4"}})})),type:e}:null},e.prototype.onClick=function(e){var t=this.canvas;0!==e.button||t.readonly||(e.shiftKey?t.toggleSelect(this):1===t.selection.size&&t.selection.has(this)?this.editLabel():t.selectOnly(this))},e.prototype.onContextMenu=function(e){if(!e.defaultPrevented){var t=this.canvas;if(t.selection.has(this)&&t.selection.size>1)t.onSelectionContextMenu(e);else{t.readonly||t.selectOnly(this);var n=(new PA).addSections(["canvas"]);this.showMenu(n,e),e.preventDefault(),n.showAtMouseEvent(e)}}},e.prototype.showMenu=function(e,t){var n=this;this.canvas.readonly||(e.addItem((function(e){return e.setSection("danger").setTitle(k$.actionRemove()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){n.canvas.removeEdge(n),n.canvas.requestSave()}))})),e.addItem((function(e){return e.setSection("canvas").setTitle(k$.actionEditLabel()).setIcon("lucide-edit").onClick((function(){return n.editLabel()}))}))),e.addItem((function(e){return e.setSection("canvas").setTitle(k$.actionFollowConnection()).setIcon("lucide-corner-down-right").onClick((function(){var e=n,i=e.canvas,r=e.from,o=e.to,a=i.posFromEvt(t),s=M$(r.node.getBBox(),r.side),l=M$(o.node.getBBox(),o.side),c="from"===(Hl(a,s)>Hl(a,l)?"to":"from")?o.node:r.node;i.zoomToBbox(c.getBBox())}))})),this.canvas.app.workspace.trigger("canvas:edge-menu",e,this)},e.prototype.onConnectionPointerdown=function(e){var t=this,n=this.canvas;e.isPrimary&&0===e.button&&!n.readonly&&("touch"!==e.pointerType||n.selection.has(this))&&(e.preventDefault(),vk(e,(function(){var n=t,i=n.canvas,r=n.from,o=n.to,a=i.posFromEvt(e),s=M$(r.node.getBBox(),r.side),l=M$(o.node.getBBox(),o.side),c=Hl(a,s)>Hl(a,l)?"to":"from",u="from"===c?o:r,h=new d$(i),d=null;return i.canvasEl.addClass("is-connecting"),i.deselectAll(),t.canvas.handleDragWithPan(e,{move:function(e){var n=i.posFromEvt(e);h.x=n.x,h.y=n.y,h.width=0,h.height=0;var a=i.getIntersectingNodes(iX(h.getBBox(),i.config.objectSnapDistance));a.remove(u.node),d=fX(n,a,i.config.objectSnapDistance),"from"===c?d?t.update({side:d.side,node:d.node,end:r.end},o):t.update({side:r.side,node:h,end:r.end},o):d?t.update(r,{side:d.side,node:d.node,end:o.end}):t.update(r,{side:o.side,node:h,end:o.end})},end:function(){d||i.removeEdge(t),i.requestSave()},cancel:function(){t.update(r,o)},cleanup:function(){i.canvasEl.removeClass("is-connecting"),gk(t.lineGroupEl,"click")}})})))},e}(),P$=function(){function e(e){var t=this;this.isEditing=!1,this.initialTextState="",this.edge=e;var n=e.canvas,i=this.wrapperEl=n.canvasEl.createDiv("canvas-path-label-wrapper");i.addEventListener("click",(function(i){if(!n.readonly){if(i.shiftKey)return t.blur(),void n.toggleSelect(e);var r=n.selection;1===r.size&&r.has(e)?t.isEditing||t.focus(Bl(i)):n.selectOnly(e)}})),this.textareaEl=i.createDiv({parent:i,cls:"canvas-path-label",text:this.edge.label,attr:{contentEditable:!1,"data-placeholder":k$.promptAddText()}},(function(e){e.addEventListener("input",(function(){t.edge.label=e.innerText,t.edge.canvas.requestSave(!1)})),t.edge.label||setTimeout((function(){return t.focus()}))})),this.render()}return e.prototype.setText=function(e){this.textareaEl.setText(e)},e.prototype.focus=function(e){var t,n=this.textareaEl;this.isEditing=!0,n.setAttr("contenteditable",!0),n.addClass("is-editing"),e?t=n.doc.caretRangeFromPoint(e.x,e.y):(t=n.doc.createRange()).selectNodeContents(n);var i=n.win.getSelection();i.removeAllRanges(),i.addRange(t),n.focus(),this.initialTextState=this.edge.label||""},e.prototype.blur=function(){var e=this.textareaEl;this.isEditing=!1,e.blur(),e.setAttr("contenteditable",!1),e.removeClass("is-editing"),this.edge.label?this.initialTextState!==this.edge.label&&this.edge.canvas.requestSave():this.destroy(),this.initialTextState=""},e.prototype.render=function(){var e=this.wrapperEl,t=this.edge.getCenter();e.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)"),CX(e,this.edge.color),e.toggleClass("is-themed",!!this.edge.color)},e.prototype.destroy=function(e){var t=this.edge;t.label&&delete t.label,this.initialTextState&&!e&&t.canvas.requestSave(),this.wrapperEl.remove(),t.labelElement=null},e}(),I$=Qf.plugins.canvas,F$=function(e){function t(t,n){var i=e.call(this,t.app)||this;return i.emptyStateText=I$.msgNoGroupsFound(),i.view=t,i.cb=n,i.setInstructions([{command:"â†‘â†“",purpose:Qf.plugins.templates.instructionNavigate()},{command:"â†µ",purpose:I$.instructionJumpToGroup()},{command:"esc",purpose:Qf.plugins.templates.instructionDismiss()}]),i.setPlaceholder(I$.actionJumpToGroup()),i.scope.register(null,"Tab",(function(){return!1})),i}return f(t,e),t.prototype.getItems=function(){return this.view.canvas.getData().nodes.filter((function(e){return"group"===e.type}))},t.prototype.onChooseItem=function(e){this.cb(e)},t.prototype.getItemText=function(e){return e.label||I$.labelUntitledGroup()},t}(dV),O$=function(e){function t(t){var n=e.call(this)||this;return n.index={},n.fileQueue=[],n.app=t,n}return f(t,e),t.prototype.onload=function(){var e=this.app.vault;this.registerEvent(e.on("create",this.onCreate,this)),this.registerEvent(e.on("modify",this.onModify,this)),this.registerEvent(e.on("rename",this.onRename,this)),this.registerEvent(e.on("delete",this.onDelete,this));for(var t=0,n=e.getFiles();t<n.length;t++){var i=n[t];this.canProcess(i)&&this.queue(i)}},t.prototype.onunload=function(){this.index={},this.fileQueue=[],this.frame&&(this.frame.cancel(),this.frame=null)},t.prototype.onCreate=function(e){e instanceof ww&&this.canProcess(e)&&this.queue(e)},t.prototype.onModify=function(e){e instanceof ww&&this.canProcess(e)&&this.queue(e)},t.prototype.onRename=function(e,t){if(e instanceof ww&&this.canProcess(e)){var n=this.index;if(n.hasOwnProperty(t)){var i=n[t];delete n[t],n[e.path]=i}}},t.prototype.onDelete=function(e){var t=this.index;t.hasOwnProperty(e.path)&&delete t[e.path],e instanceof ww&&this.fileQueue.remove(e)},t.prototype.queue=function(e){this.fileQueue.contains(e)||this.fileQueue.push(e),this.requestFrame()},t.prototype.requestFrame=function(){this.frame||(this.frame=Sc(this.run.bind(this),100))},t.prototype.run=function(){return g(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:if(!((e=this.fileQueue).length>0))return[3,5];t=e.pop(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.process(t)];case 2:return(n=r.sent())&&(this.index[t.path]=n),[3,4];case 3:return i=r.sent(),console.error("Failed to index ".concat(t.path),i),[3,4];case 4:this.frame=null,r.label=5;case 5:return e.length>0&&this.requestFrame(),[2]}}))}))},t.prototype.get=function(e){return this.getForPath(e.path)},t.prototype.getForPath=function(e){return this.index.hasOwnProperty(e)?this.index[e]:null},t.prototype.getAll=function(){return this.index},t}(xA),B$="canvas",N$="canvas",R$=Qf.plugins.canvas,H$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refNodeIds=new WeakMap,t}return f(t,e),t.prototype.canProcess=function(e){return e.extension===N$},t.prototype.process=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return[4,this.app.vault.cachedRead(e)];case 1:if(!(t=d.sent()))return[2,null];if(n=JSON.parse(t),!(i=n.nodes)||!Array.isArray(i))return[2,null];r=[],o={},a=this.refNodeIds,s=function(e){var t,n,i;return y(this,(function(s){switch(s.label){case 0:return"file"!==e.type?[3,1]:(r.push({file:e.file,subpath:e.subpath}),[3,6]);case 1:return"group"===e.type&&e.background?(r.push({file:e.background,subpath:""}),[3,6]):[3,2];case 2:if("text"!==e.type)return[3,6];t=e.text,s.label=3;case 3:return s.trys.push([3,5,,6]),[4,l.parseText(t)];case 4:return GS(n=s.sent(),(function(t){a.set(t,e.id)})),o[e.id]=n,[3,6];case 5:return i=s.sent(),console.error(i),[3,6];case 6:return[2]}}))},l=this,c=0,u=i,d.label=2;case 2:return c<u.length?(h=u[c],[5,s(h)]):[3,5];case 3:d.sent(),d.label=4;case 4:return c++,[3,2];case 5:return[2,{embeds:r,caches:o}]}}))}))},t.prototype.parseText=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e.length<5e3?[2,OS(e)]:(t=hf(e),[4,this.app.metadataCache.computeMetadataAsync(t)]);case 1:return[2,n.sent()]}}))}))},t}(O$),V$=function(){function e(e,t){this.app=e,this.canvas=t}return e.prototype.iterateReferences=function(e){var t=this.canvas.index.getAll(),n=function(n){if(!t.hasOwnProperty(n))return"continue";var i=t[n];for(var r in i.caches){if(i.caches.hasOwnProperty(r))GS(i.caches[r],(function(t){e(n,t)}))}};for(var i in t)n(i)},e.prototype.applyUpdates=function(e,t){return g(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:n=this.canvas.index.refNodeIds,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.app.vault.process(e,(function(e){for(var i=JSON.parse(e),r=new rc,o=0,a=t;o<a.length;o++){var s=a[o],l=n.get(s.reference);l&&r.add(l,s)}for(var c=0,u=i.nodes;c<u.length;c++){var h=u[c];if("text"===h.type){var d=r.get(h.id);d&&(h.text=EL(h.text,d))}}return cc(i)}))];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),console.error(i),[3,4];case 4:return[2]}}))}))},e.prototype.renameSubpath=function(e,t,n){return g(this,void 0,void 0,(function(){var i,r,o,a,s,l,c,u,h,d,p,f,m,v;return y(this,(function(g){switch(g.label){case 0:for(m in i=e.path,r=[],o=this.canvas.index.getAll())if(o.hasOwnProperty(m))for(a=o[m],s=0,l=a.embeds;s<l.length;s++)if((c=l[s]).file===i&&c.subpath)if(u=c.subpath.substring(1),t.startsWith("^")){if(u.toLowerCase()===t){r.push(m);break}}else if($S(u).toLowerCase()===t){r.push(m);break}if(0===r.length)return[2];new JA("Canvas detected file renames affecting ".concat(r.length," canvas files, updating...")),h=this.app.vault,d=0,p=0,f=r,g.label=1;case 1:return p<f.length?(m=f[p],(v=h.getAbstractFileByPath(m))instanceof ww&&v.extension===N$?[4,h.process(v,(function(e){if(!e)return e;for(var r=JSON.parse(e),o=0,a=r.nodes;o<a.length;o++){var s=a[o];if("file"===s.type&&s.file===i&&s.subpath){var l=s.subpath.substring(1);t.startsWith("^")?l.toLowerCase()===t&&(s.subpath="#"+n):$S(l).toLowerCase()===t&&(s.subpath="#"+n)}}return cc(r)}))]:[3,3]):[3,4];case 2:g.sent(),g.label=3;case 3:return p++,[3,1];case 4:return d>0&&new JA("Canvas updated ".concat(d," embed cards.")),[2]}}))}))},e}(),z$=function(){function e(e){this.app=e}return e.prototype.load=function(e){return e?this.app.loadLocalStorage("canvas-"+e.path):null},e.prototype.save=function(e,t){e&&this.app.saveLocalStorage("canvas-"+e.path,t)},e.prototype.handleRename=function(e,t){var n=this.app.loadLocalStorage("canvas-"+e);n&&(this.remove(e),this.save(t,n))},e.prototype.handleDelete=function(e){this.remove(e.path)},e.prototype.remove=function(e){this.app.saveLocalStorage("canvas-"+e,null)},e}(),q$=function(){function e(){var e=this;this.id="canvas",this.name=R$.name(),this.description=R$.desc(),this.defaultOn=!0,this.options={},this.renames=[],this.renameQueue=new cL,this.requestProcessRename=mc((function(){var t=e.renames;e.renames=[],e.renameQueue.queue((function(){return g(e,void 0,void 0,(function(){var e,n,i,r,o,a,s,l,c,u,h,d,p;return y(this,(function(f){switch(f.label){case 0:for(d in e=t.map((function(e){return e[0]})),n=[],i=this.index.getAll())if(i.hasOwnProperty(d))for(r=i[d],o=0,a=r.embeds;o<a.length;o++)if(s=a[o],e.contains(s.file)){n.push(d);break}if(0===n.length)return[2];new JA("Canvas detected file renames affecting ".concat(n.length," canvas files, updating...")),l=this.app.vault,c=0,u=0,h=n,f.label=1;case 1:return u<h.length?(d=h[u],(p=l.getAbstractFileByPath(d))instanceof ww?[4,l.process(p,(function(e){if(!e)return e;for(var n=JSON.parse(e),i=0,r=n.nodes;i<r.length;i++){var o=r[i];if("file"===o.type)for(var a=0,s=t;a<s.length;a++){var l=s[a];o.file===l[0]&&(o.file=l[1],c++)}else if("group"===o.type)for(var u=0,h=t;u<h.length;u++){l=h[u];o.background===l[0]&&(o.background=l[1],c++)}}return cc(n)}))]:[3,3]):[3,4];case 2:f.sent(),f.label=3;case 3:return u++,[3,1];case 4:return c>0&&new JA("Canvas updated ".concat(c," embed cards.")),[2]}}))}))}))}),500,!0)}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerViewType(B$,(function(e){return new U$(e,n)})),t.registerGlobalCommand({id:"canvas:new-file",name:R$.commandCreateNewCanvas(),icon:"lucide-layout-dashboard",callback:function(){return g(n,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=null===(r=this.app.workspace.getActiveFile())||void 0===r?void 0:r.path,n=this.getNewFileParent(t),[4,this.createNewCanvasFile(n)];case 1:return i=o.sent(),[4,e.workspace.getLeaf().openFile(i,{eState:{rename:"all"}})];case 2:return o.sent(),[2]}}))}))}}),Zl.isDesktopApp&&t.registerGlobalCommand({id:"canvas:export-as-image",name:R$.actionExportPng(),icon:"lucide-image",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(U$);return!!t&&(e||t.canvas.generateHDImage(),!0)}}),t.registerGlobalCommand({id:"canvas:jump-to-group",name:R$.actionJumpToGroup(),icon:"lucide-move",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(U$);return!!t&&(e||new F$(t,(function(e){var n=eX(e);t.canvas.zoomToBbox(n)})).open(),!0)}}),t.registerGlobalCommand({id:"canvas:convert-to-file",name:R$.commandConvertToFile(),icon:"lucide-file-input",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(U$);if(t){var i=t.canvas.selection;if(1===i.size){var r=i.values().next().value;if(r instanceof v$)return e||r.convertToFile(),!0}}return!1}}),t.registerRibbonItem(R$.commandCreateNewCanvas(),"lucide-layout-dashboard",(function(){return g(n,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=null===(r=this.app.workspace.getActiveFile())||void 0===r?void 0:r.path,n=this.getNewFileParent(t),[4,this.createNewCanvasFile(n)];case 1:return i=o.sent(),[4,e.workspace.getLeaf().openFile(i,{eState:{rename:"all"}})];case 2:return o.sent(),[2]}}))}))})),this.index=t.addChild(new H$(e)),this.localDataManager=new z$(e)},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.vault.on("rename",this.onRename,this)),t.registerEvent(e.vault.on("delete",this.onDelete,this)),e.fileManager.linkUpdaters[N$]=new V$(e,this),t.register((function(){return delete e.fileManager.linkUpdaters[N$]})),e.viewRegistry.registerExtensions([N$],B$),e.embedRegistry.registerExtension(N$,(function(e,t,n){return new W$(e,t,n)})),e.fileManager.registerFileParentCreator(N$,this.getNewFileParent.bind(this)),n=this,r=(i=Object).assign,o=[{snapToObjects:!0,snapToGrid:!0}],[4,t.loadData()];case 1:return n.options=r.apply(i,o.concat([a.sent()])),t.addSettingTab(new j$(e,t,this)),[2]}}))}))},e.prototype.onDisable=function(e){e.viewRegistry.unregisterExtensions([N$]),e.embedRegistry.unregisterExtension(N$),e.fileManager.unregisterFileCreator(N$)},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},this.rerenderCanvases(),[2]}}))}))},e.prototype.onUserDisable=function(e){e.workspace.detachLeavesOfType(B$)},e.prototype.onDelete=function(e){e instanceof ww&&e.extension===N$&&this.localDataManager.handleDelete(e)},e.prototype.onRename=function(e,t){e instanceof ww&&(e.extension===N$&&this.localDataManager.handleRename(t,e),this.renames.push([t,e.path]),this.requestProcessRename())},e.prototype.onFileMenu=function(e,t,n,i){var r=this;"file-explorer-context-menu"===n&&t instanceof kw&&e.addItem((function(e){return e.setSection("action-primary").setIcon("lucide-layout-dashboard").setTitle(R$.actionNewCanvas()).onClick((function(e){return g(r,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return[4,this.createNewCanvasFile(t)];case 1:return n=r.sent(),i=Ak.isModEvent(e),[4,this.app.workspace.getLeaf(i).openFile(n,{eState:{rename:"all"}})];case 2:return r.sent(),[2]}}))}))}))}))},e.prototype.getNewFileParent=function(e){var t=this.app.vault,n=this.options,i=n.newFileLocation;if("folder"===i){if(null!=(o=n.newFileFolderPath)&&(r=t.getAbstractFileByPath(o))instanceof kw)return r}else if(e&&"current"===i){var r,o=Yc(e);if((r=t.getAbstractFileByPath(o))instanceof kw)return r}return t.getRoot()},e.prototype.createNewCanvasFile=function(e,t,n){return g(this,void 0,void 0,(function(){return y(this,(function(i){return[2,this.app.fileManager.createNewFile(e,t,N$,n)]}))}))},e.prototype.saveOptions=function(){this.plugin.saveData(this.options)},e.prototype.rerenderCanvases=function(){for(var e=0,t=this.app.workspace.getLeavesOfType(B$);e<t.length;e++){var n=t[e].view;n instanceof U$&&n.canvas.rerenderViewport()}},e}(),U$=function(e){function t(t,n){var i=e.call(this,t)||this;i.icon="lucide-layout-dashboard",i.hoverPopover=null,i.isPlaintext=!1,i.plugin=n,i.canvas=new i$(i);var r=i.scope=new Tk(i.app.scope),o=function(e){var t=e.targetNode;return t.instanceOf(HTMLElement)&&"true"===t.contentEditable};r.register(["Mod"],"z",(function(e){o(e)||(e.preventDefault(),i.canvas.undo())})),r.register(["Mod"],"a",(function(e){o(e)||i.canvas.selectAll()}));var a=function(e){o(e)||(e.preventDefault(),i.canvas.redo())};return r.register(["Mod","Shift"],"z",a),r.register(["Mod"],"y",a),r.register(["Shift"],"1",(function(e){o(e)||i.canvas.zoomToFit()})),r.register(["Shift"],"2",(function(e){o(e)||i.canvas.zoomToSelection()})),r.register([],"ArrowRight",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"right"))})),r.register(["Shift"],"ArrowRight",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"right"))})),r.register([],"ArrowLeft",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"left"))})),r.register(["Shift"],"ArrowLeft",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"left"))})),r.register([],"ArrowUp",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"up"))})),r.register(["Shift"],"ArrowUp",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"up"))})),r.register([],"ArrowDown",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"down"))})),r.register(["Shift"],"ArrowDown",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"down"))})),i}return f(t,e),t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return i.sent(),t.viewState&&this.canvas.setState(t.viewState),[2]}}))}))},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.viewState=this.canvas.getState(),t},t.prototype.setEphemeralState=function(t){if(e.prototype.setEphemeralState.call(this,t),t.focus&&this.canvas.wrapperEl.focus(),void 0!==t.match){var n=this.canvas,i=t.match,r=i.nodeId,o=i.content,a=i.matches,s=r&&n.nodes.get(r);if(s&&(n.selectOnly(s),n.panIntoView(s.getBBox()),s instanceof v$&&s.child instanceof g$&&a.length>0)){var l=ac(o,a[0][0]);s.child.previewMode.renderer.applyScrollDelayed(l,{center:!0,highlight:!0})}}},t.prototype.onResize=function(){this.canvas.onResize()},t.prototype.getViewType=function(){return B$},t.prototype.getViewData=function(){return cc(this.canvas.data)},t.prototype.setViewData=function(e,t){var n=this.canvas;if(t&&this.clear(),e?(n.setData(JSON.parse(e)),t&&(n.zoomToFitQueued=!0,n.onResize())):(n.createPlaceholder(),n.requestFrame()),t){var i=this.getLocalData();i&&i.hasOwnProperty("readonly")&&"boolean"==typeof i.readonly&&n.setReadonly(i.readonly)}},t.prototype.clear=function(){this.canvas.clear()},t.prototype.onOpen=function(){return g(this,void 0,Promise,(function(){return y(this,(function(t){return this.canvas.load(),[2,e.prototype.onOpen.call(this)]}))}))},t.prototype.onClose=function(){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e.prototype.onClose.call(this)];case 1:return t.sent(),this.canvas.unload(),[2]}}))}))},t.prototype.handleCut=function(e){this.canvas.handleCut(e)},t.prototype.handleCopy=function(e){this.canvas.handleCopy(e)},t.prototype.handlePaste=function(e){this.canvas.handlePaste(e)},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n),Zl.isDesktopApp&&t.addItem((function(e){return e.setSection("action").setTitle(R$.actionExportPng()).setIcon("lucide-image").onClick((function(){return i.canvas.generateHDImage()}))}))},t.prototype.getLocalData=function(){return this.plugin.localDataManager.load(this.file)},t.prototype.saveLocalData=function(){var e={};this.canvas.readonly&&(e.readonly=!0),0===Object.keys(e).length&&(e=null),this.plugin.localDataManager.save(this.file,e)},t}(Z_);function _$(e,t){var n;try{n=JSON.parse(t)}catch(e){return}var i=n.nodes,r=n.edges;if(i&&0!==i.length){r||(r=[]);for(var o=createSvg("svg","canvas-minimap"),a={},s=[],l=0,c=i;l<c.length;l++){var u=eX(T=c[l]);a[T.id]=u,s.push(u)}for(var h=nX(s),d=function(e){CX(o.createSvg("rect",{attr:{x:e.x,y:e.y,width:e.width,height:e.height,rx:"20",ry:"20"}}),e.color)},p=0,f=i;p<f.length;p++){"group"===(T=f[p]).type&&d(T)}for(var m=Math.sqrt((h.maxX-h.minX)/10),v=0,g=r;v<g.length;v++){var y=g[v],b=a[y.fromNode],w=a[y.toNode];if(b&&w){var k=y.fromSide,C=y.toSide,M=x$(M$(b,k),k,M$(w,C),C),E=o.createSvg("path",{attr:{d:M.path}});E.style.strokeWidth=String(m),CX(E,y.color)}}for(var S=0,x=i;S<x.length;S++){var T;"group"!==(T=x[S]).type&&d(T)}h=iX(h,Math.max(h.maxX-h.minX,h.maxY-h.minY)/20),o.setAttr("viewBox","".concat(h.minX," ").concat(h.minY," ").concat(h.maxX-h.minX," ").concat(h.maxY-h.minY)),e.appendChild(o)}}var W$=function(e){function t(t,n,i){var r=e.call(this)||this,o=r.app=t.app;r.ctx=t;var a=r.containerEl=t.containerEl;return a.addClass("canvas-embed"),r.file=n,r.subpath=i,t.showInline&&(a.addClass("inline-embed"),r.headerEl=a.createDiv({cls:"embed-title"},(function(e){e.createSpan({cls:"file-embed-icon"},(function(e){mx(e,"lucide-layout-dashboard")})),e.appendText(" "+r.file.basename)}))),a.addEventListener("click",(function(e){o.workspace.getLeaf(Ak.isModEvent(e)).openLinkText(t.linktext,t.sourcePath)})),r}return f(t,e),t.prototype.loadFile=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=(e=this).containerEl,n=e.headerEl,t.empty(),n&&t.appendChild(n),i=_$,r=[t],[4,this.app.vault.cachedRead(this.file)];case 1:return i.apply(void 0,r.concat([o.sent()])),[2]}}))}))},t}(xA),j$=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n,i=this.instance.options,r=function(){s.settingEl.toggle("folder"===n.getValue())};new NI(t).setName(R$.optionNewCanvasLocation()).addDropdown((function(t){n=t,t.addOption("root",Qf.setting.file.optionChoiceVaultRoot()).addOption("current",Qf.setting.file.optionChoiceCurrentFolder()).addOption("folder",Qf.setting.file.optionChoiceSpecifiedFolder()).setValue(i.newFileLocation||"root").onChange((function(t){i.newFileLocation=t,e.plugin.saveData(i),r()}))}));var o,a,s=new NI(t).setName(R$.optionNewCanvasFolderPath()).setDesc(R$.optionNewCanvasFolderPathDescription()).addText((function(t){t.setPlaceholder(Qf.setting.folderPathExamplePlaceholder()).setValue("/"===i.newFileFolderPath?"":i.newFileFolderPath).onChange((function(t){i.newFileFolderPath=t,e.plugin.saveData(i)})),new rZ(e.app,t.inputEl,!1,!0)}));new NI(t).setName(R$.optionWheelBehavior()).addDropdown((function(t){return t.addOption("pan",R$.labelPan()).addOption("zoom",R$.labelZoom()).setValue(i.defaultWheelBehavior||"pan").onChange((function(t){i.defaultWheelBehavior=t,e.plugin.saveData(i)}))})),new NI(t).setName(R$.optionModDragBehavior({key:ZZ(["Mod","Drag"])})).addDropdown((function(t){return t.addOption("menu",R$.optionShowMenu()).addOption("card",R$.actionAddCard()).addOption("note",R$.actionAddNote()).addOption("media",R$.actionAddMedia()).addOption("webpage",R$.actionAddWebsite()).addOption("group",R$.actionCreateGroup()).setValue(i.defaultModDragBehavior||"menu").onChange((function(t){i.defaultModDragBehavior=t,e.plugin.saveData(i)}))})),new NI(t).setName(R$.optionNodeLabel()).addDropdown((function(t){return t.addOption("always",R$.labelAlways()).addOption("hover",R$.labelHover()).addOption("never",R$.labelNever()).setValue(i.cardLabelVisibility||"always").onChange((function(t){i.cardLabelVisibility=t,e.plugin.saveData(i),e.instance.rerenderCanvases()}))})),new NI(t).setName(R$.optionSnapToGrid()).setDesc(R$.optionSnapToGridDesc()).addToggle((function(t){return t.setValue(i.snapToGrid).onChange((function(t){i.snapToGrid=t,e.plugin.saveData(i)}))})),new NI(t).setName(R$.optionSnapToObjects()).setDesc(R$.optionSnapToObjectsDesc()).addToggle((function(t){return t.setValue(i.snapToObjects).onChange((function(t){i.snapToObjects=t,e.plugin.saveData(i)}))}));var l=function(e){return a.extraSettingsEl.toggleVisibility(0!==e)};new NI(t).setName(R$.optionZoomBreakpoint()).setDesc(R$.optionZoomBreakpointDesc()).addExtraButton((function(e){return a=e.setIcon("lucide-rotate-ccw").setTooltip(Qf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){o.setValue(0)}))})).addSlider((function(t){return o=t.setLimits(-.7,2.3999999999999995,.01).setValue(i.zoomBreakpoint||0).onChange((function(t){i.zoomBreakpoint=t,e.plugin.saveData(i),l(t)}))})),r(),l(i.zoomBreakpoint||0)},t}(aY),G$=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.commands=i,o.cb=r,o}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.addClass("mod-complex");var n=t.createSpan("suggestion-content"),i=t.createSpan("suggestion-aux"),r=n.createDiv("suggestion-title"),o=e.item,a=o.name,s=a.indexOf(": ");if(-1!==s){var l=a.slice(0,s),c=a.slice(s+2);WL(r.createSpan("suggestion-prefix"),l,e.match),WL(r.createSpan(),c,e.match,-(s+2))}else WL(r.createSpan(),a,e.match);o.icon&&i.createSpan({cls:"suggestion-flair"},(function(e){mx(e,o.icon)}))},t.prototype.getSuggestions=function(e){for(var t=NL(e),n=[],i=0,r=this.commands;i<r.length;i++){var o=r[i],a=t(o.name);a&&n.push({match:a,item:o})}return zL(n),n},t.prototype.selectSuggestion=function(e){this.cb(e.item),this.close()},t}(AF);function K$(e,t){var n=new Map(t.map((function(e,t){return[e,t]})));return e.sort((function(e,t){var i,r;return(null!==(i=n.get(e.id))&&void 0!==i?i:1/0)-(null!==(r=n.get(t.id))&&void 0!==r?r:1/0)}))}var Y$=function(){function e(){this.id="command-palette",this.name=Qf.plugins.commandPalette.name(),this.description=Qf.plugins.commandPalette.desc(),this.defaultOn=!0,this.modal=null,this.options={},this.recentCommands=[],this.plugin=null}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,this.openCallback=this.onOpen.bind(this),t.registerRibbonItem(Qf.plugins.commandPalette.actionOpen(),"lucide-terminal",this.openCallback),t.registerGlobalCommand({id:"command-palette:open",name:Qf.plugins.commandPalette.actionOpen(),icon:"lucide-terminal-square",callback:this.openCallback,hotkeys:[oA(["Mod"],"P")],showOnMobileToolbar:!0})},e.prototype.onEnable=function(e,t){return g(this,void 0,Promise,(function(){var n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return this.modal=new Z$(e,this),n=this,r=(i=Object).assign,o=[{}],[4,t.loadData()];case 1:return n.options=r.apply(i,o.concat([s.sent()])),(a=this.app.loadLocalStorage("recent-commands"))&&Array.isArray(a)&&(this.recentCommands=a),t.addSettingTab(new X$(e,t,this)),[2]}}))}))},e.prototype.onDisable=function(e,t){this.modal=null},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.saveSettings=function(e){e.saveData(this.options),this.app.saveLocalStorage("recent-commands",this.recentCommands)},e.prototype.onOpen=function(){return this.modal&&this.modal.open(),!1},e.prototype.getCommands=function(){var e,t=this.app.commands.listCommands(),n=[],i=this.options.pinned;if(i&&i.length>0){var r=new Set(i);e=function(e,t){for(var n=[],i=[],r=0,o=e;r<o.length;r++){var a=o[r];t(a)?n.push(a):i.push(a)}return[n,i]}(t,(function(e){return r.has(e.id)})),n=e[0],t=e[1],K$(n,i)}return t.sort((function(e,t){return xm(e.id,t.id)})),K$(t,this.recentCommands),n.concat(t)},e}(),Z$=function(e){function t(t,n){var i=e.call(this,t)||this;return i.emptyStateText=Qf.plugins.commandPalette.labelNoCommands(),i.commands=null,i.plugin=n,i.setInstructions([{command:"â†‘â†“",purpose:Qf.plugins.commandPalette.instructionNavigate()},{command:"â†µ",purpose:Qf.plugins.commandPalette.instructionUse()},{command:"esc",purpose:Qf.plugins.commandPalette.instructionDismiss()}]),i.setPlaceholder(Qf.plugins.commandPalette.promptTypeCommand()),i.scope.register(null,"Tab",(function(){return!1})),i.scope.register(null,"Enter",(function(e){if(!e.isComposing)return i.selectActiveSuggestion(e),!1})),i}return f(t,e),t.prototype.onOpen=function(){this.commands=null,e.prototype.onOpen.call(this)},t.prototype.onClose=function(){this.commands=null,e.prototype.onClose.call(this)},t.prototype.getItems=function(){var e=this.commands;return e||(e=this.commands=this.plugin.getCommands()),e},t.prototype.getItemText=function(e){return e.name},t.prototype.renderSuggestion=function(e,t){t.addClass("mod-complex");var n=t.createDiv("suggestion-content"),i=t.createDiv("suggestion-aux"),r=n.createDiv("suggestion-title"),o=e.item,a=o.name,s=a.indexOf(": ");if(-1!==s){var l=a.slice(0,s),c=a.slice(s+2);WL(r.createSpan("suggestion-prefix"),l,e.match),WL(r.createSpan(),c,e.match,-(s+2))}else WL(r.createSpan(),a,e.match);var u=this.app,h=u.hotkeyManager.getHotkeys(o.id),d=u.hotkeyManager.getDefaultHotkeys(o.id);if(h)for(var p=0,f=h;p<f.length;p++){var m=f[p];i.createEl("kbd",{cls:"suggestion-hotkey",text:sA(m)})}else if(d)for(var v=0,g=d;v<g.length;v++){var y=g[v];i.createEl("kbd",{cls:"suggestion-hotkey",text:sA(y)})}var b=this.plugin.options.pinned;b&&b.contains(o.id)&&i.createSpan({cls:"suggestion-flair"},(function(e){mx(e,"lucide-pin")}))},t.prototype.onChooseItem=function(e,t){this.app.lastEvent=t,pW(e);var n=this.plugin.recentCommands;n.remove(e.id),n.unshift(e.id),n.length>100&&(n.length=100)},t}(dV),X$=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty(),new NI(t).setHeading().setName(Qf.plugins.commandPalette.labelPinnedCommands());var n=[],i=function(){var t=n.map((function(e){return e.id}));0===t.length&&(t=null),e.instance.options.pinned=t,e.instance.saveSettings(e.plugin),e.display()},r=this.instance.options.pinned;if(r)for(var o=0,a=r;o<a.length;o++){var s=a[o];(m=this.app.commands.commands[s])&&n.push(m)}for(var l=t.createDiv(),c=function(e){l.createDiv("mobile-option-setting-item",(function(t){t.createSpan({cls:"mobile-option-setting-item-name",text:e.name}),t.createDiv("clickable-icon",(function(t){mx(t,"lucide-x"),Rx(t,Qf.interface.deleteActionShortName()),t.addEventListener("click",(function(){n.remove(e),i()}))})),t.createDiv("clickable-icon mobile-option-setting-drag-icon",(function(r){mx(r,"lucide-menu"),Rx(r,Qf.interface.dragToRearrange()),Hc(r,t,l,5,(function(){return null}),(function(t){n.remove(e),n.splice(t,0,e),i()}))}))}))},u=0,h=n;u<h.length;u++){c(m=h[u])}0===n.length&&l.createDiv({cls:"mobile-option-setting-item",text:Qf.plugins.commandPalette.labelNoCommands()});var d=this.app.commands.commands,p=[];for(var f in d){var m=d[f];n.contains(m)||p.push(m)}new NI(t).setName(Qf.plugins.commandPalette.optionAddNewPin()).setDesc(Qf.plugins.commandPalette.optionAddNewPinDescription()).addText((function(t){return t.setPlaceholder(Qf.plugins.commandPalette.promptTypeCommand()).then((function(){new G$(e.app,t.inputEl,p,(function(e){n.push(e),i()}))}))}))},t}(aY),$$="YYYY-MM-DD",Q$="HH:mm";function J$(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],o=new RegExp("{{".concat(i,"}}"),"gi");e=e.replace(o,r)}var a=null;return e=e.replace(/{{(date|time)(?::(.*?))?}}/gi,(function(e,t,i){return a||(a=window.moment()),i?a.format(i):"date"===t.toLowerCase()?a.format(n&&n.dateFormat||$$):a.format(n&&n.timeFormat||Q$)}))}var eQ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.setText($c(e.path))},t.prototype.getSuggestions=function(e){e=e.toLowerCase();for(var n=[],i=0,r=this.app.vault.getAllLoadedFiles();i<r.length;i++){var o=r[i];if(n.length>=t.MAX_SUGGESTIONS)break;o instanceof ww&&this.filePredicate(o,e)&&n.push(o)}return n},t.prototype.filePredicate=function(e,t){return e.path.toLowerCase().contains(t)},t.prototype.selectSuggestion=function(e){var t=this.textInputEl;this.setValue($c(e.path)),t.trigger("input"),this.close()},t.MAX_SUGGESTIONS=100,t}(AF),tQ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.filePredicate=function(t,n){return"md"===t.extension&&e.prototype.filePredicate.call(this,t,n)},t}(eQ),nQ="YYYY-MM-DD",iQ=Qf.plugins.dailyNotes,rQ=function(){function e(){this.id="daily-notes",this.name=iQ.name(),this.description=iQ.desc(),this.defaultOn=!0,this.app=null,this.plugin=null,this.options={}}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerRibbonItem(iQ.actionOpen(),"lucide-calendar",this.onOpenDailyNote.bind(this)),t.registerGlobalCommand({id:"daily-notes",name:iQ.actionOpen(),icon:"lucide-calendar-days",callback:this.onOpenDailyNote.bind(this)}),t.registerGlobalCommand({id:"daily-notes:goto-prev",name:iQ.actionOpenPrevious(),icon:"lucide-calendar-minus",checkCallback:function(e){var t=n.getCurrentFileDateTimestamp();return!!t&&(e||n.gotoPreviousExisting(t),!0)}}),t.registerGlobalCommand({id:"daily-notes:goto-next",name:iQ.actionOpenNext(),icon:"lucide-calendar-plus",checkCallback:function(e){var t=n.getCurrentFileDateTimestamp();return!!t&&(e||n.gotoNextExisting(t),!0)}})},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return n=this,[4,t.loadData()];case 1:return n.options=o.sent()||{},t.addSettingTab(new oQ(e,t,this)),this.app.workspace.onLayoutReady((function(){r.options.autorun&&r.onOpenDailyNote()})),t.registerEvent(this.app.workspace.on("receive-text-menu",(function(e,t){e.addItem((function(e){return e.setSection("options").setTitle(iQ.actionInsertText()).setIcon("lucide-calendar-check").onClick((function(){return g(r,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return[4,this.getDailyNote()];case 1:return e=n.sent(),[4,this.app.fileManager.insertIntoFile(e,t)];case 2:return n.sent(),[4,this.app.workspace.getLeaf().openFile(e,{active:!0,state:{mode:"source"}})];case 3:return n.sent(),[2]}}))}))}))}))}))),t.registerEvent(this.app.workspace.on("receive-files-menu",(function(e,t){e.addItem((function(e){return e.setTitle(iQ.actionInsertLink()).setIcon("lucide-calendar-check").onClick((function(){return g(r,void 0,void 0,(function(){var e,n,i=this;return y(this,(function(r){switch(r.label){case 0:return[4,this.getDailyNote()];case 1:return e=r.sent(),n=t.map((function(t){return i.app.fileManager.generateMarkdownLink(t,e.path)})),[4,this.app.fileManager.insertIntoFile(e,n.join("\n"))];case 2:return r.sent(),[4,this.app.workspace.getLeaf().openFile(e,{active:!0,state:{mode:"source"}})];case 3:return r.sent(),[2]}}))}))}))}))}))),i=function(e){return g(r,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,this.getDailyNote()];case 1:return t=a.sent(),n=this.app,i=n.fileManager,r=n.workspace,o=e.content,e.clipboard?[4,navigator.clipboard.readText()]:[3,3];case 2:o=a.sent(),a.label=3;case 3:return o?[4,i.insertIntoFile(t,o,e.prepend?"prepend":"append")]:[3,5];case 4:a.sent(),a.label=5;case 5:return e.silent?[3,7]:[4,r.getLeaf().openFile(t,{active:!0,state:{mode:"source"}})];case 6:a.sent(),a.label=7;case 7:return r.handleXCallback(e,t),[2]}}))}))},this.app.workspace.registerObsidianProtocolHandler("daily",i),t.register((function(){return r.app.workspace.unregisterObsidianProtocolHandler("daily",i)})),[2]}}))}))},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.getDailyNote=function(e){return g(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g;return y(this,(function(y){switch(y.label){case 0:n=(t=this).app,i=t.options,null!=e||(e=window.moment()),r=null,o=this.getFormat();try{r=e.format(o)}catch(e){return new JA(iQ.msgFailFormat({format:o})),console.error(e),[2]}if(r&&(r=r.trim()),(s=i.folder)&&String.isString(s)){if(l=tu(s),!((c=n.vault.getAbstractFileByPath(l))instanceof kw))return new JA(iQ.msgFailFolder({folderOption:s})),[2,null];a=c}else a=n.fileManager.getNewFileParent("");if(u=a.getParentPrefix()+r+".md",(h=n.vault.getAbstractFileByPathInsensitive(u))&&!(h instanceof ww))return[2,null];if(d=h)return[3,8];y.label=1;case 1:return y.trys.push([1,7,,8]),(p=i.template)?(f=n.metadataCache.getFirstLinkpathDest(p,""))?[4,n.vault.cachedRead(f)]:(new JA(iQ.msgFailTemplateFile({template:p})),[2]):[3,4];case 2:return m=y.sent(),v=J$(m,{title:r},{}),[4,n.fileManager.createNewMarkdownFile(a,r,v)];case 3:return d=y.sent(),[3,6];case 4:return[4,n.fileManager.createNewMarkdownFile(a,r)];case 5:d=y.sent(),y.label=6;case 6:return[3,8];case 7:return g=y.sent(),new JA(g.toString()),[2];case 8:return[2,d]}}))}))},e.prototype.onOpenDailyNote=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.getDailyNote()];case 1:return(t=n.sent())?[4,this.app.workspace.getLeaf(Ak.isModEvent(e||this.app.lastEvent)).openFile(t,{active:!0,state:{mode:"source"}})]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.gotoPreviousExisting=function(e){return g(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=Number.NEGATIVE_INFINITY,n=null,this.iterateDailyNotes((function(i,r){r<e&&r>t&&(n=i,t=r)})),n?[4,this.app.workspace.getLeaf().openFile(n,{active:!0})]:(new JA(iQ.msgNoPrevious()),[2]);case 1:return i.sent(),[2]}}))}))},e.prototype.gotoNextExisting=function(e){return g(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=Number.POSITIVE_INFINITY,n=null,this.iterateDailyNotes((function(i,r){r>e&&r<t&&(n=i,t=r)})),n?[4,this.app.workspace.getLeaf().openFile(n,{active:!0})]:(new JA(iQ.msgNoNext()),[2]);case 1:return i.sent(),[2]}}))}))},e.prototype.iterateDailyNotes=function(e){var t=this.app.vault.getAllLoadedFiles(),n=this.getFormat();t.forEach((function(t){if(t instanceof ww){var i=window.moment(t.basename,n,!0);i.isValid()&&e(t,i.valueOf())}}))},e.prototype.getCurrentFileDateTimestamp=function(){var e=this.app.workspace.getActiveViewOfType(LY);if(e){var t=e.file.basename,n=this.getFormat(),i=window.moment(t,n,!0);if(i.isValid())return i.valueOf()}return null},e.prototype.getFormat=function(){var e=this.options.format;return e&&String.isString(e)?e:nQ},e}(),oQ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options,i=document.createDocumentFragment();i.appendText(iQ.labelReferToSyntax()),i.createEl("a",{text:iQ.labelSyntaxLink(),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank",rel:"noopener"}}),i.createEl("br"),i.appendText(iQ.labelSyntaxLivePreview());var r=i.createEl("b","u-pop");new NI(t).setName(iQ.optionDateFormat()).setDesc(i).addMomentFormat((function(t){return t.setSampleEl(r).setDefaultFormat(nQ).setValue(n.format).onChange((function(t){n.format=t.trim(),e.plugin.saveData(n)}))})),new NI(t).setName(iQ.optionNewFileLocation()).setDesc(iQ.optionNewFileLocationDescription()).addText((function(t){t.setPlaceholder(Qf.setting.folderPathExamplePlaceholder()).setValue(n.folder).onChange((function(t){n.folder=t.trim(),e.plugin.saveData(n)})),new rZ(e.app,t.inputEl,!1,!0)})),new NI(t).setName(iQ.optionTemplate()).setDesc(iQ.optionTemplateDescription()).addText((function(t){t.setPlaceholder(Qf.setting.filePathExamplePlaceholder()).setValue(n.template).onChange((function(t){n.template=t.trim(),e.plugin.saveData(n)})),new tQ(e.app,t.inputEl)})),new NI(t).setName(iQ.optionOpenOnStart()).setDesc(iQ.optionOpenOnStartDescription()).addToggle((function(t){return t.setValue(n.autorun).onChange((function(t){n.autorun=t,e.plugin.saveData(n)}))}))},t}(aY),aQ=function(){function e(){this.id="editor-status",this.name=Qf.plugins.editorStatus.name(),this.description=Qf.plugins.editorStatus.desc(),this.defaultOn=!0,this.hiddenFromList=!0}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerStatusBarItem()},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-change",this.updateStatus,this)),t.registerEvent(e.workspace.on("active-leaf-change",this.updateStatus,this)),t.statusBarEl.addEventListener("click",this.onClick.bind(this)),t.statusBarEl.addEventListener("contextmenu",this.onClick.bind(this)),t.statusBarEl.addClass("mod-clickable"),this.updateStatus()},e.prototype.onDisable=function(){},e.prototype.getStatus=function(){var e=this.getActiveView();return e?"preview"===e.getMode()?"read":e.editMode?e.editMode.sourceMode?"source":"live-preview":"source":""},e.prototype.getActiveView=function(){var e=this.app.workspace.getActiveFileView();return e&&e instanceof LY?e:null},e.prototype.setStatus=function(e){return g(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:if(!(t=this.getActiveView()))return[2];switch(n=t.getState(),e){case"read":n.mode="preview";break;case"source":n.mode="source",n.source=!0;break;case"live-preview":n.mode="source",n.source=!1}return[4,t.leaf.setViewState({type:AY,state:n})];case 1:return i.sent(),[2]}}))}))},e.prototype.updateStatus=function(){var e=this.plugin.statusBarEl;e.empty(),e.show();var t=e.createSpan("status-bar-item-icon");switch(this.getStatus()){case"":return void e.hide();case"read":mx(t,"lucide-book-open"),Rx(e,Qf.plugins.editorStatus.read(),{placement:"top"});break;case"source":mx(t,"lucide-code-2"),Rx(e,Qf.plugins.editorStatus.editSource(),{placement:"top"});break;case"live-preview":mx(t,"lucide-edit-3"),Rx(e,Qf.plugins.editorStatus.editLivePreview(),{placement:"top"})}},e.prototype.onClick=function(e){var t=this,n=this.getActiveView();if(n){var i=new PA,r=this.getStatus(),o=function(e,n,o){i.addItem((function(i){return i.setTitle(o).setIcon(n).setChecked(r===e).onClick((function(){return t.setStatus(e)}))}))};o("read","lucide-book-open",Qf.plugins.editorStatus.read()),o("source","lucide-code-2",Qf.plugins.editorStatus.editSource()),n.editMode&&o("live-preview","lucide-edit-3",Qf.plugins.editorStatus.editLivePreview()),i.showAtMouseEvent(e)}},e}(),sQ=Qf.plugins.fileExplorer,lQ=function(e){function t(t,n,i){var r=e.call(this,i)||this;return r.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},r.rendered=!1,r.view=t,r.file=n,r}return f(t,e),t.prototype.updateTitle=function(){this.innerEl.setText(this.getTitle()),this.selfEl.setAttr("data-path",this.file.path)},t.prototype.onRender=function(){var e=this;if(!this.rendered){this.rendered=!0,this.updateTitle();var t=this.selfEl,n=this.view,i=n.app.dragManager;i.handleDrag(t,(function(r){if(n.fileBeingRenamed)return null;var o=n.dragFiles(r,e);if(o)return o;i.updateSource([t],"is-being-dragged");var a=e.file;return a instanceof ww?i.dragFile(r,a):a instanceof kw?i.dragFolder(r,a):null}))}},t.prototype.isFullTitleShown=function(){var e=this.selfEl,t=this.innerEl,n=e.offsetParent,i=parseInt(getComputedStyle(e).paddingLeft)+e.offsetLeft,r=n.clientWidth;return i+t.scrollWidth<=r+n.scrollLeft},t.prototype.startRename=function(){var e=this.selfEl,t=this.innerEl;e.addClass("is-being-renamed"),t.setAttribute("contenteditable","true");var n=this.view.app.vault.getConfig("spellcheck");t.setAttribute("spellcheck",String(n)),Sw(t)},t.prototype.stopRename=function(){var e=this.innerEl;this.selfEl.removeClass("is-being-renamed"),e.removeAttribute("contenteditable"),e.scrollLeft=0;var t=e.parentElement.find(".tooltip");t&&t.remove()},t}($P),cQ=bk((function(){var e=createDiv("tree-item nav-file");return e.createDiv("tree-item-self nav-file-title tappable is-clickable").createDiv("tree-item-inner nav-file-title-content"),e})),uQ=function(e){function t(t,n){var i=e.call(this,t,n,cQ())||this;return i.tagEl=null,i}return f(t,e),t.prototype.getTitle=function(){return this.file.basename},t.prototype.updateTitle=function(){e.prototype.updateTitle.call(this);var t=this.selfEl,n=this.tagEl;t.toggleClass("is-unsupported",!this.isSupported());var i=this.file.extension;GT.contains(i)?n&&(n.detach(),this.tagEl=null):(n||(n=this.tagEl=t.createDiv({cls:"nav-file-tag"})),n.setText(i))},t.prototype.isSupported=function(){return this.view.app.viewRegistry.isExtensionRegistered(this.file.extension)},t.prototype.onSelfClick=function(e){if(!this.view.tree.handleItemSelection(e,this)){var t=this.view.app.workspace;t.getLeaf(Ak.isModEvent(e)).openFile(this.file),t.setActiveLeaf(t.getMostRecentLeaf(),{focus:!0})}},t}(lQ),hQ=bk((function(){var e=createDiv("tree-item nav-folder");return e.createDiv("tree-item-self nav-folder-title is-clickable").createDiv("tree-item-inner nav-folder-title-content"),e.createDiv("tree-item-children nav-folder-children"),e})),dQ=function(e){function t(t,n){var i=e.call(this,t,n,hQ())||this;return i.vChildren=new eI(i),i.pusherEl=uI(),i.setCollapsible(!0),i.collapsed=!0,LD(i.el,!0),i.childrenEl.detach(),i}return f(t,e),t.prototype.getTitle=function(){var e=this.file,t=e.name;return e.isRoot()&&(t=e.vault.getName()),t},t.prototype.onSelfClick=function(e){0===e.button&&this.view.fileBeingRenamed!==this.file&&(this.view.tree.handleItemSelection(e,this)||this.toggleCollapsed(!0))},t.prototype.setCollapsed=function(t,n){return g(this,void 0,void 0,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return this.collapsed===t?[2]:(r=(i=this).view,o=i.childrenEl,a=r.tree,o.style.minHeight="",a.infinityScroll.invalidate(this,!0),[4,e.prototype.setCollapsed.call(this,t,n)]);case 1:return s.sent(),a.infinityScroll.invalidate(this,!0),t||this.file.isRoot()||r.setIsAllCollapsed(!1),r.ready&&a.requestSaveFolds(),[2]}}))}))},t.prototype.sort=function(){var e=this.view;this.vChildren.setChildren(e.getSortedFolderItems(this.file))},t}(QP(lQ)),pQ="file-explorer",fQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefersCollapsed=!0,t}return f(t,e),t.prototype.selectItem=function(t){!this.app.vault.getConfig("showUnsupportedFiles")&&t instanceof uQ&&!t.isSupported()||e.prototype.selectItem.call(this,t)},t}(fI),mQ=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-folder-closed",n.activeDom=null,n.collapseOrExpandAllEl=null,n.ready=!1,n.sortOrder="alphabetical",n.autoRevealFile=!1,n.fileBeingRenamed=null,n.requestSort=mc(n.sort.bind(n),20),n._revealActiveFileQueued=!1,n._sortQueued=!1,n.mouseoverExpandTimeout=null,n.lastDropTargetEl=null;var i=n.containerEl;n.navFileContainerEl=i.createDiv("nav-files-container");var r=n.scope=new Tk(n.app.scope);n.tree=new fQ(n,{app:n.app,containerEl:n.navFileContainerEl,id:pQ,scope:r,getNodeId:n.getNodeId.bind(n),handleDeleteSelectedItems:n.onDeleteSelectedFiles.bind(n),handleRenameFocusedItem:n.onKeyRename.bind(n),handleCollapseAll:n.setIsAllCollapsed.bind(n)}),n.tree.infinityScroll.setWidth=!0;var o=n.headerDom=new XP(n.app,i);return o.addNavButton("lucide-edit",sQ.actionNewNote(),n.onCreateNewNoteClick.bind(n)),o.addNavButton("lucide-folder-plus",sQ.actionNewFolder(),n.onCreateNewFolderClick.bind(n)),o.addSortButton(rO,oO,(function(e){return n.setSortOrder(e)}),(function(){return n.sortOrder})),n.autoRevealButtonEl=o.addNavButton("lucide-gallery-vertical",sQ.actionAutoReveal(),n.onToggleAutoReveal.bind(n)),n.collapseOrExpandAllEl=o.addNavButton("lucide-chevrons-up-down",sQ.actionExpandAll(),(function(){return n.tree.toggleCollapseAll()})),n.fileItems={},n.files=UO(),n.fileRenameScope=new Tk(n.app.scope),n.fileRenameScope.register([],"Enter",n.onKeyEnterInRename.bind(n)),n.fileRenameScope.register([],"Escape",n.onKeyEscInRename.bind(n)),Tc(i),i.on("click",".nav-file-title, .nav-folder-title",n.onFileClick.bind(n)),i.on("auxclick",".nav-file-title, .nav-folder-title",n.onFileClick.bind(n)),i.on("mouseover",".nav-file-title, .nav-folder-title",n.onFileMouseover.bind(n)),i.on("mouseout",".nav-file-title, .nav-folder-title",n.onFileMouseout.bind(n)),i.on("contextmenu",".nav-file-title, .nav-folder-title",n.openFileContextMenu.bind(n)),i.on("blur",".nav-file-title-content, .nav-folder-title-content",n.onTitleBlur.bind(n),{capture:!0}),i.on("input",".nav-file-title-content, .nav-folder-title-content",n.onFileRenameInput.bind(n)),n}return f(t,e),t.prototype.isItem=function(e){return e instanceof lQ},t.prototype.getNodeId=function(e){return e.file.path},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.sortOrder=this.sortOrder,t.autoReveal=this.autoRevealFile,t},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){return i=t.autoReveal,r=t.sortOrder,isBoolean(i)&&this.setAutoReveal(i),r&&this.sortOrder!==r&&(this.sortOrder=t.sortOrder,this.requestSort()),t.hasOwnProperty("newFile")&&String.isString(t.newFile)&&(o=t.newFile,(a=this.app.vault.getAbstractFileByPath(o))&&this.afterCreate(a,!1)),[2,e.prototype.setState.call(this,t,n)]}))}))},t.prototype.setIsAllCollapsed=function(e){this.tree.isAllCollapsed=e,e?(mx(this.collapseOrExpandAllEl,"lucide-chevrons-up-down"),Rx(this.collapseOrExpandAllEl,sQ.actionExpandAll())):(mx(this.collapseOrExpandAllEl,"lucide-chevrons-down-up"),Rx(this.collapseOrExpandAllEl,sQ.actionCollapseAll()))},t.prototype.getDisplayText=function(){return sQ.name()},t.prototype.getViewType=function(){return pQ},t.prototype.load=function(){var t=this;e.prototype.load.call(this);var n=this.app,i=n.vault;this.registerEvent(i.on("create",this.onCreate,this)),this.registerEvent(i.on("delete",this.onDelete,this)),this.registerEvent(i.on("rename",this.onRename,this)),this.registerEvent(i.on("modify",this.onModify,this)),this.registerEvent(i.on("config-changed",this.onConfigChanged,this)),this.registerEvent(n.workspace.on("file-open",this.onFileOpen,this)),this.registerEvent(n.viewRegistry.on("extensions-updated",this.onExtensionsUpdated,this)),this.navFileContainerEl.addEventListener("contextmenu",(function(e){e.preventDefault(),e.targetNode===t.navFileContainerEl&&(t.tree.clearSelectedDoms(),t.tree.setFocusedItem(null),t.onFileContextMenu(e,n.vault.getRoot()))})),this.ready=!1;for(var r=0,o=n.vault.getAllLoadedFiles();r<o.length;r++){var a=o[r];a instanceof kw&&a.isRoot()||this.onCreate(a)}this.attachDropHandler(n.vault.getRoot(),this.navFileContainerEl),this.updateShowUnsupportedFiles(),this.app.workspace.onLayoutReady((function(){t.ready=!0,t.sort(),t.onFileOpen(t.app.workspace.getActiveFile()),t.tree.loadFolds()}))},t.prototype.onCreate=function(e){if(!(e instanceof kw&&e.isRoot())){var t=this.fileItems,n=e.path;if(!t.hasOwnProperty(n)){var i=void 0;e instanceof ww?i=new uQ(this,e):e instanceof kw&&(i=new dQ(this,e),this.attachDropHandler(e,i.el)),t[n]=i,this.files.set(i.el,e)}this.requestSort()}},t.prototype.onDelete=function(e){var t=this.fileItems,n=e.path;if(t.hasOwnProperty(n)){var i=t[n];this.files.delete(i.el),delete t[n],this.activeDom===i&&(this.activeDom=null),this.tree.selectedDoms.delete(i),this.tree.focusedItem===i&&this.tree.setFocusedItem(null)}this.requestSort()},t.prototype.onRename=function(e,t){var n=this.fileItems,i=e.path;if(n.hasOwnProperty(t)){var r=n[t];delete n[t],n[i]=r,r.updateTitle(),this.files.set(r.el,e),r instanceof dQ&&this.tree.requestSaveFolds(),r.info.computed=!1}this.requestSort()},t.prototype.onModify=function(){"byModifiedTime"!==this.sortOrder&&"byModifiedTimeReverse"!==this.sortOrder||this.requestSort()},t.prototype.onConfigChanged=function(e){"showUnsupportedFiles"===e&&this.updateShowUnsupportedFiles()},t.prototype.updateShowUnsupportedFiles=function(){var e=this.app.vault;this.navFileContainerEl.toggleClass("show-unsupported",e.getConfig("showUnsupportedFiles")),this.tree.infinityScroll.invalidateAll()},t.prototype.onFileContextMenu=function(e,t){var n=this,i=(new PA).addSections(["title","open","action-primary","action","info","view","system","","danger"]),r=t instanceof kw&&t.isRoot(),o=Array.from(this.tree.selectedDoms);if(o.length>1&&o.some((function(e){return e.file===t}))){var a=o.map((function(e){return e.file})),s=hK(a);Zl.isPhone&&i.addItem((function(e){return e.setSection("title").setIcon("lucide-files").setTitle(Qf.nouns.fileWithCount({count:o.length})).setIsLabel(!0)})),i.addItem((function(e){return e.setSection("action-primary").setTitle(sQ.actionNewFolderWithCount({count:s.length})).setIcon("lucide-folder-plus").onClick((function(){return g(n,void 0,void 0,(function(){var e,n;return y(this,(function(i){switch(i.label){case 0:return e=null,t&&(e=t instanceof kw?t:t.parent),[4,this.app.fileManager.createNewFolder(e)];case 1:return n=i.sent(),[4,this.afterCreate(n,!1)];case 2:return i.sent(),[4,cK(this.app,s,n)];case 3:return i.sent(),this.tree.clearSelectedDoms(),[2]}}))}))}))})),i.addItem((function(e){return e.setSection("danger").setTitle(sQ.menuOptDelete()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){return g(n,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:e=0,t=a,i.label=1;case 1:return e<t.length?(n=t[e],[4,this.app.vault.exists(n.path)]):[3,5];case 2:return i.sent()?[4,this.app.fileManager.promptForDeletion(n)]:[3,4];case 3:i.sent(),i.label=4;case 4:return e++,[3,1];case 5:return[2]}}))}))}))})),this.app.workspace.trigger("files-menu",i,a,"file-explorer-context-menu",null)}else{if(Zl.isPhone){var l=createFragment((function(e){return e.createDiv({text:t.name})}));if(t instanceof ww){var c=sQ.tooltipModifiedTime({time:window.moment(t.stat.mtime).format("YYYY-MM-DD HH:mm")}),u=sQ.tooltipCreatedTime({time:window.moment(t.stat.ctime).format("YYYY-MM-DD HH:mm")});l.createDiv({cls:"menu-item-desc",text:"".concat(c,"\n").concat(u)})}else if(t instanceof kw){var h=Qf.nouns.fileWithCount({count:t.getFileCount()}),d=Qf.nouns.folderWithCount({count:t.getFolderCount()});l.createDiv({cls:"menu-item-desc",text:sQ.tooltipFoldersFilesCount({fileCount:h,folderCount:d})})}i.addItem((function(e){return e.setSection("title").setTitle(l).removeIcon().setIsLabel(!0)}))}if(t instanceof kw){var p=t;i.addItem((function(e){return e.setSection("action-primary").setTitle(sQ.menuOptNewNote()).setIcon("lucide-edit").onClick((function(e){var t=Ak.isModifier(e,"Mod");n.createAbstractFile("file",p,t)}))})).addItem((function(e){return e.setSection("action-primary").setTitle(sQ.menuOptNewFolder()).setIcon("lucide-folder-open").onClick((function(e){var t=Ak.isModifier(e,"Mod");n.createAbstractFile("folder",p,t)}))})),i.addSeparator()}r||i.addItem((function(e){return e.setSection("danger").setTitle(sQ.menuOptRename()).setIcon("lucide-edit-3").onClick((function(){return n.startRenameFile(t)}))})),t instanceof ww&&(i.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){return t instanceof ww&&this.app.workspace.openLinkText(t.path,"","tab"),[2]}))}))}))})),Zl.canSplit&&i.addItem((function(e){return e.setSection("open").setTitle(Qf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){return t instanceof ww&&this.app.workspace.openLinkText(t.path,"","split"),[2]}))}))}))}))),r||(i.addItem((function(e){return e.setSection("action").setTitle(Zl.isMacOS?sQ.menuOptMakeCopyMac():sQ.menuOptMakeCopy()).setIcon("lucide-files").onClick((function(e){return g(n,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=Ak.isModifier(e,"Mod"),i=this.app.vault.getAvailablePath($c(t.path),t instanceof ww?t.extension:void 0),[4,this.app.vault.copy(t,i)];case 1:return r=o.sent(),this.afterCreate(r,n),[2]}}))}))}))})),i.addItem((function(e){return e.setSection("danger").setTitle(sQ.menuOptDelete()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){n.app.fileManager.promptForDeletion(t)}))})),this.app.workspace.trigger("file-menu",i,t,"file-explorer-context-menu",null))}i.showAtMouseEvent(e);var f=this.fileItems[t.path];f&&(this.tree.setFocusedItem(f),f.selfEl.addClass("has-active-menu"),i.onHide((function(){f.selfEl.removeClass("has-active-menu")})))},t.prototype.openFileContextMenu=function(e,t){var n=this.files.get(t.parentElement);this.fileBeingRenamed!==n&&(e.preventDefault(),this.onFileContextMenu(e,n))},t.prototype.setSortOrder=function(e){this.sortOrder=e,this.sort()},t.prototype.setAutoReveal=function(e){e!==this.autoRevealFile&&(this.autoRevealFile=e,this.autoRevealButtonEl.toggleClass("is-active",e))},t.prototype.onToggleAutoReveal=function(){this.setAutoReveal(!this.autoRevealFile),this.autoRevealFile&&this.revealActiveFile(),this.app.workspace.requestSaveLayout()},t.prototype.onCreateNewFolderClick=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return e.preventDefault(),this.createAbstractFile("folder",null,!1),[2]}))}))},t.prototype.onCreateNewNoteClick=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){return e.preventDefault(),t=this.app.workspace,n="",(i=t.getActiveFile())&&(n=i.path),r=this.app.fileManager.getNewFileParent(n),this.createAbstractFile("file",r,Ak.isModEvent(e)||"tab"),[2]}))}))},t.prototype.createAbstractFile=function(e,t,n){return g(this,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:i=this.app,r=null,a.label=1;case 1:return a.trys.push([1,6,,7]),"file"!==e?[3,3]:[4,i.fileManager.createNewMarkdownFile(t)];case 2:return r=a.sent(),[3,5];case 3:return"folder"!==e?[3,5]:[4,i.fileManager.createNewFolder(t)];case 4:r=a.sent(),a.label=5;case 5:return[3,7];case 6:return o=a.sent(),new JA(o.toString()),[2];case 7:return this.afterCreate(r,n),[2]}}))}))},t.prototype.afterCreate=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return e?(n=this.app,e instanceof ww?(i=n.workspace,[4,i.getLeaf(t).openFile(e,{active:!0,state:{mode:"source"},eState:{rename:"all"}})]):[3,2]):[2];case 1:return o.sent(),[3,3];case 2:n.nextFrame((function(){return g(r,void 0,void 0,(function(){var t;return y(this,(function(n){return this.sort(),this.startRenameFile(e),(t=this.fileItems[e.path])&&this.tree.infinityScroll.scrollIntoView(t,4),[2]}))}))})),o.label=3;case 3:return[2]}}))}))},t.prototype.onFileClick=function(e,t){if(!e.defaultPrevented&&(0===e.button||1===e.button)){var n=this.files.get(t.parentElement);if(n){var i=this.fileItems[n.path];i&&i.onSelfClick(e)}}},t.prototype.onFileMouseover=function(e,t){if(xc(e,t)&&!Bc(e)){var n=this.files.get(t.parentElement);if(n){var i="",r="";n instanceof ww&&(i=sQ.tooltipModifiedTime({time:window.moment(n.stat.mtime).format("YYYY-MM-DD HH:mm")}),r=sQ.tooltipCreatedTime({time:window.moment(n.stat.ctime).format("YYYY-MM-DD HH:mm")}));var o=this.fileItems[n.path],a="";if(o&&!o.isFullTitleShown()&&(a+=o.getTitle()),n instanceof ww)""!==a&&(a+="\n\n"),a+="".concat(i,"\n").concat(r);else if(n instanceof kw){var s=Qf.nouns.fileWithCount({count:n.getFileCount()}),l=Qf.nouns.folderWithCount({count:n.getFolderCount()});""!==a&&(a+="\n\n"),a+=sQ.tooltipFoldersFilesCount({fileCount:s,folderCount:l})}""!==a&&Ox(t,a,{placement:this.getSideTooltipPlacement(),gap:24,horizontalParent:this.containerEl,delay:kx}),n instanceof ww&&this.app.workspace.trigger("hover-link",{event:e,source:"file-explorer",hoverParent:this,targetEl:t,linktext:n.path})}}},t.prototype.onFileMouseout=function(e,t){xc(e,t)&&Bx()},t.prototype.onFileOpen=function(e){var t,n=e?this.fileItems[e.path]:null;n!==this.activeDom&&(n!==this.tree.focusedItem&&this.tree.clearSelectedDoms(),null===(t=this.activeDom)||void 0===t||t.selfEl.removeClass("is-active"),null==n||n.selfEl.addClass("is-active"),this.activeDom=n,this.autoRevealFile&&this.revealActiveFile())},t.prototype.revealActiveFile=function(){var e=this,t=this.activeDom,n=this.containerEl;if(t)if(n.isShown()){this._revealActiveFileQueued=!1;for(var i=t.parent;i&&i instanceof dQ;)i.setCollapsed(!1,!1),i=i.parent;this.tree.infinityScroll.scrollIntoView(t,4)}else this._revealActiveFileQueued||(n.onNodeInserted((function(){return e.revealActiveFile()}),!0),this._revealActiveFileQueued=!0)},t.prototype.revealInFolder=function(e){var t=this,n=this.fileItems;if(n.hasOwnProperty(e.path)){for(var i=n[e.path],r=e.parent;r&&null!==r.path;){var o=n[r.path];o&&o instanceof dQ&&o.collapsed&&o.toggleCollapsed(!1),r=r.parent}this.tree.setFocusedItem(i),this.app.nextFrame((function(){t.tree.infinityScroll.scrollIntoView(i,4),Tw(i.selfEl),t.app.workspace.setActiveLeaf(t.leaf)}))}},t.prototype.sort=function(){var e=this;if(this.ready)if(this.containerEl.isShown()){this._sortQueued=!1;var t=this,n=t.app.vault,i=t.fileItems,r=t.tree,o=[];for(var a in i)i.hasOwnProperty(a)&&o.push(i[a]);for(var s=this.navFileContainerEl,l=s.scrollTop,c=0,u=o;c<u.length;c++){var h=u[c];h instanceof dQ&&h.sort()}var d=this.getSortedFolderItems(n.getRoot());r.infinityScroll.rootEl.vChildren.setChildren(d),s.scrollTop=l,r.infinityScroll.compute(),this.autoRevealFile&&this.revealActiveFile()}else this._sortQueued||(this.containerEl.onNodeInserted((function(){return e.requestSort()}),!0),this._sortQueued=!0)},t.prototype.getSortedFolderItems=function(e){var t=sO(this.sortOrder),n=e.children.slice();n.sort((function(e,n){var i=e instanceof kw,r=n instanceof kw;return i||r?i&&!r?-1:r&&!i?1:xm(e.name,n.name):t(e,n)}));for(var i=[],r=0,o=n;r<o.length;r++){var a=o[r],s=this.fileItems[a.path];s&&i.push(s)}return i},t.prototype.dragFiles=function(e,t){var n=this.tree.selectedDoms,i=n.entries().next().value;if(0===n.size||1===n.size&&i===t)return null;if(!n.has(t))return null;var r=[],o=[];n.forEach((function(e){o.push(e.file),r.push(e.el)}));var a=this.app.dragManager;return a.updateSource(r,"is-being-dragged"),a.dragFiles(e,o)},t.prototype.attachDropHandler=function(e,t){var n=this;this.app.dragManager.handleDrop(t,(function(i,r,o){i.preventDefault();var a=e.name||n.app.vault.getName();if(o){var s=n.fileItems[e.path];n.lastDropTargetEl!==t&&(t.win.clearTimeout(n.mouseoverExpandTimeout),n.mouseoverExpandTimeout=t.win.setTimeout((function(){n.lastDropTargetEl===t&&s instanceof dQ&&s.setCollapsed(!1,!0)}),750),n.lastDropTargetEl=t)}else t.win.clearTimeout(n.mouseoverExpandTimeout),n.lastDropTargetEl=null,n.mouseoverExpandTimeout=null;if(!r)return Ik(i.dataTransfer)?(o||n.app.importAttachments(Fk(i.dataTransfer,"drop",!0),e),{dropEffect:"copy",hoverEl:t,hoverClass:"is-being-dragged-over"}):void 0;if("file"===r.type||"folder"===r.type){var l=r.file;if(!uK(l,e))return;if(!o){var c=l.name;if("/"!==e.path&&(c=e.path+"/"+c),l.parent===e)return;if("file"===r.type){var u=$c(c),h=Qc(Kc(c));c=n.app.vault.getAvailablePath(u,h)}else c=n.app.vault.getAvailablePath(c);n.app.fileManager.renameFile(l,c)}return{action:Qf.interface.dragAndDrop.moveIntoFolder({folder:a}),dropEffect:"move",hoverEl:t,hoverClass:"is-being-dragged-over"}}if("files"===r.type){var d=dK(r.files,e);if(0===d.length)return;if(!o){cK(n.app,d,e);var p=n.fileItems[e.path];p&&p instanceof dQ&&p.collapsed&&n.tree.clearSelectedDoms()}return{action:Qf.interface.dragAndDrop.moveIntoFolder({folder:a}),dropEffect:"move",hoverEl:t,hoverClass:"is-being-dragged-over"}}}),!0)},t.prototype.onTitleBlur=function(){this.acceptRename()},t.prototype.onFileRenameInput=function(e,t){var n=this.files.get(t.parentElement.parentElement),i=t.getText();(1===t.childNodes.length&&t.firstChild.nodeType===Node.TEXT_NODE||(t.setText(i),Sw(t,!1)),i=i.trim(),Bx(),dw.test(i))?Ox(t.parentElement,sQ.msgInvalidCharacters()+uw,{classes:["mod-error"]}):this.app.vault.checkForDuplicate(n,i)?Ox(t.parentElement,sQ.msgFileAlreadyExists(),{classes:["mod-error"]}):pw.test(i)&&Ox(t.parentElement,sQ.msgUnsafeCharacters()+hw,{classes:["mod-error"]})},t.prototype.startRenameFile=function(e){return g(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return!e||e instanceof kw&&e.isRoot()?[2]:[4,this.acceptRename()];case 1:for(r.sent(),this.fileBeingRenamed=e,t=e.parent;t&&null!==t.path;)(n=this.fileItems[t.path])&&n instanceof dQ&&n.collapsed&&n.toggleCollapsed(!1),t=t.parent;return this.app.keymap.pushScope(this.fileRenameScope),i=this.fileItems[e.path],this.tree.setFocusedItem(i,!0),i.startRename(),[2]}}))}))},t.prototype.acceptRename=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s=this;return y(this,(function(l){switch(l.label){case 0:if(!(e=this.fileBeingRenamed))return[2];if(this.exitRename(),t=this.fileItems[e.path],n=t.innerEl,""===(i=n.getText().trim()))return t.updateTitle(),this.displayError(sQ.msgEmptyFileName(),t),[2];if(i.startsWith("."))return t.updateTitle(),this.displayError(sQ.msgBadDotfile(),t),[2];if(r=e.getNewPathAfterRename(i),e.path===r)return t.updateTitle(),[2];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.app.fileManager.renameFile(e,r)];case 2:return l.sent(),[3,4];case 3:return(o=l.sent())&&(console.error(o),a=o.message||o.code||o.toString(),this.displayError(a,t)),[3,4];case 4:return t.updateTitle(),setTimeout((function(){return s.tree.infinityScroll.scrollIntoView(t,4)}),0),[2]}}))}))},t.prototype.displayError=function(e,t){Ox(t.selfEl,e,{placement:"bottom",classes:["mod-error"]}),setTimeout(Bx,2e3)},t.prototype.exitRename=function(){var e=this.fileBeingRenamed;this.fileBeingRenamed=null,this.fileItems[e.path].stopRename(),this.app.keymap.popScope(this.fileRenameScope)},t.prototype.onKeyEnterInRename=function(e){e.isComposing||(e.preventDefault(),this.acceptRename())},t.prototype.onKeyEscInRename=function(){var e=this.fileBeingRenamed;e&&(this.fileItems[e.path].updateTitle(),this.exitRename())},t.prototype.onDeleteSelectedFiles=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:e.preventDefault(),t=[],n=this.tree,i=n.focusedItem,(r=n.selectedDoms).size>0?t=Array.from(r).map((function(e){return e.file})):i instanceof lQ&&t.push(i.file),o=0,a=t,l.label=1;case 1:return o<a.length?(s=a[o])===this.app.vault.getRoot()?[3,4]:[4,this.app.vault.exists(s.path)]:[3,5];case 2:return l.sent()?[4,this.app.fileManager.promptForDeletion(s)]:[3,4];case 3:l.sent(),l.label=4;case 4:return o++,[3,1];case 5:return[2]}}))}))},t.prototype.onKeyRename=function(e){var t=this.tree.focusedItem;if(t){e.preventDefault();var n=this.files.get(t.el);this.startRenameFile(n)}},t.prototype.onExtensionsUpdated=function(){var e=this.fileItems;for(var t in e)e.hasOwnProperty(t)&&e[t].updateTitle()},t}(jP),vQ=Qf.plugins.fileExplorer,gQ=function(){function e(){this.id="file-explorer",this.name=vQ.name(),this.description=vQ.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerGlobalCommand({id:"file-explorer:open",name:vQ.actionShow(),icon:"lucide-files",callback:function(){n.app.workspace.ensureSideLeaf(pQ,"left",{active:!0})}}),t.registerGlobalCommand({id:"file-explorer:reveal-active-file",name:vQ.actionRevealActiveFile(),icon:"lucide-navigation",checkCallback:function(e){var t=n.app.workspace.getActiveFile();if(t)return e||n.revealInFolder(t),!0}}),t.registerGlobalCommand({id:"file-explorer:new-folder",name:vQ.actionCreateFolder(),icon:"lucide-folder-plus",callback:function(){return g(n,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,e.fileManager.createNewFolder()];case 1:return t=n.sent(),this.app.workspace.ensureSideLeaf(pQ,"left",{active:!0,reveal:!0,state:{newFile:t.path}}),[2]}}))}))}}),t.registerViewType(pQ,(function(e){return new mQ(e)}))},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),e.workspace.registerHoverLinkSource("file-explorer",{display:this.name,defaultMod:!0})},e.prototype.onDisable=function(e){e.workspace.unregisterHoverLinkSource("file-explorer")},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.onFileMenu=function(e,t,n){var i=this;!Zl.isMobile&&t instanceof ww&&"file-explorer-context-menu"!==n&&e.addItem((function(e){return e.setSection("system").setTitle(vQ.actionRevealFile()).setIcon("lucide-folder-open").onClick((function(){return i.revealInFolder(t)}))})),"link-context-menu"!==n&&e.addItem((function(e){return e.setSection("action").setTitle(t instanceof ww?vQ.actionMoveFile():vQ.actionMoveFolder()).setIcon("lucide-folder-tree").onClick((function(){new fK(i.app,[t]).open()}))}))},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(pQ,"left",{reveal:!1})},e.prototype.revealInFolder=function(e){return g(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return t=this.app,0!==(n=t.workspace.getLeavesOfType(pQ)).length?[3,2]:[4,(i=t.workspace.getLeftLeaf(!1)).setViewState({type:"file-explorer"})];case 1:return r.sent(),[3,3];case 2:i=n[0],r.label=3;case 3:return[4,t.workspace.revealLeaf(i)];case 4:return r.sent(),i.view.revealInFolder(e),[2]}}))}))},e}(),yQ={intervalMinutes:5,keepDays:7},bQ=Qf.plugins.fileRecovery,wQ=function(){function e(){this.id="file-recovery",this.name=bQ.name(),this.description=bQ.desc(),this.defaultOn=!0,this.app=null,this.pluginInstance=null,this.db=null,this.tsCache={},this.pendingFiles=new Set}return e.prototype.init=function(e,t){this.app=e,this.pluginInstance=t,t.registerGlobalCommand({id:"file-recovery:open",name:bQ.actionOpen(),icon:"lucide-rotate-ccw",callback:this.openModal.bind(this)})},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s=this;return y(this,(function(l){switch(l.label){case 0:return n=this,r=(i=Object).assign,o=[{},yQ],[4,t.loadData()];case 1:if(n.options=r.apply(i,o.concat([l.sent()])),t.addSettingTab(new kQ(e,t,this)),!Zl.supportsIndexedDb)return[2];t.registerEvent(e.vault.on("modify",this.onFileChanged,this)),t.registerEvent(e.workspace.on("file-open",this.onFileChanged,this)),t.registerInterval(window.setInterval(this.resave.bind(this),6e4)),t.registerInterval(window.setInterval(this.cleanup.bind(this),36e5)),e.workspace.onLayoutReady((function(){t.registerEvent(e.vault.on("create",s.onFileChanged,s))})),l.label=2;case 2:return l.trys.push([2,4,,5]),a=this,[4,B_(this.app.appId+"-backup",1,{upgrade:function(e,t,n,i){e.objectStoreNames.contains("backups")&&e.deleteObjectStore("backups");var r=e.createObjectStore("backups",{autoIncrement:!0});r.createIndex("path","path"),r.createIndex("ts","ts")}})];case 3:return a.db=l.sent(),window.setTimeout(this.cleanup.bind(this),6e4),[3,5];case 4:return l.sent(),console.error("File Recovery failed to connect to IndexedDB"),[3,5];case 5:return[2]}}))}))},e.prototype.onDisable=function(){this.db&&(this.db.close(),this.db=null)},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.pluginInstance.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.onFileChanged=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return e&&e instanceof ww&&("md"===e.extension||"canvas"===e.extension)?(n=(t=this).db,i=t.tsCache,n?(r=e.path,o=i[r],a=null,i.hasOwnProperty(r)?[3,2]:[4,this.getLastVersionByPath(r)]):[2]):[2];case 1:a=h.sent(),o=a?a.ts:0,i[r]=o,h.label=2;case 2:return s=Date.now(),l=s-o,c=this.options.intervalMinutes,(isNaN(c)||c<0)&&(c=5),l<60*c*1e3?(this.pendingFiles.add(r),[2]):[4,this.app.vault.cachedRead(e)];case 3:return u=h.sent(),a?[3,5]:[4,this.getLastVersionByPath(r)];case 4:a=h.sent(),h.label=5;case 5:return a&&a.data===u?[2]:[4,n.add("backups",{path:r,ts:s,data:u})];case 6:return h.sent(),i[r]=s,[2]}}))}))},e.prototype.forceAdd=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=(n=this).db,r=n.tsCache,i?(o=Date.now(),[4,i.add("backups",{path:e,ts:o,data:t})]):[2];case 1:return a.sent(),r[e]=o,[2]}}))}))},e.prototype.resave=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:e=this.pendingFiles,t=Array.from(e),n=this.app.vault,i=0,r=t,a.label=1;case 1:return i<r.length?(o=r[i],e.delete(o),[4,this.onFileChanged(n.getAbstractFileByPath(o))]):[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},e.prototype.cleanup=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return(e=this.db)?(t=e.transaction("backups","readwrite",{durability:"relaxed"}),n=t.store.index("ts"),i=this.options.keepDays,(isNaN(i)||i<1)&&(i=7),[4,n.openCursor(IDBKeyRange.upperBound(Date.now()-24*i*60*60*1e3))]):[2];case 1:r=o.sent(),o.label=2;case 2:return r?[4,r.delete()]:[3,5];case 3:return o.sent(),[4,r.continue()];case 4:return r=o.sent(),[3,2];case 5:return[4,t.done];case 6:return o.sent(),[2]}}))}))},e.prototype.openModal=function(){new MQ(this.app,this).open()},e.prototype.clearData=function(){this.db.clear("backups"),this.tsCache={}},e.prototype.getLastVersionByPath=function(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=this.db.transaction("backups","readonly"),[4,t.store.index("path").openCursor(e,"prev")];case 1:return[2,(n=i.sent())?n.value:null]}}))}))},e}(),kQ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;if(t.empty(),Zl.supportsIndexedDb){var n=this.instance.options;new NI(t).setName(bQ.optionInterval()).setDesc(bQ.optionIntervalDescription()).addText((function(t){return t.setValue(String(n.intervalMinutes)).onChange((function(t){var i=parseFloat(t);!isNaN(i)&&i>=0&&(n.intervalMinutes=i,e.plugin.saveData(n))}))})),new NI(t).setName(bQ.optionKeep()).setDesc(bQ.optionKeepDescription()).addText((function(t){return t.setValue(String(n.keepDays)).onChange((function(t){var i=parseFloat(t);!isNaN(i)&&i>=1&&(n.keepDays=i,e.plugin.saveData(n))}))})),new NI(t).setName(bQ.optionOpenHistory()).setDesc(bQ.optionOpenHistoryDescription()).addButton((function(t){return t.setButtonText(bQ.buttonViewSnapshots()).setCta().onClick((function(){e.instance.openModal()}))})),new NI(t).setName(bQ.optionClear()).setDesc(bQ.optionClearDescription()).addButton((function(t){return t.setButtonText(bQ.buttonClearHistory()).setWarning().onClick((function(){new XA(e.app).setTitle(bQ.optionClear()).setContent(createFragment((function(e){e.createEl("p",{cls:"mod-warning",text:bQ.labelClearWarning()})}))).addButton("mod-warning",bQ.buttonClearHistory(),(function(){e.instance.clearData(),new JA(bQ.msgClearComplete())})).addCancelButton().open()}))}))}else new NI(t).setName(Qf.interface.msgIndexedDbNotSupported()).setDesc(Qf.interface.msgIndexedDbIOS())},t}(aY),CQ=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.paths=[],o.modal=null,o.paths=i,o.modal=r,o}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.setText($c(e))},t.prototype.getSuggestions=function(e){e=e.toLowerCase();for(var t=[],n=0,i=this.paths;n<i.length;n++){var r=i[n];r.toLowerCase().contains(e)&&t.push(r)}return t.slice(0,100)},t.prototype.selectSuggestion=function(e){var t=this.textInputEl;this.setValue($c(e)),this.modal.switchToPath(e),t.trigger("input"),this.close()},t}(AF),MQ=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=null,i.currentVersion=null,i.activeVersionEl=null,i.historyListContainerEl=null,i.historyListEl=null,i.versionListEl=null,i.fileContentEl=null,i.titleSetting=null,i.diffToggle=null,i.backButtonEl=null,i.textareaEl=null,i.diffEl=null,i.plugin=n,i.setTitle(bQ.name()),i.modalEl.addClass("mod-sync-history","mod-sidebar-layout"),i.historyListContainerEl=i.contentEl.createDiv("file-recovery-list-container");var r=i.historyListEl=i.historyListContainerEl.createDiv("modal-sidebar file-recovery-list");new NI(r).setNoInfo().addSearch((function(e){i.searchComponent=e,e.setPlaceholder(bQ.placeholderChooseFile())})),i.versionListEl=r.createDiv("file-recovery-list-item-container");var o=i.fileContentEl=i.contentEl.createDiv("sync-history-content-container mod-empty");o.createEl("p",{cls:"sync-history-content-empty",text:bQ.labelSelectFile()});var a=o.createDiv("sync-history-content");return i.titleSetting=new NI(a),i.titleSetting.controlEl.createEl("label",{text:Qf.plugins.sync.labelShowDiff()}),i.titleSetting.addToggle((function(e){return i.diffToggle=e.setSmall().setValue(!1)})).addButton((function(e){e.setButtonText(Qf.interface.labelCopyShort()).onClick((function(){yc(i.currentVersion.data),new JA(Qf.interface.copied({context:"generic"}))}))})),i.textareaEl=a.createEl("textarea",{cls:"sync-history-text",attr:{spellcheck:!1}}),i.diffEl=a.createDiv("sync-history-diff"),Zl.isMobile&&(o.detach(),i.backButtonEl=createDiv({cls:"modal-setting-back-button"},(function(e){e.createSpan("modal-setting-back-button-icon",(function(e){mx(e,"lucide-arrow-left")})),e.addEventListener("click",(function(){Ll(i.contentEl,i.historyListContainerEl,"left",(function(){var e,t;null===(e=i.backButtonEl)||void 0===e||e.detach(),null===(t=i.activeVersionEl)||void 0===t||t.removeClass("is-active"),i.activeVersionEl=null})),ik(i.historyListContainerEl)}))}))),i}return f(t,e),t.prototype.switchToPath=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(d){switch(d.label){case 0:return n=(t=this).versionListEl,i=t.fileContentEl,r=t.titleSetting,n.empty(),r.setName(Xc(e)),o=this.plugin.db,a=o.transaction("backups","readonly"),[4,a.store.index("path").getAll(e)];case 1:for((s=d.sent()).sort((function(e,t){return t.ts-e.ts})),this.activeVersionEl=null,l=function(e){var t=s[e],r=s[e+1],o=n.createDiv("file-recovery-list-item-header"),a=o.createDiv({cls:"file-recovery-list-item-details",text:window.moment(t.ts).format("llll")});a.createDiv("u-small u-muted").setText(wf(t.data.length));var l=function(){h.activeVersionEl&&h.activeVersionEl.removeClass("is-active"),h.activeVersionEl=o,h.activeVersionEl.addClass("is-active"),i.removeClass("mod-empty"),h.currentVersion=t,h.openHistory(t,r)};a.addEventListener("click",l),null!==c.activeVersionEl||Zl.isMobile||l()},c=this,u=0;u<s.length;u++)l(u);return[2]}}))}))},t.prototype.openHistory=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){return i=(n=this).textareaEl,r=n.diffEl,o=n.diffToggle,a=e.data,i.value=a,r.empty(),s=!1,l=function(){var e=o.getValue();if(i.toggle(!e),r.toggle(e),e&&!s){s=!0;var n="";t&&(n=t.data),r.empty(),r.appendChild(QH(n,a))}},o.onChange(l),l(),Zl.isMobile&&(tk(this.historyListContainerEl),Ll(this.contentEl,this.fileContentEl,"right"),this.titleEl.prepend(this.backButtonEl)),[2]}))}))},t.prototype.onOpen=function(){return g(this,void 0,void 0,(function(){var e,t=this;return y(this,(function(n){switch(n.label){case 0:return e=this.contentEl,[4,zw(this.contentEl,(function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t=this.plugin.db,n=t.transaction("backups","readonly"),[4,n.store.index("path").openCursor(null,"nextunique")];case 1:i=a.sent(),r=[],a.label=2;case 2:return i?(r.push(i.value.path),[4,i.continue()]):[3,4];case 3:return i=a.sent(),[3,2];case 4:return r.sort(xm),0===r.length?(this.titleEl.setText(bQ.name()),e.createEl("p",{text:bQ.labelNoHistoryFound()}),[2]):(o=this.searchComponent.inputEl,new CQ(this.app,o,r,this),setTimeout((function(){return o.focus()})),[2])}}))}))}))];case 1:return n.sent(),[2]}}))}))},t}(ZA),EQ=function(){function e(){this.id="markdown-importer",this.name=Qf.plugins.markdownFormatImporter.name(),this.description=Qf.plugins.markdownFormatImporter.desc()}return e.prototype.init=function(e,t){this.app=e,t.registerRibbonItem(Qf.plugins.markdownFormatImporter.actionOpen(),"lucide-binary",this.onOpen.bind(this)),t.registerGlobalCommand({id:"markdown-importer:open",name:Qf.plugins.markdownFormatImporter.actionOpen(),icon:"lucide-download",callback:this.onOpen.bind(this)})},e.prototype.onOpen=function(){return new PQ(this.app).open(),!1},e}(),SQ=/\^\^(\S(.*?\S)?)\^\^/g,xQ=/::(\S(.*?\S)?)::/g,TQ=/\[\[(\d+?)\]\]/g,DQ=/(^|\s)\#([^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]+)/g,AQ=/\B\#(\[\[[\w \t]*?\]\])/g,LQ=/\{\{\[\[(TODO|DONE)\]\]\}\}/g,PQ=function(e){function t(t){var n=e.call(this,t)||this;n.converters=[];var i=n.contentEl,r=n.converters;n.titleEl.setText(Qf.plugins.markdownFormatImporter.name());for(var o=n.conversionsEl=i.createDiv(),a=[{name:Qf.plugins.markdownFormatImporter.optionRoamTagFixer(),description:Qf.plugins.markdownFormatImporter.optionRoamTagFixerDescription(),convert:function(e,t,n,i){return n=n.replace(DQ,(function(e,t,n){for(var r=!0,o=0;o<n.length;o++){var a=n.charCodeAt(o);if(a<48||a>57){r=!1;break}}return r?e:(i.replaced++,t+"[["+n+"]]")})),n.replace(AQ,(function(e,t){return i.replaced++,t}))}},{name:Qf.plugins.markdownFormatImporter.optionRoamHighlightFixer(),description:Qf.plugins.markdownFormatImporter.optionRoamHighlightFixerDescription(),convert:function(e,t,n,i){return n.replace(SQ,(function(e,t){return i.replaced++,"=="+t+"=="}))}},{name:Qf.plugins.markdownFormatImporter.optionRoamTodoConverter(),description:Qf.plugins.markdownFormatImporter.optionRoamTodoConverterDescription(Wf),convert:function(e,t,n,i){return n.replace(LQ,(function(e,t){return i.replaced++,"TODO"===t?"[ ]":"[x]"}))}},{name:Qf.plugins.markdownFormatImporter.optionBearHighlightFixer(),description:Qf.plugins.markdownFormatImporter.optionBearHighlightFixerDescription(),convert:function(e,t,n,i){return n.replace(xQ,(function(e,t){return i.replaced++,"=="+t+"=="}))}},{name:Qf.plugins.markdownFormatImporter.zettelkastenLinkFixer(),description:Qf.plugins.markdownFormatImporter.zettelkastenLinkFixerDescription(),convert:function(e,t,n,i){return n.replace(TQ,(function(n,r){for(var o=0,a=e.vault.getAllLoadedFiles();o<a.length;o++){var s=a[o];if(s instanceof ww&&s.basename.contains(r))return i.replaced++,"[["+e.metadataCache.fileToLinktext(s,t.path)+"]]"}return n}))}},{name:Qf.plugins.markdownFormatImporter.zettelkastenLinkBeautifier(),description:Qf.plugins.markdownFormatImporter.zettelkastenLinkBeautifierDescription(),convert:function(e,t,n,i){return n.replace(TQ,(function(n,r){for(var o=0,a=e.vault.getAllLoadedFiles();o<a.length;o++){var s=a[o];if(s instanceof ww&&s.basename.contains(r))return i.replaced++,"[["+e.metadataCache.fileToLinktext(s,t.path)+"|"+s.basename.replace(r,"").trim()+"]]"}return n}))}}],s=function(e){new NI(o).setName(e.name).setDesc(e.description).addToggle((function(t){t.setValue(!1),r.push({toggle:t,conversion:e})}))},l=0,c=a;l<c.length;l++){s(c[l])}o.createEl("p",{cls:"setting-message mod-warning",text:Qf.plugins.markdownFormatImporter.msgAllFilesWarning()}),o.createEl("p",{cls:"setting-message mod-warning",text:Qf.plugins.markdownFormatImporter.msgOverrideFilesWarning()}),o.createDiv("modal-button-container").createEl("button",{cls:"mod-cta",text:Qf.plugins.markdownFormatImporter.labelStartConversion()}).addEventListener("click",n.onProcess.bind(n));var u=n.resultEl=createDiv();n.statusEl=u.createEl("p","u-center-text"),n.processedEl=u.createDiv("changelog-item mod-success"),n.modifiedEl=u.createDiv("changelog-item mod-highlighted"),n.replacedEl=u.createDiv("changelog-item mod-highlighted"),n.renderStats({processed:0,modified:0,replaced:0});var h=u.createDiv("modal-button-container");return(n.cancelEl=h.createEl("button",{cls:"mod-warning",text:Qf.plugins.markdownFormatImporter.labelStop()})).addEventListener("click",n.onCancel.bind(n)),(n.goBackEl=h.createEl("button",{cls:"",text:Qf.plugins.markdownFormatImporter.labelGoBack()})).addEventListener("click",n.onGoBack.bind(n)),(n.doneEl=h.createEl("button",{cls:"mod-cta",text:Qf.plugins.markdownFormatImporter.labelDone()})).addEventListener("click",n.close.bind(n)),n}return f(t,e),t.prototype.onProcess=function(){for(var e=this,t=[],n=0,i=this.converters;n<i.length;n++){var r=i[n];r.toggle.getValue()&&t.push(r.conversion)}0!==t.length&&(this.runnable=new dL({onCancel:function(){e.cancelEl.hide(),e.statusEl.setText(Qf.plugins.markdownFormatImporter.labelCancelling())}}),this.conversionsEl.detach(),this.contentEl.append(this.resultEl),this.cancelEl.show(),this.goBackEl.hide(),this.doneEl.hide(),this.statusEl.setText(Qf.plugins.markdownFormatImporter.labelProcessing()),this.process(t))},t.prototype.onCancel=function(){var e=this.runnable;e&&e.cancel()},t.prototype.onGoBack=function(){this.resultEl.detach(),this.contentEl.append(this.conversionsEl);for(var e=0,t=this.converters;e<t.length;e++){t[e].toggle.setValue(!1)}},t.prototype.onFinish=function(e){this.renderStats(e),this.cancelEl.hide(),this.goBackEl.show(),this.statusEl.setText(Qf.plugins.markdownFormatImporter.labelFinished()),this.doneEl.show()},t.prototype.renderStats=function(e){this.processedEl.setText(Qf.plugins.markdownFormatImporter.labelProcessedFiles()),this.processedEl.setAttribute("data-label",e.processed.toString()),this.modifiedEl.setText(Qf.plugins.markdownFormatImporter.labelModifiedFiles()),this.modifiedEl.setAttribute("data-label",e.modified.toString()),this.replacedEl.setText(Qf.plugins.markdownFormatImporter.labelTotalReplacements()),this.replacedEl.setAttribute("data-label",e.replaced.toString())},t.prototype.onClose=function(){this.onCancel(),this.onGoBack()},t.prototype.process=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w;return y(this,(function(y){switch(y.label){case 0:n=(t=this).app,i=t.runnable,r={processed:0,modified:0,replaced:0},o=n.vault.getMarkdownFiles(),y.label=1;case 1:y.trys.push([1,9,10,15]),a=!0,s=M(n.vault.iterateFiles(o)),y.label=2;case 2:return[4,s.next()];case 3:if(l=y.sent(),v=l.done)return[3,8];if(w=l.value,a=!1,c=w.file,u=w.content,i.isCancelled())return this.onFinish(r),[3,8];for(h=u,d=0,p=e;d<p.length;d++)f=p[d],h=f.convert(n,c,h,r);return h===u?[3,5]:(r.modified++,[4,n.vault.modify(c,h)]);case 4:y.sent(),y.label=5;case 5:return r.processed++,i.isCancelled()?(this.onFinish(r),[3,8]):(this.renderStats(r),r.processed%10!=0?[3,7]:[4,n.nextFramePromise()]);case 6:y.sent(),y.label=7;case 7:return a=!0,[3,2];case 8:return[3,15];case 9:return m=y.sent(),g={error:m},[3,15];case 10:return y.trys.push([10,,13,14]),a||v||!(b=s.return)?[3,12]:[4,b.call(s)];case 11:y.sent(),y.label=12;case 12:return[3,14];case 13:if(g)throw g.error;return[7];case 14:return[7];case 15:return this.onFinish(r),[2]}}))}))},t}(ZA),IQ=Qf.plugins.noteComposer,FQ=function(){function e(){this.id="note-composer",this.name=IQ.name(),this.description=IQ.desc(),this.defaultOn=!0,this.options={},this.app=null,this.pluginInstance=null}return e.prototype.init=function(e,t){var n=this;this.app=e,this.pluginInstance=t,t.registerGlobalCommand({id:"note-composer:merge-file",name:IQ.commandMergeFile(),icon:"lucide-git-merge",checkCallback:function(e){var t=n.app.workspace.getActiveFile();if(t&&"md"===t.extension){if(!e){var i=new OQ(n.app,n);i.setCurrentFile(t),i.open()}return!0}}}),t.registerGlobalCommand({id:"note-composer:split-file",name:IQ.commandSplitFile(),icon:"lucide-scissors",editorCheckCallback:function(e,t,i){if(i.file&&t.somethingSelected()){if(!e){var r=new BQ(n.app,t,n);r.setCurrentFile(i.file),r.open()}return!0}}}),t.registerGlobalCommand({id:"note-composer:extract-heading",name:IQ.commandExtractHeading(),icon:"lucide-scissors",editorCheckCallback:function(e,t,i){if(i.file){var r=t.getCursor().line;return null!==eC(t.getLine(r))?(e||n.extractHeading(i.file,t),!0):void 0}}})},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{askBeforeMerging:!0},t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.workspace.on("editor-menu",this.onEditorMenu,this)),t.addSettingTab(new NQ(e,t,this)),[2]}}))}))},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.pluginInstance.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.onFileMenu=function(e,t,n){var i=this;"link-context-menu"!==n&&t instanceof ww&&"md"===t.extension&&e.addItem((function(e){return e.setSection("action").setTitle(IQ.actionMergeFile()).setIcon("lucide-git-merge").onClick((function(){var e=new OQ(i.app,i);e.setCurrentFile(t),e.open()}))}))},e.prototype.onEditorMenu=function(e,t,n){var i=this,r=n.file;if(r){t.getSelection().trim()&&e.addItem((function(e){return e.setTitle(IQ.commandSplitFile()).setIcon("lucide-git-branch-plus").setSection("selection").onClick((function(){var e=new BQ(i.app,t,i);e.setCurrentFile(r),e.open()}))}));var o=t.getCursor().line;null!==eC(t.getLine(o))&&e.addItem((function(e){return e.setTitle(IQ.commandExtractHeading()).setIcon("lucide-git-branch-plus").onClick((function(){return i.extractHeading(r,t)}))}))}},e.prototype.extractHeading=function(e,t){var n=t.getCursor().line,i=this.getSelectionUnderHeading(e,t,n);if(i){var r=i.heading,o=i.start,a=i.end;t.setSelection(o,a);var s=new BQ(this.app,t,this,r);s.setCurrentFile(e),s.open()}else new JA(IQ.msgFailToFindHeading())},e.prototype.getSelectionUnderHeading=function(e,t,n){var i=this.app.metadataCache.getFileCache(e);if(!i)return null;var r=i.headings;if(!r||0===r.length)return null;for(var o,a=0,s=null,l=null,c=0,u=r;c<u.length;c++){var h=u[c];if(s&&h.level<=a){l=h;break}s||h.position.start.line!==n||(a=h.level,s=h)}if(!s)return null;if(l)for(o=l.position.start.line-1;""===t.getLine(o).trim()&&o>n;)o--;else o=t.lineCount()-1;return{heading:s.heading.trim(),start:Am(n,0),end:Am(o,t.getLine(o).length)}},e.prototype.applyTemplate=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return(i=this.options.template)?(r=this.app,(o=r.metadataCache.getFirstLinkpathDest(i,""))?[4,r.vault.cachedRead(o)]:(new JA(IQ.msgFailToFetchTemplate({template:i})),[2,e])):[2,e];case 1:return(a=s.sent())?(a.contains("{{content}}")||(a+="\n\n{{content}}"),[2,J$(a,{fromTitle:t,newTitle:n,content:e})]):[2,e]}}))}))},e}(),OQ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.currentFile=null,i.emptyStateText=IQ.labelNoFiles(),i.composer=n,i.shouldShowNonImageAttachments=!1,i.shouldShowImages=!1,i.shouldShowCanvas=!1,i.setPlaceholder(IQ.promptSelectFileToMerge()),i.setInstructions([{command:"â†‘â†“",purpose:IQ.instructionNavigate()},{command:"â†µ",purpose:IQ.instructionMerge()},{command:Ul?"cmd â†µ":"ctrl â†µ",purpose:IQ.instructionCreateNew()},{command:"shift â†µ",purpose:IQ.instructionMergeAtTop()},{command:"esc",purpose:IQ.instructionDismiss()}]),i.scope.register(["Shift"],"Enter",(function(e){return i.selectActiveSuggestion(e),!1})),i.scope.register(["Mod"],"Enter",(function(e){return i.selectActiveSuggestion(e),!1})),i}return f(t,e),t.prototype.setCurrentFile=function(e){this.currentFile=e},t.prototype.onChooseSuggestion=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m=this;return y(this,(function(v){switch(v.label){case 0:if(n=this.app,i=this.inputEl.value,!Ak.isModifier(t,"Mod")&&e&&"unresolved"!==e.type)return[3,5];o=i,e&&"unresolved"===e.type&&(o=e.linktext),a=n.fileManager.getNewFileParent(this.currentFile.path,o),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,n.fileManager.createNewMarkdownFile(a,o)];case 2:return r=v.sent(),[3,4];case 3:return s=v.sent(),new JA(s.toString()),[2];case 4:return[3,6];case 5:"bookmark"===e.type?"file"===e.item.type&&(l=n.vault.getAbstractFileByPath(e.item.path))instanceof ww&&(r=l):r=e.file,v.label=6;case 6:return r&&r!==this.currentFile?(c=this.currentFile,u=this.composer,h=!1,d=function(){return g(m,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return h&&(u.options.askBeforeMerging=!1,u.pluginInstance.saveData(u.options)),[4,this.mergeFile(r,c,t.shiftKey?"prepend":"append")];case 1:return e.sent(),[2]}}))}))},u.options.askBeforeMerging?((p=document.createDocumentFragment()).createEl("p",{text:IQ.labelConfirmFileMerge({file:c.basename,destination:r.basename})}),f=new XA(n).setTitle(IQ.labelMergeFile()).setContent(p),Zl.isMobile?f.addButton("mod-warning",Qf.dialogue.buttonDeleteDoNotAskAgain(),(function(){return g(m,void 0,void 0,(function(){return y(this,(function(e){return[2,d()]}))}))})):f.addCheckbox(Qf.dialogue.labelDoNotAskAgain(),(function(e){h=e.target.checked})),f.addButton("mod-warning",IQ.buttonMerge(),(function(){return d()})).addCancelButton().open()):d(),[2]):[2]}}))}))},t.prototype.mergeFile=function(e,t){return g(this,arguments,void 0,(function(e,t,n){var i,r,o,a,s=this;return void 0===n&&(n="append"),y(this,(function(l){switch(l.label){case 0:return i=this.app,r=i.fileManager,[4,i.vault.read(t)];case 1:return o=l.sent(),[4,this.composer.applyTemplate(o,t.basename,e.basename)];case 2:return a=l.sent(),[4,r.runAsyncLinkUpdate((function(i){return g(s,void 0,void 0,(function(){var o,s,l;return y(this,(function(c){switch(c.label){case 0:return[4,r.insertIntoFile(e,a,n)];case 1:return c.sent(),[4,r.trashFile(t)];case 2:if(c.sent(),i)for(o=0,s=i;o<s.length;o++)(l=s[o]).resolvedFile===t&&(l.resolvedFile=e,l.resolvedPaths=[]);return[2]}}))}))}))];case 3:return l.sent(),[4,i.workspace.getLeaf().openFile(e)];case 4:return l.sent(),[2]}}))}))},t}(IZ),BQ=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;if(o.defaultValue="",o.allowCreateNewFile=!0,o.editor=n,o.composer=i,o.shouldShowUnresolved=!0,o.shouldShowNonImageAttachments=!1,o.shouldShowImages=!1,o.shouldShowCanvas=!1,!r){var a=n.getSelection().split("\n");if(a.length>0)r=eC(a[0])}return r||(r=""),o.defaultValue=r,o.setPlaceholder(IQ.promptSelectFileToMerge()),o.setInstructions([{command:"â†‘â†“",purpose:IQ.instructionNavigate()},{command:"â†µ",purpose:IQ.instructionAppend()},{command:Ul?"cmd â†µ":"ctrl â†µ",purpose:IQ.instructionCreateNew()},{command:"shift â†µ",purpose:IQ.instructionPrepend()},{command:"esc",purpose:IQ.instructionDismiss()}]),o.scope.register(["Shift"],"Enter",(function(e){return o.selectActiveSuggestion(e),!1})),o.scope.register(["Mod"],"Enter",(function(e){return o.selectActiveSuggestion(e),!1})),o}return f(t,e),t.prototype.onOpen=function(){e.prototype.onOpen.call(this),this.inputEl.value=this.defaultValue,this.updateSuggestions()},t.prototype.setCurrentFile=function(e){this.currentFile=e},t.prototype.onChooseSuggestion=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:n=this.app,i=this.editor.getSelection(),r=Ak.isModifier(t,"Mod"),a=this.currentFile,h.label=1;case 1:return h.trys.push([1,7,,8]),!r&&e?[3,3]:[4,n.fileManager.createNewMarkdownFileFromLinktext(this.inputEl.value,a.path)];case 2:return o=h.sent(),[3,6];case 3:return"unresolved"!==e.type?[3,5]:[4,n.fileManager.createNewMarkdownFileFromLinktext(e.linktext,a.path)];case 4:return o=h.sent(),[3,6];case 5:"file"!==e.type&&"alias"!==e.type||(o=e.file),h.label=6;case 6:return[3,8];case 7:return s=h.sent(),new JA(s.toString()),[2];case 8:return[4,this.composer.applyTemplate(i,a.basename,o.basename)];case 9:return l=h.sent(),[4,n.fileManager.insertIntoFile(o,l,t.shiftKey?"prepend":"append")];case 10:return h.sent(),c=n.fileManager.generateMarkdownLink(o,a.path),"embed"===(u=this.composer.options.replacementText)?this.editor.replaceSelection("!"+c):"none"===u?this.editor.replaceSelection(""):this.editor.replaceSelection(c),[2]}}))}))},t}(IZ),NQ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new NI(t).setName(IQ.optionSplitReplacementText()).setDesc(IQ.optionSplitReplacementTextDescription()).addDropdown((function(t){return t.addOption("link",IQ.optionChoiceSplitReplacementTextLink()).addOption("embed",IQ.optionChoiceSplitReplacementTextEmbed()).addOption("none",IQ.optionChoiceSplitReplacementTextNone()).setValue(n.replacementText||"link").onChange((function(t){n.replacementText=t,e.plugin.saveData(n)}))})),new NI(t).setName(IQ.optionTemplateFile()).setDesc(IQ.optionTemplateFileDescription(Wf)).addText((function(t){t.setPlaceholder(Qf.setting.filePathExamplePlaceholder()).setValue(n.template).onChange((function(t){n.template=t.trim(),e.plugin.saveData(n)})),new tQ(e.app,t.inputEl)})),new NI(t).setName(IQ.optionConfirmFileMerge()).setDesc(IQ.optionConfirmFileMergeDescription()).addToggle((function(t){return t.setValue(n.askBeforeMerging).onChange((function(t){n.askBeforeMerging=t,e.plugin.saveData(n)}))}))},t}(aY),RQ="outgoing-link",HQ=Qf.plugins.outgoingLinks,VQ=function(){function e(){this.id="outgoing-link",this.name=HQ.name(),this.description=HQ.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerViewType(RQ,(function(e){return new zQ(e)})),t.registerGlobalCommand({id:"outgoing-links:open",name:HQ.actionShow(),icon:"lucide-link",callback:function(){n.app.workspace.ensureSideLeaf(RQ,"right",{active:!0})}}),t.registerGlobalCommand({id:"outgoing-links:open-for-current",name:HQ.actionOpenForCurrent(),icon:"lucide-link",checkCallback:this.openForCurrentFile.bind(this)})},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.onUserDisable=function(e){e.workspace.detachLeavesOfType(RQ)},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(RQ,"right",{reveal:!1})},e.prototype.onFileMenu=function(e,t,n,i){var r=this;!Zl.isMobile&&t instanceof ww&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(HQ.actionOpen()).setIcon("links-going-out").onClick((function(){return g(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"horizontal").setViewState({type:RQ,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))}))},e.prototype.openForCurrentFile=function(e){var t=this.app.workspace,n=t.getActiveFile();if(n){if(!e)t.splitActiveLeaf("vertical").setViewState({type:RQ,active:!0,group:t.activeLeaf,state:{file:n.path}});return!0}},e}(),zQ=function(e){function t(t){var n=e.call(this,t)||this;n.icon="links-going-out";var i=n.contentEl.createDiv("outgoing-link-pane");return n.outgoingLink=n.addChild(new qQ(n.app,i)),n.requestUpdate(),n}return f(t,e),t.prototype.getDisplayText=function(){return!this.file||Zl.isMobile?HQ.name():HQ("tab-title",{displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return RQ},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.linksCollapsed=this.outgoingLink.linksCollapsed,t.unlinkedCollapsed=this.outgoingLink.unlinkedCollapsed,t},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return o.sent(),i=t.linksCollapsed,r=t.unlinkedCollapsed,isBoolean(i)?[4,this.outgoingLink.setLinksCollapsed(i,!1)]:[3,3];case 2:o.sent(),o.label=3;case 3:return isBoolean(r)?[4,this.outgoingLink.setUnlinkedCollapsed(r,!1)]:[3,5];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},t.prototype.onResize=function(){this.outgoingLink.onResize()},t.prototype.update=function(){this.leaf.updateHeader();var e=this.outgoingLink;e.file=this.file,e.tooltipPlacement=this.getSideTooltipPlacement(),e.update()},t}(ZP),qQ=function(e){function t(t,n,i){var r=e.call(this)||this;r.showSearch=!1,r.outgoingFile=null,r.linksCollapsed=!1,r.linksHeaderEl=null,r.linksCountEl=null,r.linksQueue=null,r.unlinkedFile=null,r.unlinkedCollapsed=!1,r.unlinkedHeaderEl=null,r.unlinkedCountEl=null,r.unlinksQueue=null,r.unlinkedDomInfo=new WeakMap,r.requestUpdate=mc(r.update.bind(r),50),r.app=t,i=i||n;var o=r.linksHeaderEl=n.createDiv("tree-item-self is-clickable");o.createSpan("tree-item-icon collapse-icon",(function(e){mx(e,"right-triangle")})),o.createDiv({cls:"tree-item-inner",text:HQ.labelLinks()}),o.addEventListener("click",r.toggleLinksCollapsed.bind(r)),r.linksCountEl=o.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.outgoingLinkDom=new UQ(n.createDiv("search-result-container")),r.outgoingLinkInfinityScroller=new dI(i),r.outgoingLinkInfinityScroller.rootEl=r.outgoingLinkDom;var a=r.unlinkedHeaderEl=n.createDiv("tree-item-self is-clickable");return a.createSpan("tree-item-icon collapse-icon",(function(e){mx(e,"right-triangle")})),a.createDiv({cls:"tree-item-inner",text:HQ.labelUnlinkedMentions()}),a.addEventListener("click",r.toggleUnlinkedCollapsed.bind(r)),r.unlinkedCountEl=a.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.unlinkedDom=new pO(t,n.createDiv("search-result-container"),HQ.labelUnlinkedMentions(),i),r.setUnlinkedCollapsed(!0,!1),r}return f(t,e),t.prototype.onload=function(){var e=this.app,t=e.vault;this.registerEvent(e.metadataCache.on("resolve",this.onFileResolved,this)),this.registerEvent(t.on("delete",this.onFileDeleted,this))},t.prototype.onResize=function(){this.outgoingLinkInfinityScroller.onResize(),this.unlinkedDom.onResize()},t.prototype.toggleLinksCollapsed=function(){this.setLinksCollapsed(!this.linksCollapsed,!0)},t.prototype.setLinksCollapsed=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e===this.linksCollapsed?[2]:(this.linksCollapsed=e,this.updateHeaderTooltip(this.linksHeaderEl,e),[4,Ml(this.outgoingLinkDom.el,e,t)]);case 1:return n.sent(),e||this.outgoingLinkInfinityScroller.invalidateAll(),this.update(),this.app.workspace.requestSaveLayout(),this.outgoingLinkInfinityScroller.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},t.prototype.toggleUnlinkedCollapsed=function(){this.setUnlinkedCollapsed(!this.unlinkedCollapsed,!0)},t.prototype.setUnlinkedCollapsed=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e===this.unlinkedCollapsed?[2]:(this.unlinkedCollapsed=e,[4,this.setSectionCollapsed(this.unlinkedHeaderEl,this.unlinkedDom,e,t)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.outgoingLinkInfinityScroller.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},t.prototype.updateHeaderTooltip=function(e,t){LD(e,t),Rx(e,t?Qf.interface.tooltip.clickToExpand():Qf.interface.tooltip.clickToCollapse(),{placement:this.tooltipPlacement})},t.prototype.setSectionCollapsed=function(e,t,n,i){return g(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return this.updateHeaderTooltip(e,n),[4,t.toggle(n,i)];case 1:return r.sent(),this.update(),[2]}}))}))},t.prototype.onFileResolved=function(e){e===this.file&&(this.outgoingFile=null,this.unlinkedFile=null,this.update())},t.prototype.onFileDeleted=function(){this.unlinkedFile=null,this.requestUpdate()},t.prototype.update=function(){var e=this.file;this.outgoingFile!==e&&this.recomputeLinks(),this.unlinkedFile!==e&&this.recomputeUnlinked(),this.updateHeaderTooltip(this.linksHeaderEl,this.linksCollapsed),this.updateHeaderTooltip(this.unlinkedHeaderEl,this.unlinkedCollapsed)},t.prototype.recomputeLinks=function(){var e=this,t=this.linksQueue;t&&!t.runnable.isCancelled()&&(t.runnable.cancel(),this.outgoingFile=null),this.linksQueue=null;var n=this.linksCollapsed,i=this.linksCountEl;if(n)i.hide();else{var r=this.file;this.outgoingFile=r;var o=this.outgoingLinkDom,a=this.outgoingLinkInfinityScroller;if(a.queueCompute(),i.show(),i.setText("0"),r&&"md"===r.extension){var s=this.app.metadataCache,l=s.getFileCache(r);if(l){var c=[];if(GS(l,(function(e){c.push({linktext:e.link,pos:AS(e)?e.position.start.offset:0})})),c.sort((function(e,t){return e.pos-t.pos})),0!==c.length){for(var u=r.path,h=0,d=0,p=o.vChildren.children;d<p.length;d++){p[d].invalidated=!0}var f=function(){var e=o.vChildren,t=w([],o.vChildren.children,!0);t.sort((function(e,t){return e.pos-t.pos}));for(var n=0;n<t.length;n++){var r=t[n];if(-1!==h&&r.pos>h)break;r.invalidated&&(t.splice(n,1),n--)}e.setChildren(t),a.queueCompute(),i.setText(String(e.children.length))};t=this.linksQueue=new pL({onStart:function(){},onStop:function(){h=-1,f()},onCancel:function(){e.linksQueue=null}});var m=new Set;t.addList(c);var v=mL(t.generator(),{batchSize:20,beforePause:function(){f()}});g(e,void 0,void 0,(function(){var e,t,n,i,r,a,l,c,d,p,f,g,b,w,k,C;return y(this,(function(y){switch(y.label){case 0:y.trys.push([0,5,6,11]),e=!0,t=M(v),y.label=1;case 1:return[4,t.next()];case 2:if(n=y.sent(),b=n.done)return[3,4];if(C=n.value,e=!1,i=C.linktext,r=C.pos,a=WS(i),l=a.path,c=a.subpath,(d=s.getFirstLinkpathDest(l,u))||(l=z_(l)),p=(d?d.path:l)+c,m.has(p))return[3,3];m.add(p),(f=new _Q(this,i,l,c,u,d)).pos=r,h=r,o.vChildren.addChild(f),y.label=3;case 3:return e=!0,[3,1];case 4:return[3,11];case 5:return g=y.sent(),w={error:g},[3,11];case 6:return y.trys.push([6,,9,10]),e||b||!(k=t.return)?[3,8]:[4,k.call(t)];case 7:y.sent(),y.label=8;case 8:return[3,10];case 9:if(w)throw w.error;return[7];case 10:return[7];case 11:return[2]}}))}))}else o.vChildren.clear()}else o.vChildren.clear()}else o.vChildren.clear()}},t.prototype.recomputeUnlinked=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,k,C,E,S,x,T,D,A,L,P,I,F,O,B,N,R,H=this;return y(this,(function(V){switch(V.label){case 0:return(e=this.unlinksQueue)&&!e.runnable.isCancelled()&&(e.runnable.cancel(),this.unlinkedFile=null),this.unlinksQueue=null,n=(t=this).unlinkedCollapsed,i=t.unlinkedCountEl,n?(i.hide(),[2]):(r=this.file,o=this.unlinkedDom,s=(a=this).app,l=a.unlinkedDomInfo,this.unlinkedFile=r,i.show(),i.setText("0"),r&&"md"===r.extension?(c=new Map,u=function(e,t){e=e.toLowerCase();var n=c.get(e)||{text:e,files:[]};c.set(e,n),n.files.contains(t)||n.files.push(t)},h=s.metadataCache.getFileCache(r),[4,s.vault.cachedRead(r)]):(o.emptyResults(),[2]));case 1:for(d=V.sent(),p=s.vault.getMarkdownFiles(),f=0,m=p;f<m.length;f++)if((v=m[f])!==r&&!s.metadataCache.isUserIgnored(v.path)&&(u(v.basename,v),(b=s.metadataCache.getFileCache(v))&&(k=MS(b.frontmatter))))for(C=0,E=k;C<E.length;C++)(S=E[C])&&u(S,v);if(x=Array.from(c.values()).sort((function(e,t){return xm(e.text,t.text)})),T=o.getResult(r)){for(D=T.vChildren,A=w([],D.children,!0),L=0;L<A.length;L++)(P=A[L])instanceof dO&&((I=l.get(P))&&c.has(I.text)||(A.splice(L,1),L--));D.setChildren(A),T.content=d}else o.emptyResults(),T=o.addResult(r,{content:[]},d,!1);return T.separateMatches=!0,F=function(){T.vChildren.sort((function(e,t){return Array.isArray(e.matches)?Array.isArray(t.matches)?e.matches[0][0]-t.matches[0][0]:1:-1})),o.infinityScroll.queueCompute(),i.setText(String(T.vChildren.size()))},e=this.unlinksQueue=new pL({onStart:function(){},onStop:function(){F()},onCancel:function(){H.linksQueue=null}}),O=0,(B=null==h?void 0:h.frontmatterPosition)&&(O=B.end.offset),N=d.toLowerCase(),e.addList(x),R=mL(e.generator(),{beforePause:function(){F()}}),g(H,void 0,void 0,(function(){var e,t,n,i,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=!0,t=M(R),u.label=1;case 1:return[4,t.next()];case 2:if(n=u.sent(),a=n.done)return[3,4];c=n.value,e=!1,i=c,this.processInfo(r,d,N,h,O,T,i),u.label=3;case 3:return e=!0,[3,1];case 4:return[3,11];case 5:return o=u.sent(),s={error:o},[3,11];case 6:return u.trys.push([6,,9,10]),e||a||!(l=t.return)?[3,8]:[4,l.call(t)];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return[2]}}))})).then(),[2]}}))}))},t.prototype.processInfo=function(e,t,n,i,r,o,a){for(var s=a.files,l=a.text,c=w([],o.vChildren.children,!0),u=0;u<c.length;u++){var h=c[u];if(h instanceof dO){var d=this.unlinkedDomInfo.get(h);d&&d.text!==l||(c.splice(u,1),u--)}}o.vChildren.setChildren(c);for(var p=$L(l),f=new RegExp(p,"giy"),m=p.startsWith("(?:")?-1:0,v=n.indexOf(l,r),g=function(){f.lastIndex=v+m;var r=v,c=v+l.length;if(v=n.indexOf(l,c),!f.test(t))return"continue";if(jS(i,(function(e){return e.position.start.offset<=r&&e.position.end.offset>=c})))return"continue";var u=[r,c],h=y.renderMatch(e,o,s,i,t,u);y.unlinkedDomInfo.set(h,a),o.vChildren.addChild(h)},y=this;-1!==v;)g()},t.prototype.renderMatch=function(e,t,n,i,r,o){var a=this,s=this.app,l=GL(r,o),c=l[0],u=l[1],h=l[2],d=l[3],p=new dO(t,r,i,c,u,[o]);return p.onMatchRender=function(r,l){for(var c=l.createDiv({cls:"search-result-file-match-destination-file-container"}),u=function(n){var r=c.createDiv({cls:"search-result-file-match-destination-file"});r.createSpan({cls:"search-result-file-match-destination-file-icon"},(function(e){mx(e,"lucide-link")})),r.createSpan({cls:"search-result-file-match-destination-file-name",text:n.basename});var u="/"!==n.parent.path,h=HQ.tooltipLinkFile();u&&(h=$c(n.path)+"\n\n"+h),Rx(r,h),r.addEventListener("click",(function(r){return g(a,void 0,void 0,(function(){var a,c,u,h,d,p,f;return y(this,(function(m){switch(m.label){case 0:return r.preventDefault(),l.detach(),t.invalidate(),a=s.vault,c=o[0],u=o[1],n?[4,a.read(e)]:[2];case 1:return h=m.sent(),d=h.slice(c,u),p=s.fileManager.generateMarkdownLink(n,e.path,"",d),(null===(f=i.sections)||void 0===f?void 0:f.some((function(e){return"table"===e.type&&e.position.start.offset<=c&&e.position.end.offset>=u})))&&(p=p.replace("|","\\|")),h=h.slice(0,c)+p+h.slice(u),[4,a.modify(e,h)];case 2:return m.sent(),[2]}}))}))}))},h=0,d=n;h<d.length;h++){u(d[h])}},p.render(h,d),p},t}(xA),UQ=function(e){this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.vChildren=new eI(this),this.pusherEl=uI(),this.el=e,this.childrenEl=e},_Q=function(e,t,n,i,r,o){this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.invalidated=!1,this.sourcePath=r;var a=e.app,s=this.el=createDiv("tree-item-self is-clickable outgoing-link-item"),l=s.createSpan("tree-item-icon"),c="lucide-link",u=n,h="";if(o)if(i){var d=JS(a.metadataCache.getFileCache(o),i);d?"heading"===d.type?(c="heading-glyph",u=d.current.heading,h=n):"block"===d.type&&(c="lucide-layout-list",u=d.block.id,h=n):(c="lucide-file-question",u=i,h=n)}else c="lucide-link","/"!==o.parent.path&&(h=Yc(o.path));else c="lucide-file-plus",Rx(s,HQ.tooltipNotCreated());mx(l,c);var p=s.createDiv({cls:"tree-item-inner"});if(p.createDiv({cls:"tree-item-inner-text",text:u}),h&&p.createDiv({cls:"tree-item-inner-subtext",text:h}),s.onClickEvent((function(e){0!==e.button&&1!==e.button||a.workspace.openLinkText(t,r,Ak.isModEvent(e))})),s.addEventListener("contextmenu",(function(e){var n=(new PA).addSections(["title","open","action","view","info","","danger"]);a.workspace.handleLinkContextMenu(n,t,r)&&(e.preventDefault(),n.setParentElement(s).showAtMouseEvent(e))})),s.addEventListener("mouseover",(function(n){!n.defaultPrevented&&xc(n,s)&&(n.preventDefault(),a.workspace.trigger("hover-link",{event:n,source:"search",hoverParent:e,targetEl:s,linktext:t,sourcePath:r}))})),o){var f=a.dragManager;f.handleDrag(s,(function(e){return f.dragFile(e,o)}))}},WQ="outline";function jQ(e){var t="\n"===e.charAt(e.length-1),n="\n"===e.charAt(e.length-2);return t?n?e:e+"\n":e+"\n\n"}var GQ=function(e){function t(t,n,i){var r=e.call(this)||this;return r.pusherEl=uI(),r.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},r.vChildren=new eI(r),r.view=t,r.tree=n,r.heading=i,r.setClickable(!0),r.setCollapsible(!1),r.headingText=function(e){var t=DS(pS(e.heading));return t||(t=e.heading),t}(r.heading),r.innerEl.setText(r.headingText),r}return f(t,e),t.prototype.onSelfClick=function(e){var t=this.view,n=t.findCorrespondingLeaf(),i={line:this.heading.position.start.line};if(n){t.leaf.workspace.setActiveLeaf(n,{focus:!0}),n.view.setEphemeralState(i)}else{var r=this.view,o=r.app,a=r.file;(n=o.workspace.getLeaf()).openFile(a,{eState:i})}},t.prototype.updateCollapsed=function(t){return g(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return this.collapsed||null===(i=(n=this.tree).handleCollapseAll)||void 0===i||i.call(n,!1),[4,e.prototype.updateCollapsed.call(this,t)];case 1:return r.sent(),this.tree.infinityScroll.invalidate(this),[2]}}))}))},t}(JP),KQ=function(){function e(){this.id="outline",this.name=Qf.plugins.outline.name(),this.description=Qf.plugins.outline.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerViewType(WQ,(function(e){return new YQ(e,n)})),t.registerGlobalCommand({id:"outline:open",name:Qf.plugins.outline.actionShow(),icon:"lucide-list",callback:function(){n.app.workspace.ensureSideLeaf(WQ,"right",{active:!0})}}),t.registerGlobalCommand({id:"outline:open-for-current",name:Qf.plugins.outline.actionOpenForCurrent(),icon:"lucide-list",checkCallback:this.openTocForActiveFile.bind(this)})},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),e.workspace.registerHoverLinkSource("outline",{display:this.name,defaultMod:!0})},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(WQ,"right",{reveal:!1})},e.prototype.onFileMenu=function(e,t,n,i){var r=this;!Zl.isMobile&&t instanceof ww&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(Qf.plugins.outline.actionOpen()).setIcon("lucide-list").onClick((function(){return g(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"vertical").setViewState({type:WQ,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))}))},e.prototype.openTocForActiveFile=function(e){var t=this.app.workspace,n=t.getActiveFile();if(n){if(!e)t.splitActiveLeaf("vertical").setViewState({type:WQ,active:!0,group:t.activeLeaf,state:{file:n.path}});return!0}},e}(),YQ=function(e){function t(t,n){var i=e.call(this,t)||this;i.icon="lucide-list",i.activeEl=null,i.searchQuery=null,i.isShowingSearch=!1,i.followCursor=!1,i.onSelectionChange=mc(i.handleSelectionChange.bind(i),20),i.plugin=n;var r=i.contentEl;i.scope=new Tk(i.app.scope),i.tree=new fI(i,{app:i.app,containerEl:r,id:WQ,scope:i.scope,handleCollapseAll:i.handleCollapseAll.bind(i)}),i.tree.isAllCollapsed=!1;var o=new XP(i.app,i.containerEl);return i.showSearchButtonEl=o.addNavButton("lucide-search",Qf.plugins.backlinks.labelShowSearch(),i.onToggleShowSearch.bind(i)),i.searchComponent=new WI(o.navHeaderEl).setPlaceholder(Qf.plugins.search.promptStartSearch()).onChange(mc(i.updateSearch.bind(i),300,!0)).then((function(e){Rx(e.clearButtonEl,Qf.plugins.search.tooltipClearSearch()),e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(Zl.isMobile&&xw(),i.updateSearch())})),e.containerEl.hide()})),i.followCursorButtonEl=o.addNavButton("lucide-gallery-vertical",Qf.plugins.outline.labelFollowCursor(),i.onToggleFollowCursor.bind(i)),i.collapseOrExpandAllEl=o.addNavButton("lucide-chevrons-down-up",Qf.plugins.fileExplorer.actionCollapseAll(),(function(){return i.tree.toggleCollapseAll()})),i.emptyEl=i.contentEl.createDiv({cls:"pane-empty",text:Qf.plugins.outline.labelNoHeadings()}),i.app.dragManager.handleDrop(r,(function(e,t,n){if("outline"===t.source&&"heading"===t.type&&t.file===i.file){if(!i.tree.root.vChildren.hasChildren())return;var r=mI(e,i.tree),o=wI(i.tree,r,[],n);return n||g(i,void 0,void 0,(function(){var e,n,i,o,a,s,l,c,u,h,d,p,f,m,v;return y(this,(function(g){switch(g.label){case 0:if(!(e=this.app.metadataCache.getFileCache(this.file))||!e.headings||!(null==r?void 0:r.node))return[2];if(n=e.headings,i=t.heading,o=n.indexOf(i),a=r.node.heading,s=n.indexOf(a),-1===o||-1===s)return[2];if("after"===r.placement&&(s++,a=n[s]),o===s)return[2];for(l=o+1;l<n.length&&!(n[l].level<=i.level);l++);return c=i.position.start.offset,u=l<n.length?n[l].position.start.offset:-1,h=a?a.position.start.offset:-1,d=Math.max(c,u,h)+1,f=-1===u?d:u,(p=-1===h?d:h)>=c&&p<=f?[2]:[4,this.app.vault.read(this.file)];case 1:return m=g.sent(),-1===u&&(u=m.length),-1===h&&(h=m.length),v=jQ(m.substring(c,u)),m=h<c?jQ(m.substring(0,h))+v+m.substring(h,c)+m.substring(u):m.substring(0,c)+jQ(m.substring(u,h))+v+m.substring(h),[4,this.app.vault.modify(this.file,m)];case 2:return g.sent(),[2]}}))})),{dropEffect:"move",hoverEl:o,hoverClass:"is-active"}}})),i}return f(t,e),t.prototype.findCorrespondingLeaf=function(){var e,t=this.leaf,n=t.group,i=t.workspace;if(n)e=i.getGroupLeaves(n);else{e=[];var r=i.getActiveFileView();r&&e.push(r.leaf)}for(var o=0,a=e;o<a.length;o++){var s=a[o];if(s&&s.view instanceof LY&&s.view.file===this.file)return s}return null},t.prototype.handleCollapseAll=function(e){this.tree.isAllCollapsed=e,e?(mx(this.collapseOrExpandAllEl,"lucide-chevrons-up-down"),Rx(this.collapseOrExpandAllEl,Qf.plugins.tagPane.actionExpandAll())):(mx(this.collapseOrExpandAllEl,"lucide-chevrons-down-up"),Rx(this.collapseOrExpandAllEl,Qf.plugins.tagPane.actionCollapseAll()))},t.prototype.getDisplayText=function(){return!this.file||Zl.isMobile?Qf.plugins.outline.name():Qf.plugins.outline.tabTitle({displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return WQ},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.followCursor=this.followCursor,t.showSearch=this.isShowingSearch,t.searchQuery=this.searchComponent.getValue(),t},t.prototype.setState=function(t,n){return g(this,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return a.sent(),i=t.followCursor,r=t.searchQuery,o=t.showSearch,isBoolean(i)&&this.setFollowCursor(i),isBoolean(o)&&this.setShowSearch(o),String.isString(r)&&(this.searchComponent.setValue(r),this.updateSearch()),[2]}}))}))},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.onload=function(){this.registerEvent(this.app.workspace.on("editor-selection-change",this.onSelectionChange)),this.registerEvent(this.app.workspace.on("markdown-scroll",mc(this.onMarkdownScroll.bind(this),20))),this.registerEvent(this.app.metadataCache.on("changed",this.onFileChanged,this))},t.prototype.findActiveHeading=function(e){var t;if("preview"===e.getMode()){var n=e.scroll;iI(this.tree.root,(function(e){n>=e.heading.position.end.line&&(t=e)}))}else if(e.file){var i=e.editor.listSelections().first(),r=jD(this.app,e.file,i.head);iI(this.tree.root,(function(e){if(e.heading===r)return t=e,!0}))}return t},t.prototype.setHighlightedItem=function(e){var t;(null==e?void 0:e.selfEl)!==this.activeEl&&(null===(t=this.activeEl)||void 0===t||t.removeClass("is-active"),this.activeEl=null,e&&(this.activeEl=e.selfEl,this.activeEl.addClass("is-active"),this.followCursor&&this.tree.infinityScroll.scrollIntoView(e,20)))},t.prototype.getOwner=function(){var e=this.app.workspace.activeEditor,t=this.findCorrespondingLeaf();return t&&t.view instanceof LY?t.view:e&&e.file===this.file?e:null},t.prototype.onMarkdownScroll=function(e){if(e===this.getOwner()){var t=this.findActiveHeading(e);this.setHighlightedItem(t)}},t.prototype.onFileChanged=function(e){this.app.workspace.layoutReady&&e===this.file&&this.requestUpdate()},t.prototype.handleSelectionChange=function(){var e=this.getOwner();if(e&&!(e instanceof LY&&e.dirty||e instanceof nH&&e.dirty)){var t=this.findActiveHeading(e);this.setHighlightedItem(t)}},t.prototype.createItemDom=function(e){var t=this,n=new GQ(this,this.tree,e);this.app.dragManager.handleDrag(n.selfEl,(function(e){return t.app.dragManager.updateSource([n.selfEl],"is-being-dragged"),Lk(e.dataTransfer,n.heading.heading),{source:"outline",type:"heading",icon:"heading-glyph",title:n.heading.heading,heading:n.heading,file:t.file}}));var i=n.selfEl;return i.addEventListener("mouseover",(function(n){if(xc(n,i)&&!Bc(n)){var r=t.file.path+"#"+QS(e.heading);t.app.workspace.trigger("hover-link",{event:n,source:"outline",hoverParent:t,targetEl:i,linktext:r})}})),n},t.prototype.update=function(){this.tree.root.vChildren.clear(),this.activeEl=null;var e=this.getHeadings(),t=[];if(e.length>0){this.emptyEl.detach();for(var n=0,i=e;n<i.length;n++){for(var r=i[n],o=this.createItemDom(r),a=t.last();a&&a.heading.level>=r.level;)t.pop(),a=t.last();t.push(o),a?(a.vChildren.addChild(o),a.setCollapsible(!0)):this.tree.root.vChildren.addChild(o)}}else this.contentEl.appendChild(this.emptyEl);var s=this.app.workspace.activeEditor;s&&this.setHighlightedItem(this.findActiveHeading(s)),this.filterSearchResults(),this.tree.infinityScroll.queueCompute()},t.prototype.filterSearchResults=function(){var e,t=this,n=!!(null===(e=this.searchComponent)||void 0===e?void 0:e.getValue());iI(this.tree.root,(function(e){if(n){var i=t.searchQuery.matchContent(e.heading.heading);if(i){e.innerEl.empty(),jL(e.innerEl,e.headingText,i.content);for(var r=e;r;)r.el.show(),r=r.parent}else e.innerEl.setText(e.headingText),e.el.hide()}else e.innerEl.setText(e.headingText),e.el.show()})),this.tree.infinityScroll.invalidateAll()},t.prototype.getHeadings=function(){var e=this.file;if(!e||"md"!==e.extension)return[];var t=this.app.metadataCache.getFileCache(e);if(!t)return[];var n=t.headings;return n&&0!==n.length?n:[]},t.prototype.setFollowCursor=function(e){e!==this.followCursor&&(this.followCursor=e,this.followCursorButtonEl.toggleClass("is-active",e))},t.prototype.onToggleFollowCursor=function(){if(this.setFollowCursor(!this.followCursor),this.followCursor){var e=this.findActiveHeading(this.getOwner());e&&this.tree.infinityScroll.scrollIntoView(e,20)}this.app.workspace.requestSaveLayout()},t.prototype.onToggleShowSearch=function(){this.setShowSearch(!this.isShowingSearch),this.isShowingSearch&&this.searchComponent.inputEl.focus()},t.prototype.showSearch=function(){this.setShowSearch(!0),this.searchComponent.inputEl.focus()},t.prototype.setShowSearch=function(e){e!==this.isShowingSearch&&(this.isShowingSearch=e,this.searchComponent.containerEl.toggle(e),this.showSearchButtonEl.toggleClass("is-active",e),e||(this.searchComponent.setValue(""),this.updateSearch()),this.app.workspace.requestSaveLayout())},t.prototype.updateSearch=function(){var e=this.searchComponent.getValue(),t=this.searchQuery;if(!(!t&&!e||t&&t.query===e))try{if(e){var n=new UP(this.app,e,!1);n.matcher?this.searchQuery=n:this.searchQuery=null}else this.searchQuery=null;this.filterSearchResults()}catch(e){console.log(e)}},t}(ZP),ZQ=function(){function e(){this.id="page-preview",this.name=Qf.plugins.pagePreview.name(),this.description=Qf.plugins.pagePreview.desc(),this.defaultOn=!0,this.overrides={}}return e.prototype.init=function(e,t){this.app=e},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t.registerEvent(e.workspace.on("link-hover",this.onLinkHover,this)),t.registerEvent(e.workspace.on("hover-link",this.onHoverLink,this)),n=this,r=(i=Object).assign,o=[{}],[4,t.loadData()];case 1:return n.overrides=r.apply(i,o.concat([a.sent()])),t.addSettingTab(new XQ(e,t,this)),[2]}}))}))},e.prototype.onHoverLink=function(e){var t=this,n=e.source,i=e.hoverParent,r=e.targetEl,o=e.linktext,a=e.sourcePath,s=void 0===a?"":a,l=e.state;if(!Bc(e.event)){var c=!0;if(this.overrides.hasOwnProperty(n)?c=this.overrides[n]:this.app.workspace.hoverLinkSources.hasOwnProperty(n)&&(c=this.app.workspace.hoverLinkSources[n].defaultMod),QN(e.event),c&&!Ak.isModifier(e.event,"Mod")){if(!r)return;var u=e.event.doc,h=!1,d=function(){h=!0,u.removeEventListener("keydown",p),u.removeEventListener("mouseover",f),u.removeEventListener("mouseleave",m)},p=function(e){h||(!r||u.body.contains(r)?Ak.isModifier(e,"Mod")&&(d(),t.onLinkHover(i,r,o,s,l)):d())},f=function(e){h||r===e.target||r.contains(e.target)||d()},m=function(e){h||e.target!==u||d()};return u.addEventListener("keydown",p),u.addEventListener("mouseleave",m),void u.addEventListener("mouseover",f)}this.onLinkHover(i,r,o,s,l)}},e.prototype.onLinkHover=function(e,t,n,i,r){var o=e.hoverPopover;o&&o.state!==_N.Hidden&&t&&o.targetEl===t||nR.create({app:this.app,hoverParent:e,targetEl:t,linktext:n,sourcePath:i,state:r})},e}(),XQ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty(),new NI(t).setHeading().setName(Qf.plugins.pagePreview.labelRequireMod({key:Sk.Mod}));var n=this.instance.overrides,i=this.app.workspace.hoverLinkSources,r=function(r){var o=i[r],a=n[r];n.hasOwnProperty(r)||(a=o.defaultMod),new NI(t).setName(o.display).addToggle((function(t){return t.setValue(a).onChange((function(t){t===o.defaultMod?delete n[r]:n[r]=t,e.plugin.saveData(n)}))}))};for(var o in i)r(o)},t}(aY);function $Q(e){return encodeURIComponent(e).replace(/%20/g,"+")}function QQ(e,t){return void 0===t&&(t="/"),e.split(t).map($Q).join(t)}function JQ(e,t,n){void 0===n&&(n=!0);if(n)for(var i=0,r=e;i<r.length;i++){var o=r[i];"folder"===o.type&&JQ(o.children,t,n)}e.sort((function(e,n){var i=t.hasOwnProperty(e.path)?t[e.path]:void 0,r=t.hasOwnProperty(n.path)?t[n.path]:void 0;if(void 0!==i&&void 0!==r)return i-r;if(void 0!==i)return-1;if(void 0!==r)return 1;var o="folder"===e.type,a="folder"===n.type;if(o||a){if(o&&!a)return-1;if(a&&!o)return 1}return xm(e.name,n.name)}))}var eJ=Qf.plugins.publish,tJ=function(e){function t(t,n,i,r,o){var a=e.call(this,t)||this;a.plugin=n,a.modalEl.addClass("mod-scrollable-content"),a.titleEl.setText(eJ.labelNavigationModalTitle()),new NI(a.contentEl).setName(eJ.optionNavigationOrder()).setDesc(eJ.labelNavigationModalDesc()).addExtraButton((function(e){return e.setIcon("lucide-rotate-ccw").setTooltip(Qf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){var e;s.navOrder=[],null===(e=s.orderChangeCb)||void 0===e||e.call(s,[]),s.render()}))}));var s=a.tree=new oJ(a.plugin,a.contentEl,r,o);return i.forEach((function(e){return s.createItem(e)})),s.render(),new NI(a.contentEl).setName(eJ.optionHideItemsInNavigation()).setDesc(eJ.optionHideItemsInNavigationDesc()).addExtraButton((function(e){return e.setIcon("lucide-rotate-ccw").setTooltip(Qf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){var e;s.hiddenItems=[],null===(e=s.visibilityChangeCb)||void 0===e||e.call(s,[]),s.render()}))})),a.modalEl.createDiv("modal-button-container",(function(e){e.createEl("button",{text:Qf.dialogue.buttonDone()}).addEventListener("click",(function(){return a.close()}))})),a}return f(t,e),t.prototype.onOrderChange=function(e){return this.tree.orderChangeCb=e,this},t.prototype.onVisibilityChange=function(e){return this.tree.visibilityChangeCb=e,this},t}(ZA),nJ=function(e){function t(t,n){var i=e.call(this)||this;return i.hidden=!1,i.tree=t,i.name=Kc(n),i.path=n,i.el.addClass("mod-custom-nav"),i.selfEl.addEventListener("contextmenu",i.onContextMenu.bind(i)),i}return f(t,e),t.prototype.onContextMenu=function(e){var t=this;(new PA).addItem((function(e){return e.setTitle(eJ.optionHideInNavigation()).setChecked(t.hidden).onClick((function(){var e,n;t.hidden=!t.hidden;var i=t.tree.hiddenItems;t.hidden?i.push(t.path):i.remove(t.path),null===(n=(e=t.tree).visibilityChangeCb)||void 0===n||n.call(e,i),t.render()}))})).showAtMouseEvent(e)},t.prototype.render=function(){var t,n,i=this;if(this.el.toggleClass("hidden",this.hidden),!this.hidden||this.tree.showHidden){this.el.show(),e.prototype.render.call(this);var r=null!==(n=null===(t=this.parent)||void 0===t?void 0:t.childrenEl)&&void 0!==n?n:this.tree.childrenEl;Hc(this.selfEl,this.el,r,10,(function(){}),(function(e){var t,n,r=null!==(n=null===(t=i.parent)||void 0===t?void 0:t.children)&&void 0!==n?n:i.tree.children;r.remove(i),r.splice(e,0,i),i.tree.rebuildNavOrder()}))}else this.el.hide()},t}(yH),iJ=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.type="file";var r=i.innerEl,o=Kc(n);return r.createDiv({cls:"tree-item-title",text:o}),i}return f(t,e),t.prototype.render=function(){e.prototype.render.call(this),this.setCollapsible(!1),this.setClickable(!0)},t}(nJ),rJ=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.type="folder",i.children=[],i.selfEl.addClass("mod-folder"),i.setCollapsible(!0),i.setClickable(!0),i.setCollapsed(!0,!1),i.innerEl.createDiv({cls:"file-tree-item-title",text:i.name}),i}return f(t,e),t.prototype.onSelfClick=function(e){this.toggleCollapsed(!0)},t}(nJ),oJ=function(e){function t(t,n,i,r){var o=e.call(this,n)||this;o.children=[],o.showHidden=!1,o.hiddenItems=[],o.navOrder=[],o.folders={},o.files={},o.publish=t,o.navOrder=i,o.hiddenItems=r;var a=n.createDiv("tree-list-container");return a.createDiv("tree-list-header",(function(e){e.createDiv({cls:"tree-list-title",text:Qf.plugins.publish.labelNavigationPreview()}),e.createEl("label",{cls:"tree-list-action mod-checkbox"},(function(e){e.createEl("input",{attr:{tabindex:-1},type:"checkbox"}).addEventListener("click",(function(){o.setShowHidden(!o.showHidden)})),e.appendText(eJ.optionShowHiddenItems())}))})),o.childrenEl=a.createDiv("tree-list"),o}return f(t,e),t.prototype.setShowHidden=function(e){this.showHidden=e,this.render()},t.prototype.addChild=function(e){var t=Yc(e.path);if(t){var n=this.folders,i=n[t];i||(i=n[t]=new rJ(this,t),this.addChild(i)),i.children.push(e),e.parent=i}else this.addRoot(e)},t.prototype.createItem=function(e){var t=new iJ(this,e);return this.files[e]=t,this.addChild(t),t},t.prototype.rebuildNavOrder=function(){var e,t=[],n=function(e){var i=e.slice();JQ(i,{},!1);for(var r=!1,o=0;o<e.length;o++)if(i[o].path!==e[o].path){r=!0;break}for(var a=0,s=e;a<s.length;a++){var l=s[a];r&&t.push(l.path),l instanceof rJ&&n(l.children)}};return n(this.children),this.navOrder=t,null===(e=this.orderChangeCb)||void 0===e||e.call(this,this.navOrder),t},t.prototype.render=function(){for(var t={},n=0;n<this.navOrder.length;n++){t[this.navOrder[n]]=n}JQ(this.children,t);var i=new Set(this.hiddenItems),r=function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];o.hidden=i.has(o.path),"folder"===o.type&&r(o.children)}};r(this.children),e.prototype.render.call(this)},t}(bH),aJ=function(){function e(e){var t=this.containerEl=e.createDiv("startup-stat");this.infoEl=t.createDiv("startup-info")}return e.prototype.setHeading=function(e){return this.containerEl.toggleClass("mod-heading",e),this},e.prototype.addLabel=function(e){return this.infoEl.createSpan({cls:"startup-label",text:e}),this},e.prototype.addDesc=function(e){return this.infoEl.createSpan({cls:"startup-desc",text:e}),this},e.prototype.addValue=function(e){return this.containerEl.createDiv({cls:"startup-value",text:e}),this},e}(),sJ=function(e){function t(t){var n=e.call(this,t)||this;n.setTitle("Startup time"),n.modalEl.addClass("mod-lg","mod-scrollable-content","mod-plugin-debug");var i=im({maximumFractionDigits:0}),r=function(e){return i.format(e)+"ms"},o=n.contentEl.createDiv("startup-stat-list"),a=new aJ(o).addLabel("Device"),s=new aJ(o).addLabel("Operating system"),l=new aJ(o).addLabel("Obsidian");if(Zl.isMobileApp)g(n,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return[4,gA.getInfo()];case 1:return e=n.sent(),a.addValue("".concat(e.manufacturer," ").concat(e.model)),s.addValue("".concat((i=e.platform,"ios"===i.toLowerCase()?"iOS":"android"===i.toLowerCase()?"Android":i)," ").concat(e.osVersion)),[4,pA.getInfo()];case 2:return t=n.sent(),l.addDesc("v"+t.version),l.addLabel("Build"),l.addDesc(t.build),[2]}var i}))}));else if(Zl.isDesktopApp){a.containerEl.hide(),s.addValue(zl);var c=electron.ipcRenderer.sendSync("version"),u=electron.remote.app.getVersion();l.addDesc("v"+c),l.addLabel("Installer"),l.addDesc("v"+u)}var h=n.contentEl.createDiv("startup-timing-list");new aJ(h).setHeading(!0).addLabel("Total app startup").addValue(r(tG())),new aJ(h).addLabel("Initialization").addValue(r(tG("initialization"))),new aJ(h).addLabel("Vault").addDesc(Qf.nouns.fileWithCount({count:t.vault.getRoot().getFileCount()})).addValue(r(tG("vault"))),new aJ(h).addLabel("Workspace").addDesc("".concat($j.views," tabs (").concat($j.deferredViews," deferred)")).addValue(r(tG("workspace"))),new aJ(h).addLabel("Core plugins").addDesc(Qf.nouns.pluginActiveWithCount({count:t.internalPlugins.getEnabledPlugins().length})).addValue(r(tG("corePlugins")));var d=n.contentEl.createDiv("startup-timing-list"),p=eG("communityPlugins");if(p){for(var f=Object.keys(t.plugins.plugins).length,m=[],v=0,b=Object.values(p.children);v<b.length;v++){var w=b[v];m.push({id:w.key,time:w.duration})}new aJ(d).setHeading(!0).addLabel("Community plugins").addDesc(Qf.nouns.pluginActiveWithCount({count:f})).addValue(r(tG("communityPlugins"))),m.sort((function(e,t){return t.time-e.time}));for(var k=0,C=m;k<C.length;k++){var M=C[k],E=M.id,S=M.time,x=n.app.plugins.manifests[E];new aJ(d).addLabel(x?x.name:E).addDesc(x?"v"+x.version:"").addValue(r(S))}}return n.addButton("mod-secondary",Qf.interface.labelCopy(),(function(){return g(n,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return[4,nG(t)];case 1:return e=n.sent(),[4,navigator.clipboard.writeText(e)];case 2:return n.sent(),new JA(Qf.interface.copied({context:"generic"})),[2,!0]}}))}))})).addButton("mod-cancel",Qf.dialogue.buttonDone(),(function(){})),n}return f(t,e),t}(XA);var lJ=Qf.setting.about,cJ=Qf.setting.account;var uJ,hJ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=lJ.name(),t.id="about",t}return f(t,e),t.prototype.display=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m=this;return y(this,(function(v){switch(v.label){case 0:return(e=this.containerEl).empty(),t=function(){var e=Qf.setting.about.labelUnknownVersion(),t=Qf.setting.about.labelUnknownVersion(),n="",i=!1,r=!1;return Ef((function(o){var a=o.remote.app.getVersion();t="v"+a,e="v"+o.ipcRenderer.sendSync("version"),n=o.ipcRenderer.sendSync("update"),i=o.ipcRenderer.sendSync("check-update"),r=o.ipcRenderer.sendSync("disable-update")})),{appVersion:e,installerVersion:t,update:n,checking:i,updateDisabled:r}}(),n=t.appVersion,i=t.installerVersion,r=t.update,o=t.updateDisabled,a=t.checking,s=this.app.setting,Zl.isDesktopApp?(a&&(l=function(){Ef((function(e){a=e.ipcRenderer.sendSync("check-update")})),a?setTimeout(l,1e3):m.display()},setTimeout(l,300)),new NI(e).setName(lJ.labelApp()).setHeading(),c=new NI(e).setName(lJ.labelCurrentVersion()+n).setDesc(createFragment((function(e){e.appendText(lJ.labelInstallVersion({version:i})),e.createEl("br"),"update-downloaded"===r?(e.appendText(lJ.labelNewVersionReady()),e.createEl("br"),e.createEl("a",{text:lJ.labelReadChangelog(),attr:{href:"https://obsidian.md/changelog",target:"_blank",rel:"noopener"}})):"update-manual-required"===r||sL(Pf,u2)?(e.createEl("b",{text:lJ.labelManualUpdateRequired()}),e.appendText(" "),e.createEl("a",{text:Qf.dialogue.buttonDownload(),attr:{href:jA(),target:"_blank",rel:"noopener"}})):(e.appendText(lJ.labelUpToDate()),e.createEl("br"),e.createEl("a",{text:lJ.labelReadChangelog(),attr:{href:"https://obsidian.md/changelog",target:"_blank",rel:"noopener"}}))}))),"update-downloaded"===r?c.addButton((function(e){return e.setCta().setButtonText(lJ.buttonRelaunch()).onClick((function(){Ef((function(e){e.ipcRenderer.sendSync("relaunch")}))}))})):c.addButton((function(e){return e.setCta().setButtonText(lJ.buttonCheckForUpdates()).setLoading(a).onClick((function(){Ef((function(e){return g(m,void 0,void 0,(function(){return y(this,(function(t){return e.ipcRenderer.send("check-update",!0),this.display(),[2]}))}))}))}))})),new NI(e).setName(lJ.optionAutoUpdate()).setDesc(lJ.optionAutoUpdateDescription()).addToggle((function(e){return e.setValue(!o).onChange((function(e){Ef((function(t){t.ipcRenderer.sendSync("disable-update",!e),setTimeout((function(){return m.display()}),500)}))}))})),dj.license&&Zl.isDesktopApp&&(u=!1,Ef((function(e){u=e.ipcRenderer.sendSync("insider-build",null)})),new NI(e).setName(lJ.optionInsiderBuild()).setDesc(lJ.optionInsiderBuildDescription()).addToggle((function(e){return e.setValue(u).onChange((function(e){Ef((function(t){t.ipcRenderer.sendSync("insider-build",e)}))}))}))),[3,3]):[3,1];case 1:return uA?[4,pA.getInfo()]:[3,3];case 2:h=v.sent(),new NI(e).setName(lJ.labelCurrentVersion()+h.version+" (".concat(h.build,")")).setDesc("API v"+c2),v.label=3;case 3:d=tm(),p=d,new NI(e).setName(lJ.optionLanguage()).setDesc(createFragment((function(e){e.appendText(lJ.optionLanguageDescription()),e.createEl("br"),e.createEl("a",{text:lJ.labelAddOwnLanguage(),attr:{href:"https://help.obsidian.md/Translations",target:"_blank",rel:"noopener"}})}))).addButton((function(e){f=e,e.setCta().setButtonText(lJ.buttonRelaunch()).onClick((function(){p===zf?localStorage.removeItem(Vf):localStorage.setItem(Vf,p),window.location.reload()})),e.buttonEl.hide()})).addDropdown((function(e){e.onChange((function(e){p=e,f.buttonEl.toggle(d!==p)}));for(var t=0,n=Uf;t<n.length;t++){var i=n[t];e.addOption(i,qf[i])}e.setValue(d)})),new NI(e).setName(lJ.optionGetHelp()).setDesc(lJ.optionGetHelpDescription()).addButton((function(e){return e.setButtonText(lJ.buttonOpen()).onClick((function(){s.close(),m.app.openHelp()}))})),new NI(e).setName(Qf.setting.account.name()).setHeading(),this.accountSetting=new NI(e),this.catalystSetting=new NI(e),this.commercialLicenseSetting=new NI(e),new NI(e).setHeading().setName(lJ.optionAdvanced()),new NI(e).setName(lJ.optionCheckSlowStartup()).setDesc(lJ.optionCheckSlowStartupDescription()).addExtraButton((function(e){return e.setIcon("lucide-timer").setTooltip(lJ.buttonCheckStartup()).onClick((function(){new sJ(m.app).open()}))})).addToggle((function(e){return e.setValue(m.app.loadLocalStorage("slow-startup-check")).onChange((function(e){e?m.app.saveLocalStorage("slow-startup-check","1"):m.app.saveLocalStorage("slow-startup-check",null)}))})),this.updateAccountSettings(),v.label=4;case 4:return v.trys.push([4,,7,8]),[4,XW(dj)];case 5:return v.sent(),[4,$W(dj)];case 6:return v.sent(),[3,8];case 7:return this.updateAccountSettings(),[7];case 8:return[2]}}))}))},t.prototype.updateAccountSettings=function(){var e=this;if(this.accountSetting.clear(),this.catalystSetting.clear(),this.commercialLicenseSetting.clear(),dj.email){if(this.accountSetting.setName(cJ.optionYourAccount()).setDesc(cJ.optionYourAccountDesc({name:dj.name,email:dj.email})).addButton((function(e){return e.setButtonText(Qf.interface.buttonManage()).onClick((function(){window.open("https://obsidian.md/account")}))})).addButton((function(t){return t.setButtonText(cJ.buttonLogOut()).setClass("mod-destructive").onClick((function(){return g(e,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t.buttonEl.addClass("mod-loading"),[4,ZW(dj)];case 1:return n.sent(),this.display(),[3,3];case 2:return e=n.sent(),t.buttonEl.removeClass("mod-loading"),new JA(e.message).containerEl.addClass("mod-error"),[3,3];case 3:return[2]}}))}))}))})),dj.license){var t=dj.license,n=cJ("label-".concat(t));this.catalystSetting.setName(lJ.optionCatalyst()).setDesc(lJ.optionCatalystDesc({tier:n})),"vip"!==t&&this.catalystSetting.addButton((function(e){return e.setButtonText(cJ.buttonUpgradeCatalyst()).onClick((function(){window.open("https://obsidian.md/account")}))}))}else this.catalystSetting.setName(lJ.optionCatalyst()).setDesc(createFragment((function(e){e.appendText(lJ.optionCatalystDescNoLicense()),e.createEl("br"),e.createEl("a",{text:Qf.interface.buttonLearnMore(),attr:{href:"https://help.obsidian.md/Catalyst+license",target:"_blank",rel:"noopener"}})}))).addButton((function(e){return e.setButtonText(cJ.buttonPurchase()).setCta().onClick((function(){window.open("https://obsidian.md/account")}))}));this.catalystSetting.settingEl.show()}else this.accountSetting.setName(cJ.optionYourAccount()).setDesc(cJ.optionYourAccountDescNoLogin()).addButton((function(t){return t.setButtonText(cJ.labelLogIn()).onClick((function(){var t=new dJ(e.app);t.onClose=e.display.bind(e),t.open()}))})).addButton((function(e){return e.setButtonText(cJ.labelSignUp()).onClick((function(){window.open("https://obsidian.md/account#mode=signup")}))})),this.catalystSetting.settingEl.hide();if(dj.key){var i=dj.key,r=dj.keyValidation,o=this.commercialLicenseSetting,a=lJ.labelYourCommercialLicenseKey({key:i});"valid"===r&&(a+=" "+lJ.labelCommercialLicenseInfo({company:dj.company,seats:dj.seats,expiry:window.moment(dj.expiry).format("MMMM D, YYYY")})),o.setName(lJ.labelCommercialLicense()).setDesc(a),"valid"===r?o.addButton((function(t){return t.setButtonText(lJ.buttonRemoveCommercialLicense()).onClick((function(){dj.setKey(null),e.display()}))})):r?(o.descEl.createEl("p",{text:lJ.labelInvalidCommercialLicense()+"".concat(r)}),o.addButton((function(t){return t.setButtonText(lJ.buttonActivate()).setCta().onClick((function(){var t=new pJ(e.app);t.onClose=e.display.bind(e),t.open()}))}))):o.descEl.createEl("p",{text:lJ.labelValidatingCommercialLicense()})}else this.commercialLicenseSetting.setName(cJ.optionCommercialLicense()).setDesc(createFragment((function(e){e.appendText(cJ.optionCommercialLicenseDesc()),e.createEl("br"),e.createEl("a",{text:Qf.interface.buttonLearnMore(),attr:{href:"https://help.obsidian.md/Commercial+license",target:"_blank",rel:"noopener"}})}))).addButton((function(t){return t.setButtonText(lJ.buttonActivate()).setCta().onClick((function(){var t=new pJ(e.app);t.onClose=e.display.bind(e),t.open()}))})).addButton((function(e){return e.setButtonText(cJ.buttonPurchase()).onClick((function(){window.open("https://obsidian.md/account")}))}))},t}(vK),dJ=function(e){function t(t){var n=e.call(this,t)||this,i=n,r=i.modalEl,o=i.contentEl;return r.addClass("mod-lg","mod-form"),n.loadingEl=rG(r),n.loadingEl.hide(),n.titleEl.setText(cJ.labelLogIn()),o.createDiv("message-container",(function(e){n.errorEl=e.createDiv("message mod-error"),n.errorEl.hide()})),n.emailSectionEl=o.createEl("p","form-field",(function(e){e.createEl("label",{cls:"input-label",text:cJ.labelEmail()}),n.emailEl=e.createEl("input",{type:"email",attr:{autocomplete:"email",autocapitalize:"off",autocorrect:"off",spellcheck:"false"}},(function(e){e.setAttribute("placeholder",cJ.placeholderEmail()),e.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||n.login()}))}))})),n.passwordSectionEl=o.createEl("p","form-field",(function(e){e.createEl("label",{cls:"input-label",text:cJ.labelPassword()}),n.passwordEl=e.createEl("input",{type:"password",attr:{autocomplete:"current-password"}},(function(e){e.setAttribute("placeholder",cJ.placeholderPassword()),e.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||n.login()}))}))})),n.mfaSectionEl=o.createEl("p","form-field",(function(e){e.createEl("label",{cls:"input-label",text:cJ.labelMfaCode()}),n.mfaEl=e.createEl("input",{type:"text"},(function(e){e.setAttribute("autocomplete","one-time-code"),e.setAttribute("maxlength","6"),e.inputMode="numeric",e.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||n.login()}))}))})),n.mfaSectionEl.hide(),n.buttonContainerEl.createEl("a",{cls:"mod-secondary",text:cJ.labelForgotPassword(),attr:{href:"https://obsidian.md/account#forgotpass",target:"_blank"}}),n.buttonContainerEl.createEl("button",{cls:"mod-cta",text:cJ.buttonLogin()},(function(e){e.addEventListener("click",n.login.bind(n))})),n.addCancelButton(),n}return f(t,e),t.prototype.showError=function(e){var t=this.errorEl;t.setText(e),t.show()},t.prototype.login=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:if(t=(e=this).emailEl,n=e.passwordEl,i=e.mfaEl,this.errorEl.hide(),r=t.value,o=n.value,a=i.value,""===r)return this.showError(cJ.messageEmptyEmail()),[2];if(-1===r.indexOf("@"))return this.showError(cJ.messageInvalidEmail()),[2];if(""===o)return this.showError(cJ.messageEmptyPassword()),[2];if(""!==a&&!/^\d{6}$/.test(a))return this.showError(cJ.mfaWrongFormat()),[2];this.loadingEl.show(),this.contentEl.hide(),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,YW(dj,r,o,a)];case 2:return c.sent(),this.close(),[3,4];case 3:return(s=c.sent())instanceof UW?(l=s.error).contains("2FA code is incorrect")?this.showError(cJ.mfaVerificationFailed()):l.contains("2FA code")?(this.emailSectionEl.hide(),this.passwordSectionEl.hide(),this.mfaSectionEl.show()):this.showError(l):this.showError(cJ.messageLoginFailed()),this.loadingEl.hide(),this.contentEl.show(),[3,4];case 4:return[2]}}))}))},t}(XA),pJ=function(e){function t(t){var n=e.call(this,t)||this;return n.modalEl.addClass("mod-lg","mod-form"),n.setTitle(lJ.labelCommercialLicense()),n.contentEl.createDiv("message-container",(function(e){n.errorEl=e.createDiv("message mod-error"),n.errorEl.hide(),e.createEl("p",{cls:"form-field "},(function(e){e.createEl("label",{cls:"input-label",text:lJ.labelLicenseKey()}),n.licenseKeyEl=e.createEl("input",{type:"text"},(function(e){e.setAttribute("placeholder",lJ.licenseKeyPlaceholder())}))}))})),n.buttonContainerEl.createEl("a",{cls:"mod-secondary",text:Qf.interface.buttonLearnMore(),attr:{href:"https://help.obsidian.md/Commercial+license",target:"_blank",rel:"noopener"}}),n.addButton("mod-cta",lJ.buttonActivate(),(function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return dj.key=this.licenseKeyEl.value.trim(),[4,$W(dj)];case 1:return e.sent(),"valid"===dj.keyValidation?this.close():(this.errorEl.setText(dj.keyValidation),this.errorEl.show()),[2,!0]}}))}))})).addCancelButton(),n}return f(t,e),t}(XA),fJ=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;o.settingTab=null,o.displayEl=null,o.labelI18nKey=r;var a=o.contentEl;return o.displayEl=a.createEl("p"),new NI(a).setName(n).setDesc(i).addText((function(e){var n=e.inputEl,i=new oZ(t,n,(function(e){return!o.getPaths().contains(e.path)}),!0),r=function(){return g(o,void 0,void 0,(function(){var e,t;return y(this,(function(i){switch(i.label){case 0:return(e=tu(n.value))?(n.value="",(t=this.getPaths()).push(e),[4,this.setPaths(t)]):[2];case 1:return i.sent(),this.updateDisplay(),[2]}}))}))};i.onSelect(r),n.addEventListener("keydown",(function(e){e.isComposing||"Enter"===e.key&&r()}))})),o.addButton("",Qf.dialogue.buttonDone(),o.close.bind(o)),o}return f(t,e),t.prototype.onOpen=function(){e.prototype.onOpen.call(this),this.updateDisplay()},t.prototype.onClose=function(){this.settingTab.display()},t.prototype.updateDisplay=function(){var e=this,t=this.getPaths(),n=this.displayEl;n.empty();var i=Qf.nouns.folderWithCount({count:t.length});n.setText(Qf(this.labelI18nKey,{folders:i}));for(var r=function(t){var i=n.createDiv("sync-exclude-folder"),r=i.createDiv("sync-exclude-folder-remove clickable-icon");mx(r,"lucide-x"),Rx(r,Qf.plugins.sync.tooltipRemoveExcludedFolder()),r.addEventListener("click",(function(){return g(e,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return(e=this.getPaths()).remove(t),[4,this.setPaths(e)];case 1:return n.sent(),this.updateDisplay(),[2]}}))}))})),i.createSpan("clickable-icon",(function(e){return mx(e,"lucide-folder-open")})),i.createDiv({cls:"sync-exclude-folder-name"},(function(e){e.createSpan({text:t})}))},o=0,a=t;o<a.length;o++){r(a[o])}},t}(XA),mJ="indexFile",vJ="siteName",gJ="logo",yJ="noindex",bJ="defaultTheme",wJ="showThemeToggle",kJ="showNavigation",CJ="showGraph",MJ="showOutline",EJ="showSearch",SJ="googleAnalytics",xJ="hideTitle",TJ="readableLineLength",DJ="strictLineBreaks",AJ="showHoverPreview",LJ="showBacklinks",PJ="slidingWindowMode",IJ="navigationOrdering",FJ="navigationHiddenItems",OJ=((uJ={})[mJ]="",uJ[gJ]="",uJ[vJ]="",uJ[yJ]=!1,uJ[bJ]="light",uJ[wJ]=!1,uJ[kJ]=!0,uJ[CJ]=!0,uJ[MJ]=!1,uJ[EJ]=!1,uJ[SJ]="",uJ[xJ]=!1,uJ[TJ]=!0,uJ[DJ]=!1,uJ[AJ]=!1,uJ[LJ]=!1,uJ[PJ]=!1,uJ[IJ]=[],uJ[FJ]=[],uJ),BJ=Qf.plugins.publish,NJ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.offlineSection=null,i.noAccountSection=null,i.manageSitesSection=null,i.siteOptionsSection=null,i.siteFiltersSection=null,i.reviewChangesSection=null,i.uploadProgressSection=null,i.editSiteSlugSection=null,i.listPasswordSection=null,i.addPasswordSection=null,i.configureCustomDomainSection=null,i.errorMessageEl=null,i.loaderEl=null,i.currentSection=null,i.autoLoadSection=null,i.plugin=n,i.modalEl.addClass("mod-publish","mod-lg","mod-scrollable-content"),i.setTitleText(BJ.actionPublishChanges()),i.contentEl.createDiv("message-container",(function(e){i.errorMessageEl=e.createDiv("message mod-error"),i.errorMessageEl.hide()})),i.offlineSection=new VJ(i),i.loaderEl=rG(i.contentEl),i.loaderEl.hide(),i.noAccountSection=new zJ(i),i.manageSitesSection=new qJ(i),i.siteOptionsSection=new UJ(i),i.siteFiltersSection=new _J(i),i.reviewChangesSection=new ZJ(i),i.uploadProgressSection=new XJ(i),i.editSiteSlugSection=new $J(i),i.listPasswordSection=new QJ(i),i.addPasswordSection=new JJ(i),i.configureCustomDomainSection=new e1(i),i}return f(t,e),t.prototype.handleError=function(e){console.error(e),this.loaderEl.hide(),e instanceof l1?"AUTHFAIL"===e.code?(this.openSection(this.manageSitesSection),this.showError(BJ.msgNoPermissionToPublishToSite())):"NET"===e.code?this.showError(BJ.msgNetworkError()+e.message):this.showError(e.message):this.showError(BJ.msgSomethingWentWrong()+" "+(e.message||e.toString()))},t.prototype.showError=function(e){this.errorMessageEl.setText(e),this.errorMessageEl.show()},t.prototype.hideError=function(){this.errorMessageEl.hide()},t.prototype.onOpen=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:if(this.closeSection(),this.loaderEl.show(),dj.token)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,XW(dj)];case 2:return t.sent(),[3,4];case 3:return"Not logged in"===t.sent().message?[2,this.openSection(this.noAccountSection)]:[2,this.openSection(this.offlineSection)];case 4:return this.plugin.siteId?this.autoLoadSection?(e=this.autoLoadSection,this.autoLoadSection=null,[2,this.openSection(e)]):[2,this.openReviewChanges()]:[2,this.openSection(this.manageSitesSection)]}}))}))},t.prototype.autoLoad=function(e){this.autoLoadSection=e},t.prototype.onClose=function(){},t.prototype.deleteSite=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,aj(dj.token,e)];case 1:return t.sent(),this.plugin.siteId!==e?[3,3]:[4,this.plugin.setup(null,null)];case 2:t.sent(),t.label=3;case 3:return[4,this.openSection(this.manageSitesSection)];case 4:return t.sent(),[2]}}))}))},t.prototype.deleteSiteShare=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,lj(dj.token,e,t)];case 1:return n.sent(),this.plugin.siteId!==e?[3,3]:[4,this.plugin.setup(null,null)];case 2:n.sent(),n.label=3;case 3:return[4,this.openSection(this.manageSitesSection)];case 4:return n.sent(),[2]}}))}))},t.prototype.acceptSiteShare=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,(i=dj.token,r=t,_W("/publish/share/accept",{token:i,code:r}))];case 1:return n.sent(),this.plugin.siteId!==e?[3,3]:[4,this.plugin.setup(null,null)];case 2:n.sent(),n.label=3;case 3:return[4,this.openSection(this.manageSitesSection)];case 4:return n.sent(),[2]}var i,r}))}))},t.prototype.openReviewChanges=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.openSection(this.reviewChangesSection)];case 1:return e.sent(),[2]}}))}))},t.prototype.openManageSites=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.openSection(this.manageSitesSection)];case 1:return e.sent(),[2]}}))}))},t.prototype.editSlug=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return this.editSiteSlugSection.setSiteInfo(e),this.editSiteSlugSection.setExistingSlug(t),[4,this.openSection(this.editSiteSlugSection)];case 1:return n.sent(),[2]}}))}))},t.prototype.uploadChanges=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return this.uploadProgressSection.addChanges(e),this.openSection(this.uploadProgressSection),[2]}))}))},t.prototype.showPasswords=function(){return g(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:e=this.listPasswordSection,i.label=1;case 1:return i.trys.push([1,4,,5]),this.currentSection.hide(),this.loaderEl.show(),[4,this.plugin.apiGetPassword()];case 2:return t=i.sent().pass,e.setPasswords(t),e.updateDisplay(),[4,this.openSection(e)];case 3:return i.sent(),[3,5];case 4:return n=i.sent(),this.handleError(n),[2];case 5:return[2]}}))}))},t.prototype.openAddPassword=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.openSection(this.addPasswordSection)];case 1:return e.sent(),[2]}}))}))},t.prototype.setTitleText=function(e){this.titleEl.setText(e)},t.prototype.closeSection=function(){this.errorMessageEl.hide(),this.currentSection&&this.currentSection.hide(),this.currentSection=null},t.prototype.openSection=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.closeSection(),e.title&&this.setTitleText(e.title),this.currentSection=e,this.loaderEl.show(),[4,e.show()];case 1:return t.sent(),this.loaderEl.hide(),[2]}}))}))},t}(ZA),RJ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.selectSuggestion=function(e){var t=this.textInputEl;this.setValue(e.path),t.trigger("input"),this.close()},t.prototype.getSuggestions=function(t){var n=e.prototype.getSuggestions.call(this,t);return n=n.filter((function(e){return UT.contains(e.extension)}))},t}(eQ),HJ=function(){function e(e){this.title=null,this.el=null,this.parentModal=null,this.parentModal=e,this.el=e.contentEl.createDiv(),this.hide()}return e.prototype.show=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){return this.el.show(),[2]}))}))},e.prototype.hide=function(){this.el.hide()},e}(),VJ=function(e){function t(t){var n=e.call(this,t)||this;return n.el.createEl("p",{text:BJ.labelNoInternetAccess()}),n}return f(t,e),t}(HJ),zJ=function(e){function t(t){var n=e.call(this,t)||this;return n.el.createEl("p",{text:BJ.labelPublishServiceDescription()}),n.el.createEl("p",{text:BJ.labelPleaseLogin()}),n.el.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:Qf.setting.account.linkSignUpNow(),onclick:function(){return window.open("http://obsidian.md/account","_blank")}}),e.createEl("button",{text:Qf.setting.account.buttonLogin(),onclick:function(){var e=n.parentModal.app;n.parentModal.close();var t=new dJ(e);t.onClose=n.parentModal.open.bind(n.parentModal),t.open()}})})),n}return f(t,e),t}(HJ),qJ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=BJ.labelManageSites(),n.slugInputEl=null,n}return f(t,e),t.prototype.show=function(){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w,k,C,M,E,S,x,T=this;return y(this,(function(D){switch(D.label){case 0:n=(t=this).parentModal,i=t.el,r=n.plugin,o=n.app,i.empty(),D.label=1;case 1:return D.trys.push([1,3,,4]),[4,(A=dj.token,_W("/publish/list",{token:A}))];case 2:return a=D.sent(),[3,4];case 3:return s=D.sent(),n.handleError(s),[2];case 4:l=a.sites,c=a.shared,u=a.limit,new NI(i).setName(BJ.labelYourSites()).setHeading(),h=i.createDiv("site-list-container"),d=l.map((function(e){return e.id})).concat(c.map((function(e){return e.id}))),p={},D.label=5;case 5:return D.trys.push([5,7,,8]),[4,r.apiGetSlugs(d)];case 6:return p=D.sent(),[3,8];case 7:return f=D.sent(),console.error(f),[3,8];case 8:if(0===l.length&&0!==u)h.createDiv("site-empty-state u-center-text",(function(e){e.createEl("p",{text:BJ.labelNoSites()})}));else for(m=function(e){h.createDiv("site-list-item list-item",(function(t){var i=p[e.id]||e.id;t.createDiv({cls:"list-item-part mod-extended",text:i}),t.createEl("button",{text:BJ.buttonChoose()},(function(t){t.addEventListener("click",(function(){return g(T,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,r.setup(e.id,e.host)];case 1:return t.sent(),[4,n.openReviewChanges()];case 2:return t.sent(),[2]}}))}))}))})),t.createDiv({cls:"clickable-icon"},(function(t){mx(t,"lucide-edit-3"),Rx(t,BJ.tooltipEditSiteId()),t.addEventListener("click",(function(){n.editSlug(e,p[e.id]||"")}))})),t.createDiv("clickable-icon",(function(t){mx(t,"lucide-x"),Rx(t,BJ.tooltipDeleteSite()),t.addEventListener("click",(function(){var t=document.createDocumentFragment();t.createEl("p",{text:BJ.labelDeleteSiteConfirmation()}),t.createEl("p",{cls:"setting-message mod-warning",text:BJ.labelDeleteSiteDetails()}),new XA(o).setTitle(BJ.labelConfirmDeleteSite({site:i})).setContent(t).addButton("mod-warning",Qf.dialogue.buttonDelete(),(function(){n.deleteSite(e.id)})).addCancelButton().open()}))}))}))},v=0,b=l;v<b.length;v++)w=b[v],m(w);if(l.length<u?(new NI(i).setName(BJ.optionSiteId()).setDesc(BJ.optionSiteIdDescription()).addText((function(e){e.setPlaceholder(BJ.optionSiteIdPlaceholder()),e.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||T.createSite()})),T.slugInputEl=e.inputEl})).setClass("site-list-site-id-setting"),i.createDiv("u-center-text",(function(e){e.createEl("button",{text:BJ.buttonCreate(),cls:"mod-cta"},(function(e){e.addEventListener("click",T.createSite.bind(T))}))}))):0===u?h.createDiv("list-item",(function(e){e.createDiv({cls:"list-item-part mod-extended u-muted",text:BJ.labelNoSitesBought()}),e.createEl("button",{cls:"list-item-part mod-cta",text:BJ.buttonGetSite()},(function(e){e.addEventListener("click",(function(){window.open("https://obsidian.md/account","_blank")}))}))})):(k=Qf.nouns.siteWithCount({count:u}),h.createDiv("list-item",(function(e){e.createDiv({cls:"list-item-part mod-extended u-muted",text:BJ.labelSiteUsage({site:l.length.toString(),limit:k})}),e.createEl("button",{cls:"list-item-part mod-cta",text:BJ.buttonAddMoreSites()},(function(e){e.addEventListener("click",(function(){window.open("https://obsidian.md/account","_blank")}))}))}))),c.length>0)for(new NI(i).setName(BJ.labelSitesSharedWithYou()).setHeading(),C=i.createDiv("site-list-container"),M=function(e){C.createDiv("site-list-item list-item",(function(t){var i=e.id,a=p[i]||i;t.createDiv({cls:"list-item-part mod-extended",text:a}),t.createEl("button",{text:BJ.buttonChoose()},(function(t){t.addEventListener("click",(function(){return g(T,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,r.setup(i,e.host)];case 1:return t.sent(),[4,n.openReviewChanges()];case 2:return t.sent(),[2]}}))}))}))})),t.createDiv("clickable-icon",(function(t){mx(t,"lucide-x"),Rx(t,BJ.tooltipLeaveSiteSharing()),t.addEventListener("click",(function(){var t=document.createDocumentFragment();t.createEl("p",{cls:"setting-message mod-warning",text:BJ.labelLeaveSiteConfirmationDetails()}),t.createEl("p",{text:BJ.labelLeaveSiteConfirmationDetails_2()}),new XA(o).setTitle(BJ.labelLeaveSiteConfirmation({site:a})).setContent(t).addButton("mod-warning",BJ.buttonLeave(),(function(){n.deleteSiteShare(i,e.share_uid)})).addCancelButton().open()}))}))}))},E=0,S=c;E<S.length;E++)x=S[E],M(x);return e.prototype.show.call(this),[2]}var A}))}))},t.prototype.createSite=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(t=(e=this).parentModal,n=e.slugInputEl,i=t.plugin,t.hideError(),r=n.value.toLowerCase(),!/^[a-z0-9\-]+$/.test(r))return t.showError(BJ.msgInvalidSiteId()),[2];l.label=1;case 1:return l.trys.push([1,3,,13]),[4,i.apiCheckSlug(r)];case 2:return l.sent(),t.showError(BJ.msgSiteIdInUse()),[3,13];case 3:if(!((o=l.sent())instanceof l1&&"NOTFOUND"===o.code))return[3,11];l.label=4;case 4:return l.trys.push([4,9,,10]),[4,(c=dj.token,_W("/publish/create",{token:c}))];case 5:return a=l.sent(),[4,i.apiSetSlug(a.id,a.host,r)];case 6:return l.sent(),[4,i.setup(a.id,a.host)];case 7:return l.sent(),[4,t.openReviewChanges()];case 8:return l.sent(),[3,10];case 9:return s=l.sent(),t.handleError(s),[3,10];case 10:return[3,12];case 11:t.handleError(o),l.label=12;case 12:return[3,13];case 13:return[2]}var c}))}))},t}(HJ),UJ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=BJ.labelSiteOptions(),t}return f(t,e),t.prototype.show=function(){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(d){switch(d.label){case 0:n=(t=this).el,i=t.parentModal,r=i.plugin,o=i.app,n.empty(),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,r.apiOptions()];case 2:return a=d.sent(),[3,4];case 3:return s=d.sent(),i.handleError(s),n.createDiv("modal-button-container",(function(e){e.createEl("button",{text:BJ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){return g(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.openReviewChanges()];case 1:return e.sent(),[2]}}))}))}))}))})),[2];case 4:return l={},c=function(e){return a.hasOwnProperty(e)?a[e]:OJ[e]},u=n.createDiv("publish-site-settings-container"),new NI(u).setName(BJ.optionSiteGeneral()).setHeading(),new NI(u).setName(BJ.optionSiteName()).setDesc(BJ.optionSiteNameDescription()).addText((function(e){return e.setPlaceholder(BJ.optionSiteNamePlaceholder()).setValue(c(vJ)).onChange((function(e){return l[vJ]=e}))})),new NI(u).setName(BJ.optionHomePageFile()).setDesc(BJ.optionHomePageFileDescription()).addText((function(e){e.setPlaceholder(BJ.optionHomePageFilePlaceholder()).setValue(c(mJ)).onChange((function(e){return l[mJ]=e})),new tQ(o,e.inputEl)})),new NI(u).setName(BJ.optionLogo()).setDesc(BJ.optionLogoDescription()).addText((function(e){e.setPlaceholder(BJ.optionLogoPlaceholder()).setValue(c(gJ)).onChange((function(e){return l[gJ]=e})),new RJ(o,e.inputEl)})),r.isGuest||(new NI(u).setName(BJ.optionSiteCollaboration()).setDesc(BJ.optionSiteCollaborationDesc()).addButton((function(e){return e.setButtonText(BJ.buttonManageCollaborators()).onClick((function(){return g(h,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=r.siteId,[4,r.getCurrentSlug()];case 1:return t=n.sent(),new t1(o,t,e).open(),[2]}}))}))}))})),new NI(u).setName(BJ.optionCustomDomain()).setDesc(BJ.optionCustomDomainDesc()).addButton((function(e){return e.setButtonText(BJ.buttonConfigure()).onClick((function(){return g(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.openSection(i.configureCustomDomainSection)];case 1:return e.sent(),[2]}}))}))}))})),new NI(u).setName(BJ.optionNoindex()).setDesc(BJ.optionNoindexDesc()).addToggle((function(e){return e.setValue(c(yJ)).onChange((function(e){return l[yJ]=e}))}))),new NI(u).setName(BJ.optionSiteAppearance()).setHeading(),new NI(u).setName(BJ.optionTheme()).setDesc(BJ.optionThemeDescription()).addDropdown((function(e){return e.addOption("light",Qf.setting.appearance.lightTheme()).addOption("dark",Qf.setting.appearance.darkTheme()).addOption("system",BJ.optionThemeSystem()).setValue(c(bJ)).onChange((function(e){return l[bJ]=e}))})),new NI(u).setName(BJ.optionShowThemeToggle()).setDesc(BJ.optionShowThemeToggleDescription()).addToggle((function(e){return e.setValue(c(wJ)).onChange((function(e){return l[wJ]=e}))})),new NI(u).setName(BJ.optionSiteReadingExperience()).setHeading(),new NI(u).setName(BJ.optionHoverPreviewFile()).setDesc(BJ.optionHoverPreviewFileDescription()).addToggle((function(e){return e.setValue(c(AJ)).onChange((function(e){return l[AJ]=e}))})),new NI(u).setName(BJ.optionHideTitle()).setDesc(BJ.optionHideTitleDescription()).addToggle((function(e){return e.setValue(c(xJ)).onChange((function(e){return l[xJ]=e}))})),new NI(u).setName(BJ.optionReadableLineLength()).setDesc(BJ.optionReadableLineLengthDescription()).addToggle((function(e){return e.setValue(c(TJ)).onChange((function(e){return l[TJ]=e}))})),new NI(u).setName(Qf.setting.editor.optionStrictLineBreak()).setDesc(Qf.setting.editor.optionStrictLineBreakDescription()).addToggle((function(e){return e.setValue(c(DJ)).onChange((function(e){return l[DJ]=e}))})),new NI(u).setName(BJ.optionSlidingWindowMode()).setDesc(BJ.optionSlidingWindowModeDescription()).addToggle((function(e){return e.setValue(c(PJ)).onChange((function(e){return l[PJ]=e}))})),new NI(u).setName(BJ.optionSiteComponents()).setHeading(),new NI(u).setName(BJ.optionShowNavigation()).setDesc(BJ.optionShowNavigationDescription()).addToggle((function(e){return e.setValue(c(kJ)).onChange((function(e){l[kJ]=e}))})),new NI(u).setName(BJ.optionCustomizeNavigation()).setDesc(BJ.optionCustomizeNavigationDesc()).addButton((function(e){return e.setButtonText(BJ.buttonCustomizeSidebar()).onClick((function(){return g(h,void 0,void 0,(function(){var e,t,n,a,s,u,h,d;return y(this,(function(p){switch(p.label){case 0:e=[],p.label=1;case 1:return p.trys.push([1,3,,4]),[4,r.apiList()];case 2:for(t=p.sent(),n=0,a=t.files;n<a.length;n++)s=a[n],e.push(s.path);return[3,4];case 3:return u=p.sent(),i.handleError(u),[3,4];case 4:return h=c(IJ),d=c(FJ),new tJ(o,r,e,h,d).onOrderChange((function(e){l[IJ]=e})).onVisibilityChange((function(e){l[FJ]=e})).open(),[2]}}))}))}))})),new NI(u).setName(BJ.optionShowSearch()).setDesc(BJ.optionShowSearchDescription()).addToggle((function(e){return e.setValue(c(EJ)).onChange((function(e){return l[EJ]=e}))})),new NI(u).setName(BJ.optionShowGraph()).setDesc(BJ.optionShowGraphDescription()).addToggle((function(e){return e.setValue(c(CJ)).onChange((function(e){return l[CJ]=e}))})),new NI(u).setName(BJ.optionShowOutline()).setDesc(BJ.optionShowOutlineDescription()).addToggle((function(e){return e.setValue(c(MJ)).onChange((function(e){return l[MJ]=e}))})),new NI(u).setName(BJ.optionShowBacklinks()).setDesc(BJ.optionShowBacklinksDescription()).addToggle((function(e){return e.setValue(c(LJ)).onChange((function(e){return l[LJ]=e}))})),r.isGuest||(new NI(u).setName(BJ.optionSiteMisc()).setHeading(),new NI(u).setName(BJ.optionSitePassword()).setDesc(BJ.optionSitePasswordDescription()).addButton((function(e){return e.setButtonText(BJ.buttonManagePasswords()).onClick((function(){return g(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.showPasswords()];case 1:return e.sent(),[2]}}))}))}))})),new NI(u).setName(BJ.optionGoogleAnalytics()).setDesc(BJ.optionGoogleAnalyticsDescription()).addText((function(e){return e.setPlaceholder("UA-XXXXX-Y or G-XXXXXXXX").setValue(c(SJ)).onChange((function(e){return l[SJ]=e})).inputEl.style.width="200px"}))),n.createDiv("modal-button-container",(function(e){e.createEl("button",{text:BJ.buttonSaveSiteSettings(),cls:"mod-cta"},(function(e){e.addEventListener("click",(function(){return g(h,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.apiOptions(l)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),i.handleError(e),[2];case 3:return new JA(BJ.msgUpdatedOptions()),[4,i.openReviewChanges()];case 4:return t.sent(),[2]}}))}))}))})),e.createEl("button",{text:BJ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){return g(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.openReviewChanges()];case 1:return e.sent(),[2]}}))}))}))}))})),e.prototype.show.call(this),[2]}}))}))},t}(HJ),_J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=BJ.labelSiteOptions(),t}return f(t,e),t.prototype.show=function(){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s=this;return y(this,(function(l){return n=(t=this).el,i=t.parentModal,r=i.plugin,o=i.app,n.empty(),a=n.createDiv("publish-site-settings-container"),new NI(a).setName(BJ.optionIncludedFolders()).setDesc(createFragment((function(e){var t=s.parentModal.plugin.includes;if(e.appendText(BJ.optionIncludedFoldersDesc()),t.length>0){e.appendText(Qf.plugins.publish.optionCurrentlyIncludedFolders());for(var n=e.createEl("ul"),i=0,r=t;i<r.length;i++){var o=r[i];n.createEl("li",{text:o})}}}))).addButton((function(e){return e.setButtonText(Qf.interface.buttonManage()).onClick((function(){new r1(o,r,s).open()}))})),new NI(a).setName(BJ.optionExcludedFolders()).setDesc(createFragment((function(e){var t=s.parentModal.plugin.excludes;if(e.appendText(BJ.optionExcludedFoldersDesc()),t.length>0){e.appendText(Qf.plugins.sync.optionCurrentlyExcludedFolders());for(var n=e.createEl("ul"),i=0,r=t;i<r.length;i++){var o=r[i];n.createEl("li",{text:o})}}}))).addButton((function(e){return e.setButtonText(Qf.interface.buttonManage()).onClick((function(){new o1(o,r,s).open()}))})),n.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:Qf.dialogue.buttonDone()},(function(e){e.addEventListener("click",(function(){return g(s,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.openReviewChanges()];case 1:return e.sent(),[2]}}))}))}))}))})),e.prototype.show.call(this),[2]}))}))},t}(HJ),WJ=function(e){function t(t){var n=e.call(this)||this;return n.visible=!0,n.children=null,n.section=t,n.innerEl.addClass("file-tree-item"),n}return f(t,e),t.prototype.setChecked=function(e){},t.prototype.setVisible=function(e){this.visible=e,this.el.toggle(e)},t.prototype.applyQuery=function(e){},t.prototype.updateCheckedRecursive=function(){for(var e=this.parent;e;)e.updateChecked(),e=e.parent;this.section.updateChecked()},t}(yH),jJ=function(e,t){var n=e instanceof KJ,i=t instanceof KJ;if(n||i){if(n&&!i)return-1;if(i&&!n)return 1}return xm(e.name,t.name)},GJ=function(e){function t(t,n){var i=e.call(this,t)||this;i.diff=n,i.path=n.path;var r=Kc(n.path),o=Qc(r);"md"===o&&(r=Xc(r)),i.name=r;var a=i,s=a.selfEl,l=a.innerEl;return s.addClass("mod-file","mod-".concat(n.type)),(i.checkboxEl=l.createEl("input",{cls:"file-tree-item-checkbox",type:"checkbox"})).addEventListener("change",i.updateChecked.bind(i)),mx(l.createDiv("file-tree-item-icon"),"lucide-file"),l.createDiv({cls:"file-tree-item-title",text:r}),i.updateChecked(),l.createDiv("tree-item-flair-outer").createSpan({cls:"tree-item-flair",text:"to-delete"===n.type?"To delete":n.type}),"changed"!==n.type||"md"!==o&&"css"!==o&&"js"!==o||l.createDiv("clickable-icon",(function(e){mx(e,"lucide-columns"),Rx(e,BJ.labelCompareWithLive())})).addEventListener("click",(function(e){return g(i,void 0,void 0,(function(){return y(this,(function(t){return e.preventDefault(),new n1(this.section.publish.app,this.section.publish,this.path).open(),[2]}))}))})),s.addEventListener("contextmenu",i.onContextMenu.bind(i)),i}return f(t,e),t.prototype.onSelfClick=function(e){this.setChecked(!this.diff.checked),this.updateCheckedRecursive()},t.prototype.setChecked=function(e){this.diff.checked!==e&&(this.diff.checked=e,this.updateChecked())},t.prototype.updateChecked=function(){var e=this.diff.checked;this.checkboxEl.checked=e,this.selfEl.toggleClass("is-selected",e)},t.prototype.applyQuery=function(e){this.setVisible(this.diff.checked||this.path.toLowerCase().contains(e))},t.prototype.render=function(){e.prototype.render.call(this),this.setCollapsible(!1),this.setClickable(!0)},t.prototype.onContextMenu=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s=this;return y(this,(function(l){switch(l.label){case 0:return e.preventDefault(),t=new PA,n=this.diff,i=n.type,r=n.path,o=this.section.publish.app,[4,this.section.publish.getCurrentSlug()];case 1:return a=l.sent(),"changed"!==i&&"deleted"!==i&&"to-delete"!==i||t.addItem((function(e){return e.setIcon("lucide-globe").setTitle(BJ.labelOpenInLiveSite()).onClick((function(){window.open(s1+"/"+a+"/"+QQ(ru(r)))}))})),"changed"!==i&&"new"!==i&&"to-delete"!==i||t.addItem((function(e){return e.setIcon("lucide-folder-open").setTitle(BJ.labelOpenFile()).onClick((function(){var e=o.workspace.getLeaf(),t=o.vault.getAbstractFileByPath(r);t&&t instanceof ww&&(e.openFile(t,{active:!0}),s.section.publish.modal.close())}))})),"changed"===i&&t.addItem((function(e){return e.setIcon("lucide-columns").setTitle(BJ.labelCompareWithLive()).onClick((function(){new n1(o,s.section.publish,s.path).open()}))})),"changed"!==i&&"deleted"!==i||t.addItem((function(e){return e.setIcon("lucide-pencil").setTitle(BJ.buttonUseLiveVersion()).onClick((function(){return g(s,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(a){switch(a.label){case 0:return[4,this.section.publish.apiDownloadFile(r)];case 1:return e=a.sent(),(t=o.vault.getAbstractFileByPath(r))&&t instanceof ww?(new i1(o,t,this.section.publish.modal,e).open(),[3,9]):[3,2];case 2:return n=Yc(r),(i=n)?[4,o.vault.exists(n)]:[3,4];case 3:i=!a.sent(),a.label=4;case 4:return i?[4,o.vault.createFolder(n)]:[3,6];case 5:a.sent(),a.label=6;case 6:return[4,o.vault.createBinary(r,e)];case 7:return a.sent(),new JA(BJ.messageSuccessfullyUsedLiveVersion()),[4,this.section.publish.modal.reviewChangesSection.show()];case 8:a.sent(),a.label=9;case 9:return[2]}}))}))}))})),t.showAtMouseEvent(e),[2]}}))}))},t}(WJ),KJ=function(e){function t(t,n){var i=e.call(this,t)||this;i.children=[],i.path=n,i.name=Kc(n),i.setCollapsible(!0);var r=i.innerEl;return i.selfEl.addClass("mod-folder"),(i.checkboxEl=r.createEl("input",{cls:"file-tree-item-checkbox",type:"checkbox"})).addEventListener("change",i.updateChecked.bind(i)),mx(r.createDiv("file-tree-item-icon"),"lucide-folder-open"),r.createDiv({cls:"file-tree-item-title",text:i.name}),i}return f(t,e),t.prototype.getChecked=function(){for(var e=0,n=0,i=0,r=this.children;i<r.length;i++){var o=r[i];if(o instanceof GJ)e++,o.diff.checked&&n++;else if(o instanceof t){var a=o.getChecked();e+=a.count,n+=a.checked}}return{count:e,checked:n}},t.prototype.onSelfClick=function(e){var t=this.getChecked(),n=t.count,i=t.checked;if(0!==n){for(var r=i<n,o=0,a=this.children;o<a.length;o++){a[o].setChecked(r)}this.updateChecked(),this.updateCheckedRecursive()}},t.prototype.setChecked=function(e){for(var t=0,n=this.children;t<n.length;t++){n[t].setChecked(e)}this.updateChecked()},t.prototype.updateChecked=function(){var e=this.getChecked(),t=e.count,n=e.checked,i=this.checkboxEl,r=t>0&&n===t;i.checked=r,i.indeterminate=!r&&n>0,this.selfEl.toggleClass("is-selected",r)},t.prototype.applyQuery=function(e){for(var t=!1,n=0,i=this.children;n<i.length;n++){var r=i[n];r.applyQuery(e),t=t||r.visible}this.setVisible(t)},t.prototype.render=function(){this.children.sort(jJ),e.prototype.render.call(this),this.setClickable(!0)},t}(WJ),YJ=function(e){function t(t,n,i){var r=e.call(this,n)||this;r.children=[],r.collapsed=!1,r.folders={},r.files={},r.publish=t;var o=n.createDiv("file-tree publish-section"),a=o.createDiv("publish-section-header");return r.childrenEl=o.createDiv("publish-change-list"),r.sectionEl=o,r.headerEl=a,a.createDiv("publish-section-header-toggle-collapsed-button collapse-icon",(function(e){mx(e,"right-triangle"),e.addEventListener("click",(function(){return r.toggleCollapsed(!0)}))})),a.createDiv({cls:"publish-section-header-text",text:i},(function(e){e.addEventListener("click",(function(){return r.toggleCollapsed(!0)}))})),r.selectedEl=a.createDiv("publish-section-header-selected",(function(e){r.selectedCountEl=e.createSpan({cls:"publish-section-header-selected-count",text:"0"}),e.createSpan({text:BJ.labelFileSelected()})})),a.createDiv({cls:"publish-section-header-action button",text:BJ.buttonSelectAllFiles()}).addEventListener("click",r.checkAll.bind(r)),a.createDiv({cls:"publish-section-header-action",text:BJ.buttonDeselectAllFiles()}).addEventListener("click",r.uncheckAll.bind(r)),r}return f(t,e),t.prototype.toggleCollapsed=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.setCollapsed(!this.collapsed,e)];case 1:return t.sent(),[2]}}))}))},t.prototype.setCollapsed=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return this.collapsed===e?[2]:(this.collapsed=e,LD(this.sectionEl,e),[4,Ml(this.childrenEl,e,t)]);case 1:return n.sent(),[2]}}))}))},t.prototype.collapseAll=function(){for(var e=this.children.slice();e.length>0;){var t=e.pop();t.children&&(t.toggleCollapsed(!1),e.push.apply(e,t.children))}},t.prototype.checkAll=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].setChecked(!0)}this.updateChecked()},t.prototype.uncheckAll=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].setChecked(!1)}this.updateChecked()},t.prototype.updateChecked=function(){var e=this,t=e.files,n=e.selectedEl,i=e.selectedCountEl,r=0,o=0;for(var a in t)t.hasOwnProperty(a)&&(t[a].diff.checked&&r++,o++);i.setText(String(r)+"/"+String(o)),n.toggleClass("u-pop",r>0)},t.prototype.addChild=function(e){var t=Yc(e.path);if(t){var n=this.folders,i=n[t];i||(i=n[t]=new KJ(this,t),this.addChild(i)),i.children.push(e),e.parent=i}else this.addRoot(e)},t.prototype.createItem=function(e){var t=new GJ(this,e);this.files[e.path]=t,this.addChild(t)},t.prototype.render=function(){this.children.sort(jJ),e.prototype.render.call(this),this.updateChecked()},t.prototype.applyQuery=function(e){for(var t=0,n=this.children;t<n.length;t++){n[t].applyQuery(e)}},t.prototype.clear=function(){e.prototype.clear.call(this),this.folders={},this.files={},this.updateChecked()},t}(bH),ZJ=function(e){function t(t){var n=e.call(this,t)||this;n.title=BJ.name(),n.siteOptionsEl=null,n.siteFiltersEl=null,n.noChangesEl=null,n.pathToDiffMap={},n.currentlyPublishedToSiteNameEl=null,n.filterComponent=null,n.app=t.app,n.el.createDiv({cls:"publish-changes-info"},(function(e){e.createDiv({cls:"publish-changes-info-publishing-to",text:BJ.labelPublishingTo()}),(n.currentlyPublishedToSiteNameEl=e.createEl("a","publish-changes-current-site-name")).setAttribute("target","_blank"),e.createDiv("publish-changes-switch-site",(function(e){e.createSpan("clickable-icon",(function(e){mx(e,"lucide-repeat"),Rx(e,BJ.tooltipSwitchSite()),e.addEventListener("click",(function(){return g(n,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,(e=this.parentModal).openSection(e.manageSitesSection)];case 1:return t.sent(),[2]}}))}))}))})),n.siteOptionsEl=e.createSpan("clickable-icon",(function(e){mx(e,"lucide-settings"),Rx(e,BJ.tooltipOpenSiteOptions()),e.addEventListener("click",(function(){var e=n.parentModal;e.openSection(e.siteOptionsSection)}))})),n.siteFiltersEl=e.createSpan("clickable-icon",(function(e){mx(e,"lucide-filter"),Rx(e,BJ.tooltipManagePublishFilters()),e.addEventListener("click",(function(){var e=n.parentModal;e.openSection(e.siteFiltersSection)}))})),e.createSpan("clickable-icon",(function(e){mx(e,"lucide-life-buoy"),Rx(e,BJ.tooltipContactSupport()),e.addEventListener("click",(function(){window.open("mailto:support@obsidian.md?subject=Obsidian%20Publish%20Support")}))}))})),n.filterComponent=new WI(e).setPlaceholder(Qf.setting.hotkeys.promptFilter()),e.createEl("button",{cls:"publish-changes-add-linked-btn",text:BJ.buttonAddLinked()},(function(e){Rx(e,BJ.tooltipAddLinked()),e.addEventListener("click",(function(){return g(n,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d;return y(this,(function(p){for(u in e=this.app.metadataCache,n=(t=this).pathToDiffMap,i=t.sectionNew,r=[],n)n.hasOwnProperty(u)&&(h=n[u]).checked&&"deleted"!==h.type&&r.push(u);for(o=new Set,a=function(t){jS(e.getCache(t),(function(n){var i=e.getFirstLinkpathDest(n.link,t);i&&o.add(i.path)}))},s=0,l=r;s<l.length;s++)u=l[s],a(u);for(u in c=0,n)n.hasOwnProperty(u)&&o.has(u)&&((h=n[u]).checked||"new"!==h.type||(d=i.files[u])&&(d.setChecked(!0),d.updateCheckedRecursive(),c+=1));return new JA(BJ.msgAddedLinkedFiles({count:c})),[2]}))}))}))}))})),n.noChangesEl=n.el.createEl("p",{text:BJ.labelNoChangesDetected()});var i=n.el.createDiv("publish-sections-container");n.sectionChanged=new YJ(t.plugin,i,BJ.labelChangedFilesToBePublished()),n.sectionUnchanged=new YJ(t.plugin,i,BJ.labelUnchangedFilesAlreadyPublished()),n.sectionNew=new YJ(t.plugin,i,BJ.labelNewFilesToBePublished());var r=n.el.createDiv("modal-button-container");return r.createEl("button",{cls:"mod-cta",text:BJ.buttonPublish()},(function(e){e.addEventListener("click",n.uploadChanges.bind(n))})),r.createEl("button",{text:Qf.dialogue.buttonCancel()},(function(e){e.addEventListener("click",n.parentModal.close.bind(n.parentModal))})),n}return f(t,e),t.prototype.setCurrentSiteName=function(e){this.currentlyPublishedToSiteNameEl.setText(e),this.currentlyPublishedToSiteNameEl.setAttribute("href",s1+"/"+e)},t.prototype.show=function(){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f=this;return y(this,(function(m){switch(m.label){case 0:t=this.parentModal,this.pathToDiffMap={},t.plugin.getCurrentSlug().then((function(e){return f.setCurrentSiteName(e)})),n=[],m.label=1;case 1:return m.trys.push([1,3,,4]),[4,t.plugin.scanForChanges()];case 2:return n=m.sent(),this.noChangesEl.toggle(0===n.length),[3,4];case 3:return i=m.sent(),t.handleError(i),[2];case 4:for(o=(r=this).sectionChanged,a=r.sectionUnchanged,s=r.sectionNew,o.clear(),a.clear(),s.clear(),l=0,c=n;l<c.length;l++)u=c[l],this.pathToDiffMap[u.path]=u,"changed"===(h=u.type)||"deleted"===h?o.createItem(u):"new"===h?s.createItem(u):"to-delete"===h&&a.createItem(u);if(this.filterComponent.onChange((function(e){e=e.trim().toLowerCase(),o.applyQuery(e),a.applyQuery(e),s.applyQuery(e)})),o.children.length>0){for(p in a.setCollapsed(!0,!1),s.setCollapsed(!0,!1),o.files)o.files.hasOwnProperty(p)&&"deleted"!==(d=o.files[p]).diff.type&&d.setChecked(!0);for(p in o.folders)o.folders.hasOwnProperty(p)&&o.folders[p].updateChecked()}else o.setCollapsed(!0,!1),a.setCollapsed(!0,!1);return o.render(),a.collapseAll(),a.render(),s.collapseAll(),s.render(),[2,e.prototype.show.call(this)]}}))}))},t.prototype.uploadChanges=function(){return g(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:for(n in e=this.pathToDiffMap,t=[],e)e.hasOwnProperty(n)&&(i=e[n]).checked&&t.push(i);return 0===t.length?(new JA(BJ.msgSelectAtLeastOneFile()),[2]):[4,this.parentModal.uploadChanges(t)];case 1:return r.sent(),[2]}}))}))},t}(HJ),XJ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=BJ.labelUploadChanges(),n.changesContainer=null,n.doneButton=null,n.successMessageEl=null,n.siteLinkEl=null,n.runnable=null,n.changes=[],n.pathToEl={},n.changesContainer=n.el.createDiv("list-item-parent upload-progress-container"),n.successMessageEl=n.el.createDiv({},(function(e){e.createEl("p",{text:BJ.labelClearCache()}),e.createEl("p",{text:BJ.labelVisitSite()},(function(e){return g(n,void 0,void 0,(function(){return y(this,(function(t){return this.siteLinkEl=e.createEl("a"),this.siteLinkEl.setAttribute("target","_blank"),[2]}))}))}))})),n.successMessageEl.hide(),n.el.createDiv("modal-button-container",(function(e){n.doneButton=e.createEl("button",{cls:"mod-cta",text:BJ.buttonDone()},(function(e){e.addEventListener("click",(function(){n.runnable?(n.runnable.cancel(),n.runnable=null):n.parentModal.close()}))})),e.createEl("button",{text:BJ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){n.runnable&&n.runnable.cancel(),n.parentModal.openReviewChanges()}))}))})),n}return f(t,e),t.prototype.addChanges=function(e){this.changes=e},t.prototype.show=function(){return g(this,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return this.runnable&&this.runnable.cancel(),[4,e.prototype.show.call(this)];case 1:for(a.sent(),this.successMessageEl.hide(),this.changesContainer.removeClass("is-finished"),this.doneButton.addClass("mod-warning"),this.doneButton.setText(BJ.buttonStop()),this.changesContainer.empty(),this.pathToEl={},t=function(e){n.pathToEl[e.path]=n.changesContainer.createDiv("publish-upload-item list-item",(function(t){t.createDiv("list-item-part",(function(e){mx(e,"lucide-file")})),t.createDiv({cls:"list-item-part mod-extended publish-upload-item-title",text:$c(e.path)}),t.createDiv("list-item-part",(function(t){var n=t.createSpan("flair");"new"===e.type||"changed"===e.type?n.setText(BJ.labelStatusToPublish()):"deleted"===e.type&&n.setText(BJ.labelStatusToDelete())}))}))},n=this,i=0,r=this.changes;i<r.length;i++)o=r[i],t(o);return this.startUpload(),[2]}}))}))},t.prototype.startUpload=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(d){switch(d.label){case 0:e=this.parentModal,t=e.app,n=e.plugin,i=this.runnable=new dL({onStop:function(){return g(h,void 0,void 0,(function(){var e,t;return y(this,(function(r){switch(r.label){case 0:return this.doneButton.removeClass("mod-warning"),this.doneButton.setText(BJ.buttonDone()),t=s1+"/",[4,n.getCurrentSlug()];case 1:return e=t+r.sent(),this.siteLinkEl.setText(e),this.siteLinkEl.setAttribute("href",e),this.successMessageEl.show(),this.changesContainer.addClass("is-finished"),this.runnable===i&&(this.runnable=null),[2]}}))}))}}),i.start(),r=0,o=this.changes,d.label=1;case 1:if(!(r<o.length))return[3,10];if(a=o[r],s=this.pathToEl[a.path],l=s.find(".flair"),i.isCancelled())return l.setText(BJ.labelStatusCancelled()),s.addClass("mod-failed","mod-completed"),[3,9];d.label=2;case 2:return d.trys.push([2,7,,8]),l.setText(BJ.labelStatusUploading()),"deleted"!==a.type&&"to-delete"!==a.type?[3,4]:[4,n.apiRemoveFile(a.path)];case 3:return d.sent(),l.setText(BJ.labelStatusDeleted()),[3,6];case 4:return(c=t.vault.getAbstractFileByPath(a.path))&&c instanceof ww?[4,n.apiUploadFile(c)]:[3,6];case 5:d.sent(),l.setText(BJ.labelStatusPublished()),d.label=6;case 6:return s.scrollIntoView({behavior:"smooth",block:"center"}),[3,8];case 7:return u=d.sent(),this.parentModal.handleError(u),l.setText(BJ.labelStatusFailed()),s.addClass("mod-failed"),[3,8];case 8:s.addClass("mod-completed"),d.label=9;case 9:return r++,[3,1];case 10:return i.stop(),[2]}}))}))},t}(HJ),$J=function(e){function t(t){var n=e.call(this,t)||this;return n.title=BJ.tooltipEditSiteId(),n.newSlug=null,n.site=null,n.slugInputEl=null,new NI(n.el).setName(BJ.optionSiteId()).setDesc(BJ.optionSiteIdDescription()).addText((function(e){e.setPlaceholder(BJ.optionSiteIdPlaceholder()).onChange((function(e){return n.newSlug=e.toLowerCase()})),n.slugInputEl=e.inputEl})).setClass("site-list-site-id-setting"),n.el.createEl("p","modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:BJ.buttonChange()},(function(e){return g(n,void 0,void 0,(function(){var n=this;return y(this,(function(i){return e.addEventListener("click",(function(){return g(n,void 0,void 0,(function(){var e,n;return y(this,(function(i){switch(i.label){case 0:e=t.plugin,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.apiSetSlug(this.site.id,this.site.host,this.newSlug)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),t.handleError(n),[2];case 4:return[4,t.openSection(t.siteOptionsSection)];case 5:return i.sent(),[2]}}))}))})),[2]}))}))})),e.createEl("button",{text:Qf.dialogue.buttonCancel()},(function(e){return g(n,void 0,void 0,(function(){var n=this;return y(this,(function(i){return e.addEventListener("click",(function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,t.openSection(t.manageSitesSection)];case 1:return e.sent(),[2]}}))}))})),[2]}))}))}))})),n}return f(t,e),t.prototype.setSiteInfo=function(e){this.site=e},t.prototype.setExistingSlug=function(e){this.slugInputEl.value=e},t}(HJ),QJ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=BJ.labelManagePasswords(),n.passwords=null,n.updateDisplay(),n}return f(t,e),t.prototype.setPasswords=function(e){this.passwords=e},t.prototype.updateDisplay=function(){var e=this,t=this.el;if(t.empty(),null===this.passwords)t.createEl("p",{cls:"u-muted",text:BJ.labelNoPassword()});else{var n=0;t.createEl("p",{cls:"u-muted",text:BJ.labelHavePassword()}),t.createEl("hr");for(var i=t.createDiv("passwords-container"),r=function(t){i.createDiv("list-item password-item",(function(i){i.createDiv({cls:"list-item-part",text:t.name||BJ.labelUntitledPassword()}),i.createDiv({cls:"u-muted u-small list-item-part mod-extended",text:BJ.labelPasswordCreatedTime({time:window.moment(t.ts).fromNow()})}),i.createDiv("list-item-part clickable-icon",(function(t){mx(t,"lucide-x"),Rx(t,Qf.dialogue.buttonDelete());var i=n;t.addEventListener("click",(function(){return g(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.parentModal.plugin.apiDelPassword(i)];case 1:return e.sent(),[4,this.parentModal.showPasswords()];case 2:return e.sent(),[2]}}))}))})),n+=1}))}))},o=0,a=this.passwords;o<a.length;o++){r(a[o])}}t.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:BJ.actionNewPassword()},(function(t){t.addEventListener("click",(function(){e.parentModal.openAddPassword()}))})),t.createEl("button",{text:BJ.buttonGoBack()},(function(t){t.addEventListener("click",(function(){var t=e.parentModal;t.openSection(t.siteOptionsSection)}))}))}))},t}(HJ),JJ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=BJ.labelAddPassword(),n.passwordFieldEl=null,n.nicknameFieldEl=null,new NI(n.el).setName(BJ.optionPasswordName()).setDesc(BJ.optionPasswordDesc()).addText((function(e){return e.setPlaceholder(BJ.optionPasswordPlaceholder()).then((function(e){e.inputEl.setAttribute("type","password"),n.passwordFieldEl=e.inputEl}))})),new NI(n.el).setName(BJ.optionNicknameName()).setDesc(BJ.optionNicknameDesc()).addText((function(e){return n.nicknameFieldEl=e.inputEl})),n.el.createDiv("modal-button-container",(function(e){e.createEl("button",{text:BJ.actionAddPassword(),cls:"mod-cta"},(function(e){e.addEventListener("click",(function(){return g(n,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=this.passwordFieldEl.value,t=this.nicknameFieldEl.value,[4,this.parentModal.plugin.apiAddPassword(t,e)];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),this.parentModal.handleError(n),[2];case 3:return new JA(BJ.msgAddedNewPassword()),[4,this.parentModal.showPasswords()];case 4:return i.sent(),[2]}}))}))}))})),e.createEl("button",{text:BJ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){return g(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.parentModal.showPasswords()];case 1:return e.sent(),[2]}}))}))}))}))})),n}return f(t,e),t.prototype.show=function(){return g(this,void 0,void 0,(function(){return y(this,(function(t){return this.passwordFieldEl.value="",this.nicknameFieldEl.value="",e.prototype.show.call(this),[2]}))}))},t}(HJ),e1=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=BJ.labelConfigureCustomDomain(),t}return f(t,e),t.prototype.show=function(){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return(t=this.el).empty(),[4,e.prototype.show.call(this)];case 1:return s.sent(),[4,this.parentModal.plugin.apiCustomUrl()];case 2:return n=s.sent(),new NI(t).setName(BJ.optionCustomUrlName()).setDesc(BJ.optionCustomUrlDesc()).addText((function(e){return i=e.setPlaceholder(BJ.optionCustomUrlPlaceholder()).setValue(n.url||"")})),new NI(t).setName(BJ.optionCustomUrlRedirect()).setDesc(BJ.optionCustomUrlRedirectDesc()).addToggle((function(e){return r=e.setValue(n.redirect)})),o=BJ.labelCustomDomainInstructions({link:'<a href="https://help.obsidian.md/Obsidian+Publish/Set+up+a+custom+domain" target="_blank">'.concat(BJ.labelCustomDomainLinkName(),"</a>")}),this.el.createEl("p",{cls:"u-muted"},(function(e){e.innerHTML=o})),this.el.createDiv("modal-button-container",(function(e){e.createEl("button",{text:BJ.buttonUpdateCustomDomain(),cls:"mod-cta"},(function(e){e.addEventListener("click",(function(){return g(a,void 0,void 0,(function(){var e,t,n,o;return y(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=i.getValue(),t=r.getValue(),[4,this.parentModal.plugin.apiCustomUrl(e,t)];case 1:return a.sent(),[3,3];case 2:return n=a.sent(),this.parentModal.handleError(n),[2];case 3:return(o=this.parentModal).openSection(o.siteOptionsSection),[2]}}))}))}))})),e.createEl("button",{text:BJ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){return g(a,void 0,void 0,(function(){var e;return y(this,(function(t){return(e=this.parentModal).openSection(e.siteOptionsSection),[2]}))}))}))}))})),[2]}}))}))},t}(HJ),t1=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.shares=[],r.siteId=i,r.setTitle(BJ.labelManageSharing({name:n})),r.addButton("",Qf.dialogue.buttonDone(),(function(){return r.close()})),r.display(),r}return f(t,e),t.prototype.display=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l=this;return y(this,(function(c){switch(c.label){case 0:this.contentEl.empty(),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,aG(this.contentEl,(function(){return e=dj.token,t=l.siteId,_W("/publish/share/list",{token:e,site_uid:t});var e,t}))];case 2:return e=c.sent(),this.shares=e.shares,[3,4];case 3:return t=c.sent(),new JA(t.message),[2];case 4:if(this.shares.length>0)for(this.contentEl.createEl("p",{cls:"u-muted",text:BJ.labelSharingWithUsers()}),n=this.contentEl.createDiv(),i=function(e){n.createDiv("list-item",(function(t){e.name?(t.createDiv({cls:"list-item-part",text:e.name}),t.createDiv({cls:"list-item-part mod-extended",text:"<".concat(e.email,">")})):t.createDiv({cls:"list-item-part mod-extended",text:e.email}),e.accepted||t.createDiv({cls:"list-item-part"},(function(e){e.createSpan({cls:"u-muted",text:BJ.labelInvitePending()})})),t.createDiv("list-item-part",(function(t){mx(t,"lucide-x"),Rx(t,BJ.tooltipRemoveUser()),t.addEventListener("click",(function(){return g(l,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,aG(this.contentEl,(function(){return lj(dj.token,n.siteId,e.uid)}))];case 1:return i.sent(),[3,3];case 2:return t=i.sent(),new JA(t.message),[3,3];case 3:return[4,this.display()];case 4:return i.sent(),[2]}}))}))}))}))}))},r=0,o=this.shares;r<o.length;r++)a=o[r],i(a);else this.contentEl.createEl("p",{cls:"u-muted",text:BJ.labelNotSharing()});return s=null,new NI(this.contentEl).setName(BJ.optionInviteUser()).addText((function(e){return e.setPlaceholder(BJ.placeholderInviteUser()).then((function(e){s=e,e.inputEl.addEventListener("keydown",(function(t){t.isComposing||"Enter"===t.key&&l.inviteToSite(e.getValue())}))}))})).addButton((function(e){return e.setButtonText(Qf.interface.buttonAdd()).setCta().onClick((function(){l.inviteToSite(s.getValue())}))})),[2]}}))}))},t.prototype.inviteToSite=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return""!==(e=e.trim())&&e.includes("@")?[4,sj(dj.token,this.siteId,e)]:(new JA(BJ.errorEmailMustBeValid()),[2]);case 1:return t.sent(),this.display(),[2]}}))}))},t}(XA),n1=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.path=i,r.publish=n,r}return f(t,e),t.prototype.onOpen=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:return t=(e=this).app,n=e.path,i=e.publish,r=t.vault.getAbstractFileByPath(n),[4,this.publish.apiDownloadFile(n)];case 1:return o=d.sent(),a=Qc(Kc(n)),s=new XA(t),this.setTitle(BJ.labelCompareWithLive()),this.contentEl.style.overflow="auto",GT.contains(a)?(l=df(o),c="",r&&r instanceof ww?[4,t.vault.cachedRead(r)]:[3,3]):[3,4];case 2:c=d.sent(),d.label=3;case 3:return this.contentEl.appendChild(QH(l,c)),[3,8];case 4:return UT.contains(a)?r&&r instanceof ww?[4,kc(this.contentEl,t.vault.getResourcePath(r))]:[3,6]:[3,8];case 5:d.sent(),d.label=6;case 6:return u=new Blob([new Uint8Array(o)],{type:"image/"+a}),h=URL.createObjectURL(u),[4,kc(this.contentEl,h)];case 7:d.sent(),URL.revokeObjectURL(h),d.label=8;case 8:return r instanceof ww&&this.addButton("",BJ.buttonUseLiveVersion(),(function(){new i1(t,r,i.modal,o).open()})),this.addButton("mod-cta",BJ.buttonDone(),(function(){return s.close()})),[2]}}))}))},t}(XA),i1=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.setTitle(BJ.labelConfirmOverride()),o.contentEl.createEl("p",{text:BJ.labelConfirmOverride_1()}),o.contentEl.createEl("p",{text:BJ.labelConfirmOverride_2()}),o.addButton("mod-warning",BJ.buttonProceed(),(function(){return g(o,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return n&&n instanceof ww?[4,t.vault.modifyBinary(n,r)]:[3,3];case 1:return e.sent(),new JA(BJ.messageSuccessfullyUsedLiveVersion()),[4,i.reviewChangesSection.show()];case 2:e.sent(),this.close(),e.label=3;case 3:return[2]}}))}))})),o.addButton("",Qf.dialogue.buttonCancel(),(function(){return o.close()})),o}return f(t,e),t}(XA),r1=function(e){function t(t,n,i){var r=e.call(this,t,BJ.labelAddIncludedFolder(),BJ.labelAddIncludedFolderDesc(),"plugins.publish.label-number-of-folders-included")||this;return r.publish=null,r.section=null,r.publish=n,r.section=i,r.titleEl.setText(BJ.labelManageIncludedFolders()),r}return f(t,e),t.prototype.onClose=function(){this.section.show()},t.prototype.getPaths=function(){return this.publish.includes},t.prototype.setPaths=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.publish.setIncludes(e)];case 1:return t.sent(),[2]}}))}))},t}(fJ),o1=function(e){function t(t,n,i){var r=e.call(this,t,Qf.plugins.sync.labelAddExcludedFolder(),Qf.plugins.sync.labelAddExcludedFolderDesc(),"plugins.publish.label-number-of-folders-excluded")||this;return r.publish=null,r.section=null,r.publish=n,r.section=i,r.titleEl.setText(Qf.plugins.sync.labelManageExcludedFolders()),r}return f(t,e),t.prototype.onClose=function(){this.section.show()},t.prototype.getPaths=function(){return this.publish.excludes},t.prototype.setPaths=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.publish.setExcludes(e)];case 1:return t.sent(),[2]}}))}))},t}(fJ),a1=Qf.plugins.publish,s1="https://publish.obsidian.md";Lf&&(s1="http://127.0.0.1:3001");var l1=function(e){function t(n,i){var r=e.call(this,i)||this;return r.name="RequestError",r.code=n,Object.setPrototypeOf(r,t.prototype),r}return f(t,e),t}(Error),c1=["obsidian.css","publish.css","favicon.ico","publish.js"],u1=function(){function e(){this.id="publish",this.name=a1.name(),this.description=a1.desc(),this.app=null,this.vault=null,this.plugin=null,this.siteId=null,this.host=null,this.isGuest=null,this.includes=[],this.excludes=[],this.modal=null,this.requestSaveData=mc(this.saveData.bind(this),2e3)}return e.prototype.init=function(e,t){var n=this;this.app=e,this.vault=e.vault,this.plugin=t,t.registerRibbonItem(a1.actionPublishChanges(),"lucide-send",this.openPublishChanges.bind(this)),t.registerGlobalCommand({id:"publish:view-changes",name:a1.actionPublishChanges(),icon:"lucide-send",callback:this.openPublishChanges.bind(this)}),t.registerGlobalCommand({id:"publish:publish-file",name:a1.actionPublishFile(),icon:"lucide-send",checkCallback:function(t){if(!n.siteId)return!1;var i=e.workspace.getActiveFile();return!(!i||!n.isFileSupported(i)||!1===n.getPublishFlag(i))&&(t||n.uploadFile(i),!0)}}),t.registerGlobalCommand({id:"publish:open-in-live-site",name:a1.labelOpenInLiveSite(),icon:"lucide-globe",checkCallback:function(t){if(!n.siteId)return!1;var i=e.workspace.getActiveFile();return!(!i||!n.isFileSupported(i)||!1===n.getPublishFlag(i))&&(t||n.getCurrentSlug().then((function(e){window.open(s1+"/"+e+"/"+QQ(ru(i.path)))})),!0)}})},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return[4,this.loadData()];case 1:return i.sent(),t.registerEvent(e.workspace.on("file-menu",(function(e,t,i){t instanceof ww&&("tab-header"===i||"more-options"===i||"file-explorer-context-menu"===i)&&n.isFileSupported(t)&&!1!==n.getPublishFlag(t)&&e.addItem((function(e){return e.setSection("action").setTitle(a1.actionPublishFile()).setIcon("lucide-send").onClick((function(){n.uploadFile(t)}))}))}),this)),[2]}}))}))},e.prototype.onDisable=function(e,t){this.modal=null},e.prototype.loadData=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,this.plugin.loadData()];case 1:if(!(e=t.sent()))return[2];try{this.siteId=e.siteId,this.host=e.host,this.includes=e.included||[],this.excludes=e.excluded||[]}catch(e){console.error(e)}return[2]}}))}))},e.prototype.saveData=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.plugin.saveData({siteId:this.siteId,host:this.host,included:this.includes,excluded:this.excludes})];case 1:return e.sent(),[2]}}))}))},e.prototype.setup=function(e,t){return g(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return this.siteId=e,this.host=t,[4,this.saveData()];case 1:return n.sent(),[2]}}))}))},e.prototype.setIncludes=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.includes=e,[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},e.prototype.setExcludes=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.excludes=e,[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},e.prototype.getHost=function(){var e=this.host||"127.0.0.1:3002";return e.startsWith("127.0.0.1")||e.startsWith("localhost")?"http://"+e:"https://"+e},e.prototype.isFileSupported=function(e){return t=e.extension,XT.contains(t)||c1.contains(e.name);var t},e.prototype.scanForChanges=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m;return y(this,(function(v){switch(v.label){case 0:return e=this.vault,t=[],[4,this.apiList()];case 1:n=v.sent(),this.isGuest=!n.owner,i={},r=0,o=n.files,v.label=2;case 2:return r<o.length?(a=o[r],s=a.path,i[s]=a,(l=e.getAbstractFileByPath(s))&&l instanceof ww?!1===(m=this.getPublishFlag(l))?[3,4]:[4,this.getHash(l)]:[3,4]):[3,6];case 3:return v.sent()!==a.hash?t.push({path:s,ctime:a.ctime,mtime:a.mtime,size:a.size,type:"changed",checked:!0===m}):t.push({path:s,ctime:a.ctime,mtime:a.mtime,size:a.size,type:"to-delete",checked:!1}),[3,5];case 4:t.push({path:s,ctime:a.ctime,mtime:a.mtime,size:a.size,type:"deleted",checked:!1}),v.label=5;case 5:return r++,[3,2];case 6:for(c=e.getRoot(),u=[c];u.length;)if((h=u.pop())instanceof kw)for(d=0,p=h.children;d<p.length;d++)f=p[d],u.push(f);else if(h instanceof ww&&this.isFileSupported(h)&&!i.hasOwnProperty(h.path)){if(!1===(m=this.getPublishFlag(h)))continue;t.push({path:h.path,ctime:0,mtime:0,size:0,type:"new",checked:!0===m})}return[2,t]}}))}))},e.prototype.apiRequest=function(e){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,ajaxPromise(e)];case 1:return t=r.sent(),[3,3];case 2:if((n=r.sent())instanceof XMLHttpRequest)throw new l1("NET","Network unavailable.");if(n instanceof Error)throw new l1("NET",n.message);throw new l1("NET","Unknown");case 3:if((i=JSON.parse(t)).code&&i.message)throw new l1(i.code,i.message);return[2,i]}}))}))},e.prototype.apiPostFrontend=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){return t.token=dj.token,[2,this.apiRequest({method:"POST",url:s1+"/"+e,data:t})]}))}))},e.prototype.apiPostBackend=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){return t.id=this.siteId,t.token=dj.token,[2,this.apiRequest({method:"POST",url:this.getHost()+"/"+e,data:t})]}))}))},e.prototype.apiSetSlug=function(e,t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){return[2,this.apiPostFrontend("api/slug",{id:e,host:t,slug:n})]}))}))},e.prototype.apiGetSlugs=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostFrontend("api/slugs",{ids:e})]}))}))},e.prototype.apiCheckSlug=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostFrontend("api/site",{slug:e})]}))}))},e.prototype.apiCustomUrl=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){return[2,this.apiPostFrontend("api/customurl",{id:this.siteId,host:this.host,url:e,redirect:t})]}))}))},e.prototype.apiList=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2,this.apiPostBackend("api/list",{version:2})]}))}))},e.prototype.apiOptions=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostBackend("api/options",{options:e})]}))}))},e.prototype.apiGetPassword=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2,this.apiPostBackend("api/password",{})]}))}))},e.prototype.apiAddPassword=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){return[2,this.apiPostBackend("api/password",{name:e,pw:t})]}))}))},e.prototype.apiDelPassword=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostBackend("api/password",{del:e})]}))}))},e.prototype.apiRemoveFile=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostBackend("api/remove",{path:e})]}))}))},e.prototype.apiUploadFile=function(e){return g(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:if(e.stat.size>52428800)throw new l1("TOOLARGE","Failed to upload file over limit of 50mb.");return[4,this.getHash(e)];case 1:return t=r.sent(),[4,this.vault.readBinary(e)];case 2:return n=r.sent(),i={"obs-token":dj.token,"obs-id":this.siteId,"obs-path":encodeURIComponent(e.path),"obs-hash":t},[2,this.apiRequest({method:"POST",url:this.getHost()+"/api/upload",headers:i,data:n})]}}))}))},e.prototype.apiDownloadFile=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t={id:this.siteId,token:dj.token,path:e},[4,fetch(this.getHost()+"/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,n.sent().arrayBuffer()]}}))}))},e.prototype.getCurrentSlug=function(){return g(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:e=this.siteId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.apiGetSlugs([e])];case 2:return[2,t.sent()[e]];case 3:return t.sent(),[2,e];case 4:return[2]}}))}))},e.prototype.getHash=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){return(t=this.getHashFromMetadataCache(e))?[2,t]:[2,this.computeHash(e)]}))}))},e.prototype.getPublishFlag=function(e){var t=this.app.metadataCache.getFileCache(e);if(!t)return null;var n=kS(t.frontmatter,"publish");if(null!=n){if(String.isString(n)){if("false"===(n=n.toLowerCase())||"no"===n)return!1;if("true"===n||"yes"===n)return!0}return!!n}for(var i=0,r=this.excludes;i<r.length;i++){var o=r[i];if(e.path.startsWith(o+"/"))return!1}for(var a=0,s=this.includes;a<s.length;a++){o=s[a];if(e.path.startsWith(o+"/"))return!0}return null},e.prototype.getHashFromMetadataCache=function(e){var t=this.app.metadataCache.getFileInfo(e.path);return t&&t.mtime===e.stat.mtime&&t.size===e.stat.size?t.hash:null},e.prototype.computeHash=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.vault.readBinary(e)];case 1:return[4,vf(t.sent())];case 2:return[2,t.sent()]}}))}))},e.prototype.openModal=function(e){var t=this.modal;t||(t=this.modal=new NJ(this.app,this)),e&&t.autoLoad(e(t)),t.open()},e.prototype.openPublishChanges=function(){this.openModal()},e.prototype.viewSites=function(){this.openModal((function(e){return e.manageSitesSection}))},e.prototype.uploadFile=function(e){this.openModal((function(t){return t.uploadProgressSection.addChanges([{path:e.path,ctime:0,mtime:0,size:0,type:"new",checked:!0}]),t.uploadProgressSection}))},e}(),h1=Qf.plugins.quickSwitcher,d1={showExistingOnly:!1,showAttachments:!0,showAllFileTypes:!1},p1=function(){function e(){this.id="switcher",this.name=h1.name(),this.description=h1.desc(),this.defaultOn=!0,this.plugin=null,this.options=d1,this.QuickSwitcherModal=f1}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerRibbonItem(h1.actionOpen(),"lucide-file-search",this.onOpen.bind(this)),t.registerGlobalCommand({id:"switcher:open",name:h1.actionOpen(),icon:"lucide-navigation",callback:this.onOpen.bind(this),hotkeys:[oA(["Mod"],"O")]})},e.prototype.onEnable=function(e,t){return g(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return t.addSettingTab(new m1(e,t,this)),n=this,[4,t.loadData()];case 1:return n.options=i.sent()||d1,[2]}}))}))},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.onOpen=function(){new f1(this.app,this.options).open()},e}(),f1=function(e){function t(t,n){var i=e.call(this,t)||this;i.emptyStateText=h1.labelNoNoteCreateNew(),i.shouldShowNonFileBookmarks=!0,i.allowCreateNewFile=!0,i.shouldShowUnresolved=!n.showExistingOnly,i.shouldShowNonImageAttachments=n.showAttachments,i.shouldShowImages=n.showAttachments,i.shouldShowAllTypes=n.showAllFileTypes,i.setPlaceholder(h1.promptTypeFileName()),i.setInstructions([{command:"â†‘â†“",purpose:h1.instructionNavigate()},{command:"â†µ",purpose:h1.instructionOpen()},{command:Ul?"âŒ˜ â†µ":"ctrl â†µ",purpose:h1.instructionOpenInNewTab()},{command:Ul?"âŒ˜ âŒ¥ â†µ":"ctrl alt â†µ",purpose:h1.instructionOpenToTheRight()},{command:"shift â†µ",purpose:h1.instructionCreate()},{command:"esc",purpose:h1.instructionDismiss()}]);var r=i.scope;return r.register(["Shift"],"Enter",(function(e){return i.selectSuggestion(null,e),!1})),r.register(["Mod","Shift"],"Enter",(function(e){return i.selectSuggestion(null,e),!1})),r.register(null,"Enter",(function(e){return i.selectActiveSuggestion(e),!1})),i}return f(t,e),t.prototype.onChooseSuggestion=function(e,t){var n,i=Ak.isModEvent(t),r="",o=this.app.workspace.getActiveViewOfType(YP);if(o&&(r=(null===(n=o.file)||void 0===n?void 0:n.path)||""),e){if("file"===e.type||"alias"===e.type){this.app.workspace.getLeaf(i).openFile(e.file,{active:!0})}else if("unresolved"===e.type){this.app.workspace.getLeaf(i).openLinkText(e.linktext,r,{active:!0})}else if("bookmark"===e.type){var a=this.app.internalPlugins.getEnabledPluginById("bookmarks");null==a||a.openBookmark(e.item,i)}}else this.app.workspace.openLinkText(this.inputEl.value,r,i,{active:!0})},t}(IZ),m1=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new NI(t).setName(h1.optionShowExistingOnly()).setDesc(h1.optionShowExistingOnlyDescription()).addToggle((function(t){return t.setValue(n.showExistingOnly).onChange((function(t){n.showExistingOnly=t,e.plugin.saveData(n)}))})),new NI(t).setName(h1.optionShowAttachments()).setDesc(h1.optionShowAttachmentsDesc()).addToggle((function(t){return t.setValue(n.showAttachments).onChange((function(t){n.showAttachments=t,e.plugin.saveData(n)}))})),this.app.vault.getConfig("showUnsupportedFiles")&&new NI(t).setName(h1.optionShowAllFileTypes()).setDesc(h1.optionShowAllFileTypesDesc()).addToggle((function(t){return t.setValue(n.showAllFileTypes).onChange((function(t){n.showAllFileTypes=t,e.plugin.saveData(n)}))}))},t}(aY),v1=function(){function e(){this.id="random-note",this.name=Qf.plugins.randomNote.name(),this.description=Qf.plugins.randomNote.desc(),this.app=null,this.pluginInstance=null}return e.prototype.init=function(e,t){this.app=e,this.pluginInstance=t,t.registerRibbonItem(Qf.plugins.randomNote.actionOpen(),"dice",this.onRandomNote.bind(this)),t.registerGlobalCommand({id:"random-note",name:Qf.plugins.randomNote.actionOpen(),icon:"dice-glyph",callback:this.onRandomNote.bind(this)})},e.prototype.onRandomNote=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:for(e=[],t=0,n=this.app.vault.getAllLoadedFiles();t<n.length;t++)(i=n[t])instanceof ww&&"md"===i.extension&&e.push(i);return r=e[Math.floor(Math.random()*e.length)],[4,this.app.workspace.getLeaf().openFile(r,{active:!0})];case 1:return o.sent(),[2]}}))}))},e}(),g1=function(){function e(){this.id="slash-command",this.name=Qf.plugins.slashCommand.name(),this.description=Qf.plugins.slashCommand.desc(),this.defaultOn=!1}return e.prototype.init=function(e,t){this.suggest=new b1(e)},e.prototype.onEnable=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(t){return e.workspace.editorSuggest.addSuggest(this.suggest),[2]}))}))},e.prototype.onDisable=function(e,t){e.workspace.editorSuggest.removeSuggest(this.suggest)},e}(),y1=/(^|\s)\/([^\s\/]*)$/,b1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.onTrigger=function(e,t,n){if(!n)return null;var i=e.line,r=t.getLine(i).substr(0,e.ch).match(y1);if(r){var o=r.index+r[1].length,a=r[2];return{start:{line:i,ch:o},end:{line:i,ch:e.ch},query:a}}return null},t.prototype.selectSuggestion=function(e,t){var n=this.context;(this.close(),n)&&(this.app.lastEvent=t,n.editor.replaceRange("",n.start,n.end),pW(e.item))},t.prototype.getSuggestions=function(e){for(var t=this.app.internalPlugins.getPluginById("command-palette").instance.getCommands(),n=NL(e.query),i=[],r=0,o=t;r<o.length;r++){var a=o[r],s=n(a.name);s&&i.push({match:s,item:a})}return zL(i),i},t.prototype.renderSuggestion=function(e,t){t.addClass("mod-complex");var n=t.createSpan("suggestion-content"),i=t.createSpan("suggestion-aux"),r=n.createDiv("suggestion-title"),o=e.item,a=o.name,s=a.indexOf(": ");if(-1!==s){var l=a.slice(0,s),c=a.slice(s+2);WL(r.createSpan("suggestion-prefix"),l,e.match),WL(r.createSpan(),c,e.match,-(s+2))}else WL(r.createSpan(),a,e.match);var u=this.app,h=u.hotkeyManager.getHotkeys(o.id),d=u.hotkeyManager.getDefaultHotkeys(o.id);if(h)for(var p=0,f=h;p<f.length;p++){var m=f[p];i.createEl("kbd",{cls:"suggestion-hotkey",text:sA(m)})}else if(d)for(var v=0,g=d;v<g.length;v++){m=g[v];i.createEl("kbd",{cls:"suggestion-hotkey",text:sA(m)})}var y=this.app.internalPlugins.getPluginById("command-palette").instance.options.pinned;y&&y.contains(o.id)&&i.createSpan({cls:"suggestion-flair"},(function(e){mx(e,"lucide-pin")}))},t}(pF),w1=Nw("/lib/reveal/reveal.js"),k1=function(){function e(){this.id="slides",this.name=Qf.plugins.slides.name(),this.description=Qf.plugins.slides.desc()}return e.prototype.init=function(e,t){var n=this;this.app=e,t.registerGlobalCommand({id:"slides:start",name:Qf.plugins.slides.actionStart(),icon:"lucide-monitor",checkCallback:function(e){var t=n.app.workspace.getActiveFile();if(t&&"md"===t.extension)return e||new C1(n.app).openFile(t),!0}})},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this))},e.prototype.onFileMenu=function(e,t){var n=this;t instanceof ww&&"md"===t.extension&&e.addItem((function(e){return e.setSection("view").setTitle(Qf.plugins.slides.actionStart()).setIcon("lucide-monitor").onClick((function(){return new C1(n.app).openFile(t)}))}))},e}(),C1=function(e){function t(t){var n=e.call(this)||this;return n.containerEl=null,n.revealCssEl=null,n.themeCssEl=null,n.deck=null,n.app=t,n.scope=new Tk,n.scope.register([],"Escape",n.close.bind(n)),n}return f(t,e),t.prototype.openFile=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w=this;return y(this,(function(y){switch(y.label){case 0:return this.destroy(),this.app.keymap.pushScope(this.scope),[4,this.app.vault.read(e)];case 1:t=y.sent(),y.label=2;case 2:for(y.trys.push([2,6,,7]),this.containerEl&&this.containerEl.detach(),n=w1.promise,i="moonstone"===this.app.vault.getConfig("theme"),r=this.containerEl=activeDocument.body.createDiv("slides-container"),(o=this.themeCssEl=activeDocument.head.createEl("link",{prepend:!0})).setAttribute("rel","stylesheet"),i?o.setAttribute("href","/lib/reveal/white.css"):o.setAttribute("href","/lib/reveal/black.css"),(a=this.revealCssEl=activeDocument.head.createEl("link",{prepend:!0})).setAttribute("rel","stylesheet"),a.setAttribute("href","/lib/reveal/reveal.css"),s=r.createDiv("reveal"),l=s.createDiv("slides"),s.createDiv("slides-close-btn",(function(e){mx(e,"lucide-x-square"),e.addEventListener("click",w.close.bind(w))})),c=pS(t),u=yS(c),h={definitions:xS(c)},d=c.children,p=[[]],v=0;v<d.length;v++)"thematicBreak"===(f=d[v]).type?p.push([]):p.last().push(f);for(m=function(e){var t=p[e];if(0===t.length)return"continue";c.children=t;var n=bS(c,h);l.createEl("section",{},(function(e){var t=qT(n);e.appendChild(t)}))},v=0;v<p.length;v++)m(v);return g=[],kB.postProcess(this.app,{docId:oc(16),sourcePath:e.path,frontmatter:u,promises:g,addChild:function(e){return w.addChild(e)},getSectionInfo:function(){return null},containerEl:l,el:l}),g.length>0?[4,Promise.all(g)]:[3,4];case 3:y.sent(),y.label=4;case 4:return[4,n];case 5:return y.sent(),(this.deck=new Reveal(s,{embedded:!0,keyboardCondition:"focused",controlsTutorial:!1,overview:!1})).initialize(),setTimeout((function(){s.dispatchEvent(new PointerEvent("pointerdown"))}),0),[3,7];case 6:return b=y.sent(),console.error(b),this.close(),[3,7];case 7:return[2]}}))}))},t.prototype.close=function(){this.destroy()},t.prototype.destroy=function(){this.app.keymap.popScope(this.scope);var e=this,t=e.deck,n=e.containerEl,i=e.revealCssEl,r=e.themeCssEl;n&&(n.detach(),this.containerEl=null),i&&(i.detach(),this.revealCssEl=null),r&&(r.detach(),this.themeCssEl=null),t&&t.destroy()},t}(xA),M1=Qf.plugins.sync,E1=Qf.plugins.publish,S1=36e5,x1=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.vaults=[],r.sync=i,r}return f(t,e),t.prototype.display=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w,k,C=this;return y(this,(function(M){switch(M.label){case 0:if(t=(e=this).app,n=e.sync,(i=e.containerEl).empty(),!Zl.supportsIndexedDb)return new NI(i).setName(Qf.interface.msgIndexedDbNotSupported()).setDesc(Qf.interface.msgIndexedDbIOS()),[2];if(!n.initialized)return this.displayInitializing(),[2];if(r=n.getRemoteVaultId(),o=n.getRemoteVaultName(),!dj.token)return this.displayRequireLogin(),[2];if(a="",(s=t.vault.adapter)instanceof mu?(l=s.getBasePath().toLowerCase()).contains("dropbox")?a="Dropbox":l.contains("com~apple~clouddocs")||l.contains("icloud~")?a="iCloud":l.contains("onedrive")&&(a="OneDrive"):s instanceof eW&&"ICLOUD"===s.fs.dir&&(a="iCloud"),a?new NI(i).setName(M1.labelThirdPartySyncWarning()).setDesc(createFragment((function(e){e.createSpan({cls:"mod-warning",text:M1.labelThirdPartySyncWarningDesc({service:a})}),e.createEl("br"),e.createEl("a",{href:"https://help.obsidian.md/sync/switch",text:Qf.interface.buttonLearnMore(),attr:{target:"_blank"}})}))):Zl.isMacOS&&s instanceof mu&&(l=s.getBasePath().toLowerCase(),c=window.electron.ipcRenderer.sendSync("documents-dir"),u=window.electron.ipcRenderer.sendSync("desktop-dir"),(l.startsWith(c.toLowerCase())||l.startsWith(u.toLowerCase()))&&new NI(i).setDesc(createFragment((function(e){e.createSpan({text:M1.labelIcloudDriveWarning()}),e.createEl("br"),e.createEl("a",{href:"https://help.obsidian.md/sync/switch",text:Qf.interface.buttonLearnMore(),attr:{target:"_blank"}})})))),r||dj.token)return[3,4];h=oG(i),M.label=1;case 1:return M.trys.push([1,3,,4]),[4,XW(dj)];case 2:return M.sent(),this.display(),[2];case 3:return d=M.sent(),h.hide(),"Not logged in"===d.message?(this.displayRequireLogin(),[2]):(i.createEl("p",{text:Qf.plugins.publish.msgNetworkError()}).createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:M1.buttonRetry()},(function(e){e.addEventListener("click",(function(){C.display()}))}))})),[3,4]);case 4:return p=new NI(i).setName(M1.optionRemoteVault()),o?(p.setDesc(M1.optionRemoteVaultDescConnected({name:o})),p.addButton((function(e){return e.setButtonText(M1.buttonDisconnectFromRemoteVault()).setClass("mod-destructive").onClick((function(){return g(C,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.sync.unsetup()];case 1:return e.sent(),[4,this.display()];case 2:return e.sent(),[2]}}))}))}))}))):p.setDesc(M1.optionRemoteVaultDescNotConnected()),p.addButton((function(e){return e.setButtonText(M1(r?"button-manage-remote-vault":"button-choose-remote-vault")).onClick((function(){n.openChooseRemoteVaultModal()}))})),r&&(n.getPause()?new NI(i).setName(M1.optionSyncStatus()).setDesc(M1.optionSyncStatusDescPaused()).addButton((function(e){return e.setButtonText(M1.buttonResume()).setCta().onClick((function(){n.setPause(!1),n.requestSync(),C.display()}))})):new NI(i).setName(M1.optionSyncStatus()).setDesc(M1.optionSyncStatusDescRunning()).addButton((function(e){return e.setButtonText(M1.buttonPause()).onClick((function(){n.setPause(!0),C.display()}))})),-1!==n.encryptionVersion&&n.encryptionVersion<PW&&new NI(i).setName(M1.labelUpgradeVaultEncryption()).setDesc(M1.labelUpgradeVaultEncryptionDesc()).addButton((function(e){return e.setButtonText(M1.labelUpgradeVault()).onClick((function(){new I1(C.app,C.sync).open()}))})),new NI(i).setName(M1.optionDeviceName()).setDesc(M1.optionDeviceNameDesc()).addText((function(e){return e.setPlaceholder(n.getDefaultDeviceName()).setValue(n.deviceName).onChange((function(e){n.deviceName=e,n.forceSaveData()}))})),new NI(i).setName(M1.optionViewDeletedFiles()).setDesc(M1.optionViewDeletedFilesDesc()).addButton((function(e){return e.setButtonText(M1.buttonView()).onClick((function(){return n.showDeletedFiles()}))})).addButton((function(e){return e.setButtonText(M1.buttonBulkRestore()).onClick((function(){return n.showDeletedFiles(!0)}))})),new NI(i).setName(M1.optionSyncLog()).setDesc(M1.optionSyncLogDesc()).addButton((function(e){return e.setButtonText(M1.buttonView()).onClick((function(){return n.showSyncLog()}))})),m=function(){return g(C,void 0,void 0,(function(){var e,t,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return[4,n.size()];case 1:return e=c.sent(),t=e.size,i=t>e.limit,r=t>.95*e.limit,o=t<0?"Unknown":wf(t),a=e.limit<0?"Unknown":wf(e.limit),s="Unknown"===a&&"Unknown"===o?M1.optionVaultSizeUnknown():M1.optionVaultSizeDesc({size:o,limit:a}),r&&!i&&b.setName(M1.optionAlmostOverSize()),b.setDesc(s),v.setDesc(s),b.setVisibility(r),v.setVisibility(!r),r||(l=Math.max(1,t/e.limit*100),f.setValue(l)),[2]}}))}))},v=new NI(i).setName(M1.optionVaultSize()).setDesc(M1.optionVaultSizeLoading()).addProgressBar((function(e){f=e})),b=new NI(i).setName(M1.optionOverSize()).setDesc(M1.optionVaultSizeLoading()).addButton((function(e){return e.setButtonText(M1.buttonUpgradeStorage()).onClick((function(){window.open("https://obsidian.md/account#sync")}))})).addButton((function(e){return e.setButtonText(M1.msgLargestFiles()).onClick((function(){new H1(t,n).open()}))})).addButton((function(e){return e.setWarning().setButtonText(M1.buttonPurgeRemote()).setTooltip(M1.tooltipPurgeRemote()).onClick((function(){return g(C,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,n.purge()];case 1:return e.sent(),new JA(M1.msgPurgeComplete()),[4,m()];case 2:return e.sent(),[2]}}))}))}))})),b.settingEl.hide(),m(),Zl.isMobileApp&&new NI(i).setName(M1.optionPreventSleep()).setDesc(M1.optionPreventSleepDesc()).addToggle((function(e){return e.setValue(C.sync.preventSleep).onChange((function(e){return C.sync.preventSleep=e}))})),new NI(i).setName(M1.optionContactSupport()).setDesc(M1.optionContactSupportDesc()).addButton((function(e){return e.setButtonText(M1.buttonCopyDebug()).onClick((function(){return g(C,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return t=(e=navigator.clipboard).writeText,[4,this.gatherSyncSystemInfo()];case 1:return[4,t.apply(e,[n.sent()])];case 2:return n.sent(),new JA(Qf.interface.copied_generic()),[2]}}))}))}))})).addButton((function(e){return e.setButtonText(M1.buttonEmailSupport()).onClick((function(){return g(C,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return[4,this.gatherSyncSystemInfo()];case 1:return e=n.sent(),t=encodeURIComponent(e),window.open("mailto:support@obsidian.md?subject=Obsidian%20Sync%20Support&body=".concat(t)),[2]}}))}))}))})),new NI(i).setHeading().setName(M1.optionSelectiveSync()),new NI(i).setName(M1.optionExcludedFolders()).setDesc(createFragment((function(e){var t=C.sync.ignoreFolders;if(e.appendText(M1.optionExcludedFolderDesc()),t.length>0){e.appendText(M1.optionCurrentlyExcludedFolders());for(var n=e.createEl("ul"),i=0,r=t;i<r.length;i++){var o=r[i];n.createEl("li",{text:o})}}}))).addButton((function(e){return e.setButtonText(M1.buttonManageExcludedFolders()).onClick((function(){C.manageExclusions()}))})),(w=function(e,t){var r=null;new NI(i).setName(Qf("plugins.sync.option-sync-"+e)).setDesc(Qf("plugins.sync.option-sync-"+e+"-desc",t)).addExtraButton((function(e){return e.setIcon("lucide-alert-circle").setTooltip(M1.tooltipUpdateSettingOnAllDevices()).then((function(e){r=e,e.extraSettingsEl.hide()}))})).addToggle((function(t){return t.setValue(n.allowTypes.has(e)).onChange((function(t){n.setSyncType(e,t),r.extraSettingsEl.show()}))}))})("image",{extensions:UT.join(", ")}),w("audio",{extensions:_T.join(", ")}),w("video",{extensions:WT.join(", ")}),w("pdf"),w("unsupported"),k=function(e){var t=null;new NI(i).setName(Qf("plugins.sync.option-sync-"+e)).setDesc(Qf("plugins.sync.option-sync-"+e+"-desc")).addExtraButton((function(e){return e.setIcon("lucide-alert-circle").setTooltip(M1.tooltipUpdateSettingOnAllDevices()).then((function(e){t=e,e.extraSettingsEl.hide()}))})).addToggle((function(i){return i.setValue(n.allowSpecialFiles.has(e)).onChange((function(i){n.setAllowSpecialFile(e,i),t.extraSettingsEl.show()}))}))},new NI(i).setHeading().setName(M1.optionVaultConfigSync()),new NI(i).setName(M1.optionViewConfigFiles()).setDesc(M1.optionViewConfigFilesDesc()).addButton((function(e){return e.setButtonText(M1.buttonView()).onClick((function(){return n.showConfigFiles()}))})),k("app"),k("appearance"),k("appearance-data"),k("hotkey"),k("core-plugin"),k("core-plugin-data"),k("community-plugin"),k("community-plugin-data")),[2]}}))}))},t.prototype.manageExclusions=function(){new R1(this.app,this.sync,this).open()},t.prototype.displayInitializing=function(){var e=this,t=this.containerEl;t.createEl("p",{text:"Sync is still loading, please refresh this page later."}),t.createDiv("modal-button-container",(function(t){t.createEl("button",{text:"Refresh"},(function(t){t.addEventListener("click",(function(){e.display()}))}))}))},t.prototype.displayRequireLogin=function(){var e=this,t=this.containerEl;t.createEl("p",{text:"Obsidian Sync is Obsidian's add-on sync service with end-to-end encryption and version history."}),t.createEl("p",{text:"To start syncing, please log in or create a new Obsidian account."}),t.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:M1.buttonSignUp()},(function(e){e.addEventListener("click",(function(){window.open("http://obsidian.md/account","_blank")}))})),t.createEl("button",{text:M1.buttonLogIn()},(function(t){t.addEventListener("click",(function(){var t=new dJ(e.app);t.onClose=e.display.bind(e),t.open()}))}))}))},t.prototype.gatherSyncSystemInfo=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return t=(e=this).app,n=e.sync,[4,Zj()];case 1:if(i=h.sent(),r=t.vault.adapter,o="",r instanceof mu?o=r.getBasePath():r instanceof eW&&"ICLOUD"===r.fs.dir&&(o="iCloud"),a=["SYNC INFO:","\tVault ID: ".concat(n.getRemoteVaultId()),"\tHost server: ".concat(n.getHost()),"\tDevice name: ".concat(n.deviceName),"\tAllowed file types: ".concat(Array.from(n.allowTypes).join(", ")),"\tAllowed special types: ".concat(Array.from(n.allowSpecialFiles).join(", ")),"\tIgnored directories:".concat(n.ignoreFolders.map((function(e){return"\n\t\t- "+e})).join(""))],""!==o&&a.push("\tVault path: ".concat(o)),Zl.isMobile&&a.push("\tPrevent sleep: ".concat(n.preventSleep)),t.plugins.isEnabled())for(u in s=t.plugins.manifests,l=t.plugins.plugins,a.push("\tPlugins: (".concat(Object.keys(l).length," enabled/").concat(Object.keys(s).length," installed)")),c=1,l)l.hasOwnProperty(u)&&(a.push("\t\t".concat(c,": ").concat(l[u].manifest.name," v").concat(l[u].manifest.version)),c++);return a.push("\tSync logs:"),a.push.apply(a,n.syncLog.slice(-20).map((function(e){return"\t\t".concat(e.ts," ").concat(e.error?"Error":"Info "," ").concat(e.info).concat(e.file?" - "+e.file:"")}))),[2,i+=a.join("\n")]}}))}))},t}(aY),T1=["mod-avatar-color-1","mod-avatar-color-2","mod-avatar-color-3","mod-avatar-color-4","mod-avatar-color-5","mod-avatar-color-6","mod-avatar-color-7","mod-avatar-color-8"],D1=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.plugin=null,r.items=[],r.filepath=null,r.listContainerEl=null,r.listEl=null,r.currentVersionContent="",r.contentContainerEl=null,r.contentDiffEl=null,r.contentOtherEl=null,r.activeItemParentEl=null,r.activeItemEl=null,r.loadMoreButtonEl=null,r.activeItem=null,r.cache={},r.plugin=n,r.filepath=i,r.setTitle(i);var o=r,a=o.contentEl;o.modalEl.addClass("mod-sync-history","mod-sidebar-layout");var s=r.backButtonEl=r.titleEl.createDiv("modal-setting-back-button",(function(e){e.createSpan("modal-setting-back-button-icon",(function(e){mx(e,"lucide-arrow-left")})),e.addEventListener("click",(function(){Ll(r.contentEl,r.listContainerEl,"left"),s.hide()}))}));s.hide();var l=r.listContainerEl=a.createDiv("sync-history-list-container");r.listEl=l.createDiv("modal-sidebar sync-history-list"),r.loadMoreButtonEl=createEl("button",{cls:"sync-history-load-more-button",text:M1.labelLoadMore()},(function(e){e.addEventListener("click",r.fetchMore.bind(r))}));var c=r.contentContainerEl=a.createDiv("sync-history-content-container");Zl.isPhone&&c.detach();var u=r.contentTextEl=c.createDiv("sync-history-content");return u.createDiv("modal-setting-titlebar",(function(e){e.createDiv({cls:"modal-setting-title",text:"md"===Qc(r.filepath)?Xc(r.filepath):r.filepath}),e.createDiv("modal-setting-titlebar-actions",(function(e){e.createSpan({text:M1.labelShowDiff(),cls:"modal-setting-titlebar-toggle"},(function(e){r.diffToggle=new qI(e).setSmall().setValue(!1)})),r.contentCopyButton=new VI(e).setButtonText(Qf.interface.labelCopyShort()).onClick((function(){yc(r.currentVersionContent),new JA(Qf.interface.copied({context:"generic"}))})),r.restoreVersionButton=new VI(e).setButtonText(M1.labelRestoreThisVersion()).onClick((function(){return g(r,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.activeItem===this.items[0][0]?(new JA(M1.msgAlreadyLatestVersion()),[2]):(e=this.filepath!==this.activeItem.path?this.filepath:"",[4,this.plugin.restoreVersion(this.activeItem.uid,e)]);case 1:return t.sent(),new JA(M1.msgRestoredVersion({time:window.moment(this.activeItem.ts).fromNow()})),this.close(),[2]}}))}))}))}))})),r.contentPreviewEl=u.createDiv("sync-history-preview markdown-rendered"),r.contentDiffEl=u.createDiv("sync-history-diff"),r.contentOtherEl=c.createDiv("sync-history-content-other"),r}return f(t,e),t.prototype.onOpen=function(){this.fetchMore()},t.prototype.openHistory=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d=this;return y(this,(function(p){switch(p.label){case 0:return i=(n=this).currentVersionContent,r=n.contentTextEl,o=n.contentContainerEl,a=n.diffToggle,s=n.contentPreviewEl,l=n.contentDiffEl,c=n.contentOtherEl,u=n.contentCopyButton,h=n.restoreVersionButton,i="",s.empty(),l.empty(),c.empty(),r.hide(),c.hide(),u.buttonEl.setAttr("disabled",!0),h.buttonEl.show(),Zl.isPhone&&(Ll(this.contentEl,this.contentContainerEl,"right"),this.backButtonEl.show()),e.relatedpath?(c.setText(M1.labelFileRenamedFrom({filepath:e.relatedpath})),c.show(),h.buttonEl.hide(),[3,4]):[3,1];case 1:return e.deleted?(c.setText(M1.labelFileDeleted()),c.show(),[3,4]):[3,2];case 2:return r.show(),[4,zw(o,(function(){return g(d,void 0,void 0,(function(){var n,r,o,h,d,p,f,m,v,b=this;return y(this,(function(w){switch(w.label){case 0:return n=Qc(Kc(this.filepath)),GT.contains(n)||YT.contains(n)?(r=this,o=df,[4,this.getContentForVersion(e.uid)]):[3,3];case 1:return r.currentVersionContent=i=o.apply(void 0,[w.sent()]),u.buttonEl.removeAttribute("disabled"),h=!1,d=!1,p=function(){return g(b,void 0,void 0,(function(){var e,r,o,c,u;return y(this,(function(p){switch(p.label){case 0:return e=a.getValue(),s.toggle(!e),l.toggle(e),!e||d?[3,4]:(d=!0,t?(c=df,[4,this.getContentForVersion(t.uid)]):[3,2]);case 1:return o=c.apply(void 0,[p.sent()]),[3,3];case 2:o=i,p.label=3;case 3:return r=o,l.empty(),l.appendChild(QH(r,i)),[3,5];case 4:e||h||(h=!0,GT.contains(n)?(u=bS(pS(i)),s.appendChild(qT(u))):s.setText(i)),p.label=5;case 5:return[2]}}))}))},a.onChange(p),[4,p()];case 2:return w.sent(),[3,9];case 3:return UT.contains(n)?[4,this.getContentForVersion(e.uid)]:[3,5];case 4:return m=w.sent(),f=URL.createObjectURL(new Blob([m],{type:"image/"+n})),kc(c,f).then((function(){URL.revokeObjectURL(f)})),[3,8];case 5:return KT.contains(n)?(v=df,[4,this.getContentForVersion(e.uid)]):[3,7];case 6:return m=v.apply(void 0,[w.sent()]),c.empty(),_$(c,m),[3,8];case 7:c.setText(M1.labelPreviewUnsupportedFileType({type:n})),w.label=8;case 8:c.show(),w.label=9;case 9:return[2]}}))}))}))];case 3:p.sent(),p.label=4;case 4:return[2]}}))}))},t.prototype.getContentForVersion=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=this.cache,n=t[e],t.hasOwnProperty(e)?[3,2]:(i=t,r=e,[4,this.plugin.getContentForVersion(e)]);case 1:n=i[r]=o.sent(),o.label=2;case 2:return[2,n]}}))}))},t.prototype.setActiveHistoryItem=function(e,t,n){this.activeItemEl&&this.activeItemEl.removeClass("is-active"),this.activeItemParentEl&&this.activeItemParentEl.removeClass("is-active"),this.activeItemEl=e,e.addClass("is-active"),this.activeItem=t,n&&(this.activeItemParentEl=n,n.addClass("is-active"))},t.prototype.createHistoryItemAvatar=function(e,t){var n=!1,i=t.username||t.email;i||(n=!0,i=dj.name);var r=i.split(" ").map((function(e){return e.charAt(0)})).slice(0,2).join(""),o="";if(n)o="mod-avatar-current-user";else{for(var a=0,s=0;s<i.length;s++)a+=i.charCodeAt(s);o=T1[a%T1.length]}Rx(e.createDiv({cls:"sync-history-list-item-avatar "+o,text:r}),function(e){var t="";e.username?t=e.email?"".concat(e.username," (").concat(e.email,")"):e.username:e.email&&(t=e.email);t.length>0&&(t+="\n");e.device&&(t+=e.device);if(e.relatedpath||e.deleted||0===e.size)return t;return t+=", "+wf(e.size),t}(t),{placement:"bottom",gap:16,delay:kx})},t.prototype.fetchMore=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w=this;return y(this,(function(k){switch(k.label){case 0:t=(e=this).items,n=e.listEl,i=e.loadMoreButtonEl,r=null,o=this.filepath,a=0===t.length,i.detach(),t.length>0&&(s=t.last().last(),r=s.uid,o=s.relatedpath||s.path),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,this.plugin.getHistory(o,r)];case 2:return l=k.sent(),[3,4];case 3:return k.sent(),new JA(M1.labelUnableToRetrieve()),this.listEl.append(i),[2];case 4:for(c=l.items,-1!==(u=c.findIndex((function(e){return e.relatedpath&&!e.deleted})))&&(u<c.length-1&&(c=c.slice(0,u+1)),l.more=!0),h=function(e){for(var t=[],n=[],i=0,r=e;i<r.length;i++){var o=r[i];if((!o.deleted||!o.relatedpath)&&!o.folder)if(0!==n.length){var a=n.first();o.deleted||o.relatedpath||!window.moment(a.ts).isSame(o.ts,"day")?(t.push(n),n=[o]):a.device===o.device&&a.username===o.username&&a.ts-o.ts<S1?n.push(o):(t.push(n),n=[o])}else n.push(o)}n.length>0&&t.push(n);return t}(c),d=function(e){var i=e[0],r=t.push(e)-1,o=n.createDiv("sync-history-list-item");i.username||i.email||o.addClass("mod-current-user");var s=o.createDiv("sync-history-list-item-header"),l=i.ts+864e5<Date.now()?window.moment(i.ts).format("llll"):window.moment(i.ts).fromNow();p.createHistoryItemAvatar(s,i);var c=s.createDiv({cls:"sync-history-list-item-details",text:l}),u=s.createDiv("tree-item-flair-outer"),h=c.createDiv("u-small u-muted");if(i.relatedpath)h.setText(M1.labelFileRenamedFrom({filepath:i.relatedpath}));else if(i.deleted)i.username||i.email?h.setText(M1.labelFileDeleted()):h.setText(M1.labelFileDeletedVia({device:i.device}));else if(0===i.size)h.setText(M1.labelEmptyFile());else{var d=M1.labelRevision({count:e.length}),f=i.username||i.email?"":" "+M1.labelViaDevice({device:i.device});h.setText(d+f)}var m=o.createDiv("version-group-container");m.hide(),m.createSpan("connecting-line");for(var v=function(n){var i=e[n],o=m.createDiv({cls:"version-group-item",text:window.moment(i.ts).format("LT")});o.addEventListener("click",(function(){return g(w,void 0,void 0,(function(){var a;return y(this,(function(l){switch(l.label){case 0:return a=null,a=n===e.length-1?r!==t.length-1?t[r+1].first():null:e[n+1],[4,this.openHistory(i,a)];case 1:return l.sent(),this.activeItem=i,Zl.isMobile||this.setActiveHistoryItem(o,i,s),[2]}}))}))}))},b=0;b<e.length;b++)v(b);var k=u.createSpan({cls:"is-collapsed tree-item-flair"});Zl.isMobile||k.addClass("collapse-icon");var C=function(){var e=!k.hasClass("is-collapsed");k.toggleClass("is-collapsed",e),Ml(m,e,!0)};mx(k,Zl.isMobile?"chevrons-up-down":"right-triangle"),k.addEventListener("click",(function(e){e.stopPropagation(),C()})),s.addEventListener("click",(function(n){return g(w,void 0,void 0,(function(){var r,o;return y(this,(function(a){switch(a.label){case 0:return k.contains(n.targetNode)?[2]:this.activeItem===i?(C(),[2]):(r=t.indexOf(e),o=-1!==r&&r!==t.length-1?t[r+1].first():null,[4,this.openHistory(i,o)]);case 1:return a.sent(),Zl.isMobile||this.setActiveHistoryItem(s,i),this.activeItem=i,[2]}}))}))})),!a||p.activeItemEl||Zl.isMobile||p.setActiveHistoryItem(s,i)},p=this,f=0,m=h;f<m.length;f++)v=m[f],d(v);return a?0!==t.length?[3,5]:(n.createDiv({cls:"list-item mod-empty",text:M1.labelNoHistory()}),[3,7]):[3,7];case 5:return Zl.isMobile?[3,7]:(b=t.length>1?t[1][0]:null,[4,this.openHistory(t[0][0],b)]);case 6:k.sent(),k.label=7;case 7:return l.more&&this.listEl.append(i),[2]}}))}))},t}(ZA);function A1(e,t){e.addEventListener("scroll",(function(){e.scrollTop+e.clientHeight>=e.scrollHeight-e.clientHeight/2&&t()}),{passive:!0})}var L1=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;o.plugin=null,o.history=[],o.offset=0,o.plugin=n,o.history=r.filter((function(e){return!e.folder})),o.setTitle(i),o.modalEl.addClass("mod-lg");var a=o.contentEl,s=a.createDiv({cls:"sync-modal-header"});return s.createEl("p",{cls:"u-faded-text",text:Qf.nouns.fileWithCount({count:o.history.length})}),s.createEl("p",{text:M1.labelClickToSeeHistory()}),o.historyListEl=a.createDiv("sync-file-tree-container"),A1(o.historyListEl,(function(){return o.loadMore()})),o}return f(t,e),t.prototype.onOpen=function(){this.loadMore()},t.prototype.loadMore=function(){var e=this,t=this.history;if(!(this.offset>=t.length))for(var n=Math.min(this.offset+30,t.length),i=function(){var n=t[r.offset];r.offset++;var i=r.historyListEl.createDiv("list-item mod-selectable tappable");i.createDiv("list-item-part mod-extended",(function(e){e.createDiv({text:ru(n.path)});var t=window.moment(n.ts).fromNow();n.device&&(t="[".concat(n.device,"] ")+t),e.createDiv({cls:"u-muted u-small list-item-part",text:t})})),i.addEventListener("click",(function(){e.plugin.showVersionHistory(n.path)}))},r=this;this.offset<n;)i()},t}(ZA),P1=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.plugin=null,r.history=[],r.lastSelectedItem=0,r.offset=0,r.checkboxes=[],r.modalEl.addClass("mod-lg"),r.plugin=n,r.history=i.filter((function(e){return!e.folder})),r.setTitle(M1.labelDeletedFiles()),r.modalEl.addClass("mod-scrollable-content"),r.contentEl.createDiv({cls:"sync-modal-header"}).createEl("p",{cls:"u-faded-text",text:Qf.nouns.fileWithCount({count:r.history.length})}),r.historyListEl=r.contentEl.createDiv("sync-file-tree-container"),A1(r.historyListEl,(function(){return r.loadMore()})),r.restoreButtonEl=r.buttonContainerEl.createEl("button",{cls:"mod-cta",text:M1.buttonRestoreFiles({count:0})}),r.restoreButtonEl.ariaDisabled=String(!0),r.restoreButtonEl.addEventListener("click",(function(){return g(r,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h;return y(this,(function(d){switch(d.label){case 0:e=this.checkboxes.filter((function(e){return e.checkboxEl.checked})).map((function(e){return e.historyItem})),t=new JA(M1.msgRestoring()+" (0/".concat(e.length,")"),0),n=0,i=0,r=0,o=e,d.label=1;case 1:if(!(r<o.length))return[3,11];a=o[r],d.label=2;case 2:return d.trys.push([2,8,,9]),[4,this.plugin.getHistory(a.path,null)];case 3:s=d.sent(),l=0,c=s.items,d.label=4;case 4:return l<c.length?(u=c[l]).deleted?[3,6]:[4,this.plugin.restoreVersion(u.uid)]:[3,7];case 5:return d.sent(),n++,[3,7];case 6:return l++,[3,4];case 7:return i++,[3,9];case 8:return h=d.sent(),console.error(h),[3,9];case 9:t.setMessage(M1.msgRestoring()+" (".concat(i,"/").concat(e.length,")")),d.label=10;case 10:return r++,[3,1];case 11:return setTimeout((function(){return t.hide()}),4e3),new JA(M1.msgRestoringComplete({succeeded:n,failed:e.length-n})),[2]}}))}))})),r.addCancelButton(),r}return f(t,e),t.prototype.onOpen=function(){this.loadMore()},t.prototype.loadMore=function(){var e=this,t=this.history;if(!(this.offset>=t.length))for(var n=Math.min(this.offset+30,t.length),i=function(){var n=t[r.offset];r.offset++;var i=r.historyListEl.createDiv("list-item mod-selectable tappable"),o=i.createEl("input",{type:"checkbox"}),a={checkboxEl:o,historyItem:n};r.checkboxes.push(a),i.createDiv({cls:"list-item-part mod-extended"},(function(e){e.createDiv({text:ru(n.path)});var t=window.moment(n.ts).fromNow();n.device&&(t="[".concat(n.device,"] ")+t),e.createDiv({cls:"u-muted u-small list-item-part",text:t})})),i.addEventListener("click",(function(t){var n=e.checkboxes.indexOf(a),i=t.target===o?o.checked:!o.checked;if(t.shiftKey)for(var r=Math.min(e.lastSelectedItem,n),s=Math.max(e.lastSelectedItem,n),l=r;l<=s;l++)e.checkboxes[l].checkboxEl.checked=i;e.lastSelectedItem=n,t.target!==o&&(o.checked=i),setTimeout((function(){var t=e.checkboxes.filter((function(e){return e.checkboxEl.checked})).length;e.restoreButtonEl.setText(M1.buttonRestoreFiles({count:t})),e.restoreButtonEl.ariaDisabled=String(0===t)}),5)}))},r=this;this.offset<n;)i()},t}(XA),I1=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=n,i.setTitle(M1.labelUpgradeVaultEncryption());var r=i.contentEl;return r.createEl("p",{text:M1.msgMigratePreConfirmationPart1()}),r.createEl("p",{text:M1.msgMigratePreConfirmationPart2()}),r.createEl("p",{text:M1.msgMigratePreConfirmationPart3()}),i.buttonContainerEl.createEl("a",{cls:"mod-secondary",text:Qf.interface.buttonLearnMore(),attr:{href:"https://help.obsidian.md/sync/migrate",target:"_blank",rel:"noopener"}}),i.addButton("mod-cta",Qf.dialogue.buttonContinue(),(function(){new F1(i.app,i.plugin).open()})),i.addCancelButton(),i}return f(t,e),t}(XA),F1=function(e){function t(t,n){var i=e.call(this,t)||this;return i.plugin=null,i.settingTab=null,i.region="",i.useOwnPassword=!0,i.password="",i.plugin=n,i.modalEl.addClass("mod-lg"),i.settingTab=n.settingTab,i.setTitle(M1.labelRemoteVaultConfiguration()),i.loaderEl=oG(i.contentEl),i.loaderEl.hide(),(i.migrateVaultEl=i.contentEl.createDiv()).createDiv("message-container",(function(e){i.errorEl=e.createDiv("message mod-error"),i.errorEl.hide()})),i.confirmationEl=i.contentEl.createDiv(),i}return f(t,e),t.prototype.onOpen=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(d){switch(d.label){case 0:return this.startLoading(),e=this.migrateVaultEl,t=!0,[4,ej(dj.token)];case 1:for(n=d.sent(),i=0,r=n.vaults;i<r.length;i++)(o=r[i]).id===this.plugin.getRemoteVaultId()&&(t=!1,this.useOwnPassword=!o.password);return t?(e.createEl("p",{text:"This is a shared vault and may only be migrated by the owner."}),this.stopLoading(),[2]):(this.addButton("mod-cta",Qf.dialogue.buttonContinue(),this.showConfirmationModal.bind(this)),this.addCancelButton(),[4,this.plugin.size()]);case 2:return(a=d.sent())&&a.vault_size&&(this.vaultSize=a.vault_size),s=this.plugin.getHost().replace(/^wss?:\/\//,""),[4,QW(dj.token,s)];case 3:return l=d.sent(),c=null,new NI(e).setName(M1.optionVaultRegion()).setDesc(M1.optionVaultRegionDesc()).addDropdown((function(e){c=e,e.addOption("",M1.optVaultRegionAutomatic()),l.forEach((function(e){c.addOption(e.value,e.name)})),e.setValue("existing").onChange((function(e){h.region=e}))})),u=null,new NI(e).setName(M1.optionEncryption()).setDesc(createFragment((function(e){e.createDiv({text:M1.optionEncryptionDesc()}),e.createDiv({cls:"mod-warning",text:M1.optionEncryptionWarning()})}))).addDropdown((function(e){return e.addOptions({"end-to-end":M1.optionEncryptionEndToEnd(),standard:M1.optionEncryptionStandard()}).setValue(h.useOwnPassword?"end-to-end":"standard").onChange((function(e){var t="end-to-end"===e;u.settingEl.toggle(t),h.useOwnPassword=t}))})),u=new NI(e).setName(M1.optionEncryptionPassword()).setDesc(createFragment((function(e){e.createDiv({text:M1.optionEncryptionPasswordDesc()}),e.createDiv({cls:"mod-warning",text:M1.optionEncryptionPasswordDescWarning()}),e.createDiv({text:M1.optionEncryptionPasswordDesc_2()})}))).addText((function(e){e.inputEl.type="password",e.setPlaceholder(M1.optionEncryptionPasswordPlaceholder()).onChange((function(e){return h.password=e}))})),u.settingEl.toggle(this.useOwnPassword),this.stopLoading(),[2]}}))}))},t.prototype.showConfirmationModal=function(){var e=this,t=e.useOwnPassword,n=e.password,i=e.errorEl,r=e.confirmationEl;i.hide();var o="";if(!0===t&&""===n&&(o=M1.msgPleaseEnterPassword()),o)return i.setText(o),i.show(),!0;this.setTitle(M1.labelConfirmMigrate()),this.migrateVaultEl.hide();var a=this.vaultSize?M1.msgMigrateConfirmationSize({size:wf(this.vaultSize)}):M1.msgMigrateConfirmation();return r.empty(),r.createEl("p",{text:a}),r.createEl("p",{text:M1.msgProceedPrompt()}),this.buttonContainerEl.empty(),this.addButton("mod-cta",M1.buttonMigrate(),this.onBeginMigration.bind(this)),this.addCancelButton(),r.show(),!0},t.prototype.onBeginMigration=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b=this;return y(this,(function(y){switch(y.label){case 0:return t=(e=this).region,n=e.useOwnPassword,i=e.password,r=e.errorEl,this.startLoading(),a=null,n?(o=vj(),[4,gj(i,o,PW)]):[3,2];case 1:a=y.sent(),y.label=2;case 2:return y.trys.push([2,6,7,8]),s=this.plugin.getRemoteVaultId(),[4,nj(dj.token,s,a,o,t,PW)];case 3:return l=y.sent(),c=l.id,u=l.name,h=l.host,d=l.encryption_version,n||(i=l.password,o=l.salt),p=this.plugin.deviceName,f=this.plugin.allowTypes,m=this.plugin.allowSpecialFiles,v=this.plugin.ignoreFolders,[4,this.plugin.unsetup()];case 4:return y.sent(),[4,this.plugin.setup(c,u,i,o,h,d)];case 5:return y.sent(),this.plugin.setPause(!0),pj.forEach((function(e){return b.plugin.allowTypes.delete(e)})),fj.forEach((function(e){return b.plugin.allowSpecialFiles.delete(e)})),this.plugin.deviceName=p,f.forEach((function(e){return b.plugin.allowTypes.add(e)})),m.forEach((function(e){return b.plugin.allowSpecialFiles.add(e)})),this.plugin.ignoreFolders=v,this.plugin.forceSaveData(),this.plugin.setPause(!1),this.close(),new JA(M1.msgVaultMigrationStarted()),[3,8];case 6:return g=y.sent(),r.setText(g.message),r.show(),this.setTitle(M1.labelMigrateRemoteVault()),this.buttonContainerEl.empty(),this.addButton("mod-cta",Qf.dialogue.buttonContinue(),this.showConfirmationModal.bind(this)),this.addCancelButton(),[2,!0];case 7:return this.stopLoading(),[7];case 8:return[2,!0]}}))}))},t.prototype.startLoading=function(){this.migrateVaultEl.hide(),this.confirmationEl.hide(),this.loaderEl.show()},t.prototype.stopLoading=function(){this.migrateVaultEl.show(),this.loaderEl.hide()},t.prototype.onClose=function(){e.prototype.onClose.call(this),this.settingTab.display()},t}(XA),O1=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=null,i.vaultName="",i.region="",i.useOwnPassword=!0,i.key="",i.createVaultEl=null,i.errorEl=null,i.plugin=n,i.modalEl.addClass("mod-lg"),i.setTitle(M1.labelCreateRemoteVault()),i.contentEl.createDiv("message-container",(function(e){i.errorEl=e.createDiv("message mod-error"),i.errorEl.hide()})),i.contentEl.createEl("p",{text:M1.labelRemoteVaultExplanation()}),new NI(i.contentEl).setName(M1.optionVaultName()).setDesc(M1.optionVaultNameDesc()).addText((function(e){return e.setPlaceholder(M1.optionVaultNamePlaceholder()).onChange((function(e){return i.vaultName=e}))})),new NI(i.contentEl).setName(M1.optionVaultRegion()).setDesc(M1.optionVaultRegionDesc()).addDropdown((function(e){i.regionSettingDropdown=e,e.addOption("","Automatic").setValue("").onChange((function(e){i.region=e}))}));var r=null;return new NI(i.contentEl).setName(M1.optionEncryption()).setDesc(createFragment((function(e){e.createDiv({text:M1.optionEncryptionDesc()}),e.createDiv({cls:"mod-warning",text:M1.optionEncryptionWarning()})}))).addDropdown((function(e){return e.addOptions({"end-to-end":M1.optionEncryptionEndToEnd(),standard:M1.optionEncryptionStandard()}).setValue("end-to-end").onChange((function(e){var t="end-to-end"===e;r.settingEl.toggle(t),i.useOwnPassword=t}))})),r=new NI(i.contentEl).setName(M1.optionEncryptionPassword()).setDesc(createFragment((function(e){e.createDiv({text:M1.optionEncryptionPasswordDesc()}),e.createDiv({cls:"mod-warning",text:M1.optionEncryptionPasswordDescWarning()}),e.createDiv({text:M1.optionEncryptionPasswordDesc_2()})}))).addText((function(e){e.inputEl.type="password",e.setPlaceholder(M1.optionEncryptionPasswordPlaceholder()).onChange((function(e){return i.key=e}))})),(i.ctaButtonEl=i.buttonContainerEl.createEl("button",{cls:"mod-cta",text:Qf.interface.startScreen.buttonCreateVault()})).addEventListener("click",i.onCreateVault.bind(i)),i.addCancelButton(),i}return f(t,e),t.prototype.onCreateVault=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return t=(e=this).vaultName,n=e.region,i=e.useOwnPassword,r=e.key,(o=e.errorEl).hide(),a="",!0===i&&""===r&&(a=M1.msgPleaseEnterPassword()),""===t&&(a=M1.msgVaultNameCannotBeEmpty()),a?(o.setText(a),o.show(),[2,!0]):(this.ctaButtonEl.addClass("mod-loading"),l=null,i?(s=vj(),[4,gj(r,s,PW)]):[3,2]);case 1:l=u.sent(),u.label=2;case 2:return u.trys.push([2,4,5,6]),[4,tj(dj.token,t,l,s,n,PW)];case 3:return u.sent(),[3,6];case 4:return c=u.sent(),o.setText(c.message),o.show(),[2,!0];case 5:return this.ctaButtonEl.removeClass("mod-loading"),[7];case 6:return this.close(),new JA(M1.msgSuccessfullyCreatedVault({name:t})),this.plugin.openChooseRemoteVaultModal(),[2,!0]}}))}))},t.prototype.onOpen=function(){return g(this,void 0,void 0,(function(){var e=this;return y(this,(function(t){switch(t.label){case 0:return this.vaultName="",this.region="",this.useOwnPassword=!0,this.key="",[4,QW(dj.token)];case 1:return t.sent().forEach((function(t){e.regionSettingDropdown.addOption(t.value,t.name)})),[2]}}))}))},t}(XA),B1=function(e){function t(t,n){var i=e.call(this,t)||this;return i.plugin=null,i.errorEl=null,i.vaultsEl=null,i.loaderEl=null,i.plugin=n,i.setTitle(M1.labelRemoteVaults()),i.modalEl.addClass("mod-lg"),i.errorEl=i.contentEl.createDiv("error-container"),i.errorEl.hide(),i.loaderEl=oG(i.contentEl),i.loaderEl.hide(),i.vaultsEl=i.contentEl.createDiv(),i}return f(t,e),t.prototype.loadRemoteVaults=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b=this;return y(this,(function(w){switch(w.label){case 0:t=(e=this).errorEl,n=e.vaultsEl,i=this.plugin.getRemoteVaultId(),w.label=1;case 1:return w.trys.push([1,3,,4]),[4,ej(dj.token)];case 2:if("error"in(r=w.sent()))throw new Error("Failed to fetch remote vaults!");return[3,4];case 3:return w.sent(),this.stopLoading(),t.empty(),t.createDiv({cls:"error-text",text:M1.msgErrorFailedToFetch()}),(o=t.createEl("button",{text:M1.buttonRetry()})).addEventListener("click",(function(){qw(o,(function(){return b.loadRemoteVaults()}))})),t.show(),[2];case 4:if(a=r.limit,s=r.vaults,l=r.shared,t.hide(),n.empty(),0===a)n.createDiv("vault-empty-state",(function(e){e.createEl("p",{text:M1.labelNoSubscription()}),e.createEl("p",{},(function(e){e.createSpan({text:M1.labelPleaseVisit()+" "}),e.createEl("a",{cls:"mod-cta",text:"obsidian.md/sync",href:"https://obsidian.md/sync",attr:{target:"_blank"}}),e.createSpan({text:"."})}))}));else if(0===s.length)n.createDiv("vault-empty-state",(function(e){e.createEl("p",{text:M1.labelNotRemoteVaults()})}));else for(d=n.createDiv("list-container vault-list"),c=function(e){d.createDiv("list-item vault-list-item",(function(t){var n=i===e.id;n&&e.name!==b.plugin.getRemoteVaultName()&&b.plugin.setVaultName(e.name),t.createDiv("list-item-part mod-extended",(function(t){t.createDiv("vault-list-item-title",(function(t){t.toggleClass("is-connected",n),t.createDiv("vault-list-item-icon list-item-part",(function(e){mx(e,n?"open-vault":"vault")})),t.createSpan({text:e.name})})),t.createDiv("list-item-desc vault-list-item-desc",(function(t){e.hasOwnProperty("region")&&""!==e.region&&t.createDiv({cls:"list-item-part",text:e.region}),t.createDiv({cls:"list-item-part",text:wf(e.size)}),t.createDiv({cls:"list-item-part mod-extended",text:M1.labelVaultCreatedTime({time:window.moment(e.created).fromNow()})})}))})),t.createDiv("list-item-actions",(function(t){n||t.createDiv("list-item-part clickable-icon",(function(t){mx(t,"lucide-trash-2"),Rx(t,M1.tooltipDeleteRemoteVault()),t.addEventListener("click",(function(){var t=createFragment();t.createEl("p",{text:M1.labelConfirmDeleteRemoteVaultQuestion({name:e.name})}),t.createEl("p",{text:M1.labelConfirmDeleteRemoteVaultResult()}),t.createEl("p",{cls:"mod-warning",text:M1.labelConfirmDeleteRemoteVaultWarning()});var n=new XA(b.app);n.setTitle(M1.labelConfirmDeleteRemoteVault()).setContent(t).addButton("mod-warning","Delete",(function(){return g(b,void 0,void 0,(function(){var t;return y(this,(function(i){switch(i.label){case 0:this.startLoading(),n.close(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(r=dj.token,o=e.id,_W("/vault/delete",{token:r,vault_uid:o}))];case 2:return i.sent(),new JA(M1.msgRemoteVaultDeleted({name:e.name})),this.open(),[3,5];case 3:return t=i.sent(),new JA(t.message),[3,5];case 4:return this.onOpen(),[7];case 5:return[2]}var r,o}))}))})).addCancelButton().open()}))})),t.createDiv("list-item-part clickable-icon",(function(t){mx(t,"lucide-edit-3"),Rx(t,M1.tooltipRenameRemoteVault());var i=function(t){return g(b,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:if(""===t||t===e.name)return[2];this.startLoading(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,ij(dj.token,e.id,t)];case 2:return r.sent(),[3,5];case 3:return i=r.sent(),new JA(i.message),[2];case 4:return this.stopLoading(),[7];case 5:return n?[4,this.plugin.setRemoteVaultName(t)]:[3,7];case 6:r.sent(),r.label=7;case 7:return this.onOpen(),[2]}}))}))};t.addEventListener("click",(function(){new z1(b.app,e.name,i).open()}))})),t.createDiv("list-item-part clickable-icon",(function(t){mx(t,"lucide-users"),Rx(t,M1.tooltipManageSharing({name:e.name})),t.addEventListener("click",(function(){new q1(b.app,e.name,e.id).open()}))})),i||t.createEl("button",{cls:"list-item-part vault-list-item-button",text:M1.buttonConnectToRemoteVault()},(function(t){t.addEventListener("click",(function(){return g(b,void 0,void 0,(function(){var n,i=this;return y(this,(function(r){switch(r.label){case 0:return[4,qw(t,(function(){return cj(dj.token)}))];case 1:return"error"in(n=r.sent())?[2]:n.sync?(new V1(this.app,this.plugin).connect(e,(function(){return i.close()})).open(),[2]):(this.errorEl.setText(M1.labelRequireSubscriptionToConnect()),this.errorEl.show(),[2])}}))}))}))}))}))}))},u=0,h=s;u<h.length;u++)v=h[u],c(v);if(s.length<a?n.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta js-create-vault",text:M1.buttonCreateNewRemoteVault()},(function(e){e.addEventListener("click",(function(){b.close(),new O1(b.app,b.plugin).open()}))}))})):a>0&&n.createEl("p",{cls:"u-small u-muted",text:M1.msgRemoteVaultLimitHit()}),l.length>0)for(new NI(n).setName(M1.labelVaultsSharedWithYou()).setHeading(),d=n.createDiv("list-container vault-list"),p=function(e){d.createDiv("list-item vault-list-item",(function(t){var n=i===e.id;n&&e.name!==b.plugin.getRemoteVaultName()&&b.plugin.setVaultName(e.name),t.createDiv("list-item-part mod-extended",(function(t){t.createDiv("vault-list-item-title",(function(t){t.toggleClass("is-connected",n),t.createDiv("vault-list-item-icon list-item-part",(function(e){mx(e,n?"open-vault":"vault")})),t.createSpan({text:e.name})})),t.createDiv("list-item-desc vault-list-item-desc",(function(t){e.hasOwnProperty("region")&&""!==e.region&&t.createDiv({cls:"list-item-part",text:e.region}),t.createDiv({cls:"list-item-part",text:wf(e.size)}),t.createDiv({cls:"list-item-part mod-extended",text:M1.labelVaultCreatedTime({time:window.moment(e.created).fromNow()})})}))})),t.createDiv("list-item-actions",(function(t){n?t.createEl("button",{cls:"list-item-part vault-list-item-button",text:M1.buttonDisconnectFromRemoteVault()}).addEventListener("click",(function(){return g(b,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.startLoading(),[4,this.plugin.unsetup()];case 1:return e.sent(),this.open(),[2]}}))}))})):i||t.createEl("button",{cls:"list-item-part vault-list-item-button",text:M1.buttonConnectToRemoteVault()},(function(t){t.addEventListener("click",(function(){return g(b,void 0,void 0,(function(){var n,i=this;return y(this,(function(r){switch(r.label){case 0:return[4,qw(t,(function(){return cj(dj.token)}))];case 1:return"error"in(n=r.sent())?[2]:n.sync?(new V1(this.app,this.plugin).connect(e,(function(){return i.close()})).open(),[2]):(this.errorEl.setText(M1.labelRequireSubscriptionToConnect()),this.errorEl.show(),[2])}}))}))}))})),t.createDiv("clickable-icon",(function(t){mx(t,"lucide-x"),Rx(t,M1.tooltipLeaveVaultSharing()),t.addEventListener("click",(function(){var t=createFragment();t.createEl("p",{cls:"setting-message mod-warning",text:M1.labelLeaveVaultConfirmationDetails()}),t.createEl("p",{text:M1.labelLeaveVaultConfirmationDetails()}),new XA(b.app).setTitle(M1.labelLeaveVaultConfirmation({vault:e.name})).setContent(t).addButton("mod-warning",M1.buttonLeave(),(function(){b.deleteVaultShare(e.id,e.share_uid)})).addCancelButton().open()}))}))}))}))},f=0,m=l;f<m.length;f++)v=m[f],p(v);return this.stopLoading(),[2]}}))}))},t.prototype.onOpen=function(){this.startLoading(),this.loadRemoteVaults()},t.prototype.onClose=function(){e.prototype.onClose.call(this),this.plugin.settingTab.display()},t.prototype.startLoading=function(){this.vaultsEl.hide(),this.loaderEl.show()},t.prototype.stopLoading=function(){this.vaultsEl.show(),this.loaderEl.hide()},t.prototype.deleteVaultShare=function(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,aG(this.contentEl,(function(){return rj(dj.token,e,t)}))];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),new JA(n.message),[2];case 3:return this.plugin.getRemoteVaultId()!==e?[3,5]:[4,this.plugin.unsetup()];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t}(ZA),N1=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=null,i.syncLog=[],i.syncLogContainerEl=null,i.filterEventType="all",i.searchQuery=null,i.plugin=n,i.updateSyncLog=i.updateSyncLog.bind(i);var r=i.contentEl;return i.modalEl.addClass("mod-sync-log","mod-lg"),i.setTitle(M1.labelSyncLog()),new NI(r).addDropdown((function(e){return e.addOptions({all:M1.optionEventTypeAll(),errors:M1.optionEventTypeErrors(),skipped:M1.optionEventTypeSkipped(),merge:M1.optionEventTypeMergeConflicts()}).onChange((function(e){i.filterEventType=e,i.updateSyncLog()}))})).addSearch((function(e){return e.setPlaceholder(Qf.interface.promptFilter()).onChange((function(e){var t=new UP(i.app,e,!1);i.searchQuery=t.matcher?t:null,i.updateSyncLog()}))})),i.syncLogContainerEl=r.createDiv("sync-log-container"),r.createDiv("modal-button-container",(function(e){e.createEl("button",{text:M1.buttonCopySyncLog(),cls:"mod-cta"}).addEventListener("click",i.onCopyResults.bind(i)),e.createEl("button",{text:Qf.dialogue.buttonDone()}).addEventListener("click",(function(){return i.close()}))})),i}return f(t,e),t.prototype.onOpen=function(){e.prototype.onOpen.call(this),this.updateSyncLog(),this.plugin.on("new-log",this.updateSyncLog)},t.prototype.onClose=function(){this.plugin.off("new-log",this.updateSyncLog),e.prototype.onClose.call(this)},t.prototype.updateSyncLog=function(){for(var e,t=this.syncLogContainerEl,n=this.syncLog=this.plugin.syncLog,i=0,r=n;i<r.length;i++){if(!(u=r[i]).el){var o=window.moment(u.ts).format("YYYY-MM-DD HH:mm"),a=u.textContent="".concat(o," - ").concat(u.info," ").concat(null!==(e=u.file)&&void 0!==e?e:"");u.el=createDiv({cls:"list-item",text:a}),u.error&&u.el.addClass("mod-error")}}for(var s=[],l=0,c=n;l<c.length;l++){var u=c[l];if(("errors"!==this.filterEventType||u.error)&&!("merge"===this.filterEventType&&"merge"!==u.type||"skipped"===this.filterEventType&&"skip"!==u.type)){var h=u.textContent;a=void 0===h?"":h;if(this.searchQuery){var d=this.searchQuery.matchContent(a);if(!d)continue;u.el.empty(),jL(u.el,a,d.content)}else u.el.setText(a);s.push(u.el)}}t.setChildrenInPlace(s),t.scrollTop=t.scrollHeight},t.prototype.onCopyResults=function(){for(var e="",t=0,n=this.syncLog;t<n.length;t++){var i=n[t];e+="".concat(window.moment(i.ts).format("YYYY-MM-DD HH:mm")),e+=" - ".concat(i.info),i.file&&(e+=" ".concat(i.file)),e+="\n"}yc(e),new JA(M1.msgSuccessfullyCopiedSyncLog())},t}(ZA),R1=function(e){function t(t,n,i){var r=e.call(this,t,M1.labelAddExcludedFolder(),M1.labelAddExcludedFolderDesc(),"plugins.sync.label-number-of-folders-excluded")||this;return r.sync=null,r.settingTab=null,r.sync=n,r.settingTab=i,r.modalEl.addClass("mod-lg"),r.setTitle(M1.labelManageExcludedFolders()),r}return f(t,e),t.prototype.onClose=function(){this.settingTab.display()},t.prototype.getPaths=function(){return this.sync.ignoreFolders},t.prototype.setPaths=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return this.sync.setIgnoreFolders(e),[2]}))}))},t}(fJ),H1=function(e){function t(t,n){var i=e.call(this,t)||this;return i.sync=n,i.modalEl.addClass("mod-lg"),i.titleEl.setText(M1.msgLargestFiles()),i.contentEl.createDiv({text:M1.msgLargestFilesDesc()}),i}return f(t,e),t.prototype.onOpen=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a;return y(this,(function(s){for(n in e=this.sync.serverFiles,t=[],e)e.hasOwnProperty(n)&&(a=e[n]).size>0&&t.push(a);for(t=t.sort((function(e,t){return t.size-e.size})).slice(0,20),i=this.contentEl,r=0,o=t;r<o.length;r++)a=o[r],i.createDiv({cls:"u-small u-muted",text:a.path+" ("+wf(a.size)+")"});return[2]}))}))},t}(ZA),V1=function(e){function t(t,n){var i=e.call(this,t)||this;return i.sync=n,i.settingTab=n.settingTab,i.modalEl.addClass("mod-lg"),i.msgContainerEl=createDiv("message-container"),i.errorEl=i.msgContainerEl.createDiv("message mod-error"),i.setTitle(M1.labelConnectingToVault()),i.loaderEl=oG(i.contentEl),i}return f(t,e),t.prototype.showError=function(e){e?(this.contentEl.prepend(this.msgContainerEl),this.errorEl.setText(e)):this.msgContainerEl.detach()},t.prototype.showLoading=function(){this.contentEl.empty(),this.buttonContainerEl.empty(),this.setTitle(M1.labelConnectingToVault()),this.contentEl.appendChild(this.loaderEl)},t.prototype.showSetupRetry=function(e){this.contentEl.empty(),this.buttonContainerEl.empty(),this.setTitle(M1.labelConnectionFailed()),this.contentEl.createEl("p",{text:M1.labelConnectionFailedDesc()}),this.addButton("mod-cta",M1.buttonRetry(),e),this.addCancelButton()},t.prototype.connect=function(e,t){var n=this,i=function(){return g(n,void 0,void 0,(function(){var n,r;return y(this,(function(o){switch(o.label){case 0:if(n=e.password,r=!1,!e.password)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,yj(e.id,n,e.salt,e.host,e.encryption_version)];case 2:return o.sent(),r=!0,[3,4];case 3:return o.sent(),[3,4];case 4:return r?[3,6]:[4,this.showPasswordPrompt(e)];case 5:o.sent(),this.showLoading(),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,this.sync.setup(e.id,e.name,e.password,e.salt,e.host,e.encryption_version)];case 7:return o.sent(),this.sync.setPause(!0),null==t||t(),this.showConfiguration(e.name),[3,9];case 8:return o.sent(),this.showSetupRetry(i),[3,9];case 9:return[2,!0]}}))}))};return this.app.vault.getFiles().length>0?this.showConfirmVault(e.name,i):i(),this},t.prototype.showPasswordPrompt=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r=this;return y(this,(function(o){return this.contentEl.empty(),this.buttonContainerEl.empty(),this.setTitle(M1.labelUnlockEncryptedVault()),this.contentEl.createEl("p",{text:M1.labelEncryptionPasswordExplanation({name:e.name})}),t="",new NI(this.contentEl).setName(M1.optionEncryptionPassword()).addText((function(e){e.inputEl.type="password",e.onChange((function(e){t=e,r.showError("")})).setPlaceholder(M1.optionEncryptionPasswordPlaceholder())})),n=uL(),(i=this.buttonContainerEl.createEl("button",{cls:"mod-cta",text:M1.buttonUnlockVault()})).addEventListener("click",(function(){return g(r,void 0,void 0,(function(){var r;return y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,qw(i,(function(){return yj(e.id,t,e.salt,e.host,e.encryption_version)}))];case 1:return o.sent(),e.password=t,n.resolve(),[3,3];case 2:return r=o.sent(),console.error(r),r instanceof XMLHttpRequest?this.showError(Qf.plugins.publish.msgNetworkError()):this.showError(r.message),[3,3];case 3:return[2]}}))}))})),this.addCancelButton((function(){return n.reject()})),[2,n.promise]}))}))},t.prototype.showConfiguration=function(e){var t=this;this.setTitle(M1.labelSetupConnection()),this.contentEl.empty();var n=this.contentEl.createDiv("modal-confirmation-state");mx(n.createDiv("modal-status-icon mod-success"),"circle-check"),n.createEl("p",{text:M1.labelNowConnectedToVault({name:e})}),this.buttonContainerEl.empty(),this.addButton("",M1.labelManageExcludedFolders(),(function(e){return t.settingTab.manageExclusions(),!0})),this.addButton("mod-cta",M1.buttonStartSyncing(),(function(e){t.sync.setPause(!1),t.settingTab.display()}))},t.prototype.showConfirmVault=function(e,t){this.setTitle(M1.labelConfirmMergeVault()),this.contentEl.empty(),this.contentEl.createEl("p",{text:M1.msgVaultHasNotes()}),this.contentEl.createEl("p",{text:M1.msgVaultMergeWarning({name:e})}),this.buttonContainerEl.empty(),this.addButton("mod-cta",Qf.dialogue.buttonContinue(),t),this.addCancelButton()},t}(XA),z1=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.cb=i,r.setTitle(M1.labelRenameRemoteVault({name:n})),r.addButton("mod-cta",Qf.dialogue.buttonSave(),r.submit.bind(r)),r.addCancelButton();var o=r.contentEl;return o.empty(),new NI(o).setName(M1.optionVaultName()).setDesc(M1.labelRenameRemoteVaultDesc()).addText((function(e){r.textEl=e,e.setPlaceholder(n)})),r}return f(t,e),t.prototype.submit=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){return this.cb(this.textEl.getValue()),[2]}))}))},t}(XA),q1=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.shares=[],r.shareItemEls={},r.vaultId=i;var o=r.contentEl;return o.addClass("sync-vault-share-container"),r.setTitle(E1.labelManageSharing({name:n})),o.createEl("p",{cls:"u-muted",text:M1.labelSharingWithUsers()}),r.sharesContainerEl=o.createDiv({cls:"sync-vault-shares-list-item-container"}),new NI(o).setName(E1.optionInviteUser()).addText((function(e){return e.setPlaceholder(E1.placeholderInviteUser()).then((function(e){r.emailTextComponent=e,e.inputEl.addEventListener("keydown",(function(t){t.isComposing||"Enter"===t.key&&r.inviteToVault(e.getValue())}))}))})).addButton((function(e){return r.addButtonComponent=e.setButtonText(Qf.interface.buttonAdd()).setCta().onClick((function(){r.inviteToVault(r.emailTextComponent.getValue())}))})),r.addButton("",Qf.dialogue.buttonDone(),(function(){return r.close()})),r.loadShareItems(),r}return f(t,e),t.prototype.loadShareItems=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p=this;return y(this,(function(f){switch(f.label){case 0:t=(e=this).contentEl,n=e.sharesContainerEl,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,aG(this.contentEl,(function(){return e=dj.token,t=p.vaultId,_W("/vault/share/list",{token:e,vault_uid:t});var e,t}))];case 2:return i=f.sent(),this.shares=i.shares,[3,4];case 3:return r=f.sent(),t.empty(),t.createEl("p",{cls:"mod-warning",text:r.message}),[2];case 4:if(this.shares.length>0){for(o={},a=function(e){o[e.uid]=null!==(d=s.shareItemEls[e.uid])&&void 0!==d?d:n.createDiv("list-item",(function(t){e.name?(t.createDiv({cls:"list-item-part",text:e.name}),t.createDiv({cls:"list-item-part mod-extended",text:"<".concat(e.email,">")})):t.createDiv({cls:"list-item-part mod-extended",text:e.email}),e.accepted||t.createDiv({cls:"list-item-part"},(function(e){e.createSpan({cls:"u-muted",text:E1.labelInvitePending()})})),t.createDiv("list-item-part clickable-icon",(function(n){mx(n,"lucide-x"),Rx(n,E1.tooltipRemoveUser()),n.addEventListener("click",(function(){return g(p,void 0,void 0,(function(){var n,i=this;return y(this,(function(r){switch(r.label){case 0:t.hide(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,zw(this.contentEl,(function(){return rj(dj.token,i.vaultId,e.uid)}))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),new JA(n.message),[3,4];case 4:return[4,this.loadShareItems()];case 5:return r.sent(),[2]}}))}))}))}))}))},s=this,l=0,c=this.shares;l<c.length;l++)u=c[l],a(u);n.setChildrenInPlace(Object.values(o)),this.shareItemEls=o}else this.sharesContainerEl.setChildrenInPlace([createEl("p",{cls:"u-muted",text:M1.labelNotSharing()})]);return h=this.emailTextComponent.inputEl,this.addButtonComponent.buttonEl.ariaDisabled=void 0,h.ariaDisabled=void 0,h.value="",h.focus(),[2]}}))}))},t.prototype.inviteToVault=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r=this;return y(this,(function(o){switch(o.label){case 0:if(""===(e=e.trim())||!e.includes("@"))return new JA(E1.errorEmailMustBeValid()),[2];t=this.emailTextComponent.inputEl,n=this.addButtonComponent.buttonEl,o.label=1;case 1:return o.trys.push([1,3,4,5]),t.ariaDisabled=String(!0),n.ariaDisabled=String(!0),[4,zw(this.contentEl,(function(){return function(e,t,n){return _W("/vault/share/invite",{token:e,vault_uid:t,email:n})}(dj.token,r.vaultId,e)}))];case 2:return o.sent(),[3,5];case 3:return i=o.sent(),new JA(i.message),[2];case 4:return t.ariaDisabled=void 0,n.ariaDisabled=void 0,[7];case 5:return[4,this.loadShareItems()];case 6:return o.sent(),[2]}}))}))},t}(XA);var U1=Qf.plugins.sync,_1=function(e){function t(t,n){var i=e.call(this,t)||this;i.hideMyChanges=!1,i.activeDom=null,i.userMapLoaded=!1,i.userMap={},i.fileItems={},i.sync=n,i.files=UO();var r=i,o=r.contentEl,a=r.containerEl;i.uninitializedEl=o.createDiv({cls:"pane-empty sync-uninitialized",text:U1.labelSyncDisconnected()}),i.uninitializedEl.hide();var s=i.headerDom=new XP(i.app,i.containerEl),l=s.addNavButton("users",U1.buttonHideMyChanges(),(function(){i.hideMyChanges=!i.hideMyChanges,l.toggleClass("is-active",i.hideMyChanges),i.updateRecentChanges()}));i.loadingEl=a.createDiv({prepend:!0,cls:"is-loading"});var c=i.contentEl.createDiv("recent-changes-container");s.navHeaderEl.hide(),c.hide(),i.scope=new Tk(i.app.scope);var u=i.tree=new fI(i,{app:i.app,containerEl:c,id:$1,scope:i.scope,getNodeId:function(e){return e instanceof j1?e.id:""}}),h=i.groups={today:new j1(u,"today",U1.labelToday()),yesterday:new j1(u,"yesterday",U1.labelYesterday()),week:new j1(u,"week",U1.labelThisWeek()),older:new j1(u,"older",U1.labelOlder())};return u.root.vChildren.setChildren([h.today,h.yesterday,h.week,h.older]),h.older.setCollapsed(!0,!1),i.tree.loadFolds(),i}return f(t,e),t.prototype.onload=function(){this.registerEvent(this.app.vault.on("delete",this.onDelete,this)),this.registerEvent(this.app.vault.on("rename",this.onRename,this)),this.registerEvent(this.app.workspace.on("file-open",this.onFileOpen,this));var e=mc(this.updateRecentChanges.bind(this),1e3);this.registerEvent(this.sync.on("status-change",e));var t=window.setInterval(this.handleRefreshInterval.bind(this),3e5);this.registerInterval(t)},t.prototype.handleRefreshInterval=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return window.moment().isSame(this.previousRefreshDate,"day")?[3,2]:[4,this.updateRecentChanges()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.getViewType=function(){return $1},t.prototype.getDisplayText=function(){return U1.labelSyncChanges()},t.prototype.getIcon=function(){return"refresh-ccw"},t.prototype.onResize=function(){this.tree.infinityScroll.onResize()},t.prototype.onDelete=function(e){this.removeFile(e.path)},t.prototype.onRename=function(e,t){this.removeFile(t)},t.prototype.onFileOpen=function(e){var t;if(e&&this.fileItems.hasOwnProperty(e.path)){var n=e?this.fileItems[e.path]:null;n!==this.activeDom&&(n!==this.tree.focusedItem&&this.tree.clearSelectedDoms(),null===(t=this.activeDom)||void 0===t||t.selfEl.removeClass("is-active"),null==n||n.selfEl.addClass("is-active"),this.activeDom=n)}},t.prototype.removeFile=function(e){if(this.fileItems.hasOwnProperty(e)){var t=this.fileItems[e];this.files.delete(t.el),delete this.fileItems[e],this.activeDom===t&&(this.activeDom=null),this.tree.selectedDoms.delete(t),this.tree.focusedItem===t&&this.tree.setFocusedItem(null)}},t.prototype.updateRecentChanges=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w;return y(this,(function(y){switch(y.label){case 0:return this.sync.dataLoaded?[4,this.loadUsernameMap()]:[2];case 1:for(y.sent(),e=Object.keys(this.userMap).length>1,this.headerDom.navHeaderEl.toggle(e),e||(this.hideMyChanges=!1),this.loadingEl.hide(),t=this.sync.getStatus(),n="uninitialized"!==t&&"disconnected"!==t,this.tree.containerEl.toggle(n),this.uninitializedEl.toggle(!n),i=this.getRecentSyncFiles(),r=this.groups,o=r.today,a=r.yesterday,s=r.week,l=r.older,o.clear(),c=0,u=i.today;c<u.length;c++)v=u[c],this.addItemToGroup(v,o);for(o.setFlair(i.today.length),a.clear(),h=0,d=i.yesterday;h<d.length;h++)v=d[h],this.addItemToGroup(v,a);for(a.setFlair(i.yesterday.length),s.clear(),p=0,f=i.week;p<f.length;p++)v=f[p],this.addItemToGroup(v,s);for(s.setFlair(i.week.length),l.clear(),m=0;m<i.older.length;m++)v=i.older[m],m<100?this.addItemToGroup(v,l):this.removeFile(v.path);return i.older.length>100&&(g=i.older.length-100,b=new G1(this,l,g),l.addChild(b)),l.setFlair(i.older.length),this.activeDom||(w=this.app.workspace.getActiveFile())&&this.onFileOpen(w),this.tree.infinityScroll.queueCompute(),this.previousRefreshDate=window.moment(),[2]}}))}))},t.prototype.addItemToGroup=function(e,t){var n=this.fileItems[e.path];n?n.sFile=e:this.fileItems[e.path]=n=new K1(this,e),this.files.set(n.el,e),t.addChild(n)},t.prototype.getRecentSyncFiles=function(){for(var e=this.sync,t=this.hideMyChanges,n={today:[],yesterday:[],week:[],older:[]},i=864e5,r=window.moment().startOf("day").valueOf(),o=r-i,a=r-5184e5,s=0,l=Object.values(e.serverFiles);s<l.length;s++){var c=l[s];c.folder||c.deleted||c.path.startsWith(gw)||(!t||c.user&&c.user!==e.userId)&&(c.mtime>r?n.today.push(c):c.mtime>o?n.yesterday.push(c):c.mtime>a?n.week.push(c):n.older.push(c))}return n.today.sort((function(e,t){return t.mtime-e.mtime})),n.yesterday.sort((function(e,t){return t.mtime-e.mtime})),n.week.sort((function(e,t){return t.mtime-e.mtime})),n.older.sort((function(e,t){return t.mtime-e.mtime})),n},t.prototype.loadUsernameMap=function(){return g(this,void 0,Promise,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return this.userMapLoaded?[2]:"synced"!==(e=this.sync.getStatus())&&"syncing"!==e?[3,2]:(t=this,[4,this.sync.getUsernames()]);case 1:t.userMap=n.sent(),this.userMapLoaded=!0,n.label=2;case 2:return[2]}}))}))},t}(GP),W1=function(e){function t(){var t=e.call(this)||this;return t.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},delete t.coverEl,t}return f(t,e),t}($P),j1=function(e){function t(t,n,i){var r=e.call(this)||this;return r.vChildren=new eI(r),r.pusherEl=uI(),r.tree=t,r.id=n,r.setClickable(!0),r.setCollapsible(!0),r.el.addClass("nav-folder"),r.selfEl.addClass("nav-folder-title"),r.innerEl.addClass("nav-folder-title-content"),r.childrenEl.addClass("nav-folder-children"),r.innerEl.setText(i),r.flairEl=r.selfEl.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.collapseEl.empty(),r}return f(t,e),t.prototype.clear=function(){this.vChildren.clear(),this.setFlair(0)},t.prototype.addChild=function(e){this.vChildren.addChild(e)},t.prototype.onSelfClick=function(){this.toggleCollapsed(!0)},t.prototype.setFlair=function(e){this.flairEl.setText(Qf.nouns.count({count:e}))},t.prototype.setCollapsed=function(t,n){return g(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,e.prototype.setCollapsed.call(this,t,n)];case 1:return i.sent(),this.tree.infinityScroll.invalidate(this),this.tree.requestSaveFolds(),[2]}}))}))},t}(QP(W1)),G1=function(e){function t(t,n,i){var r=e.call(this)||this;return r.parent=n,r.count=i,r.setClickable(!1),r.el.addClass("nav-file"),r.selfEl.addClass("more-button"),r.innerEl.addClass("nav-file-title-content"),r.innerEl.setText(U1.labelMore({count:i})),r}return f(t,e),t}(W1),K1=function(e){function t(t,n){var i=e.call(this)||this;i.view=t,i.sFile=n,i.setClickable(!0),i.el.addClass("nav-file"),i.selfEl.addClass("nav-file-title"),i.innerEl.addClass("nav-file-title-content");var r=Qc(n.path);return GT.contains(r)||i.selfEl.createDiv({cls:"nav-file-tag",text:r}),i.innerEl.setText(Xc(n.path)),i.selfEl.setAttr("data-path",i.sFile.path),i.selfEl.addEventListener("mouseover",i.onFileMouseover.bind(i)),i.selfEl.addEventListener("mouseout",i.onFileMouseout.bind(i)),i.selfEl.addEventListener("contextmenu",i.openFileContextMenu.bind(i)),i}return f(t,e),t.prototype.onSelfClick=function(e){this.view.app.workspace.openLinkText(this.sFile.path,"",Ak.isModEvent(e))},t.prototype.openFileContextMenu=function(e){var t=this;e.preventDefault();var n=this.view.app.metadataCache.getFirstLinkpathDest(this.sFile.path,"");if(n){var i=(new PA).addSections(["title","open","action","view","info","","danger"]);i.addItem((function(e){return e.setSection("view").setTitle(U1.menuOptViewVersionHistory()).setIcon("lucide-history").onClick((function(){return t.view.sync.showVersionHistory(t.sFile.path)}))})),this.view.app.workspace.trigger("file-menu",i,n,"sync-sidebar"),i.showAtMouseEvent(e)}},t.prototype.onFileMouseover=function(e){if(xc(e,this.selfEl)&&!Bc(e)){var t=window.moment(this.sFile.mtime).format("llll");this.sFile.user&&this.view.userMap.hasOwnProperty(this.sFile.user)&&(t+="\n"+this.view.userMap[this.sFile.user]),Ox(this.selfEl,t,{placement:this.view.getSideTooltipPlacement(),gap:24,horizontalParent:this.view.containerEl,delay:kx})}},t.prototype.onFileMouseout=function(e){xc(e,this.selfEl)&&Bx()},t}(W1),Y1=function(){function e(e,t,n,i){this.min=e||0,this.max=t||Number.MAX_VALUE,this.base=n||1e3,this.jitter=i||!0,this.count=0,this.nextTs=Date.now()}return e.prototype.success=function(){this.count=0,this.nextTs=Date.now()+this.getTimeout()},e.prototype.fail=function(){this.count++,this.nextTs=Date.now()+this.getTimeout()},e.prototype.getTimeout=function(){if(0===this.count)return this.min;var e=this.count-1,t=this.base*Math.pow(2,e);if(this.jitter){t*=.5+.5*Math.random()}return t=Math.floor(Math.min(this.max,this.min+t))},e.prototype.getNextTs=function(){return this.nextTs},e.prototype.isReady=function(){return Date.now()>this.nextTs},e}(),Z1=Qf.plugins.sync,X1={1e3:"Disconnected",1001:"Going Away",1002:"Protocol Error",1003:"Unsupported Data",1004:"(For future)",1005:"No Status Received",1006:"Disconnected",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message too big",1010:"Missing Extension",1011:"Internal Error",1012:"Service Restart",1013:"Try Again Later",1014:"Bad Gateway",1015:"TLS Handshake"},$1="sync",Q1=window.WebSocket,J1=window.URL,e0=Object.getOwnPropertyDescriptor(J1.prototype,"hostname").get,t0=String.prototype.endsWith;var n0=window.process&&window.process.platform,i0=uA||n0&&"win32"!==n0&&"darwin"!==n0,r0=uA?500:2e3;function o0(e){return"manifest.json"===e||"main.js"===e||"styles.css"===e||"data.json"===e}var a0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="sync",t.name=Z1.name(),t.description=Z1.desc(),t.defaultOn=!0,t.app=null,t.vault=null,t.plugin=null,t.db=null,t.vaultId=null,t.vaultName=null,t.key=null,t.salt=null,t.encryptionVersion=-1,t.encryptionProvider=null,t.host=null,t.deviceName="",t.userId=-1,t.version=0,t.initial=!0,t.localFiles={},t.scanSpecialFiles=!1,t.scanSpecialFileQueue=[],t.serverFiles={},t.fileRetry={},t.newServerFiles=[],t.allowTypes=new Set(pj),t.allowSpecialFiles=new Set(fj),t.ignoreFolders=[],t.preventSleep=!1,t.initialized=!1,t.dirty=!1,t.dataLoaded=!1,t.requestSaveData=mc(t.saveData.bind(t),2e3),t.boundOnFileAdd=t.onFileAdd.bind(t),t.boundOnFileRemove=t.onFileRemove.bind(t),t.boundOnFileRename=t.onFileRename.bind(t),t.boundOnRaw=t.onRaw.bind(t),t.pause=!1,t.syncing=!1,t.error=!1,t.ready=!1,t.server=null,t.syncLog=[],t.timer=0,t.backoff=new Y1(0,3e5,5e3,!0),t.statusIconEl=null,t.filterCache={},t.syncingPath="",t.syncStatus="",t.requestStatusBarUpdate=mc(t._updateStatusBar,100),t}return f(t,e),t.prototype.getRemoteVaultId=function(){return this.vaultId},t.prototype.getRemoteVaultName=function(){return this.vaultName},t.prototype.setRemoteVaultName=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return this.vaultName=e,[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},t.prototype.init=function(e,t){var n=this;this.app=e,this.vault=e.vault,this.plugin=t,this.settingTab=new x1(e,t,this),t.registerStatusBarItem(),t.registerViewType($1,(function(e){return new _1(e,n)})),t.registerGlobalCommand({id:"sync:setup",name:Qf.plugins.sync.actionSetupSync(),icon:"lucide-settings",checkCallback:function(e){return e||n.openSettings(),!n.vaultId}}),t.registerGlobalCommand({id:"sync:view-version-history",name:Qf.plugins.sync.actionViewVersionHistory(),icon:"lucide-history",checkCallback:function(e){if(!n.vaultId)return!1;var t=n.app.workspace.getActiveViewOfType(YP);return t?(e||n.showVersionHistory(t.file.path),!0):void 0}}),t.registerGlobalCommand({id:"sync:open-sync-view",name:Z1.actionViewSyncSidebar(),icon:"lucide-rotate-ccw",checkCallback:function(e){return!!n.vaultId&&(e||n.app.workspace.ensureSideLeaf($1,"right",{active:!0,reveal:!0}),!0)}}),t.registerGlobalCommand({id:"sync:open-sync-log",name:Z1.actionActivityLog(),icon:"lucide-align-left",checkCallback:function(e){return!!n.vaultId&&(e||n.showSyncLog(),!0)}}),this.setStatus("Uninitialized")},t.prototype.openChooseRemoteVaultModal=function(){new B1(this.app,this).open()},t.prototype.connectToVault=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){return(t=new V1(this.app,this).connect(e)).shouldAnimate=!1,t.open(),[2]}))}))},t.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o=this;return y(this,(function(a){return n=e.workspace,this.registerEvents(),t.addSettingTab(this.settingTab),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),n.onLayoutReady((function(){return g(o,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.loadData()];case 1:return e.sent(),this.initialized=!0,this.dataLoaded=!0,this.requestSync(),this.requestStatusBarUpdate(),[2]}}))}))})),this.timer=window.setInterval(this.requestSync.bind(this),3e4),this.on("status-change",(function(){return o.requestStatusBarUpdate()})),Zl.isMobile?n.onLayoutReady((function(){var e=n.rightSplit;o.statusIconEl=e.addHeaderButton("sync-small",o.openStatusIconMenu.bind(o)),o.statusIconEl.addEventListener("contextmenu",o.openStatusIconMenu.bind(o)),o.statusIconEl.addClass("sync-status-icon")})):(i=t.statusBarEl)&&(r=i.createDiv("status-bar-item-segment"),this.statusIconEl=r.createSpan("status-bar-item-icon sync-status-icon"),i.addEventListener("click",this.openStatusIconMenu.bind(this)),i.addEventListener("contextmenu",this.openStatusIconMenu.bind(this))),[2]}))}))},t.prototype.onDisable=function(e,t){this.server&&(this.server.disconnect(),this.server=null),this.timer&&(clearInterval(this.timer),this.timer=0),this.statusIconEl&&this.statusIconEl.detach(),this.unregisterEvents()},t.prototype.onFileMenu=function(e,t,n){var i=this;t instanceof ww&&("tab-header"===n||"more-options"===n||"file-explorer-context-menu"===n)&&e.addItem((function(e){return e.setSection("view").setTitle(Z1.menuOptViewVersionHistory()).setIcon("lucide-history").onClick((function(){return i.showVersionHistory(t.path)}))}))},t.prototype.openStatusIconMenu=function(e){var t=this,n=PA.forEvent(e);n.addSections(["status","selection","","global"]);var i=this.app.workspace.getActiveFile();if(n.addItem((function(e){return e.setSection("status").setTitle(Z1.labelSyncStatus({status:t.syncStatus})).setIsLabel(!0).removeIcon().titleEl.addClass("u-small")})),this.vaultId){var r=this.pause;n.addItem((function(e){return e.setSection("status").setTitle(Z1(r?"button-resume":"button-pause")).setIcon(r?"lucide-play-circle":"paused").onClick((function(){return t.setPause(!r)}))})).addItem((function(e){return e.setTitle(Z1.labelVersionHistory()).setIcon("lucide-history").setSection("selection").setDisabled(!i).onClick((function(){i&&t.showVersionHistory(i.path)}))})).addItem((function(e){return e.setTitle(Z1.optionSyncLog()).setIcon("lucide-align-left").setSection("global").onClick((function(){return t.showSyncLog()}))})).addItem((function(e){return e.setTitle(Z1.optionViewDeletedFiles()).setIcon("lucide-trash-2").setSection("global").onClick((function(){return t.showDeletedFiles()}))})).addItem((function(e){return e.setTitle(Qf.interface.settings()).setIcon("lucide-settings").setSection("global").onClick((function(){return t.openSettings()}))}))}else n.addItem((function(e){return e.setTitle(Qf.interface.settings()).setIcon("lucide-settings").onClick((function(){return t.openSettings()}))}));n.setParentElement(this.statusIconEl).showAtMouseEvent(e)},t.prototype.loadData=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:e=null,s.label=1;case 1:return s.trys.push([1,4,,5]),t=this,[4,B_(this.app.appId+"-sync",1,{upgrade:function(e,t,n,i){e.objectStoreNames.contains("data")||e.createObjectStore("data")}})];case 2:return[4,(t.db=s.sent()).get("data","data")];case 3:return e=s.sent(),[3,5];case 4:return n=s.sent(),console.error("Failed to load sync data",n),[3,5];case 5:if(!e)return[2];i=0;try{this.vaultId=e.vaultId,this.vaultName=e.vaultName,this.encryptionVersion=e.encryptionVersion||0,this.key=pf(e.key),this.salt=e.salt,this.host=e.host,this.deviceName=e.deviceName||"",this.userId=e.userId||-1,this.pause=!!e.pause,this.version=e.version||0,this.initial=void 0===e.initial||!!e.initial,this.localFiles=e.local||{},this.serverFiles=e.remote||{},this.newServerFiles=e.pending||[],(r=e.appId)&&r!==this.app.appId&&(this.pause=!0,this.version=0,this.initial=!0,this.localFiles={},this.serverFiles={},this.newServerFiles=[]),this.fileRetry={},this.filterCache={},this.allowTypes=new Set(e.allowTypes||pj),this.allowSpecialFiles=new Set(e.allowSpecialFiles||[]),this.ignoreFolders=e.ignoreFolders||[],this.preventSleep=e.preventSleep||!1,i=e.dataVer||0}catch(e){console.error(e)}this.scanFiles();try{if(i<1)for(o in this.serverFiles)this.serverFiles.hasOwnProperty(o)&&!this.localFiles.hasOwnProperty(o)&&o.toLowerCase().endsWith(".canvas")&&((a=this.serverFiles[o]).folder||this.newServerFiles.push(a))}catch(e){console.error(e)}return[2]}}))}))},t.prototype.saveData=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.dirty?(this.dirty=!1,(e={}).appId=this.app.appId,e.vaultId=this.vaultId,e.vaultName=this.vaultName,e.key=ff(this.key),e.salt=this.salt,e.encryptionVersion=this.encryptionVersion,e.host=this.host,e.deviceName=this.deviceName,e.userId=this.userId,e.pause=this.pause,e.version=this.version,e.initial=this.initial,e.local=this.localFiles,e.remote=this.serverFiles,e.pending=this.newServerFiles,e.allowTypes=Array.from(this.allowTypes),e.allowSpecialFiles=Array.from(this.allowSpecialFiles),e.ignoreFolders=this.ignoreFolders,e.preventSleep=this.preventSleep,e.dataVer=1,[4,this.db.put("data",e,"data")]):[2];case 1:return t.sent(),[2]}}))}))},t.prototype.getDefaultDeviceName=function(){return Zl.isDesktopApp?Mf("os").hostname():mj||"Unknown"},t.prototype.setup=function(e,t,n,i,r,o){return g(this,void 0,void 0,(function(){var a;return y(this,(function(s){switch(s.label){case 0:return this.vaultId=e,this.vaultName=t,a=this,[4,OW(n,i)];case 1:return a.key=s.sent(),this.salt=i,this.encryptionVersion=o,this.host=r,this.clear(),this.scanFiles(),[4,this.saveData()];case 2:return s.sent(),this.requestSync(),[2]}}))}))},t.prototype.unsetup=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.vaultId=null,this.vaultName=null,this.key=null,this.salt=null,this.encryptionVersion=-1,this.encryptionProvider=null,this.host=null,this.clear(),this.setStatus("Uninitialized"),[4,this.saveData()];case 1:return e.sent(),[2]}}))}))},t.prototype.clear=function(){this.dirty=!0,this.version=0,this.initial=!0,this.serverFiles={},this.newServerFiles=[],this.fileRetry={},this.ignoreFolders=[],this.filterCache={},this.allowTypes=new Set(pj),this.allowSpecialFiles=new Set(fj);var e=this.server;e&&(e.disconnect(),this.server=null),this.gettingServer=null,this.backoff.success()},t.prototype.setVaultName=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return this.vaultName=e,this.forceSaveData(),[2]}))}))},t.prototype.setPause=function(e){this.pause=e,e?(this.setStatus("Paused"),this.log("Paused")):(this.setStatus("Resumed"),this.log("Resumed. Detecting changes...")),this.dirty=!0,this.saveData(),this.requestSync()},t.prototype.getPause=function(){return this.pause},t.prototype.changeFilter=function(e){var t=this.serverFiles,n=this.newServerFiles,i=[];for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];this.allowSyncFile(o.path,o.folder)||i.push(o)}e(),this.filterCache={};for(var a=[],s=0,l=i;s<l.length;s++){o=l[s];this.allowSyncFile(o.path,o.folder)&&a.push(o)}a.sort((function(e,t){return e.path.length-t.path.length})),n.unshift.apply(n,a)},t.prototype.log=function(e,t,n){void 0===n&&(n=!1),this.logTags(e,"",t,n)},t.prototype.logMerge=function(e,t,n){void 0===n&&(n=!1),this.logTags(e,"merge",t,n)},t.prototype.logSkip=function(e,t,n){void 0===n&&(n=!1),this.logTags(e,"skip",t,n)},t.prototype.logTags=function(e,t,n,i){void 0===i&&(i=!1);var r=this.syncLog;if("Fully synced"===e&&r.last().info===e)return;r.push({file:n,info:e,ts:Date.now(),error:i,type:t}),r.length>r0&&r.splice(0,100),this.trigger("new-log")},t.prototype.scanFiles=function(){for(var e=this.vault,t=this.localFiles,n=[e.getRoot()];n.length;){var i=n.pop();if(this.onFileAdd(i),i instanceof kw)for(var r=0,o=i.children;r<o.length;r++){var a=o[r];n.push(a)}}for(var s in t){if(t.hasOwnProperty(s)&&!s.startsWith("."))e.getAbstractFileByPath(s)||delete t[s]}this.scanSpecialFiles=!0},t.prototype.setIgnoreFolders=function(e){var t=this;this.changeFilter((function(){t.ignoreFolders=e})),this.forceSaveData(),this.requestSync()},t.prototype.setSyncType=function(e,t){var n=this;this.allowTypes.has(e)!==t&&(this.changeFilter((function(){t?n.allowTypes.add(e):n.allowTypes.delete(e)})),this.forceSaveData(),this.requestSync())},t.prototype.setAllowSpecialFile=function(e,t){var n=this;this.allowSpecialFiles.has(e)!==t&&(this.changeFilter((function(){t?n.allowSpecialFiles.add(e):n.allowSpecialFiles.delete(e)})),this.forceSaveData(),this.requestSync())},t.prototype.registerEvents=function(){this.vault.on("create",this.boundOnFileAdd),this.vault.on("modify",this.boundOnFileAdd),this.vault.on("delete",this.boundOnFileRemove),this.vault.on("rename",this.boundOnFileRename),this.vault.on("raw",this.boundOnRaw)},t.prototype.unregisterEvents=function(){this.vault.off("create",this.boundOnFileAdd),this.vault.off("modify",this.boundOnFileAdd),this.vault.off("delete",this.boundOnFileRemove),this.vault.off("rename",this.boundOnFileRename),this.vault.off("raw",this.boundOnRaw)},t.prototype.onFileAdd=function(e){var t=e.path;if("/"!==t){var n=this.localFiles,i=n[t];if(i||(n[t]=i={path:t,previouspath:"",folder:!1,ctime:0,mtime:0,size:0,hash:"",synctime:0,synchash:""}),i.path=t,e instanceof kw)i.folder=!0,i.ctime=0,i.mtime=0,i.size=0,i.hash="";else if(e instanceof ww){i.folder=!1;var r=e.stat,o=Math.ceil(r.mtime),a=Math.ceil(r.ctime),s=r.size;i.mtime&&i.mtime===o&&i.size===r.size||(i.hash=""),i.mtime=o,i.ctime=a,i.size=s}this.requestSync()}},t.prototype.onFileRemove=function(e){delete this.localFiles[e.path],this.requestSync()},t.prototype.onFileRename=function(e,t){var n=this.localFiles,i=n[t];n[e.path]=i,delete n[t],i.path=e.path,i.previouspath||(i.previouspath=t),i.synctime=0,this.onFileAdd(e),this.setDirty(),this.requestSync()},t.prototype.onRaw=function(e){if(e.startsWith(this.vault.configDir+"/")){var t=this.scanSpecialFileQueue;if(t.contains(e))return;t.push(e),this.requestSync()}},t.prototype.onPushedFile=function(e){if(this.version=e.uid,!this.initial||!e.deleted){var t=e.path,n={path:e.path,size:e.size,hash:e.hash,ctime:e.ctime,mtime:e.mtime,folder:e.folder,deleted:e.deleted,uid:e.uid,device:e.device,user:e.user};this.initial&&(n.initial=!0);var i=this.newServerFiles;if(e.wasJustPushed){for(var r=0;r<i.length;r++)i[r].path===t&&(i.splice(r,1),r-=1);return this.serverFiles[t]=n,void this.setDirty()}this.log("Server pushed"+(e.folder?" (folder)":"")+(e.deleted?" (deleted or renamed)":"")+(e.device?" ["+e.device+"]":""),e.path),i.push(n),this.requestSync()}},t.prototype.allowSyncFile=function(e,t){var n=this.filterCache;return n.hasOwnProperty(e)?n[e]:n[e]=this._allowSyncFile(e,t)},t.prototype._allowSyncFile=function(e,t){for(var n=0,i=this.ignoreFolders;n<i.length;n++){var r=i[n];if(t&&e===r||e.startsWith(r+"/"))return!1}if(!t&&e.startsWith(this.vault.configDir+"/")){var o=e.substring((this.vault.configDir+"/").length),a=o.split("/");if(a.some((function(e){return"node_modules"===e||e.startsWith(".")})))return!1;var s=Kc(o),l=Qc(s),c=null;return"workspace.json"!==o&&"workspace-mobile.json"!==o&&("app.json"===o||"types.json"===o?c="app":"appearance.json"===o?c="appearance":"hotkeys.json"===o?c="hotkey":"core-plugins.json"===o||"core-plugins-migration.json"===o?c="core-plugin":"community-plugins.json"===o?c="community-plugin":"themes"!==a[0]||3!==a.length||"theme.css"!==s&&"manifest.json"!==s?"snippets"===a[0]&&2===a.length&&"css"===l?c="appearance-data":1===a.length&&"json"===l?c="core-plugin-data":"plugins"===a[0]&&3===a.length&&o0(s)&&(c="community-plugin-data"):c="appearance-data",c&&this.allowSpecialFiles.has(c))}if(e.startsWith("."))return!1;if(t)return!0;if(e.startsWith("."))return!1;var u=Qc(Kc(e));if("md"===u||"canvas"===u)return!0;var h=this.allowTypes;return UT.contains(u)?h.has("image"):"webm"===u?h.has("audio")||h.has("video"):_T.contains(u)?h.has("audio"):WT.contains(u)?h.has("video"):jT.contains(u)?h.has("pdf"):!!h.has("unsupported")},t.prototype.canSyncPath=function(e,t){var n=this.fileRetry;for(var i in n)if(n.hasOwnProperty(i)&&n[i].ts>e&&t.startsWith(i))return!1;return!0},t.prototype.canSyncLocalFile=function(e,t){if(!t.synctime)return!0;var n=t.size,i=n>10240?n>102400?30:20:10;return e-t.synctime>1e3*i},t.prototype.getHost=function(){var e=this.host||"127.0.0.1:3003";return e.startsWith("127.0.0.1")||e.startsWith("localhost")?"ws://"+e:"wss://"+e},t.prototype.setStatus=function(e){this.syncStatus=e,this.trigger("status-change")},t.prototype.getStatus=function(){return this.initialized?this.vaultId?this.error||Object.keys(this.fileRetry).length>0?"error":this.pause?"paused":this.syncing?"syncing":"synced":"disconnected":"uninitialized"},t.prototype.failedSync=function(e){var t=this.syncingPath;if(this.log(e,t,!0),t){var n=this.fileRetry,i=Date.now(),r=n[t];r||(r=n[t]={count:0,error:"",ts:0}),r.error=e;var o=r.count=r.count+1,a=5*Math.pow(2,o)*1e3;a=Math.min(a,3e5),r.ts=i+a}},t.prototype.requestSync=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return this.syncing?[2]:(this.syncing=!0,this.error=!1,this.trigger("status-change"),[4,sleep(50)]);case 1:a.sent(),e=null,t=!0,a.label=2;case 2:if(!t||!this.plugin.enabled||this.pause||!this.vaultId)return[3,8];!e&&uA&&this.preventSleep&&(e=kA()),a.label=3;case 3:return a.trys.push([3,5,,6]),this.error=!1,this.syncingPath=null,[4,this._sync()];case 4:return t=a.sent(),(n=this.syncingPath)&&delete this.fileRetry[n],[3,6];case 5:return i=a.sent(),console.log("Sync Error!"),console.error(i),this.error=!0,this.failedSync(i.message),t=!1,this.trigger("status-change"),[3,6];case 6:return this.dirty&&this.requestSaveData(),r=0,this.server&&(o=Date.now()-this.server.lastNetworkRequestTs,r=Math.max(0,50-o)),[4,sleep(r)];case 7:return a.sent(),[3,2];case 8:return e&&e.release(),this.syncing=!1,this.trigger("status-change"),[2]}}))}))},t.prototype.getServer=function(){var e=this,t=this.gettingServer;if(!t){this.gettingServer=t=this.asyncGetServer();var n=function(){e.gettingServer=null};t.then(n,n)}return t},t.prototype.asyncGetServer=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o=this;return y(this,(function(a){switch(a.label){case 0:if(!(e=this.server)||e.isConnected()||e.isConnecting()||(e.disconnect(),e=this.server=null,this.backoff.fail()),e)return[3,5];if(this.encryptionProvider||!this.key)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),t=this,[4,BW(this.encryptionVersion,this.key,this.salt)];case 2:return t.encryptionProvider=a.sent(),[3,4];case 3:return n=a.sent(),console.error(n),this.log("Unable to decrypt vault",null,!0),this.error=!0,this.backoff.fail(),[2,null];case 4:if(!(this.host&&dj.token&&this.vaultId&&this.encryptionProvider))return[2,null];e=this.server=new s0(this.encryptionProvider),a.label=5;case 5:if(e.hasConnection())return[3,12];this.setStatus("Connecting to server"),this.log("Connecting to server"),this.ready=!1,a.label=6;case 6:return a.trys.push([6,8,,12]),i=this.deviceName||this.getDefaultDeviceName(),[4,e.connect(this.getHost(),dj.token,this.vaultId,this.version,this.initial,i,(function(e){o.log("Connection successful. Detecting changes..."),o.ready=!0,o.initial&&(o.initial=!1),o.version<e&&(o.version=e),o.dirty=!0,o.requestSaveData(),o.requestSync()}),this.onPushedFile.bind(this))];case 7:return a.sent(),this.backoff.success(),[3,12];case 8:return(r=a.sent()).message&&r.message.contains("Your subscription to Obsidian Sync has expired")?(new JA(r.message),[3,11]):[3,9];case 9:return r.message&&r.message.contains("Vault not found")?(new JA(Z1.msgDisconnectFromDeletedVault()),[4,this.unsetup()]):[3,11];case 10:a.sent(),a.label=11;case 11:return console.error(r),this.log(r.message,null,!0),e.disconnect(),e=this.server=null,this.error=!0,this.backoff.fail(),[2,null];case 12:return this.userId=e.userId,[2,e]}}))}))},t.prototype._sync=function(){return g(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C,M,E,S,x,T,D,A,L,P,I,F,O,B,N,R,H,V,z,q,U,_,W,j,G,K,Y,Z,X,$,Q,J=this;return y(this,(function(ee){switch(ee.label){case 0:if(this.pause)return[2,!1];if(!this.backoff.isReady())return this.log("Waiting to connect to server"),[2,!1];if(!dj.token)throw new Error("Not logged in");return[4,this.getServer()];case 1:if(!(e=ee.sent()))return[2,!1];if(this.pause||!this.vaultId)return[2,!1];t=this.localFiles,n=this.serverFiles,i=this.newServerFiles,r=this.vault,o=r.adapter,a=Date.now(),s=0,this.setStatus("Indexing..."),l=r.configDir,c=l+"/",ee.label=2;case 2:if(ee.trys.push([2,24,,25]),u={},h=this.scanSpecialFileQueue,!this.scanSpecialFiles)return[3,20];for(G in this.scanSpecialFiles=!1,this.setStatus("Initializing..."),h=this.scanSpecialFileQueue=[],t)t.hasOwnProperty(G)&&G.startsWith(".")&&(u[G]=t[G],delete t[G]);return[4,o.exists(l)];case 3:return ee.sent()?(h.push(c+"config"),[4,o.list(l)]):[3,20];case 4:for(d=ee.sent(),p=0,f=d.files;p<f.length;p++)"json"===Qc(I=f[p])&&h.push(I);return[4,o.exists(c+"themes")];case 5:return ee.sent()?[4,o.list(c+"themes")]:[3,10];case 6:m=ee.sent(),v=0,g=m.folders,ee.label=7;case 7:return v<g.length?(D=g[v],[4,o.list(D)]):[3,10];case 8:for(b=ee.sent(),w=0,k=b.files;w<k.length;w++)I=k[w],"manifest.json"!==(F=Kc(I))&&"theme.css"!==F||h.push(I);ee.label=9;case 9:return v++,[3,7];case 10:return[4,o.exists(c+"snippets")];case 11:return ee.sent()?[4,o.list(c+"snippets")]:[3,13];case 12:for(C=ee.sent(),M=0,E=C.files;M<E.length;M++)"css"===Qc(I=E[M])&&h.push(I);ee.label=13;case 13:return[4,o.exists(c+"plugins")];case 14:return ee.sent()?[4,o.list(c+"plugins")]:[3,19];case 15:S=ee.sent(),x=0,T=S.folders,ee.label=16;case 16:return x<T.length?(D=T[x],[4,o.list(D)]):[3,19];case 17:for(A=ee.sent(),L=0,P=A.files;L<P.length;L++)I=P[L],o0(F=Kc(I))&&h.push(I);ee.label=18;case 18:return x++,[3,16];case 19:this.forceSaveData(),ee.label=20;case 20:return h.length>0?(G=h.pop(),[4,o.exists(G)]):[3,23];case 21:return ee.sent()?[4,o.stat(G)]:(delete t[G],[3,20]);case 22:return(O=ee.sent())&&"file"===O.type?((j=t[G])||(j=u.hasOwnProperty(G)?t[G]=u[G]:t[G]={path:G,previouspath:"",ctime:0,mtime:0,size:0,folder:!1,hash:"",synchash:"",synctime:0}),Z=Math.ceil(O.mtime),Y=Math.ceil(O.ctime),B=O.size,j.mtime&&j.mtime===Z&&j.size===O.size||(j.hash=""),j.mtime=Z,j.ctime=Y,j.size=B,[3,20]):(delete t[G],[3,20]);case 23:return[3,25];case 24:return N=ee.sent(),console.error("Failed to scan config files",N),[3,25];case 25:if(!(i.length>0))return[3,29];R=function(l){var u,h,d,p,f,m,v,g,b,w,k,C,M,E,S,x,T,D,A,L,P,I,F,O,B,N,R,V,z,q,U,_,W,j;return y(this,(function(y){switch(y.label){case 0:if(u=i[l],h=u.path,d=n[h],p=t[h],f=function(e,t){return e||J.log("Accepted",h),p&&(p.synctime=Date.now()),t||(n[h]=u),i.splice(l,1),J.setDirty(),!0},!H.allowSyncFile(h,u.folder))return[2,{value:f(!0)}];if(!mw(h)||Zl.isAndroidApp&&/[*?<>"]/.test(h))return H.log("Ignoring remote file name with illegal characters",h,!0),new JA('Sync: Unable to download file with illegal name "'.concat(h,'"')),[2,{value:f(!0,!0)}];if(tu(h).split("/").contains(".."))return[2,{value:f(!0)}];if(!H.canSyncPath(a,h))return s++,[2,"continue"];for(H.syncingPath=h,m=l+1;m<i.length;m++)if(i[m].path===h)return H.log("Skipped",h),[2,{value:f(!0,!0)}];if(p)return[3,8];if(u.deleted)return[2,{value:f(!0)}];if(H.setStatus("Downloading "+h),!Zl.isAndroidApp)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,H.syncFileDown(e,u)];case 2:return y.sent(),[3,4];case 3:if((v=y.sent())&&"string"==typeof v.message&&v.message.contains("FILE_NOTCREATED"))return H.log("Ignoring remote file name with illegal characters",h,!0),new JA('Sync: Unable to download file with illegal name "'.concat(h,'"')),[2,{value:f(!0,!0)}];throw v;case 4:return[3,7];case 5:return[4,H.syncFileDown(e,u)];case 6:y.sent(),y.label=7;case 7:return[2,{value:f()}];case 8:return p.folder||p.hash?[3,10]:(H.getHashFromMetadataCache(p),p.hash?[3,10]:(H.setStatus("Computing hash "+h),[4,H.updateHash(p)]));case 9:y.sent(),y.label=10;case 10:if(!p.folder||!u.folder)return[3,15];if(!u.deleted)return[3,14];if(!(E=r.getAbstractFileByPath(h)))return[3,14];if(E instanceof kw&&E.children.length>0)return[2,{value:f(!0)}];H.setStatus("Deleting "+h),H.log("Deleting",h),y.label=11;case 11:return y.trys.push([11,13,,14]),[4,r.delete(E,!0)];case 12:return y.sent(),[3,14];case 13:return g=y.sent(),b=(g?g.message:"")||"Failed to delete folder",H.log(b,h,!0),[3,14];case 14:return[2,{value:f(!0)}];case 15:return p.folder||u.folder||p.hash!==u.hash?d&&(p.folder&&d.folder||p.hash===d.hash)?u.deleted?(H.setStatus("Deleting "+h),(E=r.getAbstractFileByPath(h))?(H.log("Deleting",h),[4,r.delete(E)]):[3,17]):[3,20]:[3,22]:[2,{value:f(!0)}];case 16:return y.sent(),[3,19];case 17:return H.log("Deleting",h),[4,o.remove(h)];case 18:y.sent(),y.label=19;case 19:return[2,{value:f()}];case 20:return H.setStatus("Downloading "+h),[4,H.syncFileDown(e,u)];case 21:return y.sent(),[2,{value:f()}];case 22:return p.folder||!u.folder?[3,24]:(E=r.getAbstractFileByPath(h))instanceof ww?(w=E.extension,k=w?h.substr(h.length-w.length-1):"",C=h.substr(0,h.length-k.length),M=C+" (Conflicted copy)"+k,H.setStatus("Renaming conflicted file "+h),H.log("Renaming conflicted file",h),[4,r.rename(E,M)]):[3,24];case 23:return y.sent(),H.setDirty(),[2,{value:!0}];case 24:return u.initial&&u.mtime>p.mtime?(H.setStatus("Downloading "+h),[4,H.syncFileDown(e,u)]):[3,26];case 25:return y.sent(),[2,{value:f()}];case 26:if(u.initial||p.folder||u.folder||u.deleted||"md"!==Qc(h)||u.hash===p.synchash)return[3,47];if(H.setStatus("Merging "+h),H.logMerge("Merging conflicted file",h),!((E=r.getAbstractFileByPath(h))instanceof ww))return H.logMerge("Merge failed.",h,!0),[2,{value:f(!0)}];S=void 0,y.label=27;case 27:return y.trys.push([27,29,,30]),[4,r.read(E)];case 28:return S=y.sent(),[3,30];case 29:return x=y.sent(),H.logMerge("Merge failed. "+x.toString(),h,!0),[2,{value:f(!0)}];case 30:return S?[3,32]:[4,H.syncFileDown(e,u)];case 31:return y.sent(),[2,{value:f()}];case 32:if(T="",!d||d.deleted)return[3,36];y.label=33;case 33:return y.trys.push([33,35,,36]),D=df,[4,e.pull(d.uid)];case 34:return T=D.apply(void 0,[y.sent()]),[3,36];case 35:return A=y.sent(),H.logMerge("Merge failed. "+A.toString(),h,!0),[2,{value:f(!0)}];case 36:L=void 0,y.label=37;case 37:return y.trys.push([37,39,,40]),P=df,[4,e.pull(u.uid)];case 38:return L=P.apply(void 0,[y.sent()]),[3,40];case 39:return I=y.sent(),H.logMerge("Merge failed. "+I.toString(),h,!0),[2,{value:f(!0)}];case 40:return T===L||S===L?[2,{value:f()}]:L?T?[3,45]:Math.abs(Date.now()-p.ctime)<18e4?(H.app.fileManager.storeTextFileBackup(h,S),H.setStatus("Downloading "+h),[4,r.modify(E,L)]):[3,42]:[2,{value:f()}];case 41:return y.sent(),[2,{value:f()}];case 42:return u.mtime>p.mtime?(H.app.fileManager.storeTextFileBackup(h,S),H.setStatus("Downloading "+h),[4,r.modify(E,L)]):[3,44];case 43:return y.sent(),[2,{value:f()}];case 44:return[2,{value:f()}];case 45:return H.app.fileManager.storeTextFileBackup(h,S),F=XH(T,S,L),[4,r.modify(E,F)];case 46:return y.sent(),H.logMerge("Merge successful",h),[2,{value:f()}];case 47:if(u.folder||u.deleted||!(u.size>0)||!h.startsWith(c))return[3,56];if("json"!==Qc(h))return[3,54];y.label=48;case 48:return y.trys.push([48,53,,54]),H.setStatus("Merging "+h),H.log("Merging conflicted file",h),N=(B=JSON).parse,[4,o.read(h)];case 49:return!(O=N.apply(B,[y.sent()]))||Array.isArray(O)||"object"!=typeof O?[3,52]:(z=(V=JSON).parse,q=df,[4,e.pull(u.uid)]);case 50:if(!(R=z.apply(V,[q.apply(void 0,[y.sent()])]))||Array.isArray(R)||"object"!=typeof R)return[3,52];for(U in R)R.hasOwnProperty(U)&&(O[U]=R[U]);return _=hf(JSON.stringify(O,void 0,2)),h===H.vault.configDir+"/core-plugins.json"&&(W=H.patchCorePluginsFile(_))!==_&&(_=W,H.log("Fixing core plugins list",h)),[4,o.writeBinary(h,_)];case 51:return y.sent(),H.log("Merge successful",h),[2,{value:f(!0)}];case 52:return[3,54];case 53:return j=y.sent(),H.log("Merge failed. "+j.toString(),h,!0),[3,54];case 54:return[4,H.syncFileDown(e,u)];case 55:return y.sent(),[2,{value:f()}];case 56:return H.log("Rejected server change",h),[2,{value:f(!0)}]}}))},H=this,V=0,ee.label=26;case 26:return V<i.length?[5,R(V)]:[3,29];case 27:if("object"==typeof(z=ee.sent()))return[2,z.value];ee.label=28;case 28:return V++,[3,26];case 29:if(!this.ready)return[2,!1];for(G in q=null,U=null,n)if(n.hasOwnProperty(G)&&(K=n[G],!t.hasOwnProperty(G))){if(K.deleted){delete n[G];continue}if(!this.allowSyncFile(G,K.folder))continue;K.folder?(!U||K.path.length>U.path.length)&&(U=K):(!q||K.path.length>q.path.length)&&(q=K)}return q?(G=q.path,this.setStatus("Deleting remote file "+G),this.log("Deleting remote file",G),this.syncingPath=G,[4,e.push(G,null,!1,!0,0,0,"",null)]):[3,31];case 30:return ee.sent(),q.deleted=!0,this.setDirty(),[2,!0];case 31:return U?(G=U.path,this.setStatus("Deleting remote folder "+G),this.log("Deleting remote folder",G),this.syncingPath=G,[4,e.push(G,null,!0,!0,0,0,"",null)]):[3,33];case 32:return ee.sent(),U.deleted=!0,this.setDirty(),[2,!0];case 33:for(G in _=null,W=null,t)if(t.hasOwnProperty(G)&&(j=t[G],this.allowSyncFile(G,j.folder)))if(this.canSyncPath(a,G)){if(K=n[G],i0&&!j.folder&&K&&K.ctime&&(0===j.ctime||j.ctime>K.ctime)&&!K.folder&&!K.deleted&&(j.ctime=K.ctime),j.folder||!(j.size>e.perFileMax))if(K&&!K.deleted){if(!_)if(j.folder){if(!this.canSyncLocalFile(a,j)){s++;continue}K.folder||(!_||j.path.length<_.path.length)&&(_=j)}else if(K.folder){if(!this.canSyncLocalFile(a,j)){s++;continue}U=K}else if(j.hash||this.getHashFromMetadataCache(j),!j.hash||j.hash!==K.hash){if(!this.canSyncLocalFile(a,j)){s++;continue}(!W||j.size<W.size)&&(W=j)}}else{if(!this.canSyncLocalFile(a,j)){s++;continue}j.folder?(!_||j.path.length<_.path.length)&&(_=j):(!W||j.size<W.size)&&(W=j)}}else s++;return _?(G=_.path,this.syncingPath=G,this.setStatus("Uploading "+G),this.log("Uploading",G),[4,e.push(G,_.previouspath,!0,!1,0,0,"",null)]):[3,35];case 34:return ee.sent(),n.hasOwnProperty(G)?n[G].deleted&&(n[G].deleted=!1):n[G]={uid:0,path:G,size:0,hash:"",ctime:0,mtime:0,folder:!0,deleted:!1,device:this.deviceName},_.previouspath="",_.synctime=Date.now(),this.setDirty(),[2,!0];case 35:return W?(G=W.path,this.syncingPath=G,this.setStatus("Uploading "+G),K=n[G],!W.hash&&(this.getHashFromMetadataCache(W),W.hash&&K&&!K.deleted&&K.hash===W.hash)?(this.setStatus("Comparing "+G),this.setDirty(),[2,!0]):(Y=W.ctime,Z=W.mtime,[4,o.readBinary(G)])):[3,39];case 36:return X=ee.sent(),Q=W,[4,vf(X)];case 37:return $=Q.hash=ee.sent(),K&&!K.deleted&&K.hash===W.hash?(this.setStatus("Comparing "+G),this.setDirty(),[2,!0]):(this.log("Uploading file",G),[4,e.push(G,W.previouspath,!1,!1,Y,Z,$,X)]);case 38:return ee.sent(),W.synchash=$,this.log("Upload complete",G),W.previouspath="",W.synctime=Date.now(),this.setDirty(),[2,!0];case 39:return 0===s?(this.log("Fully synced"),this.setStatus("Fully synced"),this.fileRetry={},[2,!1]):(this.setStatus("Indexing..."),[2,!0])}}))}))},t.prototype.setDirty=function(){this.dirty=!0,this.trigger("status-change")},t.prototype.forceSaveData=function(){this.setDirty(),this.requestSaveData()},t.prototype.getHashFromMetadataCache=function(e){var t=this.app.metadataCache.getFileInfo(e.path);t&&Math.ceil(t.mtime)===e.mtime&&t.size===e.size&&(e.hash=t.hash)},t.prototype.syncFileDown=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b;return y(this,(function(y){switch(y.label){case 0:return n=t.path,[4,(i=this.vault.adapter).stat(n)];case 1:if(r=y.sent(),!t.folder)return[3,8];if(!r||"folder"!==r.type)return[3,4];if((o=this.localFiles)[n])return[3,3];for(l in a=n.toLowerCase(),s="",o)if(o.hasOwnProperty(l)&&l.toLowerCase()===a){s=l;break}return s?(this.log("Detected case sensitive folder collision, renaming folder",n),[4,i.rename(s,tu(n))]):[3,3];case 2:y.sent(),y.label=3;case 3:return[2];case 4:return r&&"file"===r.type?(this.log("Deleting local file",n),[4,i.remove(n)]):[3,6];case 5:y.sent(),y.label=6;case 6:return this.log("Creating local folder",n),[4,i.mkdir(n)];case 7:return y.sent(),[2];case 8:return r&&"folder"===r.type?[4,i.list(n)]:[3,13];case 9:return 0!==(c=y.sent()).files.length||0!==c.folders.length?[3,11]:(this.log("Deleting local folder",n),[4,i.rmdir(n,!0)]);case 10:return y.sent(),[2];case 11:return this.log("Renaming conflicted file",n),[4,i.rename(n,n+" (Conflicted copy)")];case 12:return y.sent(),[2];case 13:return this.log("Downloading file",n),[4,e.pull(t.uid)];case 14:if(!(u=y.sent()))throw new Error("Failed to download file, no data.");if(n===this.vault.configDir+"/core-plugins.json")try{(h=this.patchCorePluginsFile(u))!==u&&(u=h,this.log("Fixing core plugins list",n))}catch(e){return this.log("File is corrupt, ignoring",n),[2]}return[4,vf(u)];case 15:return d=y.sent(),[4,gL(i.promise)];case 16:return y.sent(),[4,i.stat(n)];case 17:if((p=y.sent())&&(!r||p.mtime!==r.mtime||p.size!==r.size))throw new Error("Download cancelled because file was changed locally. Will try again soon.");return r?(f=void 0,t.ctime&&(0===r.ctime||t.ctime<r.ctime)&&(f=t.ctime),(m=this.vault.getAbstractFileByPath(n))instanceof ww?m.saving?[4,gL(i.promise)]:[3,19]:[3,21]):[3,24];case 18:y.sent(),y.label=19;case 19:return[4,this.vault.modifyBinary(m,u,{ctime:f,mtime:t.mtime})];case 20:return y.sent(),[3,23];case 21:return[4,i.writeBinary(n,u,{ctime:f,mtime:t.mtime})];case 22:y.sent(),y.label=23;case 23:return[3,30];case 24:return v=Yc(n),(g="/"!==v&&""!==v)?[4,i.exists(v)]:[3,26];case 25:g=!y.sent(),y.label=26;case 26:return g?[4,i.mkdir(v)]:[3,28];case 27:y.sent(),y.label=28;case 28:return[4,i.writeBinary(n,u,{ctime:t.ctime,mtime:t.mtime})];case 29:y.sent(),y.label=30;case 30:(b=this.localFiles[n])&&(b.hash=d,b.synchash=d),this.log("Downloading complete",n),y.label=31;case 31:return[2]}}))}))},t.prototype.patchCorePluginsFile=function(e){var t=JSON.parse(df(e)),n=!1;return Array.isArray(t)?t.contains("sync")||(t.push("sync"),n=!0):"object"==typeof t&&!0!==t.sync&&(t.sync=!0,n=!0),n&&(e=hf(JSON.stringify(t,null,2))),e},t.prototype.updateHash=function(e){return g(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return e.folder||e.hash?[2,null]:[4,this.vault.adapter.readBinary(e.path)];case 1:return t=i.sent(),n=e,[4,vf(t)];case 2:return n.hash=i.sent(),[2,t]}}))}))},t.prototype._updateStatusBar=function(){var e=this.getStatus(),t=this.statusIconEl;t&&(Rx(this.plugin.statusBarEl,this.syncStatus,{placement:"top"}),t.removeClass("mod-success","mod-working","mod-error","mod-spin"),"uninitialized"===e?(mx(t,"sync-small"),t.addClass("mod-working")):"disconnected"===e?(mx(t,"refresh-cw-off"),t.addClass("mod-error")):"paused"===e?(mx(t,"paused"),t.addClass("mod-working")):"syncing"===e||"Connecting to server"===this.syncStatus?(mx(t,"sync-small"),t.addClass("mod-working","mod-spin")):"synced"===e?(mx(t,"check-small"),t.addClass("mod-success")):"error"===e&&(mx(t,"sync-small"),t.addClass("mod-error")))},t.prototype.showVersionHistory=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){return new D1(this.app,this,e).open(),[2]}))}))},t.prototype.getHistory=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,this.getServer()];case 1:return[4,n.sent().listHistory(e,t)];case 2:return[2,n.sent()]}}))}))},t.prototype.getContentForVersion=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.getServer()];case 1:return[2,t.sent().pull(e)]}}))}))},t.prototype.restoreVersion=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return[4,this.getServer()];case 1:return n=o.sent(),t?[3,3]:[4,n.restore(e)];case 2:return o.sent(),[2];case 3:return r=df,[4,n.pull(e)];case 4:return i=r.apply(void 0,[o.sent()]),[2,this.vault.adapter.write(t,i)]}}))}))},t.prototype.showDeletedFiles=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.getServer()];case 1:return[4,n.sent().listDeleted()];case 2:return(t=n.sent()).reverse(),e?new P1(this.app,this,t).open():new L1(this.app,this,Z1.labelDeletedFiles(),t).open(),[2]}}))}))},t.prototype.showConfigFiles=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){for(i in e=[],t=this.serverFiles,n=this.app.vault.configDir+"/",t)t.hasOwnProperty(i)&&!(r=t[i]).folder&&r.path.startsWith(n)&&e.push({uid:r.uid,ts:r.mtime,folder:r.folder,path:r.path,relatedpath:"",size:r.size,deleted:r.deleted,device:r.device});return e.sort((function(e,t){return t.ts-e.ts})),new L1(this.app,this,Z1.labelSettingFiles(),e).open(),[2]}))}))},t.prototype.getUsernames=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.getServer()];case 1:return[2,e.sent().getUsernames()]}}))}))},t.prototype.purge=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.getServer()];case 1:return[4,e.sent().purge()];case 2:return e.sent(),[2]}}))}))},t.prototype.size=function(){return g(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,this.getServer()];case 1:return(e=t.sent())?[4,e.size()]:[2,{size:-1,limit:-1,vault_size:-1}];case 2:return[2,t.sent()]}}))}))},t.prototype.openSettings=function(){var e=this.app.setting;e.open(),e.activeTab!==this.settingTab&&e.openTabById(this.id)},t.prototype.showSyncLog=function(){this.vaultId?new N1(this.app,this).open():this.openSettings()},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(sw),s0=function(){function e(e){this.socket=null,this.queue=new cL,this.notifyQueue=new cL,this.perFileMax=208666624,this.userId=-1,this.justPushed=null,this.encryptionProvider=e}return e.prototype.isConnecting=function(){var e=this.socket;return e&&e.readyState===Q1.CONNECTING},e.prototype.isConnected=function(){var e=this.socket;return e&&e.readyState===Q1.OPEN},e.prototype.hasConnection=function(){return!!this.socket},e.prototype.connect=function(e,t,n,i,r,o,a,s){return g(this,void 0,Promise,(function(){var l,c=this;return y(this,(function(u){return this.hasConnection()?[2]:(this.onReady=a,this.onPush=s,l=this.encryptionProvider.keyHash,[2,new Promise((function(a,s){var u=new J1(e),h=e0.call(u);if(!t0.call(h,".obsidian.md")&&"127.0.0.1"!==h)return s(new Error("Unable to connect to server."));var d=!1,p=function(e){d||(d=!0,c.disconnect(),s(e))},f=c.socket=new Q1(u);f.binaryType="arraybuffer",f.onclose=function(e){1006===e.code?p(new Error("Unable to connect to server.")):p(new Error("Disconnected. Code: "+e.code+" "+function(e){if(e>=0&&e<=999)return"(Unused)";if(e>=1016){if(e<=1999)return"(For WebSocket standard)";if(e<=2999)return"(For WebSocket extensions)";if(e<=3999)return"(For libraries and frameworks)";if(e<=4999)return"(For applications)"}return X1.hasOwnProperty(e)?X1[e]:"(Unknown)"}(e.code)))},f.onopen=function(){c.lastMessageTs=Date.now(),c.heartbeat=window.setInterval((function(){var e=Date.now()-c.lastMessageTs;e>12e4?c.disconnect():e>1e4&&c.send({op:"ping"})}),2e4),c.send({op:"init",token:t,id:n,keyhash:l,version:i,initial:r,device:o,encryption_version:c.encryptionProvider.encryptionVersion})},f.onmessage=function(e){var t,n=e.data;if("string"!=typeof n)return p(new Error("Server returned binary"));try{t=JSON.parse(n)}catch(e){return console.error(e),p(new Error("Server JSON failed to parse: "+n))}if("pong"!==t.op){if("err"===t.status||"err"===t.res)return p(new Error("Failed to authenticate: "+t.msg));if("ok"!==t.res)return p(new Error("Did not respond to login request: "+n));if(t.hasOwnProperty("perFileMax")){var i=t.perFileMax;if(!Number.isInteger(i)||isNaN(i)||i<0)return p(new Error("Unexpected value from server for max file size"));c.perFileMax=i}t.userId&&(c.userId=t.userId),a(),d=!0,f.onmessage=c.onMessage.bind(c),f.onclose=c.disconnect.bind(c),f.onerror=c.disconnect.bind(c)}}}))])}))}))},e.prototype.disconnect=function(){this.socket&&this.socket.close(),this.socket=null,clearInterval(this.heartbeat),this.heartbeat=null;var e=new Error("Disconnected");this.responsePromise&&(this.responsePromise.reject(e),this.responsePromise=null),this.dataPromise&&(this.dataPromise.reject(e),this.dataPromise=null)},e.prototype.pull=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue.queue((function(){return g(t,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return this.lastNetworkRequestTs=Date.now(),[4,this.request({op:"pull",uid:e})];case 1:if((t=l.sent()).deleted)return[3,8];n=t.size,i=t.pieces,r=new ArrayBuffer(n),o=0,a=0,l.label=2;case 2:return a<i?[4,this.dataResponse()]:[3,5];case 3:s=l.sent(),new Uint8Array(r,o,s.byteLength).set(new Uint8Array(s)),o+=s.byteLength,l.label=4;case 4:return a++,[3,2];case 5:return r.byteLength>0?[4,this.encryptionProvider.decrypt(r)]:[3,7];case 6:r=l.sent(),l.label=7;case 7:return[2,r];case 8:return[2,null]}}))}))}))]}))}))},e.prototype.push=function(e,t,n,i,r,o,a,s){return g(this,void 0,Promise,(function(){var l=this;return y(this,(function(c){return[2,this.queue.queue((function(){return g(l,void 0,void 0,(function(){var l,c,u,h,d,p,f,m,v,g;return y(this,(function(y){switch(y.label){case 0:return this.lastNetworkRequestTs=Date.now(),[4,this.encryptionProvider.deterministicEncodeStr(e)];case 1:return l=y.sent(),t?[4,this.encryptionProvider.deterministicEncodeStr(t)]:[3,3];case 2:return u=y.sent(),[3,4];case 3:u=null,y.label=4;case 4:return c=u,h=n?"":Qc(Kc(e)),n||i?(this.justPushed={path:l,folder:n,deleted:i,mtime:0,hash:""},[4,this.request({op:"push",path:l,relatedpath:c,extension:h,hash:"",ctime:0,mtime:0,folder:n,deleted:i})]):[3,6];case 5:return y.sent(),[2];case 6:return s.byteLength>0?[4,this.encryptionProvider.encrypt(s)]:[3,8];case 7:s=y.sent(),y.label=8;case 8:return a?[4,this.encryptionProvider.deterministicEncodeStr(a)]:[3,10];case 9:a=y.sent(),y.label=10;case 10:return d=s.byteLength,p=2097152,f=Math.ceil(d/p),this.justPushed={path:l,folder:n,deleted:i,mtime:o,hash:a},[4,this.request({op:"push",path:l,relatedpath:c,extension:h,hash:a,ctime:r,mtime:o,folder:n,deleted:i,size:d,pieces:f})];case 11:if("ok"===y.sent().res)return this.justPushed=null,[2];m=0,y.label=12;case 12:return m<f?(v=m*p,g=Math.min(p,d-v),this.sendBinary(new Uint8Array(s,v,g)),[4,this.response()]):[3,15];case 13:y.sent(),y.label=14;case 14:return m++,[3,12];case 15:return this.justPushed=null,[2]}}))}))}))]}))}))},e.prototype.listDeleted=function(){return g(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){return[2,this.queue.queue((function(){return g(e,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,this.request({op:"deleted",suppressrenames:!0})];case 1:e=a.sent(),t=e.items,n=0,i=t,a.label=2;case 2:return n<i.length?(r=i[n],o=r,[4,this.encryptionProvider.deterministicDecodeStr(r.path)]):[3,5];case 3:o.path=a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[2,t]}}))}))}))]}))}))},e.prototype.listHistory=function(e,t){return g(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){return[2,this.queue.queue((function(){return g(n,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return[4,this.encryptionProvider.deterministicEncodeStr(e)];case 1:return n=h.sent(),[4,this.request({op:"history",path:n,last:t})];case 2:i=h.sent(),r=i.items,o=0,a=r,h.label=3;case 3:return o<a.length?(s=a[o],l=s,[4,this.encryptionProvider.deterministicDecodeStr(s.path)]):[3,8];case 4:return l.path=h.sent(),c=s,(u=s.relatedpath)?[4,this.encryptionProvider.deterministicDecodeStr(s.relatedpath)]:[3,6];case 5:u=h.sent(),h.label=6;case 6:c.relatedpath=u,h.label=7;case 7:return o++,[3,3];case 8:return[2,i]}}))}))}))]}))}))},e.prototype.restore=function(e){return g(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue.queue((function(){return g(t,void 0,void 0,(function(){return y(this,(function(t){return[2,this.request({op:"restore",uid:e})]}))}))}))]}))}))},e.prototype.getUsernames=function(){return g(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){return[2,this.queue.queue((function(){return e.request({op:"usernames"})}))]}))}))},e.prototype.purge=function(){return g(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){return[2,this.queue.queue((function(){return e.request({op:"purge"})}))]}))}))},e.prototype.size=function(){return g(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){return[2,this.queue.queue((function(){return e.request({op:"size"})}))]}))}))},e.prototype.onServerPush=function(e){var t=this,n=this.justPushed;return n&&n.path===e.path&&n.folder===e.folder&&n.deleted===e.deleted&&n.mtime===e.mtime&&n.hash===e.hash&&(this.justPushed=null,e.wasJustPushed=!0),this.notifyQueue.queue((function(){return g(t,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=e,[4,this.encryptionProvider.deterministicDecodeStr(e.path)];case 1:return t.path=i.sent(),e.hash?(n=e,[4,this.encryptionProvider.deterministicDecodeStr(e.hash)]):[3,3];case 2:n.hash=i.sent(),i.label=3;case 3:return this.onPush(e),[2]}}))}))}))},e.prototype.response=function(){return(this.responsePromise=uL()).promise},e.prototype.dataResponse=function(){return(this.dataPromise=uL()).promise},e.prototype.request=function(e){return g(this,arguments,Promise,(function(e,t){var n,i,r,o,a;return void 0===t&&(t=6e4),y(this,(function(s){switch(s.label){case 0:n=this.responsePromise=uL(),this.send(e),i=new Error("Timeout"),r=window.setTimeout((function(){return n.reject(i)}),t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.promise];case 2:return o=s.sent(),clearTimeout(r),[3,4];case 3:throw(a=s.sent())===i&&this.disconnect(),a;case 4:if(o.err)throw new Error(o.err);return[2,o]}}))}))},e.prototype.onMessage=function(e){if(this.lastMessageTs=Date.now(),"string"==typeof e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(t){return console.log(e.data),void this.disconnect()}var n=t.op;if("pong"===n)return;if("ready"===n)return void this.onReady(t.version);if("push"===n)return void this.onServerPush(t);var i=this.responsePromise;i&&(this.responsePromise=null,i.resolve(t))}else{var r=this.dataPromise;r&&(this.dataPromise=null,r.resolve(e.data))}},e.prototype.send=function(e){this.socket.send(JSON.stringify(e))},e.prototype.sendBinary=function(e){this.socket.send(e)},e}(),l0=Qf.plugins.tagPane,c0=function(){function e(){this.id="tag-pane",this.name=l0.name(),this.description=l0.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerGlobalCommand({id:"tag-pane:open",name:l0.actionShow(),icon:"lucide-tag",callback:function(){n.app.workspace.ensureSideLeaf(u0,"right",{active:!0})}}),t.registerViewType(u0,(function(e){return new m0(e)}))},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.initLeaf=function(){var e="right";Zl.isMobile&&(e="left"),this.app.workspace.ensureSideLeaf(u0,e,{reveal:!1})},e}(),u0="tag",h0=[["alphabetical","alphabeticalReverse"],["frequency","frequencyReverse"]],d0={alphabetical:Qf.plugins.tagPane.labelSortByNameAToZ,alphabeticalReverse:Qf.plugins.tagPane.labelSortByNameZToA,frequency:Qf.plugins.tagPane.labelSortByFrequencyHighToLow,frequencyReverse:Qf.plugins.tagPane.labelSortByFrequencyLowToHigh},p0=function(e){function t(t,n){var i=e.call(this)||this;i.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},i.tag="",i.count=-1,i.vChildren=new eI(i),i.pusherEl=uI(),i.tree=t,i.tagView=n;var r=i,o=r.selfEl,a=r.innerEl;return o.addClass("tag-pane-tag"),i.tagTextEl=a.createDiv("tree-item-inner-text"),i.tagCountEl=o.createDiv("tree-item-flair-outer").createSpan("tag-pane-tag-count tree-item-flair"),i.setCollapsible(!0),i.setClickable(!0),i}return f(t,e),t.prototype.onSelfClick=function(e){var t=this.tagView.app,n="tag:"+this.tag,i=t.internalPlugins.getEnabledPluginById("global-search");if(i){var r=i.getGlobalSearchQuery();if(!Ak.isModEvent(e)||""===r)return void i.openGlobalSearch(n);r.contains(n)?i.openGlobalSearch(r.replace(n,"").trim()):i.openGlobalSearch("".concat(r.trim()," ").concat(n)),this.tagView.tree.setFocusedItem(null,!1)}},t.prototype.setTag=function(e){if(this.tag!==e){this.tag=e;var t=this.tagTextEl;e.startsWith("#")&&(e=e.substr(1));var n=e.split("/").last(),i=e.substr(0,e.length-n.length);t.empty(),t.createSpan({cls:"tag-pane-tag-parent",text:i}),t.createSpan({cls:"tree-item-inner-text",text:n})}return this},t.prototype.setCount=function(e){this.count!==e&&(this.count=e,this.tagCountEl.setText(String(e)));return this},t.prototype.onCollapseClick=function(t){e.prototype.onCollapseClick.call(this,t),this.tree.requestSaveFolds()},t.prototype.updateCollapsed=function(t){return g(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return[4,e.prototype.updateCollapsed.call(this,t)];case 1:return r.sent(),this.collapsed||null===(i=(n=this.tree).handleCollapseAll)||void 0===i||i.call(n,!1),this.tree.infinityScroll.invalidate(this),[2]}}))}))},t}(JP),f0=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.getFoldKey=function(){return"tag-pane-fold"},t}(fI),m0=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-tags",n.tagDoms={},n.tagPaneEl=null,n.searchQuery=null,n.sortOrder="frequency",n.useHierarchy=!1,n.isShowingSearch=!1;var i=n.containerEl;n.tagPaneEl=n.containerEl.createDiv("tag-container"),n.scope=new Tk(n.app.scope),n.tree=new f0(n,{app:n.app,containerEl:n.tagPaneEl,id:u0,scope:n.scope,getNodeId:n.getNodeId.bind(n)}),n.emptyEl=createDiv({cls:"pane-empty tag-pane-empty",text:l0.labelNoTags()});var r=new XP(n.app,i);r.addNavButton("lucide-sort-asc",Qf.plugins.fileExplorer.actionChangeSort(),(function(e){e.preventDefault();for(var t=new PA,i=n.sortOrder,r=0,o=h0;r<o.length;r++){for(var a=function(e){var r=d0[e]();t.addItem((function(t){return t.setTitle(r).setChecked(e===i).onClick((function(){n.sortOrder=e,n.requestUpdateTags(),n.app.workspace.requestSaveLayout()}))}))},s=0,l=o[r];s<l.length;s++){a(l[s])}t.addSeparator()}t.showAtMouseEvent(e)})),n.useHierarchyEl=r.addNavButton("lucide-folder-tree",l0.actionShowNestedTags(),(function(){n.setUseHierarchy(!n.useHierarchy),n.app.workspace.requestSaveLayout()})),n.collapseOrExpandAllEl=r.addNavButton("lucide-chevrons-up-down",l0.actionExpandAll(),(function(){n.tree.toggleCollapseAll(),n.app.workspace.requestSaveLayout()})),n.showSearchButtonEl=r.addNavButton("lucide-search",Qf.plugins.backlinks.labelShowSearch(),(function(){n.onToggleShowSearch(),n.app.workspace.requestSaveLayout()}));var o=mc((function(){n.updateSearch(),n.app.workspace.requestSaveLayout()}),300,!0);return n.searchComponent=new WI(r.navHeaderEl).setPlaceholder(Qf.plugins.search.promptStartSearch()).onChange(o).then((function(e){Rx(e.clearButtonEl,Qf.plugins.search.tooltipClearSearch()),e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(Zl.isMobile&&xw(),n.updateSearch())})),e.containerEl.hide()})),n.scope.register([],"Enter",n.onKeyEnterInFocus.bind(n)),n.scope.register(["Mod"],"Enter",n.onKeyEnterInFocus.bind(n)),i.addEventListener("click",(function(){n.tree.setFocusedItem(null)})),n.requestUpdateTags=mc(n.updateTags.bind(n),10),n.setUseHierarchy(!0),n}return f(t,e),t.prototype.getNodeId=function(e){return e.tag.toLowerCase()},t.prototype.isItem=function(e){return e instanceof p0},t.prototype.onKeyEnterInFocus=function(e){e.preventDefault(),this.isItem(this.tree.focusedItem)&&this.tree.focusedItem.onSelfClick(e)},t.prototype.getDisplayText=function(){return l0.shortName()},t.prototype.getViewType=function(){return u0},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.sortOrder=this.sortOrder,t.useHierarchy=this.useHierarchy,t.showSearch=this.isShowingSearch,t.searchQuery=this.searchComponent.getValue(),t},t.prototype.setState=function(t,n){return g(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return s.sent(),i=t.sortOrder,r=t.useHierarchy,o=t.showSearch,a=t.searchQuery,String.isString(i)&&d0.hasOwnProperty(i)&&(this.sortOrder=i),isBoolean(r)&&this.setUseHierarchy(r),isBoolean(o)&&this.setShowSearch(o),String.isString(a)&&(this.searchComponent.setValue(a),this.updateSearch()),this.requestUpdateTags(),[2]}}))}))},t.prototype.onload=function(){this.registerEvent(this.app.metadataCache.on("finished",this.requestUpdateTags,this)),this.requestUpdateTags()},t.prototype.onResize=function(){this.tree.onResize()},t.prototype.setIsAllCollapsed=function(e){this.tree.isAllCollapsed=e,e?(mx(this.collapseOrExpandAllEl,"lucide-chevrons-up-down"),Rx(this.collapseOrExpandAllEl,l0.actionExpandAll())):(mx(this.collapseOrExpandAllEl,"lucide-chevrons-down-up"),Rx(this.collapseOrExpandAllEl,l0.actionCollapseAll()))},t.prototype.onToggleShowSearch=function(){this.setShowSearch(!this.isShowingSearch),this.isShowingSearch&&this.searchComponent.inputEl.focus()},t.prototype.showSearch=function(){this.setShowSearch(!0),this.searchComponent.inputEl.focus()},t.prototype.setShowSearch=function(e){e!==this.isShowingSearch&&(this.isShowingSearch=e,this.searchComponent.containerEl.toggle(e),this.showSearchButtonEl.toggleClass("is-active",e),e||(this.searchComponent.setValue(""),this.updateSearch()))},t.prototype.updateSearch=function(){var e=this.searchComponent.getValue(),t=this.searchQuery;if(!(!t&&!e||t&&t.query===e))try{if(e){var n=new UP(this.app,e,!1);n.matcher?this.searchQuery=n:this.searchQuery=null}else this.searchQuery=null;this.updateTags()}catch(e){console.log(e)}},t.prototype.setUseHierarchy=function(e){this.useHierarchy!==e&&(this.collapseOrExpandAllEl.ariaDisabled=String(!e),this.useHierarchy=e,this.useHierarchyEl.toggleClass("is-active",e),this.requestUpdateTags(),this.app.workspace.requestSaveLayout())},t.prototype.updateTags=function(){var e=this,t=this.app,n=this.tagDoms,i=t.metadataCache.getTags(),r=Object.keys(i),o=this.tagDoms={},a=this.app.loadLocalStorage("tag-pane-fold"),s=new Set(a||null);if(this.tree.root.vChildren.clear(),this.tree.focusedItem=null,r.length>0){this.emptyEl.detach();var l=this.sortOrder,c=null;if("alphabetical"===l)c=function(e,t){return xm(e.tag,t.tag)};else if("alphabeticalReverse"===l)c=function(e,t){return-xm(e.tag,t.tag)};else{var u="frequencyReverse"===l?-1:1;c=function(e,t){var n=e.tag,r=t.tag,o=i[n],a=i[r];return o===a?xm(n,r):u*(a-o)}}var h=this.useHierarchy,d=function(t,n){var i=t.split("/").last();if(h&&i!==t){var r=t.substr(0,t.length-i.length-1),a=r.toLowerCase(),s=o[a];s||((s=new p0(e.tree,e)).setTag(r),o[a]=s),-1===s.vChildren.children.indexOf(n)&&s.vChildren.addChild(n),d(r,s)}else-1===e.tree.root.vChildren.children.indexOf(n)&&e.tree.root.vChildren.addChild(n)};for(var p in n)n.hasOwnProperty(p)&&n[p].vChildren.clear();for(var f=0,m=r;f<m.length;f++){(b=n[p=(y=m[f]).toLowerCase()]||new p0(this.tree,this)).setTag(y),o[p]=b}for(var v=0,g=r;v<g.length;v++){var y;p=(y=g[v]).toLowerCase();d(y,o[p])}for(var p in o)if(o.hasOwnProperty(p)){var b,w=(b=o[p]).vChildren.hasChildren();b.setCollapsible(w),b.setCount(i[b.tag]||0),w&&b.setCollapsed(s.has(p),!1)}if(this.tree.root.vChildren.sort(c),iI(this.tree.root,(function(e){e.el.show(),tI(e)&&e.vChildren.sort(c)})),this.searchQuery){var k=function(t){var n=!!e.searchQuery.matchContent(t.tag);if(!tI(t))return t.el.toggle(n),n;for(var i=!1,r=0,o=t.vChildren.children;r<o.length;r++){var a=o[r],s=k(a);i=i||s}return n=n||i,t.el.toggle(n),n};k(this.tree.root)}}else this.tagPaneEl.appendChild(this.emptyEl);this.tree.infinityScroll.queueCompute()},t}(jP),v0=function(){function e(){this.id="templates",this.name=Qf.plugins.templates.name(),this.description=Qf.plugins.templates.desc(),this.defaultOn=!0,this.app=null,this.plugin=null,this.options={},this.templateFiles=[]}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerRibbonItem(Qf.plugins.templates.actionInsert(),"lucide-files",this.onInsertTemplate.bind(this)),t.registerGlobalCommand({id:"insert-template",name:Qf.plugins.templates.actionInsert(),icon:"lucide-copy",callback:this.onInsertTemplate.bind(this)}),t.registerGlobalCommand({id:"insert-current-date",name:Qf.plugins.templates.actionInsertCurrentDate(),icon:"lucide-calendar-days",editorCallback:this.insertCurrentDate.bind(this)}),t.registerGlobalCommand({id:"insert-current-time",name:Qf.plugins.templates.actionInsertCurrentTime(),icon:"lucide-clock",editorCallback:this.insertCurrentTime.bind(this)})},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{},t.addSettingTab(new y0(e,t,this)),[2]}}))}))},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.insertTemplate=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p;return y(this,(function(f){switch(f.label){case 0:return t=this.app,n=t.workspace,i=t.vault,(r=n.activeEditor)?(o=n.activeEditor,a=o.editor,s=o.file,[4,i.cachedRead(e)]):[2];case 1:if(l=J$(l=f.sent(),{title:null!==(p=null==s?void 0:s.basename)&&void 0!==p?p:""},{dateFormat:this.options.dateFormat,timeFormat:this.options.timeFormat}),0===(c=a.getCursor("from")).line&&0===c.ch)return a.replaceSelection(l),[2];try{d=xL(l),u=d.content,h=d.frontmatter}catch(e){return new JA(Qf.plugins.templates.msgFailInvalidTemplateProperties()),[2]}return a.replaceSelection(u),h&&r instanceof LY&&r.metadataEditor.insertProperties(h),[2]}}))}))},e.prototype.onInsertTemplate=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a=this;return y(this,(function(s){return t=(e=this).app,n=e.options,(i=n.folder)&&String.isString(i)?(r=tu(Gc(i).normalize("NFC")),(o=t.vault.getAbstractFileByPath(r))&&o instanceof kw?o.isRoot()?(new JA(Qf.plugins.templates.msgFailInvalidFolder()),[2]):(this.templateFiles=[],Cw.recurseChildren(o,(function(e){e instanceof ww&&"md"===e.extension&&a.templateFiles.push(e)})),this.templateFiles.sort((function(e,t){return xm(e.path,t.path)})),new g0(t,this,r).open(),[2]):(new JA(Qf.plugins.templates.msgFailFolderNotFound({folderOption:i})),[2])):(new JA(Qf.plugins.templates.msgNoFolderSet()),[2])}))}))},e.prototype.insertCurrentDate=function(e){var t=this.options.dateFormat||$$,n=window.moment().format(t);this.insertText(e,n)},e.prototype.insertCurrentTime=function(e){var t=this.options.timeFormat||Q$,n=window.moment().format(t);this.insertText(e,n)},e.prototype.insertText=function(e,t){var n=e.getCursor("head");e.transaction({changes:[{text:t,from:n}],selection:{from:Lm(n,t.length)}})},e}(),g0=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.emptyStateText=Qf.plugins.templates.msgNoTemplatesFound(),r.templatePlugin=null,r.sourcePath="",r.templatePlugin=n,r.sourcePath=i,r.setInstructions([{command:"â†‘â†“",purpose:Qf.plugins.templates.instructionNavigate()},{command:"â†µ",purpose:Qf.plugins.templates.instructionInsert()},{command:"esc",purpose:Qf.plugins.templates.instructionDismiss()}]),r.setPlaceholder(Qf.plugins.templates.promptTypeTemplate()),r.scope.register(null,"Tab",(function(){return!1})),r}return f(t,e),t.prototype.getItems=function(){return this.templatePlugin.templateFiles},t.prototype.onChooseItem=function(e){this.templatePlugin.insertTemplate(e)},t.prototype.getItemText=function(e){return $c(e.path).slice(this.sourcePath.length+1)},t}(dV),y0=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new NI(t).setName(Qf.plugins.templates.optionTemplateFolderLocation()).setDesc(Qf.plugins.templates.optionTemplateFolderLocationDescription()).addText((function(t){t.setPlaceholder(Qf.setting.folderPathExamplePlaceholder()).setValue(n.folder).onChange((function(t){n.folder=t.trim(),e.plugin.saveData(n)})),new oZ(e.app,t.inputEl,(function(e){return"/"!==e.path}))}));var i=document.createDocumentFragment();i.appendText(Qf.plugins.templates.optionTemplateDateFormatDescription(Wf)),i.createEl("br"),i.appendText(Qf.plugins.templates.optionTemplateDateFormatDescription2(Wf)),i.createEl("br"),i.appendText(Qf.plugins.dailyNotes.labelReferToSyntax()),i.createEl("a",{text:Qf.plugins.dailyNotes.labelSyntaxLink(),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),i.createEl("br"),i.appendText(Qf.plugins.dailyNotes.labelSyntaxLivePreview());var r=i.createEl("b","u-pop");new NI(t).setName(Qf.plugins.templates.optionTemplateDateFormat()).setDesc(i).addMomentFormat((function(t){return t.setSampleEl(r).setDefaultFormat($$).setValue(n.dateFormat).onChange((function(t){n.dateFormat=t.trim(),e.plugin.saveData(n)}))}));var o=document.createDocumentFragment();o.appendText(Qf.plugins.templates.optionTemplateTimeFormatDescription(Wf)),o.createEl("br"),o.appendText(Qf.plugins.templates.optionTemplateTimeFormatDescription2(Wf)),o.createEl("br"),o.appendText(Qf.plugins.dailyNotes.labelReferToSyntax()),o.createEl("a",{text:Qf.plugins.dailyNotes.labelSyntaxLink(),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),o.createEl("br"),o.appendText(Qf.plugins.dailyNotes.labelSyntaxLivePreview());var a=o.createEl("b","u-pop");new NI(t).setName(Qf.plugins.templates.optionTemplateTimeFormat()).setDesc(o).addMomentFormat((function(t){return t.setSampleEl(a).setDefaultFormat(Q$).setValue(n.timeFormat).onChange((function(t){n.timeFormat=t.trim(),e.plugin.saveData(n)}))}))},t}(aY),b0="YYYYMMDDHHmm",w0=Qf.plugins.uniqueNoteCreator,k0=function(){function e(){this.id="zk-prefixer",this.name=w0.name(),this.description=w0.desc(),this.app=null,this.plugin=null,this.options={}}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerRibbonItem(w0.actionCreateNote(),"sheets-in-box",this.onCreateNote.bind(this)),t.registerGlobalCommand({id:"zk-prefixer",name:w0.actionCreateNote(),icon:"box-glyph",callback:this.onCreateNote.bind(this)})},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{},t.addSettingTab(new C0(e,t,this)),[2]}}))}))},e.prototype.onExternalSettingsChange=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.plugin.loadData()];case 1:return e.options=t.sent()||{},[2]}}))}))},e.prototype.onCreateNote=function(e){return g(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g,b,w,k,C,M,E,S,x;return y(this,(function(y){switch(y.label){case 0:if(n=(t=this).app,i=t.options,r=n.vault.getAllLoadedFiles(),o=function(e){for(var t=!1,n=0,i=r;n<i.length;n++){var o=i[n];if(o instanceof ww&&o.name.startsWith(e)){t=!0;break}}return t},a=window.moment(),s=this.getFormat(),l=a.format(s),o(l)){for(c="",u=0,h=["m","h","d","w","M","y"];u<h.length;u++)if(d=h[u],(f=a.clone().add(1,d).format(s))!==l){c=d;break}if(!c)return new JA(w0.msgFailedToGenerate({format:s})),[2];for(p=a.clone();;)if(f=p.add(1,c).format(s),!o(f)){l=f;break}}if(m=this.app.workspace.getLeaf(Ak.isModEvent(e||this.app.lastEvent)),(g=i.folder)&&String.isString(g)){if(b=tu(Gc(g).normalize("NFC")),!((w=n.vault.getAbstractFileByPath(b))instanceof kw))return new JA(w0.msgFolderNotFound({folderOption:g})),[2];v=w}else v=n.fileManager.getNewFileParent("",l);y.label=1;case 1:return y.trys.push([1,7,,8]),(C=i.template)?(M=n.metadataCache.getFirstLinkpathDest(C,""))?[4,n.vault.cachedRead(M)]:(new JA(w0.msgTemplateFileNotFound({template:C})),[2]):[3,4];case 2:return E=y.sent(),S=J$(E,{title:l},{}),[4,n.fileManager.createNewMarkdownFile(v,l,S)];case 3:return k=y.sent(),[3,6];case 4:return[4,n.fileManager.createNewMarkdownFile(v,l)];case 5:k=y.sent(),y.label=6;case 6:return[3,8];case 7:return x=y.sent(),new JA(x.toString()),[2];case 8:return[4,m.openFile(k,{active:!0,state:{mode:"source"},eState:{rename:"end"}})];case 9:return y.sent(),[2]}}))}))},e.prototype.getFormat=function(){var e=this.options.format;return e&&String.isString(e)?e:b0},e}(),C0=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new NI(t).setName(w0.optionNewFileLocation()).setDesc(w0.optionNewFileLocationDescription()).addText((function(t){t.setPlaceholder(Qf.setting.folderPathExamplePlaceholder()).setValue(n.folder).onChange((function(t){n.folder=t.trim(),e.plugin.saveData(n)})),new rZ(e.app,t.inputEl,!1,!0)})),new NI(t).setName(w0.optionTemplateFile()).setDesc(w0.optionTemplateFileDescription()).addText((function(t){t.setPlaceholder(w0.optionTemplateFilePlaceholder()).setValue(n.template).onChange((function(t){n.template=t.trim(),e.plugin.saveData(n)})),new eQ(e.app,t.inputEl)}));var i=document.createDocumentFragment();i.appendText(Qf.plugins.dailyNotes.labelReferToSyntax()),i.createEl("a",{text:Qf.plugins.dailyNotes.labelSyntaxLink(),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),i.createEl("br"),i.appendText(Qf.plugins.dailyNotes.labelSyntaxLivePreview());var r=i.createEl("b","u-pop");new NI(t).setName(w0.optionIdFormat()).setDesc(i).addMomentFormat((function(t){return t.setSampleEl(r).setDefaultFormat(b0).setValue(n.format).onChange((function(t){n.format=t.trim(),e.plugin.saveData(n)}))}))},t}(aY);var M0="\nlet pattern = /(?:[0-9]+(?:(?:,|\\.)[0-9]+)*|[\\-'â€™".concat(YL.source,"à®€-à¯¿ê°€-íž£ê¥ -ê¥¼íž°-íŸ†])+|[").concat(/\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u4E00-\u9FD5\uAC00-\uD7A3\uA960-\uA97C\uD7B0-\uD7C6/.source,"]/g;\nfunction countWords(str) {\n\tpattern.lastIndex = 0;\n\tlet m = str.match(pattern);\n\treturn m ? m.length : 0;\n}\n\nself.onmessage = function (e) {\n\ttry {\n\t\tself.postMessage(countWords(e.data));\n\t} catch (e) {\n\t\tconsole.error('WordCount', e);\n\t}\n};\n");function E0(e){var t=vS(e);return t.exists?e.slice(t.contentStart):e}var S0=function(){function e(){this.id="word-count",this.name=Qf.plugins.wordCount.name(),this.description=Qf.plugins.wordCount.desc(),this.defaultOn=!0,this.worker=null,this.wordEl=null,this.charEl=null,this.mobileInfoEl=null,this.wordCount=0,this.charCount=0,this.requestWordCount=mc(this.countWords,200)}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerStatusBarItem(),t.registerMobileFileInfo(this.updateMobileFileInfo.bind(this))},e.prototype.onEnable=function(e,t){return g(this,void 0,void 0,(function(){var n;return y(this,(function(i){return t.registerEvent(e.workspace.on("file-open",this.onFileOpen,this)),t.registerEvent(e.workspace.on("quick-preview",this.onQuickPreview,this)),t.registerEvent(e.workspace.on("editor-selection-change",this.onSelection,this)),this.worker=function(e,t){return new Worker(URL.createObjectURL(new Blob([e],{type:"text/javascript"})),t)}(M0),this.worker.onmessage=this.onMessage.bind(this),(n=t.statusBarEl)&&(n.empty(),this.wordEl=n.createSpan({cls:"status-bar-item-segment",text:""}),this.charEl=n.createSpan({cls:"status-bar-item-segment",text:""}),n.hide()),[2]}))}))},e.prototype.onDisable=function(){this.worker.terminate(),this.worker=null,this.wordEl=null,this.charEl=null},e.prototype.onFileOpen=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e="",t=!1,(n=this.app.workspace.getActiveFileView())&&n.file&&("md"===n.file.extension||n instanceof Z_&&n.isPlaintext)?(i="md"===n.file.extension,[4,this.app.vault.cachedRead(n.file)]):[3,2];case 1:r=o.sent(),e=i?E0(r):r,t=!0,o.label=2;case 2:return this.plugin.statusBarEl.toggle(t),this.updateCount(e),[2]}}))}))},e.prototype.onSelection=function(e,t){var n=t.editor.getSelection();n?this.updateCount(n):this.onFileOpen()},e.prototype.onQuickPreview=function(e,t){if(this.app.workspace.getActiveFile()===e){var n=E0(t);this.updateCount(n)}},e.prototype.countWords=function(e){e?this.worker.postMessage(e):(this.wordCount=0,this.updateMobileFileInfo(),this.updateDisplay())},e.prototype.onMessage=function(e){this.wordCount=e.data,this.updateMobileFileInfo(),this.updateDisplay()},e.prototype.updateCount=function(e){this.charCount=e.length,this.requestWordCount(e)},e.prototype.updateMobileFileInfo=function(e){if(e?this.mobileInfoEl=e:e=this.mobileInfoEl,e){var t=Qf.nouns.wordWithCount({count:this.wordCount}),n=Qf.nouns.characterWithCount({count:this.charCount}),i=Qf.plugins.fileExplorer.tooltipFoldersFilesCount({fileCount:t,folderCount:n});e.setText(i)}},e.prototype.updateDisplay=function(){var e=this.charEl,t=this.wordEl;null==e||e.setText(Qf.nouns.characterWithCount({count:this.charCount})),null==t||t.setText(Qf.nouns.wordWithCount({count:this.wordCount}))},e}(),x0=Qf.plugins.workspaces,T0=function(){function e(){this.id="workspaces",this.name=x0.name(),this.description=x0.desc(),this.workspaces={},this.activeWorkspace=""}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerGlobalCommand({id:"workspaces:load",name:x0.actionLoadLayout(),icon:"lucide-layout",callback:this.onLoad.bind(this)}),t.registerGlobalCommand({id:"workspaces:save",name:x0.actionSave(),icon:"lucide-save",callback:this.onSave.bind(this)}),t.registerGlobalCommand({id:"workspaces:save-and-load",name:x0.actionSaveAndLoadLayout(),icon:"lucide-layout",callback:this.onSaveAndLoad.bind(this)}),t.registerRibbonItem(x0.actionManageLayouts(),"lucide-layout",this.onOpenModal.bind(this)),t.registerGlobalCommand({id:"workspaces:open-modal",name:x0.actionManageLayouts(),icon:"lucide-layout",callback:this.onOpenModal.bind(this)})},e.prototype.onEnable=function(e,t){return g(this,void 0,Promise,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return[4,t.loadData()];case 1:return e=n.sent()||{},this.workspaces=e.workspaces||{},this.activeWorkspace=e.active||"",[2]}}))}))},e.prototype.onDisable=function(e,t){return g(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.saveData()];case 1:return e.sent(),[2]}}))}))},e.prototype.onOpenModal=function(){new D0(this.app,this).open()},e.prototype.onLoad=function(){return new A0(this.app,this,!1).open(),!1},e.prototype.onSave=function(){var e=this.activeWorkspace,t=this.workspaces;e?t[e]&&(this.saveWorkspace(e),new JA(x0.msgSaveLayoutSuccess({name:e}))):new D0(this.app,this).open()},e.prototype.onSaveAndLoad=function(){return new A0(this.app,this,!0).open(),!1},e.prototype.saveWorkspace=function(e){var t=this.app.workspace.getLayout();t.mtime=window.moment().format(),this.workspaces[e]=t,this.saveData()},e.prototype.setActiveWorkspace=function(e){this.activeWorkspace=e,this.saveData()},e.prototype.loadWorkspace=function(e){var t=this.workspaces[e];t&&(this.activeWorkspace=e,this.app.workspace.changeLayout(t),this.saveData())},e.prototype.deleteWorkspace=function(e){return g(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return delete this.workspaces[e],[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},e.prototype.saveData=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.plugin.saveData({workspaces:this.workspaces,active:this.activeWorkspace})];case 1:return e.sent(),[2]}}))}))},e}(),D0=function(e){function t(t,n){var i=e.call(this,t)||this;return i.plugin=n,i.titleEl.setText(x0.actionManageLayouts()),i.contentEl.createDiv("list-item",(function(e){var t=i.nameEl=e.createEl("input",{cls:"list-item-part mod-extended",type:"text"});t.placeholder=x0.placeholderSaveCurrentLayoutAs(),t.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||i.onFinish()}));var n=e.createEl("button",{cls:"list-item-part",text:x0.buttonSave()});n.addEventListener("mousedown",(function(e){return e.preventDefault()})),n.addEventListener("click",i.onFinish.bind(i))})),i.listContainerEl=i.contentEl.createDiv("list-container mod-manage-workspaces"),i.renderList(),i}return f(t,e),t.prototype.onOpen=function(){this.nameEl.focus()},t.prototype.renderList=function(){var e=this,t=this.listContainerEl,n=this.plugin,i=n.workspaces;t.empty();var r=function(r){if(!i.hasOwnProperty(r))return"continue";var o=i[r];t.createDiv("list-item",(function(t){t.createDiv("list-item-part mod-extended",(function(t){t.createSpan({text:r}),r===e.plugin.activeWorkspace&&t.createSpan({cls:"flair mod-pop",text:Qf.setting.appearance.labelCurrentlyActive()}),t.createDiv("list-item-desc",(function(e){if(o.mtime){var t=window.moment(o.mtime);e.createDiv({cls:"list-item-part",text:x0.labelWorkspaceModifiedTime({time:t.fromNow()})})}}))})),t.createDiv("list-item-actions",(function(t){t.createEl("button",{cls:"list-item-part",text:x0.buttonLoad()},(function(t){t.addEventListener("click",(function(){n.loadWorkspace(r),e.close()}))})),t.createDiv("list-item-part clickable-icon",(function(t){mx(t,"lucide-x"),Rx(t,x0.tooltipDeleteLayout()),t.addEventListener("mousedown",(function(e){return e.preventDefault()})),t.addEventListener("click",(function(){return g(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,n.deleteWorkspace(r)];case 1:return e.sent(),this.renderList(),[2]}}))}))}))}))}))}))};for(var o in this.plugin.workspaces)r(o)},t.prototype.onFinish=function(){var e=this.nameEl.value.trim();e?(this.plugin.saveWorkspace(e),this.plugin.setActiveWorkspace(e),new JA(x0.msgSaveLayoutSuccess({name:e})),this.nameEl.value="",this.renderList()):new JA(x0.msgEnterName())},t}(ZA),A0=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.emptyStateText=x0.labelNoLayoutFound(),r.plugin=n,r.shouldSave=i,r.setPlaceholder(x0.placeholderTypeToSearchLayouts()),r.setInstructions([{command:"â†‘â†“",purpose:Qf.plugins.commandPalette.instructionNavigate()},{command:"â†µ",purpose:Qf.plugins.commandPalette.instructionUse()},{command:"esc",purpose:Qf.plugins.commandPalette.instructionDismiss()}]),r}return f(t,e),t.prototype.getItems=function(){return Object.keys(this.plugin.workspaces)},t.prototype.getEmptySearchItems=function(){return this.getItems()},t.prototype.getItemText=function(e){return e},t.prototype.renderSuggestion=function(e,t){var n=e.item;jL(t,this.getItemText(n),e.match?e.match.matches:null),n===this.plugin.activeWorkspace&&t.createSpan({cls:"flair mod-pop",text:Qf.setting.appearance.labelCurrentlyActive()})},t.prototype.onChooseItem=function(e){if(this.shouldSave){var t=this.plugin,n=t.workspaces,i=t.activeWorkspace;i&&n[i]&&this.plugin.saveWorkspace(i)}this.plugin.loadWorkspace(e)},t}(dV),L0=function(){function e(e,t){this.app=e,this.containerEl=t}return e.prototype.registerStatusBarItem=function(){return this.containerEl.createDiv("status-bar-item")},e}();function P0(e){return e.replace(/["]/g,"").split(",").map((function(e){return e.trim()})).filter((function(e){return e}))}function I0(e){return e.map((function(e){return e.contains(" ")?'"'.concat(e,'"'):e})).join(", ")}function F0(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return""===e?[2,!0]:[4,(t=document.fonts).ready];case 1:return n.sent(),[2,t.check('12px "'.concat(e,'"'))]}}))}))}var O0=Qf.setting.appearance,B0=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;o.setTitle(n),o.values=i,o.descEl=o.contentEl.createDiv(),o.fontListEl=o.contentEl.createDiv("setting-font-list");var a=null,s=null,l=null,c=function(){var e=l.getValue();e&&!o.values.contains(e)&&(o.values.push(e),o.display()),l.setValue(""),a.extraSettingsEl.hide()};return new NI(o.contentEl).setName(O0.labelFontName()).addExtraButton((function(e){return e.setIcon("lucide-alert-circle").setTooltip(O0.msgFontNotFound()).then((function(e){a=e,e.extraSettingsEl.addClass("mod-warning"),e.extraSettingsEl.hide()}))})).addText((function(e){l=e,e.setPlaceholder(O0.optionFontPlaceholder()),e.onChange((function(e){return g(o,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,F0(e)];case 1:return t=n.sent(),a.extraSettingsEl.toggle(!t),[2]}}))}))}));var n=e.inputEl;n.addEventListener("focus",(function(){o.modalEl.style.transition="unset",Pl((function(){o.modalEl.style.transition=""})),s||((s=new N0(t,n)).onSelect((function(e,t){c(),t.instanceOf(MouseEvent)&&n.blur()})),z0.then((function(){s.onInputChange()})))})),n.addEventListener("keydown",(function(e){e.isComposing||"Enter"===e.key&&c()}))})).addButton((function(e){return e.setButtonText(Qf.interface.buttonAdd()).onClick(c)})),o.addButton("mod-cta",Qf.dialogue.buttonSave(),(function(){o.close(),r(o.values)})),o.addCancelButton(),o}return f(t,e),t.prototype.onOpen=function(){this.display()},t.prototype.display=function(){var e=this,t=this,n=t.fontListEl,i=t.descEl,r=t.values;0===r.length?i.setText(O0.labelNoCustomFontSet()):i.setText(O0.labelFontApplied()),n.empty();for(var o=function(t){n.createDiv("mobile-option-setting-item",(function(i){i.createSpan({cls:"mobile-option-setting-item-name",text:t}).style.fontFamily=t;var o=i.createSpan("mobile-option-setting-item-option-icon");F0(t).then((function(e){e?(o.addClass("mod-success"),mx(o,"lucide-check-circle-2"),Rx(o,O0.msgFontFound())):(o.addClass("mod-warning"),mx(o,"lucide-alert-circle"),Rx(o,O0.msgFontNotFound()))})),i.createDiv("clickable-icon mobile-option-setting-item-option-icon",(function(n){mx(n,"lucide-x"),Rx(n,Qf.interface.deleteActionShortName()),n.addEventListener("click",(function(){r.remove(t),e.display()}))})),i.createDiv("clickable-icon mobile-option-setting-item-option-icon mobile-option-setting-drag-icon",(function(o){mx(o,"lucide-menu"),Rx(o,Qf.interface.dragToRearrange()),Hc(i,i,n,5,(function(){return null}),(function(n){r.remove(t),r.splice(n,0,t),e.display()}))}))}))},a=0,s=r;a<s.length;a++){o(s[a])}},t}(XA),N0=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.fonts=function(){var e=this;if(H0)return H0;H0=["Inter","Source Code Pro"];var t=function(t,n){return g(e,void 0,void 0,(function(){var e,i,r,o;return y(this,(function(a){switch(a.label){case 0:e=0,i=0,r=n,a.label=1;case 1:return i<r.length?(o=r[i],V0.has(o)?[3,3]:(V0.add(o),t.check('12px "'.concat(o,'"'))&&H0.push(o),++e%10!=0?[3,3]:[4,new Promise((function(e){return Sc(e,0)}))])):[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return H0.sort(),[2]}}))}))};return z0=function(){return g(e,void 0,void 0,(function(){var e,n,i;return y(this,(function(r){switch(r.label){case 0:return[4,(e=document.fonts).ready];case 1:if(r.sent(),n=[],!Zl.isDesktopApp)return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,Mf("get-fonts").getFonts()];case 3:return i=r.sent(),n.push(t(e,i)),[3,5];case 4:return r.sent(),[3,5];case 5:if(!Zl.isMobileApp)return[3,9];r.label=6;case 6:return r.trys.push([6,8,,9]),[4,pA.getFonts()];case 7:return i=r.sent().fonts,n.push(t(e,i)),[3,9];case 8:return r.sent(),[3,9];case 9:return n.push(t(e,R0)),[4,Promise.all(n)];case 10:return r.sent(),[2]}}))}))}(),H0}(),i}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.setText(e),t.style.fontFamily=e},t.prototype.getSuggestions=function(e){var t=[];(e=e.toLowerCase())||t.push("Inter");for(var n=0,i=this.fonts;n<i.length;n++){var r=i[n];r.toLowerCase().contains(e)&&t.push(r)}return t},t.prototype.selectSuggestion=function(t,n){this.setValue(t),this.textInputEl.trigger("input"),this.close(),e.prototype.selectSuggestion.call(this,t,n)},t}(AF),R0=["Arial","Arial Black","Bahnschrift","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Ebrima","Franklin Gothic Medium","Gabriola","Gadugi","Georgia","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Sans Unicode","Malgun Gothic","Marlett","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Mongolian Baiti","MS Gothic","MV Boli","Myanmar Text","Nirmala UI","Palatino Linotype","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Historic","Segoe UI Emoji","Segoe UI Symbol","SimSun","Sitka","Sylfaen","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Copperplate","Courier","Courier New","Didot","DIN Alternate","DIN Condensed","Futura","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","Impact","Lucida Grande","Luminari","Marker Felt","Menlo","Microsoft Sans Serif","Monaco","Noteworthy","Optima","Palatino","Papyrus","Phosphate","Rockwell","Savoye LET","SignPainter","Skia","Snell Roundhand","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Zapfino"],H0=null,V0=new Set,z0=Promise.resolve();function q0(e){return String.fromCharCode.apply(String,Array.from(e))}function U0(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function _0(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}var W0=["ic07","ic13","ic08","ic14","ic09","ic10"];var j0=[137,80,78,71,13,10,26,10],G0=[73,72,68,82];var K0=Qf.setting.appearance,Y0=[{id:"obsidian",nameI18n:"dark-theme"},{id:"moonstone",nameI18n:"light-theme"},{id:"system",nameI18n:"system-theme"}],Z0=function(e){function t(t){var n=e.call(this,t)||this;return n.modalEl.addClass("mod-lg"),n.setTitle(Qf.setting.appearance.labelModalConfiguration()),n}return f(t,e),t.prototype.onOpen=function(){this.render()},t.prototype.render=function(){var e=this,t=this.contentEl,n=this.app.workspace.leftRibbon;if(t.empty(),Zl.isPhone){var i,r=new NI(t).setName(Qf.setting.appearance.optionMobileQuickRibbonItem()).setDesc(Qf.setting.appearance.optionMobileQuickRibbonItemDesc()),o=this.app.vault.getConfig("mobileQuickRibbonItem");r.addExtraButton((function(e){mx(i=e.extraSettingsEl,"lucide-menu")})),r.addDropdown((function(t){t.addOption("",K0.optionMobileQuickRibbonDefault());for(var r=0,a=n.items;r<a.length;r++){var s=a[r];t.addOption(s.id,s.title),s.id===o&&(t.setValue(o),mx(i,s.icon))}t.onChange((function(t){e.app.vault.setConfig("mobileQuickRibbonItem",t),e.render()}))})),t.createEl("hr")}t.createEl("p",{text:Qf.setting.appearance.labelModalConfigurationDesc()});for(var a=t.createDiv(""),s=function(t){var i=a.createDiv("mobile-option-setting-item");if(t.hidden)return i.hide(),"continue";i.createSpan("mobile-option-setting-item-remove-icon",(function(i){mx(i,"lucide-minus-circle"),i.addEventListener("click",(function(){t.hidden=!0,n.onChange(!0),e.render()}))})),i.createSpan("mobile-option-setting-item-option-icon",(function(e){return mx(e,t.icon)})),i.createSpan({cls:"mobile-option-setting-item-name",text:t.title}),i.createDiv("clickable-icon mobile-option-setting-item-option-icon mobile-option-setting-drag-icon",(function(e){mx(e,"lucide-menu"),Rx(e,Qf.interface.dragToRearrange()),Hc(e,i,a,5,(function(){return null}),(function(e){n.items.remove(t),n.items.splice(e,0,t),n.onChange(!0)}))}))},l=0,c=n.items;l<c.length;l++){s(c[l])}var u=n.items.filter((function(e){return e.hidden}));if(u.length>0){new NI(t).setName(Qf.setting.appearance.labelAdditionalRibbonItems()).setHeading();for(var h=t.createDiv(""),d=function(t){h.createDiv("mobile-option-setting-item",(function(i){i.createSpan("mobile-option-setting-item-add-icon",(function(i){mx(i,"lucide-plus-circle"),i.addEventListener("click",(function(){t.hidden=!1,n.onChange(!0),e.render()}))})),i.createSpan("mobile-option-setting-item-option-icon",(function(e){return mx(e,t.icon)})),i.createSpan({cls:"mobile-option-setting-item-name",text:t.title})}))},p=0,f=u;p<f.length;p++){d(f[p])}}t.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:Qf.dialogue.buttonDone()},(function(t){t.addEventListener("click",e.close.bind(e))}))}))},t}(ZA),X0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=K0.name(),t.id="appearance",t}return f(t,e),t.prototype.display=function(){return g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,b,w,k,C,M,E,S,x,T,D,A,L,P,I,F,O,B,N=this;return y(this,(function(R){for(t=(e=this).containerEl,n=e.app,t.empty(),i=n.customCss,new NI(t).setName(K0.optionBaseTheme()).setDesc(K0.optionBaseThemeDescription()).addDropdown((function(e){e.onChange((function(e){n.changeTheme(e)}));for(var t=0,i=Y0;t<i.length;t++){var r=i[t];e.addOption(r.id,K0(r.nameI18n))}e.setValue(n.vault.getConfig("theme"))})),new NI(t).setName(K0.optionAccentColor()).setDesc(K0.optionAccentColorDescription()).setClass("mod-toggle").addExtraButton((function(e){return e.setIcon("lucide-rotate-ccw").setTooltip(Qf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){n.vault.setConfig("accentColor",""),r.value=n.getAccentColor()}))})).addColorPicker((function(e){r=e.colorPickerEl,e.setValue(n.getAccentColor()),e.onChange((function(e){n.vault.setConfig("accentColor",e)}))})),o=new NI(t).setName(K0.optionThemes()).setDesc(K0.optionManageThemesDescription()),Zl.isDesktopApp&&o.addExtraButton((function(e){return e.setIcon("lucide-folder-open").setTooltip(K0.buttonOpenThemesFolder()).onClick((function(){return g(N,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.app.vault,t=i.getThemeFolder(),[4,e.exists(t)];case 1:return n.sent()?[3,3]:[4,e.createFolder(t)];case 2:n.sent(),n.label=3;case 3:return this.app.openWithDefaultApp(t),[2]}}))}))}))})),o.addDropdown((function(e){return e.then((function(e){var t=N.app.customCss;for(var n in e.addOption("",Qf.setting.appearance.labelDefaultTheme()),t.themes)e.addOption(n,n);for(var i=0,r=t.oldThemes;i<r.length;i++){n=r[i];t.themes.hasOwnProperty(n)||e.addOption(n,n+" (Legacy)")}var o=t.themes.hasOwnProperty(t.theme)?t.theme:"";e.setValue(o)})).onChange((function(e){N.app.customCss.setTheme(e)}))})),o.addButton((function(e){return e.setButtonText(K0.optionThemeButtonManage()).setCta().onClick((function(){new BK(n,!1,(function(){N.display()})).open()}))})),a=Object.keys(i.themes).length+i.oldThemes.length,s=Object.keys(i.updates).length,new NI(t).setName(K0.labelCurrentThemes()).setDesc(K0.labelCurrentlyInstalled({count:a})+" "+(s>0?K0.msgUpdatesFound({count:s}):"")).then((function(e){s>0?(e.addButton((function(e){return e.setButtonText(K0.buttonViewUpdates()).onClick((function(){new BK(n,!0,(function(){N.display()})).open()}))})),e.addButton((function(e){return e.setCta().setButtonText(K0.buttonUpdateAllThemes()).onClick((function(){return zw(N.containerEl,(function(){return g(N,void 0,void 0,(function(){var e,t,n;return y(this,(function(r){switch(r.label){case 0:e=0,t=Object.values(i.updates),r.label=1;case 1:return e<t.length?(n=t[e],[4,i.installTheme(n.themeInfo,n.version)]):[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return this.display(),[2]}}))}))}))}))}))):a>0&&e.addButton((function(e){return e.setCta().setButtonText(K0.buttonCheckForUpdates()).onClick((function(){return g(N,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,zw(this.containerEl,(function(){return i.checkForUpdates()}))];case 1:return e.sent(),this.display(),[2]}}))}))}))}))})),new NI(t).setHeading().setName(K0.optionFont()),l=function(e,i,r){var o=function(){var e=P0(n.vault.getConfig(r)),t=createFragment();if(t.appendText(i),1===e.length){var o=e[0];t.createSpan({text:K0.labelSingleFontCurrentlyInEffect()}),t.createSpan({text:o,cls:"u-pop"})}else if(e.length>1){t.createSpan({text:K0.labelMultipleFontsCurrentlyInEffect()});for(var s=t.createEl("ul"),l=function(e){var t=s.createEl("li","");t.createSpan({text:e}),F0(e).then((function(e){e||(t.appendText(" "),t.createSpan("mod-warning",(function(e){mx(e,"lucide-alert-circle"),Rx(e,Qf.setting.appearance.msgFontNotFound())})))}))},c=0,u=e;c<u.length;c++){l(o=u[c])}}a.setDesc(t)},a=new NI(t).setName(e).addButton((function(t){return t.setButtonText(K0.optionThemeButtonManage()).onClick((function(){new B0(n,e,P0(n.vault.getConfig(r)),(function(e){n.vault.setConfig(r,e.join(",")),o()})).open()}))}));o()},l(K0.optionInterfaceFont(),K0.optionInterfaceFontDescription(),"interfaceFontFamily"),l(K0.optionTextFont(),K0.optionTextFontDescription(),"textFontFamily"),l(K0.optionMonospaceFont(),K0.optionMonospaceFontDescription(),"monospaceFontFamily"),h=aw.baseFontSize,d=function(e){return c.extraSettingsEl.toggleVisibility(e!==h)},new NI(t).setName(K0.optionFontSize()).setDesc(K0.optionFontSizeDescription()).addExtraButton((function(e){return c=e.setIcon("lucide-rotate-ccw").setTooltip(Qf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){u.setValue(h)}))})).addSlider((function(e){return u=e.setLimits(10,30,1).setDynamicTooltip().setValue(n.vault.getConfig("baseFontSize")).onChange((function(e){n.vault.setConfig("baseFontSize",e),d(e)}))})),d(u.getValue()),new NI(t).setName(K0.optionFontSizeAction()).setDesc(K0.optionFontSizeActionDescription()).addToggle((function(e){return e.setValue(n.vault.getConfig("baseFontSizeAction")).onChange((function(e){n.vault.setConfig("baseFontSizeAction",e)}))})),new NI(t).setHeading().setName(K0.optionInterface()),new NI(this.containerEl).setName(Qf.setting.editor.optionShowInlineTitle()).setDesc(Qf.setting.editor.optionShowInlineTitleDescription()).addToggle((function(e){return e.setValue(N.app.vault.getConfig("showInlineTitle")).onChange((function(e){n.vault.setConfig("showInlineTitle",e)}))})),Zl.isPhone||new NI(t).setName(Qf.setting.appearance.optionShowViewHeader()).setDesc(Qf.setting.appearance.optionShowViewHeaderDesc()).addToggle((function(e){return e.setValue(n.vault.getConfig("showViewHeader")).onChange((function(e){n.vault.setConfig("showViewHeader",e)}))})),Zl.canDisplayRibbon&&new NI(t).setName(Qf.setting.appearance.optionShowRibbon()).setDesc(Qf.setting.appearance.optionShowRibbonDesc()).addToggle((function(e){return e.setValue(n.vault.getConfig("showRibbon")).onChange((function(e){n.vault.setConfig("showRibbon",e),N.display()}))})),(Zl.isMobile||n.vault.getConfig("showRibbon"))&&new NI(t).setName(Qf.setting.appearance.optionConfigureRibbon()).setDesc(Qf.setting.appearance.optionConfigureRibbonDesc()).addButton((function(e){return e.setButtonText(Qf.dialogue.buttonManage()).onClick((function(){new Z0(N.app).open()}))})),Zl.isDesktopApp&&new NI(t).setHeading().setName(K0.optionAdvanced()),Zl.isDesktopApp&&new NI(t).setName(K0.optionZoomLevel()).setDesc(K0.optionZoomLevelDescription()).addExtraButton((function(e){return e.setIcon("lucide-rotate-ccw").setTooltip(Qf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){electron.webFrame.setZoomLevel(0),p.setValue(0)}))})).addSlider((function(e){p=e.setLimits(-2.5,3,.5).setDynamicTooltip().setValue(electron.webFrame.getZoomLevel()).onChange((function(e){return electron.webFrame.setZoomLevel(e)})),e.getValuePretty=function(){return"".concat(Math.round(100*Math.pow(1.2,e.getValue())),"%")}})),Zl.isDesktopApp&&new NI(t).setName(Qf.setting.appearance.optionNativeMenus()).setDesc(Qf.setting.appearance.optionNativeMenusDesc()).addToggle((function(e){return e.setValue(PA.useNativeMenu).onChange((function(e){n.vault.setConfig("nativeMenus",e)}))})),Zl.isDesktopApp&&(m=electron.ipcRenderer.sendSync("frame"),new NI(t).setName(K0.optionFrameStyle()).setDesc(K0.optionFrameDescription()).addButton((function(e){f=e,e.setCta().setButtonText(Qf.setting.about.buttonRelaunch()).onClick((function(){electron.remote.app.relaunch(),electron.remote.app.quit()})),e.buttonEl.hide()})).addDropdown((function(e){e.onChange((function(e){electron.ipcRenderer.sendSync("frame",e),f.buttonEl.show()})),e.addOption("hidden",K0.optionFrameHidden()),e.addOption("custom",K0.optionFrameObsidian()),e.addOption("native",K0.optionFrameNative()),e.setValue(m||"hidden")}))),Zl.isDesktopApp&&(w=Mf("path"),k=Mf("fs"),C=Mf("url"),M=electron.remote,E=new NI(t).setName(K0.optionCustomIcon()).addExtraButton((function(e){return b=e.setIcon("lucide-rotate-ccw").setTooltip(Qf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){electron.ipcRenderer.sendSync("set-icon",null,null),x(),v.buttonEl.show()}))})).addButton((function(e){return e.setButtonText(Qf.dialogue.buttonChoose()).onClick((function(){return g(N,void 0,void 0,(function(){var e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g;return y(this,(function(y){switch(y.label){case 0:if(!((e=M.dialog.showOpenDialogSync({title:K0.optionCustomIcon(),properties:["openFile","dontAddToRecent"],filters:[{name:"PNG/ICO/ICNS",extensions:["png","ico","icns"]}]}))&&e.length>0))return[3,3];if(n=e[0],i=Qc(Kc(n)),!["png","ico","icns"].contains(i))return new JA("Supported file types are: png, ico, icns"),[2];if(r=k.readFileSync(n),"icns"===i){if(s=su(r),o=function(e){var t=new Uint8Array(e);if(t.length<8||"icns"!==q0(t.slice(0,4)))return null;for(var n=8,i=null;n<t.byteLength;){var r=q0(t.slice(n,n+4)),o=U0(t,n+4),a=W0.indexOf(r);-1!==a&&a>-1&&(i=t.slice(n+8,n+o)),n+=o}return i?uf(i):null}(s),!o)return new JA("This icns file does not have usable icons."),[2];r=lu(o),i="png"}if("ico"===i&&!Zl.isWin){if(s=su(r),o=function(e){var t=new Uint8Array(e);if(t.length<6)return null;for(var n=function(e,t){return e[t]|e[t+1]<<8}(t,4),i=0,r=null,o=0;o<n;o++){for(var a=6+16*o,s=_0(t,a+12),l=t.slice(s,s+_0(t,a+8)),c=!0,u=0;u<8;u++)if(l[u]!==j0[u]){c=!1;break}if(c){for(var h=0;h<4;h++)if(l[12+h]!==G0[h]){c=!1;break}if(c){var d=U0(l,16),p=U0(l,20);d*p>i&&(i=d*p,r=l)}}}return r?uf(r):null}(s),!o)return new JA("This ico file does not have usable icons."),[2];r=lu(o),i="png"}return"png"!==i?[3,2]:(a=new Image,s=su(r),l="data:image/png;base64,".concat(ff(s)),[4,new Promise((function(e){var t=function(){return e()};a.addEventListener("load",t),a.addEventListener("error",t),a.src=l}))]);case 1:y.sent(),c=a.naturalWidth,u=a.naturalHeight,(h=t.doc.createElement("canvas")).width=c,h.height=u,(d=h.getContext("2d")).clearRect(0,0,c,u),d.drawImage(a,0,0,c,u),p=Math.floor(3*Math.min(c,u)/32),f=function(){for(var e=d.getImageData(0,0,c,u),t=function(t,n){return e.data[4*(t*c+n)+3]},n=Math.floor(p/2),i=0;i<n;i++){for(var r=0;r<c;r++)if(t(r,i)>128||t(r,u-i-1)>128)return!1;for(r=0;r<u;r++)if(t(i,r)>128||t(c-i-1,r)>128)return!1}return!0}(),f||(d.clearRect(0,0,c,u),d.drawImage(a,p,p,c-2*p,u-2*p),m=h.toDataURL("image/png"),g=m.match(/^data:([\w/\-.]+);base64,(.*)/),r=lu(pf(g[2]))),y.label=2;case 2:electron.ipcRenderer.sendSync("set-icon","icon."+i,r),x(),v.buttonEl.show(),y.label=3;case 3:return[2]}}))}))}))})).addButton((function(e){v=e,e.setCta().setButtonText(Qf.setting.about.buttonRelaunch()).onClick((function(){M.app.relaunch(),M.app.quit()}))})),S=function(e){var t=w.join(M.app.getPath("userData"),e),n=C.pathToFileURL(t).href;return n.startsWith("file:///")?n=n.substring(8):n.startsWith("file://")&&(n="%5C%5C"+n.substring(7)),Zl.resourcePathPrefix+n+"?"+Date.now()},x=function(){var e=electron.ipcRenderer.sendSync("get-icon");b.extraSettingsEl.toggle(!!e),e?E.setDesc(createFragment((function(t){t.createEl("img",{attr:{width:64,height:64,src:S(e)}})}))):E.setDesc(K0.optionCustomIconDesc())},v.buttonEl.hide(),x()),Zl.isDesktopApp&&Ff()&&new NI(t).setName(Qf.plugins.translucency.name()).setDesc(Qf.plugins.translucency.desc()).addToggle((function(e){return e.setValue(n.vault.getConfig("translucency")).onChange((function(e){i.setTranslucency(e)}))})),Zl.isDesktopApp&&(T=electron.ipcRenderer.sendSync("disable-gpu"),new NI(t).setName(Qf.setting.about.optionHwAcceleration()).setDesc(createFragment((function(e){e.createDiv({text:Qf.setting.about.optionHwAccelerationDescription()}),e.createDiv({cls:"mod-warning",text:Qf.setting.about.optionHwAccelerationWarning()})}))).addButton((function(e){D=e,e.setCta().setButtonText(Qf.setting.about.buttonRelaunch()).onClick((function(){Ef((function(e){e.ipcRenderer.sendSync("relaunch")}))})),e.buttonEl.hide()})).addToggle((function(e){return e.setValue(!T).onChange((function(e){e=!e,Ef((function(t){t.ipcRenderer.sendSync("disable-gpu",e),D.buttonEl.toggle(e!==T)}))}))}))),A=i.snippets,L=i.enabledSnippets,P=new NI(t).setHeading().setName(K0.optionCssSnippets()).addExtraButton((function(e){return e.setIcon("lucide-refresh-cw").setTooltip(K0.buttonReloadSnippets()).onClick((function(){return g(N,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.readSnippets()];case 1:return e.sent(),new JA(K0.msgReloadedSnippets()),this.display(),[2]}}))}))}))})),Zl.isDesktopApp&&P.addExtraButton((function(e){return e.setIcon("lucide-folder-open").setTooltip(K0.buttonOpenSnippetsFolder()).onClick((function(){return g(N,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.app.vault,t=i.getSnippetsFolder(),[4,e.exists(t)];case 1:return n.sent()?[3,3]:[4,e.createFolder(t)];case 2:n.sent(),n.label=3;case 3:return this.app.openWithDefaultApp(t),[2]}}))}))}))})),0===A.length&&new NI(t).setName(K0.labelNoCssSnippetsFound()).setDesc(K0.noSnippetDescription({path:"vault/".concat(i.getSnippetsFolder())})),I=function(e){new NI(t).setName(e).setDesc(K0.optionToggleSnippetDescription({path:"vault/".concat(i.getSnippetPath(e))})).addToggle((function(t){return t.setValue(L.has(e)).onChange((function(t){i.setCssEnabledStatus(e,t)}))}))},F=0,O=A;F<O.length;F++)B=O[F],I(B);return[2]}))}))},t}(vK),$0=Qf.setting.thirdPartyPlugin,Q0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=$0.name(),t.id="community-plugins",t}return f(t,e),t.prototype.display=function(){this.render(!0)},t.prototype.render=function(e){var t=this,n=this.containerEl;n.empty();var i=this.app.plugins;if(i.isEnabled()){new NI(n).setName($0.optionRestrictedMode()).setDesc($0.optionRestrictedModeDescription()).addButton((function(e){return e.setButtonText($0.buttonTurnOn()).onClick((function(){return g(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.setEnable(!1)];case 1:return e.sent(),window.location.reload(),[2]}}))}))}))})),new NI(n).setName($0.optionBrowseCommunityPlugins()).setDesc($0.optionBrowseCommunityPluginsDescription()).addButton((function(e){return e.setCta().setButtonText($0.buttonBrowse()).onClick((function(){return g(t,void 0,void 0,(function(){var e=this;return y(this,(function(t){return new CK(this.app,(function(){return e.display()})).open(),[2]}))}))}))}));var r=i.manifests,o=i.plugins,a=Object.keys(r),s=i.updates,l=Object.keys(s).length;if(a.sort((function(e,t){return r[e].name.localeCompare(r[t].name)})),new NI(n).setName($0.labelCurrentPlugins()).setDesc($0.labelCurrentlyInstalled({count:a.length})+" "+(l>0?$0.msgUpdatesFound({count:l}):"")).then((function(e){l>0?e.addButton((function(e){return e.setCta().setButtonText($0.buttonUpdateAllPlugins()).onClick((function(){return zw(n,(function(){return g(t,void 0,void 0,(function(){var e,t,n,r,o,a;return y(this,(function(l){switch(l.label){case 0:for(n in t=[],e=s)t.push(n);r=0,l.label=1;case 1:return r<t.length?(n=t[r])in e?(o=n,s.hasOwnProperty(o)?(a=s[o],[4,i.installPlugin(a.repo,a.version,a.manifest)]):[3,3]):[3,3]:[3,4];case 2:l.sent(),l.label=3;case 3:return r++,[3,1];case 4:return this.render(),[2]}}))}))}))}))})):a.length>0&&e.addButton((function(e){return e.setCta().setButtonText($0.buttonCheckForUpdates()).onClick((function(){return zw(n,(function(){return g(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.checkForUpdates()];case 1:return e.sent(),this.render(),[2]}}))}))}))}))}))})),a.length>0){new NI(n).setName($0.optionSearchInstalledPlugin()).setDesc($0.optionSearchInstalledPluginDescription()).addSearch((function(n){return n.setPlaceholder($0.placeholderSearchInstalledPlugin()).onChange((function(e){t.updateSearch(e)})).then((function(){n.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||Zl.isMobile&&xw()})),e&&!Zl.isMobile&&setTimeout((function(){return n.inputEl.focus()}))}))}));var c=new NI(n).setHeading().setName($0.labelInstalledPlugins()).addExtraButton((function(e){return e.setIcon("lucide-refresh-cw").setTooltip($0.buttonReloadPlugins()).onClick((function(){return g(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.loadManifests()];case 1:return e.sent(),new JA($0.msgReloadedThirdPartyPlugins()),this.render(),[2]}}))}))}))}));Zl.isDesktopApp&&c.addExtraButton((function(e){return e.setIcon("lucide-folder-open").setTooltip($0.buttonOpenPluginsFolder()).onClick((function(){return g(t,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.app.vault,t=i.getPluginFolder(),[4,e.exists(t)];case 1:return n.sent()?[3,3]:[4,e.createFolder(t)];case 2:n.sent(),n.label=3;case 3:return this.app.openWithDefaultApp(t),[2]}}))}))}))}))}for(var u=function(e){if(!r.hasOwnProperty(e)){var a=o[e].manifest;new NI(n).setName(a.name).setDesc(a.description).addToggle((function(e){return e.setValue(!0).onChange((function(e){return g(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.disablePluginAndSave(a.id)];case 1:return e.sent(),this.render(),[2]}}))}))}))}))}},h=0,d=Object.keys(o);h<d.length;h++){u(d[h])}this.installedPluginsEl=n.createDiv("installed-plugins-container"),this.updateSearch("")}else{n.createEl("p",{text:$0.labelExitRestrictedModeDescription_1()}),n.createEl("p",{text:$0.labelExitRestrictedModeDescription_2()}),n.createDiv({},(function(e){new NI(e).setName($0.labelCodeReview()).setDesc($0.labelCodeReviewDesc()).settingEl.prepend(createDiv("setting-icon",(function(e){mx(e,"lucide-inspect")}))),new NI(e).setName($0.labelOpenSource()).setDesc($0.labelOpenSourceDesc()).settingEl.prepend(createDiv("setting-icon",(function(e){mx(e,"lucide-github")}))),new NI(e).setName($0.labelPeerAudit()).setDesc($0.labelPeerAuditDesc()).settingEl.prepend(createDiv("setting-icon",(function(e){mx(e,"lucide-users")}))),new NI(e).setName($0.labelReportMechanism()).setDesc($0.labelReportMechanismDesc()).settingEl.prepend(createDiv("setting-icon",(function(e){mx(e,"lucide-bug")})))})),n.createEl("p",{text:$0.labelExitRestrictedModeDisableConfirmation()});var p=n.createDiv("community-modal-button-container").createEl("button",{cls:"mod-cta",text:$0.buttonTurnOnCommunityPlugins()});p.addEventListener("click",(function(){return g(t,void 0,void 0,(function(){var e=this;return y(this,(function(t){switch(t.label){case 0:return[4,qw(p,(function(){return e.app.plugins.setEnable(!0)}))];case 1:return t.sent(),this.render(),[2]}}))}))})),n.createEl("p",{},(function(e){e.createEl("a",{text:$0.labelLearnMore(),href:"https://help.obsidian.md/Community+plugins#Plugin+security",attr:{target:"_blank",rel:"noopener"}})}))}},t.prototype.renderInstalledPlugin=function(e,t,n,i,r){var o,a,s=this,l=this.app.plugins,c=l.plugins,u=l.updates,h=e.id,d=function(){var t=!1,n=!1;l.getPlugin(e.id)&&(t=s.setting.pluginTabs.some((function(t){return t.id===e.id})),Object.keys(s.app.commands.commands).some((function(t){return t.startsWith(e.id+":")}))&&(n=!0)),o.extraSettingsEl.toggle(t),a.extraSettingsEl.toggle(n)},p=new NI(t).setDesc(createFragment((function(t){(e.version&&t.createDiv({text:$0.labelVersion({version:e.version})}),e.author)&&jL(t.createDiv({text:$0.labelByAuthor()}),e.author,i);jL(t.createDiv(),e.description,r)}))).then((function(t){if(u.hasOwnProperty(h)){var i=u[h];t.addButton((function(e){return e.setCta().setButtonText($0.buttonUpdate()).setTooltip($0.msgUpdatePlugin({version:i.version})).onClick((function(){return zw(t.settingEl,(function(){return g(s,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,l.installPlugin(i.repo,i.version,i.manifest)];case 1:return e.sent(),this.render(),[2]}}))}))}))}))}))}jL(t.nameEl,e.name,n)})).addExtraButton((function(t){return o=t.setIcon("lucide-settings").setTooltip(Qf.setting.options()).onClick((function(){return s.setting.openTabById(e.id)}))})).addExtraButton((function(t){return a=t.setIcon("lucide-plus-circle").setTooltip(Qf.setting.hotkeys.name()).onClick((function(){var t=s.setting.openTabById("hotkeys");t instanceof wK&&t.setQuery(e.id)}))}));e.fundingUrl&&p.addExtraButton((function(t){return t.setIcon("lucide-heart").setTooltip($0.labelDonateModalTitle({name:e.name})).onClick((function(){new MK(s.app,e.name,e.fundingUrl).open()}))})),p.addExtraButton((function(t){return t.setIcon("lucide-trash-2").setTooltip($0.labelUninstall()).onClick((function(){new XA(s.app).setTitle($0.labelUninstallPlugin()).setContent($0.labelUninstallPluginConfirmation()).addButton("mod-warning",$0.labelUninstall(),(function(){return g(s,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,l.uninstallPlugin(e.id)];case 1:return t.sent(),this.render(),[2]}}))}))})).addCancelButton().open()}))})),p.addToggle((function(t){return t.setValue(c.hasOwnProperty(e.id)).onChange((function(n){return g(s,void 0,void 0,(function(){return y(this,(function(i){switch(i.label){case 0:return n?[4,l.enablePluginAndSave(e.id)]:[3,2];case 1:return i.sent()||t.setValue(!1),[3,4];case 2:return[4,l.disablePluginAndSave(e.id)];case 3:i.sent(),i.label=4;case 4:return d(),n&&setTimeout(d,100),[2]}}))}))}))}));var f=p.infoEl;f.style.cursor="pointer",f.addEventListener("click",(function(){new CK(s.app,(function(){return s.display()})).setAutoOpen(h).open()})),d()},t.prototype.updateSearch=function(e){var t=this.app.plugins,n=this.installedPluginsEl;n.empty();var i=t.manifests,r=Object.keys(i);r.sort((function(e,t){return i[e].name.localeCompare(i[t].name)}));for(var o=(e=e.trim().toLowerCase()).split(" "),a=0,s=r;a<s.length;a++){var l=s[a],c=i[l],u=null,h=null,d=null;(!e||(u=UL(o,c.name.toLowerCase()),h=c.author?UL(o,c.author.toLowerCase()):null,d=c.description?UL(o,c.description.toLowerCase()):null,u||h||d))&&this.renderInstalledPlugin(c,n,u,h,d)}},t}(vK),J0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=Qf.setting.editor.name(),t.id="editor",t.passedVimTest=!1,t}return f(t,e),t.prototype.display=function(){var e=this;this.containerEl.empty(),new NI(this.containerEl).setName(Qf.setting.editor.optionOpenTabInForeground()).setDesc(Qf.setting.editor.optionOpenTabInForegroundDescription()).addToggle((function(t){return t.setValue(e.app.vault.getConfig("focusNewTab")).onChange((function(t){e.app.vault.setConfig("focusNewTab",t)}))})),new NI(this.containerEl).setName(Qf.setting.editor.optionDefaultNewTabView()).setDesc(Qf.setting.editor.optionDefaultNewTabViewDescription()).addDropdown((function(t){return t.addOption("source",Qf.setting.editor.optionDefaultNewTabViewEditing()).addOption("preview",Qf.setting.editor.optionDefaultNewTabViewReading()).setValue(e.app.vault.getConfig("defaultViewMode")).onChange((function(t){e.app.vault.setConfig("defaultViewMode",t)}))})),new NI(this.containerEl).setName(Qf.setting.editor.optionDefaultEditingMode()).setDesc(Qf.setting.editor.optionDefaultEditingModeDescription()).addDropdown((function(t){return t.addOption("live-preview",Qf.setting.editor.optionDefaultEditingModeLivePreview()).addOption("source",Qf.setting.editor.optionDefaultEditingModeSource()).setValue(e.app.vault.getConfig("livePreview")?"live-preview":"source").onChange((function(t){e.app.vault.setConfig("livePreview","live-preview"===t);for(var n=0,i=e.app.workspace.getLeavesOfType(AY);n<i.length;n++){var r=i[n],o=r.getViewState();o.state.source="live-preview"!==t,r.setViewState(o)}}))})),new NI(this.containerEl).setName(Qf.plugins.editorStatus.name()).setDesc(Qf.plugins.editorStatus.desc()).addToggle((function(t){var n=e.app.internalPlugins.plugins["editor-status"];t.setValue(n.enabled).onChange((function(e){e?n.enable(!0):n.disable(!0)}))})),new NI(this.containerEl).setHeading().setName(Qf.setting.editor.sectionDisplay()),this.addOption("readableLineLength",Qf.setting.editor.optionReadableLineLength(),Qf.setting.editor.optionReadableLineDescription()),this.addOption("strictLineBreaks",Qf.setting.editor.optionStrictLineBreak(),Qf.setting.editor.optionStrictLineBreakDescription()),new NI(this.containerEl).setName(Qf.setting.editor.optionPropertiesInDocument()).setDesc(Qf.setting.editor.optionPropertiesInDocumentDescription()).addDropdown((function(t){return t.addOption("visible",Qf.setting.editor.optionPropertiesVisible()).addOption("hidden",Qf.setting.editor.optionPropertiesHidden()).addOption("source",Qf.setting.editor.optionPropertiesSource()).setValue(e.app.vault.getConfig("propertiesInDocument")).onChange((function(t){e.app.vault.setConfig("propertiesInDocument",t)}))})),this.addOption("foldHeading",Qf.setting.editor.optionFoldHeading(),Qf.setting.editor.optionFoldHeadingDescription()),this.addOption("foldIndent",Qf.setting.editor.optionFoldIndent(),Qf.setting.editor.optionFoldIndentDescription()),this.addOption("showLineNumber",Qf.setting.editor.optionShowLineNumber(),Qf.setting.editor.optionShowLineNumberDescription()),this.addOption("showIndentGuide",Qf.setting.editor.optionIndentationGuide(),Qf.setting.editor.optionIndentationGuideDescription()),this.addOption("rightToLeft",Qf.setting.editor.optionRtl(),Qf.setting.editor.optionRtlDescription()),new NI(this.containerEl).setHeading().setName(Qf.setting.editor.sectionBehavior());var t,n=this.app.vault.getConfig("spellcheck"),i=new NI(this.containerEl).setName(Qf.setting.editor.optionSpellcheck()).setDesc(Qf.setting.editor.optionSpellcheckDescription());Zl.isDesktopApp&&i.addExtraButton((function(t){return t.onClick((function(){new e2(e.app).open()}))})),i.addToggle((function(t){return t.setValue(n).onChange((function(t){return e.app.vault.setConfig("spellcheck",t)}))})),Zl.isDesktopApp&&Ef((function(t){var n=t.remote.getCurrentWebContents().session,i=new NI(e.containerEl).setName(Qf.setting.editor.spellcheckLanguages()).setDesc(Qf.setting.editor.spellcheckLanguagesDescription());if(Ul)i.setDesc(Qf.setting.editor.spellcheckLanguagesMacDescription());else{var r=function(){i.clear();var o=n.availableSpellCheckerLanguages,a=e.app.getSpellcheckLanguages(),s=i.controlEl.createDiv("setting-command-hotkeys");if(a){var l=a.map((function(e){return{lang:e,display:o.contains(e)?em(e):em(e)+" (Not available)"}}));l.sort((function(e,t){return xm(e.display,t.display)}));for(var c=function(t,n){s.createSpan({cls:"setting-hotkey",text:n}).createSpan("setting-hotkey-icon",(function(n){mx(n,"lucide-x"),n.addEventListener("click",(function(){e.app.setSpellcheckLanguages(a.filter((function(e){return e!==t}))),r()}))}))},u=0,h=l;u<h.length;u++){var d=h[u];c(d.lang,d.display)}var p=i.controlEl.createSpan("clickable-icon setting-restore-hotkey-button");mx(p,"lucide-rotate-ccw"),p.addEventListener("click",(function(){e.app.setSpellcheckLanguages(null),r()}))}else s.createSpan({cls:"setting-hotkey",text:em(t.remote.app.getLocale())});i.addDropdown((function(n){n.selectEl.style.width="80px",n.addOption("","+");var i=o.map((function(e){return{lang:e,display:em(e)}}));i.sort((function(e,t){return xm(e.display,t.display)}));for(var s=0,l=i;s<l.length;s++){var c=l[s],u=c.lang,h=c.display;n.addOption(u,h)}n.onChange((function(n){if(n){if(a||(a=[t.remote.app.getLocale()]),a.contains(n))return void r();a.push(n),e.app.setSpellcheckLanguages(a),r()}}))}))};r()}})),this.addOption("autoPairBrackets",Qf.setting.editor.optionAutoPairBrackets(),Qf.setting.editor.optionAutoPairBracketsDescription()),this.addOption("autoPairMarkdown",Qf.setting.editor.optionAutoPairMarkdown(),Qf.setting.editor.optionAutoPairMarkdownDescription()),this.addOption("smartIndentList",Qf.setting.editor.optionSmartIndentLists(),Qf.setting.editor.optionSmartIndentListsDescription()),this.addOption("useTab",Qf.setting.editor.optionUseTabs(),Qf.setting.editor.optionUseTabsDescription()),new NI(this.containerEl).setName(Qf.setting.editor.optionTabSize()).setDesc(Qf.setting.editor.optionTabSizeDescription()).addExtraButton((function(n){return n.setIcon("lucide-rotate-ccw").setTooltip(Qf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){e.app.vault.setConfig("tabSize",4),t.setValue(4)}))})).addSlider((function(n){return t=n.setLimits(2,8,1).setDynamicTooltip().setValue(e.app.vault.getConfig("tabSize")).onChange((function(t){e.app.vault.setConfig("tabSize",t)}))})),new NI(this.containerEl).setHeading().setName(Qf.setting.about.optionAdvanced()),this.addOption("autoConvertHtml",Qf.setting.editor.optionAutoConvertHtml(),Qf.setting.editor.optionAutoConvertHtmlDescription()),new NI(this.containerEl).setName(Qf.setting.editor.optionVimKeyBindings()).setDesc(createFragment((function(e){e.appendText(Qf.setting.editor.optionVimKeyBindingsDescription()),Zl.isMobile&&(e.createEl("br"),e.appendText(Qf.setting.editor.optionVimKeyBindingsMobile()))}))).addToggle((function(t){return t.setValue(e.app.isVimEnabled()).onChange((function(n){e.passedVimTest||!0!==n?Zl.isMobile?(n?localStorage.setItem("vim","true"):localStorage.removeItem("vim"),e.app.workspace.updateOptions()):e.app.vault.setConfig("vimMode",n):(t.setValue(!1),e.startVimTest(t))}))}))},t.prototype.addOption=function(e,t,n){var i=this;new NI(this.containerEl).setName(t).setDesc(n).addToggle((function(t){return t.setValue(i.app.vault.getConfig(e)).onChange((function(t){return i.app.vault.setConfig(e,t)}))}))},t.prototype.startVimTest=function(e){var t,n=this,i=createFragment(),r=function(){var i=t.value.toLowerCase();""===i?new JA(Qf.setting.editor.msgVimModePleaseEnterCommand()):i.startsWith(":q")?(n.passedVimTest=!0,e.setValue(!0),o.close(),new JA(Qf.setting.editor.msgVimModeEnabled())):new JA(Qf.setting.editor.msgVimModeNotEnabled())},o=new XA(this.app);i.createEl("p",{cls:"mod-warning",text:Qf.setting.editor.labelVimWarning()}),i.createEl("p",{text:Qf.setting.editor.labelVimTest()}),i.createEl("p",{cls:"form-field"},(function(e){e.createEl("label",{cls:"input-label",text:Qf.setting.editor.labelVimYourAnswer()}),(t=e.createEl("input",{type:"text"})).setAttribute("placeholder",Qf.setting.editor.placeholderEnterCommand()),t.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||r()}))})),o.setTitle(Qf.setting.editor.labelConfirmEnableVim()),o.setContent(i),o.addButton("mod-cta",Qf.setting.editor.buttonConfirmEnableVim(),(function(){return r(),!0})),o.addCancelButton(),o.open(),t.focus()},t}(vK),e2=function(e){function t(t){var n=e.call(this,t)||this;return n.titleEl.setText(Qf.setting.editor.spellcheckDict()),n}return f(t,e),t.prototype.onOpen=function(){this.rerender()},t.prototype.onClose=function(){this.contentEl.empty()},t.prototype.rerender=function(){var e=this,t=this.contentEl;t.empty(),Ef((function(n){return g(e,void 0,void 0,(function(){var e,i,r,o,a,s,l,c=this;return y(this,(function(u){switch(u.label){case 0:return[4,(e=n.remote.getCurrentWebContents().session).listWordsInSpellCheckerDictionary()];case 1:for((i=u.sent()).sort(xm),r=t.createDiv("spellchecker-dictionary-container"),o=function(t){var n=r.createDiv("spellchecker-dictionary-item"),i=n.createDiv("spellchecker-dictionary-remove-button");mx(i,"lucide-x"),Rx(i,"Remove from dictionary"),i.addEventListener("click",(function(){e.removeWordFromSpellCheckerDictionary(t),c.rerender()})),n.createDiv({cls:"spellchecker-dictionary-word",text:t})},a=0,s=i;a<s.length;a++)l=s[a],o(l);return 0===i.length&&t.createEl("p",{text:Qf.setting.editor.spellcheckDictEmpty()}),[2]}}))}))}))},t}(ZA),t2=Qf.setting.file,n2=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=t2.name(),t.id="file",t.deleteOption=[{value:"system",description:t2.optionChoiceSystemTrash()},{value:"local",description:t2.optionChoiceVaultTrash()},{value:"none",description:t2.optionChoicePermanentDelete()}],t.newNoteLocationOptions=[{value:"root",description:t2.optionChoiceVaultRoot()},{value:"current",description:t2.optionChoiceCurrentFolder()},{value:"folder",description:t2.optionChoiceSpecifiedFolder()}],t.newLinkFormatOptions=[{value:"shortest",description:t2.optionChoiceShortestLinktext()},{value:"relative",description:t2.optionChoiceRelativePath()},{value:"absolute",description:t2.optionChoiceAbsolutePath()}],t.newAttachmentLocationOptions=[{value:"root",description:t2.optionChoiceVaultRoot()},{value:"folder",description:t2.optionChoiceSpecifiedFolder()},{value:"current",description:t2.optionChoiceCurrentFolder()},{value:"subfolder",description:t2.optionChoiceSubdirectory()}],t}return f(t,e),t.prototype.display=function(){var e=this,t=this.app,n=this.containerEl;n.empty(),new NI(n).setName(t2.optionConfirmFileDeletion()).setDesc(t2.optionConfirmFileDeletionDescription()).addToggle((function(n){return n.setValue(t.vault.getConfig("promptDelete")).onChange((function(t){e.app.vault.setConfig("promptDelete",t)}))})),new NI(n).setName(t2.optionDeleteDestination()).setDesc(t2.optionDeleteDestinationDescription()).addDropdown((function(n){n.onChange((function(e){t.vault.setConfig("trashOption",e)}));for(var i=0,r=e.deleteOption;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}n.setValue(t.vault.getConfig("trashOption"))}));var i=t.vault.getConfig("alwaysUpdateLinks");new NI(n).setName(t2.optionAlwaysUpdateLinks()).setDesc(t2.optionAlwaysUpdateLinksDescription()).addToggle((function(t){return t.setValue(i).onChange((function(t){e.app.vault.setConfig("alwaysUpdateLinks",t)}))}));var r,o=function(){s.settingEl.toggle("folder"===r.getValue())};new NI(n).setName(t2.optionNewNoteLocation()).setDesc(t2.optionNewNoteLocationDescription()).addDropdown((function(n){r=n,n.onChange((function(e){t.vault.setConfig("newFileLocation",e),o()}));for(var i=0,a=e.newNoteLocationOptions;i<a.length;i++){var s=a[i];n.addOption(s.value,s.description)}n.setValue(t.vault.getConfig("newFileLocation"))}));var a=t.vault.getConfig("newFileFolderPath"),s=new NI(n).setName(t2.optionNewFileFolderPath()).setDesc(t2.optionNewFileFolderPathDescription()).addText((function(e){e.setPlaceholder(Qf.setting.folderPathExamplePlaceholder()).setValue("/"===a?"":a).onChange((function(e){t.vault.setConfig("newFileFolderPath",e)})),new rZ(t,e.inputEl,!1,!0)}));new NI(n).setName(t2.optionLinkAutocompletedFormat()).setDesc(t2.optionLinkAutocompletedFormatDescription()).addDropdown((function(n){n.onChange((function(e){t.vault.setConfig("newLinkFormat",e)}));for(var i=0,r=e.newLinkFormatOptions;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}n.setValue(t.vault.getConfig("newLinkFormat"))})),new NI(n).setName(t2.optionUseWikiLinks()).setDesc(t2.optionUseWikiLinksDescription()).addToggle((function(e){return e.setValue(!t.vault.getConfig("useMarkdownLinks")).onChange((function(e){t.vault.setConfig("useMarkdownLinks",!e)}))})),new NI(n).setName(t2.optionShowUnsupportedFiles()).setDesc(t2.optionShowUnsupportedFilesDescription()).addToggle((function(e){return e.setValue(t.vault.getConfig("showUnsupportedFiles")).onChange((function(e){t.vault.setConfig("showUnsupportedFiles",e)}))}));var l,c,u,h,d,p=t2.optionNewAttachmentLocationDefault(),f=function(){var e=l.getValue();c.settingEl.toggle("folder"===e),u.settingEl.toggle("subfolder"===e)},m=function(){var e=l.getValue();return"root"===e?"/":"folder"===e?h.getValue()||p:"current"===e?"./":"subfolder"===e?"./"+(d.getValue()||p):""};new NI(n).setName(t2.optionNewAttachmentLocation()).setDesc(t2.optionNewAttachmentLocationDescription()).addDropdown((function(n){n.onChange((function(e){f(),t.vault.setConfig("attachmentFolderPath",m())}));for(var i=0,r=e.newAttachmentLocationOptions;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}l=n})),c=new NI(n).setName(t2.optionAttachmentFolderPath()).setDesc(t2.optionAttachmentFolderPathDescription()).addText((function(e){e.setPlaceholder(p).onChange((function(e){t.vault.setConfig("attachmentFolderPath",m())})),new rZ(t,e.inputEl,!1,!0),h=e})),u=new NI(n).setName(t2.optionAttachmentSubfolderPath()).setDesc(t2.optionAttachmentSubfolderPathDescription()).addText((function(e){e.setPlaceholder(p).onChange((function(e){t.vault.setConfig("attachmentFolderPath",m())})),d=e}));var v,b=function(){w.setDesc(createFragment((function(e){e.appendText(t2.optionExcludedFilesDesc());var n=t.vault.getConfig("userIgnoreFilters");if(n&&n.length>0)for(var i=e.createEl("ul"),r=function(e){i.createEl("li","").createSpan({text:e},(function(t){e.length>2&&e.startsWith("/")&&e.endsWith("/")&&t.createSpan({text:"Regex",cls:"flair mod-flat"})}))},o=0,a=n;o<a.length;o++){r(a[o])}})))},w=new NI(n).setName(t2.optionExcludedFiles()).addButton((function(e){return e.setButtonText(Qf.interface.buttonManage()).onClick((function(){var e=t.vault.getConfig("userIgnoreFilters")||[];new i2(t,e,(function(e){0===e.length&&(e=null),t.vault.setConfig("userIgnoreFilters",e),b()})).open()}))})),k=localStorage.getItem(this.app.appId+"-config")||"",C=k;new NI(n).setName(Qf.setting.about.optionConfigLocation()).setDesc(Qf.setting.about.optionConfigLocationDescription()).addButton((function(t){v=t,t.setCta().setButtonText(Qf.setting.about.buttonRelaunch()).onClick((function(){localStorage.setItem(e.app.appId+"-config",C),window.location.reload()})),t.buttonEl.hide()})).addText((function(e){e.setPlaceholder(".obsidian").setValue(k).onChange((function(t){!t||Cw.validateConfigDir(t)?(Bx(),C=t,v.buttonEl.toggle(t!==k)):Ox(e.inputEl,Qf.setting.about.optionConfigLocationWarning(),{placement:"left",classes:["mod-error"]})}))})),new NI(n).setHeading().setName(Qf.setting.about.optionAdvanced()),new NI(n).setName(t2.optionUriCallbacks()).setDesc(createFragment((function(e){e.appendText(t2.optionUriCallbacksDesc()+" "),e.createEl("a",{href:"https://help.obsidian.md/Extending+Obsidian/Obsidian+URI#Use+x-callback-url+parameters",text:Qf.interface.buttonLearnMore(),attr:{target:"_blank"}})}))).addToggle((function(n){return n.setValue(t.vault.getConfig("uriCallbacks")).onChange((function(t){e.app.vault.setConfig("uriCallbacks",t)}))})),new NI(n).setName(Qf.setting.editor.optionReindexVault()).setDesc(createFragment((function(e){e.createSpan({cls:"mod-warning",text:Qf.setting.editor.optionReindexVaultDescription()}),e.createEl("br"),e.createEl("a",{href:"https://help.obsidian.md/Files+and+folders/How+Obsidian+stores+data#Metadata+cache",text:Qf.interface.buttonLearnMore(),attr:{target:"_blank"}})}))).addButton((function(t){return t.setButtonText(Qf.setting.editor.labelReindex()).setClass("mod-destructive").onClick((function(){return g(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.metadataCache.clear()];case 1:return e.sent(),window.location.reload(),[2]}}))}))}))})),b(),o(),function(e){if("/"!==e)if("."!==e&&"./"!==e){if(e.startsWith("./")){var t=e.slice(2);return l.setValue("subfolder"),void d.setValue(t!==p?t:"")}l.setValue("folder"),h.setValue(e!==p?e:"")}else l.setValue("current");else l.setValue("root")}(t.vault.getConfig("attachmentFolderPath")),f()},t}(vK),i2=function(e){function t(t,n,i){var r,o=e.call(this,t)||this;o.setTitle(t2.optionExcludedFiles()),o.values=n,o.descEl=o.contentEl.createEl("p"),o.listEl=o.contentEl.createDiv();var a=function(){var e=r.getValue();if(!e.trim())return Ox(r.inputEl,t2.messageEmptyFilter(),{classes:["mod-error"]}),void setTimeout((function(){return Bx()}),2e3);o.values.push(e),o.display(),r.setValue("")};return new NI(o.contentEl).setName(t2.labelExcludedFilter()).addText((function(e){r=e,e.setPlaceholder(t2.placeholderExcludedFilter());var n=e.inputEl;n.addEventListener("keydown",(function(e){e.isComposing||"Enter"===e.key&&a()})),new rZ(t,n,!0,!1).onSelect((function(e){e&&r.setValue(e.path+"/"),a()}))})).addButton((function(e){return e.setButtonText(Qf.interface.buttonAdd()).onClick(a)})),o.addButton("mod-cta",Qf.dialogue.buttonSave(),(function(){o.close(),i(o.values)})),o.addCancelButton(),o}return f(t,e),t.prototype.onOpen=function(){this.display()},t.prototype.display=function(){var e=this,t=this,n=t.listEl,i=t.descEl,r=t.values;0===r.length?i.setText(t2.labelNoExcludedFiltersApplied()):i.setText(t2.labelExcludedFiltersApplied()),n.empty();for(var o=function(t){n.createDiv("mobile-option-setting-item",(function(n){n.createSpan({cls:"mobile-option-setting-item-name",text:t},(function(e){t.length>2&&t.startsWith("/")&&t.endsWith("/")&&e.createSpan({text:"Regex",cls:"flair mod-flat"})})),n.createDiv("clickable-icon mobile-option-setting-item-option-icon",(function(n){mx(n,"lucide-x"),Rx(n,Qf.interface.deleteActionShortName()),n.addEventListener("click",(function(){r.remove(t),e.display()}))}))}))},a=0,s=r;a<s.length;a++){o(s[a])}},t}(XA),r2=Qf.setting.mobileToolbar,o2=function(e){function t(t,n){var i=e.call(this,t)||this;return i.emptyStateText=Qf.plugins.commandPalette.labelNoCommands(),i.callback=n,i.setPlaceholder(r2.placeholderSelectQuickAction()),i}return f(t,e),t.prototype.getItems=function(){return[null].concat(Object.values(this.app.commands.commands))},t.prototype.getItemText=function(e){return e?e.name:r2.quickActionDisabled()},t.prototype.onChooseItem=function(e){this.app.vault.setConfig("mobilePullAction",e?e.id:""),this.callback&&this.callback()},t}(dV),a2=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.name=r2.name(),i.id="mobile",t.commands.addCommand({id:"mobile:quick-action",name:r2.optionConfigureQuickAction(),icon:"lucide-terminal-square",checkCallback:function(e){if(Zl.isMobile)return e||new o2(t).open(),!0}}),i}return f(t,e),t.prototype.display=function(){var e=this,t=this.app,n=this.containerEl;n.empty();var i=t.vault.getConfig("mobilePullAction"),r=t.commands.findCommand(i);new NI(n).setName(r2.optionConfigureQuickAction()).setDesc(r2.optionConfigureQuickActionDescription({command:r?r.name:r2.quickActionDisabled()})).addButton((function(n){return n.setButtonText(r2.buttonConfigure()).onClick((function(){return new o2(t,(function(){return e.display()})).open()}))}));var o=t.commands.commands,a=t.commands.editorCommands,s=t.vault.getConfig("mobileToolbarCommands"),l=Object.keys(a).filter((function(e){return!s.contains(e)})),c=function(){t.vault.setConfig("mobileToolbarCommands",s),e.display()};if(s){new NI(n).setName(r2.manageToolbarOptions()).setHeading();var u=n.createDiv();s=s.filter((function(e){return o[e]}));for(var h=function(e){var t=o[e];u.createDiv("mobile-option-setting-item",(function(n){n.createSpan("mobile-option-setting-item-remove-icon",(function(t){mx(t,"lucide-minus-circle"),t.addEventListener("click",(function(){s.contains(e)&&(s.remove(e),c())}))})),n.createSpan("mobile-option-setting-item-option-icon",(function(e){return mx(e,t.icon||"question-mark-glyph")})),n.createSpan({cls:"mobile-option-setting-item-name",text:t.name}),n.createDiv("clickable-icon mobile-option-setting-item-option-icon mobile-option-setting-drag-icon",(function(t){mx(t,"lucide-menu"),Rx(t,Qf.interface.dragToRearrange()),Hc(t,n,u,5,(function(){return null}),(function(t){s.remove(e),s.splice(t,0,e),c()}))}))}))},d=0,p=s;d<p.length;d++){h(p[d])}}if(l.length>0){new NI(n).setName(r2.optionMoreToolbarOptions()).setHeading();for(var f=function(e){var t=o[e];n.createDiv("mobile-option-setting-item",(function(n){n.createSpan("mobile-option-setting-item-add-icon",(function(t){mx(t,"lucide-plus-circle"),t.addEventListener("click",(function(){s.contains(e)||(s.push(e),c())}))})),n.createSpan("mobile-option-setting-item-option-icon",(function(e){return mx(e,t.icon||"question-mark-glyph")})),n.createSpan({text:t.name})}))},m=0,v=l;m<v.length;m++){f(v[m])}}var g=Object.keys(o).filter((function(e){return!a[e]&&!s.contains(e)})).map((function(e){return o[e]}));new NI(n).setName(r2.optionAddCommand()).setDesc(r2.optionAddCommandDescription()).addText((function(t){return t.setPlaceholder(Qf.plugins.commandPalette.promptTypeCommand()).then((function(){new G$(e.app,t.inputEl,g,(function(e){var t=e.id;s.contains(t)||(s.push(t),c())}))}))}))},t}(vK),s2=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=Qf.setting.builtinPlugins(),t.id="plugins",t}return f(t,e),t.prototype.display=function(){this.render(!0)},t.prototype.render=function(e){var t=this,n=this.app.internalPlugins;this.containerEl.empty();var i=this.containerEl.createDiv("plugin-list-plugins");new NI(i).setName(Qf.setting.corePlugin.optionSearchPlugin()).setDesc(Qf.setting.corePlugin.optionSearchPluginDescription()).addSearch((function(t){return t.setPlaceholder(Qf.setting.corePlugin.placeholderSearchPlugin()).onChange((function(e){return a(e)})).then((function(){e&&!Zl.isMobile&&setTimeout((function(){return t.inputEl.focus()}))}))}));var r=i.createDiv(),o={},a=function(e){r.empty(),new NI(r).setHeading().setName(Qf.setting.corePlugin.pluginList());var i=(e=(e||"").trim().toLowerCase()).split(" "),a=n.plugins,s=Object.keys(a).filter((function(e){return!a[e].instance.hiddenFromList}));s.sort((function(e,t){return xm(a[e].instance.name,a[t].instance.name)}));for(var l=function(n){var s,l,c=a[n],u=c.instance,h=null,d=null;if(e&&(h=UL(i,u.name.toLowerCase()),d=UL(i,u.description.toLowerCase()),!h&&!d))return"continue";var p=function(){var e=!1,i=!1;c.enabled&&(e=t.setting.pluginTabs.some((function(e){return e.id===n})),Object.keys(t.app.commands.commands).some((function(e){return e.startsWith(n+":")}))&&(i=!0)),s.extraSettingsEl.toggle(e),l.extraSettingsEl.toggle(i)};new NI(r).setName(createFragment((function(e){return jL(e,u.name,h)}))).setDesc(createFragment((function(e){return jL(e,u.description,d)}))).addExtraButton((function(e){return s=e.setIcon("lucide-settings").setTooltip(Qf.setting.options()).onClick((function(){return t.setting.openTabById(n)}))})).addExtraButton((function(e){l=e,e.extraSettingsEl.addClass("mod-hotkeys"),e.setIcon("lucide-plus-circle").setTooltip(Qf.setting.hotkeys.name()).onClick((function(){var e=t.setting.openTabById("hotkeys");e instanceof wK&&e.setQuery(n)}))})).addToggle((function(e){o[n]=e,e.setValue(c.enabled).onChange((function(e){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return e?[4,c.enable(!0)]:[3,2];case 1:return t.sent(),[3,3];case 2:c.disable(!0),t.label=3;case 3:return p(),[2]}}))}))}))})),p()},c=0,u=s;c<u.length;c++){l(u[c])}};a(),n.on("change",(function(){t.updateEnabledState(o,t.app.internalPlugins)}))},t.prototype.updateEnabledState=function(e,t){var n=t.plugins;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i],o=e[i];o&&o.setValue(r.enabled)}},t}(vK),l2=function(e){function t(t){var n=e.call(this,t)||this;return n.settingTabs=[],n.pluginTabs=[],n.activeTab=null,n.activeTabCloseable=null,n.lastTabId="",n.modalEl.addClass("mod-settings","mod-sidebar-layout"),n.updateModalTitle(),n.contentEl.addClass("vertical-tabs-container"),n.tabHeadersEl=n.contentEl.createDiv("vertical-tab-header",(function(e){e.createDiv("vertical-tab-header-group",(function(e){e.createDiv({cls:"vertical-tab-header-group-title",text:Qf.setting.options()}),n.tabContainer=e.createDiv("vertical-tab-header-group-items")})),e.createDiv("vertical-tab-header-group",(function(e){n.corePluginTabHeaderGroup=e.createDiv({cls:"vertical-tab-header-group-title",text:Qf.setting.builtinPlugins()}),n.corePluginTabHeaderGroup.hide(),n.corePluginTabContainer=e.createDiv("vertical-tab-header-group-items")})),e.createDiv("vertical-tab-header-group",(function(e){n.communityPluginTabHeaderGroup=e.createDiv({cls:"vertical-tab-header-group-title",text:Qf.setting.thirdPartyPlugin.name()}),n.communityPluginTabHeaderGroup.hide(),n.communityPluginTabContainer=e.createDiv("vertical-tab-header-group-items")}))})),n.tabContentContainer=createDiv("vertical-tab-content-container"),n.addSettingTab(new hJ(t,n)),n.addSettingTab(new J0(t,n)),Zl.isMobile&&n.addSettingTab(new a2(t,n)),n.addSettingTab(new n2(t,n)),n.addSettingTab(new X0(t,n)),n.addSettingTab(new wK(t,n)),n.addSettingTab(new s2(t,n)),n.addSettingTab(new Q0(t,n)),Zl.isMobile&&CA(n.contentEl,(function(e){if(1===e.points&&"x"===e.direction&&n.activeTab&&!(e.touch.clientX>40)){var t=n.activeTab.containerEl;n.contentEl.prepend(n.tabHeadersEl),ik(n.tabHeadersEl),e.registerCallback({move:function(n,i){var r=t.offsetWidth,o=Math.clamp((n-e.startX)/r,0,1);t.style.transform="translateX(".concat(o*r,"px)")},cancel:function(){t.style.transform="",n.tabHeadersEl.detach()},finish:function(i,r,o){var a=t.offsetWidth,s=Math.clamp((i-e.startX)/a,0,1);.5*o<a/2?wl(t,new ml({duration:150*s}).addProp("transform",null,"translateX(0)",""),(function(){n.tabHeadersEl.detach()})):wl(t,new ml({duration:100*(1-s),fn:"ease-out"}).addProp("transform",null,"translateX(".concat(a,"px)"),""),(function(){t.detach(),n.closeActiveTab()}))}})}})),n}return f(t,e),t.prototype.updateModalTitle=function(e){this.titleEl.empty(),e?this.titleEl.setText(e.name):this.titleEl.setText(Qf.interface.settings())},t.prototype.addSettingTab=function(e){var t=this;e.navEl||(e.navEl=createDiv({cls:"vertical-tab-nav-item",text:e.name},(function(n){n.createDiv("vertical-tab-nav-item-chevron",(function(e){return mx(e,"lucide-chevron-right")})),n.addEventListener("click",(function(){t.openTab(e)}))}))),this.isPluginSettingTab(e)?this.pluginTabs.push(e):(this.settingTabs.push(e),this.tabContainer.appendChild(e.navEl)),this.updatePluginSection()},t.prototype.removeSettingTab=function(e){this.pluginTabs.remove(e),this.settingTabs.remove(e);var t=this.activeTab;t&&t===e&&this.closeActiveTab(),this.updatePluginSection()},t.prototype.isPluginSettingTab=function(e){return e instanceof aY||e instanceof oY},t.prototype.updatePluginSection=function(){var e=this.pluginTabs,t=e.filter((function(e){return e instanceof aY})),n=e.filter((function(e){return e instanceof oY}));t.sort((function(e,t){return xm(e.name,t.name)})),this.corePluginTabHeaderGroup.toggle(t.length>0),this.corePluginTabContainer.setChildrenInPlace(t.map((function(e){return e.navEl}))),n.sort((function(e,t){return xm(e.name,t.name)})),this.communityPluginTabHeaderGroup.toggle(n.length>0),this.communityPluginTabContainer.setChildrenInPlace(n.map((function(e){return e.navEl})))},t.prototype.openTab=function(e){var t=this,n=this,i=n.activeTab,r=n.contentEl,o=n.tabContentContainer,a=n.tabHeadersEl;o.empty(),SA(this.activeTabCloseable),this.updateModalTitle(e),i&&(i.navEl.removeClass("is-active"),i.hide()),this.activeTab=e,this.lastTabId=e.id,e.navEl.addClass("is-active"),this.activeTabCloseable={close:this.closeActiveTab.bind(this)},EA(this.activeTabCloseable),o.appendChild(e.containerEl),this.titleEl.createDiv({cls:"modal-setting-back-button",prepend:!0},(function(e){e.addEventListener("click",(function(){return t.closeActiveTab()})),e.createSpan("modal-setting-back-button-icon",(function(e){mx(e,"lucide-arrow-left")}))})),Zl.isPhone&&!i?(tk(a),Ll(r,o,"right")):r.appendChild(o),e.display()},t.prototype.closeActiveTab=function(){var e=this,t=this,n=t.activeTab,i=t.contentEl,r=t.tabContentContainer,o=t.tabHeadersEl;if(n){var a=function(){r.empty(),n.navEl.removeClass("is-active"),n.hide(),e.updateModalTitle(),SA(e.activeTabCloseable),e.activeTabCloseable=null};Zl.isPhone&&i.isShown()&&this.activeTab.containerEl.isShown()?Ll(i,o,"left",a):(i.setChildrenInPlace([o]),a()),ik(o),this.activeTab=null}},t.prototype.openTabById=function(e){for(var t=0,n=this.settingTabs;t<n.length;t++){if((o=n[t]).id===e)return this.openTab(o),o}for(var i=0,r=this.pluginTabs;i<r.length;i++){var o;if((o=r[i]).id===e)return this.openTab(o),o}return null},t.prototype.onOpen=function(){e.prototype.onOpen.call(this),Zl.isPhone||this.openTabById(this.lastTabId)||this.openTab(this.settingTabs[0])},t.prototype.onClose=function(){e.prototype.onClose.call(this),this.closeActiveTab()},t.prototype.animateOpen=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.modalEl.doc.body).addClass("hide-cursor"),[4,(n=this.modalEl,i=this.bgEl,r=this.bgOpacity,void 0===r&&(r="0.85"),new Promise((function(e){var t=n.offsetWidth-1,o=Math.clamp(.35*t,100,250);wl(n,new ml({duration:o,fn:"var(--anim-motion-swing)"}).addProp("transform","translateX(-".concat(t,"px)"),""),(function(){return e(null)})),i&&wl(i,new ml({duration:o,fn:Al}).addProp("opacity","0",r))})))];case 1:return t.sent(),e.removeClass("hide-cursor"),[2]}var n,i,r}))}))},t.prototype.animateClose=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.modalEl.doc.body).addClass("hide-cursor"),[4,(n=this.modalEl,i=this.bgEl,new Promise((function(e){var t=n.offsetWidth-1,r=Math.clamp(.35*t,100,250);wl(n,new ml({duration:r,fn:"var(--anim-motion-swing)"}).addProp("transform","","translateX(-".concat(t,"px)"),""),(function(){return e(null)})),wl(i,new ml({duration:r,fn:Dl}).addProp("opacity",null,"0",""))})))];case 1:return t.sent(),e.removeClass("hide-cursor"),[2]}var n,i}))}))},t}(ZA),c2="1.8.9",u2="28.2.3";function h2(e){return!sL(c2,e)}Ef((function(e){c2=e.ipcRenderer.sendSync("version")}));var d2=function(e){this.appContainerEl=null,this.horizontalMainContainerEl=null,this.workspaceEl=null,this.statusBarEl=null,this.appContainerEl=e.createDiv("app-container"),this.horizontalMainContainerEl=this.appContainerEl.createDiv("horizontal-main-container"),this.workspaceEl=this.horizontalMainContainerEl.createDiv("workspace"),this.statusBarEl=this.appContainerEl.createDiv("status-bar")};function p2(e){var t=e.frameDom;if(t){var n=e.document.createDocumentFragment();if(!Zl.isMacOS){var i=n.createDiv("titlebar-button mod-logo");i.addEventListener("mousedown",(function(e){return e.preventDefault()})),i.addEventListener("click",(function(){return e.electron.ipcRenderer.send("render-menu")})),i.addEventListener("contextmenu",(function(){return e.electron.ipcRenderer.send("render-menu")}));var r=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttrs({viewBox:"0 0 512 512",width:String(e),height:String(e)}),t.innerHTML='<radialGradient id="logo-bottom-left" cx="0" cy="0" gradientTransform="matrix(-59 -225 150 -39 161.4 470)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".4"/><stop offset="1" stop-opacity=".1"/></radialGradient><radialGradient id="logo-top-right" cx="0" cy="0" gradientTransform="matrix(50 -379 280 37 360 374.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".6"/><stop offset="1" stop-color="#fff" stop-opacity=".1"/></radialGradient><radialGradient id="logo-top-left" cx="0" cy="0" gradientTransform="matrix(69 -319 218 47 175.4 307)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".8"/><stop offset="1" stop-color="#fff" stop-opacity=".4"/></radialGradient><radialGradient id="logo-bottom-right" cx="0" cy="0" gradientTransform="matrix(-96 -163 187 -111 335.3 512.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".3"/><stop offset="1" stop-opacity=".3"/></radialGradient><radialGradient id="logo-top-edge" cx="0" cy="0" gradientTransform="matrix(-36 166 -112 -24 310 128.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity="0"/><stop offset="1" stop-color="#fff" stop-opacity=".2"/></radialGradient><radialGradient id="logo-left-edge" cx="0" cy="0" gradientTransform="matrix(88 89 -190 187 111 220.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".2"/><stop offset="1" stop-color="#fff" stop-opacity=".4"/></radialGradient><radialGradient id="logo-bottom-edge" cx="0" cy="0" gradientTransform="matrix(9 130 -276 20 215 284)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".2"/><stop offset="1" stop-color="#fff" stop-opacity=".3"/></radialGradient><radialGradient id="logo-middle-edge" cx="0" cy="0" gradientTransform="matrix(-198 -104 327 -623 400 399.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".2"/><stop offset=".5" stop-color="#fff" stop-opacity=".2"/><stop offset="1" stop-color="#fff" stop-opacity=".3"/></radialGradient><clipPath id="clip"><path d="M.2.2h512v512H.2z"/></clipPath><g clip-path="url(#clip)"><path d="M382.3 475.6c-3.1 23.4-26 41.6-48.7 35.3-32.4-8.9-69.9-22.8-103.6-25.4l-51.7-4a34 34 0 0 1-22-10.2l-89-91.7a34 34 0 0 1-6.7-37.7s55-121 57.1-127.3c2-6.3 9.6-61.2 14-90.6 1.2-7.9 5-15 11-20.3L248 8.9a34.1 34.1 0 0 1 49.6 4.3L386 125.6a37 37 0 0 1 7.6 22.4c0 21.3 1.8 65 13.6 93.2 11.5 27.3 32.5 57 43.5 71.5a17.3 17.3 0 0 1 1.3 19.2 1494 1494 0 0 1-44.8 70.6c-15 22.3-21.9 49.9-25 73.1z" fill="#6c31e3"/><path d="M165.9 478.3c41.4-84 40.2-144.2 22.6-187-16.2-39.6-46.3-64.5-70-80-.6 2.3-1.3 4.4-2.2 6.5L60.6 342a34 34 0 0 0 6.6 37.7l89.1 91.7a34 34 0 0 0 9.6 7z" fill="url(#logo-bottom-left)"/><path d="M278.4 307.8c11.2 1.2 22.2 3.6 32.8 7.6 34 12.7 65 41.2 90.5 96.3 1.8-3.1 3.6-6.2 5.6-9.2a1536 1536 0 0 0 44.8-70.6 17 17 0 0 0-1.3-19.2c-11-14.6-32-44.2-43.5-71.5-11.8-28.2-13.5-72-13.6-93.2 0-8.1-2.6-16-7.6-22.4L297.6 13.2a34 34 0 0 0-1.5-1.7 96 96 0 0 1 2 54 198.3 198.3 0 0 1-17.6 41.3l-7.2 14.2a171 171 0 0 0-19.4 71c-1.2 29.4 4.8 66.4 24.5 115.8z" fill="url(#logo-top-right)"/><path d="M278.4 307.8c-19.7-49.4-25.8-86.4-24.5-115.9a171 171 0 0 1 19.4-71c2.3-4.8 4.8-9.5 7.2-14.1 7.1-13.9 14-27 17.6-41.4a96 96 0 0 0-2-54A34.1 34.1 0 0 0 248 9l-105.4 94.8a34.1 34.1 0 0 0-10.9 20.3l-12.8 85-.5 2.3c23.8 15.5 54 40.4 70.1 80a147 147 0 0 1 7.8 24.8c28-6.8 55.7-11 82.1-8.3z" fill="url(#logo-top-left)"/><path d="M333.6 511c22.7 6.2 45.6-12 48.7-35.4a187 187 0 0 1 19.4-63.9c-25.6-55-56.5-83.6-90.4-96.3-36-13.4-75.2-9-115 .7 8.9 40.4 3.6 93.3-30.4 162.2 4 1.8 8.1 3 12.5 3.3 0 0 24.4 2 53.6 4.1 29 2 72.4 17.1 101.6 25.2z" fill="url(#logo-bottom-right)"/><g clip-rule="evenodd" fill-rule="evenodd"><path d="M254.1 190c-1.3 29.2 2.4 62.8 22.1 112.1l-6.2-.5c-17.7-51.5-21.5-78-20.2-107.6a174.7 174.7 0 0 1 20.4-72c2.4-4.9 8-14.1 10.5-18.8 7.1-13.7 11.9-21 16-33.6 5.7-17.5 4.5-25.9 3.8-34.1 4.6 29.9-12.7 56-25.7 82.4a177.1 177.1 0 0 0-20.7 72z" fill="url(#logo-top-edge)"/><path d="M194.3 293.4c2.4 5.4 4.6 9.8 6 16.5L195 311c-2.1-7.8-3.8-13.4-6.8-20-17.8-42-46.3-63.6-69.7-79.5 28.2 15.2 57.2 39 75.7 81.9z" fill="url(#logo-left-edge)"/><path d="M200.6 315.1c9.8 46-1.2 104.2-33.6 160.9 27.1-56.2 40.2-110.1 29.3-160z" fill="url(#logo-bottom-edge)"/><path d="M312.5 311c53.1 19.9 73.6 63.6 88.9 100-19-38.1-45.2-80.3-90.8-96-34.8-11.8-64.1-10.4-114.3 1l-1.1-5c53.2-12.1 81-13.5 117.3 0z" fill="url(#logo-middle-edge)"/></g></g>',t}(18);r.addClass("logo-full");var o=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttrs({viewBox:"0 0 512 512",width:String(e),height:String(e),fill:"none",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}),t.innerHTML='<path d="M172.7 461.6c73.6-149.1 2.1-217-43.7-246.9m72 96.7c71.6-17.3 141-16.3 189.8 88.5m-114-96.3c-69.6-174 44.6-181 16.3-273.6m97.7 370c1.6-3 3.3-5.8 5.1-8.6 20-29.9 34.2-53.2 41.4-65.3a16 16 0 0 0-1.2-17.7 342.1 342.1 0 0 1-40.2-66.1c-10.9-26-12.5-66.5-12.6-86.2 0-7.4-2.4-14.7-7-20.6l-81.8-104a32 32 0 0 0-1.4-1.5m97.7 370a172.8 172.8 0 0 0-18 59c-2.9 21.5-24 38.4-45 32.6-30-8.3-64.5-21.1-95.7-23.5l-47.8-3.6c-7.7-.6-15-4-20.3-9.5l-82.3-84.8c-9-9.2-11.4-23-6.2-34.8 0 0 51-111.8 52.8-117.7l.7-3M293.1 30a31.5 31.5 0 0 0-44.4-2.3l-97.4 87.5c-5.4 5-9 11.5-10 18.8-3.7 24.5-9.7 68-12.3 80.7"/>',t}(18);o.addClass("logo-wireframe"),i.appendChild(r),i.appendChild(o)}t.leftButtonContainerEl.appendChild(n),t.updateStatus()}}var f2={"encrypted-media":!0,fullscreen:!0,gamepad:!0,hid:!0,"idle-detection":!0,"oversized-images":!0,"picture-in-picture":!0,"sync-xhr":!0},m2={"allow-forms":!0,"allow-modals":!0,"allow-popups":!0,"allow-presentation":!0,"allow-same-origin":!0,"allow-scripts":!0};DOMPurify.addHook("afterSanitizeAttributes",(function(e){e.instanceOf(HTMLIFrameElement)&&(e.hasAttribute("sandbox")?VT(e,"sandbox"," ",m2):e.setAttribute("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals"),e.hasAttribute("allow")&&VT(e,"allow",";",f2))}));try{document.fonts.load("italic 800 12px Inter"),document.fonts.load("italic 400 12px Inter"),document.fonts.load("italic 12px Inter"),document.fonts.load("800 12px Inter"),document.fonts.load("600 12px Inter"),document.fonts.load("400 12px Inter"),document.fonts.load("300 12px Inter"),document.fonts.load("200 12px Inter")}catch(e){console.error(e)}!function(e){try{var t="";Ul?t="mod-macos":_l?t="mod-windows":Wl&&(t="mod-linux"),t&&e.body.addClass(t)}catch(e){console.error(e)}}(document),nm(document),Sx(),window.addEventListener("touchstart",(function(e){1===e.touches.length&&(Fc.sx=e.changedTouches[0].clientX,Fc.sy=e.changedTouches[0].clientY,Fc.t=Date.now())}),!0),window.addEventListener("touchend",(function(e){0===e.touches.length&&(Fc.ex=e.changedTouches[0].clientX,Fc.ey=e.changedTouches[0].clientY,Fc.t=Date.now())}),!0),document.addEventListener("scroll",(function(){return document.documentElement.scrollTop=0}),{passive:!1});var v2="EmulateMobile",g2="DebugMode",y2=function(){function e(e,t){var n=this;this.appMenuBarManager=null,this.embedRegistry=new lV,this.viewRegistry=new dW,this.nextFrameEvents=[],this.nextFrameTimer=null,this.fileManager=null,this.setting=null,this.isMobile=!1,this.mobileToolbar=null,this.mobileNavbar=null,this.mobileTabSwitcher=null,this.lastEvent=null,console.log("%cObsidian Developer Console","color:#7f6df2; font-size:40px; font-weight:bold;");var i,r,o=document.body;this.title=document.title,this.appId=t,this.keymap=Ak.init(),this.scope=Ak.global.getRootScope(),this.commands=new fW(this),this.hotkeyManager=new cA(this),this.dragManager=new qx(this),this.dom=new d2(o),this.customCss=new LK(this),this.shareReceiver=new FZ(this),o.addClass("obsidian-app"),"1"===this.loadLocalStorage(g2)&&function(e){(Yj=e)?(new JA("Obsidian debug mode enabled."),console.debug("[Obsidian] Debug mode enabled. Run `app.debugMode(false)` to disable.")):(new JA("Obsidian debug mode disabled."),console.debug("[Obsidian] Debug mode disabled."))}(!0),!Zl.isMobile&&localStorage.getItem(v2)&&(Zl.isMobile=!0,Zl.isDesktop=!1,o.addClass("emulate-mobile"),Zl.isMobile&&(document.body.on("mouseover",Pc,(function(e,t){xc(e,t)&&(Bc(e)||(null==Ic||Ic.removeClass(Lc),(Ic=t).addClass(Lc)))})),document.body.on("mouseout",Pc,(function(e,t){Bc(e)||xc(e,t)&&(null==Ic||Ic.removeClass(Lc))})),document.addEventListener("touchstart",(function(e){if(1===e.touches.length){var t,n=e.targetNode;if(n.instanceOf(Element)&&((t=n.matchParent(Pc))||(t=n.instanceOf(HTMLElement)?n:n.parentElement)),t){var i=e.timeStamp,r=e.touches[0],o=r.identifier,a=!1,s=window.setTimeout((function(){a||t.addClass(Lc)}),10),l=function(e){a=!0,u();var n=Math.max(10,300-(e.timeStamp-i));window.setTimeout((function(){return t.removeClass(Lc)}),n)},c=function(e){var t=Nc(e,o);t&&!a&&(window.clearTimeout(s),Hl(Bl(t),Bl(r))>5&&l(e))},u=function(){document.removeEventListener("touchmove",c),document.removeEventListener("touchcancel",l),document.removeEventListener("touchend",l)};document.addEventListener("touchmove",c),document.addEventListener("touchcancel",l),document.addEventListener("touchend",l)}}}),!0)),window.frameDom&&window.frameDom.titleBarEl.hide(),i=window.matchMedia("(min-width: 600px) and (min-height: 600px)"),r=function(){Zl.mobileSoftKeyboardVisible||(Zl.isTablet=i.matches,Zl.isPhone=!i.matches,document.body.toggleClass("is-tablet",Zl.isTablet),document.body.toggleClass("is-phone",Zl.isPhone))},i.addEventListener("change",mc(r,10)),r()),this.isMobile=Zl.isMobile,Zl.isMobile&&(o.addClass("is-mobile"),o.style.backgroundColor="var(--system-status-background)"),Zl.isMacOS&&document.body.addClass("native-scrollbars"),Zl.isIosApp&&function(){document.body.style["-webkit-touch-callout"]="none";var e=window;e.addEventListener("touchstart",(function(t){if(!(t.touches.length>1)){var n=t.touches[0],i=t.targetNode,r=n.clientX,o=n.clientY,a=n.identifier,s=800;i instanceof Element&&i.matchParent('[draggable="true"]')&&(s=2e3);var l=window.setTimeout((function(){c(),i.dispatchEvent(new MouseEvent("contextmenu",{button:0,buttons:0,ctrlKey:t.ctrlKey,altKey:t.altKey,metaKey:t.metaKey,shiftKey:t.shiftKey,screenX:n.screenX,screenY:n.screenY,bubbles:!0,cancelable:!0,clientX:r,clientY:o}))||navigator.vibrate(200)}),s),c=function(){e.removeEventListener("touchcancel",h,!0),e.removeEventListener("touchend",h,!0),e.removeEventListener("touchmove",d,!0),e.removeEventListener("dragstart",p,!0),window.clearTimeout(l),Dc=null};Dc=c;var u=function(e,t){var n=t.clientX-r,i=t.clientY-o;n*n+i*i>25&&c()},h=function(e){for(var t=e.changedTouches,n=0;n<t.length;n++){if(t[n].identifier===a)return void c()}},d=function(e){for(var t=e.changedTouches,n=0;n<t.length;n++){var i=t[n];if(i.identifier===a)return void u(0,i)}},p=function(e){var t=e.targetNode;t&&(t===i||t.contains(i))&&c()};e.addEventListener("touchcancel",h,!0),e.addEventListener("touchend",h,!0),e.addEventListener("touchmove",d,!0),e.addEventListener("dragstart",p,!0)}}))}(),window.ServiceWorkerContainer&&(window.ServiceWorkerContainer.prototype.register=function(){return new Promise((function(){}))}),g(n,void 0,void 0,(function(){var t,n,i,r=this;return y(this,(function(o){switch(o.label){case 0:t=iG.instance,n=setTimeout((function(){t.setContext((function(e){e.createDiv("progress-bar-button-container",(function(e){e.createEl("button",{text:Qf.interface.startUp.buttonReloadApp()},(function(e){e.onClickEvent((function(){window.location.reload()}))})),r.plugins&&r.plugins.isEnabled()&&e.createEl("button",{cls:"mod-cta",text:Qf.interface.startUp.buttonReloadAppInSafeMode()},(function(e){e.onClickEvent((function(){return g(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.plugins.setEnable(!1)];case 1:return e.sent(),window.location.reload(),[2]}}))}))}))})),e.createEl("button",{text:Qf.interface.startUp.buttonOpenAnotherVault()},(function(e){e.onClickEvent((function(){r.openVaultChooser()}))}))}))}))}),2e4),o.label=1;case 1:return o.trys.push([1,3,4,7]),t.setMessage(Qf.interface.startUp.loadingObsidian()).delayedShow(300),[4,this.initializeWithAdapter(e)];case 2:return o.sent(),t.hide(),[3,7];case 3:return i=o.sent(),console.error(i),t.setMessage(Qf.interface.startUp.obsidianLoadError()+" "+(i?i.toString():"unknown")),t.setContext((function(e){e.createDiv("progress-bar-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:Qf.interface.startUp.buttonReloadApp()},(function(e){e.onClickEvent((function(){window.location.reload()}))})),r.plugins&&r.plugins.isEnabled()&&e.createEl("button",{cls:"mod-cta",text:Qf.interface.startUp.buttonReloadAppInSafeMode()},(function(e){e.onClickEvent((function(){return g(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.plugins.setEnable(!1)];case 1:return e.sent(),window.location.reload(),[2]}}))}))}))})),e.createEl("button",{cls:"mod-cta",text:Qf.interface.startUp.buttonOpenAnotherVault()},(function(e){e.onClickEvent((function(){r.openVaultChooser()}))}))}))})),[3,7];case 4:return clearTimeout(n),Zl.isMobileApp&&mA?[4,window.nextFrame()]:[3,6];case 5:o.sent(),mA.hide(),o.label=6;case 6:return[7];case 7:return[2]}}))})),g(n,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),(e=navigator.storage)&&e.persist?[4,e.persist()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[3,4];case 3:return t.sent(),console.log("Failed to persist local storages"),[3,4];case 4:return[2]}}))}))}return e.prototype.nextFrame=function(e){this.nextFrameTimer||(this.nextFrameTimer=window.requestAnimationFrame(this.onNextFrame.bind(this))),this.nextFrameEvents.push(e)},e.prototype.nextFramePromise=function(){var e=this;return new Promise((function(t){return e.nextFrame(t)}))},e.prototype.onNextFrame=function(e){this.nextFrameTimer=null;var t=this.nextFrameEvents;this.nextFrameEvents=[];for(var n=0,i=t;n<i.length;n++){(0,i[n])(e)}},e.prototype.nextFrameOnceCallback=function(e){var t=this,n=!1;return function(){n||(n=!0,t.nextFrame((function(t){n=!1,e(t)})))}},e.prototype.initializeWithAdapter=function(t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d,p,f=this;return y(this,(function(m){switch(m.label){case 0:if(n=this.vault=new Cw(t),!Zl.isDesktopApp)return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,n.readRaw("")];case 2:return m.sent(),[3,4];case 3:return"ENOENT"===(i=m.sent()).code?(this.vault=null,this.openVaultChooser(!0),[2]):(i.code,[3,4]);case 4:return n.on("closed",(function(){return f.openVaultChooser(!0)})),n.on("config-changed",this.onConfigChanged.bind(this)),(r=e.getOverrideConfigDir(this.appId))&&n.setConfigDir(r),[4,n.setupConfig()];case 5:return m.sent(),Jj("vault.setup"),this.disableCssTransition(),this.workspace=new YK(this,this.dom.workspaceEl),this.fileManager=new wL(this),this.statusBar=new L0(this,this.dom.statusBarEl),this.metadataCache=new j_(this,n),this.metadataTypeManager=new YA(this),this.setting=new l2(this),this.foldManager=new RY(this),o=this.internalPlugins=new kY(this),a=this.plugins=new cY(this),Jj("workspace.components"),s=function(){"system"===n.getConfig("theme")&&f.updateTheme()},window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s),Zl.isDesktopApp&&window.electron.remote.nativeTheme.removeAllListeners("updated").on("updated",s),this.updateAccentColor(),this.updateTheme(),this.updateFontFamily(),this.updateFontSize(),this.updateTabSize(),this.customCss.load(),this.updateInlineTitleDisplay(),this.updateRibbonDisplay(),this.updateViewHeaderDisplay(),this.updateUseNativeMenu(),Jj("workspace.appearance"),Zl.isDesktopApp&&(this.appMenuBarManager=new BY(this)),Zl.isMobile&&(this.mobileToolbar=new qY(this),this.mobileNavbar=new HY(this),this.mobileTabSwitcher=new zY(this)),this.shareReceiver.setupWorkspace(),[4,this.hotkeyManager.load()];case 6:return m.sent(),this.registerCommands(),Jj("workspace.components"),iG.instance.setMessage(Qf.interface.startUp.loadingPlugins()),o.loadPlugin(new gQ),o.loadPlugin(new _Y),o.loadPlugin(new p1),o.loadPlugin(new jG),o.loadPlugin(new MY),o.loadPlugin(new q$),o.loadPlugin(new VQ),o.loadPlugin(new c0),o.loadPlugin(new nF),o.loadPlugin(new ZQ),o.loadPlugin(new rQ),o.loadPlugin(new v0),o.loadPlugin(new FQ),o.loadPlugin(new Y$),o.loadPlugin(new g1),o.loadPlugin(new aQ),o.loadPlugin(new KZ),o.loadPlugin(new EQ),o.loadPlugin(new k0),o.loadPlugin(new v1),o.loadPlugin(new KQ),o.loadPlugin(new S0),o.loadPlugin(new k1),o.loadPlugin(new HZ),o.loadPlugin(new T0),o.loadPlugin(new wQ),o.loadPlugin(new u1),o.loadPlugin(new a0),Zl.isDesktopApp&&o.loadPlugin(new dZ),[4,o.enable()];case 7:return m.sent(),Jj("corePlugins"),[4,a.initialize()];case 8:m.sent(),iG.instance.setMessage(Qf.interface.startUp.loadingVault()),m.label=9;case 9:return m.trys.push([9,11,,12]),this.metadataCache.preload(),[4,this.vault.load()];case 10:return m.sent(),[3,12];case 11:throw l=m.sent(),new JA(Qf.interface.startUp.msgFailedToLoadVault()+l?l.message:""),console.error(l),l;case 12:return this.hotkeyManager.registerListeners(),this.metadataTypeManager.registerListeners(),iG.instance.setMessage(Qf.interface.startUp.loadingCache()),[4,this.metadataCache.initialize()];case 13:return m.sent(),Jj("vault"),iG.instance.setMessage(Qf.interface.startUp.loadingWorkspace()),[4,this.workspace.loadLayout()];case 14:return m.sent(),Jj("workspace.layout"),setTimeout((function(){f.enableCssTransition()}),500),this.workspace.registerUriHook(),this.registerQuitHook(),this.metadataCache.showIndexingNotice(),this.shareReceiver.setupNative(),Zl.isDesktopApp&&(c=!1,u=function(){c||(c=!0,new JA(createFragment((function(e){e.createEl("b",{text:Qf.interface.labelUpdateAvailable()}),e.createEl("p",{text:Qf.setting.about.labelManualUpdateRequired()})})),0).addButton(Qf.dialogue.buttonDownload(),(function(){return window.open(jA())})))},sL(Pf,u2)&&!electron.ipcRenderer.sendSync("disable-update")?u():(h=function(){Ef((function(e){"update-manual-required"===e.ipcRenderer.sendSync("update")&&(clearInterval(d),u())}))},d=setInterval(h,36e5),h()),sL(null!==(p=localStorage.getItem("most-recently-installed-version"))&&void 0!==p?p:electron.remote.app.getVersion(),c2)&&(this.showReleaseNotes(),localStorage.setItem("most-recently-installed-version",c2))),Zl.isDesktopApp&&electron&&window.addEventListener("drop",(function(e){var t=e.dataTransfer;if(Ik(t)){var n=Fk(t,"drop",!1);if(1!==n.length)return!1;var i=n[0];if("asar"===i.extension&&i.name.match(/obsidian-\d+\.\d+\.\d+/)){e.preventDefault();var r=i.name.slice(9);c2===r||sL(c2,r)?new XA(f).setTitle("Install Obsidian v"+r+"?").setContent("This build is potentially experimental. Ensure your vault data is backed up.").addButton("mod-cta","Install",(function(){electron.ipcRenderer.sendSync("copy-asar",i.filepath)&&electron.ipcRenderer.sendSync("relaunch")})).addCancelButton().open():new XA(f).setTitle("Unable to install Obsidian v"+r).setContent("The build is older than the currently installed version of Obsidian (v".concat(c2,").")).addButton("mod-cancel","Okay",(function(){})).open()}}}),{capture:!0}),Jj("workspace.extra"),window.setTimeout((function(){try{var e=f.internalPlugins.getPluginById("sync");e&&!e.enabled&&function(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),F_(n).then((()=>{}))}(f.appId+"-sync")}catch(e){console.error("Failed to clean-up Sync DB",e)}}),3e4),function(e){Qj.duration=performance.now();var t=0,n=0;e.workspace.iterateAllLeaves((function(e){t++,(e.view instanceof Gj||e.view instanceof KP||e.view instanceof Kj)&&n++})),$j.views=t,$j.deferredViews=n,Xj.sort((function(e,t){return e.ts-t.ts}));for(var i=0,r=0,o=Xj;r<o.length;r++){var a=o[r],s=a.ts-i;i=a.ts;for(var l=Qj,c=0,u=a.key.split(".");c<u.length;c++){var h=u[c];l.children[h]||(l.children[h]={key:h,children:{},duration:0}),(l=l.children[h]).duration+=s}}Xj=[]}(this),"1"===(v=this).loadLocalStorage("slow-startup-check")&&tG()>8e3&&new JA(Qf.interface.msgSlowBoot()).addButton(Qf.dialogue.buttonView(),(function(){var e=new sJ(v);e.shouldAnimate=!1,e.open()})),[2]}var v}))}))},e.prototype.onConfigChanged=function(e){switch(e){case"accentColor":this.updateAccentColor();break;case"theme":this.updateTheme();break;case"interfaceFontFamily":case"textFontFamily":case"monospaceFontFamily":this.updateFontFamily();break;case"baseFontSize":this.updateFontSize();break;case"showInlineTitle":this.updateInlineTitleDisplay();break;case"showViewHeader":this.updateViewHeaderDisplay();break;case"showRibbon":this.updateRibbonDisplay(),this.workspace.updateFrameless();break;case"nativeMenus":this.updateUseNativeMenu();break;case"mobileQuickRibbonItem":this.mobileNavbar.updateRibbonMenuItem();break;case"tabSize":this.updateTabSize()}},e.prototype.registerCommands=function(){var e=this,t=this.commands;t.addCommand({id:"app:go-back",name:Qf.commands.navigateBack(),icon:"lucide-arrow-left",checkCallback:function(t){var n=e.workspace.activeLeaf;if(n&&n.view.navigation)return t||n.history.back(),!0},hotkeys:[oA(["Mod","Alt"],"ArrowLeft")]}),t.addCommand({id:"app:go-forward",name:Qf.commands.navigateForward(),icon:"lucide-arrow-right",checkCallback:function(t){var n=e.workspace.activeLeaf;if(n&&n.view.navigation)return t||n.history.forward(),!0},hotkeys:[oA(["Mod","Alt"],"ArrowRight")]}),t.addCommand({id:"app:open-vault",name:Qf.interface.switchVault(),icon:"vault",callback:this.openVaultChooser.bind(this)}),Zl.isMobile&&t.addCommand({id:"app:show-tab-switcher",name:Qf.interface.mobile.actionShowSwitcher(),icon:"lucide-square",checkCallback:function(t){if(Zl.isPhone)return t||e.mobileTabSwitcher.show(),!0}}),t.addCommand({id:"theme:use-dark",name:Qf.commands.useDarkMode(),callback:function(){return e.changeTheme("obsidian")}}),t.addCommand({id:"theme:use-light",name:Qf.commands.useLightMode(),callback:function(){return e.changeTheme("moonstone")}}),t.addCommand({id:"theme:switch",name:Qf.commands.changeTheme(),callback:function(){return new PK(e).open()}}),t.addCommand({id:"app:open-settings",name:Qf.commands.openSettings(),icon:"lucide-settings",callback:function(){return e.setting.open()},hotkeys:[oA(["Mod"],",")]}),Zl.isDesktopApp&&t.addCommand({id:"app:show-release-notes",name:Qf.commands.showReleaseNotes(),callback:function(){return e.showReleaseNotes()}}),t.addCommand({id:"markdown:toggle-preview",name:Qf.commands.togglePreview(),icon:"lucide-book-open",checkCallback:function(t){var n=e.workspace.activeEditor;if(n)return t||n.toggleMode(),!0},hotkeys:[oA(["Mod"],"E")]});var n=function(){if(FF(e.workspace))return!0;if(e.internalPlugins.getEnabledPluginById("properties")){var t=e.workspace.getActiveFile();return t&&"md"===t.extension}return!1};t.addCommand({id:"markdown:add-metadata-property",name:Qf.commands.addProperty(),icon:"lucide-plus-circle",checkCallback:function(t){if(n())return t||g(e,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,OF(this)];case 1:return null==(e=t.sent())||e.addProperty(),[2]}}))})),!0},hotkeys:[oA(["Mod"],";")]}),t.addCommand({id:"markdown:add-alias",name:Qf.commands.addAlias(),icon:"lucide-forward",checkCallback:function(t){if(n())return t||g(e,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,OF(this)];case 1:return null==(e=t.sent())||e.addProperty("aliases"),[2]}}))})),!0}}),t.addCommand({id:"markdown:edit-metadata-property",name:Qf.commands.editProperty(),icon:"lucide-package-open",checkCallback:function(t){var n=e.workspace.activeEditor;if(n&&n instanceof LY&&n.metadataEditor.focusedLine)return t||n.editProperty(),!0}}),t.addCommand({id:"markdown:clear-metadata-properties",name:Qf.commands.clearProperties(),icon:"lucide-package-x",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n&&GT.contains(n.extension))return t||e.vault.process(n,(function(e){return DL(e,{})})),!0}}),t.addCommand({id:"app:delete-file",name:Qf.commands.deleteCurrentFile(),icon:"lucide-trash-2",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||e.fileManager.promptForFileDeletion(n),!0}}),t.addCommand({id:"app:toggle-ribbon",name:Qf.commands.toggleRibbon(),checkCallback:function(t){if(Zl.isDesktop&&activeWindow===window){if(!t){var n=e.vault.getConfig("showRibbon");e.vault.setConfig("showRibbon",!n)}return!0}return!1}}),t.addCommand({id:"app:toggle-left-sidebar",name:Qf.commands.toggleLeftSidebar(),checkCallback:function(t){if(activeWindow===window){if(!t){var n=e.workspace.leftSplit;Zl.canPinSidebar&&n instanceof CG?n.togglePinned():n.toggle()}return!0}return!1}}),t.addCommand({id:"app:toggle-right-sidebar",name:Qf.commands.toggleRightSidebar(),checkCallback:function(t){if(activeWindow===window){if(!t){var n=e.workspace.rightSplit;Zl.canPinSidebar&&n instanceof CG?n.togglePinned():n.toggle()}return!0}return!1}}),t.addCommand({id:"app:toggle-default-new-pane-mode",name:Qf.commands.toggleDefaultNewTabMode(),callback:function(){var t=e.vault.getConfig("defaultViewMode");"source"===t?(e.vault.setConfig("defaultViewMode","preview"),new JA(Qf.interface.msgSwitchedToRead())):"preview"===t&&(e.vault.setConfig("defaultViewMode","source"),new JA(Qf.interface.msgSwitchedToEdit()))}}),t.addCommand({id:"app:open-help",name:Qf.commands.openHelp(),icon:"question-mark-glyph",callback:this.openHelp.bind(this),hotkeys:[oA([],"F1")]}),t.addCommand({id:"app:reload",name:Qf.commands.reload(),icon:"lucide-rotate-ccw",callback:function(){return window.location.reload()}}),t.addCommand({id:"app:show-debug-info",name:Qf.commands.showDebugInfo(),callback:function(){return new lK(e).open()}}),Zl.isDesktopApp&&(t.addCommand({id:"app:open-sandbox-vault",name:Qf.commands.openSandboxVault(),callback:function(){electron.ipcRenderer.sendSync("sandbox")}}),t.addCommand({id:"window:toggle-always-on-top",name:Qf.commands.alwaysOnTop(),checkCallback:function(e){if(activeWindow!==window){var t=activeWindow.electronWindow;if(!t.isMaximized())return e||t.setAlwaysOnTop(!t.isAlwaysOnTop()),!0}return!1}}),t.addCommand({id:"window:zoom-in",name:Qf.commands.zoomIn(),callback:function(){var e=electron.webFrame.getZoomLevel();e<3&&electron.webFrame.setZoomLevel(e+.5)}}),t.addCommand({id:"window:zoom-out",name:Qf.commands.zoomOut(),callback:function(){var e=electron.webFrame.getZoomLevel();e>-2.5&&electron.webFrame.setZoomLevel(e-.5)}}),t.addCommand({id:"window:reset-zoom",name:Qf.commands.resetZoom(),callback:function(){electron.webFrame.setZoomLevel(0)}})),t.addCommand({id:"file-explorer:new-file",name:Qf.plugins.fileExplorer.actionCreateNote(),icon:"lucide-file-plus",callback:function(){return e.fileManager.createAndOpenMarkdownFile("","tab")},hotkeys:[oA(["Mod"],"N")]}),t.addCommand({id:"file-explorer:new-file-in-current-tab",name:Qf.plugins.fileExplorer.actionCreateNoteInCurrentTab(),icon:"lucide-file-plus",callback:function(){return e.fileManager.createAndOpenMarkdownFile("",!1)}}),t.addCommand({id:"file-explorer:new-file-in-new-pane",name:Qf.plugins.fileExplorer.actionCreateNoteToTheRight(),icon:"lucide-file-plus",callback:function(){return e.fileManager.createAndOpenMarkdownFile("","split")},hotkeys:[oA(["Mod","Shift"],"N")]}),t.addCommand({id:"open-with-default-app:open",name:Zl.isMobileApp?Qf.plugins.openWithDefaultApp.actionOpenFileMobile():Qf.plugins.openWithDefaultApp.actionOpenFile(),icon:"lucide-arrow-up-right",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||e.openWithDefaultApp(n.path),!0}}),t.addCommand({id:"file-explorer:move-file",name:Qf.plugins.fileExplorer.commandMoveFile(),icon:"lucide-folder-tree",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||new fK(e,[n]).open(),!0}}),t.addCommand({id:"file-explorer:duplicate-file",name:Zl.isMacOS?Qf.plugins.fileExplorer.commandMakeACopyMac():Qf.plugins.fileExplorer.commandMakeACopy(),icon:"lucide-files",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||g(e,void 0,void 0,(function(){var e,t;return y(this,(function(i){switch(i.label){case 0:return e=this.vault.getAvailablePath($c(n.path),n.extension),[4,this.vault.copy(n,e)];case 1:return t=i.sent(),this.workspace.getLeaf("tab").openFile(t,{active:!0,eState:{rename:"all"}}),[2]}}))})),!0}}),Zl.isDesktopApp&&t.addCommand({id:"open-with-default-app:show",name:Zl.isMacOS?Qf.plugins.openWithDefaultApp.actionShowInFolderMac():Qf.plugins.openWithDefaultApp.actionShowInFolder(),icon:"lucide-files",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||e.showInFolder(n.path),!0}}),function(e){var t=this,n=e.commands;function i(){var t=e.vault.getConfig("foldHeading"),n=e.vault.getConfig("foldIndent");return t||n}n.addCommand({id:"editor:toggle-source",name:Qf.commands.toggleSourceMode(),icon:"lucide-code-2",checkCallback:function(t){var n=e.workspace.activeEditor;if(n instanceof LY&&n.currentMode===n.editMode){if(!t){var i=n.leaf,r=n.getState();r.source=!r.source,i.setViewState({type:AY,state:r,active:!0}),e.workspace.requestSaveLayout()}return!0}}}),n.addCommand({id:"editor:open-search",name:Qf.commands.searchCurrentFile(),icon:"lucide-search",checkCallback:function(t){var n,i=e.workspace.activeEditor;if(i&&FA(i))return t||i.showSearch(!1),!0;var r=null===(n=e.workspace.activeLeaf)||void 0===n?void 0:n.view;return r&&FA(r)?(t||r.showSearch(!1),!0):void 0},hotkeys:[oA(["Mod"],"F")]}),n.addCommand({id:"editor:open-search-replace",name:Qf.commands.searchReplaceCurrentFile(),icon:"lucide-search",checkCallback:function(t){var n=e.workspace.activeEditor;if(n&&"source"===n.getMode())return t||n.showSearch(!0),!0},hotkeys:[Ul?oA(["Mod","Alt"],"F"):oA(["Mod"],"H")]}),n.addCommand({id:"editor:focus",name:Qf.commands.focusEditor(),checkCallback:function(t){var n=e.workspace.getActiveViewOfType(LY);if(!n){var i=null;e.workspace.iterateAllLeaves((function(e){e.view instanceof LY&&(!i||i.activeTime<e.activeTime)&&(i=e)})),i&&(n=i.view)}if(n)return t||n.editor.focus(),!0}}),n.addCommand({id:"editor:toggle-fold-properties",name:Qf.commands.toggleFoldProperties(),icon:"lucide-diff",checkCallback:function(t){var n=e.workspace.getActiveViewOfType(LY);if(n instanceof LY)return t||n.toggleCollapseProperties(),!0}}),n.addCommand({id:"editor:toggle-fold",name:Qf.commands.toggleFold(),icon:"lucide-diff",allowProperties:!0,editorCheckCallback:function(e,t,n){if(t.hasFocus()){if(i())return e||t.exec("toggleFold"),!0}else if(n instanceof LY&&n.metadataHasFocus())return e||n.toggleCollapseProperties(),!0}}),n.addCommand({id:"editor:fold-all",name:Qf.commands.foldAll(),icon:"lucide-minimize-2",allowPreview:!0,allowProperties:!0,editorCheckCallback:function(e,t,n){if(n instanceof LY&&(e||n.collapseProperties(!0)),i())return n instanceof LY&&"preview"===n.getMode()?(e||n.previewMode.foldAll(),!0):(e||t.exec("foldAll"),!0)}}),n.addCommand({id:"editor:unfold-all",name:Qf.commands.unfoldAll(),icon:"lucide-maximize-2",allowPreview:!0,allowProperties:!0,editorCheckCallback:function(e,t,n){if(n instanceof LY&&(e||n.collapseProperties(!1)),i())return n instanceof LY&&"preview"===n.getMode()?(e||n.previewMode.unfoldAll(),!0):(e||t.exec("unfoldAll"),!0)}}),n.addCommand({id:"editor:fold-less",name:Qf("commands.fold-less"),icon:"lucide-unfold-vertical",editorCallback:function(e){return e.foldLess()}}),n.addCommand({id:"editor:fold-more",name:Qf.commands.foldMore(),icon:"lucide-fold-vertical",editorCallback:function(e){return e.foldMore()}}),n.addCommand({id:"editor:insert-wikilink",name:Qf.setting.mobileToolbar.optionInternalLink(),icon:"bracket-glyph",editorCallback:function(e){e instanceof OR&&e.triggerWikilink(!1)}}),n.addCommand({id:"editor:insert-embed",name:Qf.setting.mobileToolbar.optionInternalEmbed(),icon:"lucide-sticky-note",editorCallback:function(e){e instanceof OR&&e.triggerWikilink(!0)}}),n.addCommand({id:"editor:insert-link",name:Qf.commands.insertLink(),icon:"lucide-link",editorCallback:function(e){e instanceof OR&&e.insertMarkdownLink()},hotkeys:[oA(["Mod"],"K")]}),n.addCommand({id:"editor:insert-tag",name:Qf.setting.mobileToolbar.optionTag(),icon:"lucide-tag",editorCallback:function(e){var t=e.getCursor("from");e.replaceRange("#",t,t,"input.autocomplete"),e.setSelection(Lm(t,1))}});var r=!1;n.addCommand({id:"editor:set-heading",name:Qf.setting.mobileToolbar.optionHeading(),icon:"heading-glyph",editorCallback:function(e){if(!r){r=!0,Zl.isPhone&&e.blur();for(var t=new PA,n=function(n){var i=0===n?Qf.editor.headingSuggestion.labelNoHeading():Qf.editor.headingSuggestion.labelHeadingLevel({level:n}),r=0===n?"lucide-type":"lucide-heading-"+n;t.addItem((function(t){return t.setIcon(r).setTitle(i).onClick((function(){return e.setHeading(n)}))}))},i=0,o=[0,1,2,3,4,5,6];i<o.length;i++)n(o[i]);t.onHide((function(){r=!1,Zl.isPhone&&e.focus()}));var a=e.coordsAtPos(e.getCursor());t.showAtPosition({x:a.left,y:a.top})}}}),n.addCommand({id:"editor:set-heading-0",name:Qf.commands.removeHeading(),icon:"heading-glyph",editorCallback:function(e){return e.setHeading(0)}});for(var o=function(e){n.addCommand({id:"editor:set-heading-".concat(e),name:Qf.commands.toggleHeading({level:e}),icon:"heading-glyph",editorCallback:function(t){return t.setHeading(e)}})},a=0,s=[1,2,3,4,5,6];a<s.length;a++)o(s[a]);n.addCommand({id:"editor:toggle-bold",name:Qf.commands.toggleBold(),icon:"lucide-bold",editorCallback:function(e){return e.toggleMarkdownFormatting("bold")},hotkeys:[oA(["Mod"],"B")]}),n.addCommand({id:"editor:toggle-italics",name:Qf.commands.toggleItalics(),icon:"lucide-italic",editorCallback:function(e){return e.toggleMarkdownFormatting("italic")},hotkeys:[oA(["Mod"],"I")]}),n.addCommand({id:"editor:toggle-strikethrough",name:Qf.setting.mobileToolbar.optionStrikethrough(),icon:"lucide-strikethrough",editorCallback:function(e){return e.toggleMarkdownFormatting("strikethrough")}}),n.addCommand({id:"editor:toggle-highlight",name:Qf.commands.toggleHighlight(),icon:"lucide-highlighter",editorCallback:function(e){return e.toggleMarkdownFormatting("highlight")}}),n.addCommand({id:"editor:toggle-code",name:Qf.setting.mobileToolbar.optionCode(),icon:"lucide-code-2",editorCallback:function(e){return e.toggleMarkdownFormatting("code")}}),n.addCommand({id:"editor:toggle-inline-math",name:Qf.setting.mobileToolbar.optionInlineMath(),icon:"lucide-sigma",editorCallback:function(e){return e.toggleMarkdownFormatting("math")}}),n.addCommand({id:"editor:toggle-blockquote",name:Qf.setting.mobileToolbar.optionBlockquote(),icon:"lucide-quote",editorCheckCallback:function(e,t,n){if(!t.inTableCell)return e||t.toggleBlockquote(),!0}}),n.addCommand({id:"editor:toggle-comments",name:Qf.commands.toggleComments(),icon:"lucide-percent",editorCallback:function(e){return e.toggleComment()},hotkeys:[oA(["Mod"],"/")]}),n.addCommand({id:"editor:clear-formatting",name:Qf.commands.clearFormatting(),icon:"lucide-eraser",editorCheckCallback:function(e,t){if(t instanceof OR&&t.somethingSelected())return e||t.clearMarkdownFormatting(),!0}}),n.addCommand({id:"editor:toggle-bullet-list",name:Qf.setting.mobileToolbar.optionBulletList(),icon:"lucide-list",editorCheckCallback:function(e,t,n){if(!t.inTableCell)return e||t.toggleBulletList(),!0}}),n.addCommand({id:"editor:toggle-numbered-list",name:Qf.setting.mobileToolbar.optionNumberedList(),icon:"lucide-list-ordered",editorCheckCallback:function(e,t,n){if(!t.inTableCell)return e||t.toggleNumberList(),!0}}),n.addCommand({id:"editor:toggle-checklist-status",name:Qf.commands.toggleChecklist(),icon:"lucide-check-square",editorCheckCallback:function(e,t,n){if(!t.inTableCell)return e||t.toggleCheckList(),!0},hotkeys:[oA(["Mod"],"l")]}),n.addCommand({id:"editor:cycle-list-checklist",name:Qf.commands.cycleListChecklist(),icon:"lucide-check-square",editorCheckCallback:function(e,t,n){if(!t.inTableCell)return e||t.toggleCheckList(!0),!0}}),n.addCommand({id:"editor:insert-callout",name:Qf.commands.insertCallout(),icon:"lucide-quote",editorCheckCallback:function(e,t,n){if(!t.inTableCell)return e||t.insertCallout(),!0}}),n.addCommand({id:"editor:insert-codeblock",name:Qf.commands.insertCodeBlock(),icon:"lucide-code",editorCheckCallback:function(e,t,n){if(!t.inTableCell)return e||t.insertCodeblock(),!0}}),n.addCommand({id:"editor:insert-horizontal-rule",name:Qf.commands.insertHorizontalRule(),icon:"lucide-minus",editorCallback:function(e){return e.insertHorizontalRule()}}),n.addCommand({id:"editor:insert-mathblock",name:Qf.commands.insertMathBlock(),icon:"lucide-sigma-square",editorCallback:function(e){return e.insertMathBlock()}}),n.addCommand({id:"editor:insert-table",name:Qf.commands.insertTable(),icon:"lucide-table",editorCallback:function(e){return e.insertTable()}}),n.addCommand({id:"editor:insert-footnote",name:Qf.commands.insertFootnote(),icon:"lucide-file-signature",editorCallback:function(e){return e.insertFootnote()}}),n.addCommand({id:"editor:indent-list",name:Qf.setting.mobileToolbar.optionIndentList(),icon:"lucide-indent",mobileOnly:!0,editorCallback:function(e){return e.indentList()}}),n.addCommand({id:"editor:unindent-list",name:Qf.setting.mobileToolbar.optionUnindentList(),icon:"lucide-outdent",mobileOnly:!0,editorCallback:function(e){return e.unindentList()}}),n.addCommand({id:"editor:swap-line-up",name:Qf.commands.swapLineUp(),icon:"lucide-corner-right-up",repeatable:!0,editorCallback:function(e){return e.exec("swapLineUp")}}),n.addCommand({id:"editor:swap-line-down",name:Qf.commands.swapLineDown(),icon:"lucide-corner-right-down",repeatable:!0,editorCallback:function(e){return e.exec("swapLineDown")}}),n.addCommand({id:"editor:undo",name:Qf.setting.mobileToolbar.optionUndo(),icon:"lucide-undo-2",mobileOnly:!0,editorCallback:function(e){return e.undo()}}),n.addCommand({id:"editor:redo",name:Qf.setting.mobileToolbar.optionRedo(),icon:"lucide-redo-2",mobileOnly:!0,editorCallback:function(e){return e.redo()}}),n.addCommand({id:"editor:move-caret-up",name:Qf.setting.mobileToolbar.optionMoveCaretUp(),icon:"lucide-chevron-up",mobileOnly:!0,editorCallback:function(e){return e.exec("goUp")}}),n.addCommand({id:"editor:move-caret-down",name:Qf.setting.mobileToolbar.optionMoveCaretDown(),icon:"lucide-chevron-down",mobileOnly:!0,editorCallback:function(e){return e.exec("goDown")}}),n.addCommand({id:"editor:move-caret-left",name:Qf.setting.mobileToolbar.optionMoveCaretLeft(),icon:"lucide-chevron-left",mobileOnly:!0,editorCallback:function(e){return e.exec("goLeft")}}),n.addCommand({id:"editor:move-caret-right",name:Qf.setting.mobileToolbar.optionMoveCaretRight(),icon:"lucide-chevron-right",mobileOnly:!0,editorCallback:function(e){return e.exec("goRight")}}),n.addCommand({id:"editor:go-start",name:Qf.setting.mobileToolbar.optionFirstLine(),icon:"lucide-chevrons-up",mobileOnly:!0,editorCallback:function(e){return e.exec("goStart")}}),n.addCommand({id:"editor:go-end",name:Qf.setting.mobileToolbar.optionLastLine(),icon:"lucide-chevrons-down",mobileOnly:!0,editorCallback:function(e){return e.exec("goEnd")}}),n.addCommand({id:"editor:toggle-keyboard",name:Qf.setting.mobileToolbar.optionToggleKeyboard(),icon:"keyboard-toggle",mobileOnly:!0,editorCallback:function(e){e.hasFocus()?e.blur():e.focus()}}),n.addCommand({id:"editor:configure-toolbar",name:Qf.setting.mobileToolbar.optionConfigureToolbar(),icon:"lucide-wrench",mobileOnly:!0,editorCallback:function(){var t=e.setting;t.openTabById("mobile"),t.open()}}),n.addCommand({id:"editor:attach-file",name:Qf.setting.mobileToolbar.optionAttach(),icon:"lucide-paperclip",editorCallback:function(n){var i,r=activeDocument,o=r.body.createEl("input",{type:"file"});o.style.position="fixed",o.style.opacity="0",o.style.zIndex="-9999",o.addEventListener("change",(function(){return g(t,void 0,void 0,(function(){var t,i,r,l,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:if(a(),!(t=o.files))return s(),[2];if(!(i=e.workspace.getActiveFile()))return s(),[2];p.label=1;case 1:p.trys.push([1,,7,8]),r=0,p.label=2;case 2:return r<t.length?(l=t[r],c=Kc(l.name),[4,l.arrayBuffer()]):[3,6];case 3:return u=p.sent(),[4,e.saveAttachment(Xc(c),Qc(c),u)];case 4:(h=p.sent())&&(d=e.fileManager.generateMarkdownLink(h,i.path),n.replaceSelection(d)),p.label=5;case 5:return r++,[3,2];case 6:return[3,8];case 7:return s(),[7];case 8:return[2]}}))}))}));var a=function(){r.removeEventListener("focus",l),r.removeEventListener("click",l),clearTimeout(i)},s=function(){o.detach()},l=function(){a(),i=window.setTimeout(s,5e3)};o.focus(),o.click(),setTimeout((function(){r.addEventListener("focus",l),r.addEventListener("click",l)}),0)}}),n.addCommand({id:"editor:delete-paragraph",name:Qf.commands.deleteParagraph(),icon:"lucide-scissors",repeatable:!0,editorCallback:function(e){return e.exec("deleteLine")},hotkeys:[oA(["Mod"],"D")]}),n.addCommand({id:"editor:add-cursor-below",name:Qf.commands.addCursorBelow(),icon:"lucide-mouse-pointer-click",repeatable:!0,editorCheckCallback:function(e,t){if(t instanceof OR){if(!e){for(var n=t.cm,i=n.state.selection,r=i.ranges[0],o=1;o<i.ranges.length;o++){var a=i.ranges[o];a.to>r.to&&(r=a)}var s=dm(n.state.doc,r.from),l=hm(n.state.doc,{line:s.line+1,ch:s.ch});n.dispatch({selection:i.addRange(Ee.cursor(l)),userEvent:"select"})}return!0}return!1}}),n.addCommand({id:"editor:add-cursor-above",name:Qf.commands.addCursorAbove(),icon:"lucide-mouse-pointer-click",repeatable:!0,editorCheckCallback:function(e,t){if(t instanceof OR){if(!e){for(var n=t.cm,i=n.state.selection,r=i.ranges[0],o=1;o<i.ranges.length;o++){var a=i.ranges[o];a.from<r.from&&(r=a)}var s=dm(n.state.doc,r.from),l=hm(n.state.doc,{line:s.line-1,ch:s.ch});n.dispatch({selection:i.addRange(Ee.cursor(l)),userEvent:"select"})}return!0}return!1}}),n.addCommand({id:"editor:toggle-spellcheck",name:Qf.commands.toggleSpellcheck(),callback:function(){e.vault.setConfig("spellcheck",!e.vault.getConfig("spellcheck"))}});var l=function(e,t,i,r,o){n.addCommand({id:"editor:table-"+e,name:Qf.table.labelCommand({command:t}),icon:i,editorCheckCallback:function(e,t){if(!(t instanceof OR&&t.editorComponent.tableCell))return!1;var n=t.editorComponent.tableCell;return e?!o||o(n):(r(n),!0)}})};l("row-before",Qf.table.actionRowBefore(),"lucide-arrow-up",(function(e){var t=e.table,n=e.cell;t.insertRow(n.row,n.col)})),l("row-after",Qf.table.actionRowAfter(),"lucide-arrow-down",(function(e){var t=e.table,n=e.cell;t.insertRow(n.row+1,n.col)})),l("row-up",Qf.table.actionRowUp(),"lucide-arrow-up",(function(e){var t=e.table,n=e.cell;t.moveRow(n.row,n.row-1,n.col)}),(function(e){return e.cell.row>0})),l("row-down",Qf.table.actionRowDown(),"lucide-arrow-down",(function(e){var t=e.table,n=e.cell;t.moveRow(n.row,n.row+1,n.col)}),(function(e){var t=e.table;return e.cell.row<t.rows.length-1})),l("row-copy",Qf.table.actionDuplicateRow(),"lucide-copy",(function(e){var t=e.table,n=e.cell;t.insertRow(n.row,n.col,!0)})),l("row-delete",Qf.table.actionDeleteRow(),"lucide-trash-2",(function(e){var t=e.table,n=e.cell;t.removeRow(n.row,n.col)})),l("col-before",Qf.table.actionColumnBefore(),"lucide-arrow-left",(function(e){var t=e.table,n=e.cell,i=t.alignments[n.col];t.insertColumn(n.row,n.col,i)})),l("col-after",Qf.table.actionColumnAfter(),"lucide-arrow-right",(function(e){var t=e.table,n=e.cell,i=t.alignments[n.col];t.insertColumn(n.row,n.col+1,i)})),l("col-left",Qf.table.actionColumnLeft(),"lucide-arrow-left",(function(e){var t=e.table,n=e.cell;t.moveColumn(n.col,n.col-1,n.row)}),(function(e){return e.cell.col>0})),l("col-right",Qf.table.actionColumnRight(),"lucide-arrow-right",(function(e){var t=e.table,n=e.cell;t.moveColumn(n.col,n.col+1,n.row)}),(function(e){var t=e.table;return e.cell.col<t.alignments.length-1})),l("col-copy",Qf.table.actionDuplicateColumn(),"lucide-copy",(function(e){var t=e.table,n=e.cell,i=t.alignments[n.col];t.insertColumn(n.row,n.col,i,!0)})),l("col-delete",Qf.table.actionDeleteColumn(),"lucide-trash-2",(function(e){var t=e.table,n=e.cell;t.removeColumn(n.row,n.col)})),l("col-align-left",Qf.table.actionAlignLeft(),"lucide-align-left",(function(e){var t=e.table,n=e.cell;t.setAlignment([n.col],"start")})),l("col-align-center",Qf.table.actionAlignCenter(),"lucide-align-center",(function(e){var t=e.table,n=e.cell;t.setAlignment([n.col],"center")})),l("col-align-right",Qf.table.actionAlignRight(),"lucide-align-right",(function(e){var t=e.table,n=e.cell;t.setAlignment([n.col],"end")})),Zl.isMobileApp&&(n.addCommand({id:"editor:cut",name:Qf.interface.menu.cut(),icon:"lucide-scissors",editorCallback:function(e){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,window.navigator.clipboard.writeText(e.getSelection())];case 1:return t.sent(),e.replaceSelection(""),[2]}}))}))}}),n.addCommand({id:"editor:copy",name:Qf.interface.menu.copy(),icon:"lucide-copy",editorCallback:function(e){return g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,window.navigator.clipboard.writeText(e.getSelection())];case 1:return[2,t.sent()]}}))}))}}),n.addCommand({id:"editor:paste",name:Qf.interface.menu.paste(),icon:"lucide-clipboard-type",editorCallback:function(e){return g(t,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return n=(t=e).replaceSelection,[4,window.navigator.clipboard.readText()];case 1:return[2,n.apply(t,[i.sent()])]}}))}))}})),n.addCommand({id:"editor:context-menu",name:Qf.commands.contextMenu(),icon:"lucide-menu",editorCallback:function(e,t){if(e.editorComponent.tableCell){var n=e.editorComponent.tableCell;t=n.owner,e=n.editor}var i=e.getCursor("head"),r=e.coordsAtPos(i);if(r){if(Zl.isDesktopApp){var o=e.containerEl.win.electron.remote.getCurrentWebContents(),a=Math.pow(1.2,o.getZoomLevel()),s=r.left*a,l=(r.top+r.bottom)/2*a;return o.sendInputEvent({type:"mouseDown",x:s,y:l,button:"right"}),void o.sendInputEvent({type:"mouseUp",x:s,y:l,button:"right"})}t.editMode.onContextMenu(new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:0,buttons:0,clientX:r.left,clientY:r.top}),!0)}}})}(this),Zl.isDesktopApp&&eB.registerPostProcessor((function(t,n){return e.fixFileLinks(t,n.sourcePath)}))},e.prototype.disableCssTransition=function(){this.dom.appContainerEl.addClass("no-transition")},e.prototype.enableCssTransition=function(){this.dom.appContainerEl.removeClass("no-transition")},e.prototype.getAppTitle=function(e){return e?e+" - "+this.title:this.title},e.prototype.getWebviewPartition=function(){return"persist:vault-"+this.appId},e.prototype.fixFileLinks=function(e,t){for(var n=0,i=e.findAll("img, audio, video, source, iframe");n<i.length;n++){var r=i[n],o=r.getAttr("src");if(o&&(Zl.isDesktopApp&&o.startsWith("file:///")&&(r.src=Zl.resourcePathPrefix+o.substring(8)),Kk(o)&&("IMG"===r.tagName||"AUDIO"===r.tagName||"VIDEO"===r.tagName||"SOURCE"===r.tagName))){o=Qk($k(o));var a=this.metadataCache.getFirstLinkpathDest(o,t);a&&(r.src=this.vault.getResourcePath(a))}}},e.prototype.getTheme=function(){return this.customCss.isDarkMode()?"obsidian":"moonstone"},e.prototype.changeTheme=function(e){var t=this;e&&(this.disableCssTransition(),this.vault.setConfig("theme",e),setTimeout((function(){t.enableCssTransition()}),200))},e.prototype.updateTheme=function(){var e=this.vault.getConfig("theme"),t="system"===e,n="obsidian"===e;t&&(n=window.matchMedia("(prefers-color-scheme: dark)").matches,!Zl.isDesktopApp||Zl.isMacOS||Zl.isWin||(n=window.electron.remote.nativeTheme.shouldUseDarkColors));var i=document.body,r=!1;if(i.hasClass("theme-light")!==!n&&(i.toggleClass("theme-light",!n),r=!0),i.hasClass("theme-dark")!==n&&(i.toggleClass("theme-dark",n),r=!0),r&&this.workspace.trigger("css-change"),Zl.isMobileApp)if(vA.setStyle({style:n?V.Dark:V.Light}),Zl.isAndroidApp){var o=FI("--system-status-background");o&&0!==o.a||(o=SI(getComputedStyle(document.body).backgroundColor));var a=o?LI(o):n?"#161616":"#f2f3f5";vA.setBackgroundColor({color:a})}else Zl.isIosApp&&(bA.setStyle({style:t?R.Default:n?R.Dark:R.Light}),t||xw())},e.prototype.updateInlineTitleDisplay=function(){document.body.toggleClass("show-inline-title",this.vault.getConfig("showInlineTitle"))},e.prototype.updateViewHeaderDisplay=function(){document.body.toggleClass("show-view-header",this.vault.getConfig("showViewHeader"))},e.prototype.updateRibbonDisplay=function(){document.body.toggleClass("show-ribbon",this.vault.getConfig("showRibbon"))},e.prototype.updateFontFamily=function(){var e=P0(this.vault.getConfig("interfaceFontFamily"));document.body.style.setProperty("--font-interface-override",I0(e));var t=P0(this.vault.getConfig("textFontFamily"));document.body.style.setProperty("--font-text-override",I0(t)),t?document.body.style.setProperty("--font-print-override",I0(t)):document.body.style.removeProperty("--font-print-override");var n=P0(this.vault.getConfig("monospaceFontFamily"));document.body.style.setProperty("--font-monospace-override",I0(n)),this.workspace.trigger("css-change")},e.prototype.updateFontSize=function(){var e=this.vault.getConfig("baseFontSize");e=Math.clamp(e,10,30),document.body.style.setProperty("--font-text-size","".concat(e,"px")),document.documentElement.style.setProperty("font-size","".concat(e,"px")),this.workspace.trigger("css-change")},e.prototype.updateUseNativeMenu=function(){var e=this.vault.getConfig("nativeMenus");Zl.isMacOS&&null===e&&(e=!0),PA.useNativeMenu=e},e.prototype.updateTabSize=function(){var e=this.vault.getConfig("tabSize");document.body.style.setProperty("--indent-size",String(e))},e.prototype.showReleaseNotes=function(e){Zl.isDesktopApp&&this.workspace.getLeaf(!0).setViewState({type:lW,active:!0,state:{currentVersion:e}})},e.prototype.updateAccentColor=function(){var e=this.vault.getConfig("accentColor");this.setAccentColor(e)},e.prototype.getAccentColor=function(){var e,t,n,i=this.vault.getConfig("accentColor"),r=document.body;if(!i){var o=getComputedStyle(r),a=o.getPropertyValue("--accent-h"),s=o.getPropertyValue("--accent-s"),l=o.getPropertyValue("--accent-l");return LI(TI((e=a,n=l,(t=s).endsWith("%")&&(t=t.slice(0,-1)),e.endsWith("%")&&(e=e.slice(0,-1)),{h:parseInt(e),s:parseInt(t),l:parseInt(n)})))}return i},e.prototype.setAccentColor=function(e){var t=document.body;if(!e)return t.style.removeProperty("--text-on-accent"),t.style.removeProperty("--accent-h"),t.style.removeProperty("--accent-s"),void t.style.removeProperty("--accent-l");var n=PI(e);if(!n)return t.style.removeProperty("--text-on-accent"),t.style.removeProperty("--accent-h"),t.style.removeProperty("--accent-s"),void t.style.removeProperty("--accent-l");var i=DI(n),r=i.h,o=i.s,a=i.l;t.style.setProperty("--accent-h",String(r)),t.style.setProperty("--accent-s","".concat(o,"%")),t.style.setProperty("--accent-l","".concat(a,"%")),BI(n)?t.style.setProperty("--text-on-accent","var(--text-on-accent-inverted)"):t.style.removeProperty("--text-on-accent")},e.prototype.garbleText=function(){this.dom.appContainerEl.addClass("is-text-garbled")},e.prototype.importAttachments=function(e,t){return g(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,d;return y(this,(function(p){switch(p.label){case 0:if(0===e.length)return[2,[]];n=this.vault,i=[],r=0,p.label=1;case 1:return r<e.length?(o=e[r],a=o.name,s=o.extension,l=o.filepath,c=o.data,l&&(h=n.resolveFilePath(l))?(i.push(h),[3,7]):[4,c]):[3,8];case 2:return(u=p.sent())?("Pasted image"===a&&(a+=" "+window.moment().format("YYYYMMDDHHmmss")),h=void 0,t?(d=n.getAvailablePath(t.getParentPrefix()+a,s),[4,n.createBinary(d,u)]):[3,4]):[3,7];case 3:return h=p.sent(),[3,6];case 4:return[4,this.saveAttachment(a,s,u)];case 5:h=p.sent(),p.label=6;case 6:i.push(h),p.label=7;case 7:return r++,[3,1];case 8:return[2,i]}}))}))},e.prototype.saveAttachment=function(e,t,n){return g(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=this.workspace.getActiveFile(),[4,this.vault.getAvailablePathForAttachments(e,t,i)];case 1:return r=o.sent(),[4,this.vault.createBinary(r,n)];case 2:return[2,o.sent()]}}))}))},e.prototype.openVaultChooser=function(e){Zl.isDesktopApp?(Ef((function(e){e.ipcRenderer.sendSync("starter")})),e&&window.close()):Zl.isMobileApp&&(localStorage.removeItem("mobile-selected-vault"),setTimeout((function(){location.reload()}),500))},e.prototype.openHelp=function(){Zl.isDesktopApp?Ef((function(e){e.ipcRenderer.sendSync("help")})):window.open("https://help.obsidian.md/","_blank")},e.prototype.openWithDefaultApp=function(e){return g(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:if(t=this.vault.adapter,Zl.isDesktopApp&&t instanceof mu&&(n=t.getFullPath(e),Ef((function(e){var t=e.shell;t&&(t.openPath?t.openPath(n):t.openItem(n))}))),!(Zl.isMobileApp&&uA&&t instanceof eW))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.open(e)];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),new JA(i.message||Qf.interface.msgFailedToLoadFile({filepath:e})),[3,4];case 4:return[2]}}))}))},e.prototype.showInFolder=function(e){var t=this;if(Zl.isDesktopApp){var n=this.vault.adapter;if(n instanceof mu){var i=n.getFullPath(e);g(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,n.exists(e)];case 1:return t.sent()?Hf(i):new JA(Qf.dialogue.msgFileOrFolderNotFound({path:i})),[2]}}))}))}}},e.prototype.getObsidianUrl=function(e){var t=this.vault.getName(),n=ru(e.path);return"obsidian://open?vault="+encodeURIComponent(t)+"&file="+encodeURIComponent(n)},e.prototype.copyObsidianUrl=function(e){yc(this.getObsidianUrl(e)),new JA(Qf.interface.copied({item:Qf.interface.url()}))},e.prototype.registerQuitHook=function(){var e=this;window.onbeforeunload=function(t){window.onbeforeunload=null;var n=e.workspace;if(n){var i=new vL;n.trigger("quit",i),i.isEmpty()||(t.preventDefault(),t.returnValue="Saving...",iG.instance.show().setMessage("Saving..."),g(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.promise()];case 1:return e.sent(),window.close(),[2]}}))})))}}},e.prototype.loadLocalStorage=function(e){try{var t=localStorage.getItem(this.appId+"-"+e);if(t)return JSON.parse(t)}catch(e){}return null},e.prototype.saveLocalStorage=function(e,t){try{t?localStorage.setItem(this.appId+"-"+e,JSON.stringify(t)):localStorage.removeItem(this.appId+"-"+e)}catch(e){}},e.prototype.on=function(){},e.prototype.setTheme=function(){var e=this;setTimeout((function(){return e.updateTheme()}))},e.prototype.emulateMobile=function(e){e?localStorage[v2]=1:delete localStorage[v2],window.location.reload()},e.prototype.debugMode=function(e){e?this.saveLocalStorage(g2,"1"):(this.saveLocalStorage(g2,null),localStorage.removeItem(g2)),window.location.reload()},e.getOverrideConfigDir=function(e){var t=localStorage.getItem(e+"-config");return t&&String.isString(t)?t:null},e.prototype.getSpellcheckLanguages=function(){var e=this.vault.getConfig("spellcheckLanguages"),t=localStorage.getItem("spellcheck-languages");if(t&&e&&this.vault.setConfig("spellcheckLanguages",null),t)try{var n=JSON.parse(t);Array.isArray(n)&&(e=n)}catch(e){}else localStorage.setItem("spellcheck-languages",JSON.stringify(e));return e},e.prototype.setSpellcheckLanguages=function(e){this.vault.getConfig("spellcheckLanguages")&&this.vault.setConfig("spellcheckLanguages",null),e&&e.length>0?localStorage.setItem("spellcheck-languages",JSON.stringify(e)):localStorage.removeItem("spellcheck-languages"),Zl.isDesktopApp&&Rf(e)},e.prototype.isVimEnabled=function(){return Zl.isMobile?!!localStorage.getItem("vim"):this.vault.getConfig("vimMode")},e}();!function(){g(this,void 0,void 0,(function(){var e,t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return Zl.isDesktopApp=!0,Zl.isDesktop=!0,Jj("initialization"),[4,Zf];case 1:if(s.sent(),e=Mf("electron"),t=e.ipcRenderer.sendSync("vault"),n=t.id,!(i=t.path)||!Mf("original-fs").existsSync(i))return e.ipcRenderer.sendSync("starter"),window.close(),[2];try{(r=navigator.clipboard).readText=function(){return g(this,void 0,Promise,(function(){return y(this,(function(e){return[2,window.electron.clipboard.readText()]}))}))},r.writeText=function(e){return g(this,void 0,Promise,(function(){return y(this,(function(t){return window.electron.clipboard.writeText(e),[2]}))}))},Object.defineProperty(navigator,"clipboard",{get:function(){if(activeWindow===window)return r;var e=activeWindow.navigator.clipboard;return e.readText=r.readText,e.writeText=r.writeText,e}})}catch(e){}return Zl.isLinux&&window.addEventListener("mousedown",(function(e){if(1===e.button){var t=e.win,n=t.document,i=n.activeElement,r=e,o=!1,a=function(e){if(1===e.button)if(t.removeEventListener("mouseup",a),r.defaultPrevented)e.preventDefault();else if(n.activeElement!==i||o)e.preventDefault();else{var s,l=function(e){e.defaultPrevented||u()},c=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},u=function(){t.removeEventListener("auxclick",l),t.removeEventListener("paste",c,{capture:!0}),t.clearTimeout(s)};t.addEventListener("auxclick",l),t.addEventListener("paste",c,{capture:!0}),s=t.setTimeout(u,100)}};if(t.addEventListener("mouseup",a),i&&i.instanceOf(HTMLElement)&&i!==n.body){var s=e.targetNode;if(i.contains(s)){if(!i.instanceOf(HTMLInputElement))for(;s&&s!==i;){if(s.instanceOf(HTMLElement)){if("false"===s.contentEditable){o=!0;break}if("true"===s.contentEditable)break}s=s.parentElement}}else i.blur()}else o=!0}})),JR(window),p2(window),YR(window),o=new mu(i),document.title=Kc(tu(i))+" - Obsidian v"+e.ipcRenderer.sendSync("version"),ready((function(){return g(a,void 0,void 0,(function(){return y(this,(function(e){return window.app=new y2(o,n),[2]}))}))})),[2]}}))}))}()})()})();